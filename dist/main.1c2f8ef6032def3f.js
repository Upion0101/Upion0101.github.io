"use strict";(self.webpackChunkmy_angular_website=self.webpackChunkmy_angular_website||[]).push([[792],{1076:(fn,ot,J)=>{J.d(ot,{$L:()=>en,$g:()=>zo,A4:()=>Ee,Am:()=>Ei,As:()=>te,Bd:()=>_e,Cv:()=>Hr,FA:()=>we,Fy:()=>Yt,HN:()=>Nt,Hk:()=>m,I9:()=>Bt,Im:()=>qi,K3:()=>Fe,KA:()=>Et,Ku:()=>gt,Ll:()=>it,OE:()=>Ln,T9:()=>Ct,Uj:()=>ht,XA:()=>It,ZQ:()=>At,bD:()=>gr,cY:()=>_t,dI:()=>Pn,eX:()=>at,g:()=>Ze,gR:()=>Wn,gz:()=>xn,hp:()=>Xn,jZ:()=>Gt,kH:()=>yo,kj:()=>Kt,lT:()=>hr,lV:()=>Kn,nr:()=>We,oD:()=>Jn,od:()=>yt,p7:()=>Ut,qc:()=>lr,sr:()=>Nn,tD:()=>ir,u:()=>Ie,vA:()=>B,yw:()=>mn,zW:()=>Qe,zw:()=>Xe});const T={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},B=function(se,ae){if(!se)throw m(ae)},m=function(se){return new Error("Firebase Database ("+T.SDK_VERSION+") INTERNAL ASSERT FAILED: "+se)},ce=function(se){const ae=[];let ve=0;for(let tt=0;tt<se.length;tt++){let Ne=se.charCodeAt(tt);Ne<128?ae[ve++]=Ne:Ne<2048?(ae[ve++]=Ne>>6|192,ae[ve++]=63&Ne|128):55296==(64512&Ne)&&tt+1<se.length&&56320==(64512&se.charCodeAt(tt+1))?(Ne=65536+((1023&Ne)<<10)+(1023&se.charCodeAt(++tt)),ae[ve++]=Ne>>18|240,ae[ve++]=Ne>>12&63|128,ae[ve++]=Ne>>6&63|128,ae[ve++]=63&Ne|128):(ae[ve++]=Ne>>12|224,ae[ve++]=Ne>>6&63|128,ae[ve++]=63&Ne|128)}return ae},Fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(se,ae){if(!Array.isArray(se))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ve=ae?this.byteToCharMapWebSafe_:this.byteToCharMap_,tt=[];for(let Ne=0;Ne<se.length;Ne+=3){const Ft=se[Ne],vt=Ne+1<se.length,kn=vt?se[Ne+1]:0,Ci=Ne+2<se.length,On=Ci?se[Ne+2]:0;let Tn=(15&kn)<<2|On>>6,vo=63&On;Ci||(vo=64,vt||(Tn=64)),tt.push(ve[Ft>>2],ve[(3&Ft)<<4|kn>>4],ve[Tn],ve[vo])}return tt.join("")},encodeString(se,ae){return this.HAS_NATIVE_SUPPORT&&!ae?btoa(se):this.encodeByteArray(ce(se),ae)},decodeString(se,ae){return this.HAS_NATIVE_SUPPORT&&!ae?atob(se):function(se){const ae=[];let ve=0,tt=0;for(;ve<se.length;){const Ne=se[ve++];if(Ne<128)ae[tt++]=String.fromCharCode(Ne);else if(Ne>191&&Ne<224){const Ft=se[ve++];ae[tt++]=String.fromCharCode((31&Ne)<<6|63&Ft)}else if(Ne>239&&Ne<365){const Ci=((7&Ne)<<18|(63&se[ve++])<<12|(63&se[ve++])<<6|63&se[ve++])-65536;ae[tt++]=String.fromCharCode(55296+(Ci>>10)),ae[tt++]=String.fromCharCode(56320+(1023&Ci))}else{const Ft=se[ve++],vt=se[ve++];ae[tt++]=String.fromCharCode((15&Ne)<<12|(63&Ft)<<6|63&vt)}}return ae.join("")}(this.decodeStringToByteArray(se,ae))},decodeStringToByteArray(se,ae){this.init_();const ve=ae?this.charToByteMapWebSafe_:this.charToByteMap_,tt=[];for(let Ne=0;Ne<se.length;){const Ft=ve[se.charAt(Ne++)],kn=Ne<se.length?ve[se.charAt(Ne)]:0;++Ne;const On=Ne<se.length?ve[se.charAt(Ne)]:64;++Ne;const Hn=Ne<se.length?ve[se.charAt(Ne)]:64;if(++Ne,null==Ft||null==kn||null==On||null==Hn)throw new je;tt.push(Ft<<2|kn>>4),64!==On&&(tt.push(kn<<4&240|On>>2),64!==Hn&&tt.push(On<<6&192|Hn))}return tt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let se=0;se<this.ENCODED_VALS.length;se++)this.byteToCharMap_[se]=this.ENCODED_VALS.charAt(se),this.charToByteMap_[this.byteToCharMap_[se]]=se,this.byteToCharMapWebSafe_[se]=this.ENCODED_VALS_WEBSAFE.charAt(se),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[se]]=se,se>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(se)]=se,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(se)]=se)}}};class je extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Et=function(se){const ae=ce(se);return Fe.encodeByteArray(ae,!0)},ht=function(se){return Et(se).replace(/\./g,"")},Ie=function(se){try{return Fe.decodeString(se,!0)}catch(ae){console.error("base64Decode failed: ",ae)}return null};function Ee(se){return Xe(void 0,se)}function Xe(se,ae){if(!(ae instanceof Object))return ae;switch(ae.constructor){case Date:return new Date(ae.getTime());case Object:void 0===se&&(se={});break;case Array:se=[];break;default:return ae}for(const ve in ae)!ae.hasOwnProperty(ve)||!Ot(ve)||(se[ve]=Xe(se[ve],ae[ve]));return se}function Ot(se){return"__proto__"!==se}const sn=()=>{try{return function bt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const se=process.env.__FIREBASE_DEFAULTS__;return se?JSON.parse(se):void 0})()||(()=>{if(typeof document>"u")return;let se;try{se=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ae=se&&Ie(se[1]);return ae&&JSON.parse(ae)})()}catch(se){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${se}`)}},Ct=()=>{var se;return null===(se=sn())||void 0===se?void 0:se.config},It=se=>{var ae;return null===(ae=sn())||void 0===ae?void 0:ae[`_${se}`]};class _t{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ae,ve)=>{this.resolve=ae,this.reject=ve})}wrapCallback(ae){return(ve,tt)=>{ve?this.reject(ve):this.resolve(tt),"function"==typeof ae&&(this.promise.catch(()=>{}),1===ae.length?ae(ve):ae(ve,tt))}}}function Yt(se,ae){if(se.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const tt=ae||"demo-project",Ne=se.iat||0,Ft=se.sub||se.user_id;if(!Ft)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const vt=Object.assign({iss:`https://securetoken.google.com/${tt}`,aud:tt,iat:Ne,exp:Ne+3600,auth_time:Ne,sub:Ft,user_id:Ft,firebase:{sign_in_provider:"custom",identities:{}}},se);return[ht(JSON.stringify({alg:"none",type:"JWT"})),ht(JSON.stringify(vt)),""].join(".")}function At(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Gt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function it(){var se;const ae=null===(se=sn())||void 0===se?void 0:se.forceEnvironment;if("node"===ae)return!0;if("browser"===ae)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function _e(){return typeof window<"u"||Ut()}function Ut(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Nn(){const se="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof se&&void 0!==se.id}function Kn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function hr(){const se=At();return se.indexOf("MSIE ")>=0||se.indexOf("Trident/")>=0}function zo(){return!0===T.NODE_CLIENT||!0===T.NODE_ADMIN}function We(){return!it()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qe(){try{return"object"==typeof indexedDB}catch{return!1}}function at(){return new Promise((se,ae)=>{try{let ve=!0;const tt="validate-browser-context-for-indexeddb-analytics-module",Ne=self.indexedDB.open(tt);Ne.onsuccess=()=>{Ne.result.close(),ve||self.indexedDB.deleteDatabase(tt),se(!0)},Ne.onupgradeneeded=()=>{ve=!1},Ne.onerror=()=>{var Ft;ae((null===(Ft=Ne.error)||void 0===Ft?void 0:Ft.message)||"")}}catch(ve){ae(ve)}})}class Ze extends Error{constructor(ae,ve,tt){super(ve),this.code=ae,this.customData=tt,this.name="FirebaseError",Object.setPrototypeOf(this,Ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,we.prototype.create)}}class we{constructor(ae,ve,tt){this.service=ae,this.serviceName=ve,this.errors=tt}create(ae,...ve){const tt=ve[0]||{},Ne=`${this.service}/${ae}`,Ft=this.errors[ae],vt=Ft?function Mn(se,ae){return se.replace(ar,(ve,tt)=>{const Ne=ae[tt];return null!=Ne?String(Ne):`<${tt}?>`})}(Ft,tt):"Error";return new Ze(Ne,`${this.serviceName}: ${vt} (${Ne}).`,tt)}}const ar=/\{\$([^}]+)}/g;function en(se){return JSON.parse(se)}function te(se){return JSON.stringify(se)}const fr=function(se){let ae={},ve={},tt={},Ne="";try{const Ft=se.split(".");ae=en(Ie(Ft[0])||""),ve=en(Ie(Ft[1])||""),Ne=Ft[2],tt=ve.d||{},delete ve.d}catch{}return{header:ae,claims:ve,data:tt,signature:Ne}},Hr=function(se){const ve=fr(se).claims;return!!ve&&"object"==typeof ve&&ve.hasOwnProperty("iat")},lr=function(se){const ae=fr(se).claims;return"object"==typeof ae&&!0===ae.admin};function Wn(se,ae){return Object.prototype.hasOwnProperty.call(se,ae)}function mn(se,ae){if(Object.prototype.hasOwnProperty.call(se,ae))return se[ae]}function qi(se){for(const ae in se)if(Object.prototype.hasOwnProperty.call(se,ae))return!1;return!0}function yo(se,ae,ve){const tt={};for(const Ne in se)Object.prototype.hasOwnProperty.call(se,Ne)&&(tt[Ne]=ae.call(ve,se[Ne],Ne,se));return tt}function gr(se,ae){if(se===ae)return!0;const ve=Object.keys(se),tt=Object.keys(ae);for(const Ne of ve){if(!tt.includes(Ne))return!1;const Ft=se[Ne],vt=ae[Ne];if(Yr(Ft)&&Yr(vt)){if(!gr(Ft,vt))return!1}else if(Ft!==vt)return!1}for(const Ne of tt)if(!ve.includes(Ne))return!1;return!0}function Yr(se){return null!==se&&"object"==typeof se}function Ei(se){const ae=[];for(const[ve,tt]of Object.entries(se))Array.isArray(tt)?tt.forEach(Ne=>{ae.push(encodeURIComponent(ve)+"="+encodeURIComponent(Ne))}):ae.push(encodeURIComponent(ve)+"="+encodeURIComponent(tt));return ae.length?"&"+ae.join("&"):""}function Bt(se){const ae={};return se.replace(/^\?/,"").split("&").forEach(tt=>{if(tt){const[Ne,Ft]=tt.split("=");ae[decodeURIComponent(Ne)]=decodeURIComponent(Ft)}}),ae}function Xn(se){const ae=se.indexOf("?");if(!ae)return"";const ve=se.indexOf("#",ae);return se.substring(ae,ve>0?ve:void 0)}class xn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ae=1;ae<this.blockSize;++ae)this.pad_[ae]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ae,ve){ve||(ve=0);const tt=this.W_;if("string"==typeof ae)for(let Hn=0;Hn<16;Hn++)tt[Hn]=ae.charCodeAt(ve)<<24|ae.charCodeAt(ve+1)<<16|ae.charCodeAt(ve+2)<<8|ae.charCodeAt(ve+3),ve+=4;else for(let Hn=0;Hn<16;Hn++)tt[Hn]=ae[ve]<<24|ae[ve+1]<<16|ae[ve+2]<<8|ae[ve+3],ve+=4;for(let Hn=16;Hn<80;Hn++){const Tn=tt[Hn-3]^tt[Hn-8]^tt[Hn-14]^tt[Hn-16];tt[Hn]=4294967295&(Tn<<1|Tn>>>31)}let On,$t,Ne=this.chain_[0],Ft=this.chain_[1],vt=this.chain_[2],kn=this.chain_[3],Ci=this.chain_[4];for(let Hn=0;Hn<80;Hn++){Hn<40?Hn<20?(On=kn^Ft&(vt^kn),$t=1518500249):(On=Ft^vt^kn,$t=1859775393):Hn<60?(On=Ft&vt|kn&(Ft|vt),$t=2400959708):(On=Ft^vt^kn,$t=3395469782);const Tn=(Ne<<5|Ne>>>27)+On+Ci+$t+tt[Hn]&4294967295;Ci=kn,kn=vt,vt=4294967295&(Ft<<30|Ft>>>2),Ft=Ne,Ne=Tn}this.chain_[0]=this.chain_[0]+Ne&4294967295,this.chain_[1]=this.chain_[1]+Ft&4294967295,this.chain_[2]=this.chain_[2]+vt&4294967295,this.chain_[3]=this.chain_[3]+kn&4294967295,this.chain_[4]=this.chain_[4]+Ci&4294967295}update(ae,ve){if(null==ae)return;void 0===ve&&(ve=ae.length);const tt=ve-this.blockSize;let Ne=0;const Ft=this.buf_;let vt=this.inbuf_;for(;Ne<ve;){if(0===vt)for(;Ne<=tt;)this.compress_(ae,Ne),Ne+=this.blockSize;if("string"==typeof ae){for(;Ne<ve;)if(Ft[vt]=ae.charCodeAt(Ne),++vt,++Ne,vt===this.blockSize){this.compress_(Ft),vt=0;break}}else for(;Ne<ve;)if(Ft[vt]=ae[Ne],++vt,++Ne,vt===this.blockSize){this.compress_(Ft),vt=0;break}}this.inbuf_=vt,this.total_+=ve}digest(){const ae=[];let ve=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Ne=this.blockSize-1;Ne>=56;Ne--)this.buf_[Ne]=255&ve,ve/=256;this.compress_(this.buf_);let tt=0;for(let Ne=0;Ne<5;Ne++)for(let Ft=24;Ft>=0;Ft-=8)ae[tt]=this.chain_[Ne]>>Ft&255,++tt;return ae}}function ir(se,ae){const ve=new Nr(se,ae);return ve.subscribe.bind(ve)}class Nr{constructor(ae,ve){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ve,this.task.then(()=>{ae(this)}).catch(tt=>{this.error(tt)})}next(ae){this.forEachObserver(ve=>{ve.next(ae)})}error(ae){this.forEachObserver(ve=>{ve.error(ae)}),this.close(ae)}complete(){this.forEachObserver(ae=>{ae.complete()}),this.close()}subscribe(ae,ve,tt){let Ne;if(void 0===ae&&void 0===ve&&void 0===tt)throw new Error("Missing Observer.");Ne=function zr(se,ae){if("object"!=typeof se||null===se)return!1;for(const ve of ae)if(ve in se&&"function"==typeof se[ve])return!0;return!1}(ae,["next","error","complete"])?ae:{next:ae,error:ve,complete:tt},void 0===Ne.next&&(Ne.next=Vr),void 0===Ne.error&&(Ne.error=Vr),void 0===Ne.complete&&(Ne.complete=Vr);const Ft=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ne.error(this.finalError):Ne.complete()}catch{}}),this.observers.push(Ne),Ft}unsubscribeOne(ae){void 0===this.observers||void 0===this.observers[ae]||(delete this.observers[ae],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ae){if(!this.finalized)for(let ve=0;ve<this.observers.length;ve++)this.sendOne(ve,ae)}sendOne(ae,ve){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ae])try{ve(this.observers[ae])}catch(tt){typeof console<"u"&&console.error&&console.error(tt)}})}close(ae){this.finalized||(this.finalized=!0,void 0!==ae&&(this.finalError=ae),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vr(){}const yt=function(se,ae,ve,tt){let Ne;if(tt<ae?Ne="at least "+ae:tt>ve&&(Ne=0===ve?"none":"no more than "+ve),Ne)throw new Error(se+" failed: Was called with "+tt+(1===tt?" argument.":" arguments.")+" Expects "+Ne+".")};function Pn(se,ae){return`${se} failed: ${ae} argument `}function Jn(se,ae,ve,tt){if((!tt||ve)&&"function"!=typeof ve)throw new Error(Pn(se,ae)+"must be a valid function.")}function Nt(se,ae,ve,tt){if((!tt||ve)&&("object"!=typeof ve||null===ve))throw new Error(Pn(se,ae)+"must be a valid context object.")}const Kt=function(se){const ae=[];let ve=0;for(let tt=0;tt<se.length;tt++){let Ne=se.charCodeAt(tt);if(Ne>=55296&&Ne<=56319){const Ft=Ne-55296;tt++,B(tt<se.length,"Surrogate pair missing trail surrogate."),Ne=65536+(Ft<<10)+(se.charCodeAt(tt)-56320)}Ne<128?ae[ve++]=Ne:Ne<2048?(ae[ve++]=Ne>>6|192,ae[ve++]=63&Ne|128):Ne<65536?(ae[ve++]=Ne>>12|224,ae[ve++]=Ne>>6&63|128,ae[ve++]=63&Ne|128):(ae[ve++]=Ne>>18|240,ae[ve++]=Ne>>12&63|128,ae[ve++]=Ne>>6&63|128,ae[ve++]=63&Ne|128)}return ae},Ln=function(se){let ae=0;for(let ve=0;ve<se.length;ve++){const tt=se.charCodeAt(ve);tt<128?ae++:tt<2048?ae+=2:tt>=55296&&tt<=56319?(ae+=4,ve++):ae+=3}return ae};function gt(se){return se&&se._delegate?se._delegate:se}},541:(fn,ot,J)=>{var T=J(345),B=J(6814),m=J(3953);let ce=(()=>{class i{ngOnInit(){}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=m.VBU({type:i,selectors:[["app-home"]],decls:74,vars:0,consts:[[1,"home-page"],[1,"hero-section"],["autoplay","","muted","","loop","","playsinline","",1,"hero-video"],["src","assets/videos/home.mp4","type","video/mp4"],[1,"hero-overlay"],[1,"hero-content"],["routerLink","/about",1,"hero-button"],[1,"about-section"],[1,"about-content"],["routerLink","/bob-life",1,"about-button"],[1,"about-image"],["src","assets/bob.jpg","alt","Bob posing"],[1,"stories-section"],[1,"stories-grid"],[1,"story-card"],["src","assets/story/story1.png","alt","Story 1"],["routerLink","/stories/the-great-neck",1,"read-more"],["src","assets/story/story2.png","alt","Story 2"],["routerLink","/stories/missing-tube-treats",1,"read-more"],["src","assets/story/story3.png","alt","Story 3"],["routerLink","/stories/midnight-maymie",1,"read-more"],[1,"blog-section"],["routerLink","/blog",1,"cta-button"],[1,"additional-links-section"],[1,"link-item"],["routerLink","/bob-life",1,"cta-button"],["routerLink","/name-tree",1,"cta-button"],["routerLink","/quiz",1,"cta-button"],["routerLink","/anthem",1,"cta-button"],["routerLink","/faq",1,"cta-button"]],template:function(o,a){1&o&&(m.j41(0,"main",0)(1,"section",1)(2,"video",2),m.nrm(3,"source",3),m.EFF(4," Your browser does not support the video tag. "),m.k0s(),m.nrm(5,"div",4),m.j41(6,"div",5)(7,"h1"),m.EFF(8,"Welcome to Bob's World"),m.k0s(),m.j41(9,"p"),m.EFF(10,"Welcome to the official site of Bob, the most charming cat you\u2019ll ever meet."),m.k0s(),m.j41(11,"a",6),m.EFF(12,"Learn more about Bob"),m.k0s()()(),m.j41(13,"section",7)(14,"div",8)(15,"h2"),m.EFF(16,"Meet Bob"),m.k0s(),m.j41(17,"p"),m.EFF(18," This is my cat Bob. With her angel like fur and endless charm, Bob has stolen the hearts of everyone she meets. To see how she does this, check out her routine here! "),m.k0s(),m.j41(19,"a",9),m.EFF(20,"A day in Bob's Life"),m.k0s()(),m.j41(21,"div",10),m.nrm(22,"img",11),m.k0s()(),m.j41(23,"section",12)(24,"h2"),m.EFF(25,"Bob's Stories"),m.k0s(),m.j41(26,"div",13)(27,"div",14),m.nrm(28,"img",15),m.j41(29,"h3"),m.EFF(30,"The Great Neck"),m.k0s(),m.j41(31,"p"),m.EFF(32,"Follow Bob's journey to claim the comfiest position on her owners neck!"),m.k0s(),m.j41(33,"a",16),m.EFF(34,"Read More"),m.k0s()(),m.j41(35,"div",14),m.nrm(36,"img",17),m.j41(37,"h3"),m.EFF(38,"The Mystery of the Missing Tube Treats"),m.k0s(),m.j41(39,"p"),m.EFF(40,"Can Bob uncover the truth behind the disappearing snacks?"),m.k0s(),m.j41(41,"a",18),m.EFF(42,"Read More"),m.k0s()(),m.j41(43,"div",14),m.nrm(44,"img",19),m.j41(45,"h3"),m.EFF(46,"Midnight Maymie"),m.k0s(),m.j41(47,"p"),m.EFF(48,"Find out about Bob's night-time antics."),m.k0s(),m.j41(49,"a",20),m.EFF(50,"Read More"),m.k0s()()()(),m.j41(51,"section",21)(52,"h2"),m.EFF(53,"Bob's Blog"),m.k0s(),m.j41(54,"p"),m.EFF(55,"Catch up on what all the Bob lovers are talking about."),m.k0s(),m.j41(56,"a",22),m.EFF(57,"Read Bob's Blog"),m.k0s()(),m.j41(58,"section",23)(59,"div",24)(60,"a",25),m.EFF(61,"A Day in Bob's Life"),m.k0s()(),m.j41(62,"div",24)(63,"a",26),m.EFF(64,"Bob's Names"),m.k0s()(),m.j41(65,"div",24)(66,"a",27),m.EFF(67,"Bob Quiz"),m.k0s()(),m.j41(68,"div",24)(69,"a",28),m.EFF(70,"Bob's Anthem"),m.k0s()(),m.j41(71,"div",24)(72,"a",29),m.EFF(73,"FAQ"),m.k0s()()()())},dependencies:[B.Wk],styles:[".highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;line-height:1.6;margin:0;padding:0}.hero-section[_ngcontent-%COMP%]{position:relative;height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;overflow:hidden}.hero-section[_ngcontent-%COMP%]   .hero-video[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:100%;height:100%;object-fit:cover;transform:translate(-50%,-50%);z-index:-1;opacity:.4}.hero-section[_ngcontent-%COMP%]   .hero-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#0009,#0003);z-index:0}.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{position:relative;z-index:1;color:#fff}.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:700;margin-bottom:1rem;text-shadow:0 2px 5px rgba(0,0,0,.3)}.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:2rem}.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   .hero-button[_ngcontent-%COMP%]{background:#eb94bd;color:#fff;padding:15px 30px;border-radius:30px;font-size:1.2rem;text-decoration:none;transition:background-color .3s ease}.hero-section[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   .hero-button[_ngcontent-%COMP%]:hover{background:#e369a2}.about-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:60px 10%;background:#f9f9f9}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]{max-width:50%}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#eb94bd;margin-bottom:1rem}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.8;margin-bottom:1.5rem}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .about-button[_ngcontent-%COMP%]{background:#eb94bd;color:#fff;padding:12px 25px;border-radius:30px;font-size:1rem;text-decoration:none;transition:background-color .3s ease}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]   .about-button[_ngcontent-%COMP%]:hover{background:#e369a2}.about-section[_ngcontent-%COMP%]   .about-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;border-radius:15px;box-shadow:0 6px 15px #0000001a;transition:transform .3s}.about-section[_ngcontent-%COMP%]   .about-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.blog-section[_ngcontent-%COMP%]{padding:60px 10%;text-align:center;background:#fff}.blog-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#eb94bd;margin-bottom:2rem}.blog-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.8;margin-bottom:1.5rem}.blog-section[_ngcontent-%COMP%]   .cta-button[_ngcontent-%COMP%]{background:#eb94bd;color:#fff;padding:15px 30px;border-radius:30px;font-size:1.2rem;text-decoration:none;transition:background-color .3s ease}.blog-section[_ngcontent-%COMP%]   .cta-button[_ngcontent-%COMP%]:hover{background:#e369a2}.additional-links-section[_ngcontent-%COMP%]{padding:60px 10%;background:#f9f9f9;text-align:center}.additional-links-section[_ngcontent-%COMP%]   .link-item[_ngcontent-%COMP%]{margin-bottom:1.5rem}.additional-links-section[_ngcontent-%COMP%]   .link-item[_ngcontent-%COMP%]   .cta-button[_ngcontent-%COMP%]{background:#2e4057;color:#fff;padding:12px 25px;border-radius:30px;font-size:1rem;text-decoration:none;transition:background-color .3s ease}.additional-links-section[_ngcontent-%COMP%]   .link-item[_ngcontent-%COMP%]   .cta-button[_ngcontent-%COMP%]:hover{background:#1c2736}.stories-section[_ngcontent-%COMP%]{padding:60px 10%;background:#fff;text-align:center}.stories-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#eb94bd;margin-bottom:2rem}.stories-section[_ngcontent-%COMP%]   .stories-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.stories-section[_ngcontent-%COMP%]   .stories-grid[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]{background:#f9f9f9;padding:20px;border-radius:12px;box-shadow:0 4px 10px #0000001a;transition:transform .3s,box-shadow .3s}.stories-section[_ngcontent-%COMP%]   .stories-grid[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 8px 20px #0003}.stories-section[_ngcontent-%COMP%]   .stories-grid[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:12px;margin-bottom:15px}.stories-section[_ngcontent-%COMP%]   .stories-grid[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:10px;color:#eb94bd}.stories-section[_ngcontent-%COMP%]   .stories-grid[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6;margin-bottom:15px}.stories-section[_ngcontent-%COMP%]   .stories-grid[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .read-more[_ngcontent-%COMP%]{color:#eb94bd;font-weight:700;text-decoration:none;transition:color .3s}.stories-section[_ngcontent-%COMP%]   .stories-grid[_ngcontent-%COMP%]   .story-card[_ngcontent-%COMP%]   .read-more[_ngcontent-%COMP%]:hover{color:#e369a2}@media (max-width: 768px){.about-section[_ngcontent-%COMP%]{flex-direction:column}.about-section[_ngcontent-%COMP%]   .about-content[_ngcontent-%COMP%]{max-width:100%;text-align:center}.about-section[_ngcontent-%COMP%]   .about-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:20px}.stories-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}return i})();var De=J(177);function Fe(i,e){if(1&i&&(m.qex(0),m.j41(1,"section",2),m.nrm(2,"img",3),m.j41(3,"p",4),m.EFF(4),m.k0s()(),m.bVm()),2&i){const t=e.$implicit;m.R7$(),m.xc7("background-color",t.bgColor)("color",t.fgColor),m.R7$(),m.Y8G("src",t.image,m.B4B)("alt",t.alt),m.R7$(2),m.JRh(t.text)}}let je=(()=>{class i{constructor(){this.sections=[{image:"/assets/about_me/initial.png",alt:"Bob being mysterious",bgColor:"#FFEBEE",fgColor:"#004D40",text:"Hey there, I\u2019m Bob, but I\u2019ve gone by a few names in my time. You see, I\u2019m quite the mysterious kitty.\n             My original name was \u201cMiming,\u201d but somewhere along the way, I decided \u201cBob\u201d suited me better."},{image:"/assets/about_me/bday.jpg",alt:"Bob birthday celebration",bgColor:"#FFF3E0",fgColor:"#5D4037",text:"I celebrate my birthday on February 25th, but nobody really knows when I was born.\n             I just wandered into a hospital and that day, February 25th, was where my incredible journey began.\n             Luckily, my owner\u2019s dad found me and brought me to my forever home."},{image:"/assets/about_me/pretty.jpg",alt:"Bob looking majestic",bgColor:"#E8F5E9",fgColor:"#1B5E20",text:"I may look majestic with my regal demeanor and majestic whiskers, but don\u2019t let that fool you\u2014I\u2019m a playful and talkative kitty as well!\n             I love playtime with my humans.\n             Sometimes, I even have a play fights with another cat in the house, Adoba, who we also call \u201cPoopy.\u201d\n             We keep things interesting around here!"},{image:"/assets/about_me/fighting.jpg",alt:"Bob fighting Poopy",bgColor:"#E3F2FD",fgColor:"#0D47A1",text:"One thing you should know about me\u2014I may be declawed (thanks to a previous owner), but I can still hold my own in a fight!\n             I\u2019m also quite the chatterbox and always have something to say."},{image:"/assets/about_me/eating.jpg",alt:"Bob enjoying wet food",bgColor:"#F3E5F5",fgColor:"#4A148C",text:"When it comes to food, I\u2019m a bit of a connoisseur. I\u2019m extremely picky, and my absolute favorite is wet food, especially the kind with plenty of gravy. Yum!"},{image:"/assets/about_me/window.jpg",alt:"Bob sunbathing",bgColor:"#FFFDE7",fgColor:"#F57F17",text:"On sunny days, you\u2019ll often find me perched on a windowsill, basking in the sunlight. Sunbathing is one of my guilty pleasures."},{image:"/assets/about_me/drinking.jpg",alt:"Bob drinking from a human cup",bgColor:"#E0F7FA",fgColor:"#006064",text:"Oh, and let\u2019s talk about my favorite place to drink water from\u2014the human cups. I like to take a sip from them when I\u2019m feeling fancy."},{image:"/assets/about_me/attitude.jpg",alt:"Bob with an attitude",bgColor:"#FCE4EC",fgColor:"#880E4F",text:"But here\u2019s the thing\u2014don\u2019t be late getting home to me.\n             I might have a bit of an attitude when you arrive home late.\n             I just like to keep my humans on their toes, you know?"},{image:"/assets/about_me/magestic.jpg",alt:"Bob the Majestic Feline",bgColor:"#F1F8E9",fgColor:"#33691E",text:"So there you have it, a glimpse into the life of yours truly, Bob the Majestic Feline.\n             Thanks for visiting my page, and feel free to follow along with my adventures! \u{1f638}\u{1f43e}"}]}ngOnInit(){}onWindowScroll(){document.querySelectorAll(".about-section").forEach(o=>{o.getBoundingClientRect().top<window.innerHeight-100&&o.classList.add("visible")})}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=m.VBU({type:i,selectors:[["app-about"]],hostBindings:function(o,a){1&o&&m.bIt("scroll",function(){return a.onWindowScroll()},!1,m.tSv)},decls:4,vars:1,consts:[[1,"about-bob"],[4,"ngFor","ngForOf"],[1,"about-section"],[1,"about-image",3,"src","alt"],[1,"about-text"]],template:function(o,a){1&o&&(m.j41(0,"section",0)(1,"h1"),m.EFF(2,"Scroll down to meet Bob!"),m.k0s()(),m.DNE(3,Fe,5,7,"ng-container",1)),2&o&&(m.R7$(3),m.Y8G("ngForOf",a.sections))},dependencies:[De.Sq],styles:[".highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}.about-bob[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;color:#eb94bd;text-align:center;font-size:2.5rem;padding:2rem 0}.about-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;padding:3rem 1.5rem;background-color:#f7f9fc;color:#333;text-align:center;transition:background-color .5s ease,color .5s ease;opacity:0;transform:translateY(20px);transition:opacity .6s ease,transform .6s ease}.about-section.visible[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.about-section[_ngcontent-%COMP%]   .about-image[_ngcontent-%COMP%]{width:100%;max-width:300px;border-radius:15px;margin-bottom:1.5rem;transition:transform .3s ease,box-shadow .3s ease}.about-section[_ngcontent-%COMP%]   .about-image[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 8px 16px #0003}.about-section[_ngcontent-%COMP%]   .about-text[_ngcontent-%COMP%]{max-width:600px;font-size:1.2rem;line-height:1.6;font-family:Roboto,sans-serif}@media (prefers-reduced-motion: no-preference){.about-section[_ngcontent-%COMP%]{opacity:0;transform:translateY(20px)}.about-section.visible[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.about-section[_ngcontent-%COMP%]{padding:2rem 1rem;text-align:center}.about-section[_ngcontent-%COMP%]   .about-image[_ngcontent-%COMP%]{max-width:250px}.about-bob[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}"]})}return i})();const Et=[{filename:"IMG_4482.png",caption:"Denzel Washington Bob",isZoomed:!1},{filename:"IMG_4509.JPG",caption:"Bob's Casual Adventure Day",isZoomed:!1},{filename:"IMG_4553.png",caption:"Grandma Bob",isZoomed:!1},{filename:"IMG_4558.png",caption:"Bob Takes a Sip From Mama's Water Cup",isZoomed:!1},{filename:"IMG_4575.png",caption:"Wow, She Can Yawn!",isZoomed:!1},{filename:"IMG_4669.png",caption:"Bob and the Cardboard Box Retreat",isZoomed:!1},{filename:"IMG_1606.jpg",caption:"Window world\u{1fa9f}\u{1f30f}",isZoomed:!1},{filename:"IMG_4676.png",caption:"Guess Which One is Bob",isZoomed:!1},{filename:"IMG_4688.png",caption:"Bob's Unconventional Nap Position",isZoomed:!1},{filename:"IMG_9980.jpg",caption:"Box cat\u{1f4e6}",isZoomed:!1},{filename:"IMG_4654.jpg",caption:"Bob & Poopy",isZoomed:!1},{filename:"IMG_7030.jpeg",caption:"Christmas Bob\u{1f385}\u{1f3fc}\u{1f384}",isZoomed:!1},{filename:"IMG_2590.jpg",caption:"Majestic outdoors Bob\u{1f3d5}\ufe0f",isZoomed:!1},{filename:"IMG_0536.jpg",caption:"2 legged on laptop Bob\u{1f996}",isZoomed:!1},{filename:"IMG_1071.jpg",caption:"Black\u{1f5a4} & Pink\u{1fa77}feeties Bob",isZoomed:!1},{filename:"IMG_2799.jpg",caption:"Laundry World\u{1f457}\u{1f45a}",isZoomed:!1},{filename:"IMG_3215.png",caption:"Stalking/Lurking Bob\u{1f3c3}\u{1f3fb}\u200d\u2640\ufe0f\u{1f977}\u{1f3fb}",isZoomed:!1},{filename:"IMG_9782.png",caption:"Vegetarian Bob\u{1f966}",isZoomed:!1},{filename:"IMG_3142.png",caption:"Angry Mayngry Cat \u{1f621}",isZoomed:!1},{filename:"IMG_0537.jpg",caption:"Circle Face, Circle Cat o.o",isZoomed:!1}],ht=i=>({hovered:i});function Ie(i,e){if(1&i){const t=m.RV6();m.j41(0,"div",2),m.bIt("mouseenter",function(){const a=m.eBV(t).index,c=m.XpG();return m.Njj(c.hoveredIndex=a)})("mouseleave",function(){m.eBV(t);const a=m.XpG();return m.Njj(a.hoveredIndex=-1)}),m.j41(1,"a",3),m.nrm(2,"img",4),m.k0s(),m.j41(3,"div",5),m.EFF(4),m.k0s()()}if(2&i){const t=e.$implicit,o=e.index,a=m.XpG();m.Y8G("ngClass",m.eq3(5,ht,o===a.hoveredIndex)),m.R7$(),m.BMQ("href","assets/photos/"+t.filename,m.B4B)("data-title",t.caption),m.R7$(),m.Y8G("src","assets/photos/"+t.filename,m.B4B),m.R7$(2),m.JRh(t.caption)}}let Ee=(()=>{class i{constructor(t){this.renderer=t,this.imagesList=Et,this.hoveredIndex=-1}ngOnInit(){this.loadLightbox2()}loadLightbox2(){const t=this.renderer.createElement("link");t.rel="stylesheet",t.href="assets/css/lightbox.min.css",this.renderer.appendChild(document.head,t);const o=this.renderer.createElement("script");o.src="assets/js/lightbox.min.js",o.onload=()=>{window.lightbox.option({resizeDuration:200,wrapAround:!0})},this.renderer.appendChild(document.body,o)}static#e=this.\u0275fac=function(o){return new(o||i)(m.rXU(m.sFG))};static#t=this.\u0275cmp=m.VBU({type:i,selectors:[["app-gallery"]],decls:2,vars:1,consts:[[1,"image-gallery"],["class","image-item",3,"ngClass","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"image-item",3,"mouseenter","mouseleave","ngClass"],["data-lightbox","gallery"],["alt","Image",3,"src"],[1,"image-caption"]],template:function(o,a){1&o&&(m.j41(0,"div",0),m.DNE(1,Ie,5,7,"div",1),m.k0s()),2&o&&(m.R7$(),m.Y8G("ngForOf",a.imagesList))},dependencies:[De.YU,De.Sq],styles:[".image-gallery-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.image-gallery[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.image-item[_ngcontent-%COMP%]{position:relative;overflow:hidden;border-radius:10px;box-shadow:0 4px 6px #0000001a;width:200px;height:200px}.image-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:10px}.image-caption[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;background-color:#00000080;color:#fff;padding:5px;text-align:center;font-size:14px}.image-item[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:transform .2s ease-in-out}"]})}return i})(),Xe=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=m.VBU({type:i,selectors:[["app-bob-life"]],decls:40,vars:0,consts:[["aria-label","Content",1,"page-content"],[1,"wrapper"]],template:function(o,a){1&o&&(m.j41(0,"main",0)(1,"div",1)(2,"h1"),m.EFF(3,"A Day in My Life \u{1f43e}"),m.k0s(),m.j41(4,"section")(5,"h2"),m.EFF(6,"Morning Adventures"),m.k0s(),m.j41(7,"ul")(8,"li"),m.EFF(9,"In the morning, I meow for food because breakfast is the most important meal of the day."),m.k0s(),m.j41(10,"li"),m.EFF(11,"If my human takes too long to wake up, I meow near the door to remind them I'm hungry."),m.k0s(),m.j41(12,"li"),m.EFF(13,"I pretend to walk on them and meow even more for food once they finally wake up."),m.k0s(),m.j41(14,"li"),m.EFF(15,"After eating, I follow my human downstairs, meowing like I haven't eaten in years! (even though it's probably only been 4 hours...)."),m.k0s()()(),m.j41(16,"section")(17,"h2"),m.EFF(18,"Post-Breakfast Rituals"),m.k0s(),m.j41(19,"ul")(20,"li"),m.EFF(21,"After breakfast, it's time for my favorite activity: sunbathing!"),m.k0s(),m.j41(22,"li"),m.EFF(23,"I like to freeze and pretend to be a statue, ready to pounce on any unsuspecting toy or piece of string."),m.k0s(),m.j41(24,"li"),m.EFF(25,"I occasionally munch on some grass \u2013 don't judge me; it's a cat thing!"),m.k0s(),m.j41(26,"li"),m.EFF(27,"Bothering my owner is a must. I meow and drag my favorite toy around for some playtime."),m.k0s(),m.j41(28,"li"),m.EFF(29,"For extra attention, I like to step on my owner's neck while they're trying to relax. I think she likes it!"),m.k0s()()(),m.j41(30,"section")(31,"h2"),m.EFF(32,"Bedtime Antics"),m.k0s(),m.j41(33,"ul")(34,"li"),m.EFF(35,"When my human comes home, I'm always happy to see her. But if she take too long to get in bed, I will give her an attitude."),m.k0s(),m.j41(36,"li"),m.EFF(37,"I bite my owners ankles and playfully chase them like they're my prey until they finally get into bed."),m.k0s(),m.j41(38,"li"),m.EFF(39,"The moment they get into bed, I snuggle up close \u2013 because nighttime is cuddle time!"),m.k0s()()()()())},styles:["main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{padding:20px;text-align:left}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{margin-bottom:20px}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:disc;padding-left:20px}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:16px;margin-bottom:8px}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}"]})}return i})();function Ot(i,e){1&i&&m.eu8(0)}function bt(i,e){if(1&i&&(m.j41(0,"span"),m.EFF(1),m.k0s()),2&i){const t=m.XpG().$implicit;m.R7$(),m.JRh(t)}}function zt(i,e){if(1&i&&(m.j41(0,"li"),m.DNE(1,Ot,1,0,"ng-container",5)(2,bt,2,1,"span",5),m.k0s()),2&i){const t=e.$implicit,o=m.XpG(4);m.R7$(),m.Y8G("ngIf",o.isNameCategory(t)),m.R7$(),m.Y8G("ngIf",!o.isNameCategory(t))}}function nn(i,e){if(1&i&&(m.j41(0,"ul"),m.DNE(1,zt,3,2,"li",2),m.k0s()),2&i){const t=m.XpG(2).$implicit;m.R7$(),m.Y8G("ngForOf",t.children)}}function Zt(i,e){if(1&i){const t=m.RV6();m.qex(0),m.j41(1,"h2",4),m.bIt("click",function(){m.eBV(t);const a=m.XpG().$implicit,c=m.XpG();return m.Njj(c.toggleCategory(a))}),m.EFF(2),m.k0s(),m.DNE(3,nn,2,1,"ul",5),m.bVm()}if(2&i){const t=m.XpG().$implicit;m.R7$(),m.AVh("is-open",t.isOpen),m.R7$(),m.JRh(t.name),m.R7$(),m.Y8G("ngIf",t.isOpen)}}function sn(i,e){if(1&i&&m.EFF(0),2&i){const t=m.XpG().$implicit;m.JRh(t)}}function tr(i,e){if(1&i&&(m.j41(0,"li"),m.DNE(1,Zt,4,4,"ng-container",3)(2,sn,1,1,"ng-template",null,0,m.C5r),m.k0s()),2&i){const t=e.$implicit,o=m.sdS(3),a=m.XpG();m.R7$(),m.Y8G("ngIf",a.isNameCategory(t))("ngIfElse",o)}}let pr=(()=>{class i{constructor(){this.data={name:"Bob's Names",isOpen:!0,children:[{name:"Bob",isOpen:!1,children:["Bob","Bobby","Bobby girl","Bobs","Bob-ob","Bobsicle","Bob Popsicle","Bobatha","Bob Bibby","Bob house"]},{name:"Buba",isOpen:!1,children:["Buba","Bubbas"]},{name:"Mom/Momma",isOpen:!1,children:["Mom","Mom-om","Mom Mimmy","Mommy","Mommy pie","Momma","Mommas world","Mommas mama","Momma cat","Mamma girl","Mommy pie","Mommas bubbas","Mommy girl","Mommy cat","Big momma"]},{name:"Baby",isOpen:!1,children:["Baby girl","Baby world","Baby","Baby boy","Baby mommy","Baby cat","Baby pie","Baby, my sweet maymie maymie maymie","Baby, my sweet lady lady lady"]},{name:"Maymie",isOpen:!1,children:["Maymie","Maymie baby","Maymie, my sweet baby baby baby"]},{name:"World",isOpen:!1,children:["World","Worldy","Worldy baby girl","Worley baby girly","Window world","Big world"]},{name:"Sweet",isOpen:!1,children:["Sweet baby","Sweet maymie","Sweet girl","Sweet boy","Sweetie","Sweetie weetie","Sweet heart baby fart","Sweet heart","Sweet pie","Sweet world","Sweetness","Sweetness girl","Sweetness girl in a baby world"]},{name:"Girly/Cutie",isOpen:!1,children:["Cutie pie","Girly pie","Girly cat","Pretty","Pretty baby","Pretty lady","Pretty Mimmy"]},{name:"Mim/Bib",isOpen:!1,children:["Mim","Mimmy","Bibby","Bib"]},{name:"Yum-Themed",isOpen:!1,children:["Yummy","Yummy Mommy","Yum yums","Yum yum girl","Yum yum","Yum yum cat","Yum yum mommy num num(s)","Yum yum baby num num(s)","Num nums"]},{name:"Miscellaneous",isOpen:!1,children:["Madness","Boy","Oisee mommy","Doy doy doy mommy boy","Fat girl","Big girl","Shamamma","Chamamma","Ptza ptza ptza ptza *ptza","Ruey baby rue","Waybie","Lady","Waymie baby","Mommy Origami","Quantic Bobby Girl"]}]}}toggleCategory(t){this.isNameCategory(t)&&(t.isOpen=!t.isOpen)}isNameCategory(t){return"object"==typeof t&&"name"in t}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=m.VBU({type:i,selectors:[["app-names-list"]],decls:5,vars:2,consts:[["plainText",""],[1,"name-tree"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[3,"click"],[4,"ngIf"]],template:function(o,a){1&o&&(m.j41(0,"div",1)(1,"h1"),m.EFF(2),m.k0s(),m.j41(3,"ul"),m.DNE(4,tr,4,2,"li",2),m.k0s()()),2&o&&(m.R7$(2),m.JRh(a.data.name),m.R7$(2),m.Y8G("ngForOf",a.data.children))},dependencies:[De.Sq,De.bT],styles:['@charset "UTF-8";.highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}.name-tree[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;max-width:600px;margin:20px auto;padding:20px;background-color:#f7f9fc;border-radius:8px;box-shadow:0 2px 4px #0000001a}.name-tree[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;text-align:center}.name-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.name-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.name-tree[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{cursor:pointer;color:#2e4057;margin:10px 0}.name-tree[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{color:#eb94bd}.name-tree[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;padding-left:20px;color:#0b0f14;font-weight:500;font-size:1.1rem}.name-tree[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:before{content:"\\25b8";display:inline-block;margin-right:5px;transition:transform .3s ease}.name-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:5px;margin-left:20px}.name-tree[_ngcontent-%COMP%]   .is-open[_ngcontent-%COMP%]:before{transform:rotate(90deg)}']})}return i})();var Ct=J(4341);function It(i,e){if(1&i){const t=m.RV6();m.j41(0,"div",6)(1,"input",7),m.mxI("ngModelChange",function(a){m.eBV(t);const c=m.XpG().index,d=m.XpG();return m.DH7(d.userAnswers[c],a)||(d.userAnswers[c]=a),m.Njj(a)}),m.k0s(),m.j41(2,"label"),m.EFF(3),m.k0s()()}if(2&i){const t=e.$implicit,o=m.XpG().index,a=m.XpG();m.R7$(),m.Y8G("name","question"+o)("value",t),m.R50("ngModel",a.userAnswers[o]),m.R7$(2),m.JRh(t)}}function _t(i,e){if(1&i&&(m.j41(0,"div",4)(1,"p"),m.EFF(2),m.k0s(),m.DNE(3,It,4,4,"div",5),m.k0s()),2&i){const t=e.$implicit,o=e.index;m.R7$(2),m.Lme("",o+1,". ",t.question,""),m.R7$(),m.Y8G("ngForOf",t.answers)}}function Yt(i,e){1&i&&(m.j41(0,"p"),m.EFF(1,"Perfect! You know Bob very well!"),m.k0s())}function At(i,e){1&i&&(m.j41(0,"p"),m.EFF(1,"So close! You're almost a Bob expert!"),m.k0s())}function Gt(i,e){1&i&&(m.j41(0,"p"),m.EFF(1," Keep it up! You're on your way to becoming a Bob expert. "),m.k0s())}function it(i,e){1&i&&(m.j41(0,"p"),m.EFF(1," Not bad! You know some things about Bob, but there's more to learn. "),m.k0s())}function _e(i,e){1&i&&(m.j41(0,"p"),m.EFF(1,"You've got some Bobology to catch up on!"),m.k0s())}function Ut(i,e){if(1&i&&(m.j41(0,"div",8)(1,"h2"),m.EFF(2),m.k0s(),m.DNE(3,Yt,2,0,"p",9)(4,At,2,0,"p",9)(5,Gt,2,0,"p",9)(6,it,2,0,"p",9)(7,_e,2,0,"p",9),m.k0s()),2&i){const t=m.XpG();m.R7$(2),m.Lme("Your Score: ",t.score,"/",t.questions.length,""),m.R7$(),m.Y8G("ngIf",t.score===t.questions.length),m.R7$(),m.Y8G("ngIf",t.score===t.questions.length-1),m.R7$(),m.Y8G("ngIf",t.score>=5&&t.score<t.questions.length-1),m.R7$(),m.Y8G("ngIf",t.score>0&&t.score<5),m.R7$(),m.Y8G("ngIf",0===t.score)}}let Nn=(()=>{class i{constructor(){this.questions=[{question:"Where is Bob's favorite place to lay down on her owner?",answers:["Lap","Neck","Shoulder","Feet"],correctAnswer:"Neck"},{question:"What is Bob's favorite flavor of tube treat?",answers:["Salmon","Chicken","Tuna","Beef"],correctAnswer:"Chicken"},{question:"When is Bob's birthday?",answers:["February 14th","February 25th","March 3rd","January 1st"],correctAnswer:"February 25th"},{question:"What gender is Bob?",answers:["Lady","Gentleman","",""],correctAnswer:"Lady"},{question:"Who would beat Bob in a fight?",answers:["Godzilla","A T-Rex","King Kong","None of the above"],correctAnswer:"None of the above"},{question:"Which paw on Bob is pink?",answers:["Front right","Back left","Front left","Back right"],correctAnswer:"Back right"},{question:"Who is Bob's arch-nemesis?",answers:["Adoba","Neighbor's dog","Bird outside","The vacuum"],correctAnswer:"Adoba"},{question:"What\u2019s Bob\u2019s favorite time of day?",answers:["Early morning","Nap time","Dinner time","Late night"],correctAnswer:"Nap time"},{question:"What is Bob's superpower?",answers:["Invisibility","Teleportation","Mind control","Cuteness overload"],correctAnswer:"Cuteness overload"}],this.userAnswers=new Array(this.questions.length).fill(""),this.quizSubmitted=!1,this.score=0}submitQuiz(){this.score=0;for(let t=0;t<this.questions.length;t++)this.userAnswers[t]===this.questions[t].correctAnswer&&this.score++;this.quizSubmitted=!0}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=m.VBU({type:i,selectors:[["app-quiz"]],decls:7,vars:2,consts:[[1,"quiz-container"],["class","question-block",4,"ngFor","ngForOf"],[3,"click"],["class","results",4,"ngIf"],[1,"question-block"],["class","answer-option",4,"ngFor","ngForOf"],[1,"answer-option"],["type","radio",3,"ngModelChange","name","value","ngModel"],[1,"results"],[4,"ngIf"]],template:function(o,a){1&o&&(m.j41(0,"div",0)(1,"h1"),m.EFF(2,"Test Your Knowledge of Bob \u{1f431}"),m.k0s(),m.DNE(3,_t,4,3,"div",1),m.j41(4,"button",2),m.bIt("click",function(){return a.submitQuiz()}),m.EFF(5,"Submit Answers"),m.k0s(),m.DNE(6,Ut,8,7,"div",3),m.k0s()),2&o&&(m.R7$(3),m.Y8G("ngForOf",a.questions),m.R7$(3),m.Y8G("ngIf",a.quizSubmitted))},dependencies:[De.Sq,De.bT,Ct.me,Ct.Fm,Ct.BC,Ct.vS],styles:[".highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}.quiz-container[_ngcontent-%COMP%]{max-width:600px;margin:20px auto;padding:20px;background-color:#f7f9fc;border-radius:8px;box-shadow:0 4px 8px #0000001a;font-family:Roboto,sans-serif}h1[_ngcontent-%COMP%]{color:#eb94bd;text-align:center}.question-block[_ngcontent-%COMP%]{margin-bottom:20px}.question-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;color:#333}.question-block[_ngcontent-%COMP%]   .answer-option[_ngcontent-%COMP%]{margin-left:20px;display:flex;align-items:center;font-size:1rem;color:#2e4057}.question-block[_ngcontent-%COMP%]   .answer-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:10px}button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;background-color:#eb94bd;color:#fff;border:none;border-radius:5px;font-size:1.1rem;cursor:pointer;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#e369a2}.results[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.results[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#eb94bd;font-size:1.8rem}.results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#333}"]})}return i})(),Kn=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=m.VBU({type:i,selectors:[["app-anthem"]],decls:25,vars:0,consts:[["aria-label","Content",1,"page-content"],[1,"wrapper"],["id","anthem-title"],[1,"decorative-elements"],[1,"fireworks",2,"background-image","url('/assets/bob.jpg')"],[1,"stars",2,"background-image","url('/assets/bob.jpg')"],[1,"welcome-text"]],template:function(o,a){1&o&&(m.j41(0,"main",0)(1,"div",1)(2,"h1",2),m.EFF(3,"Star Spangled Bobby Girl"),m.k0s(),m.j41(4,"div",3),m.nrm(5,"div",4)(6,"div",5),m.k0s(),m.j41(7,"p",6),m.EFF(8," O say can you see, by the Yum yum's early light,"),m.nrm(9,"br"),m.EFF(10," What so Sweet heart we hailed, at the Maymie's last meow,"),m.nrm(11,"br"),m.EFF(12," Whose broad Bobsicles and bright stars, through the perilous Mommy pie fight,"),m.nrm(13,"br"),m.EFF(14," O'er the ramparts Bobitha watched, were so gallantly streaming?"),m.nrm(15,"br"),m.EFF(16," And the baby fart's red glare, Bob pops bursting in Big world air,"),m.nrm(17,"br"),m.EFF(18," Gave proof through the Momom, that our Baby boy was still there;"),m.nrm(19,"br"),m.EFF(20," O, say, does that bobby girl maymie, yet wave,"),m.nrm(21,"br"),m.EFF(22," O'er the land of the Window world,"),m.nrm(23,"br"),m.EFF(24," and the home of the Worldey baby girly. "),m.k0s()()())},styles:['.page-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;display:flex;justify-content:center;align-items:center}.wrapper[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;background:linear-gradient(to bottom,#f8c0c0,#f1f1f1);border:2px solid #000;padding:20px;box-shadow:0 4px 6px #0000001a}.wrapper[_ngcontent-%COMP%]   h1#anthem-title[_ngcontent-%COMP%]{font-size:2.5rem;color:#0033a0;text-align:center;padding-bottom:20px;border-bottom:2px solid #BD202E;margin-bottom:20px}.wrapper[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6;margin:20px 0;text-align:left;padding:0 10px}.wrapper[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]   br[_ngcontent-%COMP%]{content:"";display:block;margin:1em 0}@media (max-width: 600px){.wrapper[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]{font-size:.9rem;padding:0 15px}}@media screen and (max-width: 768px){.wrapper[_ngcontent-%COMP%]{padding:15px}.wrapper[_ngcontent-%COMP%]   h1#anthem-title[_ngcontent-%COMP%]{font-size:2rem}}']})}return i})(),zn=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=m.VBU({type:i,selectors:[["app-page-not-found"]],decls:11,vars:0,consts:[[1,"page-not-found"],["src","assets/bob404.png","alt","Bob the cat as a construction worker",1,"not-found-image"],["routerLink","/"]],template:function(o,a){1&o&&(m.j41(0,"div",0)(1,"h1"),m.EFF(2,"Oops!"),m.k0s(),m.j41(3,"p"),m.EFF(4,"It looks like Bob is still building this page."),m.k0s(),m.nrm(5,"img",1),m.j41(6,"p"),m.EFF(7,"Let's get you back "),m.j41(8,"a",2),m.EFF(9,"home"),m.k0s(),m.EFF(10,"."),m.k0s()())},dependencies:[B.Wk],styles:[".page-not-found[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#333}.page-not-found[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:tomato}.page-not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}.page-not-found[_ngcontent-%COMP%]   .not-found-image[_ngcontent-%COMP%]{max-width:100%;height:auto;margin:20px 0}.page-not-found[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.page-not-found[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return i})();function hr(i,e){if(1&i&&(m.j41(0,"div",5)(1,"p"),m.EFF(2),m.k0s()()),2&i){const t=m.XpG().$implicit;m.R7$(2),m.JRh(t.answer)}}function vi(i,e){if(1&i){const t=m.RV6();m.j41(0,"div",2)(1,"div",3),m.bIt("click",function(){const a=m.eBV(t).$implicit,c=m.XpG();return m.Njj(c.toggleAnswer(a))}),m.j41(2,"h3"),m.EFF(3),m.k0s()(),m.DNE(4,hr,3,1,"div",4),m.k0s()}if(2&i){const t=e.$implicit;m.R7$(3),m.JRh(t.question),m.R7$(),m.Y8G("ngIf",t.show)}}let zo=(()=>{class i{constructor(){this.faqs=[{question:"Is she a maymie?",answer:"Absolutely! She is a maymie lady.",show:!1},{question:"Is she a baby?",answer:"Yes, her name is Baby World.",show:!1},{question:"Can you air fry her?",answer:"No, she is too pretty.",show:!1},{question:"Does she love to play?",answer:"Oh yes, especially when its late at night and her owner wants to go to bed!",show:!1},{question:"What's her favorite snack?",answer:"She loves tube treats!",show:!1},{question:"What is your return policy?",answer:"We dont have a return polcicy, she is not for sale...",show:!1},{question:"How do I track my order?",answer:"She cant be ordered... but she likes to go outside and wander around the house!",show:!1},{question:"Do you ship internationally?",answer:"Hey! Who made this webiste...",show:!1}]}toggleAnswer(t){t.show=!t.show}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=m.VBU({type:i,selectors:[["app-faq"]],decls:4,vars:1,consts:[[1,"faq-container"],["class","faq-item",4,"ngFor","ngForOf"],[1,"faq-item"],[1,"question",3,"click"],["class","answer",4,"ngIf"],[1,"answer"]],template:function(o,a){1&o&&(m.j41(0,"div",0)(1,"h2"),m.EFF(2,"Frequently Asked Questions About Bob"),m.k0s(),m.DNE(3,vi,5,2,"div",1),m.k0s()),2&o&&(m.R7$(3),m.Y8G("ngForOf",a.faqs))},dependencies:[De.Sq,De.bT],styles:[".faq-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.faq-item[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;margin-bottom:10px;padding-bottom:10px}.faq-item[_ngcontent-%COMP%]   .question[_ngcontent-%COMP%]{cursor:pointer}.faq-item[_ngcontent-%COMP%]   .question[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.faq-item[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]{margin-top:10px}.faq-item[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]})}return i})();function We(i,e){1&i&&(m.j41(0,"p"),m.EFF(1,"Incorrect PIN. Please try again."),m.k0s())}function Qe(i,e){if(1&i){const t=m.RV6();m.j41(0,"div")(1,"h2"),m.EFF(2,"Enter PIN to Access"),m.k0s(),m.j41(3,"form",1),m.bIt("ngSubmit",function(){m.eBV(t);const a=m.XpG();return m.Njj(a.checkPin())}),m.j41(4,"input",2),m.mxI("ngModelChange",function(a){m.eBV(t);const c=m.XpG();return m.DH7(c.pin,a)||(c.pin=a),m.Njj(a)}),m.k0s(),m.j41(5,"button",3),m.EFF(6,"Enter"),m.k0s()(),m.DNE(7,We,2,0,"p",0),m.k0s()}if(2&i){const t=m.XpG();m.R7$(4),m.R50("ngModel",t.pin),m.R7$(3),m.Y8G("ngIf",t.invalidPin)}}function at(i,e){if(1&i&&(m.j41(0,"div")(1,"p"),m.EFF(2),m.k0s()()),2&i){const t=e.$implicit;m.R7$(2),m.JRh(t)}}function lt(i,e){if(1&i&&(m.j41(0,"div")(1,"h2"),m.EFF(2,"Secret Blog"),m.k0s(),m.DNE(3,at,3,1,"div",4),m.k0s()),2&i){const t=m.XpG();m.R7$(3),m.Y8G("ngForOf",t.posts)}}let Pt=(()=>{class i{constructor(){this.pin="",this.isAuthenticated=!1,this.invalidPin=!1,this.posts=["This is the first secret post.","Here is another hidden message.","More secret thoughts.","PREEY GIRL"],this.correctPin="1127"}checkPin(){this.pin===this.correctPin?(this.isAuthenticated=!0,this.invalidPin=!1):this.invalidPin=!0}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=m.VBU({type:i,selectors:[["app-secret-blog"]],decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngSubmit"],["type","password","name","pin","maxlength","4","required","",3,"ngModelChange","ngModel"],["type","submit"],[4,"ngFor","ngForOf"]],template:function(o,a){1&o&&m.DNE(0,Qe,8,2,"div",0)(1,lt,4,1,"div",0),2&o&&(m.Y8G("ngIf",!a.isAuthenticated),m.R7$(),m.Y8G("ngIf",a.isAuthenticated))},dependencies:[De.Sq,De.bT,Ct.qT,Ct.me,Ct.BC,Ct.cb,Ct.YS,Ct.tU,Ct.vS,Ct.cV],styles:["h2[_ngcontent-%COMP%]{color:#333}div[_ngcontent-%COMP%]{margin-bottom:20px}button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:10px 20px;border:none;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#45a049}input[type=password][_ngcontent-%COMP%]{width:80px;padding:5px}"]})}return i})();var jn,Hr,Ze=J(9969),we=J(467),Mn=J(7852),ar=J(1362),en=J(8041),te=J(1076),fr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qr={};(function(){var i;function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function a(xe,me,Pe){Pe||(Pe=0);var Ve=Array(16);if("string"==typeof me)for(var He=0;16>He;++He)Ve[He]=me.charCodeAt(Pe++)|me.charCodeAt(Pe++)<<8|me.charCodeAt(Pe++)<<16|me.charCodeAt(Pe++)<<24;else for(He=0;16>He;++He)Ve[He]=me[Pe++]|me[Pe++]<<8|me[Pe++]<<16|me[Pe++]<<24;var nt=xe.g[3],Te=(me=xe.g[0])+(nt^(Pe=xe.g[1])&((He=xe.g[2])^nt))+Ve[0]+3614090360&4294967295;Te=(Pe=(He=(nt=(me=(Pe=(He=(nt=(me=(Pe=(He=(nt=(me=(Pe=(He=(nt=(me=(Pe=(He=(nt=(me=(Pe=(He=(nt=(me=(Pe=(He=(nt=(me=(Pe=(He=(nt=(me=(Pe=(He=(nt=(me=(Pe=(He=(nt=(me=(Pe=(He=(nt=(me=(Pe=(He=(nt=(me=(Pe=(He=(nt=(me=(Pe=(He=(nt=(me=(Pe=(He=(nt=(me=Pe+(Te<<7&4294967295|Te>>>25))+((Te=nt+(He^me&(Pe^He))+Ve[1]+3905402710&4294967295)<<12&4294967295|Te>>>20))+((Te=He+(Pe^nt&(me^Pe))+Ve[2]+606105819&4294967295)<<17&4294967295|Te>>>15))+((Te=Pe+(me^He&(nt^me))+Ve[3]+3250441966&4294967295)<<22&4294967295|Te>>>10))+((Te=me+(nt^Pe&(He^nt))+Ve[4]+4118548399&4294967295)<<7&4294967295|Te>>>25))+((Te=nt+(He^me&(Pe^He))+Ve[5]+1200080426&4294967295)<<12&4294967295|Te>>>20))+((Te=He+(Pe^nt&(me^Pe))+Ve[6]+2821735955&4294967295)<<17&4294967295|Te>>>15))+((Te=Pe+(me^He&(nt^me))+Ve[7]+4249261313&4294967295)<<22&4294967295|Te>>>10))+((Te=me+(nt^Pe&(He^nt))+Ve[8]+1770035416&4294967295)<<7&4294967295|Te>>>25))+((Te=nt+(He^me&(Pe^He))+Ve[9]+2336552879&4294967295)<<12&4294967295|Te>>>20))+((Te=He+(Pe^nt&(me^Pe))+Ve[10]+4294925233&4294967295)<<17&4294967295|Te>>>15))+((Te=Pe+(me^He&(nt^me))+Ve[11]+2304563134&4294967295)<<22&4294967295|Te>>>10))+((Te=me+(nt^Pe&(He^nt))+Ve[12]+1804603682&4294967295)<<7&4294967295|Te>>>25))+((Te=nt+(He^me&(Pe^He))+Ve[13]+4254626195&4294967295)<<12&4294967295|Te>>>20))+((Te=He+(Pe^nt&(me^Pe))+Ve[14]+2792965006&4294967295)<<17&4294967295|Te>>>15))+((Te=Pe+(me^He&(nt^me))+Ve[15]+1236535329&4294967295)<<22&4294967295|Te>>>10))+((Te=me+(He^nt&(Pe^He))+Ve[1]+4129170786&4294967295)<<5&4294967295|Te>>>27))+((Te=nt+(Pe^He&(me^Pe))+Ve[6]+3225465664&4294967295)<<9&4294967295|Te>>>23))+((Te=He+(me^Pe&(nt^me))+Ve[11]+643717713&4294967295)<<14&4294967295|Te>>>18))+((Te=Pe+(nt^me&(He^nt))+Ve[0]+3921069994&4294967295)<<20&4294967295|Te>>>12))+((Te=me+(He^nt&(Pe^He))+Ve[5]+3593408605&4294967295)<<5&4294967295|Te>>>27))+((Te=nt+(Pe^He&(me^Pe))+Ve[10]+38016083&4294967295)<<9&4294967295|Te>>>23))+((Te=He+(me^Pe&(nt^me))+Ve[15]+3634488961&4294967295)<<14&4294967295|Te>>>18))+((Te=Pe+(nt^me&(He^nt))+Ve[4]+3889429448&4294967295)<<20&4294967295|Te>>>12))+((Te=me+(He^nt&(Pe^He))+Ve[9]+568446438&4294967295)<<5&4294967295|Te>>>27))+((Te=nt+(Pe^He&(me^Pe))+Ve[14]+3275163606&4294967295)<<9&4294967295|Te>>>23))+((Te=He+(me^Pe&(nt^me))+Ve[3]+4107603335&4294967295)<<14&4294967295|Te>>>18))+((Te=Pe+(nt^me&(He^nt))+Ve[8]+1163531501&4294967295)<<20&4294967295|Te>>>12))+((Te=me+(He^nt&(Pe^He))+Ve[13]+2850285829&4294967295)<<5&4294967295|Te>>>27))+((Te=nt+(Pe^He&(me^Pe))+Ve[2]+4243563512&4294967295)<<9&4294967295|Te>>>23))+((Te=He+(me^Pe&(nt^me))+Ve[7]+1735328473&4294967295)<<14&4294967295|Te>>>18))+((Te=Pe+(nt^me&(He^nt))+Ve[12]+2368359562&4294967295)<<20&4294967295|Te>>>12))+((Te=me+(Pe^He^nt)+Ve[5]+4294588738&4294967295)<<4&4294967295|Te>>>28))+((Te=nt+(me^Pe^He)+Ve[8]+2272392833&4294967295)<<11&4294967295|Te>>>21))+((Te=He+(nt^me^Pe)+Ve[11]+1839030562&4294967295)<<16&4294967295|Te>>>16))+((Te=Pe+(He^nt^me)+Ve[14]+4259657740&4294967295)<<23&4294967295|Te>>>9))+((Te=me+(Pe^He^nt)+Ve[1]+2763975236&4294967295)<<4&4294967295|Te>>>28))+((Te=nt+(me^Pe^He)+Ve[4]+1272893353&4294967295)<<11&4294967295|Te>>>21))+((Te=He+(nt^me^Pe)+Ve[7]+4139469664&4294967295)<<16&4294967295|Te>>>16))+((Te=Pe+(He^nt^me)+Ve[10]+3200236656&4294967295)<<23&4294967295|Te>>>9))+((Te=me+(Pe^He^nt)+Ve[13]+681279174&4294967295)<<4&4294967295|Te>>>28))+((Te=nt+(me^Pe^He)+Ve[0]+3936430074&4294967295)<<11&4294967295|Te>>>21))+((Te=He+(nt^me^Pe)+Ve[3]+3572445317&4294967295)<<16&4294967295|Te>>>16))+((Te=Pe+(He^nt^me)+Ve[6]+76029189&4294967295)<<23&4294967295|Te>>>9))+((Te=me+(Pe^He^nt)+Ve[9]+3654602809&4294967295)<<4&4294967295|Te>>>28))+((Te=nt+(me^Pe^He)+Ve[12]+3873151461&4294967295)<<11&4294967295|Te>>>21))+((Te=He+(nt^me^Pe)+Ve[15]+530742520&4294967295)<<16&4294967295|Te>>>16))+((Te=Pe+(He^nt^me)+Ve[2]+3299628645&4294967295)<<23&4294967295|Te>>>9))+((Te=me+(He^(Pe|~nt))+Ve[0]+4096336452&4294967295)<<6&4294967295|Te>>>26))+((Te=nt+(Pe^(me|~He))+Ve[7]+1126891415&4294967295)<<10&4294967295|Te>>>22))+((Te=He+(me^(nt|~Pe))+Ve[14]+2878612391&4294967295)<<15&4294967295|Te>>>17))+((Te=Pe+(nt^(He|~me))+Ve[5]+4237533241&4294967295)<<21&4294967295|Te>>>11))+((Te=me+(He^(Pe|~nt))+Ve[12]+1700485571&4294967295)<<6&4294967295|Te>>>26))+((Te=nt+(Pe^(me|~He))+Ve[3]+2399980690&4294967295)<<10&4294967295|Te>>>22))+((Te=He+(me^(nt|~Pe))+Ve[10]+4293915773&4294967295)<<15&4294967295|Te>>>17))+((Te=Pe+(nt^(He|~me))+Ve[1]+2240044497&4294967295)<<21&4294967295|Te>>>11))+((Te=me+(He^(Pe|~nt))+Ve[8]+1873313359&4294967295)<<6&4294967295|Te>>>26))+((Te=nt+(Pe^(me|~He))+Ve[15]+4264355552&4294967295)<<10&4294967295|Te>>>22))+((Te=He+(me^(nt|~Pe))+Ve[6]+2734768916&4294967295)<<15&4294967295|Te>>>17))+((Te=Pe+(nt^(He|~me))+Ve[13]+1309151649&4294967295)<<21&4294967295|Te>>>11))+((nt=(me=Pe+((Te=me+(He^(Pe|~nt))+Ve[4]+4149444226&4294967295)<<6&4294967295|Te>>>26))+((Te=nt+(Pe^(me|~He))+Ve[11]+3174756917&4294967295)<<10&4294967295|Te>>>22))^((He=nt+((Te=He+(me^(nt|~Pe))+Ve[2]+718787259&4294967295)<<15&4294967295|Te>>>17))|~me))+Ve[9]+3951481745&4294967295,xe.g[0]=xe.g[0]+me&4294967295,xe.g[1]=xe.g[1]+(He+(Te<<21&4294967295|Te>>>11))&4294967295,xe.g[2]=xe.g[2]+He&4294967295,xe.g[3]=xe.g[3]+nt&4294967295}function d(xe,me){this.h=me;for(var Pe=[],Ve=!0,He=xe.length-1;0<=He;He--){var nt=0|xe[He];Ve&&nt==me||(Pe[He]=nt,Ve=!1)}this.g=Pe}(function e(xe,me){function Pe(){}Pe.prototype=me.prototype,xe.D=me.prototype,xe.prototype=new Pe,xe.prototype.constructor=xe,xe.C=function(Ve,He,nt){for(var Te=Array(arguments.length-2),Il=2;Il<arguments.length;Il++)Te[Il-2]=arguments[Il];return me.prototype[He].apply(Ve,Te)}})(o,function t(){this.blockSize=-1}),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},o.prototype.u=function(xe,me){void 0===me&&(me=xe.length);for(var Pe=me-this.blockSize,Ve=this.B,He=this.h,nt=0;nt<me;){if(0==He)for(;nt<=Pe;)a(this,xe,nt),nt+=this.blockSize;if("string"==typeof xe){for(;nt<me;)if(Ve[He++]=xe.charCodeAt(nt++),He==this.blockSize){a(this,Ve),He=0;break}}else for(;nt<me;)if(Ve[He++]=xe[nt++],He==this.blockSize){a(this,Ve),He=0;break}}this.h=He,this.o+=me},o.prototype.v=function(){var xe=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);xe[0]=128;for(var me=1;me<xe.length-8;++me)xe[me]=0;var Pe=8*this.o;for(me=xe.length-8;me<xe.length;++me)xe[me]=255&Pe,Pe/=256;for(this.u(xe),xe=Array(16),me=Pe=0;4>me;++me)for(var Ve=0;32>Ve;Ve+=8)xe[Pe++]=this.g[me]>>>Ve&255;return xe};var g={};function E(xe){return-128<=xe&&128>xe?function c(xe,me){var Pe=g;return Object.prototype.hasOwnProperty.call(Pe,xe)?Pe[xe]:Pe[xe]=me(xe)}(xe,function(me){return new d([0|me],0>me?-1:0)}):new d([0|xe],0>xe?-1:0)}function S(xe){if(isNaN(xe)||!isFinite(xe))return K;if(0>xe)return qe(S(-xe));for(var me=[],Pe=1,Ve=0;xe>=Pe;Ve++)me[Ve]=xe/Pe|0,Pe*=4294967296;return new d(me,0)}var K=E(0),ee=E(1),de=E(16777216);function Re(xe){if(0!=xe.h)return!1;for(var me=0;me<xe.g.length;me++)if(0!=xe.g[me])return!1;return!0}function $e(xe){return-1==xe.h}function qe(xe){for(var me=xe.g.length,Pe=[],Ve=0;Ve<me;Ve++)Pe[Ve]=~xe.g[Ve];return new d(Pe,~xe.h).add(ee)}function kt(xe,me){return xe.add(qe(me))}function Xt(xe,me){for(;(65535&xe[me])!=xe[me];)xe[me+1]+=xe[me]>>>16,xe[me]&=65535,me++}function St(xe,me){this.g=xe,this.h=me}function gn(xe,me){if(Re(me))throw Error("division by zero");if(Re(xe))return new St(K,K);if($e(xe))return me=gn(qe(xe),me),new St(qe(me.g),qe(me.h));if($e(me))return me=gn(xe,qe(me)),new St(qe(me.g),me.h);if(30<xe.g.length){if($e(xe)||$e(me))throw Error("slowDivide_ only works with positive integers.");for(var Pe=ee,Ve=me;0>=Ve.l(xe);)Pe=Yn(Pe),Ve=Yn(Ve);var He=er(Pe,1),nt=er(Ve,1);for(Ve=er(Ve,2),Pe=er(Pe,2);!Re(Ve);){var Te=nt.add(Ve);0>=Te.l(xe)&&(He=He.add(Pe),nt=Te),Ve=er(Ve,1),Pe=er(Pe,1)}return me=kt(xe,He.j(me)),new St(He,me)}for(He=K;0<=xe.l(me);){for(Pe=Math.max(1,Math.floor(xe.m()/me.m())),Ve=48>=(Ve=Math.ceil(Math.log(Pe)/Math.LN2))?1:Math.pow(2,Ve-48),Te=(nt=S(Pe)).j(me);$e(Te)||0<Te.l(xe);)Te=(nt=S(Pe-=Ve)).j(me);Re(nt)&&(nt=ee),He=He.add(nt),xe=kt(xe,Te)}return new St(He,xe)}function Yn(xe){for(var me=xe.g.length+1,Pe=[],Ve=0;Ve<me;Ve++)Pe[Ve]=xe.i(Ve)<<1|xe.i(Ve-1)>>>31;return new d(Pe,xe.h)}function er(xe,me){var Pe=me>>5;me%=32;for(var Ve=xe.g.length-Pe,He=[],nt=0;nt<Ve;nt++)He[nt]=0<me?xe.i(nt+Pe)>>>me|xe.i(nt+Pe+1)<<32-me:xe.i(nt+Pe);return new d(He,xe.h)}(i=d.prototype).m=function(){if($e(this))return-qe(this).m();for(var xe=0,me=1,Pe=0;Pe<this.g.length;Pe++){var Ve=this.i(Pe);xe+=(0<=Ve?Ve:4294967296+Ve)*me,me*=4294967296}return xe},i.toString=function(xe){if(2>(xe=xe||10)||36<xe)throw Error("radix out of range: "+xe);if(Re(this))return"0";if($e(this))return"-"+qe(this).toString(xe);for(var me=S(Math.pow(xe,6)),Pe=this,Ve="";;){var He=gn(Pe,me).g,nt=((0<(Pe=kt(Pe,He.j(me))).g.length?Pe.g[0]:Pe.h)>>>0).toString(xe);if(Re(Pe=He))return nt+Ve;for(;6>nt.length;)nt="0"+nt;Ve=nt+Ve}},i.i=function(xe){return 0>xe?0:xe<this.g.length?this.g[xe]:this.h},i.l=function(xe){return $e(xe=kt(this,xe))?-1:Re(xe)?0:1},i.abs=function(){return $e(this)?qe(this):this},i.add=function(xe){for(var me=Math.max(this.g.length,xe.g.length),Pe=[],Ve=0,He=0;He<=me;He++){var nt=Ve+(65535&this.i(He))+(65535&xe.i(He)),Te=(nt>>>16)+(this.i(He)>>>16)+(xe.i(He)>>>16);Ve=Te>>>16,Pe[He]=(Te&=65535)<<16|(nt&=65535)}return new d(Pe,-2147483648&Pe[Pe.length-1]?-1:0)},i.j=function(xe){if(Re(this)||Re(xe))return K;if($e(this))return $e(xe)?qe(this).j(qe(xe)):qe(qe(this).j(xe));if($e(xe))return qe(this.j(qe(xe)));if(0>this.l(de)&&0>xe.l(de))return S(this.m()*xe.m());for(var me=this.g.length+xe.g.length,Pe=[],Ve=0;Ve<2*me;Ve++)Pe[Ve]=0;for(Ve=0;Ve<this.g.length;Ve++)for(var He=0;He<xe.g.length;He++){var nt=this.i(Ve)>>>16,Te=65535&this.i(Ve),Il=xe.i(He)>>>16,Jp=65535&xe.i(He);Pe[2*Ve+2*He]+=Te*Jp,Xt(Pe,2*Ve+2*He),Pe[2*Ve+2*He+1]+=nt*Jp,Xt(Pe,2*Ve+2*He+1),Pe[2*Ve+2*He+1]+=Te*Il,Xt(Pe,2*Ve+2*He+1),Pe[2*Ve+2*He+2]+=nt*Il,Xt(Pe,2*Ve+2*He+2)}for(Ve=0;Ve<me;Ve++)Pe[Ve]=Pe[2*Ve+1]<<16|Pe[2*Ve];for(Ve=me;Ve<2*me;Ve++)Pe[Ve]=0;return new d(Pe,0)},i.A=function(xe){return gn(this,xe).h},i.and=function(xe){for(var me=Math.max(this.g.length,xe.g.length),Pe=[],Ve=0;Ve<me;Ve++)Pe[Ve]=this.i(Ve)&xe.i(Ve);return new d(Pe,this.h&xe.h)},i.or=function(xe){for(var me=Math.max(this.g.length,xe.g.length),Pe=[],Ve=0;Ve<me;Ve++)Pe[Ve]=this.i(Ve)|xe.i(Ve);return new d(Pe,this.h|xe.h)},i.xor=function(xe){for(var me=Math.max(this.g.length,xe.g.length),Pe=[],Ve=0;Ve<me;Ve++)Pe[Ve]=this.i(Ve)^xe.i(Ve);return new d(Pe,this.h^xe.h)},o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,Hr=Qr.Md5=o,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=S,d.fromString=function V(xe,me){if(0==xe.length)throw Error("number format error: empty string");if(2>(me=me||10)||36<me)throw Error("radix out of range: "+me);if("-"==xe.charAt(0))return qe(V(xe.substring(1),me));if(0<=xe.indexOf("-"))throw Error('number format error: interior "-" character');for(var Pe=S(Math.pow(me,8)),Ve=K,He=0;He<xe.length;He+=8){var nt=Math.min(8,xe.length-He),Te=parseInt(xe.substring(He,He+nt),me);8>nt?(nt=S(Math.pow(me,nt)),Ve=Ve.j(nt).add(S(Te))):Ve=(Ve=Ve.j(Pe)).add(S(Te))}return Ve},jn=Qr.Integer=d}).apply(typeof fr<"u"?fr:typeof self<"u"?self:typeof window<"u"?window:{});var mn,qi,yo,gr,Yr,lo,Ei,Bt,Xn,lr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wn={};(function(){var i,e="function"==typeof Object.defineProperties?Object.defineProperty:function(y,x,W){return y==Array.prototype||y==Object.prototype||(y[x]=W.value),y},o=function t(y){y=["object"==typeof globalThis&&globalThis,y,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof lr&&lr];for(var x=0;x<y.length;++x){var W=y[x];if(W&&W.Math==Math)return W}throw Error("Cannot find global object")}(this);!function a(y,x){if(x)e:{var W=o;y=y.split(".");for(var ie=0;ie<y.length-1;ie++){var ze=y[ie];if(!(ze in W))break e;W=W[ze]}(x=x(ie=W[y=y[y.length-1]]))!=ie&&null!=x&&e(W,y,{configurable:!0,writable:!0,value:x})}}("Array.prototype.values",function(y){return y||function(){return function c(y,x){y instanceof String&&(y+="");var W=0,ie=!1,ze={next:function(){if(!ie&&W<y.length){var ct=W++;return{value:x(ct,y[ct]),done:!1}}return ie=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}(this,function(x,W){return W})}});var d=d||{},g=this||self;function E(y){var x=typeof y;return"array"==(x="object"!=x?x:y?Array.isArray(y)?"array":x:"null")||"object"==x&&"number"==typeof y.length}function S(y){var x=typeof y;return"object"==x&&null!=y||"function"==x}function V(y,x,W){return y.call.apply(y.bind,arguments)}function K(y,x,W){if(!y)throw Error();if(2<arguments.length){var ie=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,ie),y.apply(x,ze)}}return function(){return y.apply(x,arguments)}}function ee(y,x,W){return(ee=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?V:K).apply(null,arguments)}function de(y,x){var W=Array.prototype.slice.call(arguments,1);return function(){var ie=W.slice();return ie.push.apply(ie,arguments),y.apply(this,ie)}}function Re(y,x){function W(){}W.prototype=x.prototype,y.aa=x.prototype,y.prototype=new W,y.prototype.constructor=y,y.Qb=function(ie,ze,ct){for(var tn=Array(arguments.length-2),yi=2;yi<arguments.length;yi++)tn[yi-2]=arguments[yi];return x.prototype[ze].apply(ie,tn)}}function $e(y){const x=y.length;if(0<x){const W=Array(x);for(let ie=0;ie<x;ie++)W[ie]=y[ie];return W}return[]}function qe(y,x){for(let W=1;W<arguments.length;W++){const ie=arguments[W];if(E(ie)){const ze=y.length||0,ct=ie.length||0;y.length=ze+ct;for(let tn=0;tn<ct;tn++)y[ze+tn]=ie[tn]}else y.push(ie)}}function Xt(y){return/^[\s\xa0]*$/.test(y)}function St(){var y=g.navigator;return y&&(y=y.userAgent)?y:""}function gn(y){return gn[" "](y),y}gn[" "]=function(){};var Yn=!(-1==St().indexOf("Gecko")||-1!=St().toLowerCase().indexOf("webkit")&&-1==St().indexOf("Edge")||-1!=St().indexOf("Trident")||-1!=St().indexOf("MSIE")||-1!=St().indexOf("Edge"));function er(y,x,W){for(const ie in y)x.call(W,y[ie],ie,y)}function me(y){const x={};for(const W in y)x[W]=y[W];return x}const Pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ve(y,x){let W,ie;for(let ze=1;ze<arguments.length;ze++){for(W in ie=arguments[ze],ie)y[W]=ie[W];for(let ct=0;ct<Pe.length;ct++)W=Pe[ct],Object.prototype.hasOwnProperty.call(ie,W)&&(y[W]=ie[W])}}function He(y){var x=1;y=y.split(":");const W=[];for(;0<x&&y.length;)W.push(y.shift()),x--;return y.length&&W.push(y.join(":")),W}function nt(y){g.setTimeout(()=>{throw y},0)}function Te(){var y=Gd;let x=null;return y.g&&(x=y.g,y.g=y.g.next,y.g||(y.h=null),x.next=null),x}var Jp=new class kt{constructor(x,W){this.i=x,this.j=W,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}(()=>new AR,y=>y.reset());class AR{constructor(){this.next=this.g=this.h=null}set(x,W){this.h=x,this.g=W,this.next=null}reset(){this.next=this.g=this.h=null}}let C_,ds=!1,Gd=new class Il{constructor(){this.h=this.g=null}add(x,W){const ie=Jp.get();ie.set(x,W),this.h?this.h.next=ie:this.g=ie,this.h=ie}},$P=()=>{const y=g.Promise.resolve(void 0);C_=()=>{y.then(PR)}};var PR=()=>{for(var y;y=Te();){try{y.h.call(y.g)}catch(W){nt(W)}var x=Jp;x.j(y),100>x.h&&(x.h++,y.next=x.g,x.g=y)}ds=!1};function lf(){this.s=this.s,this.C=this.C}function ya(y,x){this.type=y,this.g=this.target=x,this.defaultPrevented=!1}lf.prototype.s=!1,lf.prototype.ma=function(){this.s||(this.s=!0,this.N())},lf.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},ya.prototype.h=function(){this.defaultPrevented=!0};var I_=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var y=!1,x=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const W=()=>{};g.addEventListener("test",W,x),g.removeEventListener("test",W,x)}catch{}return y}();function w_(y,x){if(ya.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var W=this.type=y.type,ie=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=x,x=y.relatedTarget){if(Yn){e:{try{gn(x.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(x=null)}}else"mouseover"==W?x=y.fromElement:"mouseout"==W&&(x=y.toElement);this.relatedTarget=x,ie?(this.clientX=void 0!==ie.clientX?ie.clientX:ie.pageX,this.clientY=void 0!==ie.clientY?ie.clientY:ie.pageY,this.screenX=ie.screenX||0,this.screenY=ie.screenY||0):(this.clientX=void 0!==y.clientX?y.clientX:y.pageX,this.clientY=void 0!==y.clientY?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType="string"==typeof y.pointerType?y.pointerType:Z0[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&w_.aa.h.call(this)}}Re(w_,ya);var Z0={2:"touch",3:"pen",4:"mouse"};w_.prototype.h=function(){w_.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var T_="closure_listenable_"+(1e6*Math.random()|0),HP=0;function DR(y,x,W,ie,ze){this.listener=y,this.proxy=null,this.src=x,this.type=W,this.capture=!!ie,this.ha=ze,this.key=++HP,this.da=this.fa=!1}function AE(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function PE(y){this.src=y,this.g={},this.h=0}function b_(y,x){var W=x.type;if(W in y.g){var ct,ie=y.g[W],ze=Array.prototype.indexOf.call(ie,x,void 0);(ct=0<=ze)&&Array.prototype.splice.call(ie,ze,1),ct&&(AE(x),0==y.g[W].length&&(delete y.g[W],y.h--))}}function DE(y,x,W,ie){for(var ze=0;ze<y.length;++ze){var ct=y[ze];if(!ct.da&&ct.listener==x&&ct.capture==!!W&&ct.ha==ie)return ze}return-1}PE.prototype.add=function(y,x,W,ie,ze){var ct=y.toString();(y=this.g[ct])||(y=this.g[ct]=[],this.h++);var tn=DE(y,x,ie,ze);return-1<tn?(x=y[tn],W||(x.fa=!1)):((x=new DR(x,this.src,ct,!!ie,ze)).fa=W,y.push(x)),x};var ew="closure_lm_"+(1e6*Math.random()|0),Zp={};function SE(y,x,W,ie,ze){if(ie&&ie.once)return zP(y,x,W,ie,ze);if(Array.isArray(x)){for(var ct=0;ct<x.length;ct++)SE(y,x[ct],W,ie,ze);return null}return W=nw(W),y&&y[T_]?y.K(x,W,S(ie)?!!ie.capture:!!ie,ze):SR(y,x,W,!1,ie,ze)}function SR(y,x,W,ie,ze,ct){if(!x)throw Error("Invalid event type");var tn=S(ze)?!!ze.capture:!!ze,yi=A_(y);if(yi||(y[ew]=yi=new PE(y)),(W=yi.add(x,W,ie,tn,ct)).proxy)return W;if(ie=function GP(){const x=KP;return function y(W){return x.call(y.src,y.listener,W)}}(),W.proxy=ie,ie.src=y,ie.listener=W,y.addEventListener)I_||(ze=tn),void 0===ze&&(ze=!1),y.addEventListener(x.toString(),ie,ze);else if(y.attachEvent)y.attachEvent(WP(x.toString()),ie);else{if(!y.addListener||!y.removeListener)throw Error("addEventListener and attachEvent are unavailable.");y.addListener(ie)}return W}function zP(y,x,W,ie,ze){if(Array.isArray(x)){for(var ct=0;ct<x.length;ct++)zP(y,x[ct],W,ie,ze);return null}return W=nw(W),y&&y[T_]?y.L(x,W,S(ie)?!!ie.capture:!!ie,ze):SR(y,x,W,!0,ie,ze)}function tw(y,x,W,ie,ze){if(Array.isArray(x))for(var ct=0;ct<x.length;ct++)tw(y,x[ct],W,ie,ze);else ie=S(ie)?!!ie.capture:!!ie,W=nw(W),y&&y[T_]?(y=y.i,(x=String(x).toString())in y.g&&-1<(W=DE(ct=y.g[x],W,ie,ze))&&(AE(ct[W]),Array.prototype.splice.call(ct,W,1),0==ct.length&&(delete y.g[x],y.h--))):y&&(y=A_(y))&&(x=y.g[x.toString()],y=-1,x&&(y=DE(x,W,ie,ze)),(W=-1<y?x[y]:null)&&zd(W))}function zd(y){if("number"!=typeof y&&y&&!y.da){var x=y.src;if(x&&x[T_])b_(x.i,y);else{var W=y.type,ie=y.proxy;x.removeEventListener?x.removeEventListener(W,ie,y.capture):x.detachEvent?x.detachEvent(WP(W),ie):x.addListener&&x.removeListener&&x.removeListener(ie),(W=A_(x))?(b_(W,y),0==W.h&&(W.src=null,x[ew]=null)):AE(y)}}}function WP(y){return y in Zp?Zp[y]:Zp[y]="on"+y}function KP(y,x){if(y.da)y=!0;else{x=new w_(x,this);var W=y.listener,ie=y.ha||y.src;y.fa&&zd(y),y=W.call(ie,x)}return y}function A_(y){return(y=y[ew])instanceof PE?y:null}var qP="__closure_events_fn_"+(1e9*Math.random()>>>0);function nw(y){return"function"==typeof y?y:(y[qP]||(y[qP]=function(x){return y.handleEvent(x)}),y[qP])}function Js(){lf.call(this),this.i=new PE(this),this.M=this,this.F=null}function va(y,x){var W,ie=y.F;if(ie)for(W=[];ie;ie=ie.F)W.push(ie);if(y=y.M,ie=x.type||x,"string"==typeof x)x=new ya(x,y);else if(x instanceof ya)x.target=x.target||y;else{var ze=x;Ve(x=new ya(ie,y),ze)}if(ze=!0,W)for(var ct=W.length-1;0<=ct;ct--){var tn=x.g=W[ct];ze=P_(tn,ie,!0,x)&&ze}if(ze=P_(tn=x.g=y,ie,!0,x)&&ze,ze=P_(tn,ie,!1,x)&&ze,W)for(ct=0;ct<W.length;ct++)ze=P_(tn=x.g=W[ct],ie,!1,x)&&ze}function P_(y,x,W,ie){if(!(x=y.i.g[String(x)]))return!0;x=x.concat();for(var ze=!0,ct=0;ct<x.length;++ct){var tn=x[ct];if(tn&&!tn.da&&tn.capture==W){var yi=tn.listener,ao=tn.ha||tn.src;tn.fa&&b_(y.i,tn),ze=!1!==yi.call(ao,ie)&&ze}}return ze&&!ie.defaultPrevented}function rw(y,x,W){if("function"==typeof y)W&&(y=ee(y,W));else{if(!y||"function"!=typeof y.handleEvent)throw Error("Invalid listener argument");y=ee(y.handleEvent,y)}return 2147483647<Number(x)?-1:g.setTimeout(y,x||0)}function QP(y){y.g=rw(()=>{y.g=null,y.i&&(y.i=!1,QP(y))},y.l);const x=y.h;y.h=null,y.m.apply(null,x)}Re(Js,lf),Js.prototype[T_]=!0,Js.prototype.removeEventListener=function(y,x,W,ie){tw(this,y,x,W,ie)},Js.prototype.N=function(){if(Js.aa.N.call(this),this.i){var x,y=this.i;for(x in y.g){for(var W=y.g[x],ie=0;ie<W.length;ie++)AE(W[ie]);delete y.g[x],y.h--}}this.F=null},Js.prototype.K=function(y,x,W,ie){return this.i.add(String(y),x,!1,W,ie)},Js.prototype.L=function(y,x,W,ie){return this.i.add(String(y),x,!0,W,ie)};class YP extends lf{constructor(x,W){super(),this.m=x,this.l=W,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:QP(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eg(y){lf.call(this),this.h=y,this.g={}}Re(eg,lf);var XP=[];function JP(y){er(y.g,function(x,W){this.g.hasOwnProperty(W)&&zd(x)},y),y.g={}}eg.prototype.N=function(){eg.aa.N.call(this),JP(this)},eg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ME=g.JSON.stringify,MR=g.JSON.parse,ZP=class{stringify(y){return g.JSON.stringify(y,void 0)}parse(y){return g.JSON.parse(y,void 0)}};function OE(){}function ow(){}OE.prototype.h=null;var D_={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sw(){ya.call(this,"d")}function eD(){ya.call(this,"c")}Re(sw,ya),Re(eD,ya);var Wd={},OR=null;function aw(){return OR=OR||new Js}function RR(y){ya.call(this,Wd.La,y)}function RE(y){const x=aw();va(x,new RR(x))}function NR(y,x){ya.call(this,Wd.STAT_EVENT,y),this.stat=x}function Ya(y){const x=aw();va(x,new NR(x,y))}function xR(y,x){ya.call(this,Wd.Ma,y),this.size=x}function NE(y,x){if("function"!=typeof y)throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){y()},x)}function tg(){this.g=!0}function ng(y,x,W,ie){y.info(function(){return"XMLHTTP TEXT ("+x+"): "+function xE(y,x){if(!y.g)return x;if(!x)return null;try{var W=JSON.parse(x);if(W)for(y=0;y<W.length;y++)if(Array.isArray(W[y])){var ie=W[y];if(!(2>ie.length)){var ze=ie[1];if(Array.isArray(ze)&&!(1>ze.length)){var ct=ze[0];if("noop"!=ct&&"stop"!=ct&&"close"!=ct)for(var tn=1;tn<ze.length;tn++)ze[tn]=""}}}return ME(W)}catch{return x}}(y,W)+(ie?" "+ie:"")})}Wd.La="serverreachability",Re(RR,ya),Wd.STAT_EVENT="statevent",Re(NR,ya),Wd.Ma="timingevent",Re(xR,ya),tg.prototype.xa=function(){this.g=!1},tg.prototype.info=function(){};var lw,kE={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function FE(){}function Kd(y,x,W,ie){this.j=y,this.i=x,this.l=W,this.R=ie||1,this.U=new eg(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new rD}function rD(){this.i=null,this.g="",this.h=!1}Re(FE,OE),FE.prototype.g=function(){return new XMLHttpRequest},FE.prototype.i=function(){return{}},lw=new FE;var iD={},LE={};function cw(y,x,W){y.L=1,y.v=N_(Wu(x)),y.m=W,y.P=!0,oD(y,null)}function oD(y,x){y.F=Date.now(),VE(y),y.A=Wu(y.v);var W=y.A,ie=y.R;Array.isArray(ie)||(ie=[String(ie)]),k_(W.i,"t",ie),y.C=0,W=y.j.J,y.h=new rD,y.g=eN(y.j,W?x:null,!y.m),0<y.O&&(y.M=new YP(ee(y.Y,y,y.g),y.O)),x=y.U,W=y.g,ie=y.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(XP[0]=ze.toString()),ze=XP);for(var ct=0;ct<ze.length;ct++){var tn=SE(W,ze[ct],ie||x.handleEvent,!1,x.h||x);if(!tn)break;x.g[tn.key]=tn}x=y.H?me(y.H):{},y.m?(y.u||(y.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,x)):(y.u="GET",y.g.ea(y.A,y.u,null,x)),RE(),function kR(y,x,W,ie,ze,ct){y.info(function(){if(y.g)if(ct)for(var tn="",yi=ct.split("&"),ao=0;ao<yi.length;ao++){var Gr=yi[ao].split("=");if(1<Gr.length){var ws=Gr[0];Gr=Gr[1];var Ts=ws.split("_");tn=2<=Ts.length&&"type"==Ts[1]?tn+(ws+"=")+Gr+"&":tn+(ws+"=redacted&")}}else tn=null;else tn=ct;return"XMLHTTP REQ ("+ie+") [attempt "+ze+"]: "+x+"\n"+W+"\n"+tn})}(y.i,y.u,y.A,y.l,y.R,y.m)}function sD(y){return!!y.g&&"GET"==y.u&&2!=y.L&&y.j.Ca}function FR(y,x){var W=y.C,ie=x.indexOf("\n",W);return-1==ie?LE:(W=Number(x.substring(W,ie)),isNaN(W)?iD:(ie+=1)+W>x.length?LE:(x=x.slice(ie,ie+W),y.C=ie+W,x))}function VE(y){y.S=Date.now()+y.I,aD(y,y.I)}function aD(y,x){if(null!=y.B)throw Error("WatchDog timer not null");y.B=NE(ee(y.ba,y),x)}function uw(y){y.B&&(g.clearTimeout(y.B),y.B=null)}function M_(y){0==y.j.G||y.J||YR(y.j,y)}function cf(y){uw(y);var x=y.M;x&&"function"==typeof x.ma&&x.ma(),y.M=null,JP(y.U),y.g&&(x=y.g,y.g=null,x.abort(),x.ma())}function dw(y,x){try{var W=y.j;if(0!=W.G&&(W.g==y||O_(W.h,y)))if(!y.K&&O_(W.h,y)&&3==W.G){try{var ie=W.Da.g.parse(x)}catch{ie=null}if(Array.isArray(ie)&&3==ie.length){var ze=ie;if(0==ze[0]){e:if(!W.u){if(W.g){if(!(W.g.F+3e3<y.F))break e;Cw(W),U_(W)}CD(W),Ya(18)}}else W.za=ze[1],0<W.za-W.T&&37500>ze[2]&&W.F&&0==W.v&&!W.C&&(W.C=NE(ee(W.Za,W),6e3));if(1>=hw(W.h)&&W.ca){try{W.ca()}catch{}W.ca=void 0}}else ff(W,11)}else if((y.K||W.g==y)&&Cw(W),!Xt(x))for(ze=W.Da.g.parse(x),x=0;x<ze.length;x++){let Gr=ze[x];if(W.T=Gr[0],Gr=Gr[1],2==W.G)if("c"==Gr[0]){W.K=Gr[1],W.ia=Gr[2];const ws=Gr[3];null!=ws&&(W.la=ws,W.j.info("VER="+W.la));const Ts=Gr[4];null!=Ts&&(W.Aa=Ts,W.j.info("SVER="+W.Aa));const lg=Gr[5];null!=lg&&"number"==typeof lg&&0<lg&&(W.L=ie=1.5*lg,W.j.info("backChannelRequestTimeoutMs_="+ie)),ie=W;const Tl=y.g;if(Tl){const cg=Tl.g?Tl.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cg){var ct=ie.h;ct.g||-1==cg.indexOf("spdy")&&-1==cg.indexOf("quic")&&-1==cg.indexOf("h2")||(ct.j=ct.l,ct.g=new Set,ct.h&&(fw(ct,ct.h),ct.h=null))}if(ie.D){const ug=Tl.g?Tl.g.getResponseHeader("X-HTTP-Session-Id"):null;ug&&(ie.ya=ug,Mi(ie.I,ie.D,ug))}}W.G=3,W.l&&W.l.ua(),W.ba&&(W.R=Date.now()-y.F,W.j.info("Handshake RTT: "+W.R+"ms"));var tn=y;if((ie=W).qa=ZR(ie,ie.J?ie.ia:null,ie.W),tn.K){uD(ie.h,tn);var yi=tn,ao=ie.L;ao&&(yi.I=ao),yi.B&&(uw(yi),VE(yi)),ie.g=tn}else GE(ie);0<W.i.length&&B_(W)}else"stop"!=Gr[0]&&"close"!=Gr[0]||ff(W,7);else 3==W.G&&("stop"==Gr[0]||"close"==Gr[0]?"stop"==Gr[0]?ff(W,7):V_(W):"noop"!=Gr[0]&&W.l&&W.l.ta(Gr),W.v=0)}RE()}catch{}}Kd.prototype.ca=function(y){y=y.target;const x=this.M;x&&3==tc(y)?x.j():this.Y(y)},Kd.prototype.Y=function(y){try{if(y==this.g)e:{const Ts=tc(this.g);var x=this.g.Ba();if(this.g.Z(),!(3>Ts)&&(3!=Ts||this.g&&(this.h.h||this.g.oa()||yD(this.g)))){this.J||4!=Ts||7==x||RE(),uw(this);var W=this.g.Z();this.X=W;t:if(sD(this)){var ie=yD(this.g);y="";var ze=ie.length,ct=4==tc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){cf(this),M_(this);var tn="";break t}this.h.i=new g.TextDecoder}for(x=0;x<ze;x++)this.h.h=!0,y+=this.h.i.decode(ie[x],{stream:!(ct&&x==ze-1)});ie.length=0,this.h.g+=y,this.C=0,tn=this.h.g}else tn=this.g.oa();if(this.o=200==W,function tD(y,x,W,ie,ze,ct,tn){y.info(function(){return"XMLHTTP RESP ("+ie+") [ attempt "+ze+"]: "+x+"\n"+W+"\n"+ct+" "+tn})}(this.i,this.u,this.A,this.l,this.R,Ts,W),this.o){if(this.T&&!this.K){t:{if(this.g){var yi,ao=this.g;if((yi=ao.g?ao.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xt(yi)){var Gr=yi;break t}}Gr=null}if(!(W=Gr)){this.o=!1,this.s=3,Ya(12),cf(this),M_(this);break e}ng(this.i,this.l,W,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dw(this,W)}if(this.P){let Tl;for(W=!0;!this.J&&this.C<tn.length;){if(Tl=FR(this,tn),Tl==LE){4==Ts&&(this.s=4,Ya(14),W=!1),ng(this.i,this.l,null,"[Incomplete Response]");break}if(Tl==iD){this.s=4,Ya(15),ng(this.i,this.l,tn,"[Invalid Chunk]"),W=!1;break}ng(this.i,this.l,Tl,null),dw(this,Tl)}if(sD(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Ts||0!=tn.length||this.h.h||(this.s=1,Ya(16),W=!1),this.o=this.o&&W,W){if(0<tn.length&&!this.W){this.W=!0;var ws=this.j;ws.g==this&&ws.ba&&!ws.M&&(ws.j.info("Great, no buffering proxy detected. Bytes received: "+tn.length),vw(ws),ws.M=!0,Ya(11))}}else ng(this.i,this.l,tn,"[Invalid Chunked Response]"),cf(this),M_(this)}else ng(this.i,this.l,tn,null),dw(this,tn);4==Ts&&cf(this),this.o&&!this.J&&(4==Ts?YR(this.j,this):(this.o=!1,VE(this)))}else(function wx(y){const x={};y=(y.g&&2<=tc(y)&&y.g.getAllResponseHeaders()||"").split("\r\n");for(let ie=0;ie<y.length;ie++){if(Xt(y[ie]))continue;var W=He(y[ie]);const ze=W[0];if("string"!=typeof(W=W[1]))continue;W=W.trim();const ct=x[ze]||[];x[ze]=ct,ct.push(W)}!function xe(y,x){for(const W in y)x.call(void 0,y[W],W,y)}(x,function(ie){return ie.join(", ")})})(this.g),400==W&&0<tn.indexOf("Unknown SID")?(this.s=3,Ya(12)):(this.s=0,Ya(13)),cf(this),M_(this)}}}catch{}},Kd.prototype.cancel=function(){this.J=!0,cf(this)},Kd.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(function S_(y,x){y.info(function(){return"TIMEOUT: "+x})}(this.i,this.A),2!=this.L&&(RE(),Ya(17)),cf(this),this.s=2,M_(this)):aD(this,this.S-y)};var LR=class{constructor(y,x){this.g=y,this.map=x}};function lD(y){this.l=y||10,y=g.PerformanceNavigationTiming?0<(y=g.performance.getEntriesByType("navigation")).length&&("hq"==y[0].nextHopProtocol||"h2"==y[0].nextHopProtocol):!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cD(y){return!!y.h||!!y.g&&y.g.size>=y.j}function hw(y){return y.h?1:y.g?y.g.size:0}function O_(y,x){return y.h?y.h==x:!!y.g&&y.g.has(x)}function fw(y,x){y.g?y.g.add(x):y.h=x}function uD(y,x){y.h&&y.h==x?y.h=null:y.g&&y.g.has(x)&&y.g.delete(x)}function pw(y){if(null!=y.h)return y.i.concat(y.h.D);if(null!=y.g&&0!==y.g.size){let x=y.i;for(const W of y.g.values())x=x.concat(W.D);return x}return $e(y.i)}function UR(y,x){if(y.forEach&&"function"==typeof y.forEach)y.forEach(x,void 0);else if(E(y)||"string"==typeof y)Array.prototype.forEach.call(y,x,void 0);else for(var W=function dD(y){if(y.na&&"function"==typeof y.na)return y.na();if(!y.V||"function"!=typeof y.V){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(E(y)||"string"==typeof y){var x=[];y=y.length;for(var W=0;W<y;W++)x.push(W);return x}x=[],W=0;for(const ie in y)x[W++]=ie;return x}}}(y),ie=function VR(y){if(y.V&&"function"==typeof y.V)return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if("string"==typeof y)return y.split("");if(E(y)){for(var x=[],W=y.length,ie=0;ie<W;ie++)x.push(y[ie]);return x}for(ie in x=[],W=0,y)x[W++]=y[ie];return x}(y),ze=ie.length,ct=0;ct<ze;ct++)x.call(void 0,ie[ct],W&&W[ct],y)}lD.prototype.cancel=function(){if(this.i=pw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const y of this.g.values())y.cancel();this.g.clear()}};var hD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qd(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof qd){this.h=y.h,R_(this,y.j),this.o=y.o,this.g=y.g,UE(this,y.s),this.l=y.l;var x=y.i,W=new ig;W.i=x.i,x.g&&(W.g=new Map(x.g),W.h=x.h),BE(this,W),this.m=y.m}else y&&(x=String(y).match(hD))?(this.h=!1,R_(this,x[1]||"",!0),this.o=rg(x[2]||""),this.g=rg(x[3]||"",!0),UE(this,x[4]),this.l=rg(x[5]||"",!0),BE(this,x[6]||"",!0),this.m=rg(x[7]||"")):(this.h=!1,this.i=new ig(null,this.h))}function Wu(y){return new qd(y)}function R_(y,x,W){y.j=W?rg(x,!0):x,y.j&&(y.j=y.j.replace(/:$/,""))}function UE(y,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);y.s=x}else y.s=null}function BE(y,x,W){x instanceof ig?(y.i=x,function HR(y,x){x&&!y.j&&(Ku(y),y.i=null,y.g.forEach(function(W,ie){var ze=ie.toLowerCase();ie!=ze&&(ec(this,ie),k_(this,ze,W))},y)),y.j=x}(y.i,y.h)):(W||(x=uf(x,Cx)),y.i=new ig(x,y.h))}function Mi(y,x,W){y.i.set(x,W)}function N_(y){return Mi(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function rg(y,x){return y?x?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function uf(y,x,W){return"string"==typeof y?(y=encodeURI(y).replace(x,jE),W&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function jE(y){return"%"+((y=y.charCodeAt(0))>>4&15).toString(16)+(15&y).toString(16)}qd.prototype.toString=function(){var y=[],x=this.j;x&&y.push(uf(x,BR,!0),":");var W=this.g;return(W||"file"==x)&&(y.push("//"),(x=this.o)&&y.push(uf(x,BR,!0),"@"),y.push(encodeURIComponent(String(W)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(W=this.s)&&y.push(":",String(W))),(W=this.l)&&(this.g&&"/"!=W.charAt(0)&&y.push("/"),y.push(uf(W,"/"==W.charAt(0)?jR:pD,!0))),(W=this.i.toString())&&y.push("?",W),(W=this.m)&&y.push("#",uf(W,$R)),y.join("")};var BR=/[#\/\?@]/g,pD=/[#\?:]/g,jR=/[#\?]/g,Cx=/[#\?@]/g,$R=/#/g;function ig(y,x){this.h=this.g=null,this.i=y||null,this.j=!!x}function Ku(y){y.g||(y.g=new Map,y.h=0,y.i&&function fD(y,x){if(y){y=y.split("&");for(var W=0;W<y.length;W++){var ie=y[W].indexOf("="),ze=null;if(0<=ie){var ct=y[W].substring(0,ie);ze=y[W].substring(ie+1)}else ct=y[W];x(ct,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}(y.i,function(x,W){y.add(decodeURIComponent(x.replace(/\+/g," ")),W)}))}function ec(y,x){Ku(y),x=df(y,x),y.g.has(x)&&(y.i=null,y.h-=y.g.get(x).length,y.g.delete(x))}function x_(y,x){return Ku(y),x=df(y,x),y.g.has(x)}function k_(y,x,W){ec(y,x),0<W.length&&(y.i=null,y.g.set(df(y,x),$e(W)),y.h+=W.length)}function df(y,x){return x=String(x),y.j&&(x=x.toLowerCase()),x}function Qd(y,x,W,ie,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),ie(W)}catch{}}function Ix(){this.g=new ZP}function WR(y,x,W){const ie=W||"";try{UR(y,function(ze,ct){let tn=ze;S(ze)&&(tn=ME(ze)),x.push(ie+ct+"="+encodeURIComponent(tn))})}catch(ze){throw x.push(ie+"type="+encodeURIComponent("_badmap")),ze}}function og(y){this.l=y.Ub||null,this.j=y.eb||!1}function $E(y,x){Js.call(this),this.D=y,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function gD(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}function hf(y){y.readyState=4,y.l=null,y.j=null,y.v=null,F_(y)}function F_(y){y.onreadystatechange&&y.onreadystatechange.call(y)}function KR(y){let x="";return er(y,function(W,ie){x+=ie,x+=":",x+=W,x+="\r\n"}),x}function L_(y,x,W){e:{for(ie in W){var ie=!1;break e}ie=!0}ie||(W=KR(W),"string"==typeof y?null!=W&&encodeURIComponent(String(W)):Mi(y,x,W))}function _o(y){Js.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(i=ig.prototype).add=function(y,x){Ku(this),this.i=null,y=df(this,y);var W=this.g.get(y);return W||this.g.set(y,W=[]),W.push(x),this.h+=1,this},i.forEach=function(y,x){Ku(this),this.g.forEach(function(W,ie){W.forEach(function(ze){y.call(x,ze,ie,this)},this)},this)},i.na=function(){Ku(this);const y=Array.from(this.g.values()),x=Array.from(this.g.keys()),W=[];for(let ie=0;ie<x.length;ie++){const ze=y[ie];for(let ct=0;ct<ze.length;ct++)W.push(x[ie])}return W},i.V=function(y){Ku(this);let x=[];if("string"==typeof y)x_(this,y)&&(x=x.concat(this.g.get(df(this,y))));else{y=Array.from(this.g.values());for(let W=0;W<y.length;W++)x=x.concat(y[W])}return x},i.set=function(y,x){return Ku(this),this.i=null,x_(this,y=df(this,y))&&(this.h-=this.g.get(y).length),this.g.set(y,[x]),this.h+=1,this},i.get=function(y,x){return y&&0<(y=this.V(y)).length?String(y[0]):x},i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],x=Array.from(this.g.keys());for(var W=0;W<x.length;W++){var ie=x[W];const ct=encodeURIComponent(String(ie)),tn=this.V(ie);for(ie=0;ie<tn.length;ie++){var ze=ct;""!==tn[ie]&&(ze+="="+encodeURIComponent(String(tn[ie]))),y.push(ze)}}return this.i=y.join("&")},Re(og,OE),og.prototype.g=function(){return new $E(this.l,this.j)},og.prototype.i=function(y){return function(){return y}}({}),Re($E,Js),(i=$E.prototype).open=function(y,x){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=x,this.readyState=1,F_(this)},i.send=function(y){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(x.body=y),(this.D||g).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hf(this)),this.readyState=0},i.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,F_(this)),this.g&&(this.readyState=3,F_(this),this.g)))if("arraybuffer"===this.responseType)y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gD(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))},i.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var x=y.value?y.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!y.done}))&&(this.response=this.responseText+=x)}y.done?hf(this):F_(this),3==this.readyState&&gD(this)}},i.Ra=function(y){this.g&&(this.response=this.responseText=y,hf(this))},i.Qa=function(y){this.g&&(this.response=y,hf(this))},i.ga=function(){this.g&&hf(this)},i.setRequestHeader=function(y,x){this.u.append(y,x)},i.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],x=this.h.entries();for(var W=x.next();!W.done;)y.push((W=W.value)[0]+": "+W[1]),W=x.next();return y.join("\r\n")},Object.defineProperty($E.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(y){this.m=y?"include":"same-origin"}}),Re(_o,Js);var mD=/^https?$/i,gw=["POST","PUT"];function mw(y,x){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=x,y.m=5,qR(y),_w(y)}function qR(y){y.A||(y.A=!0,va(y,"complete"),va(y,"error"))}function sg(y){if(y.h&&typeof d<"u"&&(!y.v[1]||4!=tc(y)||2!=y.Z()))if(y.u&&4==tc(y))rw(y.Ea,0,y);else if(va(y,"readystatechange"),4==tc(y)){y.h=!1;try{const tn=y.Z();e:switch(tn){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var W;if(!(W=x)){var ie;if(ie=0===tn){var ze=String(y.D).match(hD)[1]||null;!ze&&g.self&&g.self.location&&(ze=g.self.location.protocol.slice(0,-1)),ie=!mD.test(ze?ze.toLowerCase():"")}W=ie}if(W)va(y,"complete"),va(y,"success");else{y.m=6;try{var ct=2<tc(y)?y.g.statusText:""}catch{ct=""}y.l=ct+" ["+y.Z()+"]",qR(y)}}finally{_w(y)}}}function _w(y,x){if(y.g){_D(y);const W=y.g,ie=y.v[0]?()=>{}:null;y.g=null,y.v=null,x||va(y,"ready");try{W.onreadystatechange=ie}catch{}}}function _D(y){y.I&&(g.clearTimeout(y.I),y.I=null)}function tc(y){return y.g?y.g.readyState:0}function yD(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function HE(y,x,W){return W&&W.internalChannelParams&&W.internalChannelParams[y]||x}function vD(y){this.Aa=0,this.i=[],this.j=new tg,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=HE("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=HE("baseRetryDelayMs",5e3,y),this.cb=HE("retryDelaySeedMs",1e4,y),this.Wa=HE("forwardChannelMaxRetries",2,y),this.wa=HE("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new lD(y&&y.concurrentRequestLimit),this.Da=new Ix,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function V_(y){if(qu(y),3==y.G){var x=y.U++,W=Wu(y.I);if(Mi(W,"SID",y.K),Mi(W,"RID",x),Mi(W,"TYPE","terminate"),ag(y,W),(x=new Kd(y,y.j,x)).L=2,x.v=N_(Wu(W)),W=!1,g.navigator&&g.navigator.sendBeacon)try{W=g.navigator.sendBeacon(x.v.toString(),"")}catch{}!W&&g.Image&&((new Image).src=x.v,W=!0),W||(x.g=eN(x.j,null),x.g.ea(x.v)),x.F=Date.now(),VE(x)}JR(y)}function U_(y){y.g&&(vw(y),y.g.cancel(),y.g=null)}function qu(y){U_(y),y.u&&(g.clearTimeout(y.u),y.u=null),Cw(y),y.h.cancel(),y.s&&("number"==typeof y.s&&g.clearTimeout(y.s),y.s=null)}function B_(y){if(!cD(y.h)&&!y.s){y.s=!0;var x=y.Ga;C_||$P(),ds||(C_(),ds=!0),Gd.add(x,y),y.B=0}}function yw(y,x){var W;W=x?x.l:y.U++;const ie=Wu(y.I);Mi(ie,"SID",y.K),Mi(ie,"RID",W),Mi(ie,"AID",y.T),ag(y,ie),y.m&&y.o&&L_(ie,y.m,y.o),W=new Kd(y,y.j,W,y.B+1),null===y.m&&(W.H=y.o),x&&(y.i=x.D.concat(y.i)),x=ED(y,W,1e3),W.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),fw(y.h,W),cw(W,ie,x)}function ag(y,x){y.H&&er(y.H,function(W,ie){Mi(x,ie,W)}),y.l&&UR({},function(W,ie){Mi(x,ie,W)})}function ED(y,x,W){W=Math.min(y.i.length,W);var ie=y.l?ee(y.l.Na,y.l,y):null;e:{var ze=y.i;let ct=-1;for(;;){const tn=["count="+W];-1==ct?0<W?(ct=ze[0].g,tn.push("ofs="+ct)):ct=0:tn.push("ofs="+ct);let yi=!0;for(let ao=0;ao<W;ao++){let Gr=ze[ao].g;const ws=ze[ao].map;if(Gr-=ct,0>Gr)ct=Math.max(0,ze[ao].g-100),yi=!1;else try{WR(ws,tn,"req"+Gr+"_")}catch{ie&&ie(ws)}}if(yi){ie=tn.join("&");break e}}}return y=y.i.splice(0,W),x.D=y,ie}function GE(y){if(!y.g&&!y.u){y.Y=1;var x=y.Fa;C_||$P(),ds||(C_(),ds=!0),Gd.add(x,y),y.v=0}}function CD(y){return!(y.g||y.u||3<=y.v||(y.Y++,y.u=NE(ee(y.Fa,y),XR(y,y.v)),y.v++,0))}function vw(y){null!=y.A&&(g.clearTimeout(y.A),y.A=null)}function Ew(y){y.g=new Kd(y,y.j,"rpc",y.Y),null===y.m&&(y.g.H=y.o),y.g.O=0;var x=Wu(y.qa);Mi(x,"RID","rpc"),Mi(x,"SID",y.K),Mi(x,"AID",y.T),Mi(x,"CI",y.F?"0":"1"),!y.F&&y.ja&&Mi(x,"TO",y.ja),Mi(x,"TYPE","xmlhttp"),ag(y,x),y.m&&y.o&&L_(x,y.m,y.o),y.L&&(y.g.I=y.L);var W=y.g;y=y.ia,W.L=1,W.v=N_(Wu(x)),W.m=null,W.P=!0,oD(W,y)}function Cw(y){null!=y.C&&(g.clearTimeout(y.C),y.C=null)}function YR(y,x){var W=null;if(y.g==x){Cw(y),vw(y),y.g=null;var ie=2}else{if(!O_(y.h,x))return;W=x.D,uD(y.h,x),ie=1}if(0!=y.G)if(x.o)if(1==ie){W=x.m?x.m.length:0,x=Date.now()-x.F;var ze=y.B;va(ie=aw(),new xR(ie,W)),B_(y)}else GE(y);else if(3==(ze=x.s)||0==ze&&0<x.X||!(1==ie&&function QR(y,x){return!(hw(y.h)>=y.h.j-(y.s?1:0)||(y.s?(y.i=x.D.concat(y.i),0):1==y.G||2==y.G||y.B>=(y.Va?0:y.Wa)||(y.s=NE(ee(y.Ga,y,x),XR(y,y.B)),y.B++,0)))}(y,x)||2==ie&&CD(y)))switch(W&&0<W.length&&(x=y.h,x.i=x.i.concat(W)),ze){case 1:ff(y,5);break;case 4:ff(y,10);break;case 3:ff(y,6);break;default:ff(y,2)}}function XR(y,x){let W=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(W*=2),W*x}function ff(y,x){if(y.j.info("Error code "+x),2==x){var W=ee(y.fb,y),ie=y.Xa;const ze=!ie;ie=new qd(ie||"//www.google.com/images/cleardot.gif"),g.location&&"http"==g.location.protocol||R_(ie,"https"),N_(ie),ze?function GR(y,x){const W=new tg;if(g.Image){const ie=new Image;ie.onload=de(Qd,W,"TestLoadImage: loaded",!0,x,ie),ie.onerror=de(Qd,W,"TestLoadImage: error",!1,x,ie),ie.onabort=de(Qd,W,"TestLoadImage: abort",!1,x,ie),ie.ontimeout=de(Qd,W,"TestLoadImage: timeout",!1,x,ie),g.setTimeout(function(){ie.ontimeout&&ie.ontimeout()},1e4),ie.src=y}else x(!1)}(ie.toString(),W):function zR(y,x){new tg;const ie=new AbortController,ze=setTimeout(()=>{ie.abort(),Qd(0,0,!1,x)},1e4);fetch(y,{signal:ie.signal}).then(ct=>{clearTimeout(ze),Qd(0,0,!!ct.ok,x)}).catch(()=>{clearTimeout(ze),Qd(0,0,!1,x)})}(ie.toString(),W)}else Ya(2);y.G=0,y.l&&y.l.sa(x),JR(y),qu(y)}function JR(y){if(y.G=0,y.ka=[],y.l){const x=pw(y.h);(0!=x.length||0!=y.i.length)&&(qe(y.ka,x),qe(y.ka,y.i),y.h.i.length=0,$e(y.i),y.i.length=0),y.l.ra()}}function ZR(y,x,W){var ie=W instanceof qd?Wu(W):new qd(W);if(""!=ie.g)x&&(ie.g=x+"."+ie.g),UE(ie,ie.s);else{var ze=g.location;ie=ze.protocol,x=x?x+"."+ze.hostname:ze.hostname,ze=+ze.port;var ct=new qd(null);ie&&R_(ct,ie),x&&(ct.g=x),ze&&UE(ct,ze),W&&(ct.l=W),ie=ct}return x=y.ya,(W=y.D)&&x&&Mi(ie,W,x),Mi(ie,"VER",y.la),ag(y,ie),ie}function eN(y,x,W){if(x&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return(x=new _o(y.Ca&&!y.pa?new og({eb:W}):y.pa)).Ha(y.J),x}function Iw(){}function j_(){}function wl(y,x){Js.call(this),this.g=new vD(x),this.l=y,this.h=x&&x.messageUrlParams||null,y=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(y?y["X-WebChannel-Content-Type"]=x.messageContentType:y={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(y?y["X-WebChannel-Client-Profile"]=x.va:y={"X-WebChannel-Client-Profile":x.va}),this.g.S=y,(y=x&&x.Sb)&&!Xt(y)&&(this.g.m=y),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!Xt(x)&&(this.g.D=x,null!==(y=this.h)&&x in y&&x in(y=this.h)&&delete y[x]),this.j=new $_(this)}function ID(y){sw.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var x=y.__sm__;if(x){e:{for(const W in x){y=W;break e}y=void 0}(this.i=y)&&(y=this.i,x=null!==x&&y in x?x[y]:void 0),this.data=x}else this.data=y}function tN(){eD.call(this),this.status=1}function $_(y){this.g=y}(i=_o.prototype).Ha=function(y){this.J=y},i.ea=function(y,x,W,ie){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);x=x?x.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lw.g(),this.v=function iw(y){return y.h||(y.h=y.i())}(this.o?this.o:lw),this.g.onreadystatechange=ee(this.Ea,this);try{this.B=!0,this.g.open(x,String(y),!0),this.B=!1}catch(ct){return void mw(this,ct)}if(y=W||"",W=new Map(this.headers),ie)if(Object.getPrototypeOf(ie)===Object.prototype)for(var ze in ie)W.set(ze,ie[ze]);else{if("function"!=typeof ie.keys||"function"!=typeof ie.get)throw Error("Unknown input type for opt_headers: "+String(ie));for(const ct of ie.keys())W.set(ct,ie.get(ct))}ie=Array.from(W.keys()).find(ct=>"content-type"==ct.toLowerCase()),ze=g.FormData&&y instanceof g.FormData,!(0<=Array.prototype.indexOf.call(gw,x,void 0))||ie||ze||W.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ct,tn]of W)this.g.setRequestHeader(ct,tn);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_D(this),this.u=!0,this.g.send(y),this.u=!1}catch(ct){mw(this,ct)}},i.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,va(this,"complete"),va(this,"abort"),_w(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_w(this,!0)),_o.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?sg(this):this.bb())},i.bb=function(){sg(this)},i.isActive=function(){return!!this.g},i.Z=function(){try{return 2<tc(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(y){if(this.g){var x=this.g.responseText;return y&&0==x.indexOf(y)&&(x=x.substring(y.length)),MR(x)}},i.Ba=function(){return this.m},i.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(i=vD.prototype).la=8,i.G=1,i.connect=function(y,x,W,ie){Ya(0),this.W=y,this.H=x||{},W&&void 0!==ie&&(this.H.OSID=W,this.H.OAID=ie),this.F=this.X,this.I=ZR(this,null,this.W),B_(this)},i.Ga=function(y){if(this.s)if(this.s=null,1==this.G){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const ze=new Kd(this,this.j,y);let ct=this.o;if(this.S&&(ct?(ct=me(ct),Ve(ct,this.S)):ct=this.S),null!==this.m||this.O||(ze.H=ct,ct=null),this.P)e:{for(var x=0,W=0;W<this.i.length;W++){var ie=this.i[W];if(void 0===(ie="__data__"in ie.map&&"string"==typeof(ie=ie.map.__data__)?ie.length:void 0))break;if(4096<(x+=ie)){x=W;break e}if(4096===x||W===this.i.length-1){x=W+1;break e}}x=1e3}else x=1e3;x=ED(this,ze,x),Mi(W=Wu(this.I),"RID",y),Mi(W,"CVER",22),this.D&&Mi(W,"X-HTTP-Session-Id",this.D),ag(this,W),ct&&(this.O?x="headers="+encodeURIComponent(String(KR(ct)))+"&"+x:this.m&&L_(W,this.m,ct)),fw(this.h,ze),this.Ua&&Mi(W,"TYPE","init"),this.P?(Mi(W,"$req",x),Mi(W,"SID","null"),ze.T=!0,cw(ze,W,null)):cw(ze,W,x),this.G=2}}else 3==this.G&&(y?yw(this,y):0==this.i.length||cD(this.h)||yw(this))},i.Fa=function(){if(this.u=null,Ew(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=NE(ee(this.ab,this),y)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ya(10),U_(this),Ew(this))},i.Za=function(){null!=this.C&&(this.C=null,U_(this),CD(this),Ya(19))},i.fb=function(y){y?(this.j.info("Successfully pinged google.com"),Ya(2)):(this.j.info("Failed to ping google.com"),Ya(1))},i.isActive=function(){return!!this.l&&this.l.isActive(this)},(i=Iw.prototype).ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){},j_.prototype.g=function(y,x){return new wl(y,x)},Re(wl,Js),wl.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wl.prototype.close=function(){V_(this.g)},wl.prototype.o=function(y){var x=this.g;if("string"==typeof y){var W={};W.__data__=y,y=W}else this.u&&((W={}).__data__=ME(y),y=W);x.i.push(new LR(x.Ya++,y)),3==x.G&&B_(x)},wl.prototype.N=function(){this.g.l=null,delete this.j,V_(this.g),delete this.g,wl.aa.N.call(this)},Re(ID,sw),Re(tN,eD),Re($_,Iw),$_.prototype.ua=function(){va(this.g,"a")},$_.prototype.ta=function(y){va(this.g,new ID(y))},$_.prototype.sa=function(y){va(this.g,new tN)},$_.prototype.ra=function(){va(this.g,"b")},j_.prototype.createWebChannel=j_.prototype.g,wl.prototype.send=wl.prototype.o,wl.prototype.open=wl.prototype.m,wl.prototype.close=wl.prototype.close,Xn=Wn.createWebChannelTransport=function(){return new j_},Bt=Wn.getStatEventTarget=function(){return aw()},Ei=Wn.Event=Wd,lo=Wn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},kE.NO_ERROR=0,kE.TIMEOUT=8,kE.HTTP_ERROR=6,Yr=Wn.ErrorCode=kE,nD.COMPLETE="complete",gr=Wn.EventType=nD,ow.EventType=D_,D_.OPEN="a",D_.CLOSE="b",D_.ERROR="c",D_.MESSAGE="d",Js.prototype.listen=Js.prototype.K,yo=Wn.WebChannel=ow,qi=Wn.FetchXmlHttpFactory=og,_o.prototype.listenOnce=_o.prototype.L,_o.prototype.getLastError=_o.prototype.Ka,_o.prototype.getLastErrorCode=_o.prototype.Ba,_o.prototype.getStatus=_o.prototype.Z,_o.prototype.getResponseJson=_o.prototype.Oa,_o.prototype.getResponseText=_o.prototype.oa,_o.prototype.send=_o.prototype.ea,_o.prototype.setWithCredentials=_o.prototype.Ha,mn=Wn.XhrIo=_o}).apply(typeof lr<"u"?lr:typeof self<"u"?self:typeof window<"u"?window:{});const xn="@firebase/firestore";class ir{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ir.UNAUTHENTICATED=new ir(null),ir.GOOGLE_CREDENTIALS=new ir("google-credentials-uid"),ir.FIRST_PARTY=new ir("first-party-uid"),ir.MOCK_USER=new ir("mock-user");let Nr="10.12.5";const Dr=new en.Vy("@firebase/firestore");function zr(){return Dr.logLevel}function yt(i,...e){if(Dr.logLevel<=en.$b.DEBUG){const t=e.map(Jn);Dr.debug(`Firestore (${Nr}): ${i}`,...t)}}function Pn(i,...e){if(Dr.logLevel<=en.$b.ERROR){const t=e.map(Jn);Dr.error(`Firestore (${Nr}): ${i}`,...t)}}function mr(i,...e){if(Dr.logLevel<=en.$b.WARN){const t=e.map(Jn);Dr.warn(`Firestore (${Nr}): ${i}`,...t)}}function Jn(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function Nt(i="Unexpected state"){const e=`FIRESTORE (${Nr}) INTERNAL ASSERTION FAILED: `+i;throw Pn(e),new Error(e)}function Kt(i,e){i||Nt()}function xt(i,e){return i}const Ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class st extends te.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $n{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class et{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Be{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ir.UNAUTHENTICATED))}shutdown(){}}class ge{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Me{constructor(e){this.t=e,this.currentUser=ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let a=this.i;const c=S=>this.i!==a?(a=this.i,t(S)):Promise.resolve();let d=new $n;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new $n,e.enqueueRetryable(()=>c(this.currentUser))};const g=()=>{const S=d;e.enqueueRetryable((0,we.A)(function*(){yield S.promise,yield c(o.currentUser)}))},E=S=>{yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=S,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(S=>E(S)),setTimeout(()=>{if(!this.auth){const S=this.t.getImmediate({optional:!0});S?E(S):(yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new $n)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Kt("string"==typeof o.accessToken),new et(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Kt(null===e||"string"==typeof e),new ir(e)}}class gt{constructor(e,t,o){this.l=e,this.h=t,this.P=o,this.type="FirstParty",this.user=ir.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class se{constructor(e,t,o){this.l=e,this.h=t,this.P=o}getToken(){return Promise.resolve(new gt(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ae{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ve{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const o=c=>{null!=c.error&&yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,yt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>o(c))};const a=c=>{yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Kt("string"==typeof t.token),this.R=t.token,new ae(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ne(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class Ft{static newId(){const t=62*Math.floor(256/62);let o="";for(;o.length<20;){const a=Ne(40);for(let c=0;c<a.length;++c)o.length<20&&a[c]<t&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(a[c]%62))}return o}}function vt(i,e){return i<e?-1:i>e?1:0}function kn(i,e,t){return i.length===e.length&&i.every((o,a)=>t(o,e[a]))}function Ci(i){return i+"\0"}class On{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new st(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new st(Ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new st(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new st(Ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new On(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?vt(this.nanoseconds,e.nanoseconds):vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class $t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new $t(e)}static min(){return new $t(new On(0,0))}static max(){return new $t(new On(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Hn{constructor(e,t,o){void 0===t?t=0:t>e.length&&Nt(),void 0===o?o=e.length-t:o>e.length-t&&Nt(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Hn.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hn?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let a=0;a<o;a++){const c=e.get(a),d=t.get(a);if(c<d)return-1;if(c>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Tn extends Hn{construct(e,t,o){return new Tn(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new st(Ge.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(a=>a.length>0))}return new Tn(t)}static emptyPath(){return new Tn([])}}const vo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _r extends Hn{construct(e,t,o){return new _r(e,t,o)}static isValidIdentifier(e){return vo.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_r.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new _r(["__name__"])}static fromServerFormat(e){const t=[];let o="",a=0;const c=()=>{if(0===o.length)throw new st(Ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let d=!1;for(;a<e.length;){const g=e[a];if("\\"===g){if(a+1===e.length)throw new st(Ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[a+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new st(Ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=E,a+=2}else"`"===g?(d=!d,a++):"."!==g||d?(o+=g,a++):(c(),a++)}if(c(),d)throw new st(Ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _r(t)}static emptyPath(){return new _r([])}}class Ht{constructor(e){this.path=e}static fromPath(e){return new Ht(Tn.fromString(e))}static fromName(e){return new Ht(Tn.fromString(e).popFirst(5))}static empty(){return new Ht(Tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ht(new Tn(e.slice()))}}class Ii{constructor(e,t,o,a){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=a}}function Eo(i){return i.fields.find(e=>2===e.kind)}function Wo(i){return i.fields.filter(e=>2!==e.kind)}Ii.UNKNOWN_ID=-1;class Oi{constructor(e,t){this.fieldPath=e,this.kind=t}}class be{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new be(0,ln.min())}}function ut(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,a=$t.fromTimestamp(1e9===o?new On(t+1,0):new On(t,o));return new ln(a,Ht.empty(),e)}function Wt(i){return new ln(i.readTime,i.key,-1)}class ln{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new ln($t.min(),Ht.empty(),-1)}static max(){return new ln($t.max(),Ht.empty(),-1)}}function Cn(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ht.comparator(i.documentKey,e.documentKey),0!==t?t:vt(i.largestBatchId,e.largestBatchId))}const Fn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Cr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function nr(i){return di.apply(this,arguments)}function di(){return(di=(0,we.A)(function*(i){if(i.code!==Ge.FAILED_PRECONDITION||i.message!==Fn)throw i;yt("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ke((o,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(o,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(o,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ke?t:ke.resolve(t)}catch(t){return ke.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ke.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ke.reject(t)}static resolve(e){return new ke((t,o)=>{t(e)})}static reject(e){return new ke((t,o)=>{o(e)})}static waitFor(e){return new ke((t,o)=>{let a=0,c=0,d=!1;e.forEach(g=>{++a,g.next(()=>{++c,d&&c===a&&t()},E=>o(E))}),d=!0,c===a&&t()})}static or(e){let t=ke.resolve(!1);for(const o of e)t=t.next(a=>a?ke.resolve(a):o());return t}static forEach(e,t){const o=[];return e.forEach((a,c)=>{o.push(t.call(this,a,c))}),this.waitFor(o)}static mapArray(e,t){return new ke((o,a)=>{const c=e.length,d=new Array(c);let g=0;for(let E=0;E<c;E++){const S=E;t(e[S]).next(V=>{d[S]=V,++g,g===c&&o(d)},V=>a(V))}})}static doWhile(e,t){return new ke((o,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):o()};c()})}}class Ls{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new $n,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Zi(e,t.error)):this.V.resolve()},this.transaction.onerror=o=>{const a=Vs(o.target.error);this.V.reject(new Zi(e,a))}}static open(e,t,o,a){try{return new Ls(t,e.transaction(a,o))}catch(c){throw new Zi(t,c)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(yt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ca(t)}}class qn{constructor(e,t,o){this.name=e,this.version=t,this.p=o,12.2===qn.S((0,te.ZQ)())&&Pn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return yt("SimpleDb","Removing database:",e),qo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,te.zW)())return!1;if(qn.C())return!0;const e=(0,te.ZQ)(),t=qn.S(e),o=0<t&&t<10,a=Zs(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}M(e){var t=this;return(0,we.A)(function*(){return t.db||(yt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=d=>{o(d.target.result)},c.onblocked=()=>{a(new Zi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=d=>{const g=d.target.error;a("VersionError"===g.name?new st(Ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new st(Ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Zi(e,g))},c.onupgradeneeded=d=>{yt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.p.O(d.target.result,c.transaction,d.oldVersion,t.version).next(()=>{yt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=o=>t.N(o)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,a){var c=this;return(0,we.A)(function*(){const d="readonly"===t;let g=0;for(;;){++g;try{c.db=yield c.M(e);const E=Ls.open(c.db,e,d?"readonly":"readwrite",o),S=a(E).next(V=>(E.g(),V)).catch(V=>(E.abort(V),ke.reject(V))).toPromise();return S.catch(()=>{}),yield E.m,S}catch(E){const S=E,V="FirebaseError"!==S.name&&g<3;if(yt("SimpleDb","Transaction failed with error:",S.message,"Retrying:",V),c.close(),!V)return Promise.reject(S)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function Zs(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class hs{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return qo(this.B.delete())}}class Zi extends st{constructor(e,t){super(Ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ko(i){return"IndexedDbTransactionError"===i.name}class Ca{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(yt("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(yt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),qo(o)}add(e){return yt("SimpleDb","ADD",this.store.name,e,e),qo(this.store.add(e))}get(e){return qo(this.store.get(e)).next(t=>(void 0===t&&(t=null),yt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return yt("SimpleDb","DELETE",this.store.name,e),qo(this.store.delete(e))}count(){return yt("SimpleDb","COUNT",this.store.name),qo(this.store.count())}U(e,t){const o=this.options(e,t),a=o.index?this.store.index(o.index):this.store;if("function"==typeof a.getAll){const c=a.getAll(o.range);return new ke((d,g)=>{c.onerror=E=>{g(E.target.error)},c.onsuccess=E=>{d(E.target.result)}})}{const c=this.cursor(o),d=[];return this.W(c,(g,E)=>{d.push(E)}).next(()=>d)}}G(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new ke((a,c)=>{o.onerror=d=>{c(d.target.error)},o.onsuccess=d=>{a(d.target.result)}})}j(e,t){yt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.H=!1;const a=this.cursor(o);return this.W(a,(c,d,g)=>g.delete())}J(e,t){let o;t?o=e:(o={},t=e);const a=this.cursor(o);return this.W(a,t)}Y(e){const t=this.cursor({});return new ke((o,a)=>{t.onerror=c=>{const d=Vs(c.target.error);a(d)},t.onsuccess=c=>{const d=c.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():o()}):o()}})}W(e,t){const o=[];return new ke((a,c)=>{e.onerror=d=>{c(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void a();const E=new hs(g),S=t(g.primaryKey,g.value,E);if(S instanceof ke){const V=S.catch(K=>(E.done(),ke.reject(K)));o.push(V)}E.isDone?a():null===E.K?g.continue():g.continue(E.K)}}).next(()=>ke.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.H?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qo(i){return new ke((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const a=Vs(o.target.error);t(a)}})}let Ia=!1;function Vs(i){const e=qn.S((0,te.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new st("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ia||(Ia=!0,setTimeout(()=>{throw o},0)),o}}return i}class Qo{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;yt("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,we.A)(function*(){t.task=null;try{yt("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(o){Ko(o)?yt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):yield nr(o)}yield t.X(6e4)}))}}class cr{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,we.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.te(o,e))})()}te(e,t){const o=new Set;let a=t,c=!0;return ke.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!o.has(d))return yt("IndexBackfiller",`Processing collection: ${d}`),this.ne(e,d,a).next(g=>{a-=g,o.add(d)});c=!1})).next(()=>t-a)}ne(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,o).next(c=>{const d=c.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.re(a,c)).next(g=>(yt("IndexBackfiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>d.size)}))}re(e,t){let o=e;return t.changes.forEach((a,c)=>{const d=Wt(c);Cn(d,o)>0&&(o=d)}),new ln(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Sr=(()=>{class i{constructor(t,o){this.previousValue=t,o&&(o.sequenceNumberHandler=a=>this.ie(a),this.se=a=>o.writeSequenceNumber(a))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return i.oe=-1,i})();function co(i){return null==i}function hi(i){return 0===i&&1/i==-1/0}function Ri(i){return"number"==typeof i&&Number.isInteger(i)&&!hi(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function Xr(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=eo(e)),e=Oo(i.get(t),e);return eo(e)}function Oo(i,e){let t=e;const o=i.length;for(let a=0;a<o;a++){const c=i.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function eo(i){return i+"\x01\x01"}function Mr(i){const e=i.length;if(Kt(e>=2),2===e)return Kt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Tn.emptyPath();const t=e-2,o=[];let a="";for(let c=0;c<e;){const d=i.indexOf("\x01",c);switch((d<0||d>t)&&Nt(),i.charAt(d+1)){case"\x01":const g=i.substring(c,d);let E;0===a.length?E=g:(a+=g,E=a,a=""),o.push(E);break;case"\x10":a+=i.substring(c,d),a+="\0";break;case"\x11":a+=i.substring(c,d+1);break;default:Nt()}c=d+2}return new Tn(o)}const Us=["userId","batchId"];function ea(i,e){return[i,Xr(e)]}function bl(i,e,t){return[i,Xr(e),t]}const Al={},wa=["prefixPath","collectionGroup","readTime","documentId"],Sc=["prefixPath","collectionGroup","documentId"],Ta=["collectionGroup","readTime","prefixPath","documentId"],rc=["canonicalId","targetId"],Xa=["targetId","path"],ic=["path","targetId"],ba=["collectionId","parent"],ta=["indexId","uid"],bs=["uid","sequenceNumber"],As=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ja=["indexId","uid","orderedDocumentKey"],Mc=["userId","collectionPath","documentId"],Yo=["userId","collectionPath","largestBatchId"],na=["userId","collectionGroup","largestBatchId"],ra=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Aa=[...ra,"documentOverlays"],Or=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xo=Or,Ro=[...Xo,"indexConfiguration","indexState","indexEntries"],Ps=Ro,ia=[...Ro,"globals"];class fs extends Cr{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function xr(i,e){const t=xt(i);return qn.F(t._e,e)}function to(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Co(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Pa(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class ur{constructor(e,t){this.comparator=e,this.root=t||Jr.EMPTY}insert(e,t){return new ur(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jr.BLACK,null,null))}remove(e){return new ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const a=this.comparator(e,o.key);if(0===a)return t+o.left.size;a<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ji(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ji(this.root,e,this.comparator,!1)}getReverseIterator(){return new ji(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ji(this.root,e,this.comparator,!0)}}class ji{constructor(e,t,o,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?o(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jr{constructor(e,t,o,a,c){this.key=e,this.value=t,this.color=o??Jr.RED,this.left=a??Jr.EMPTY,this.right=c??Jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,a,c){return new Jr(e??this.key,t??this.value,o??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let a=this;const c=o(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,o),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,o)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Jr.EMPTY;o=a.right.min(),a=a.copy(o.key,o.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Nt();const e=this.left.check();if(e!==this.right.check())throw Nt();return e+(this.isRed()?0:1)}}Jr.EMPTY=null,Jr.RED=!0,Jr.BLACK=!1,Jr.EMPTY=new class{constructor(){this.size=0}get key(){throw Nt()}get value(){throw Nt()}get color(){throw Nt()}get left(){throw Nt()}get right(){throw Nt()}copy(e,t,o,a,c){return this}insert(e,t,o){return new Jr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qn{constructor(e){this.comparator=e,this.data=new ur(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const a=o.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wi(this.data.getIterator())}getIteratorFrom(e){return new wi(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=o.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Qn(this.comparator);return t.data=e,t}}class wi{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Zo(i){return i.hasNext()?i.getNext():void 0}class Ni{constructor(e){this.fields=e,e.sort(_r.comparator)}static empty(){return new Ni([])}unionWith(e){let t=new Qn(_r.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new Ni(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kn(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Ds extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class kr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Ds("Invalid base64 string: "+c):c}}(e);return new kr(t)}static fromUint8Array(e){const t=function(a){let c="";for(let d=0;d<a.length;++d)c+=String.fromCharCode(a[d]);return c}(e);return new kr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const o=new Uint8Array(t.length);for(let a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kr.EMPTY_BYTE_STRING=new kr("");const Da=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function no(i){if(Kt(!!i),"string"==typeof i){let e=0;const t=Da.exec(i);if(Kt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Mt(i.seconds),nanos:Mt(i.nanos)}}function Mt(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ur(i){return"string"==typeof i?kr.fromBase64String(i):kr.fromUint8Array(i)}function fi(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function es(i){const e=i.mapValue.fields.__previous_value__;return fi(e)?es(e):e}function js(i){const e=no(i.mapValue.fields.__local_write_time__.timestampValue);return new On(e.seconds,e.nanos)}class Io{constructor(e,t,o,a,c,d,g,E,S){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=a,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=E,this.useFetchStreams=S}}class ps{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ps("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ps&&e.projectId===this.projectId&&e.database===this.database}}const ti={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xi={nullValue:"NULL_VALUE"};function ni(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?fi(i)?4:Qt(i)?9007199254740991:10:Nt()}function ri(i,e){if(i===e)return!0;const t=ni(i);if(t!==ni(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return js(i).isEqual(js(e));case 3:return function(a,c){if("string"==typeof a.timestampValue&&"string"==typeof c.timestampValue&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const d=no(a.timestampValue),g=no(c.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return c=e,Ur(i.bytesValue).isEqual(Ur(c.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,c){return Mt(a.geoPointValue.latitude)===Mt(c.geoPointValue.latitude)&&Mt(a.geoPointValue.longitude)===Mt(c.geoPointValue.longitude)}(i,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return Mt(a.integerValue)===Mt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const d=Mt(a.doubleValue),g=Mt(c.doubleValue);return d===g?hi(d)===hi(g):isNaN(d)&&isNaN(g)}return!1}(i,e);case 9:return kn(i.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:return function(a,c){const d=a.mapValue.fields||{},g=c.mapValue.fields||{};if(to(d)!==to(g))return!1;for(const E in d)if(d.hasOwnProperty(E)&&(void 0===g[E]||!ri(d[E],g[E])))return!1;return!0}(i,e);default:return Nt()}var c}function Ss(i,e){return void 0!==(i.values||[]).find(t=>ri(t,e))}function uo(i,e){if(i===e)return 0;const t=ni(i),o=ni(e);if(t!==o)return vt(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return vt(i.booleanValue,e.booleanValue);case 2:return function(c,d){const g=Mt(c.integerValue||c.doubleValue),E=Mt(d.integerValue||d.doubleValue);return g<E?-1:g>E?1:g===E?0:isNaN(g)?isNaN(E)?0:-1:1}(i,e);case 3:return gs(i.timestampValue,e.timestampValue);case 4:return gs(js(i),js(e));case 5:return vt(i.stringValue,e.stringValue);case 6:return function(c,d){const g=Ur(c),E=Ur(d);return g.compareTo(E)}(i.bytesValue,e.bytesValue);case 7:return function(c,d){const g=c.split("/"),E=d.split("/");for(let S=0;S<g.length&&S<E.length;S++){const V=vt(g[S],E[S]);if(0!==V)return V}return vt(g.length,E.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,d){const g=vt(Mt(c.latitude),Mt(d.latitude));return 0!==g?g:vt(Mt(c.longitude),Mt(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(c,d){const g=c.values||[],E=d.values||[];for(let S=0;S<g.length&&S<E.length;++S){const V=uo(g[S],E[S]);if(V)return V}return vt(g.length,E.length)}(i.arrayValue,e.arrayValue);case 10:return function(c,d){if(c===ti.mapValue&&d===ti.mapValue)return 0;if(c===ti.mapValue)return 1;if(d===ti.mapValue)return-1;const g=c.fields||{},E=Object.keys(g),S=d.fields||{},V=Object.keys(S);E.sort(),V.sort();for(let K=0;K<E.length&&K<V.length;++K){const ee=vt(E[K],V[K]);if(0!==ee)return ee;const de=uo(g[E[K]],S[V[K]]);if(0!==de)return de}return vt(E.length,V.length)}(i.mapValue,e.mapValue);default:throw Nt()}}function gs(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return vt(i,e);const t=no(i),o=no(e),a=vt(t.seconds,o.seconds);return 0!==a?a:vt(t.nanos,o.nanos)}function re(i){return b(i)}function b(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const o=no(t);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ur(i.bytesValue).toBase64():"referenceValue"in i?Ht.fromName(i.referenceValue).toString():"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let o="[",a=!0;for(const c of t.values||[])a?a=!1:o+=",",o+=b(c);return o+"]"}(i.arrayValue):"mapValue"in i?function(t){const o=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const d of o)c?c=!1:a+=",",a+=`${d}:${b(t.fields[d])}`;return a+"}"}(i.mapValue):Nt()}function U(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Q(i){return!!i&&"integerValue"in i}function oe(i){return!!i&&"arrayValue"in i}function pe(i){return!!i&&"nullValue"in i}function Ce(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ke(i){return!!i&&"mapValue"in i}function rt(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Co(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=rt(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rt(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Qt(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function mt(i){return"nullValue"in i?xi:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?U(ps.empty(),Ht.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:Nt()}function Vn(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?U(ps.empty(),Ht.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?ti:Nt()}function yn(i,e){const t=uo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function bn(i,e){const t=uo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class hn{constructor(e){this.value=e}static empty(){return new hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Ke(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rt(t)}setAll(e){let t=_r.emptyPath(),o={},a=[];e.forEach((d,g)=>{if(!t.isImmediateParentOf(g)){const E=this.getFieldsMap(t);this.applyChanges(E,o,a),o={},a=[],t=g.popLast()}d?o[g.lastSegment()]=rt(d):a.push(g.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,o,a)}delete(e){const t=this.field(e.popLast());Ke(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let a=t.mapValue.fields[e.get(o)];Ke(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,o){Co(t,(a,c)=>e[a]=c);for(const a of o)delete e[a]}clone(){return new hn(rt(this.value))}}function In(i){const e=[];return Co(i.fields,(t,o)=>{const a=new _r([t]);if(Ke(o)){const c=In(o.mapValue).fields;if(0===c.length)e.push(a);else for(const d of c)e.push(a.child(d))}else e.push(a)}),new Ni(e)}class wn{constructor(e,t,o,a,c,d,g){this.key=e,this.documentType=t,this.version=o,this.readTime=a,this.createTime=c,this.data=d,this.documentState=g}static newInvalidDocument(e){return new wn(e,0,$t.min(),$t.min(),$t.min(),hn.empty(),0)}static newFoundDocument(e,t,o,a){return new wn(e,1,t,$t.min(),o,a,0)}static newNoDocument(e,t){return new wn(e,2,t,$t.min(),$t.min(),hn.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,$t.min(),$t.min(),hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($t.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fr{constructor(e,t){this.position=e,this.inclusive=t}}function $i(i,e,t){let o=0;for(let a=0;a<i.position.length;a++){const c=e[a],d=i.position[a];if(o=c.field.isKeyField()?Ht.comparator(Ht.fromName(d.referenceValue),t.key):uo(d,t.data.field(c.field)),"desc"===c.dir&&(o*=-1),0!==o)break}return o}function Ti(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!ri(i.position[t],e.position[t]))return!1;return!0}class ts{constructor(e,t="asc"){this.field=e,this.dir=t}}function H(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class ${}class R extends ${constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,o):new Dn(e,t,o):"array-contains"===t?new ro(e,o):"in"===t?new No(e,o):"not-in"===t?new br(e,o):"array-contains-any"===t?new To(e,o):new R(e,t,o)}static createKeyFieldInFilter(e,t,o){return"in"===t?new or(e,o):new Wr(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(uo(t,this.value)):null!==t&&ni(this.value)===ni(t)&&this.matchesComparison(uo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Nt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Y extends ${constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Y(e,t)}matches(e){return he(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function he(i){return"and"===i.op}function Tt(i){return"or"===i.op}function An(i){return bi(i)&&he(i)}function bi(i){for(const e of i.filters)if(e instanceof Y)return!1;return!0}function ns(i){if(i instanceof R)return i.field.canonicalString()+i.op.toString()+re(i.value);if(An(i))return i.filters.map(e=>ns(e)).join(",");{const e=i.filters.map(t=>ns(t)).join(",");return`${i.op}(${e})`}}function wo(i,e){return i instanceof R?(o=i,(a=e)instanceof R&&o.op===a.op&&o.field.isEqual(a.field)&&ri(o.value,a.value)):i instanceof Y?function(o,a){return a instanceof Y&&o.op===a.op&&o.filters.length===a.filters.length&&o.filters.reduce((c,d,g)=>c&&wo(d,a.filters[g]),!0)}(i,e):void Nt();var o,a}function rn(i,e){const t=i.filters.concat(e);return Y.create(t,i.op)}function jt(i){return i instanceof R?`${(t=i).field.canonicalString()} ${t.op} ${re(t.value)}`:i instanceof Y?function(t){return t.op.toString()+" {"+t.getFilters().map(jt).join(" ,")+"}"}(i):"Filter";var t}class Dn extends R{constructor(e,t,o){super(e,t,o),this.key=Ht.fromName(o.referenceValue)}matches(e){const t=Ht.comparator(e.key,this.key);return this.matchesComparison(t)}}class or extends R{constructor(e,t){super(e,"in",t),this.keys=ho(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Wr extends R{constructor(e,t){super(e,"not-in",t),this.keys=ho(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ho(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Ht.fromName(o.referenceValue))}class ro extends R{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return oe(t)&&Ss(t.arrayValue,this.value)}}class No extends R{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ss(this.value.arrayValue,t)}}class br extends R{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ss(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ss(this.value.arrayValue,t)}}class To extends R{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!oe(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>Ss(this.value.arrayValue,o))}}class Oc{constructor(e,t=null,o=[],a=[],c=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=a,this.limit=c,this.startAt=d,this.endAt=g,this.ue=null}}function pi(i,e=null,t=[],o=[],a=null,c=null,d=null){return new Oc(i,e,t,o,a,c,d)}function xo(i){const e=xt(i);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>ns(o)).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(c=o).field.canonicalString()+c.dir;var c}).join(","),co(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>re(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>re(o)).join(",")),e.ue=t}return e.ue}function vn(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!H(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!wo(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ti(i.startAt,e.startAt)&&Ti(i.endAt,e.endAt)}function rs(i){return Ht.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Ms(i,e){return i.filters.filter(t=>t instanceof R&&t.field.isEqual(e))}function Rc(i,e,t){let o=xi,a=!0;for(const c of Ms(i,e)){let d=xi,g=!0;switch(c.op){case"<":case"<=":d=mt(c.value);break;case"==":case"in":case">=":d=c.value;break;case">":d=c.value,g=!1;break;case"!=":case"not-in":d=xi}yn({value:o,inclusive:a},{value:d,inclusive:g})<0&&(o=d,a=g)}if(null!==t)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const d=t.position[c];yn({value:o,inclusive:a},{value:d,inclusive:t.inclusive})<0&&(o=d,a=t.inclusive);break}return{value:o,inclusive:a}}function oc(i,e,t){let o=ti,a=!0;for(const c of Ms(i,e)){let d=ti,g=!0;switch(c.op){case">=":case">":d=Vn(c.value),g=!1;break;case"==":case"in":case"<=":d=c.value;break;case"<":d=c.value,g=!1;break;case"!=":case"not-in":d=ti}bn({value:o,inclusive:a},{value:d,inclusive:g})>0&&(o=d,a=g)}if(null!==t)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const d=t.position[c];bn({value:o,inclusive:a},{value:d,inclusive:t.inclusive})>0&&(o=d,a=t.inclusive);break}return{value:o,inclusive:a}}class $s{constructor(e,t=null,o=[],a=[],c=null,d="F",g=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=a,this.limit=c,this.limitType=d,this.startAt=g,this.endAt=E,this.ce=null,this.le=null,this.he=null}}function Pl(i,e,t,o,a,c,d,g){return new $s(i,e,t,o,a,c,d,g)}function sc(i){return new $s(i)}function pf(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Nc(i){return null!==i.collectionGroup}function Za(i){const e=xt(i);if(null===e.ce){e.ce=[];const t=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),t.add(c.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Qn(_r.comparator);return d.filters.forEach(E=>{E.getFlattenedFilters().forEach(S=>{S.isInequality()&&(g=g.add(S.field))})}),g})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.ce.push(new ts(c,o))}),t.has(_r.keyField().canonicalString())||e.ce.push(new ts(_r.keyField(),o))}return e.ce}function Qi(i){const e=xt(i);return e.le||(e.le=function lu(i,e){if("F"===i.limitType)return pi(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>new ts(a.field,"desc"===a.dir?"asc":"desc"));const t=i.endAt?new Fr(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new Fr(i.startAt.position,i.startAt.inclusive):null;return pi(i.path,i.collectionGroup,e,i.filters,i.limit,t,o)}}(e,Za(i))),e.le}function Dl(i,e){const t=i.filters.concat([e]);return new $s(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function xc(i,e,t){return new $s(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function ko(i,e){return vn(Qi(i),Qi(e))&&i.limitType===e.limitType}function ac(i){return`${xo(Qi(i))}|lt:${i.limitType}`}function Ma(i){return`Query(target=${function(t){let o=t.path.canonicalString();return null!==t.collectionGroup&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map(a=>jt(a)).join(", ")}]`),co(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map(a=>{return`${(d=a).field.canonicalString()} (${d.dir})`;var d}).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map(a=>re(a)).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map(a=>re(a)).join(",")),`Target(${o})`}(Qi(i))}; limitType=${i.limitType})`}function Un(i,e){return e.isFoundDocument()&&function(o,a){const c=a.key.path;return null!==o.collectionGroup?a.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(c):Ht.isDocumentKey(o.path)?o.path.isEqual(c):o.path.isImmediateParentOf(c)}(i,e)&&function(o,a){for(const c of Za(o))if(!c.field.isKeyField()&&null===a.data.field(c.field))return!1;return!0}(i,e)&&function(o,a){for(const c of o.filters)if(!c.matches(a))return!1;return!0}(i,e)&&(a=e,!((o=i).startAt&&!function(d,g,E){const S=$i(d,g,E);return d.inclusive?S<=0:S<0}(o.startAt,Za(o),a)||o.endAt&&!function(d,g,E){const S=$i(d,g,E);return d.inclusive?S>=0:S>0}(o.endAt,Za(o),a)));var o,a}function Ar(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Yd(i){return(e,t)=>{let o=!1;for(const a of Za(i)){const c=cu(a,e,t);if(0!==c)return c;o=o||a.field.isKeyField()}return 0}}function cu(i,e,t){const o=i.field.isKeyField()?Ht.comparator(e.key,t.key):function(c,d,g){const E=d.data.field(c),S=g.data.field(c);return null!==E&&null!==S?uo(E,S):Nt()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return Nt()}}class ms{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[a,c]of o)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),a=this.inner[o];if(void 0===a)return this.inner[o]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return 1===o.length?delete this.inner[t]:o.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Co(this.inner,(t,o)=>{for(const[a,c]of o)e(a,c)})}isEmpty(){return Pa(this.inner)}size(){return this.innerSize}}const Xd=new ur(Ht.comparator);function Fo(){return Xd}const D=new ur(Ht.comparator);function q(...i){let e=D;for(const t of i)e=e.insert(t.key,t);return e}function k(i){let e=D;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function z(){return Ye()}function le(){return Ye()}function Ye(){return new ms(i=>i.toString(),(i,e)=>i.isEqual(e))}const wt=new ur(Ht.comparator),an=new Qn(Ht.comparator);function on(...i){let e=an;for(const t of i)e=e.add(t);return e}const Lr=new Qn(vt);function Pr(){return Lr}function dr(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hi(e)?"-0":e}}function ii(i){return{integerValue:""+i}}function Br(i,e){return Ri(e)?ii(e):dr(i,e)}class Zr{constructor(){this._=void 0}}function Lo(i,e,t){return i instanceof os?function(a,c){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&fi(c)&&(c=es(c)),c&&(d.fields.__previous_value__=c),{mapValue:d}}(t,e):i instanceof Rr?oa(i,e):i instanceof cn?Sl(i,e):function(a,c){const d=is(a,c),g=Os(d)+Os(a.Pe);return Q(d)&&Q(a.Pe)?ii(g):dr(a.serializer,g)}(i,e)}function Hs(i,e,t){return i instanceof Rr?oa(i,e):i instanceof cn?Sl(i,e):t}function is(i,e){return i instanceof Oa?Q(o=e)||(c=o)&&"doubleValue"in c?e:{integerValue:0}:null;var o,c}class os extends Zr{}class Rr extends Zr{constructor(e){super(),this.elements=e}}function oa(i,e){const t=Qu(e);for(const o of i.elements)t.some(a=>ri(a,o))||t.push(o);return{arrayValue:{values:t}}}class cn extends Zr{constructor(e){super(),this.elements=e}}function Sl(i,e){let t=Qu(e);for(const o of i.elements)t=t.filter(a=>!ri(a,o));return{arrayValue:{values:t}}}class Oa extends Zr{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Os(i){return Mt(i.integerValue||i.doubleValue)}function Qu(i){return oe(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class el{constructor(e,t){this.field=e,this.transform=t}}class dg{constructor(e,t){this.version=e,this.transformResults=t}}class oi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new oi}static exists(e){return new oi(void 0,e)}static updateTime(e){return new oi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yu(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class bo{}function Xu(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new lc(i.key,oi.none()):new Rl(i.key,i.data,oi.none());{const t=i.data,o=hn.empty();let a=new Qn(_r.comparator);for(let c of e.fields)if(!a.has(c)){let d=t.field(c);null===d&&c.length>1&&(c=c.popLast(),d=t.field(c)),null===d?o.delete(c):o.set(c,d),a=a.add(c)}return new sa(i.key,o,new Ni(a.toArray()),oi.none())}}function tl(i,e,t){i instanceof Rl?function(a,c,d){const g=a.value.clone(),E=Jd(a.fieldTransforms,c,d.transformResults);g.setAll(E),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(i,e,t):i instanceof sa?function(a,c,d){if(!Yu(a.precondition,c))return void c.convertToUnknownDocument(d.version);const g=Jd(a.fieldTransforms,c,d.transformResults),E=c.data;E.setAll(Ju(a)),E.setAll(g),c.convertToFoundDocument(d.version,E).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ml(i,e,t,o){return i instanceof Rl?function(c,d,g,E){if(!Yu(c.precondition,d))return g;const S=c.value.clone(),V=kc(c.fieldTransforms,E,d);return S.setAll(V),d.convertToFoundDocument(d.version,S).setHasLocalMutations(),null}(i,e,t,o):i instanceof sa?function(c,d,g,E){if(!Yu(c.precondition,d))return g;const S=kc(c.fieldTransforms,E,d),V=d.data;return V.setAll(Ju(c)),V.setAll(S),d.convertToFoundDocument(d.version,V).setHasLocalMutations(),null===g?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(K=>K.field))}(i,e,t,o):(g=t,Yu(i.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g);var d,g}function fo(i,e){let t=null;for(const o of i.fieldTransforms){const a=e.data.field(o.field),c=is(o.transform,a||null);null!=c&&(null===t&&(t=hn.empty()),t.set(o.field,c))}return t||null}function Ol(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(o=i.fieldTransforms)&&void 0===a||o&&a&&kn(o,a,(c,d)=>function gf(i,e){return i.field.isEqual(e.field)&&(a=e.transform,(o=i.transform)instanceof Rr&&a instanceof Rr||o instanceof cn&&a instanceof cn?kn(o.elements,a.elements,ri):o instanceof Oa&&a instanceof Oa?ri(o.Pe,a.Pe):o instanceof os&&a instanceof os);var o,a}(c,d))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var o,a}class Rl extends bo{constructor(e,t,o,a=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class sa extends bo{constructor(e,t,o,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Ju(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Jd(i,e,t){const o=new Map;Kt(i.length===t.length);for(let a=0;a<t.length;a++){const c=i[a],d=c.transform,g=e.data.field(c.field);o.set(c.field,Hs(d,g,t[a]))}return o}function kc(i,e,t){const o=new Map;for(const a of i){const c=a.transform,d=t.data.field(a.field);o.set(a.field,Lo(c,d,e))}return o}class lc extends bo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nl extends bo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Vo{constructor(e,t,o,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=a}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&tl(c,e,o[a])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Ml(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Ml(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=le();return this.mutations.forEach(a=>{const c=e.get(a.key),d=c.overlayedDocument;let g=this.applyToLocalView(d,c.mutatedFields);g=t.has(a.key)?null:g;const E=Xu(d,g);null!==E&&o.set(a.key,E),d.isValidDocument()||d.convertToNoDocument($t.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),on())}isEqual(e){return this.batchId===e.batchId&&kn(this.mutations,e.mutations,(t,o)=>Ol(t,o))&&kn(this.baseMutations,e.baseMutations,(t,o)=>Ol(t,o))}}class _s{constructor(e,t,o,a){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=a}static from(e,t,o){Kt(e.mutations.length===o.length);let a=function(){return wt}();const c=e.mutations;for(let d=0;d<c.length;d++)a=a.insert(c[d].key,o[d].version);return new _s(e,t,o,a)}}class Gs{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Yi{constructor(e,t){this.count=e,this.unchangedNames=t}}var Kr,un;function zs(i){switch(i){default:return Nt();case Ge.CANCELLED:case Ge.UNKNOWN:case Ge.DEADLINE_EXCEEDED:case Ge.RESOURCE_EXHAUSTED:case Ge.INTERNAL:case Ge.UNAVAILABLE:case Ge.UNAUTHENTICATED:return!1;case Ge.INVALID_ARGUMENT:case Ge.NOT_FOUND:case Ge.ALREADY_EXISTS:case Ge.PERMISSION_DENIED:case Ge.FAILED_PRECONDITION:case Ge.ABORTED:case Ge.OUT_OF_RANGE:case Ge.UNIMPLEMENTED:case Ge.DATA_LOSS:return!0}}function cc(i){if(void 0===i)return Pn("GRPC error has no .code"),Ge.UNKNOWN;switch(i){case Kr.OK:return Ge.OK;case Kr.CANCELLED:return Ge.CANCELLED;case Kr.UNKNOWN:return Ge.UNKNOWN;case Kr.DEADLINE_EXCEEDED:return Ge.DEADLINE_EXCEEDED;case Kr.RESOURCE_EXHAUSTED:return Ge.RESOURCE_EXHAUSTED;case Kr.INTERNAL:return Ge.INTERNAL;case Kr.UNAVAILABLE:return Ge.UNAVAILABLE;case Kr.UNAUTHENTICATED:return Ge.UNAUTHENTICATED;case Kr.INVALID_ARGUMENT:return Ge.INVALID_ARGUMENT;case Kr.NOT_FOUND:return Ge.NOT_FOUND;case Kr.ALREADY_EXISTS:return Ge.ALREADY_EXISTS;case Kr.PERMISSION_DENIED:return Ge.PERMISSION_DENIED;case Kr.FAILED_PRECONDITION:return Ge.FAILED_PRECONDITION;case Kr.ABORTED:return Ge.ABORTED;case Kr.OUT_OF_RANGE:return Ge.OUT_OF_RANGE;case Kr.UNIMPLEMENTED:return Ge.UNIMPLEMENTED;case Kr.DATA_LOSS:return Ge.DATA_LOSS;default:return Nt()}}(un=Kr||(Kr={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";function uu(){return new TextEncoder}const Zu=new jn([4294967295,4294967295],0);function Ra(i){const e=uu().encode(i),t=new Hr;return t.update(e),new Uint8Array(t.digest())}function Na(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new jn([t,o],0),new jn([a,c],0)]}class Zd{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new xa(`Invalid padding: ${t}`);if(o<0)throw new xa(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new xa(`Invalid hash count: ${o}`);if(0===e.length&&0!==t)throw new xa(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=jn.fromNumber(this.Ie)}Ee(e,t,o){let a=e.add(t.multiply(jn.fromNumber(o)));return 1===a.compare(Zu)&&(a=new jn([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Ra(e),[o,a]=Na(t);for(let c=0;c<this.hashCount;c++){const d=this.Ee(o,a,c);if(!this.de(d))return!1}return!0}static create(e,t,o){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Zd(c,a,t);return o.forEach(g=>d.insert(g)),d}insert(e){if(0===this.Ie)return;const t=Ra(e),[o,a]=Na(t);for(let c=0;c<this.hashCount;c++){const d=this.Ee(o,a,c);this.Ae(d)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xl{constructor(e,t,o,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const a=new Map;return a.set(e,Lc.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new xl($t.min(),a,new ur(vt),Fo(),on())}}class Lc{constructor(e,t,o,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Lc(o,t,on(),on(),on())}}class ka{constructor(e,t,o,a){this.Re=e,this.removedTargetIds=t,this.key=o,this.Ve=a}}class eh{constructor(e,t){this.targetId=e,this.me=t}}class Vc{constructor(e,t,o=kr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=a}}class mf{constructor(){this.fe=0,this.ge=_f(),this.pe=kr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=on(),t=on(),o=on();return this.ge.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:o=o.add(a);break;default:Nt()}}),new Lc(this.pe,this.ye,e,t,o)}ve(){this.we=!1,this.ge=_f()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Kt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class du{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fo(),this.qe=th(),this.Qe=new ur(vt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const o=this.Ge(t);switch(e.state){case 0:this.ze(t)&&o.De(e.resumeToken);break;case 1:o.Oe(),o.Se||o.ve(),o.De(e.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(o.Ne(),o.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),o.De(e.resumeToken));break;default:Nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((o,a)=>{this.ze(a)&&t(a)})}He(e){const t=e.targetId,o=e.me.count,a=this.Je(t);if(a){const c=a.target;if(rs(c))if(0===o){const d=new Ht(c.path);this.Ue(t,d,wn.newNoDocument(d,$t.min()))}else Kt(1===o);else{const d=this.Ye(t);if(d!==o){const g=this.Ze(e),E=g?this.Xe(g,e,d):1;0!==E&&(this.je(t),this.Qe=this.Qe.insert(t,2===E?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:a=0},hashCount:c=0}=t;let d,g;try{d=Ur(o).toUint8Array()}catch(E){if(E instanceof Ds)return mr("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw E}try{g=new Zd(d,a,c)}catch(E){return mr(E instanceof xa?"BloomFilter error: ":"Applying bloom filter failed: ",E),null}return 0===g.Ie?null:g}Xe(e,t,o){return t.me.count===o-this.nt(e,t.targetId)?0:2}nt(e,t){const o=this.Le.getRemoteKeysForTarget(t);let a=0;return o.forEach(c=>{const d=this.Le.tt(),g=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.Ue(t,c,null),a++)}),a}rt(e){const t=new Map;this.Be.forEach((c,d)=>{const g=this.Je(d);if(g){if(c.current&&rs(g.target)){const E=new Ht(g.target.path);null!==this.ke.get(E)||this.it(d,E)||this.Ue(d,E,wn.newNoDocument(E,e))}c.be&&(t.set(d,c.Ce()),c.ve())}});let o=on();this.qe.forEach((c,d)=>{let g=!0;d.forEachWhile(E=>{const S=this.Je(E);return!S||"TargetPurposeLimboResolution"===S.purpose||(g=!1,!1)}),g&&(o=o.add(c))}),this.ke.forEach((c,d)=>d.setReadTime(e));const a=new xl(e,t,this.Qe,this.ke,o);return this.ke=Fo(),this.qe=th(),this.Qe=new ur(vt),a}$e(e,t){if(!this.ze(e))return;const o=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,o),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,o){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,t)?a.Fe(t,1):a.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),o&&(this.ke=this.ke.insert(t,o))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new mf,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Qn(vt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||yt("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new mf),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function th(){return new ur(Ht.comparator)}function _f(){return new ur(Ht.comparator)}const aa={asc:"ASCENDING",desc:"DESCENDING"},G_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uc={and:"AND",or:"OR"};class yf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function nh(i,e){return i.useProto3Json||co(e)?e:{value:e}}function hu(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hg(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function fg(i,e){return hu(i,e.toTimestamp())}function Ai(i){return Kt(!!i),$t.fromTimestamp(function(t){const o=no(t);return new On(o.seconds,o.nanos)}(i))}function vf(i,e){return Ef(i,e).canonicalString()}function Ef(i,e){const t=(a=i,new Tn(["projects",a.projectId,"databases",a.database])).child("documents");var a;return void 0===e?t:t.child(e)}function w(i){const e=Tn.fromString(i);return Kt(ih(e)),e}function O(i,e){return vf(i.databaseId,e.path)}function A(i,e){const t=w(e);if(t.get(1)!==i.databaseId.projectId)throw new st(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new st(Ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Ht(ue(t))}function N(i,e){return vf(i.databaseId,e)}function j(i){const e=w(i);return 4===e.length?Tn.emptyPath():ue(e)}function Z(i){return new Tn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ue(i){return Kt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Oe(i,e,t){return{name:O(i,e),fields:t.value.mapValue.fields}}function Se(i,e,t){const o=A(i,e.name),a=Ai(e.updateTime),c=e.createTime?Ai(e.createTime):$t.min(),d=new hn({mapValue:{fields:e.fields}}),g=wn.newFoundDocument(o,a,c,d);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function _n(i,e){let t;if(e instanceof Rl)t={update:Oe(i,e.key,e.value)};else if(e instanceof lc)t={delete:O(i,e.key)};else if(e instanceof sa)t={update:Oe(i,e.key,e.data),updateMask:z_(e.fieldMask)};else{if(!(e instanceof Nl))return Nt();t={verify:O(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(c,d){const g=d.transform;if(g instanceof os)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Rr)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof cn)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Oa)return{fieldPath:d.field.canonicalString(),increment:g.Pe};throw Nt()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:fg(i,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:Nt()),t;var c}function jr(i,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?oi.updateTime(Ai(c.updateTime)):void 0!==c.exists?oi.exists(c.exists):oi.none():oi.none(),o=e.updateTransforms?e.updateTransforms.map(a=>function(d,g){let E=null;"setToServerValue"in g?(Kt("REQUEST_TIME"===g.setToServerValue),E=new os):"appendMissingElements"in g?E=new Rr(g.appendMissingElements.values||[]):"removeAllFromArray"in g?E=new cn(g.removeAllFromArray.values||[]):"increment"in g?E=new Oa(d,g.increment):Nt();const S=_r.fromServerFormat(g.fieldPath);return new el(S,E)}(i,a)):[];var c;if(e.update){const a=A(i,e.update.name),c=new hn({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Ni((e.updateMask.fieldPaths||[]).map(V=>_r.fromServerFormat(V)));return new sa(a,c,d,t,o)}return new Rl(a,c,t,o)}if(e.delete){const a=A(i,e.delete);return new lc(a,t)}if(e.verify){const a=A(i,e.verify);return new Nl(a,t)}return Nt()}function Hi(i,e){return{documents:[N(i,e.path)]}}function ca(i,e){const t={structuredQuery:{}},o=e.path;let a;null!==e.collectionGroup?(a=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=N(i,a);const c=function(S){if(0!==S.length)return If(Y.create(S,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const d=function(S){if(0!==S.length)return S.map(V=>{return{field:Fa((ee=V).field),direction:Cf(ee.dir)};var ee})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const g=nh(i,e.limit);return null!==g&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt={before:(S=e.startAt).inclusive,values:S.position}),e.endAt&&(t.structuredQuery.endAt=function(S){return{before:!S.inclusive,values:S.position}}(e.endAt)),{_t:t,parent:a};var S}function Rs(i){let e=j(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let a=null;if(o>0){Kt(1===o);const V=t.from[0];V.allDescendants?a=V.collectionId:e=e.child(V.collectionId)}let c=[];t.where&&(c=function(K){const ee=dc(K);return ee instanceof Y&&An(ee)?ee.getFilters():[ee]}(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(ee=>{return new ts(td((Re=ee).field),function(qe){switch(qe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Re.direction));var Re}));let g=null;t.limit&&(g=function(K){let ee;return ee="object"==typeof K?K.value:K,co(ee)?null:ee}(t.limit));let E=null;var K;t.startAt&&(E=new Fr((K=t.startAt).values||[],!!K.before));let S=null;return t.endAt&&(S=function(K){return new Fr(K.values||[],!K.before)}(t.endAt)),Pl(e,a,d,c,g,"F",E,S)}function dc(i){return void 0!==i.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=td(t.unaryFilter.field);return R.create(o,"==",{doubleValue:NaN});case"IS_NULL":const a=td(t.unaryFilter.field);return R.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=td(t.unaryFilter.field);return R.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=td(t.unaryFilter.field);return R.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Nt()}}(i):void 0!==i.fieldFilter?R.create(td((t=i).fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==i.compositeFilter?function(t){return Y.create(t.compositeFilter.filters.map(o=>dc(o)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Nt()}}(t.compositeFilter.op))}(i):Nt();var t}function Cf(i){return aa[i]}function Uc(i){return G_[i]}function ed(i){return uc[i]}function Fa(i){return{fieldPath:i.canonicalString()}}function td(i){return _r.fromServerFormat(i.fieldPath)}function If(i){return i instanceof R?function(t){if("=="===t.op){if(Ce(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NAN"}};if(pe(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ce(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NOT_NAN"}};if(pe(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(t.field),op:Uc(t.op),value:t.value}}}(i):i instanceof Y?function(t){const o=t.getFilters().map(a=>If(a));return 1===o.length?o[0]:{compositeFilter:{op:ed(t.op),filters:o}}}(i):Nt()}function z_(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ih(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class vs{constructor(e,t,o,a,c=$t.min(),d=$t.min(),g=kr.EMPTY_BYTE_STRING,E=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=E}withSequenceNumber(e){return new vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class W_{constructor(e){this.ct=e}}function fu(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:wf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:O(c=i.ct,(d=e).key),fields:d.data.value.mapValue.fields,updateTime:hu(c,d.version.toTimestamp()),createTime:hu(c,d.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:nl(e.version)};else{if(!e.isUnknownDocument())return Nt();o.unknownDocument={path:t.path.toArray(),version:nl(e.version)}}var c,d;return o}function wf(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function nl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function kl(i){const e=new On(i.seconds,i.nanoseconds);return $t.fromTimestamp(e)}function po(i,e){const t=(e.baseMutations||[]).map(c=>jr(i.ct,c));for(let c=0;c<e.mutations.length-1;++c)c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(e.mutations[c].updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c);const o=e.mutations.map(c=>jr(i.ct,c)),a=On.fromMillis(e.localWriteTimeMs);return new Vo(e.batchId,a,t,o)}function La(i){const e=kl(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?kl(i.lastLimboFreeSnapshotVersion):$t.min();let o;return o=void 0!==i.query.documents?(Kt(1===(c=i.query).documents.length),Qi(sc(j(c.documents[0])))):function(c){return Qi(Rs(c))}(i.query),new vs(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,kr.fromBase64String(i.resumeToken));var c}function Tf(i,e){const t=nl(e.snapshotVersion),o=nl(e.lastLimboFreeSnapshotVersion);let a;a=rs(e.target)?Hi(i.ct,e.target):ca(i.ct,e.target)._t;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xo(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:a}}function pu(i){const e=Rs({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?xc(e,e.limit,"L"):e}function gg(i,e){return new Gs(e.largestBatchId,jr(i.ct,e.overlayMutation))}function mg(i,e){const t=e.path.lastSegment();return[i,Xr(e.path.popLast()),t]}function hc(i,e,t,o){return{indexId:i,uid:e,sequenceNumber:t,readTime:nl(o.readTime),documentKey:Xr(o.documentKey.path),largestBatchId:o.largestBatchId}}class _g{getBundleMetadata(e,t){return bf(e).get(t).next(o=>{if(o)return{id:(c=o).bundleId,createTime:kl(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return bf(e).put({bundleId:(a=t).id,createTime:nl(Ai(a.createTime)),version:a.version});var a}getNamedQuery(e,t){return K_(e).get(t).next(o=>{if(o)return{name:(c=o).name,query:pu(c.bundledQuery),readTime:kl(c.readTime)};var c})}saveNamedQuery(e,t){return K_(e).put({name:(a=t).name,readTime:nl(Ai(a.readTime)),bundledQuery:a.bundledQuery});var a}}function bf(i){return xr(i,"bundles")}function K_(i){return xr(i,"namedQueries")}class Bc{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new Bc(e,t.uid||"")}getOverlay(e,t){return jc(e).get(mg(this.userId,t)).next(o=>o?gg(this.serializer,o):null)}getOverlays(e,t){const o=z();return ke.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&o.set(a,c)})).next(()=>o)}saveOverlays(e,t,o){const a=[];return o.forEach((c,d)=>{const g=new Gs(t,d);a.push(this.ht(e,g))}),ke.waitFor(a)}removeOverlaysForBatchId(e,t,o){const a=new Set;t.forEach(d=>a.add(Xr(d.getCollectionPath())));const c=[];return a.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,o+1],!1,!0);c.push(jc(e).j("collectionPathOverlayIndex",g))}),ke.waitFor(c)}getOverlaysForCollection(e,t,o){const a=z(),c=Xr(t),d=IDBKeyRange.bound([this.userId,c,o],[this.userId,c,Number.POSITIVE_INFINITY],!0);return jc(e).U("collectionPathOverlayIndex",d).next(g=>{for(const E of g){const S=gg(this.serializer,E);a.set(S.getKey(),S)}return a})}getOverlaysForCollectionGroup(e,t,o,a){const c=z();let d;const g=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return jc(e).J({index:"collectionGroupOverlayIndex",range:g},(E,S,V)=>{const K=gg(this.serializer,S);c.size()<a||K.largestBatchId===d?(c.set(K.getKey(),K),d=K.largestBatchId):V.done()}).next(()=>c)}ht(e,t){return jc(e).put(function(a,c,d){const[g,E,S]=mg(c,d.mutation.key);return{userId:c,collectionPath:E,documentId:S,collectionGroup:d.mutation.key.getCollectionGroup(),largestBatchId:d.largestBatchId,overlayMutation:_n(a.ct,d.mutation)}}(this.serializer,this.userId,t))}}function jc(i){return xr(i,"documentOverlays")}class yg{Pt(e){return xr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const o=t?.value;return o?kr.fromUint8Array(o):kr.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Fl{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Mt(e.integerValue));else if("doubleValue"in e){const o=Mt(e.doubleValue);isNaN(o)?this.dt(t,13):(this.dt(t,15),hi(o)?t.At(0):t.At(o))}else if("timestampValue"in e){let o=e.timestampValue;this.dt(t,20),"string"==typeof o&&(o=no(o)),t.Rt(`${o.seconds||""}`),t.At(o.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ur(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.dt(t,45),t.At(o.latitude||0),t.At(o.longitude||0)}else"mapValue"in e?Qt(e)?this.dt(t,Number.MAX_SAFE_INTEGER):(this.wt(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.St(e.arrayValue,t),this.ft(t)):Nt()}Vt(e,t){this.dt(t,25),this.bt(e,t)}bt(e,t){t.Rt(e)}wt(e,t){const o=e.fields||{};this.dt(t,55);for(const a of Object.keys(o))this.Vt(a,t),this.Tt(o[a],t)}St(e,t){const o=e.values||[];this.dt(t,50);for(const a of o)this.Tt(a,t)}yt(e,t){this.dt(t,37),Ht.fromName(e).path.forEach(o=>{this.dt(t,60),this.bt(o,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function nd(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function Af(i){const e=64-function(o){let a=0;for(let c=0;c<8;++c){const d=nd(255&o[c]);if(a+=d,8!==d)break}return a}(i);return Math.ceil(e/8)}Fl.Dt=new Fl;class WE{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.vt(o.value),o=t.next();this.Ft()}Mt(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.xt(o.value),o=t.next();this.Ot()}Nt(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.vt(o);else if(o<2048)this.vt(960|o>>>6),this.vt(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.vt(480|o>>>12),this.vt(128|63&o>>>6),this.vt(128|63&o);else{const a=t.codePointAt(0);this.vt(240|a>>>18),this.vt(128|63&a>>>12),this.vt(128|63&a>>>6),this.vt(128|63&a)}}this.Ft()}Lt(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.xt(o);else if(o<2048)this.xt(960|o>>>6),this.xt(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.xt(480|o>>>12),this.xt(128|63&o>>>6),this.xt(128|63&o);else{const a=t.codePointAt(0);this.xt(240|a>>>18),this.xt(128|63&a>>>12),this.xt(128|63&a>>>6),this.xt(128|63&a)}}this.Ot()}Bt(e){const t=this.kt(e),o=Af(t);this.qt(1+o),this.buffer[this.position++]=255&o;for(let a=t.length-o;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Qt(e){const t=this.kt(e),o=Af(t);this.qt(1+o),this.buffer[this.position++]=~(255&o);for(let a=t.length-o;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}Kt(){this.$t(255),this.$t(255)}Ut(){this.Wt(255),this.Wt(255)}reset(){this.position=0}seed(e){this.qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Gt(){return this.buffer.slice(0,this.position)}kt(e){const t=function(c){const d=new DataView(new ArrayBuffer(8));return d.setFloat64(0,c,!1),new Uint8Array(d.buffer)}(e),o=!!(128&t[0]);t[0]^=o?255:128;for(let a=1;a<t.length;++a)t[a]^=o?255:0;return t}vt(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(t)}xt(e){const t=255&e;0===t?(this.Wt(0),this.Wt(255)):255===t?(this.Wt(255),this.Wt(0)):this.Wt(e)}Ft(){this.$t(0),this.$t(1)}Ot(){this.Wt(0),this.Wt(1)}$t(e){this.qt(1),this.buffer[this.position++]=e}Wt(e){this.qt(1),this.buffer[this.position++]=~e}qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const a=new Uint8Array(o);a.set(this.buffer),this.buffer=a}}class Ao{constructor(e){this.zt=e}gt(e){this.zt.Ct(e)}Rt(e){this.zt.Nt(e)}At(e){this.zt.Bt(e)}Et(){this.zt.Kt()}}class Pf{constructor(e){this.zt=e}gt(e){this.zt.Mt(e)}Rt(e){this.zt.Lt(e)}At(e){this.zt.Qt(e)}Et(){this.zt.Ut()}}class oh{constructor(){this.zt=new WE,this.jt=new Ao(this.zt),this.Ht=new Pf(this.zt)}seed(e){this.zt.seed(e)}Jt(e){return 0===e?this.jt:this.Ht}Gt(){return this.zt.Gt()}reset(){this.zt.reset()}}class rl{constructor(e,t,o,a){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=a}Yt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new rl(this.indexId,this.documentKey,this.arrayValue,o)}}function Ll(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=q_(i.arrayValue,e.arrayValue),0!==t?t:(t=q_(i.directionalValue,e.directionalValue),0!==t?t:Ht.comparator(i.documentKey,e.documentKey)))}function q_(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class Df{constructor(e){this.Zt=new Qn((t,o)=>_r.comparator(t.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Xt=e.orderBy,this.en=[];for(const t of e.filters){const o=t;o.isInequality()?this.Zt=this.Zt.add(o):this.en.push(o)}}get tn(){return this.Zt.size>1}nn(e){if(Kt(e.collectionGroup===this.collectionId),this.tn)return!1;const t=Eo(e);if(void 0!==t&&!this.rn(t))return!1;const o=Wo(e);let a=new Set,c=0,d=0;for(;c<o.length&&this.rn(o[c]);++c)a=a.add(o[c].fieldPath.canonicalString());if(c===o.length)return!0;if(this.Zt.size>0){const g=this.Zt.getIterator().getNext();if(!a.has(g.field.canonicalString())){const E=o[c];if(!this.sn(g,E)||!this.on(this.Xt[d++],E))return!1}++c}for(;c<o.length;++c)if(d>=this.Xt.length||!this.on(this.Xt[d++],o[c]))return!1;return!0}_n(){if(this.tn)return null;let e=new Qn(_r.comparator);const t=[];for(const o of this.en)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)t.push(new Oi(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),t.push(new Oi(o.field,0))}for(const o of this.Xt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),t.push(new Oi(o.field,"asc"===o.dir?0:1)));return new Ii(Ii.UNKNOWN_ID,this.collectionId,t,be.empty())}rn(e){for(const t of this.en)if(this.sn(t,e))return!0;return!1}sn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}on(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function sh(i){var e,t;if(Kt(i instanceof R||i instanceof Y),i instanceof R){if(i instanceof No){const a=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(c=>R.create(i.field,"==",c)))||[];return Y.create(a,"or")}return i}const o=i.filters.map(a=>sh(a));return Y.create(o,i.op)}function vg(i){if(0===i.getFilters().length)return[];const e=li(sh(i));return Kt(ah(e)),Sf(e)||gu(e)?[e]:e.getFilters()}function Sf(i){return i instanceof R}function gu(i){return i instanceof Y&&An(i)}function ah(i){return Sf(i)||gu(i)||function(t){if(t instanceof Y&&Tt(t)){for(const o of t.getFilters())if(!Sf(o)&&!gu(o))return!1;return!0}return!1}(i)}function li(i){if(Kt(i instanceof R||i instanceof Y),i instanceof R)return i;if(1===i.filters.length)return li(i.filters[0]);const e=i.filters.map(o=>li(o));let t=Y.create(e,i.op);return t=Gi(t),ah(t)?t:(Kt(t instanceof Y),Kt(he(t)),Kt(t.filters.length>1),t.filters.reduce((o,a)=>Lt(o,a)))}function Lt(i,e){let t;return Kt(i instanceof R||i instanceof Y),Kt(e instanceof R||e instanceof Y),t=i instanceof R?e instanceof R?Y.create([i,e],"and"):Rn(i,e):e instanceof R?Rn(e,i):function(a,c){if(Kt(a.filters.length>0&&c.filters.length>0),he(a)&&he(c))return rn(a,c.getFilters());const d=Tt(a)?a:c,g=Tt(a)?c:a,E=d.filters.map(S=>Lt(S,g));return Y.create(E,"or")}(i,e),Gi(t)}function Rn(i,e){if(he(e))return rn(e,i.getFilters());{const t=e.filters.map(o=>Lt(i,o));return Y.create(t,"or")}}function Gi(i){if(Kt(i instanceof R||i instanceof Y),i instanceof R)return i;const e=i.getFilters();if(1===e.length)return Gi(e[0]);if(bi(i))return i;const t=e.map(a=>Gi(a)),o=[];return t.forEach(a=>{a instanceof R?o.push(a):a instanceof Y&&(a.op===i.op?o.push(...a.filters):o.push(a))}),1===o.length?o[0]:Y.create(o,i.op)}class Va{constructor(){this.an=new io}addToCollectionParentIndex(e,t){return this.an.add(t),ke.resolve()}getCollectionParents(e,t){return ke.resolve(this.an.getEntries(t))}addFieldIndex(e,t){return ke.resolve()}deleteFieldIndex(e,t){return ke.resolve()}deleteAllFieldIndexes(e){return ke.resolve()}createTargetIndexes(e,t){return ke.resolve()}getDocumentsMatchingTarget(e,t){return ke.resolve(null)}getIndexType(e,t){return ke.resolve(0)}getFieldIndexes(e,t){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,t){return ke.resolve(ln.min())}getMinOffsetFromCollectionGroup(e,t){return ke.resolve(ln.min())}updateCollectionGroup(e,t,o){return ke.resolve()}updateIndexEntries(e,t){return ke.resolve()}}class io{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),a=this.index[t]||new Qn(Tn.comparator),c=!a.has(o);return this.index[t]=a.add(o),c}has(e){const t=e.lastSegment(),o=e.popLast(),a=this.index[t];return a&&a.has(o)}getEntries(e){return(this.index[e]||new Qn(Tn.comparator)).toArray()}}const Uo=new Uint8Array(0);class rd{constructor(e,t){this.databaseId=t,this.un=new io,this.cn=new ms(o=>xo(o),(o,a)=>vn(o,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.un.has(t)){const o=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.un.add(t)});const c={collectionId:o,parent:Xr(a)};return ci(e).put(c)}return ke.resolve()}getCollectionParents(e,t){const o=[],a=IDBKeyRange.bound([t,""],[Ci(t),""],!1,!0);return ci(e).U(a).next(c=>{for(const d of c){if(d.collectionId!==t)break;o.push(Mr(d.parent))}return o})}addFieldIndex(e,t){const o=Ws(e),a={indexId:(g=t).indexId,collectionGroup:g.collectionGroup,fields:g.fields.map(E=>[E.fieldPath.canonicalString(),E.kind])};var g;delete a.indexId;const c=o.add(a);if(t.indexState){const d=Bn(e);return c.next(g=>{d.put(hc(g,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const o=Ws(e),a=Bn(e),c=ui(e);return o.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Ws(e),o=ui(e),a=Bn(e);return t.j().next(()=>o.j()).next(()=>a.j())}createTargetIndexes(e,t){return ke.forEach(this.ln(t),o=>this.getIndexType(e,o).next(a=>{if(0===a||1===a){const c=new Df(o)._n();if(null!=c)return this.addFieldIndex(e,c)}}))}getDocumentsMatchingTarget(e,t){const o=ui(e);let a=!0;const c=new Map;return ke.forEach(this.ln(t),d=>this.hn(e,d).next(g=>{a&&(a=!!g),c.set(d,g)})).next(()=>{if(a){let d=on();const g=[];return ke.forEach(c,(E,S)=>{var St;yt("IndexedDbIndexManager",`Using index ${St=E,`id=${St.indexId}|cg=${St.collectionGroup}|f=${St.fields.map(gn=>`${gn.fieldPath}:${gn.kind}`).join(",")}`} to execute ${xo(t)}`);const V=function(St,gn){const Yn=Eo(gn);if(void 0===Yn)return null;for(const er of Ms(St,Yn.fieldPath))switch(er.op){case"array-contains-any":return er.value.arrayValue.values||[];case"array-contains":return[er.value]}return null}(S,E),K=function(St,gn){const Yn=new Map;for(const er of Wo(gn))for(const xe of Ms(St,er.fieldPath))switch(xe.op){case"==":case"in":Yn.set(er.fieldPath.canonicalString(),xe.value);break;case"not-in":case"!=":return Yn.set(er.fieldPath.canonicalString(),xe.value),Array.from(Yn.values())}return null}(S,E),ee=function(St,gn){const Yn=[];let er=!0;for(const xe of Wo(gn)){const me=0===xe.kind?Rc(St,xe.fieldPath,St.startAt):oc(St,xe.fieldPath,St.startAt);Yn.push(me.value),er&&(er=me.inclusive)}return new Fr(Yn,er)}(S,E),de=function(St,gn){const Yn=[];let er=!0;for(const xe of Wo(gn)){const me=0===xe.kind?oc(St,xe.fieldPath,St.endAt):Rc(St,xe.fieldPath,St.endAt);Yn.push(me.value),er&&(er=me.inclusive)}return new Fr(Yn,er)}(S,E),Re=this.Pn(E,S,ee),$e=this.Pn(E,S,de),qe=this.In(E,S,K),kt=this.Tn(E.indexId,V,Re,ee.inclusive,$e,de.inclusive,qe);return ke.forEach(kt,Xt=>o.G(Xt,t.limit).next(St=>{St.forEach(gn=>{const Yn=Ht.fromSegments(gn.documentKey);d.has(Yn)||(d=d.add(Yn),g.push(Yn))})}))}).next(()=>g)}return ke.resolve(null)})}ln(e){let t=this.cn.get(e);return t||(t=0===e.filters.length?[e]:vg(Y.create(e.filters,"and")).map(o=>pi(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.cn.set(e,t),t)}Tn(e,t,o,a,c,d,g){const E=(null!=t?t.length:1)*Math.max(o.length,c.length),S=E/(null!=t?t.length:1),V=[];for(let K=0;K<E;++K){const ee=t?this.En(t[K/S]):Uo,de=this.dn(e,ee,o[K%S],a),Re=this.An(e,ee,c[K%S],d),$e=g.map(qe=>this.dn(e,ee,qe,!0));V.push(...this.createRange(de,Re,$e))}return V}dn(e,t,o,a){const c=new rl(e,Ht.empty(),t,o);return a?c:c.Yt()}An(e,t,o,a){const c=new rl(e,Ht.empty(),t,o);return a?c.Yt():c}hn(e,t){const o=new Df(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let d=null;for(const g of c)o.nn(g)&&(!d||g.fields.length>d.fields.length)&&(d=g);return d})}getIndexType(e,t){let o=2;const a=this.ln(t);return ke.forEach(a,c=>this.hn(e,c).next(d=>{d?0!==o&&d.fields.length<function(E){let S=new Qn(_r.comparator),V=!1;for(const K of E.filters)for(const ee of K.getFlattenedFilters())ee.field.isKeyField()||("array-contains"===ee.op||"array-contains-any"===ee.op?V=!0:S=S.add(ee.field));for(const K of E.orderBy)K.field.isKeyField()||(S=S.add(K.field));return S.size+(V?1:0)}(c)&&(o=1):o=0})).next(()=>null!==t.limit&&a.length>1&&2===o?1:o)}Rn(e,t){const o=new oh;for(const a of Wo(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const d=o.Jt(a.kind);Fl.Dt.It(c,d)}return o.Gt()}En(e){const t=new oh;return Fl.Dt.It(e,t.Jt(0)),t.Gt()}Vn(e,t){const o=new oh;return Fl.Dt.It(U(this.databaseId,t),o.Jt(function(c){const d=Wo(c);return 0===d.length?0:d[d.length-1].kind}(e))),o.Gt()}In(e,t,o){if(null===o)return[];let a=[];a.push(new oh);let c=0;for(const d of Wo(e)){const g=o[c++];for(const E of a)if(this.mn(t,d.fieldPath)&&oe(g))a=this.fn(a,d,g);else{const S=E.Jt(d.kind);Fl.Dt.It(g,S)}}return this.gn(a)}Pn(e,t,o){return this.In(e,t,o.position)}gn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Gt();return t}fn(e,t,o){const a=[...e],c=[];for(const d of o.arrayValue.values||[])for(const g of a){const E=new oh;E.seed(g.Gt()),Fl.Dt.It(d,E.Jt(t.kind)),c.push(E)}return c}mn(e,t){return!!e.filters.find(o=>o instanceof R&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Ws(e),a=Bn(e);return(t?o.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.U()).next(c=>{const d=[];return ke.forEach(c,g=>a.get([g.indexId,this.uid]).next(E=>{d.push(function(V,K){const ee=K?new be(K.sequenceNumber,new ln(kl(K.readTime),new Ht(Mr(K.documentKey)),K.largestBatchId)):be.empty(),de=V.fields.map(([Re,$e])=>new Oi(_r.fromServerFormat(Re),$e));return new Ii(V.indexId,V.collectionGroup,de,ee)}(g,E))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,a)=>{const c=o.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:vt(o.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const a=Ws(e),c=Bn(e);return this.pn(e).next(d=>a.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ke.forEach(g,E=>c.put(hc(E.indexId,this.uid,d,o)))))}updateIndexEntries(e,t){const o=new Map;return ke.forEach(t,(a,c)=>{const d=o.get(a.collectionGroup);return(d?ke.resolve(d):this.getFieldIndexes(e,a.collectionGroup)).next(g=>(o.set(a.collectionGroup,g),ke.forEach(g,E=>this.yn(e,a,E).next(S=>{const V=this.wn(c,E);return S.isEqual(V)?ke.resolve():this.Sn(e,c,E,S,V)}))))})}bn(e,t,o,a){return ui(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.Vn(o,t.key),documentKey:t.key.path.toArray()})}Dn(e,t,o,a){return ui(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.Vn(o,t.key),t.key.path.toArray()])}yn(e,t,o){const a=ui(e);let c=new Qn(Ll);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.Vn(o,t)])},(d,g)=>{c=c.add(new rl(o.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>c)}wn(e,t){let o=new Qn(Ll);const a=this.Rn(t,e);if(null==a)return o;const c=Eo(t);if(null!=c){const d=e.data.field(c.fieldPath);if(oe(d))for(const g of d.arrayValue.values||[])o=o.add(new rl(t.indexId,e.key,this.En(g),a))}else o=o.add(new rl(t.indexId,e.key,Uo,a));return o}Sn(e,t,o,a,c){yt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(E,S,V,K,ee){const de=E.getIterator(),Re=S.getIterator();let $e=Zo(de),qe=Zo(Re);for(;$e||qe;){let kt=!1,Xt=!1;if($e&&qe){const St=V($e,qe);St<0?Xt=!0:St>0&&(kt=!0)}else null!=$e?Xt=!0:kt=!0;kt?(K(qe),qe=Zo(Re)):Xt?(ee($e),$e=Zo(de)):($e=Zo(de),qe=Zo(Re))}}(a,c,Ll,g=>{d.push(this.bn(e,t,o,g))},g=>{d.push(this.Dn(e,t,o,g))}),ke.waitFor(d)}pn(e){let t=1;return Bn(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((d,g)=>Ll(d,g)).filter((d,g,E)=>!g||0!==Ll(d,E[g-1]));const a=[];a.push(e);for(const d of o){const g=Ll(d,e),E=Ll(d,t);if(0===g)a[0]=e.Yt();else if(g>0&&E<0)a.push(d),a.push(d.Yt());else if(E>0)break}a.push(t);const c=[];for(let d=0;d<a.length;d+=2){if(this.Cn(a[d],a[d+1]))return[];c.push(IDBKeyRange.bound([a[d].indexId,this.uid,a[d].arrayValue,a[d].directionalValue,Uo,[]],[a[d+1].indexId,this.uid,a[d+1].arrayValue,a[d+1].directionalValue,Uo,[]]))}return c}Cn(e,t){return Ll(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mu)}getMinOffset(e,t){return ke.mapArray(this.ln(t),o=>this.hn(e,o).next(a=>a||Nt())).next(mu)}}function ci(i){return xr(i,"collectionParents")}function ui(i){return xr(i,"indexEntries")}function Ws(i){return xr(i,"indexConfiguration")}function Bn(i){return xr(i,"indexState")}function mu(i){Kt(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const a=i[o].indexState.offset;Cn(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new ln(e.readTime,e.documentKey,t)}const Eg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ki{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new ki(e,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Pi(i,e,t){const o=i.store("mutations"),a=i.store("documentMutations"),c=[],d=IDBKeyRange.only(t.batchId);let g=0;const E=o.J({range:d},(V,K,ee)=>(g++,ee.delete()));c.push(E.next(()=>{Kt(1===g)}));const S=[];for(const V of t.mutations){const K=bl(e,V.key.path,t.batchId);c.push(a.delete(K)),S.push(V.key)}return ke.waitFor(c).next(()=>S)}function Vl(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw Nt();e=i.noDocument}return JSON.stringify(e).length}ki.DEFAULT_COLLECTION_PERCENTILE=10,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ki.DEFAULT=new ki(41943040,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ki.DISABLED=new ki(-1,0,0);class fc{constructor(e,t,o,a){this.userId=e,this.serializer=t,this.indexManager=o,this.referenceDelegate=a,this.vn={}}static lt(e,t,o,a){Kt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new fc(c,t,o,a)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ua(e).J({index:"userMutationsIndex",range:o},(a,c,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,o,a){const c=_u(e),d=ua(e);return d.add({}).next(g=>{Kt("number"==typeof g);const E=new Vo(g,t,o,a),S=function(de,Re,$e){const qe=$e.baseMutations.map(Xt=>_n(de.ct,Xt)),kt=$e.mutations.map(Xt=>_n(de.ct,Xt));return{userId:Re,batchId:$e.batchId,localWriteTimeMs:$e.localWriteTime.toMillis(),baseMutations:qe,mutations:kt}}(this.serializer,this.userId,E),V=[];let K=new Qn((ee,de)=>vt(ee.canonicalString(),de.canonicalString()));for(const ee of a){const de=bl(this.userId,ee.key.path,g);K=K.add(ee.key.path.popLast()),V.push(d.put(S)),V.push(c.put(de,Al))}return K.forEach(ee=>{V.push(this.indexManager.addToCollectionParentIndex(e,ee))}),e.addOnCommittedListener(()=>{this.vn[g]=E.keys()}),ke.waitFor(V).next(()=>E)})}lookupMutationBatch(e,t){return ua(e).get(t).next(o=>o?(Kt(o.userId===this.userId),po(this.serializer,o)):null)}Fn(e,t){return this.vn[t]?ke.resolve(this.vn[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const a=o.keys();return this.vn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,a=IDBKeyRange.lowerBound([this.userId,o]);let c=null;return ua(e).J({index:"userMutationsIndex",range:a},(d,g,E)=>{g.userId===this.userId&&(Kt(g.batchId>=o),c=po(this.serializer,g)),E.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return ua(e).J({index:"userMutationsIndex",range:t,reverse:!0},(a,c,d)=>{o=c.batchId,d.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ua(e).U("userMutationsIndex",t).next(o=>o.map(a=>po(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=ea(this.userId,t.path),a=IDBKeyRange.lowerBound(o),c=[];return _u(e).J({range:a},(d,g,E)=>{const[S,V,K]=d,ee=Mr(V);if(S===this.userId&&t.path.isEqual(ee))return ua(e).get(K).next(de=>{if(!de)throw Nt();Kt(de.userId===this.userId),c.push(po(this.serializer,de))});E.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Qn(vt);const a=[];return t.forEach(c=>{const d=ea(this.userId,c.path),g=IDBKeyRange.lowerBound(d),E=_u(e).J({range:g},(S,V,K)=>{const[ee,de,Re]=S,$e=Mr(de);ee===this.userId&&c.path.isEqual($e)?o=o.add(Re):K.done()});a.push(E)}),ke.waitFor(a).next(()=>this.Mn(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,a=o.length+1,c=ea(this.userId,o),d=IDBKeyRange.lowerBound(c);let g=new Qn(vt);return _u(e).J({range:d},(E,S,V)=>{const[K,ee,de]=E,Re=Mr(ee);K===this.userId&&o.isPrefixOf(Re)?Re.length===a&&(g=g.add(de)):V.done()}).next(()=>this.Mn(e,g))}Mn(e,t){const o=[],a=[];return t.forEach(c=>{a.push(ua(e).get(c).next(d=>{if(null===d)throw Nt();Kt(d.userId===this.userId),o.push(po(this.serializer,d))}))}),ke.waitFor(a).next(()=>o)}removeMutationBatch(e,t){return Pi(e._e,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.xn(t.batchId)}),ke.forEach(o,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}xn(e){delete this.vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ke.resolve();const o=IDBKeyRange.lowerBound(function(d){return[d]}(this.userId)),a=[];return _u(e).J({range:o},(c,d,g)=>{if(c[0]===this.userId){const E=Mr(c[1]);a.push(E)}else g.done()}).next(()=>{Kt(0===a.length)})})}containsKey(e,t){return Ul(e,this.userId,t)}On(e){return pc(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ul(i,e,t){const o=ea(e,t.path),a=o[1],c=IDBKeyRange.lowerBound(o);let d=!1;return _u(i).J({range:c,H:!0},(g,E,S)=>{const[V,K,ee]=g;V===e&&K===a&&(d=!0),S.done()}).next(()=>d)}function ua(i){return xr(i,"mutations")}function _u(i){return xr(i,"documentMutations")}function pc(i){return xr(i,"mutationQueues")}class Bl{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Ln(){return new Bl(0)}static Bn(){return new Bl(-1)}}class gc{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.kn(e).next(t=>{const o=new Bl(t.highestTargetId);return t.highestTargetId=o.next(),this.qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.kn(e).next(t=>$t.fromTimestamp(new On(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.kn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.kn(e).next(a=>(a.highestListenSequenceNumber=t,o&&(a.lastRemoteSnapshotVersion=o.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.qn(e,a)))}addTargetData(e,t){return this.Qn(e,t).next(()=>this.kn(e).next(o=>(o.targetCount+=1,this.Kn(t,o),this.qn(e,o))))}updateTargetData(e,t){return this.Qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Sn(e).delete(t.targetId)).next(()=>this.kn(e)).next(o=>(Kt(o.targetCount>0),o.targetCount-=1,this.qn(e,o)))}removeTargets(e,t,o){let a=0;const c=[];return Sn(e).J((d,g)=>{const E=La(g);E.sequenceNumber<=t&&null===o.get(E.targetId)&&(a++,c.push(this.removeTargetData(e,E)))}).next(()=>ke.waitFor(c)).next(()=>a)}forEachTarget(e,t){return Sn(e).J((o,a)=>{const c=La(a);t(c)})}kn(e){return Mf(e).get("targetGlobalKey").next(t=>(Kt(null!==t),t))}qn(e,t){return Mf(e).put("targetGlobalKey",t)}Qn(e,t){return Sn(e).put(Tf(this.serializer,t))}Kn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.kn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=xo(t),a=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let c=null;return Sn(e).J({range:a,index:"queryTargetsIndex"},(d,g,E)=>{const S=La(g);vn(t,S.target)&&(c=S,E.done())}).next(()=>c)}addMatchingKeys(e,t,o){const a=[],c=Ua(e);return t.forEach(d=>{const g=Xr(d.path);a.push(c.put({targetId:o,path:g})),a.push(this.referenceDelegate.addReference(e,o,d))}),ke.waitFor(a)}removeMatchingKeys(e,t,o){const a=Ua(e);return ke.forEach(t,c=>{const d=Xr(c.path);return ke.waitFor([a.delete([o,d]),this.referenceDelegate.removeReference(e,o,c)])})}removeMatchingKeysForTargetId(e,t){const o=Ua(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(a)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),a=Ua(e);let c=on();return a.J({range:o,H:!0},(d,g,E)=>{const S=Mr(d[1]),V=new Ht(S);c=c.add(V)}).next(()=>c)}containsKey(e,t){const o=Xr(t.path),a=IDBKeyRange.bound([o],[Ci(o)],!1,!0);let c=0;return Ua(e).J({index:"documentTargetsIndex",H:!0,range:a},([d,g],E,S)=>{0!==d&&(c++,S.done())}).next(()=>c>0)}ot(e,t){return Sn(e).get(t).next(o=>o?La(o):null)}}function Sn(i){return xr(i,"targets")}function Mf(i){return xr(i,"targetGlobal")}function Ua(i){return xr(i,"targetDocuments")}function il([i,e],[t,o]){const a=vt(i,t);return 0===a?vt(e,o):a}class Of{constructor(e){this.$n=e,this.buffer=new Qn(il),this.Un=0}Wn(){return++this.Un}Gn(e){const t=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();il(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class $c{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.zn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.jn(6e4)}stop(){this.zn&&(this.zn.cancel(),this.zn=null)}get started(){return null!==this.zn}jn(e){var t=this;yt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,we.A)(function*(){t.zn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){Ko(o)?yt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield nr(o)}yield t.jn(3e5)}))}}class oo{constructor(e,t){this.Hn=e,this.params=t}calculateTargetCount(e,t){return this.Hn.Jn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return ke.resolve(Sr.oe);const o=new Of(t);return this.Hn.forEachTarget(e,a=>o.Gn(a.sequenceNumber)).next(()=>this.Hn.Yn(e,a=>o.Gn(a))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.Hn.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Hn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(yt("LruGarbageCollector","Garbage collection skipped; disabled"),ke.resolve(Eg)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(yt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Eg):this.Zn(e,t))}getCacheSize(e){return this.Hn.getCacheSize(e)}Zn(e,t){let o,a,c,d,g,E,S;const V=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(K=>(K>this.params.maximumSequenceNumbersToCollect?(yt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${K}`),a=this.params.maximumSequenceNumbersToCollect):a=K,d=Date.now(),this.nthSequenceNumber(e,a))).next(K=>(o=K,g=Date.now(),this.removeTargets(e,o,t))).next(K=>(c=K,E=Date.now(),this.removeOrphanedDocuments(e,o))).next(K=>(S=Date.now(),zr()<=en.$b.DEBUG&&yt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-V}ms\n\tDetermined least recently used ${a} in `+(g-d)+`ms\n\tRemoved ${c} targets in `+(E-g)+`ms\n\tRemoved ${K} documents in `+(S-E)+`ms\nTotal Duration: ${S-V}ms`),ke.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:K})))}}class Bo{constructor(e,t){this.db=e,this.garbageCollector=function lh(i,e){return new oo(i,e)}(this,t)}Jn(e){const t=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(a=>o+a))}Xn(e){let t=0;return this.Yn(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Yn(e,t){return this.er(e,(o,a)=>t(a))}addReference(e,t,o){return Po(e,o)}removeReference(e,t,o){return Po(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Po(e,t)}tr(e,t){return function(a,c){let d=!1;return pc(a).Y(g=>Ul(a,g,c).next(E=>(E&&(d=!0),ke.resolve(!E)))).next(()=>d)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.er(e,(d,g)=>{if(g<=t){const E=this.tr(e,d).next(S=>{if(!S)return c++,o.getEntry(e,d).next(()=>(o.removeEntry(d,$t.min()),Ua(e).delete([0,Xr(d.path)])))});a.push(E)}}).next(()=>ke.waitFor(a)).next(()=>o.apply(e)).next(()=>c)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Po(e,t)}er(e,t){const o=Ua(e);let a,c=Sr.oe;return o.J({index:"documentTargetsIndex"},([d,g],{path:E,sequenceNumber:S})=>{0===d?(c!==Sr.oe&&t(new Ht(Mr(a)),c),c=S,a=E):c=Sr.oe}).next(()=>{c!==Sr.oe&&t(new Ht(Mr(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Po(i,e){return Ua(i).put((a=i.currentSequenceNumber,{targetId:0,path:Xr(e.path),sequenceNumber:a}));var a}class Rf{constructor(){this.changes=new ms(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?ke.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mc{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return vu(e).put(o)}removeEntry(e,t,o){return vu(e).delete(function(c,d){const g=c.path.toArray();return[g.slice(0,g.length-2),g[g.length-2],wf(d),g[g.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.nr(e,o)))}getEntry(e,t){let o=wn.newInvalidDocument(t);return vu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(id(t))},(a,c)=>{o=this.rr(t,c)}).next(()=>o)}ir(e,t){let o={size:0,document:wn.newInvalidDocument(t)};return vu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(id(t))},(a,c)=>{o={document:this.rr(t,c),size:Vl(c)}}).next(()=>o)}getEntries(e,t){let o=Fo();return this.sr(e,t,(a,c)=>{const d=this.rr(a,c);o=o.insert(a,d)}).next(()=>o)}_r(e,t){let o=Fo(),a=new ur(Ht.comparator);return this.sr(e,t,(c,d)=>{const g=this.rr(c,d);o=o.insert(c,g),a=a.insert(c,Vl(d))}).next(()=>({documents:o,ar:a}))}sr(e,t,o){if(t.isEmpty())return ke.resolve();let a=new Qn(uh);t.forEach(E=>a=a.add(E));const c=IDBKeyRange.bound(id(a.first()),id(a.last())),d=a.getIterator();let g=d.getNext();return vu(e).J({index:"documentKeyIndex",range:c},(E,S,V)=>{const K=Ht.fromSegments([...S.prefixPath,S.collectionGroup,S.documentId]);for(;g&&uh(g,K)<0;)o(g,null),g=d.getNext();g&&g.isEqual(K)&&(o(g,S),g=d.hasNext()?d.getNext():null),g?V.$(id(g)):V.done()}).next(()=>{for(;g;)o(g,null),g=d.hasNext()?d.getNext():null})}getDocumentsMatchingQuery(e,t,o,a,c){const d=t.path,g=[d.popLast().toArray(),d.lastSegment(),wf(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],E=[d.popLast().toArray(),d.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vu(e).U(IDBKeyRange.bound(g,E,!0)).next(S=>{c?.incrementDocumentReadCount(S.length);let V=Fo();for(const K of S){const ee=this.rr(Ht.fromSegments(K.prefixPath.concat(K.collectionGroup,K.documentId)),K);ee.isFoundDocument()&&(Un(t,ee)||a.has(ee.key))&&(V=V.insert(ee.key,ee))}return V})}getAllFromCollectionGroup(e,t,o,a){let c=Fo();const d=ch(t,o),g=ch(t,ln.max());return vu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,g,!0)},(E,S,V)=>{const K=this.rr(Ht.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);c=c.insert(K.key,K),c.size===a&&V.done()}).next(()=>c)}newChangeBuffer(e){return new ol(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Hc(e).get("remoteDocumentGlobalKey").next(t=>(Kt(!!t),t))}nr(e,t){return Hc(e).put("remoteDocumentGlobalKey",t)}rr(e,t){if(t){const o=function pg(i,e){let t;if(e.document)t=Se(i.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Ht.fromSegments(e.noDocument.path),a=kl(e.noDocument.readTime);t=wn.newNoDocument(o,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Nt();{const o=Ht.fromSegments(e.unknownDocument.path),a=kl(e.unknownDocument.version);t=wn.newUnknownDocument(o,a)}}return e.readTime&&t.setReadTime(function(a){const c=new On(a[0],a[1]);return $t.fromTimestamp(c)}(e.readTime)),t}(this.serializer,t);if(!o.isNoDocument()||!o.version.isEqual($t.min()))return o}return wn.newInvalidDocument(e)}}function yu(i){return new mc(i)}class ol extends Rf{constructor(e,t){super(),this.ur=e,this.trackRemovals=t,this.cr=new ms(o=>o.toString(),(o,a)=>o.isEqual(a))}applyChanges(e){const t=[];let o=0,a=new Qn((c,d)=>vt(c.canonicalString(),d.canonicalString()));return this.changes.forEach((c,d)=>{const g=this.cr.get(c);if(t.push(this.ur.removeEntry(e,c,g.readTime)),d.isValidDocument()){const E=fu(this.ur.serializer,d);a=a.add(c.path.popLast());const S=Vl(E);o+=S-g.size,t.push(this.ur.addEntry(e,c,E))}else if(o-=g.size,this.trackRemovals){const E=fu(this.ur.serializer,d.convertToNoDocument($t.min()));t.push(this.ur.addEntry(e,c,E))}}),a.forEach(c=>{t.push(this.ur.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.ur.updateMetadata(e,o)),ke.waitFor(t)}getFromCache(e,t){return this.ur.ir(e,t).next(o=>(this.cr.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.ur._r(e,t).next(({documents:o,ar:a})=>(a.forEach((c,d)=>{this.cr.set(c,{size:d,readTime:o.get(c).readTime})}),o))}}function Hc(i){return xr(i,"remoteDocumentGlobal")}function vu(i){return xr(i,"remoteDocumentsV14")}function id(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ch(i,e){const t=e.documentKey.path.toArray();return[i,wf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function uh(i,e){const t=i.path.toArray(),o=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<o.length-2;++c)if(a=vt(t[c],o[c]),a)return a;return a=vt(t.length,o.length),a||(a=vt(t[t.length-2],o[o.length-2]),a||vt(t[t.length-1],o[o.length-1]))}class KE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Cg{constructor(e,t,o,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=a}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(o=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(null!==o&&Ml(o.mutation,a,Ni.empty(),On.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,on()).next(()=>o))}getLocalViewOfDocuments(e,t,o=on()){const a=z();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,o).next(c=>{let d=q();return c.forEach((g,E)=>{d=d.insert(g,E.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const o=z();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,on()))}populateOverlays(e,t,o){const a=[];return o.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((d,g)=>{t.set(d,g)})})}computeViews(e,t,o,a){let c=Fo();const d=Ye(),g=Ye();return t.forEach((E,S)=>{const V=o.get(S.key);a.has(S.key)&&(void 0===V||V.mutation instanceof sa)?c=c.insert(S.key,S):void 0!==V?(d.set(S.key,V.mutation.getFieldMask()),Ml(V.mutation,S,V.mutation.getFieldMask(),On.now())):d.set(S.key,Ni.empty())}),this.recalculateAndSaveOverlays(e,c).next(E=>(E.forEach((S,V)=>d.set(S,V)),t.forEach((S,V)=>{var K;return g.set(S,new KE(V,null!==(K=d.get(S))&&void 0!==K?K:null))}),g))}recalculateAndSaveOverlays(e,t){const o=Ye();let a=new ur((d,g)=>d-g),c=on();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const g of d)g.keys().forEach(E=>{const S=t.get(E);if(null===S)return;let V=o.get(E)||Ni.empty();V=g.applyToLocalView(S,V),o.set(E,V);const K=(a.get(g.batchId)||on()).add(E);a=a.insert(g.batchId,K)})}).next(()=>{const d=[],g=a.getReverseIterator();for(;g.hasNext();){const E=g.getNext(),S=E.key,V=E.value,K=le();V.forEach(ee=>{if(!c.has(ee)){const de=Xu(t.get(ee),o.get(ee));null!==de&&K.set(ee,de),c=c.add(ee)}}),d.push(this.documentOverlayCache.saveOverlays(e,S,K))}return ke.waitFor(d)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o,a){return Ht.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Nc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,a):this.getDocumentsMatchingCollectionQuery(e,t,o,a);var d}getNextDocuments(e,t,o,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,a).next(c=>{const d=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,a-c.size):ke.resolve(z());let g=-1,E=c;return d.next(S=>ke.forEach(S,(V,K)=>(g<K.largestBatchId&&(g=K.largestBatchId),c.get(V)?ke.resolve():this.remoteDocumentCache.getEntry(e,V).next(ee=>{E=E.insert(V,ee)}))).next(()=>this.populateOverlays(e,S,c)).next(()=>this.computeViews(e,E,S,on())).next(V=>({batchId:g,changes:k(V)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ht(t)).next(o=>{let a=q();return o.isFoundDocument()&&(a=a.insert(o.key,o)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,o,a){const c=t.collectionGroup;let d=q();return this.indexManager.getCollectionParents(e,c).next(g=>ke.forEach(g,E=>{const S=(K=t,ee=E.child(c),new $s(ee,null,K.explicitOrderBy.slice(),K.filters.slice(),K.limit,K.limitType,K.startAt,K.endAt));var K,ee;return this.getDocumentsMatchingCollectionQuery(e,S,o,a).next(V=>{V.forEach((K,ee)=>{d=d.insert(K,ee)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,o,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,c,a))).next(d=>{c.forEach((E,S)=>{const V=S.getKey();null===d.get(V)&&(d=d.insert(V,wn.newInvalidDocument(V)))});let g=q();return d.forEach((E,S)=>{const V=c.get(E);void 0!==V&&Ml(V.mutation,S,Ni.empty(),On.now()),Un(t,S)&&(g=g.insert(E,S))}),g})}}class Q_{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,t){return ke.resolve(this.lr.get(t))}saveBundleMetadata(e,t){return this.lr.set(t.id,{id:(a=t).id,version:a.version,createTime:Ai(a.createTime)}),ke.resolve();var a}getNamedQuery(e,t){return ke.resolve(this.hr.get(t))}saveNamedQuery(e,t){return this.hr.set(t.name,{name:(a=t).name,query:pu(a.bundledQuery),readTime:Ai(a.readTime)}),ke.resolve();var a}}class qE{constructor(){this.overlays=new ur(Ht.comparator),this.Pr=new Map}getOverlay(e,t){return ke.resolve(this.overlays.get(t))}getOverlays(e,t){const o=z();return ke.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&o.set(a,c)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((a,c)=>{this.ht(e,t,c)}),ke.resolve()}removeOverlaysForBatchId(e,t,o){const a=this.Pr.get(o);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.Pr.delete(o)),ke.resolve()}getOverlaysForCollection(e,t,o){const a=z(),c=t.length+1,d=new Ht(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const E=g.getNext().value,S=E.getKey();if(!t.isPrefixOf(S.path))break;S.path.length===c&&E.largestBatchId>o&&a.set(E.getKey(),E)}return ke.resolve(a)}getOverlaysForCollectionGroup(e,t,o,a){let c=new ur((S,V)=>S-V);const d=this.overlays.getIterator();for(;d.hasNext();){const S=d.getNext().value;if(S.getKey().getCollectionGroup()===t&&S.largestBatchId>o){let V=c.get(S.largestBatchId);null===V&&(V=z(),c=c.insert(S.largestBatchId,V)),V.set(S.getKey(),S)}}const g=z(),E=c.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((S,V)=>g.set(S,V)),!(g.size()>=a)););return ke.resolve(g)}ht(e,t,o){const a=this.overlays.get(o.key);if(null!==a){const d=this.Pr.get(a.largestBatchId).delete(o.key);this.Pr.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(o.key,new Gs(t,o));let c=this.Pr.get(t);void 0===c&&(c=on(),this.Pr.set(t,c)),this.Pr.set(t,c.add(o.key))}}class Ig{constructor(){this.sessionToken=kr.EMPTY_BYTE_STRING}getSessionToken(e){return ke.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ke.resolve()}}class wg{constructor(){this.Ir=new Qn(jo.Tr),this.Er=new Qn(jo.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(e,t){const o=new jo(e,t);this.Ir=this.Ir.add(o),this.Er=this.Er.add(o)}Ar(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.Rr(new jo(e,t))}Vr(e,t){e.forEach(o=>this.removeReference(o,t))}mr(e){const t=new Ht(new Tn([])),o=new jo(t,e),a=new jo(t,e+1),c=[];return this.Er.forEachInRange([o,a],d=>{this.Rr(d),c.push(d.key)}),c}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Er=this.Er.delete(e)}pr(e){const t=new Ht(new Tn([])),o=new jo(t,e),a=new jo(t,e+1);let c=on();return this.Er.forEachInRange([o,a],d=>{c=c.add(d.key)}),c}containsKey(e){const t=new jo(e,0),o=this.Ir.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class jo{constructor(e,t){this.key=e,this.yr=t}static Tr(e,t){return Ht.comparator(e.key,t.key)||vt(e.yr,t.yr)}static dr(e,t){return vt(e.yr,t.yr)||Ht.comparator(e.key,t.key)}}class bw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.wr=1,this.Sr=new Qn(jo.Tr)}checkEmpty(e){return ke.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,a){const c=this.wr;this.wr++;const d=new Vo(c,t,o,a);this.mutationQueue.push(d);for(const g of a)this.Sr=this.Sr.add(new jo(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ke.resolve(d)}lookupMutationBatch(e,t){return ke.resolve(this.br(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.Dr(t+1),c=a<0?0:a;return ke.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(0===this.mutationQueue.length?-1:this.wr-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new jo(t,0),a=new jo(t,Number.POSITIVE_INFINITY),c=[];return this.Sr.forEachInRange([o,a],d=>{const g=this.br(d.yr);c.push(g)}),ke.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Qn(vt);return t.forEach(a=>{const c=new jo(a,0),d=new jo(a,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([c,d],g=>{o=o.add(g.yr)})}),ke.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,a=o.length+1;let c=o;Ht.isDocumentKey(c)||(c=c.child(""));const d=new jo(new Ht(c),0);let g=new Qn(vt);return this.Sr.forEachWhile(E=>{const S=E.key.path;return!!o.isPrefixOf(S)&&(S.length===a&&(g=g.add(E.yr)),!0)},d),ke.resolve(this.Cr(g))}Cr(e){const t=[];return e.forEach(o=>{const a=this.br(o);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){Kt(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();let o=this.Sr;return ke.forEach(t.mutations,a=>{const c=new jo(a.key,t.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Sr=o})}xn(e){}containsKey(e,t){const o=new jo(t,0),a=this.Sr.firstAfterOrEqual(o);return ke.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return ke.resolve()}vr(e,t){return this.Dr(e)}Dr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}br(e){const t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Aw{constructor(e){this.Fr=e,this.docs=new ur(Ht.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,a=this.docs.get(o),c=a?a.size:0,d=this.Fr(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return ke.resolve(o?o.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let o=Fo();return t.forEach(a=>{const c=this.docs.get(a);o=o.insert(a,c?c.document.mutableCopy():wn.newInvalidDocument(a))}),ke.resolve(o)}getDocumentsMatchingQuery(e,t,o,a){let c=Fo();const d=t.path,g=new Ht(d.child("")),E=this.docs.getIteratorFrom(g);for(;E.hasNext();){const{key:S,value:{document:V}}=E.getNext();if(!d.isPrefixOf(S.path))break;S.path.length>d.length+1||Cn(Wt(V),o)<=0||(a.has(V.key)||Un(t,V))&&(c=c.insert(V.key,V.mutableCopy()))}return ke.resolve(c)}getAllFromCollectionGroup(e,t,o,a){Nt()}Mr(e,t){return ke.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new Pw(this)}getSize(e){return ke.resolve(this.size)}}class Pw extends Rf{constructor(e){super(),this.ur=e}applyChanges(e){const t=[];return this.changes.forEach((o,a)=>{a.isValidDocument()?t.push(this.ur.addEntry(e,a)):this.ur.removeEntry(o)}),ke.waitFor(t)}getFromCache(e,t){return this.ur.getEntry(e,t)}getAllFromCache(e,t){return this.ur.getEntries(e,t)}}class Dw{constructor(e){this.persistence=e,this.Or=new ms(t=>xo(t),vn),this.lastRemoteSnapshotVersion=$t.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new wg,this.targetCount=0,this.Br=Bl.Ln()}forEachTarget(e,t){return this.Or.forEach((o,a)=>t(a)),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.Nr&&(this.Nr=t),ke.resolve()}Qn(e){this.Or.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Bl(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,t){return this.Qn(t),this.targetCount+=1,ke.resolve()}updateTargetData(e,t){return this.Qn(t),ke.resolve()}removeTargetData(e,t){return this.Or.delete(t.target),this.Lr.mr(t.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,t,o){let a=0;const c=[];return this.Or.forEach((d,g)=>{g.sequenceNumber<=t&&null===o.get(g.targetId)&&(this.Or.delete(d),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),a++)}),ke.waitFor(c).next(()=>a)}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,t){const o=this.Or.get(t)||null;return ke.resolve(o)}addMatchingKeys(e,t,o){return this.Lr.Ar(t,o),ke.resolve()}removeMatchingKeys(e,t,o){this.Lr.Vr(t,o);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(d=>{c.push(a.markPotentiallyOrphaned(e,d))}),ke.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Lr.mr(t),ke.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Lr.pr(t);return ke.resolve(o)}containsKey(e,t){return ke.resolve(this.Lr.containsKey(t))}}class Y_{constructor(e,t){this.kr={},this.overlays={},this.qr=new Sr(0),this.Qr=!1,this.Qr=!0,this.Kr=new Ig,this.referenceDelegate=e(this),this.$r=new Dw(this),this.indexManager=new Va,this.remoteDocumentCache=new Aw(o=>this.referenceDelegate.Ur(o)),this.serializer=new W_(t),this.Wr=new Q_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.kr[e.toKey()];return o||(o=new bw(t,this.referenceDelegate),this.kr[e.toKey()]=o),o}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(e,t,o){yt("MemoryPersistence","Starting transaction:",e);const a=new QE(this.qr.next());return this.referenceDelegate.Gr(),o(a).next(c=>this.referenceDelegate.zr(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}jr(e,t){return ke.or(Object.values(this.kr).map(o=>()=>o.containsKey(e,t)))}}class QE extends Cr{constructor(e){super(),this.currentSequenceNumber=e}}class Tg{constructor(e){this.persistence=e,this.Hr=new wg,this.Jr=null}static Yr(e){return new Tg(e)}get Zr(){if(this.Jr)return this.Jr;throw Nt()}addReference(e,t,o){return this.Hr.addReference(o,t),this.Zr.delete(o.toString()),ke.resolve()}removeReference(e,t,o){return this.Hr.removeReference(o,t),this.Zr.add(o.toString()),ke.resolve()}markPotentiallyOrphaned(e,t){return this.Zr.add(t.toString()),ke.resolve()}removeTarget(e,t){this.Hr.mr(t.targetId).forEach(a=>this.Zr.add(a.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Zr.add(c.toString()))}).next(()=>o.removeTargetData(e,t))}Gr(){this.Jr=new Set}zr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.Zr,o=>{const a=Ht.fromPath(o);return this.Xr(e,a).next(c=>{c||t.removeEntry(a,$t.min())})}).next(()=>(this.Jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Xr(e,t).next(o=>{o?this.Zr.delete(t.toString()):this.Zr.add(t.toString())})}Ur(e){return 0}Xr(e,t){return ke.or([()=>ke.resolve(this.Hr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.jr(e,t)])}}class X_{constructor(e){this.serializer=e}O(e,t,o,a){const c=new Ls("createOrUpgrade",t);var E;o<1&&a>=1&&(e.createObjectStore("owner"),(E=e).createObjectStore("mutationQueues",{keyPath:"userId"}),E.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Us,{unique:!0}),E.createObjectStore("documentMutations"),Eu(e),function(E){E.createObjectStore("remoteDocuments")}(e));let d=ke.resolve();return o<3&&a>=3&&(0!==o&&(function(E){E.deleteObjectStore("targetDocuments"),E.deleteObjectStore("targets"),E.deleteObjectStore("targetGlobal")}(e),Eu(e)),d=d.next(()=>function(E){const S=E.store("targetGlobal"),V={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:$t.min().toTimestamp(),targetCount:0};return S.put("targetGlobalKey",V)}(c))),o<4&&a>=4&&(0!==o&&(d=d.next(()=>function(E,S){return S.store("mutations").U().next(V=>{E.deleteObjectStore("mutations"),E.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Us,{unique:!0});const K=S.store("mutations"),ee=V.map(de=>K.put(de));return ke.waitFor(ee)})}(e,c))),d=d.next(()=>{!function(E){E.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&a>=5&&(d=d.next(()=>this.ti(c))),o<6&&a>=6&&(d=d.next(()=>(function(E){E.createObjectStore("remoteDocumentGlobal")}(e),this.ni(c)))),o<7&&a>=7&&(d=d.next(()=>this.ri(c))),o<8&&a>=8&&(d=d.next(()=>this.ii(e,c))),o<9&&a>=9&&(d=d.next(()=>{!function(E){E.objectStoreNames.contains("remoteDocumentChanges")&&E.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&a>=10&&(d=d.next(()=>this.si(c))),o<11&&a>=11&&(d=d.next(()=>{(function(E){E.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(E){E.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&a>=12&&(d=d.next(()=>{!function(E){const S=E.createObjectStore("documentOverlays",{keyPath:Mc});S.createIndex("collectionPathOverlayIndex",Yo,{unique:!1}),S.createIndex("collectionGroupOverlayIndex",na,{unique:!1})}(e)})),o<13&&a>=13&&(d=d.next(()=>function(E){const S=E.createObjectStore("remoteDocumentsV14",{keyPath:wa});S.createIndex("documentKeyIndex",Sc),S.createIndex("collectionGroupIndex",Ta)}(e)).next(()=>this.oi(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&a>=14&&(d=d.next(()=>this._i(e,c))),o<15&&a>=15&&(d=d.next(()=>function(E){E.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),E.createObjectStore("indexState",{keyPath:ta}).createIndex("sequenceNumberIndex",bs,{unique:!1}),E.createObjectStore("indexEntries",{keyPath:As}).createIndex("documentKeyIndex",Ja,{unique:!1})}(e))),o<16&&a>=16&&(d=d.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o<17&&a>=17&&(d=d.next(()=>{!function(E){E.createObjectStore("globals",{keyPath:"name"})}(e)})),d}ni(e){let t=0;return e.store("remoteDocuments").J((o,a)=>{t+=Vl(a)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}ti(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.U().next(a=>ke.forEach(a,c=>{const d=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return o.U("userMutationsIndex",d).next(g=>ke.forEach(g,E=>{Kt(E.userId===c.userId);const S=po(this.serializer,E);return Pi(e,c.userId,S).next(()=>{})}))}))}ri(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return o.J((d,g)=>{const E=new Tn(d),S=[0,Xr(E)];c.push(t.get(S).next(V=>V?ke.resolve():t.put({targetId:0,path:Xr(E),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>ke.waitFor(c))})}ii(e,t){e.createObjectStore("collectionParents",{keyPath:ba});const o=t.store("collectionParents"),a=new io,c=d=>{if(a.add(d)){const g=d.lastSegment(),E=d.popLast();return o.put({collectionId:g,parent:Xr(E)})}};return t.store("remoteDocuments").J({H:!0},(d,g)=>{const E=new Tn(d);return c(E.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([d,g,E],S)=>{const V=Mr(g);return c(V.popLast())}))}si(e){const t=e.store("targets");return t.J((o,a)=>{const c=La(a),d=Tf(this.serializer,c);return t.put(d)})}oi(e,t){const o=t.store("remoteDocuments"),a=[];return o.J((c,d)=>{const g=t.store("remoteDocumentsV14"),E=(K=d,K.document?new Ht(Tn.fromString(K.document.name).popFirst(5)):K.noDocument?Ht.fromSegments(K.noDocument.path):K.unknownDocument?Ht.fromSegments(K.unknownDocument.path):Nt()).path.toArray(),S={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};var K;a.push(g.put(S))}).next(()=>ke.waitFor(a))}_i(e,t){const o=t.store("mutations"),a=yu(this.serializer),c=new Y_(Tg.Yr,this.serializer.ct);return o.U().next(d=>{const g=new Map;return d.forEach(E=>{var S;let V=null!==(S=g.get(E.userId))&&void 0!==S?S:on();po(this.serializer,E).keys().forEach(K=>V=V.add(K)),g.set(E.userId,V)}),ke.forEach(g,(E,S)=>{const V=new ir(S),K=Bc.lt(this.serializer,V),ee=c.getIndexManager(V),de=fc.lt(V,this.serializer,ee,c.referenceDelegate);return new Cg(a,de,K,ee).recalculateAndSaveOverlaysForDocumentKeys(new fs(t,Sr.oe),E).next()})})}}function Eu(i){i.createObjectStore("targetDocuments",{keyPath:Xa}).createIndex("documentTargetsIndex",ic,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rc,{unique:!0}),i.createObjectStore("targetGlobal")}const J_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Z_{constructor(e,t,o,a,c,d,g,E,S,V,K=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.ai=c,this.window=d,this.document=g,this.ui=S,this.ci=V,this.li=K,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.hi=null,this.inForeground=!1,this.Pi=null,this.Ii=null,this.Ti=Number.NEGATIVE_INFINITY,this.Ei=ee=>Promise.resolve(),!Z_.D())throw new st(Ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Bo(this,a),this.di=t+"main",this.serializer=new W_(E),this.Ai=new qn(this.di,this.li,new X_(this.serializer)),this.Kr=new yg,this.$r=new gc(this.referenceDelegate,this.serializer),this.remoteDocumentCache=yu(this.serializer),this.Wr=new _g,this.window&&this.window.localStorage?this.Ri=this.window.localStorage:(this.Ri=null,!1===V&&Pn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Vi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new st(Ge.FAILED_PRECONDITION,J_);return this.mi(),this.fi(),this.gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.$r.getHighestSequenceNumber(e))}).then(e=>{this.qr=new Sr(e,this.ui)}).then(()=>{this.Qr=!0}).catch(e=>(this.Ai&&this.Ai.close(),Promise.reject(e)))}pi(e){var t=this;return this.Ei=function(){var o=(0,we.A)(function*(a){if(t.started)return e(a)});return function(a){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ai.L(function(){var t=(0,we.A)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ai.enqueueAndForget((0,we.A)(function*(){t.started&&(yield t.Vi())})))}Vi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>xf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.yi(e).next(t=>{t||(this.isPrimary=!1,this.ai.enqueueRetryable(()=>this.Ei(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.Si(e).next(()=>!1):!!t&&this.bi(e).next(()=>!0))).catch(e=>{if(Ko(e))return yt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return yt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ai.enqueueRetryable(()=>this.Ei(e)),this.isPrimary=e})}yi(e){return od(e).get("owner").next(t=>ke.resolve(this.Di(t)))}Ci(e){return xf(e).delete(this.clientId)}vi(){var e=this;return(0,we.A)(function*(){if(e.isPrimary&&!e.Fi(e.Ti,18e5)){e.Ti=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const a=xr(o,"clientMetadata");return a.U().next(c=>{const d=e.Mi(c,18e5),g=c.filter(E=>-1===d.indexOf(E));return ke.forEach(g,E=>a.delete(E.clientId)).next(()=>g)})}).catch(()=>[]);if(e.Ri)for(const o of t)e.Ri.removeItem(e.xi(o.clientId))}})()}gi(){this.Ii=this.ai.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Vi().then(()=>this.vi()).then(()=>this.gi()))}Di(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.ci?ke.resolve(!0):od(e).get("owner").next(t=>{if(null!==t&&this.Fi(t.leaseTimestampMs,5e3)&&!this.Oi(t.ownerId)){if(this.Di(t)&&this.networkEnabled)return!0;if(!this.Di(t)){if(!t.allowTabSynchronization)throw new st(Ge.FAILED_PRECONDITION,J_);return!1}}return!(!this.networkEnabled||!this.inForeground)||xf(e).U().next(o=>void 0===this.Mi(o,5e3).find(a=>!(this.clientId===a.clientId||!(!this.networkEnabled&&a.networkEnabled||!this.inForeground&&a.inForeground&&this.networkEnabled===a.networkEnabled))))}).next(t=>(this.isPrimary!==t&&yt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.A)(function*(){e.Qr=!1,e.Ni(),e.Ii&&(e.Ii.cancel(),e.Ii=null),e.Li(),e.Bi(),yield e.Ai.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new fs(t,Sr.oe);return e.Si(o).next(()=>e.Ci(o))}),e.Ai.close(),e.ki()})()}Mi(e,t){return e.filter(o=>this.Fi(o.updateTimeMs,t)&&!this.Oi(o.clientId))}qi(){return this.runTransaction("getActiveClients","readonly",e=>xf(e).U().next(t=>this.Mi(t,18e5).map(o=>o.clientId)))}get started(){return this.Qr}getGlobalsCache(){return this.Kr}getMutationQueue(e,t){return fc.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new rd(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Bc.lt(this.serializer,e)}getBundleCache(){return this.Wr}runTransaction(e,t,o){yt("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=17===(E=this.li)?ia:16===E?Ps:15===E?Ro:14===E?Xo:13===E?Or:12===E?Aa:11===E?ra:void Nt();var E;let d;return this.Ai.runTransaction(e,a,c,g=>(d=new fs(g,this.qr?this.qr.next():Sr.oe),"readwrite-primary"===t?this.yi(d).next(E=>!!E||this.wi(d)).next(E=>{if(!E)throw Pn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ai.enqueueRetryable(()=>this.Ei(!1)),new st(Ge.FAILED_PRECONDITION,Fn);return o(d)}).next(E=>this.bi(d).next(()=>E)):this.Qi(d).next(()=>o(d)))).then(g=>(d.raiseOnCommittedEvent(),g))}Qi(e){return od(e).get("owner").next(t=>{if(null!==t&&this.Fi(t.leaseTimestampMs,5e3)&&!this.Oi(t.ownerId)&&!this.Di(t)&&!(this.ci||this.allowTabSynchronization&&t.allowTabSynchronization))throw new st(Ge.FAILED_PRECONDITION,J_)})}bi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return od(e).put("owner",t)}static D(){return qn.D()}Si(e){const t=od(e);return t.get("owner").next(o=>this.Di(o)?(yt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ke.resolve())}Fi(e,t){const o=Date.now();return!(e<o-t||e>o&&(Pn(`Detected an update time that is in the future: ${e} > ${o}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Pi=()=>{this.ai.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Vi()))},this.document.addEventListener("visibilitychange",this.Pi),this.inForeground="visible"===this.document.visibilityState)}Li(){this.Pi&&(this.document.removeEventListener("visibilitychange",this.Pi),this.Pi=null)}fi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.hi=()=>{this.Ni();const t=/(?:Version|Mobile)\/1[456]/;(0,te.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ai.enterRestrictedMode(!0),this.ai.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.hi))}Bi(){this.hi&&(this.window.removeEventListener("pagehide",this.hi),this.hi=null)}Oi(e){var t;try{const o=null!==(null===(t=this.Ri)||void 0===t?void 0:t.getItem(this.xi(e)));return yt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Pn("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ni(){if(this.Ri)try{this.Ri.setItem(this.xi(this.clientId),String(Date.now()))}catch(e){Pn("Failed to set zombie client id.",e)}}ki(){if(this.Ri)try{this.Ri.removeItem(this.xi(this.clientId))}catch{}}xi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function od(i){return xr(i,"owner")}function xf(i){return xr(i,"clientMetadata")}function sd(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class dh{constructor(e,t,o,a){this.targetId=e,this.fromCache=t,this.Ki=o,this.$i=a}static Ui(e,t){let o=on(),a=on();for(const c of t.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new dh(e,t.fromCache,o,a)}}class ey{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class kf{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=(0,te.nr)()?8:Zs((0,te.ZQ)())>0?6:4}initialize(e,t){this.Hi=e,this.indexManager=t,this.Wi=!0}getDocumentsMatchingQuery(e,t,o,a){const c={result:null};return this.Ji(e,t).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.Yi(e,t,a,o).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new ey;return this.Zi(e,t,d).next(g=>{if(c.result=g,this.Gi)return this.Xi(e,t,d,g.size)})}).next(()=>c.result)}Xi(e,t,o,a){return o.documentReadCount<this.zi?(zr()<=en.$b.DEBUG&&yt("QueryEngine","SDK will not create cache indexes for query:",Ma(t),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),ke.resolve()):(zr()<=en.$b.DEBUG&&yt("QueryEngine","Query:",Ma(t),"scans",o.documentReadCount,"local documents and returns",a,"documents as results."),o.documentReadCount>this.ji*a?(zr()<=en.$b.DEBUG&&yt("QueryEngine","The SDK decides to create cache indexes for query:",Ma(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qi(t))):ke.resolve())}Ji(e,t){if(pf(t))return ke.resolve(null);let o=Qi(t);return this.indexManager.getIndexType(e,o).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=xc(t,null,"F"),o=Qi(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(c=>{const d=on(...c);return this.Hi.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,o).next(E=>{const S=this.es(t,g);return this.ts(t,S,d,E.readTime)?this.Ji(e,xc(t,null,"F")):this.ns(e,S,t,E)}))})))}Yi(e,t,o,a){return pf(t)||a.isEqual($t.min())?ke.resolve(null):this.Hi.getDocuments(e,o).next(c=>{const d=this.es(t,c);return this.ts(t,d,o,a)?ke.resolve(null):(zr()<=en.$b.DEBUG&&yt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ma(t)),this.ns(e,d,t,ut(a,-1)).next(g=>g))})}es(e,t){let o=new Qn(Yd(e));return t.forEach((a,c)=>{Un(e,c)&&(o=o.add(c))}),o}ts(e,t,o,a){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Zi(e,t,o){return zr()<=en.$b.DEBUG&&yt("QueryEngine","Using full collection scan to execute query:",Ma(t)),this.Hi.getDocumentsMatchingQuery(e,t,ln.min(),o)}ns(e,t,o,a){return this.Hi.getDocumentsMatchingQuery(e,o,a).next(c=>(t.forEach(d=>{c=c.insert(d.key,d)}),c))}}class YE{constructor(e,t,o,a){this.persistence=e,this.rs=t,this.serializer=a,this.ss=new ur(vt),this.os=new ms(c=>xo(c),vn),this._s=new Map,this.us=e.getRemoteDocumentCache(),this.$r=e.getTargetCache(),this.Wr=e.getBundleCache(),this.cs(o)}cs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cg(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ss))}}function bg(i,e,t,o){return new YE(i,e,t,o)}function hh(i,e){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,we.A)(function*(i,e){const t=xt(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let a;return t.mutationQueue.getAllMutationBatches(o).next(c=>(a=c,t.cs(e),t.mutationQueue.getAllMutationBatches(o))).next(c=>{const d=[],g=[];let E=on();for(const S of a){d.push(S.batchId);for(const V of S.mutations)E=E.add(V.key)}for(const S of c){g.push(S.batchId);for(const V of S.mutations)E=E.add(V.key)}return t.localDocuments.getDocuments(o,E).next(S=>({ls:S,removedBatchIds:d,addedBatchIds:g}))})})})).apply(this,arguments)}function ty(i){const e=xt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.$r.getLastRemoteSnapshotVersion(t))}function Dg(i,e,t){let o=on(),a=on();return t.forEach(c=>o=o.add(c)),e.getEntries(i,o).next(c=>{let d=Fo();return t.forEach((g,E)=>{const S=c.get(g);E.isFoundDocument()!==S.isFoundDocument()&&(a=a.add(g)),E.isNoDocument()&&E.version.isEqual($t.min())?(e.removeEntry(g,E.readTime),d=d.insert(g,E)):!S.isValidDocument()||E.version.compareTo(S.version)>0||0===E.version.compareTo(S.version)&&S.hasPendingWrites?(e.addEntry(E),d=d.insert(g,E)):yt("LocalStore","Ignoring outdated watch update for ",g,". Current version:",S.version," Watch version:",E.version)}),{hs:d,Ps:a}})}function Sg(i,e){const t=xt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function vr(i,e){const t=xt(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let a;return t.$r.getTargetData(o,e).next(c=>c?(a=c,ke.resolve(a)):t.$r.allocateTargetId(o).next(d=>(a=new vs(e,d,"TargetPurposeListen",o.currentSequenceNumber),t.$r.addTargetData(o,a).next(()=>a))))}).then(o=>{const a=t.ss.get(o.targetId);return(null===a||o.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.ss=t.ss.insert(o.targetId,o),t.os.set(e,o.targetId)),o})}function Gc(i,e,t){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,we.A)(function*(i,e,t){const o=xt(i),a=o.ss.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",c,d=>o.persistence.referenceDelegate.removeTarget(d,a)))}catch(d){if(!Ko(d))throw d;yt("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}o.ss=o.ss.remove(e),o.os.delete(a.target)})).apply(this,arguments)}function go(i,e,t){const o=xt(i);let a=$t.min(),c=on();return o.persistence.runTransaction("Execute query","readwrite",d=>function(E,S,V){const K=xt(E),ee=K.os.get(V);return void 0!==ee?ke.resolve(K.ss.get(ee)):K.$r.getTargetData(S,V)}(o,d,Qi(e)).next(g=>{if(g)return a=g.lastLimboFreeSnapshotVersion,o.$r.getMatchingKeysForTargetId(d,g.targetId).next(E=>{c=E})}).next(()=>o.rs.getDocumentsMatchingQuery(d,e,t?a:$t.min(),t?c:on())).next(g=>(Iu(o,Ar(e),g),{documents:g,Is:c})))}function Ff(i,e){const t=xt(i),o=xt(t.$r),a=t.ss.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>o.ot(c,e).next(d=>d?d.target:null))}function ad(i,e){const t=xt(i),o=t._s.get(e)||$t.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.us.getAllFromCollectionGroup(a,e,ut(o,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Iu(t,e,a),a))}function Iu(i,e,t){let o=i._s.get(e)||$t.min();t.forEach((a,c)=>{c.readTime.compareTo(o)>0&&(o=c.readTime)}),i._s.set(e,o)}function Mg(){return(Mg=(0,we.A)(function*(i,e,t,o){const a=xt(i);let c=on(),d=Fo();for(const S of t){const V=e.Ts(S.metadata.name);S.document&&(c=c.add(V));const K=e.Es(S);K.setReadTime(e.ds(S.metadata.readTime)),d=d.insert(V,K)}const g=a.us.newChangeBuffer({trackRemovals:!0}),E=yield vr(a,(V=o,Qi(sc(Tn.fromString(`__bundle__/docs/${V}`)))));var V;return a.persistence.runTransaction("Apply bundle documents","readwrite",S=>Dg(S,g,d).next(V=>(g.apply(S),V)).next(V=>a.$r.removeMatchingKeysForTargetId(S,E.targetId).next(()=>a.$r.addMatchingKeys(S,c,E.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(S,V.hs,V.Ps)).next(()=>V.hs)))})).apply(this,arguments)}function Og(i,e){return Rg.apply(this,arguments)}function Rg(){return(Rg=(0,we.A)(function*(i,e,t=on()){const o=yield vr(i,Qi(pu(e.bundledQuery))),a=xt(i);return a.persistence.runTransaction("Save named query","readwrite",c=>{const d=Ai(e.readTime);if(o.snapshotVersion.compareTo(d)>=0)return a.Wr.saveNamedQuery(c,e);const g=o.withResumeToken(kr.EMPTY_BYTE_STRING,d);return a.ss=a.ss.insert(g.targetId,g),a.$r.updateTargetData(c,g).next(()=>a.$r.removeMatchingKeysForTargetId(c,o.targetId)).next(()=>a.$r.addMatchingKeys(c,t,o.targetId)).next(()=>a.Wr.saveNamedQuery(c,e))})})).apply(this,arguments)}function Ks(i,e){return`firestore_clients_${i}_${e}`}function Ng(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function xg(i,e){return`firestore_targets_${i}_${e}`}class fh{constructor(e,t,o,a){this.user=e,this.batchId=t,this.state=o,this.error=a}static As(e,t,o){const a=JSON.parse(o);let c,d="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return d&&a.error&&(d="string"==typeof a.error.message&&"string"==typeof a.error.code,d&&(c=new st(a.error.code,a.error.message))),d?new fh(e,t,a.state,c):(Pn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}Rs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _c{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static As(e,t){const o=JSON.parse(t);let a,c="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(a=new st(o.error.code,o.error.message))),c?new _c(e,o.state,a):(Pn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Rs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $l{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static As(e,t){const o=JSON.parse(t);let a="object"==typeof o&&o.activeTargetIds instanceof Array,c=Pr();for(let d=0;a&&d<o.activeTargetIds.length;++d)a=Ri(o.activeTargetIds[d]),c=c.add(o.activeTargetIds[d]);return a?new $l(e,c):(Pn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ld{constructor(e,t){this.clientId=e,this.onlineState=t}static As(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ld(t.clientId,t.onlineState):(Pn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class wu{constructor(){this.activeTargetIds=Pr()}Vs(e){this.activeTargetIds=this.activeTargetIds.add(e)}fs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Rs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ph{constructor(e,t,o,a,c){this.window=e,this.ai=t,this.persistenceKey=o,this.gs=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ps=this.ys.bind(this),this.ws=new ur(vt),this.started=!1,this.Ss=[];const d=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.bs=Ks(this.persistenceKey,this.gs),this.Ds=`firestore_sequence_number_${this.persistenceKey}`,this.ws=this.ws.insert(this.gs,new wu),this.Cs=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.vs=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.Fs=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.Ms=`firestore_online_state_${this.persistenceKey}`,this.xs=function(E){return`firestore_bundle_loaded_v2_${E}`}(this.persistenceKey),this.window.addEventListener("storage",this.ps)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.A)(function*(){const t=yield e.syncEngine.qi();for(const a of t){if(a===e.gs)continue;const c=e.getItem(Ks(e.persistenceKey,a));if(c){const d=$l.As(a,c);d&&(e.ws=e.ws.insert(d.clientId,d))}}e.Os();const o=e.storage.getItem(e.Ms);if(o){const a=e.Ns(o);a&&e.Ls(a)}for(const a of e.Ss)e.ys(a);e.Ss=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ds,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Bs(this.ws)}isActiveQueryTarget(e){let t=!1;return this.ws.forEach((o,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ks(e,"pending")}updateMutationState(e,t,o){this.ks(e,t,o),this.qs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(xg(this.persistenceKey,e));if(o){const a=_c.As(e,o);a&&(t=a.state)}}return this.Qs.Vs(e),this.Os(),t}removeLocalQueryTarget(e){this.Qs.fs(e),this.Os()}isLocalQueryTarget(e){return this.Qs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xg(this.persistenceKey,e))}updateQueryState(e,t,o){this.Ks(e,t,o)}handleUserChange(e,t,o){t.forEach(a=>{this.qs(a)}),this.currentUser=e,o.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.$s(e)}notifyBundleLoaded(e){this.Us(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ps),this.removeItem(this.bs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return yt("SharedClientState","READ",e,t),t}setItem(e,t){yt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){yt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ys(e){var t=this;const o=e;if(o.storageArea===this.storage){if(yt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.bs)return void Pn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ai.enqueueRetryable((0,we.A)(function*(){if(t.started){if(null!==o.key)if(t.Cs.test(o.key)){if(null==o.newValue){const a=t.Ws(o.key);return t.Gs(a,null)}{const a=t.zs(o.key,o.newValue);if(a)return t.Gs(a.clientId,a)}}else if(t.vs.test(o.key)){if(null!==o.newValue){const a=t.js(o.key,o.newValue);if(a)return t.Hs(a)}}else if(t.Fs.test(o.key)){if(null!==o.newValue){const a=t.Js(o.key,o.newValue);if(a)return t.Ys(a)}}else if(o.key===t.Ms){if(null!==o.newValue){const a=t.Ns(o.newValue);if(a)return t.Ls(a)}}else if(o.key===t.Ds){const a=function(d){let g=Sr.oe;if(null!=d)try{const E=JSON.parse(d);Kt("number"==typeof E),g=E}catch(E){Pn("SharedClientState","Failed to read sequence number from WebStorage",E)}return g}(o.newValue);a!==Sr.oe&&t.sequenceNumberHandler(a)}else if(o.key===t.xs){const a=t.Zs(o.newValue);yield Promise.all(a.map(c=>t.syncEngine.Xs(c)))}}else t.Ss.push(o)}))}}get Qs(){return this.ws.get(this.gs)}Os(){this.setItem(this.bs,this.Qs.Rs())}ks(e,t,o){const a=new fh(this.currentUser,e,t,o),c=Ng(this.persistenceKey,this.currentUser,e);this.setItem(c,a.Rs())}qs(e){const t=Ng(this.persistenceKey,this.currentUser,e);this.removeItem(t)}$s(e){this.storage.setItem(this.Ms,JSON.stringify({clientId:this.gs,onlineState:e}))}Ks(e,t,o){const a=xg(this.persistenceKey,e),c=new _c(e,t,o);this.setItem(a,c.Rs())}Us(e){const t=JSON.stringify(Array.from(e));this.setItem(this.xs,t)}Ws(e){const t=this.Cs.exec(e);return t?t[1]:null}zs(e,t){const o=this.Ws(e);return $l.As(o,t)}js(e,t){const o=this.vs.exec(e),a=Number(o[1]);return fh.As(new ir(void 0!==o[2]?o[2]:null),a,t)}Js(e,t){const o=this.Fs.exec(e),a=Number(o[1]);return _c.As(a,t)}Ns(e){return ld.As(e)}Zs(e){return JSON.parse(e)}Hs(e){var t=this;return(0,we.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.eo(e.batchId,e.state,e.error);yt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ys(e){return this.syncEngine.no(e.targetId,e.state,e.error)}Gs(e,t){const o=t?this.ws.insert(e,t):this.ws.remove(e),a=this.Bs(this.ws),c=this.Bs(o),d=[],g=[];return c.forEach(E=>{a.has(E)||d.push(E)}),a.forEach(E=>{c.has(E)||g.push(E)}),this.syncEngine.ro(d,g).then(()=>{this.ws=o})}Ls(e){this.ws.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Bs(e){let t=Pr();return e.forEach((o,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class zc{constructor(){this.io=new wu,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.io.Vs(e),this.so[e]||"not-current"}updateQueryState(e,t,o){this.so[e]=t}removeLocalQueryTarget(e){this.io.fs(e)}isLocalQueryTarget(e){return this.io.activeTargetIds.has(e)}clearQueryState(e){delete this.so[e]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(e){return this.io.activeTargetIds.has(e)}start(){return this.io=new wu,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Zn{oo(e){}shutdown(){}}class gh{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(e){this.lo.push(e)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){yt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.lo)e(0)}co(){yt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.lo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Tu=null;function cd(){return null===Tu?Tu=268435456+Math.round(2147483648*Math.random()):Tu++,"0x"+Tu.toString(16)}const ny={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ry{constructor(e){this.Po=e.Po,this.Io=e.Io}To(e){this.Eo=e}Ao(e){this.Ro=e}Vo(e){this.mo=e}onMessage(e){this.fo=e}close(){this.Io()}send(e){this.Po(e)}po(){this.Eo()}yo(){this.Ro()}wo(e){this.mo(e)}So(e){this.fo(e)}}const Cs="WebChannelConnection";class kg extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const o=t.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.bo=o+"://"+t.host,this.Do=`projects/${a}/databases/${c}`,this.Co="(default)"===this.databaseId.database?`project_id=${a}`:`project_id=${a}&database_id=${c}`}get vo(){return!1}Fo(t,o,a,c,d){const g=cd(),E=this.Mo(t,o.toUriEncodedString());yt("RestConnection",`Sending RPC '${t}' ${g}:`,E,a);const S={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(S,c,d),this.Oo(t,E,S,a).then(V=>(yt("RestConnection",`Received RPC '${t}' ${g}: `,V),V),V=>{throw mr("RestConnection",`RPC '${t}' ${g} failed with error: `,V,"url: ",E,"request:",a),V})}No(t,o,a,c,d,g){return this.Fo(t,o,a,c,d)}xo(t,o,a){t["X-Goog-Api-Client"]="gl-js/ fire/"+Nr,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((c,d)=>t[d]=c),a&&a.headers.forEach((c,d)=>t[d]=c)}Mo(t,o){return`${this.bo}/v1/${o}:${ny[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Oo(e,t,o,a){const c=cd();return new Promise((d,g)=>{const E=new mn;E.setWithCredentials(!0),E.listenOnce(gr.COMPLETE,()=>{try{switch(E.getLastErrorCode()){case Yr.NO_ERROR:const V=E.getResponseJson();yt(Cs,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(V)),d(V);break;case Yr.TIMEOUT:yt(Cs,`RPC '${e}' ${c} timed out`),g(new st(Ge.DEADLINE_EXCEEDED,"Request time out"));break;case Yr.HTTP_ERROR:const K=E.getStatus();if(yt(Cs,`RPC '${e}' ${c} failed with status:`,K,"response text:",E.getResponseText()),K>0){let ee=E.getResponseJson();Array.isArray(ee)&&(ee=ee[0]);const de=ee?.error;if(de&&de.status&&de.message){const Re=function(qe){const kt=qe.toLowerCase().replace(/_/g,"-");return Object.values(Ge).indexOf(kt)>=0?kt:Ge.UNKNOWN}(de.status);g(new st(Re,de.message))}else g(new st(Ge.UNKNOWN,"Server responded with status "+E.getStatus()))}else g(new st(Ge.UNAVAILABLE,"Connection failed."));break;default:Nt()}}finally{yt(Cs,`RPC '${e}' ${c} completed.`)}});const S=JSON.stringify(a);yt(Cs,`RPC '${e}' ${c} sending request:`,a),E.send(t,"POST",S,o,15)})}Lo(e,t,o){const a=cd(),c=[this.bo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Xn(),g=Bt(),E={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},S=this.longPollingOptions.timeoutSeconds;void 0!==S&&(E.longPollingTimeout=Math.round(1e3*S)),this.useFetchStreams&&(E.xmlHttpFactory=new qi({})),this.xo(E.initMessageHeaders,t,o),E.encodeInitMessageHeaders=!0;const V=c.join("");yt(Cs,`Creating RPC '${e}' stream ${a}: ${V}`,E);const K=d.createWebChannel(V,E);let ee=!1,de=!1;const Re=new ry({Po:qe=>{de?yt(Cs,`Not sending because RPC '${e}' stream ${a} is closed:`,qe):(ee||(yt(Cs,`Opening RPC '${e}' stream ${a} transport.`),K.open(),ee=!0),yt(Cs,`RPC '${e}' stream ${a} sending:`,qe),K.send(qe))},Io:()=>K.close()}),$e=(qe,kt,Xt)=>{qe.listen(kt,St=>{try{Xt(St)}catch(gn){setTimeout(()=>{throw gn},0)}})};return $e(K,yo.EventType.OPEN,()=>{de||(yt(Cs,`RPC '${e}' stream ${a} transport opened.`),Re.po())}),$e(K,yo.EventType.CLOSE,()=>{de||(de=!0,yt(Cs,`RPC '${e}' stream ${a} transport closed`),Re.wo())}),$e(K,yo.EventType.ERROR,qe=>{de||(de=!0,mr(Cs,`RPC '${e}' stream ${a} transport errored:`,qe),Re.wo(new st(Ge.UNAVAILABLE,"The operation could not be completed")))}),$e(K,yo.EventType.MESSAGE,qe=>{var kt;if(!de){const Xt=qe.data[0];Kt(!!Xt);const gn=Xt.error||(null===(kt=Xt[0])||void 0===kt?void 0:kt.error);if(gn){yt(Cs,`RPC '${e}' stream ${a} received error:`,gn);const Yn=gn.status;let er=function(Pe){const Ve=Kr[Pe];if(void 0!==Ve)return cc(Ve)}(Yn),xe=gn.message;void 0===er&&(er=Ge.INTERNAL,xe="Unknown error status: "+Yn+" with message "+gn.message),de=!0,Re.wo(new st(er,xe)),K.close()}else yt(Cs,`RPC '${e}' stream ${a} received:`,Xt),Re.So(Xt)}}),$e(g,Ei.STAT_EVENT,qe=>{qe.stat===lo.PROXY?yt(Cs,`RPC '${e}' stream ${a} detected buffering proxy`):qe.stat===lo.NOPROXY&&yt(Cs,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{Re.yo()},0),Re}}function Fg(){return typeof window<"u"?window:null}function Xi(){return typeof document<"u"?document:null}function yc(i){return new yf(i,!0)}class Lf{constructor(e,t,o=1e3,a=1.5,c=6e4){this.ai=e,this.timerId=t,this.Bo=o,this.ko=a,this.qo=c,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(e){this.cancel();const t=Math.floor(this.Qo+this.Go()),o=Math.max(0,Date.now()-this.$o),a=Math.max(0,t-o);a>0&&yt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Qo} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,a,()=>(this.$o=Date.now(),e())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){null!==this.Ko&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){null!==this.Ko&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}}class iy{constructor(e,t,o,a,c,d,g,E){this.ai=e,this.jo=o,this.Ho=a,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=E,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new Lf(e,t)}t_(){return 1===this.state||5===this.state||this.n_()}n_(){return 2===this.state||3===this.state}start(){this.Xo=0,4!==this.state?this.auth():this.r_()}stop(){var e=this;return(0,we.A)(function*(){e.t_()&&(yield e.close(0))})()}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&null===this.Yo&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(e){this.a_(),this.stream.send(e)}o_(){var e=this;return(0,we.A)(function*(){if(e.n_())return e.close(0)})()}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}close(e,t){var o=this;return(0,we.A)(function*(){o.a_(),o.u_(),o.e_.cancel(),o.Jo++,4!==e?o.e_.reset():t&&t.code===Ge.RESOURCE_EXHAUSTED?(Pn(t.toString()),Pn("Using maximum backoff delay to prevent overloading the backend."),o.e_.Uo()):t&&t.code===Ge.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.c_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Vo(t)})()}c_(){}auth(){this.state=1;const e=this.l_(this.Jo),t=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,a])=>{this.Jo===t&&this.h_(o,a)},o=>{e(()=>{const a=new st(Ge.UNKNOWN,"Fetching auth token failed: "+o.message);return this.P_(a)})})}h_(e,t){const o=this.l_(this.Jo);this.stream=this.I_(e,t),this.stream.To(()=>{o(()=>this.listener.To())}),this.stream.Ao(()=>{o(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(a=>{o(()=>this.P_(a))}),this.stream.onMessage(a=>{o(()=>1==++this.Xo?this.T_(a):this.onNext(a))})}r_(){var e=this;this.state=5,this.e_.Wo((0,we.A)(function*(){e.state=0,e.start()}))}P_(e){return yt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}l_(e){return t=>{this.ai.enqueueAndForget(()=>this.Jo===e?t():(yt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Lg extends iy{constructor(e,t,o,a,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,a,d),this.serializer=c}I_(e,t){return this.connection.Lo("Listen",e,t)}T_(e){return this.onNext(e)}onNext(e){this.e_.reset();const t=function En(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(S=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===S?1:"REMOVE"===S?2:"CURRENT"===S?3:"RESET"===S?4:Nt(),a=e.targetChange.targetIds||[],c=function(S,V){return S.useProto3Json?(Kt(void 0===V||"string"==typeof V),kr.fromBase64String(V||"")):(Kt(void 0===V||V instanceof Buffer||V instanceof Uint8Array),kr.fromUint8Array(V||new Uint8Array))}(i,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(S){const V=void 0===S.code?Ge.UNKNOWN:cc(S.code);return new st(V,S.message||"")}(d);t=new Vc(o,a,c,g||null)}else if("documentChange"in e){const o=e.documentChange,a=A(i,o.document.name),c=Ai(o.document.updateTime),d=o.document.createTime?Ai(o.document.createTime):$t.min(),g=new hn({mapValue:{fields:o.document.fields}}),E=wn.newFoundDocument(a,c,d,g);t=new ka(o.targetIds||[],o.removedTargetIds||[],E.key,E)}else if("documentDelete"in e){const o=e.documentDelete,a=A(i,o.document),c=o.readTime?Ai(o.readTime):$t.min(),d=wn.newNoDocument(a,c);t=new ka([],o.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const o=e.documentRemove,a=A(i,o.document);t=new ka([],o.removedTargetIds||[],a,null)}else{if(!("filter"in e))return Nt();{const o=e.filter,{count:a=0,unchangedNames:c}=o,d=new Yi(a,c);t=new eh(o.targetId,d)}}var S;return t}(this.serializer,e),o=function(c){if(!("targetChange"in c))return $t.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?$t.min():d.readTime?Ai(d.readTime):$t.min()}(e);return this.listener.E_(t,o)}d_(e){const t={};t.database=Z(this.serializer),t.addTarget=function(c,d){let g;const E=d.target;if(g=rs(E)?{documents:Hi(c,E)}:{query:ca(c,E)._t},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=hg(c,d.resumeToken);const S=nh(c,d.expectedCount);null!==S&&(g.expectedCount=S)}else if(d.snapshotVersion.compareTo($t.min())>0){g.readTime=hu(c,d.snapshotVersion.toTimestamp());const S=nh(c,d.expectedCount);null!==S&&(g.expectedCount=S)}return g}(this.serializer,e);const o=function rh(i,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Nt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.__(t)}A_(e){const t={};t.database=Z(this.serializer),t.removeTarget=e,this.__(t)}}class Vg extends iy{constructor(e,t,o,a,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,a,d),this.serializer=c}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(e,t){return this.connection.Lo("Write",e,t)}T_(e){return Kt(!!e.streamToken),this.lastStreamToken=e.streamToken,Kt(!e.writeResults||0===e.writeResults.length),this.listener.m_()}onNext(e){Kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.e_.reset();const t=function la(i,e){return i&&i.length>0?(Kt(void 0!==e),i.map(t=>function(a,c){let d=Ai(a.updateTime?a.updateTime:c);return d.isEqual($t.min())&&(d=Ai(c)),new dg(d,a.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=Ai(e.commitTime);return this.listener.f_(o,t)}g_(){const e={};e.database=Z(this.serializer),this.__(e)}V_(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>_n(this.serializer,o))};this.__(t)}}class ft extends class{}{constructor(e,t,o,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=a,this.p_=!1}y_(){if(this.p_)throw new st(Ge.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(e,t,o,a){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Fo(e,Ef(t,o),a,c,d)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new st(Ge.UNKNOWN,c.toString())})}No(e,t,o,a,c){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.No(e,Ef(t,o),a,d,g,c)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new st(Ge.UNKNOWN,d.toString())})}terminate(){this.p_=!0,this.connection.terminate()}}class yr{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){0===this.w_&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(e){"Online"===this.state?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.M_(),this.w_=0,"Online"===e&&(this.b_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}v_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(Pn(t),this.b_=!1):yt("OnlineStateTracker",t)}M_(){null!==this.S_&&(this.S_.cancel(),this.S_=null)}}class oy{constructor(e,t,o,a,c){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=c,this.B_.oo(g=>{o.enqueueAndForget((0,we.A)(function*(){var E;ss(d)&&(yt("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,we.A)(function*(V){const K=xt(V);K.N_.add(4),yield bu(K),K.k_.set("Unknown"),K.N_.delete(4),yield da(K)}),function S(V){return E.apply(this,arguments)})(d))}))}),this.k_=new yr(o,a)}}function da(i){return $r.apply(this,arguments)}function $r(){return($r=(0,we.A)(function*(i){if(ss(i))for(const e of i.L_)yield e(!0)})).apply(this,arguments)}function bu(i){return Au.apply(this,arguments)}function Au(){return(Au=(0,we.A)(function*(i){for(const e of i.L_)yield e(!1)})).apply(this,arguments)}function ha(i,e){const t=xt(i);t.O_.has(e.targetId)||(t.O_.set(e.targetId,e),sy(t)?Uf(t):Du(t).n_()&&$o(t,e))}function vc(i,e){const t=xt(i),o=Du(t);t.O_.delete(e),o.n_()&&Vf(t,e),0===t.O_.size&&(o.n_()?o.s_():ss(t)&&t.k_.set("Unknown"))}function $o(i,e){if(i.q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($t.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Du(i).d_(e)}function Vf(i,e){i.q_.xe(e),Du(i).A_(e)}function Uf(i){i.q_=new du({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>i.O_.get(e)||null,tt:()=>i.datastore.serializer.databaseId}),Du(i).start(),i.k_.D_()}function sy(i){return ss(i)&&!Du(i).t_()&&i.O_.size>0}function ss(i){return 0===xt(i).N_.size}function Pu(i){i.q_=void 0}function Ug(i){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,we.A)(function*(i){i.k_.set("Online")})).apply(this,arguments)}function Ec(i){return ud.apply(this,arguments)}function ud(){return(ud=(0,we.A)(function*(i){i.O_.forEach((e,t)=>{$o(i,e)})})).apply(this,arguments)}function sl(i,e){return al.apply(this,arguments)}function al(){return(al=(0,we.A)(function*(i,e){Pu(i),sy(i)?(i.k_.F_(e),Uf(i)):i.k_.set("Unknown")})).apply(this,arguments)}function XE(i,e,t){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,we.A)(function*(i,e,t){if(i.k_.set("Online"),e instanceof Vc&&2===e.state&&e.cause)try{yield(o=(0,we.A)(function*(c,d){const g=d.cause;for(const E of d.targetIds)c.O_.has(E)&&(yield c.remoteSyncer.rejectListen(E,g),c.O_.delete(E),c.q_.removeTarget(E))}),function a(c,d){return o.apply(this,arguments)})(i,e)}catch(o){yt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield v(i,o)}else if(e instanceof ka?i.q_.Ke(e):e instanceof eh?i.q_.He(e):i.q_.We(e),!t.isEqual($t.min()))try{const o=yield ty(i.localStore);t.compareTo(o)>=0&&(yield function(c,d){const g=c.q_.rt(d);return g.targetChanges.forEach((E,S)=>{if(E.resumeToken.approximateByteSize()>0){const V=c.O_.get(S);V&&c.O_.set(S,V.withResumeToken(E.resumeToken,d))}}),g.targetMismatches.forEach((E,S)=>{const V=c.O_.get(E);if(!V)return;c.O_.set(E,V.withResumeToken(kr.EMPTY_BYTE_STRING,V.snapshotVersion)),Vf(c,E);const K=new vs(V.target,E,S,V.sequenceNumber);$o(c,K)}),c.remoteSyncer.applyRemoteEvent(g)}(i,t))}catch(o){yt("RemoteStore","Failed to raise snapshot:",o),yield v(i,o)}var o}),Bf.apply(this,arguments)}function v(i,e,t){return f.apply(this,arguments)}function f(){return(f=(0,we.A)(function*(i,e,t){if(!Ko(e))throw e;i.N_.add(1),yield bu(i),i.k_.set("Offline"),t||(t=()=>ty(i.localStore)),i.asyncQueue.enqueueRetryable((0,we.A)(function*(){yt("RemoteStore","Retrying IndexedDB access"),yield t(),i.N_.delete(1),yield da(i)}))})).apply(this,arguments)}function p(i,e){return e().catch(t=>v(i,t,e))}function I(i){return L.apply(this,arguments)}function L(){return(L=(0,we.A)(function*(i){const e=xt(i),t=cl(e);let o=e.x_.length>0?e.x_[e.x_.length-1].batchId:-1;for(;X(e);)try{const a=yield Sg(e.localStore,o);if(null===a){0===e.x_.length&&t.s_();break}o=a.batchId,ye(e,a)}catch(a){yield v(e,a)}Le(e)&&pt(e)})).apply(this,arguments)}function X(i){return ss(i)&&i.x_.length<10}function ye(i,e){i.x_.push(e);const t=cl(i);t.n_()&&t.R_&&t.V_(e.mutations)}function Le(i){return ss(i)&&!cl(i).t_()&&i.x_.length>0}function pt(i){cl(i).start()}function Jt(i){return dn.apply(this,arguments)}function dn(){return(dn=(0,we.A)(function*(i){cl(i).g_()})).apply(this,arguments)}function pn(i){return gi.apply(this,arguments)}function gi(){return(gi=(0,we.A)(function*(i){const e=cl(i);for(const t of i.x_)e.V_(t.mutations)})).apply(this,arguments)}function fa(i,e,t){return dd.apply(this,arguments)}function dd(){return(dd=(0,we.A)(function*(i,e,t){const o=i.x_.shift(),a=_s.from(o,e,t);yield p(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),yield I(i)})).apply(this,arguments)}function as(i,e){return ll.apply(this,arguments)}function ll(){return ll=(0,we.A)(function*(i,e){var t;e&&cl(i).R_&&(yield(t=(0,we.A)(function*(a,c){if(zs(g=c.code)&&g!==Ge.ABORTED){const d=a.x_.shift();cl(a).i_(),yield p(a,()=>a.remoteSyncer.rejectFailedWrite(d.batchId,c)),yield I(a)}var g}),function o(a,c){return t.apply(this,arguments)})(i,e)),Le(i)&&pt(i)}),ll.apply(this,arguments)}function si(i,e){return jf.apply(this,arguments)}function jf(){return(jf=(0,we.A)(function*(i,e){const t=xt(i);t.asyncQueue.verifyOperationInProgress(),yt("RemoteStore","RemoteStore received new credentials");const o=ss(t);t.N_.add(3),yield bu(t),o&&t.k_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.N_.delete(3),yield da(t)})).apply(this,arguments)}function mh(i,e){return $f.apply(this,arguments)}function $f(){return($f=(0,we.A)(function*(i,e){const t=xt(i);e?(t.N_.delete(2),yield da(t)):e||(t.N_.add(2),yield bu(t),t.k_.set("Unknown"))})).apply(this,arguments)}function Du(i){return i.Q_||(i.Q_=function(t,o,a){const c=xt(t);return c.y_(),new Lg(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{To:Ug.bind(null,i),Ao:Ec.bind(null,i),Vo:sl.bind(null,i),E_:XE.bind(null,i)}),i.L_.push(function(){var e=(0,we.A)(function*(t){t?(i.Q_.i_(),sy(i)?Uf(i):i.k_.set("Unknown")):(yield i.Q_.stop(),Pu(i))});return function(t){return e.apply(this,arguments)}}())),i.Q_}function cl(i){return i.K_||(i.K_=function(t,o,a){const c=xt(t);return c.y_(),new Vg(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{To:()=>Promise.resolve(),Ao:Jt.bind(null,i),Vo:as.bind(null,i),m_:pn.bind(null,i),f_:fa.bind(null,i)}),i.L_.push(function(){var e=(0,we.A)(function*(t){t?(i.K_.i_(),yield I(i)):(yield i.K_.stop(),i.x_.length>0&&(yt("RemoteStore",`Stopping write stream with ${i.x_.length} pending writes`),i.x_=[]))});return function(t){return e.apply(this,arguments)}}())),i.K_}class _h{constructor(e,t,o,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=a,this.removalCallback=c,this.deferred=new $n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,a,c){const d=Date.now()+o,g=new _h(e,t,d,a,c);return g.start(o),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new st(Ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hl(i,e){if(Pn("AsyncQueue",`${e}: ${i}`),Ko(i))return new st(Ge.UNAVAILABLE,`${e}: ${i}`);throw i}class ls{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Ht.comparator(t.key,o.key):(t,o)=>Ht.comparator(t.key,o.key),this.keyedMap=q(),this.sortedSet=new ur(this.comparator)}static emptySet(e){return new ls(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ls)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=o.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new ls;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class ay{constructor(){this.U_=new ur(Ht.comparator)}track(e){const t=e.doc.key,o=this.U_.get(t);o?0!==e.type&&3===o.type?this.U_=this.U_.insert(t,e):3===e.type&&1!==o.type?this.U_=this.U_.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.U_=this.U_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.U_=this.U_.remove(t):1===e.type&&2===o.type?this.U_=this.U_.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):Nt():this.U_=this.U_.insert(t,e)}W_(){const e=[];return this.U_.inorderTraversal((t,o)=>{e.push(o)}),e}}class Su{constructor(e,t,o,a,c,d,g,E,S){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=a,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=E,this.hasCachedResults=S}static fromInitialDocuments(e,t,o,a,c){const d=[];return t.forEach(g=>{d.push({type:0,doc:g})}),new Su(e,t,ls.emptySet(t),d,o,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ko(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==o[a].type||!t[a].doc.isEqual(o[a].doc))return!1;return!0}}class ly{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(e=>e.H_())}}class cy{constructor(){this.queries=uy(),this.onlineState="Unknown",this.J_=new Set}terminate(){!function(t,o){const a=xt(t),c=a.queries;a.queries=uy(),c.forEach((d,g)=>{for(const E of g.z_)E.onError(o)})}(this,new st(Ge.ABORTED,"Firestore shutting down"))}}function uy(){return new ms(i=>ac(i),ko)}function dy(i,e){return hy.apply(this,arguments)}function hy(){return(hy=(0,we.A)(function*(i,e){const t=xt(i);let o=3;const a=e.query;let c=t.queries.get(a);c?!c.j_()&&e.H_()&&(o=2):(c=new ly,o=e.H_()?0:1);try{switch(o){case 0:c.G_=yield t.onListen(a,!0);break;case 1:c.G_=yield t.onListen(a,!1);break;case 2:yield t.onFirstRemoteStoreListen(a)}}catch(d){const g=Hl(d,`Initialization of query '${Ma(e.query)}' failed`);return void e.onError(g)}t.queries.set(a,c),c.z_.push(e),e.Y_(t.onlineState),c.G_&&e.Z_(c.G_)&&jg(t)})).apply(this,arguments)}function JE(i,e){return hd.apply(this,arguments)}function hd(){return(hd=(0,we.A)(function*(i,e){const t=xt(i),o=e.query;let a=3;const c=t.queries.get(o);if(c){const d=c.z_.indexOf(e);d>=0&&(c.z_.splice(d,1),0===c.z_.length?a=e.H_()?0:1:!c.j_()&&e.H_()&&(a=2))}switch(a){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}})).apply(this,arguments)}function Bg(i,e){const t=xt(i);let o=!1;for(const a of e){const d=t.queries.get(a.query);if(d){for(const g of d.z_)g.Z_(a)&&(o=!0);d.G_=a}}o&&jg(t)}function SD(i,e,t){const o=xt(i),a=o.queries.get(e);if(a)for(const c of a.z_)c.onError(t);o.queries.delete(e)}function jg(i){i.J_.forEach(e=>{e.next()})}var ZE,Sw;(Sw=ZE||(ZE={})).X_="default",Sw.Cache="cache";class eC{constructor(e,t,o){this.query=e,this.ea=t,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=o||{}}Z_(e){if(!this.options.includeMetadataChanges){const o=[];for(const a of e.docChanges)3!==a.type&&o.push(a);e=new Su(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ta?this.ra(e)&&(this.ea.next(e),t=!0):this.ia(e,this.onlineState)&&(this.sa(e),t=!0),this.na=e,t}onError(e){this.ea.error(e)}Y_(e){this.onlineState=e;let t=!1;return this.na&&!this.ta&&this.ia(this.na,e)&&(this.sa(this.na),t=!0),t}ia(e,t){return!e.fromCache||!this.H_()||(!this.options.oa||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ra(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.na&&this.na.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}sa(e){e=Su.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ta=!0,this.ea.next(e)}H_(){return this.options.source!==ZE.Cache}}class sN{constructor(e,t){this._a=e,this.byteLength=t}aa(){return"metadata"in this._a}}class MD{constructor(e){this.serializer=e}Ts(e){return A(this.serializer,e)}Es(e){return e.metadata.exists?Se(this.serializer,e.document,!1):wn.newNoDocument(this.Ts(e.metadata.name),this.ds(e.metadata.readTime))}ds(e){return Ai(e)}}class tC{constructor(e,t,o){this.ua=e,this.localStore=t,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Hf(e)}ca(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e._a.namedQuery)this.queries.push(e._a.namedQuery);else if(e._a.documentMetadata){this.documents.push({metadata:e._a.documentMetadata}),e._a.documentMetadata.exists||++t;const o=Tn.fromString(e._a.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e._a.document&&(this.documents[this.documents.length-1].document=e._a.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}la(e){const t=new Map,o=new MD(this.serializer);for(const a of e)if(a.metadata.queries){const c=o.Ts(a.metadata.name);for(const d of a.metadata.queries){const g=(t.get(d)||on()).add(c);t.set(d,g)}}return t}complete(){var e=this;return(0,we.A)(function*(){const t=yield function Es(i,e,t,o){return Mg.apply(this,arguments)}(e.localStore,new MD(e.serializer),e.documents,e.ua.id),o=e.la(e.documents);for(const a of e.queries)yield Og(e.localStore,a,o.get(a.name));return e.progress.taskState="Success",{progress:e.progress,ha:e.collectionGroups,Pa:t}})()}}function Hf(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Mw{constructor(e){this.key=e}}class Gf{constructor(e){this.key=e}}class fy{constructor(e,t){this.query=e,this.Ia=t,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=on(),this.mutatedKeys=on(),this.da=Yd(e),this.Aa=new ls(this.da)}get Ra(){return this.Ia}Va(e,t){const o=t?t.ma:new ay,a=t?t.Aa:this.Aa;let c=t?t.mutatedKeys:this.mutatedKeys,d=a,g=!1;const E="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,S="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((V,K)=>{const ee=a.get(V),de=Un(this.query,K)?K:null,Re=!!ee&&this.mutatedKeys.has(ee.key),$e=!!de&&(de.hasLocalMutations||this.mutatedKeys.has(de.key)&&de.hasCommittedMutations);let qe=!1;ee&&de?ee.data.isEqual(de.data)?Re!==$e&&(o.track({type:3,doc:de}),qe=!0):this.fa(ee,de)||(o.track({type:2,doc:de}),qe=!0,(E&&this.da(de,E)>0||S&&this.da(de,S)<0)&&(g=!0)):!ee&&de?(o.track({type:0,doc:de}),qe=!0):ee&&!de&&(o.track({type:1,doc:ee}),qe=!0,(E||S)&&(g=!0)),qe&&(de?(d=d.add(de),c=$e?c.add(V):c.delete(V)):(d=d.delete(V),c=c.delete(V)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const V="F"===this.query.limitType?d.last():d.first();d=d.delete(V.key),c=c.delete(V.key),o.track({type:1,doc:V})}return{Aa:d,ma:o,ts:g,mutatedKeys:c}}fa(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,a){const c=this.Aa;this.Aa=e.Aa,this.mutatedKeys=e.mutatedKeys;const d=e.ma.W_();d.sort((V,K)=>function(de,Re){const $e=qe=>{switch(qe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nt()}};return $e(de)-$e(Re)}(V.type,K.type)||this.da(V.doc,K.doc)),this.ga(o),a=null!=a&&a;const g=t&&!a?this.pa():[],E=0===this.Ea.size&&this.current&&!a?1:0,S=E!==this.Ta;return this.Ta=E,0!==d.length||S?{snapshot:new Su(this.query,e.Aa,c,d,e.mutatedKeys,0===E,S,!1,!!o&&o.resumeToken.approximateByteSize()>0),ya:g}:{ya:g}}Y_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new ay,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(e){return!this.Ia.has(e)&&!!this.Aa.has(e)&&!this.Aa.get(e).hasLocalMutations}ga(e){e&&(e.addedDocuments.forEach(t=>this.Ia=this.Ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ia=this.Ia.delete(t)),this.current=e.current)}pa(){if(!this.current)return[];const e=this.Ea;this.Ea=on(),this.Aa.forEach(o=>{this.wa(o.key)&&(this.Ea=this.Ea.add(o.key))});const t=[];return e.forEach(o=>{this.Ea.has(o)||t.push(new Gf(o))}),this.Ea.forEach(o=>{e.has(o)||t.push(new Mw(o))}),t}Sa(e){this.Ia=e.Is,this.Ea=on();const t=this.Va(e.documents);return this.applyChanges(t,!0)}ba(){return Su.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,0===this.Ta,this.hasCachedResults)}}class py{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class aN{constructor(e){this.key=e,this.Da=!1}}class Ow{constructor(e,t,o,a,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Ca={},this.va=new ms(g=>ac(g),ko),this.Fa=new Map,this.Ma=new Set,this.xa=new ur(Ht.comparator),this.Oa=new Map,this.Na=new wg,this.La={},this.Ba=new Map,this.ka=Bl.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return!0===this.qa}}function Rw(i,e){return nC.apply(this,arguments)}function nC(){return(nC=(0,we.A)(function*(i,e,t=!0){const o=Kg(i);let a;const c=o.va.get(e);return c?(o.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.ba()):a=yield $g(o,e,t,!0),a})).apply(this,arguments)}function Wc(i,e){return rC.apply(this,arguments)}function rC(){return(rC=(0,we.A)(function*(i,e){const t=Kg(i);yield $g(t,e,!0,!1)})).apply(this,arguments)}function $g(i,e,t,o){return Hg.apply(this,arguments)}function Hg(){return(Hg=(0,we.A)(function*(i,e,t,o){const a=yield vr(i.localStore,Qi(e)),c=a.targetId,d=t?i.sharedClientState.addLocalQueryTarget(c):"not-current";let g;return o&&(g=yield gy(i,e,c,"current"===d,a.resumeToken)),i.isPrimaryClient&&t&&ha(i.remoteStore,a),g})).apply(this,arguments)}function gy(i,e,t,o,a){return zf.apply(this,arguments)}function zf(){return zf=(0,we.A)(function*(i,e,t,o,a){i.Qa=(K,ee,de)=>{return(Re=(0,we.A)(function*(qe,kt,Xt,St){let gn=kt.view.Va(Xt);gn.ts&&(gn=yield go(qe.localStore,kt.query,!1).then(({documents:me})=>kt.view.Va(me,gn)));const Yn=St&&St.targetChanges.get(kt.targetId),er=St&&null!=St.targetMismatches.get(kt.targetId),xe=kt.view.applyChanges(gn,qe.isPrimaryClient,Yn,er);return aC(qe,kt.targetId,xe.ya),xe.snapshot}),function $e(qe,kt,Xt,St){return Re.apply(this,arguments)})(i,K,ee,de);var Re};const c=yield go(i.localStore,e,!0),d=new fy(e,c.Is),g=d.Va(c.documents),E=Lc.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState,a),S=d.applyChanges(g,i.isPrimaryClient,E);aC(i,t,S.ya);const V=new py(e,t,d);return i.va.set(e,V),i.Fa.has(t)?i.Fa.get(t).push(e):i.Fa.set(t,[e]),S.snapshot}),zf.apply(this,arguments)}function iC(i,e,t){return oC.apply(this,arguments)}function oC(){return(oC=(0,we.A)(function*(i,e,t){const o=xt(i),a=o.va.get(e),c=o.Fa.get(a.targetId);if(c.length>1)return o.Fa.set(a.targetId,c.filter(d=>!ko(d,e))),void o.va.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(a.targetId),o.sharedClientState.isActiveQueryTarget(a.targetId)||(yield Gc(o.localStore,a.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(a.targetId),t&&vc(o.remoteStore,a.targetId),yh(o,a.targetId)}).catch(nr))):(yh(o,a.targetId),yield Gc(o.localStore,a.targetId,!0))})).apply(this,arguments)}function Nw(i,e){return my.apply(this,arguments)}function my(){return(my=(0,we.A)(function*(i,e){const t=xt(i),o=t.va.get(e),a=t.Fa.get(o.targetId);t.isPrimaryClient&&1===a.length&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),vc(t.remoteStore,o.targetId))})).apply(this,arguments)}function _y(){return(_y=(0,we.A)(function*(i,e,t){const o=gd(i);try{const a=yield function(d,g){const E=xt(d),S=On.now(),V=g.reduce((de,Re)=>de.add(Re.key),on());let K,ee;return E.persistence.runTransaction("Locally write mutations","readwrite",de=>{let Re=Fo(),$e=on();return E.us.getEntries(de,V).next(qe=>{Re=qe,Re.forEach((kt,Xt)=>{Xt.isValidDocument()||($e=$e.add(kt))})}).next(()=>E.localDocuments.getOverlayedDocuments(de,Re)).next(qe=>{K=qe;const kt=[];for(const Xt of g){const St=fo(Xt,K.get(Xt.key).overlayedDocument);null!=St&&kt.push(new sa(Xt.key,St,In(St.value.mapValue),oi.exists(!0)))}return E.mutationQueue.addMutationBatch(de,S,kt,g)}).next(qe=>{ee=qe;const kt=qe.applyToLocalDocumentSet(K,$e);return E.documentOverlayCache.saveOverlays(de,qe.batchId,kt)})}).then(()=>({batchId:ee.batchId,changes:k(K)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(a.batchId),function(d,g,E){let S=d.La[d.currentUser.toKey()];S||(S=new ur(vt)),S=S.insert(g,E),d.La[d.currentUser.toKey()]=S}(o,a.batchId,t),yield Gl(o,a.changes),yield I(o.remoteStore)}catch(a){const c=Hl(a,"Failed to persist write");t.reject(c)}})).apply(this,arguments)}function kw(i,e){return Wf.apply(this,arguments)}function Wf(){return(Wf=(0,we.A)(function*(i,e){const t=xt(i);try{const o=yield function jl(i,e){const t=xt(i),o=e.snapshotVersion;let a=t.ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=t.us.newChangeBuffer({trackRemovals:!0});a=t.ss;const g=[];e.targetChanges.forEach((V,K)=>{const ee=a.get(K);if(!ee)return;g.push(t.$r.removeMatchingKeys(c,V.removedDocuments,K).next(()=>t.$r.addMatchingKeys(c,V.addedDocuments,K)));let de=ee.withSequenceNumber(c.currentSequenceNumber);var $e,qe,kt;null!==e.targetMismatches.get(K)?de=de.withResumeToken(kr.EMPTY_BYTE_STRING,$t.min()).withLastLimboFreeSnapshotVersion($t.min()):V.resumeToken.approximateByteSize()>0&&(de=de.withResumeToken(V.resumeToken,o)),a=a.insert(K,de),qe=de,kt=V,(0===($e=ee).resumeToken.approximateByteSize()||qe.snapshotVersion.toMicroseconds()-$e.snapshotVersion.toMicroseconds()>=3e8||kt.addedDocuments.size+kt.modifiedDocuments.size+kt.removedDocuments.size>0)&&g.push(t.$r.updateTargetData(c,de))});let E=Fo(),S=on();if(e.documentUpdates.forEach(V=>{e.resolvedLimboDocuments.has(V)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(c,V))}),g.push(Dg(c,d,e.documentUpdates).next(V=>{E=V.hs,S=V.Ps})),!o.isEqual($t.min())){const V=t.$r.getLastRemoteSnapshotVersion(c).next(K=>t.$r.setTargetsMetadata(c,c.currentSequenceNumber,o));g.push(V)}return ke.waitFor(g).next(()=>d.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,E,S)).next(()=>E)}).then(c=>(t.ss=a,c))}(t.localStore,e);e.targetChanges.forEach((a,c)=>{const d=t.Oa.get(c);d&&(Kt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?d.Da=!0:a.modifiedDocuments.size>0?Kt(d.Da):a.removedDocuments.size>0&&(Kt(d.Da),d.Da=!1))}),yield Gl(t,o,e)}catch(o){yield nr(o)}})).apply(this,arguments)}function fd(i,e,t){const o=xt(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const a=[];o.va.forEach((c,d)=>{const g=d.view.Y_(e);g.snapshot&&a.push(g.snapshot)}),function(d,g){const E=xt(d);E.onlineState=g;let S=!1;E.queries.forEach((V,K)=>{for(const ee of K.z_)ee.Y_(g)&&(S=!0)}),S&&jg(E)}(o.eventManager,e),a.length&&o.Ca.E_(a),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function OD(i,e,t){return yy.apply(this,arguments)}function yy(){return(yy=(0,we.A)(function*(i,e,t){const o=xt(i);o.sharedClientState.updateQueryState(e,"rejected",t);const a=o.Oa.get(e),c=a&&a.key;if(c){let d=new ur(Ht.comparator);d=d.insert(c,wn.newNoDocument(c,$t.min()));const g=on().add(c),E=new xl($t.min(),new Map,new ur(vt),d,g);yield kw(o,E),o.xa=o.xa.remove(c),o.Oa.delete(e),Wg(o)}else yield Gc(o.localStore,e,!1).then(()=>yh(o,e,t)).catch(nr)})).apply(this,arguments)}function Fw(i,e){return pd.apply(this,arguments)}function pd(){return(pd=(0,we.A)(function*(i,e){const t=xt(i),o=e.batch.batchId;try{const a=yield function Pg(i,e){const t=xt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const a=e.batch.keys(),c=t.us.newChangeBuffer({trackRemovals:!0});return function(g,E,S,V){const K=S.batch,ee=K.keys();let de=ke.resolve();return ee.forEach(Re=>{de=de.next(()=>V.getEntry(E,Re)).next($e=>{const qe=S.docVersions.get(Re);Kt(null!==qe),$e.version.compareTo(qe)<0&&(K.applyToRemoteDocument($e,S),$e.isValidDocument()&&($e.setReadTime(S.commitVersion),V.addEntry($e)))})}),de.next(()=>g.mutationQueue.removeMutationBatch(E,K))}(t,o,e,c).next(()=>c.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(g){let E=on();for(let S=0;S<g.mutationResults.length;++S)g.mutationResults[S].transformResults.length>0&&(E=E.add(g.batch.mutations[S].key));return E}(e))).next(()=>t.localDocuments.getDocuments(o,a))})}(t.localStore,e);sC(t,o,null),Gg(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield Gl(t,a)}catch(a){yield nr(a)}})).apply(this,arguments)}function Kf(i,e,t){return Do.apply(this,arguments)}function Do(){return(Do=(0,we.A)(function*(i,e,t){const o=xt(i);try{const a=yield function(d,g){const E=xt(d);return E.persistence.runTransaction("Reject batch","readwrite-primary",S=>{let V;return E.mutationQueue.lookupMutationBatch(S,g).next(K=>(Kt(null!==K),V=K.keys(),E.mutationQueue.removeMutationBatch(S,K))).next(()=>E.mutationQueue.performConsistencyCheck(S)).next(()=>E.documentOverlayCache.removeOverlaysForBatchId(S,V,g)).next(()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(S,V)).next(()=>E.localDocuments.getDocuments(S,V))})}(o.localStore,e);sC(o,e,t),Gg(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield Gl(o,a)}catch(a){yield nr(a)}})).apply(this,arguments)}function vy(){return(vy=(0,we.A)(function*(i,e){const t=xt(i);ss(t.remoteStore)||yt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(d){const g=xt(d);return g.persistence.runTransaction("Get highest unacknowledged batch id","readonly",E=>g.mutationQueue.getHighestUnacknowledgedBatchId(E))}(t.localStore);if(-1===o)return void e.resolve();const a=t.Ba.get(o)||[];a.push(e),t.Ba.set(o,a)}catch(o){const a=Hl(o,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}})).apply(this,arguments)}function Gg(i,e){(i.Ba.get(e)||[]).forEach(t=>{t.resolve()}),i.Ba.delete(e)}function sC(i,e,t){const o=xt(i);let a=o.La[o.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),o.La[o.currentUser.toKey()]=a}}function yh(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.Fa.get(e))i.va.delete(o),t&&i.Ca.Ka(o,t);i.Fa.delete(e),i.isPrimaryClient&&i.Na.mr(e).forEach(o=>{i.Na.containsKey(o)||zg(i,o)})}function zg(i,e){i.Ma.delete(e.path.canonicalString());const t=i.xa.get(e);null!==t&&(vc(i.remoteStore,t),i.xa=i.xa.remove(e),i.Oa.delete(t),Wg(i))}function aC(i,e,t){for(const o of t)o instanceof Mw?(i.Na.addReference(o.key,e),Lw(i,o)):o instanceof Gf?(yt("SyncEngine","Document no longer in limbo: "+o.key),i.Na.removeReference(o.key,e),i.Na.containsKey(o.key)||zg(i,o.key)):Nt()}function Lw(i,e){const t=e.key,o=t.path.canonicalString();i.xa.get(t)||i.Ma.has(o)||(yt("SyncEngine","New document in limbo: "+t),i.Ma.add(o),Wg(i))}function Wg(i){for(;i.Ma.size>0&&i.xa.size<i.maxConcurrentLimboResolutions;){const e=i.Ma.values().next().value;i.Ma.delete(e);const t=new Ht(Tn.fromString(e)),o=i.ka.next();i.Oa.set(o,new aN(t)),i.xa=i.xa.insert(t,o),ha(i.remoteStore,new vs(Qi(sc(t.path)),o,"TargetPurposeLimboResolution",Sr.oe))}}function Gl(i,e,t){return Ey.apply(this,arguments)}function Ey(){return Ey=(0,we.A)(function*(i,e,t){const o=xt(i),a=[],c=[],d=[];var g;o.va.isEmpty()||(o.va.forEach((g,E)=>{d.push(o.Qa(E,e,t).then(S=>{var V;if((S||t)&&o.isPrimaryClient){const K=S?!S.fromCache:null===(V=t?.targetChanges.get(E.targetId))||void 0===V?void 0:V.current;o.sharedClientState.updateQueryState(E.targetId,K?"current":"not-current")}if(S){a.push(S);const K=dh.Ui(E.targetId,S);c.push(K)}}))}),yield Promise.all(d),o.Ca.E_(a),yield(g=(0,we.A)(function*(S,V){const K=xt(S);try{yield K.persistence.runTransaction("notifyLocalViewChanges","readwrite",ee=>ke.forEach(V,de=>ke.forEach(de.Ki,Re=>K.persistence.referenceDelegate.addReference(ee,de.targetId,Re)).next(()=>ke.forEach(de.$i,Re=>K.persistence.referenceDelegate.removeReference(ee,de.targetId,Re)))))}catch(ee){if(!Ko(ee))throw ee;yt("LocalStore","Failed to update sequence numbers: "+ee)}for(const ee of V){const de=ee.targetId;if(!ee.fromCache){const Re=K.ss.get(de),qe=Re.withLastLimboFreeSnapshotVersion(Re.snapshotVersion);K.ss=K.ss.insert(de,qe)}}}),function E(S,V){return g.apply(this,arguments)})(o.localStore,c))}),Ey.apply(this,arguments)}function ND(i,e){return lC.apply(this,arguments)}function lC(){return(lC=(0,we.A)(function*(i,e){const t=xt(i);if(!t.currentUser.isEqual(e)){yt("SyncEngine","User change. New user:",e.toKey());const o=yield hh(t.localStore,e);t.currentUser=e,(c=t).Ba.forEach(g=>{g.forEach(E=>{E.reject(new st(Ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Ba.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Gl(t,o.ls)}var c})).apply(this,arguments)}function xD(i,e){const t=xt(i),o=t.Oa.get(e);if(o&&o.Da)return on().add(o.key);{let a=on();const c=t.Fa.get(e);if(!c)return a;for(const d of c){const g=t.va.get(d);a=a.unionWith(g.view.Ra)}return a}}function Vw(i,e){return cC.apply(this,arguments)}function cC(){return(cC=(0,we.A)(function*(i,e){const t=xt(i),o=yield go(t.localStore,e.query,!0),a=e.view.Sa(o);return t.isPrimaryClient&&aC(t,e.targetId,a.ya),a})).apply(this,arguments)}function Uw(i,e){return uC.apply(this,arguments)}function uC(){return(uC=(0,we.A)(function*(i,e){const t=xt(i);return ad(t.localStore,e).then(o=>Gl(t,o))})).apply(this,arguments)}function kD(i,e,t,o){return Bw.apply(this,arguments)}function Bw(){return(Bw=(0,we.A)(function*(i,e,t,o){const a=xt(i),c=yield function(g,E){const S=xt(g),V=xt(S.mutationQueue);return S.persistence.runTransaction("Lookup mutation documents","readonly",K=>V.Fn(K,E).next(ee=>ee?S.localDocuments.getDocuments(K,ee):ke.resolve(null)))}(a.localStore,e);var E;null!==c?("pending"===t?yield I(a.remoteStore):"acknowledged"===t||"rejected"===t?(sC(a,e,o||null),Gg(a,e),E=e,xt(xt(a.localStore).mutationQueue).xn(E)):Nt(),yield Gl(a,c)):yt("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function Cy(){return(Cy=(0,we.A)(function*(i,e){const t=xt(i);if(Kg(t),gd(t),!0===e&&!0!==t.qa){const o=t.sharedClientState.getAllActiveQueryTargets(),a=yield cs(t,o.toArray());t.qa=!0,yield mh(t.remoteStore,!0);for(const c of a)ha(t.remoteStore,c)}else if(!1===e&&!1!==t.qa){const o=[];let a=Promise.resolve();t.Fa.forEach((c,d)=>{t.sharedClientState.isLocalQueryTarget(d)?o.push(d):a=a.then(()=>(yh(t,d),Gc(t.localStore,d,!0))),vc(t.remoteStore,d)}),yield a,yield cs(t,o),function(d){const g=xt(d);g.Oa.forEach((E,S)=>{vc(g.remoteStore,S)}),g.Na.gr(),g.Oa=new Map,g.xa=new ur(Ht.comparator)}(t),t.qa=!1,yield mh(t.remoteStore,!1)}})).apply(this,arguments)}function cs(i,e,t){return $w.apply(this,arguments)}function $w(){return($w=(0,we.A)(function*(i,e,t){const o=xt(i),a=[],c=[];for(const d of e){let g;const E=o.Fa.get(d);if(E&&0!==E.length){g=yield vr(o.localStore,Qi(E[0]));for(const S of E){const V=o.va.get(S),K=yield Vw(o,V);K.snapshot&&c.push(K.snapshot)}}else{const S=yield Ff(o.localStore,d);g=yield vr(o.localStore,S),yield gy(o,Hw(S),d,!1,g.resumeToken)}a.push(g)}return o.Ca.E_(c),a})).apply(this,arguments)}function Hw(i){return Pl(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function lN(i){return t=xt(i).localStore,xt(xt(t).persistence).qi();var t}function Gw(i,e,t,o){return zw.apply(this,arguments)}function zw(){return(zw=(0,we.A)(function*(i,e,t,o){const a=xt(i);if(a.qa)return void yt("SyncEngine","Ignoring unexpected query state notification.");const c=a.Fa.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const d=yield ad(a.localStore,Ar(c[0])),g=xl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,kr.EMPTY_BYTE_STRING);yield Gl(a,d,g);break}case"rejected":yield Gc(a.localStore,e,!0),yh(a,e,o);break;default:Nt()}})).apply(this,arguments)}function dC(i,e,t){return ul.apply(this,arguments)}function ul(){return(ul=(0,we.A)(function*(i,e,t){const o=Kg(i);if(o.qa){for(const a of e){if(o.Fa.has(a)&&o.sharedClientState.isActiveQueryTarget(a)){yt("SyncEngine","Adding an already active target "+a);continue}const c=yield Ff(o.localStore,a),d=yield vr(o.localStore,c);yield gy(o,Hw(c),d.targetId,!1,d.resumeToken),ha(o.remoteStore,d)}for(const a of t)o.Fa.has(a)&&(yield Gc(o.localStore,a,!1).then(()=>{vc(o.remoteStore,a),yh(o,a)}).catch(nr))}})).apply(this,arguments)}function Kg(i){const e=xt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=kw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OD.bind(null,e),e.Ca.E_=Bg.bind(null,e.eventManager),e.Ca.Ka=SD.bind(null,e.eventManager),e}function gd(i){const e=xt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kf.bind(null,e),e}class qf{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.A)(function*(){t.serializer=yc(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return bg(this.persistence,new kf,e.initialUser,this.serializer)}createPersistence(e){return new Y_(Tg.Yr,this.serializer)}createSharedClientState(e){return new zc}terminate(){var e=this;return(0,we.A)(function*(){var t,o;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(o=e.indexBackfillerScheduler)||void 0===o||o.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Kw extends qf{constructor(e,t,o){super(),this.Ua=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,we.A)(function*(){yield t().call(o,e),yield o.Ua.initialize(o,e),yield gd(o.Ua.syncEngine),yield I(o.Ua.remoteStore),yield o.persistence.pi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return bg(this.persistence,new kf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new $c(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const o=new cr(t,this.persistence);return new Qo(e.asyncQueue,o)}createPersistence(e){const t=sd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?ki.withCacheSize(this.cacheSizeBytes):ki.DEFAULT;return new Z_(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,Fg(),Xi(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new zc}}class LD extends Kw{constructor(e,t){super(e,t,!1),this.Ua=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,we.A)(function*(){yield t().call(o,e);const a=o.Ua.syncEngine;o.sharedClientState instanceof ph&&(o.sharedClientState.syncEngine={eo:kD.bind(null,a),no:Gw.bind(null,a),ro:dC.bind(null,a),qi:lN.bind(null,a),Xs:Uw.bind(null,a)},yield o.sharedClientState.start()),yield o.persistence.pi(function(){var c=(0,we.A)(function*(d){yield function jw(i,e){return Cy.apply(this,arguments)}(o.Ua.syncEngine,d),o.gcScheduler&&(d&&!o.gcScheduler.started?o.gcScheduler.start():d||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(d&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():d||o.indexBackfillerScheduler.stop())});return function(d){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Fg();if(!ph.D(t))throw new st(Ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=sd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ph(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class qg{initialize(e,t){var o=this;return(0,we.A)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=a=>fd(o.syncEngine,a,1),o.remoteStore.remoteSyncer.handleCredentialChange=ND.bind(null,o.syncEngine),yield mh(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new cy}createDatastore(e){const t=yc(e.databaseInfo.databaseId),o=new kg(e.databaseInfo);return new ft(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return o=this.localStore,a=this.datastore,c=e.asyncQueue,d=t=>fd(this.syncEngine,t,0),g=gh.D()?new gh:new Zn,new oy(o,a,c,d,g);var o,a,c,d,g}createSyncEngine(e,t){return function(a,c,d,g,E,S,V){const K=new Ow(a,c,d,g,E,S);return V&&(K.qa=!0),K}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,we.A)(function*(){var t,o,a;yield(a=(0,we.A)(function*(d){const g=xt(d);yt("RemoteStore","RemoteStore shutting down."),g.N_.add(5),yield bu(g),g.B_.shutdown(),g.k_.set("Unknown")}),function c(d){return a.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate(),null===(o=e.eventManager)||void 0===o||o.terminate()})()}}function VD(i,e=10240){let t=0;return{read:()=>(0,we.A)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,we.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class hC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Wa(this.observer.next,e)}error(e){this.observer.error?this.Wa(this.observer.error,e):Pn("Uncaught Error in snapshot listener:",e.toString())}Ga(){this.muted=!0}Wa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class UD{constructor(e,t){this.za=e,this.serializer=t,this.metadata=new $n,this.buffer=new Uint8Array,this.ja=new TextDecoder("utf-8"),this.Ha().then(o=>{o&&o.aa()?this.metadata.resolve(o._a.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?._a)}`))},o=>this.metadata.reject(o))}close(){return this.za.cancel()}getMetadata(){var e=this;return(0,we.A)(function*(){return e.metadata.promise})()}$a(){var e=this;return(0,we.A)(function*(){return yield e.getMetadata(),e.Ha()})()}Ha(){var e=this;return(0,we.A)(function*(){const t=yield e.Ja();if(null===t)return null;const o=e.ja.decode(t),a=Number(o);isNaN(a)&&e.Ya(`length string (${o}) is not valid number`);const c=yield e.Za(a);return new sN(JSON.parse(c),t.length+a)})()}Xa(){return this.buffer.findIndex(e=>123===e)}Ja(){var e=this;return(0,we.A)(function*(){for(;e.Xa()<0&&!(yield e.eu()););if(0===e.buffer.length)return null;const t=e.Xa();t<0&&e.Ya("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Za(e){var t=this;return(0,we.A)(function*(){for(;t.buffer.length<e;)(yield t.eu())&&t.Ya("Reached the end of bundle when more is expected.");const o=t.ja.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Ya(e){throw this.za.cancel(),new Error(`Invalid bundle format: ${e}`)}eu(){var e=this;return(0,we.A)(function*(){const t=yield e.za.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class Qf{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new st(Ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const o=yield(a=(0,we.A)(function*(d,g){const E=xt(d),S={documents:g.map(de=>O(E.serializer,de))},V=yield E.No("BatchGetDocuments",E.serializer.databaseId,Tn.emptyPath(),S,g.length),K=new Map;V.forEach(de=>{const Re=function Rt(i,e){return"found"in e?function(o,a){Kt(!!a.found);const c=A(o,a.found.name),d=Ai(a.found.updateTime),g=a.found.createTime?Ai(a.found.createTime):$t.min(),E=new hn({mapValue:{fields:a.found.fields}});return wn.newFoundDocument(c,d,g,E)}(i,e):"missing"in e?function(o,a){Kt(!!a.missing),Kt(!!a.readTime);const c=A(o,a.missing),d=Ai(a.readTime);return wn.newNoDocument(c,d)}(i,e):Nt()}(E.serializer,de);K.set(Re.key.toString(),Re)});const ee=[];return g.forEach(de=>{const Re=K.get(de.toString());Kt(!!Re),ee.push(Re)}),ee}),function c(d,g){return a.apply(this,arguments)})(t.datastore,e);var a;return o.forEach(a=>t.recordVersion(a)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new lc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,a)=>{const c=Ht.fromPath(a);e.mutations.push(new Nl(c,e.precondition(c)))}),yield(o=(0,we.A)(function*(c,d){const g=xt(c),E={writes:d.map(S=>_n(g.serializer,S))};yield g.Fo("Commit",g.serializer.databaseId,Tn.emptyPath(),E)}),function a(c,d){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Nt();t=$t.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new st(Ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual($t.min())?oi.exists(!1):oi.updateTime(t):oi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual($t.min()))throw new st(Ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return oi.updateTime(t)}return oi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Qg{constructor(e,t,o,a,c){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=a,this.deferred=c,this.tu=o.maxAttempts,this.e_=new Lf(this.asyncQueue,"transaction_retry")}nu(){this.tu-=1,this.ru()}ru(){var e=this;this.e_.Wo((0,we.A)(function*(){const t=new Qf(e.datastore),o=e.iu(t);o&&o.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.su(c)}))}).catch(a=>{e.su(a)})}))}iu(e){try{const t=this.updateFunction(e);return!co(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}su(e){this.tu>0&&this.ou(e)?(this.tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ru(),Promise.resolve()))):this.deferred.reject(e)}ou(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!zs(t)}return!1}}class qw{constructor(e,t,o,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=a,this.user=ir.UNAUTHENTICATED,this.clientId=Ft.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var d=(0,we.A)(function*(g){yt("FirestoreClient","Received user=",g.uid),yield c.authCredentialListener(g),c.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(o,d=>(yt("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new st(Ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new $n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const a=Hl(o,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function Iy(i,e){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,we.A)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),yt("FirestoreClient","Initializing OfflineComponentProvider");const t=i.configuration;yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var a=(0,we.A)(function*(c){o.isEqual(c)||(yield hh(e.localStore,c),o=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),Yg.apply(this,arguments)}function zl(i,e){return fC.apply(this,arguments)}function fC(){return(fC=(0,we.A)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield vh(i);yt("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,i.configuration),i.setCredentialChangeListener(o=>si(e.remoteStore,o)),i.setAppCheckTokenChangeListener((o,a)=>si(e.remoteStore,a)),i._onlineComponents=e})).apply(this,arguments)}function wy(i){return"FirebaseError"===i.name?i.code===Ge.FAILED_PRECONDITION||i.code===Ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function vh(i){return pC.apply(this,arguments)}function pC(){return(pC=(0,we.A)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){yt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Iy(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!wy(t))throw t;mr("Error using user provided cache. Falling back to memory cache: "+t),yield Iy(i,new qf)}}else yt("FirestoreClient","Using default OfflineComponentProvider"),yield Iy(i,new qf);return i._offlineComponents})).apply(this,arguments)}function Xg(i){return Ty.apply(this,arguments)}function Ty(){return(Ty=(0,we.A)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(yt("FirestoreClient","Using user provided OnlineComponentProvider"),yield zl(i,i._uninitializedComponentsProvider._online)):(yt("FirestoreClient","Using default OnlineComponentProvider"),yield zl(i,new qg))),i._onlineComponents})).apply(this,arguments)}function Jg(i){return vh(i).then(e=>e.persistence)}function Mu(i){return vh(i).then(e=>e.localStore)}function by(i){return Xg(i).then(e=>e.remoteStore)}function gC(i){return Xg(i).then(e=>e.syncEngine)}function Yf(i){return Ay.apply(this,arguments)}function Ay(){return(Ay=(0,we.A)(function*(i){const e=yield Xg(i),t=e.eventManager;return t.onListen=Rw.bind(null,e.syncEngine),t.onUnlisten=iC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Wc.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Nw.bind(null,e.syncEngine),t})).apply(this,arguments)}function Py(i,e,t={}){const o=new $n;return i.asyncQueue.enqueueAndForget((0,we.A)(function*(){return function(c,d,g,E,S){const V=new hC({next:ee=>{d.enqueueAndForget(()=>JE(c,K));const de=ee.docs.has(g);!de&&ee.fromCache?S.reject(new st(Ge.UNAVAILABLE,"Failed to get document because the client is offline.")):de&&ee.fromCache&&E&&"server"===E.source?S.reject(new st(Ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):S.resolve(ee)},error:ee=>S.reject(ee)}),K=new eC(sc(g.path),V,{includeMetadataChanges:!0,oa:!0});return dy(c,K)}(yield Yf(i),i.asyncQueue,e,t,o)})),o.promise}function Zg(i,e,t={}){const o=new $n;return i.asyncQueue.enqueueAndForget((0,we.A)(function*(){return function(c,d,g,E,S){const V=new hC({next:ee=>{d.enqueueAndForget(()=>JE(c,K)),ee.fromCache&&"server"===E.source?S.reject(new st(Ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):S.resolve(ee)},error:ee=>S.reject(ee)}),K=new eC(g,V,{includeMetadataChanges:!0,oa:!0});return dy(c,K)}(yield Yf(i),i.asyncQueue,e,t,o)})),o.promise}function mC(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const Zw=new Map;function Dy(i,e,t){if(!t)throw new st(Ge.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function eT(i,e,t,o){if(!0===e&&!0===o)throw new st(Ge.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function _C(i){if(!Ht.isDocumentKey(i))throw new st(Ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function tT(i){if(Ht.isDocumentKey(i))throw new st(Ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Sy(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(o=i).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof i?"a function":Nt()}function Ir(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new st(Ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sy(i);throw new st(Ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function nT(i,e){if(e<=0)throw new st(Ge.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class yC{constructor(e){var t,o;if(void 0===e.host){if(void 0!==e.ssl)throw new st(Ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new st(Ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=mC(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(c){if(void 0!==c.timeoutSeconds){if(isNaN(c.timeoutSeconds))throw new st(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new st(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new st(Ge.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jf{constructor(e,t,o,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yC({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new st(Ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new st(Ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yC(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new Be;switch(o.type){case"firstParty":return new se(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new st(Ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const o=Zw.get(t);o&&(yt("ComponentProvider","Removing Datastore"),Zw.delete(t),o.terminate())}(this),Promise.resolve()}}class Go{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Go(this.firestore,e,this._query)}}class Fi{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fi(this.firestore,e,this._key)}}class Cc extends Go{constructor(e,t,o){super(e,t,sc(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fi(this.firestore,null,new Ht(e))}withConverter(e){return new Cc(this.firestore,e,this._path)}}function EC(i,e,...t){if(i=(0,te.Ku)(i),Dy("collection","path",e),i instanceof Jf){const o=Tn.fromString(e,...t);return tT(o),new Cc(i,null,o)}{if(!(i instanceof Fi||i instanceof Cc))throw new st(Ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Tn.fromString(e,...t));return tT(o),new Cc(i.firestore,null,o)}}function My(i,e,...t){if(i=(0,te.Ku)(i),1===arguments.length&&(e=Ft.newId()),Dy("doc","path",e),i instanceof Jf){const o=Tn.fromString(e,...t);return _C(o),new Fi(i,null,new Ht(o))}{if(!(i instanceof Fi||i instanceof Cc))throw new st(Ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Tn.fromString(e,...t));return _C(o),new Fi(i.firestore,i instanceof Cc?i.converter:null,new Ht(o))}}function iT(i,e){return i=(0,te.Ku)(i),e=(0,te.Ku)(e),(i instanceof Fi||i instanceof Cc)&&(e instanceof Fi||e instanceof Cc)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function CC(i,e){return i=(0,te.Ku)(i),e=(0,te.Ku)(e),i instanceof Go&&e instanceof Go&&i.firestore===e.firestore&&ko(i._query,e._query)&&i.converter===e.converter}class HD{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new Lf(this,"async_queue_retry"),this.Tu=()=>{const t=Xi();t&&yt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.e_.zo()};const e=Xi();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Eu(),this.du(e)}enterRestrictedMode(e){if(!this.uu){this.uu=!0,this.Pu=e||!1;const t=Xi();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tu)}}enqueue(e){if(this.Eu(),this.uu)return new Promise(()=>{});const t=new $n;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.au.push(e),this.Au()))}Au(){var e=this;return(0,we.A)(function*(){if(0!==e.au.length){try{yield e.au[0](),e.au.shift(),e.e_.reset()}catch(t){if(!Ko(t))throw t;yt("AsyncQueue","Operation failed with retryable error: "+t)}e.au.length>0&&e.e_.Wo(()=>e.Au())}})()}du(e){const t=this._u.then(()=>(this.hu=!0,e().catch(o=>{throw this.lu=o,this.hu=!1,Pn("INTERNAL UNHANDLED ERROR: ",function(d){let g=d.message||"";return d.stack&&(g=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),g}(o)),o}).then(o=>(this.hu=!1,o))));return this._u=t,t}enqueueAfterDelay(e,t,o){this.Eu(),this.Iu.indexOf(e)>-1&&(t=0);const a=_h.createAndSchedule(this,e,t,o,c=>this.Ru(c));return this.cu.push(a),a}Eu(){this.lu&&Nt()}verifyOperationInProgress(){}Vu(){var e=this;return(0,we.A)(function*(){let t;do{t=e._u,yield t}while(t!==e._u)})()}mu(e){for(const t of this.cu)if(t.timerId===e)return!0;return!1}fu(e){return this.Vu().then(()=>{this.cu.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.cu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Vu()})}gu(e){this.Iu.push(e)}Ru(e){const t=this.cu.indexOf(e);this.cu.splice(t,1)}}function Oy(i){return function(t,o){if("object"!=typeof t||null===t)return!1;const a=t;for(const c of["next","error","complete"])if(c in a&&"function"==typeof a[c])return!0;return!1}(i)}class dN{constructor(){this._progressObserver={},this._taskCompletionResolver=new $n,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class mi extends Jf{constructor(e,t,o,a){super(e,t,o,a),this.type="firestore",this._queue=new HD,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||IC(this),this._firestoreClient.terminate()}}function Ji(i){return i._firestoreClient||IC(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function IC(i){var e,t,o;const a=i._freezeSettings(),c=(E=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Io(i._databaseId,E,i._persistenceKey,(V=a).host,V.ssl,V.experimentalForceLongPolling,V.experimentalAutoDetectLongPolling,mC(V.experimentalLongPollingOptions),V.useFetchStreams));var E,V;i._firestoreClient=new qw(i._authCredentials,i._appCheckCredentials,i._queue,c),null!==(t=a.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(o=a.localCache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.localCache.kind,_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider})}function Ou(i,e,t){const o=new $n;return i.asyncQueue.enqueue((0,we.A)(function*(){try{yield Iy(i,t),yield zl(i,e),o.resolve()}catch(a){const c=a;if(!wy(c))throw c;mr("Error enabling indexeddb cache. Falling back to memory cache: "+c),o.reject(c)}})).then(()=>o.promise)}function aT(i){if(i._initialized||i._terminated)throw new st(Ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ru{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ru(kr.fromBase64String(e))}catch(t){throw new st(Ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ru(kr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new st(Ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _r(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Nu{constructor(e){this._methodName=e}}class Zf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new st(Ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new st(Ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return vt(this._lat,e._lat)||vt(this._long,e._long)}}const ep=/^__.*__$/;class Ry{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new sa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rl(e,this.data,t,this.fieldTransforms)}}class Ny{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new sa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tp(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nt()}}class Eh{constructor(e,t,o,a,c,d){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=a,void 0===c&&this.pu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(e){return new Eh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.wu({path:o,bu:!1});return a.Du(e),a}Cu(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.wu({path:o,bu:!1});return a.pu(),a}vu(e){return this.wu({path:void 0,bu:!0})}Fu(e){return Fy(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Du(this.path.get(e))}Du(e){if(0===e.length)throw this.Fu("Document fields must not be empty");if(tp(this.yu)&&ep.test(e))throw this.Fu('Document fields cannot begin and end with "__"')}}class np{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||yc(e)}Ou(e,t,o,a=!1){return new Eh({yu:e,methodName:t,xu:o,path:_r.emptyPath(),bu:!1,Mu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xu(i){const e=i._freezeSettings(),t=yc(i._databaseId);return new np(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Ch(i,e,t,o,a,c={}){const d=i.Ou(c.merge||c.mergeFields?2:0,e,t,a);SC("Data must be an object, but it was:",d,o);const g=DC(o,d);let E,S;if(c.merge)E=new Ni(d.fieldMask),S=d.fieldTransforms;else if(c.mergeFields){const V=[];for(const K of c.mergeFields){const ee=Lu(e,K,t);if(!d.contains(ee))throw new st(Ge.INVALID_ARGUMENT,`Field '${ee}' is specified in your field mask but missing from your input data.`);qD(V,ee)||V.push(ee)}E=new Ni(V),S=d.fieldTransforms.filter(K=>E.covers(K.field))}else E=null,S=d.fieldTransforms;return new Ry(new hn(g),E,S)}class ku extends Nu{_toFieldTransform(e){if(2!==e.yu)throw e.Fu(1===e.yu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ku}}function xy(i,e,t){return new Eh({yu:3,xu:e.settings.xu,methodName:i._methodName,bu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class lT extends Nu{_toFieldTransform(e){return new el(e.path,new os)}isEqual(e){return e instanceof lT}}class tm extends Nu{constructor(e,t){super(e),this.Nu=t}_toFieldTransform(e){const t=xy(this,e,!0),o=this.Nu.map(c=>Fu(c,t)),a=new Rr(o);return new el(e.path,a)}isEqual(e){return e instanceof tm&&(0,te.bD)(this.Nu,e.Nu)}}class Ih extends Nu{constructor(e,t){super(e),this.Nu=t}_toFieldTransform(e){const t=xy(this,e,!0),o=this.Nu.map(c=>Fu(c,t)),a=new cn(o);return new el(e.path,a)}isEqual(e){return e instanceof Ih&&(0,te.bD)(this.Nu,e.Nu)}}class AC extends Nu{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new Oa(e.serializer,Br(e.serializer,this.Lu));return new el(e.path,t)}isEqual(e){return e instanceof AC&&this.Lu===e.Lu}}function ky(i,e,t,o){const a=i.Ou(1,e,t);SC("Data must be an object, but it was:",a,o);const c=[],d=hn.empty();Co(o,(E,S)=>{const V=rp(e,E,t);S=(0,te.Ku)(S);const K=a.Cu(V);if(S instanceof ku)c.push(V);else{const ee=Fu(S,K);null!=ee&&(c.push(V),d.set(V,ee))}});const g=new Ni(c);return new Ny(d,g,a.fieldTransforms)}function PC(i,e,t,o,a,c){const d=i.Ou(1,e,t),g=[Lu(e,o,t)],E=[a];if(c.length%2!=0)throw new st(Ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ee=0;ee<c.length;ee+=2)g.push(Lu(e,c[ee])),E.push(c[ee+1]);const S=[],V=hn.empty();for(let ee=g.length-1;ee>=0;--ee)if(!qD(S,g[ee])){const de=g[ee];let Re=E[ee];Re=(0,te.Ku)(Re);const $e=d.Cu(de);if(Re instanceof ku)S.push(de);else{const qe=Fu(Re,$e);null!=qe&&(S.push(de),V.set(de,qe))}}const K=new Ni(S);return new Ny(V,K,d.fieldTransforms)}function cT(i,e,t,o=!1){return Fu(t,i.Ou(o?4:3,e))}function Fu(i,e){if(uT(i=(0,te.Ku)(i)))return SC("Unsupported field value:",e,i),DC(i,e);if(i instanceof Nu)return function(o,a){if(!tp(a.yu))throw a.Fu(`${o._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Fu(`${o._methodName}() is not currently supported inside arrays`);const c=o._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.bu&&4!==e.yu)throw e.Fu("Nested arrays are not supported");return function(o,a){const c=[];let d=0;for(const g of o){let E=Fu(g,a.vu(d));null==E&&(E={nullValue:"NULL_VALUE"}),c.push(E),d++}return{arrayValue:{values:c}}}(i,e)}return function(o,a){if(null===(o=(0,te.Ku)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return Br(a.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const c=On.fromDate(o);return{timestampValue:hu(a.serializer,c)}}if(o instanceof On){const c=new On(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:hu(a.serializer,c)}}if(o instanceof Zf)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Ru)return{bytesValue:hg(a.serializer,o._byteString)};if(o instanceof Fi){const c=a.databaseId,d=o.firestore._databaseId;if(!d.isEqual(c))throw a.Fu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:vf(o.firestore._databaseId||a.databaseId,o._key.path)}}throw a.Fu(`Unsupported field value: ${Sy(o)}`)}(i,e)}function DC(i,e){const t={};return Pa(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Co(i,(o,a)=>{const c=Fu(a,e.Su(o));null!=c&&(t[o]=c)}),{mapValue:{fields:t}}}function uT(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof On||i instanceof Zf||i instanceof Ru||i instanceof Fi||i instanceof Nu)}function SC(i,e,t){if(!uT(t)||"object"!=typeof(a=t)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const o=Sy(t);throw e.Fu("an object"===o?i+" a custom object":i+" "+o)}var a}function Lu(i,e,t){if((e=(0,te.Ku)(e))instanceof Wl)return e._internalPath;if("string"==typeof e)return rp(i,e);throw Fy("Field path arguments must be of type string or ",i,!1,void 0,t)}const dT=new RegExp("[~\\*/\\[\\]]");function rp(i,e,t){if(e.search(dT)>=0)throw Fy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Wl(...e.split("."))._internalPath}catch{throw Fy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Fy(i,e,t,o,a){const c=o&&!o.isEmpty(),d=void 0!==a;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let E="";return(c||d)&&(E+=" (found",c&&(E+=` in field ${o}`),d&&(E+=` in document ${a}`),E+=")"),new st(Ge.INVALID_ARGUMENT,g+i+E)}function qD(i,e){return i.some(t=>t.isEqual(e))}class Ly{constructor(e,t,o,a,c){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Fi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class nm extends Ly{data(){return super.data()}}function Vy(i,e){return"string"==typeof e?rp(i,e):e instanceof Wl?e._internalPath:e._delegate._internalPath}function rm(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new st(Ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class im{}class ip extends im{}function md(i,e,...t){let o=[];e instanceof im&&o.push(e),o=o.concat(t),function(c){const d=c.filter(E=>E instanceof wh).length,g=c.filter(E=>E instanceof op).length;if(d>1||d>0&&g>0)throw new st(Ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const a of o)i=a._apply(i);return i}class op extends ip{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new op(e,t,o)}_apply(e){const t=this._parse(e);return jy(e._query,t),new Go(e.firestore,e.converter,Dl(e._query,t))}_parse(e){const t=xu(e.firestore);return function(c,d,g,E,S,V,K){let ee;if(S.isKeyField()){if("array-contains"===V||"array-contains-any"===V)throw new st(Ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${V}' queries on documentId().`);if("in"===V||"not-in"===V){am(K,V);const de=[];for(const Re of K)de.push(JD(E,c,Re));ee={arrayValue:{values:de}}}else ee=JD(E,c,K)}else"in"!==V&&"not-in"!==V&&"array-contains-any"!==V||am(K,V),ee=cT(g,"where",K,"in"===V||"not-in"===V);return R.create(S,V,ee)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class wh extends im{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wh(e,t)}_parse(e){const t=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===t.length?t[0]:Y.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(a,c){let d=a;const g=c.getFlattenedFilters();for(const E of g)jy(d,E),d=Dl(d,E)}(e._query,t),new Go(e.firestore,e.converter,Dl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class sp extends ip{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sp(e,t)}_apply(e){const t=function(a,c,d){if(null!==a.startAt)throw new st(Ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new st(Ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ts(c,d)}(e._query,this._field,this._direction);return new Go(e.firestore,e.converter,function(a,c){const d=a.explicitOrderBy.concat([c]);return new $s(a.path,a.collectionGroup,d,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}class om extends ip{constructor(e,t,o){super(),this.type=e,this._limit=t,this._limitType=o}static _create(e,t,o){return new om(e,t,o)}_apply(e){return new Go(e.firestore,e.converter,xc(e._query,this._limit,this._limitType))}}class sm extends ip{constructor(e,t,o){super(),this.type=e,this._docOrFields=t,this._inclusive=o}static _create(e,t,o){return new sm(e,t,o)}_apply(e){const t=pT(e,this.type,this._docOrFields,this._inclusive);return new Go(e.firestore,e.converter,(c=t,new $s((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,c,a.endAt)));var a,c}}class ap extends ip{constructor(e,t,o){super(),this.type=e,this._docOrFields=t,this._inclusive=o}static _create(e,t,o){return new ap(e,t,o)}_apply(e){const t=pT(e,this.type,this._docOrFields,this._inclusive);return new Go(e.firestore,e.converter,(c=t,new $s((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,c)));var a,c}}function pT(i,e,t,o){if(t[0]=(0,te.Ku)(t[0]),t[0]instanceof Ly)return function(c,d,g,E,S){if(!E)throw new st(Ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${g}().`);const V=[];for(const K of Za(c))if(K.field.isKeyField())V.push(U(d,E.key));else{const ee=E.data.field(K.field);if(fi(ee))throw new st(Ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+K.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ee){const de=K.field.canonicalString();throw new st(Ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${de}' (used as the orderBy) does not exist.`)}V.push(ee)}return new Fr(V,S)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const a=xu(i.firestore);return function(d,g,E,S,V,K){const ee=d.explicitOrderBy;if(V.length>ee.length)throw new st(Ge.INVALID_ARGUMENT,`Too many arguments provided to ${S}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const de=[];for(let Re=0;Re<V.length;Re++){const $e=V[Re];if(ee[Re].field.isKeyField()){if("string"!=typeof $e)throw new st(Ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${S}(), but got a ${typeof $e}`);if(!Nc(d)&&-1!==$e.indexOf("/"))throw new st(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${S}() must be a plain document ID, but '${$e}' contains a slash.`);const qe=d.path.child(Tn.fromString($e));if(!Ht.isDocumentKey(qe))throw new st(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${S}() must result in a valid document path, but '${qe}' is not because it contains an odd number of segments.`);const kt=new Ht(qe);de.push(U(g,kt))}else{const qe=cT(E,S,$e);de.push(qe)}}return new Fr(de,K)}(i._query,i.firestore._databaseId,a,e,t,o)}}function JD(i,e,t){if("string"==typeof(t=(0,te.Ku)(t))){if(""===t)throw new st(Ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nc(e)&&-1!==t.indexOf("/"))throw new st(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Tn.fromString(t));if(!Ht.isDocumentKey(o))throw new st(Ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return U(i,new Ht(o))}if(t instanceof Fi)return U(i,t._key);throw new st(Ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sy(t)}.`)}function am(i,e){if(!Array.isArray(i)||0===i.length)throw new st(Ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jy(i,e){const t=function(a,c){for(const d of a)for(const g of d.getFlattenedFilters())if(c.indexOf(g.op)>=0)return g.op;return null}(i.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new st(Ge.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class $y{convertValue(e,t="none"){switch(ni(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Nt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return Co(e,(a,c)=>{o[a]=this.convertValue(c,t)}),o}convertGeoPoint(e){return new Zf(Mt(e.latitude),Mt(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=es(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(js(e));default:return null}}convertTimestamp(e){const t=no(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Tn.fromString(e);Kt(ih(o));const a=new ps(o.get(1),o.get(3)),c=new Ht(o.popFirst(5));return a.isEqual(t)||Pn(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function lm(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class gT extends $y{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ru(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fi(this.firestore,null,t)}}class ja{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dl extends Ly{constructor(e,t,o,a,c,d){super(e,t,o,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Vy("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class cm extends dl{data(e={}){return super.data(e)}}class Th{constructor(e,t,o,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ja(a.hasPendingWrites,a.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new cm(this._firestore,this._userDataWriter,o.key,o,new ja(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new st(Ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let d=0;return a._snapshot.docChanges.map(g=>({type:"added",doc:new cm(a._firestore,a._userDataWriter,g.doc.key,g.doc,new ja(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:d++}))}{let d=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(g=>c||3!==g.type).map(g=>{const E=new cm(a._firestore,a._userDataWriter,g.doc.key,g.doc,new ja(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);let S=-1,V=-1;return 0!==g.type&&(S=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),1!==g.type&&(d=d.add(g.doc),V=d.indexOf(g.doc.key)),{type:vN(g.type),doc:E,oldIndex:S,newIndex:V}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function vN(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nt()}}function eS(i,e){return i instanceof dl&&e instanceof dl?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Th&&e instanceof Th&&i._firestore===e._firestore&&CC(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class bh extends $y{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ru(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fi(this.firestore,null,t)}}function Hy(i,e,t){i=Ir(i,Fi);const o=Ir(i.firestore,mi),a=lm(i.converter,e,t);return dm(o,[Ch(xu(o),"setDoc",i._key,a,null!==i.converter,t).toMutation(i._key,oi.none())])}function Kc(i,e,t,...o){i=Ir(i,Fi);const a=Ir(i.firestore,mi),c=xu(a);let d;return d="string"==typeof(e=(0,te.Ku)(e))||e instanceof Wl?PC(c,"updateDoc",i._key,e,t,o):ky(c,"updateDoc",i._key,e),dm(a,[d.toMutation(i._key,oi.exists(!0))])}function NC(i,...e){var t,o,a;i=(0,te.Ku)(i);let c={includeMetadataChanges:!1,source:"default"},d=0;"object"!=typeof e[d]||Oy(e[d])||(c=e[d],d++);const g={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(Oy(e[d])){const K=e[d];e[d]=null===(t=K.next)||void 0===t?void 0:t.bind(K),e[d+1]=null===(o=K.error)||void 0===o?void 0:o.bind(K),e[d+2]=null===(a=K.complete)||void 0===a?void 0:a.bind(K)}let E,S,V;if(i instanceof Fi)S=Ir(i.firestore,mi),V=sc(i._key.path),E={next:K=>{e[d]&&e[d](vT(S,i,K))},error:e[d+1],complete:e[d+2]};else{const K=Ir(i,Go);S=Ir(K.firestore,mi),V=K._query;const ee=new bh(S);E={next:de=>{e[d]&&e[d](new Th(S,ee,K,de))},error:e[d+1],complete:e[d+2]},rm(i._query)}return function(ee,de,Re,$e){const qe=new hC($e),kt=new eC(de,qe,Re);return ee.asyncQueue.enqueueAndForget((0,we.A)(function*(){return dy(yield Yf(ee),kt)})),()=>{qe.Ga(),ee.asyncQueue.enqueueAndForget((0,we.A)(function*(){return JE(yield Yf(ee),kt)}))}}(Ji(S),V,g,E)}function dm(i,e){return function(o,a){const c=new $n;return o.asyncQueue.enqueueAndForget((0,we.A)(function*(){return function xw(i,e,t){return _y.apply(this,arguments)}(yield gC(o),a,c)})),c.promise}(Ji(i),e)}function vT(i,e,t){const o=t.docs.get(e._key),a=new bh(i);return new dl(i,a,e._key,o,new ja(t.hasPendingWrites,t.fromCache),e.converter)}const sS={maxAttempts:5};class FC{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xu(e)}set(e,t,o){this._verifyNotCommitted();const a=Ic(e,this._firestore),c=lm(a.converter,t,o),d=Ch(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,o);return this._mutations.push(d.toMutation(a._key,oi.none())),this}update(e,t,o,...a){this._verifyNotCommitted();const c=Ic(e,this._firestore);let d;return d="string"==typeof(t=(0,te.Ku)(t))||t instanceof Wl?PC(this._dataReader,"WriteBatch.update",c._key,t,o,a):ky(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(d.toMutation(c._key,oi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ic(e,this._firestore);return this._mutations=this._mutations.concat(new lc(t._key,oi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new st(Ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ic(i,e){if((i=(0,te.Ku)(i)).firestore!==e)throw new st(Ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class aS extends class{constructor(t,o){this._firestore=t,this._transaction=o,this._dataReader=xu(t)}get(t){const o=Ic(t,this._firestore),a=new gT(this._firestore);return this._transaction.lookup([o._key]).then(c=>{if(!c||1!==c.length)return Nt();const d=c[0];if(d.isFoundDocument())return new Ly(this._firestore,a,d.key,d,o.converter);if(d.isNoDocument())return new Ly(this._firestore,a,o._key,null,o.converter);throw Nt()})}set(t,o,a){const c=Ic(t,this._firestore),d=lm(c.converter,o,a),g=Ch(this._dataReader,"Transaction.set",c._key,d,null!==c.converter,a);return this._transaction.set(c._key,g),this}update(t,o,a,...c){const d=Ic(t,this._firestore);let g;return g="string"==typeof(o=(0,te.Ku)(o))||o instanceof Wl?PC(this._dataReader,"Transaction.update",d._key,o,a,c):ky(this._dataReader,"Transaction.update",d._key,o),this._transaction.update(d._key,g),this}delete(t){const o=Ic(t,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ic(e,this._firestore),o=new bh(this._firestore);return super.get(e).then(a=>new dl(this._firestore,o,t._key,a._document,new ja(!1,!1),t.converter))}}!function(e,t=!0){Nr=Mn.SDK_VERSION,(0,Mn._registerComponent)(new ar.uA("firestore",(o,{instanceIdentifier:a,options:c})=>{const d=o.getProvider("app").getImmediate(),g=new mi(new Me(o.getProvider("auth-internal")),new ve(o.getProvider("app-check-internal")),function(S,V){if(!Object.prototype.hasOwnProperty.apply(S.options,["projectId"]))throw new st(Ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ps(S.options.projectId,V)}(d,a),d);return c=Object.assign({useFetchStreams:t},c),g._setSettings(c),g},"PUBLIC").setMultipleInstances(!0)),(0,Mn.registerVersion)(xn,"4.6.5",e),(0,Mn.registerVersion)(xn,"4.6.5","esm2017")}();var zi=J(6354);(0,Mn.registerVersion)("firebase","10.12.5","app");var _S=J(8359);class BC extends _S.yU{constructor(e,t){super()}schedule(e,t=0){return this}}const jC={setInterval(i,e,...t){const{delegate:o}=jC;return o?.setInterval?o.setInterval(i,e,...t):setInterval(i,e,...t)},clearInterval(i){const{delegate:e}=jC;return(e?.clearInterval||clearInterval)(i)},delegate:void 0};var RN=J(7908);class zy extends BC{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var o;if(this.closed)return this;this.state=e;const a=this.id,c=this.scheduler;return null!=a&&(this.id=this.recycleAsyncId(c,a,t)),this.pending=!0,this.delay=t,this.id=null!==(o=this.id)&&void 0!==o?o:this.requestAsyncId(c,this.id,t),this}requestAsyncId(e,t,o=0){return jC.setInterval(e.flush.bind(e,this),o)}recycleAsyncId(e,t,o=0){if(null!=o&&this.delay===o&&!1===this.pending)return t;null!=t&&jC.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const o=this._execute(e,t);if(o)return o;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let a,o=!1;try{this.work(e)}catch(c){o=!0,a=c||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),a}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:o}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,RN.o)(o,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const bT={now:()=>(bT.delegate||Date).now(),delegate:void 0};class Wy{constructor(e,t=Wy.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,o){return new this.schedulerActionCtor(this,e).schedule(o,t)}}Wy.now=bT.now;class yS extends Wy{constructor(e,t=Wy.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let o;this._active=!0;do{if(o=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,o){for(;e=t.shift();)e.unsubscribe();throw o}}}const vS=new class xN extends yS{}(class NN extends zy{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,o=0){return null!=o&&o>0||null==o&&this.delay>0?super.requestAsyncId(e,t,o):(e.flush(this),0)}}),dp=new yS(zy);var PT=J(8141),hm=J(6745),hp=J(941);const HC=new m.RxE("ANGULARFIRE2_VERSION");class $a{constructor(){return((i,e)=>{const t=(0,Mn.getApps)(),o=[];return t.forEach(a=>{a.container.getProvider(i).instances.forEach(d=>{o.includes(d)||o.push(d)})}),o})(DT)}}const DT="app-check";function pm(){}class ST{zone;delegate;constructor(e,t=vS){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,o){const a=this.zone;return this.delegate.schedule(function(d){a.runGuarded(()=>{e.apply(this,[d])})},t,o)}}class kN{zone;task=null;constructor(e){this.zone=e}call(e,t){const o=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pm,{},pm,pm)),t.pipe((0,PT.M)({next:o,complete:o,error:o})).subscribe(e).add(o)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let MT=(()=>{class i{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new ST(Zone.current)),this.insideAngular=t.run(()=>new ST(Zone.current,dp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(o){return new(o||i)(m.KVO(m.SKi))};static \u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function So(i){return function CS(i){return function(t){return(t=t.lift(new kN(i.ngZone))).pipe((0,hm._)(i.outsideAngular),(0,hp.Q)(i.insideAngular))}}(function Ah(){const i=globalThis.\u0275AngularFireScheduler;if(!i)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return i}())(i)}var qc=J(3345);qc.A.registerVersion("firebase","10.12.5","app-compat");const IS=["ngOnDestroy"];class kT{constructor(e){return e}}const gm=new m.nKC("angularfire2.app.options"),gp=new m.nKC("angularfire2.app.name");function mp(i,e,t){const a="object"==typeof t&&t||{};a.name=a.name||"string"==typeof t&&t||"[DEFAULT]";const d=qc.A.apps.filter(g=>g&&g.name===a.name)[0]||e.runOutsideAngular(()=>qc.A.initializeApp(i,a));try{if(JSON.stringify(i)!==JSON.stringify(d.options)){const g=!!module.hot;mm("error",`${d.name} Firebase App already initialized with different options${g?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new kT(d)}const mm=(i,...e)=>{(0,m.naY)()&&typeof console<"u"&&console[i](...e)},qy={provide:kT,useFactory:mp,deps:[gm,m.SKi,[new m.Xx1,gp]]};let WC=(()=>{class i{static initializeApp(t,o){return{ngModule:i,providers:[{provide:gm,useValue:t},{provide:gp,useValue:o}]}}constructor(t){qc.A.registerVersion("angularfire",HC.full,"core"),qc.A.registerVersion("angularfire",HC.full,"app-compat"),qc.A.registerVersion("angular",m.xvI.full,t.toString())}static \u0275fac=function(o){return new(o||i)(m.KVO(m.Agw))};static \u0275mod=m.$C({type:i});static \u0275inj=m.G2t({providers:[qy]})}return i})();function KC(i,e,t,o,a){const[,c,d]=globalThis.\u0275AngularfireInstanceCache.find(g=>g[0]===i)||[];if(c)return function TS(i,e){try{return i.toString()===e.toString()}catch{return i===e}}(a,d)||(QC("error",`${e} was already initialized on the ${t} Firebase App with different settings.${qC?" You may need to reload as Firebase is not HMR aware.":""}`),QC("warn",{is:a,was:d})),c;{const g=o();return globalThis.\u0275AngularfireInstanceCache.push([i,g,a]),g}}const qC=typeof module<"u"&&!!module.hot,QC=(i,...e)=>{(0,m.naY)()&&typeof console<"u"&&console[i](...e)};globalThis.\u0275AngularfireInstanceCache||=[],J(9254);var Qy=J(1413),Qc=J(7673),yp=J(1985),Ph=J(8455),Yy=J(6365),Xy=J(8750),FT=J(983),Jy=J(3794);function Zy(...i){const e=(0,Jy.lI)(i),t=(0,Jy.R0)(i,1/0),o=i;return o.length?1===o.length?(0,Xy.Tg)(o[0]):(0,Yy.U)(t)((0,Ph.H)(o,e)):FT.w}var Kl=J(5558);class LT extends Qy.B{constructor(e=1/0,t=1/0,o=bT){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:o,_infiniteTimeWindow:a,_timestampProvider:c,_windowTime:d}=this;t||(o.push(e),!a&&o.push(c.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:o,_buffer:a}=this,c=a.slice();for(let d=0;d<c.length&&!e.closed;d+=o?1:2)e.next(c[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:o,_infiniteTimeWindow:a}=this,c=(a?1:2)*e;if(e<1/0&&c<o.length&&o.splice(0,o.length-c),!a){const d=t.now();let g=0;for(let E=1;E<o.length&&o[E]<=d;E+=2)g=E;g&&o.splice(0,g+1)}}}var _m=J(7707),Vu=J(9974);function YC(i={}){const{connector:e=(()=>new Qy.B),resetOnError:t=!0,resetOnComplete:o=!0,resetOnRefCountZero:a=!0}=i;return c=>{let d,g,E,S=0,V=!1,K=!1;const ee=()=>{g?.unsubscribe(),g=void 0},de=()=>{ee(),d=E=void 0,V=K=!1},Re=()=>{const $e=d;de(),$e?.unsubscribe()};return(0,Vu.N)(($e,qe)=>{S++,!K&&!V&&ee();const kt=E=E??e();qe.add(()=>{S--,0===S&&!K&&!V&&(g=ym(Re,a))}),kt.subscribe(qe),!d&&S>0&&(d=new _m.Ms({next:Xt=>kt.next(Xt),error:Xt=>{K=!0,ee(),g=ym(de,t,Xt),kt.error(Xt)},complete:()=>{V=!0,ee(),g=ym(de,o),kt.complete()}}),(0,Xy.Tg)($e).subscribe(d))})(c)}}function ym(i,e,...t){if(!0===e)return void i();if(!1===e)return;const o=new _m.Ms({next:()=>{o.unsubscribe(),i()}});return(0,Xy.Tg)(e(...t)).subscribe(o)}function vp(i,e,t){let o,a=!1;return i&&"object"==typeof i?({bufferSize:o=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=i):o=i??1/0,YC({connector:()=>new LT(o,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}var VT=J(1594),XC=J(8071);function vm(i,e){return(0,XC.T)(e)?(0,Kl.n)(()=>i,e):(0,Kl.n)(()=>i)}var ev=J(5964);const JC=new m.nKC("angularfire2.auth.use-emulator"),ZC=new m.nKC("angularfire2.auth.settings"),eI=new m.nKC("angularfire2.auth.tenant-id"),tv=new m.nKC("angularfire2.auth.langugage-code"),nv=new m.nKC("angularfire2.auth.use-device-language"),sr=new m.nKC("angularfire.auth.persistence"),rv=(i,e,t,o,a,c,d,g)=>KC(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const E=e.runOutsideAngular(()=>i.auth());if(t&&E.useEmulator(...t),o&&(E.tenantId=o),E.languageCode=a,c&&E.useDeviceLanguage(),d)for(const[S,V]of Object.entries(d))E.settings[S]=V;return g&&E.setPersistence(g),E},[t,o,a,c,d,g]);let Em=(()=>{class i{authState;idToken;user;idTokenResult;credential;constructor(t,o,a,c,d,g,E,S,V,K,ee,de){const Re=new Qy.B,$e=(0,Qc.of)(void 0).pipe((0,hp.Q)(d.outsideAngular),(0,Kl.n)(()=>c.runOutsideAngular(()=>Promise.resolve().then(J.bind(J,9254)))),(0,zi.T)(()=>mp(t,c,o)),(0,zi.T)(qe=>rv(qe,c,g,S,V,K,E,ee)),vp({bufferSize:1,refCount:!1}));if((0,De.Vy)(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Qc.of)(null);else{$e.pipe((0,VT.$)()).subscribe();const qe=$e.pipe((0,Kl.n)(St=>St.getRedirectResult().then(gn=>gn,()=>null)),So,vp({bufferSize:1,refCount:!1})),kt=$e.pipe((0,Kl.n)(St=>new yp.c(gn=>({unsubscribe:c.runOutsideAngular(()=>St.onAuthStateChanged(Yn=>gn.next(Yn),Yn=>gn.error(Yn),()=>gn.complete()))})))),Xt=$e.pipe((0,Kl.n)(St=>new yp.c(gn=>({unsubscribe:c.runOutsideAngular(()=>St.onIdTokenChanged(Yn=>gn.next(Yn),Yn=>gn.error(Yn),()=>gn.complete()))}))));this.authState=qe.pipe(vm(kt),(0,hm._)(d.outsideAngular),(0,hp.Q)(d.insideAngular)),this.user=qe.pipe(vm(Xt),(0,hm._)(d.outsideAngular),(0,hp.Q)(d.insideAngular)),this.idToken=this.user.pipe((0,Kl.n)(St=>St?(0,Ph.H)(St.getIdToken()):(0,Qc.of)(null))),this.idTokenResult=this.user.pipe((0,Kl.n)(St=>St?(0,Ph.H)(St.getIdTokenResult()):(0,Qc.of)(null))),this.credential=Zy(qe,Re,this.authState.pipe((0,ev.p)(St=>!St))).pipe((0,zi.T)(St=>St?.user?St:null),(0,hm._)(d.outsideAngular),(0,hp.Q)(d.insideAngular))}return((i,e,t,o={})=>new Proxy(i,{get:(a,c)=>t.runOutsideAngular(()=>{if(i[c])return o?.spy?.get&&o.spy.get(c,i[c]),i[c];if(IS.indexOf(c)>-1)return()=>{};const d=e.toPromise().then(g=>{const E=g?.[c];return"function"==typeof E?E.bind(g):E?.then?E.then(S=>t.run(()=>S)):t.run(()=>E)});return new Proxy(()=>{},{get:(g,E)=>d[E],apply:(g,E,S)=>d.then(V=>{const K=V?.(...S);return o?.spy?.apply&&o.spy.apply(c,S,K),K})})})}))(this,$e,c,{spy:{apply:(qe,kt,Xt)=>{(qe.startsWith("signIn")||qe.startsWith("createUser"))&&Xt.then(St=>Re.next(St))}}})}static \u0275fac=function(o){return new(o||i)(m.KVO(gm),m.KVO(gp,8),m.KVO(m.Agw),m.KVO(m.SKi),m.KVO(MT),m.KVO(JC,8),m.KVO(ZC,8),m.KVO(eI,8),m.KVO(tv,8),m.KVO(nv,8),m.KVO(sr,8),m.KVO($a,8))};static \u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})();var iv=J(9172),Ep=J(4360);function tI(){return(0,Vu.N)((i,e)=>{let t,o=!1;i.subscribe((0,Ep._)(e,a=>{const c=t;t=a,o&&e.next([c,a]),o=!0}))})}var _d=J(2816),Dh=J(3669);function ov(i,e=Dh.D){return i=i??Im,(0,Vu.N)((t,o)=>{let a,c=!0;t.subscribe((0,Ep._)(o,d=>{const g=e(d);(c||!i(a,g))&&(c=!1,a=g,o.next(d))}))})}function Im(i,e){return i===e}function wm(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new st("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function sv(){if(typeof Uint8Array>"u")throw new st("unimplemented","Uint8Arrays are not available in this environment.")}function rI(){if(!function Bs(){return typeof atob<"u"}())throw new st("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Sh{constructor(e){this._delegate=e}static fromBase64String(e){return rI(),new Sh(Ru.fromBase64String(e))}static fromUint8Array(e){return sv(),new Sh(Ru.fromUint8Array(e))}toBase64(){return rI(),this._delegate.toBase64()}toUint8Array(){return sv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function iI(i){return function bS(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class AS{enableIndexedDbPersistence(e,t){return function wC(i,e){aT(i=Ir(i,mi));const t=Ji(i);if(t._uninitializedComponentsProvider)throw new st(Ge.FAILED_PRECONDITION,"SDK cache is already specified.");mr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),a=new qg;return Ou(t,a,new Kw(a,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function GD(i){aT(i=Ir(i,mi));const e=Ji(i);if(e._uninitializedComponentsProvider)throw new st(Ge.FAILED_PRECONDITION,"SDK cache is already specified.");mr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings(),o=new qg;return Ou(e,o,new LD(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function TC(i){if(i._initialized&&!i._terminated)throw new st(Ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $n;return i._queue.enqueueAndForgetEvenWhileRestricted((0,we.A)(function*(){try{yield(t=(0,we.A)(function*(a){if(!qn.D())return Promise.resolve();const c=a+"main";yield qn.delete(c)}),function o(a){return t.apply(this,arguments)})(sd(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class oI{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof ps||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function vC(i,e,t,o={}){var a;const c=(i=Ir(i,Jf))._getSettings(),d=`${e}:${t}`;if("firestore.googleapis.com"!==c.host&&c.host!==d&&mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:d,ssl:!1})),o.mockUserToken){let g,E;if("string"==typeof o.mockUserToken)g=o.mockUserToken,E=ir.MOCK_USER;else{g=(0,te.Fy)(o.mockUserToken,null===(a=i._app)||void 0===a?void 0:a.options.projectId);const S=o.mockUserToken.sub||o.mockUserToken.user_id;if(!S)throw new st(Ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new ir(S)}i._authCredentials=new ge(new et(g,E))}}(this._delegate,e,t,o)}enableNetwork(){return function sT(i){return function BD(i){return i.asyncQueue.enqueue((0,we.A)(function*(){const e=yield Jg(i),t=yield by(i);return e.setNetworkEnabled(!0),function(a){const c=xt(a);return c.N_.delete(0),da(c)}(t)}))}(Ji(i=Ir(i,mi)))}(this._delegate)}disableNetwork(){return function bC(i){return function jD(i){return i.asyncQueue.enqueue((0,we.A)(function*(){const e=yield Jg(i),t=yield by(i);return e.setNetworkEnabled(!1),(o=(0,we.A)(function*(c){const d=xt(c);d.N_.add(0),yield bu(d),d.k_.set("Offline")}),function a(c){return o.apply(this,arguments)})(t);var o}))}(Ji(i=Ir(i,mi)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,eT("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function zD(i){return function(t){const o=new $n;return t.asyncQueue.enqueueAndForget((0,we.A)(function*(){return function RD(i,e){return vy.apply(this,arguments)}(yield gC(t),o)})),o.promise}(Ji(i=Ir(i,mi)))}(this._delegate)}onSnapshotsInSync(e){return function yT(i,e){return function uN(i,e){const t=new hC(e);return i.asyncQueue.enqueueAndForget((0,we.A)(function*(){return a=yield Yf(i),c=t,xt(a).J_.add(c),void c.next();var a,c})),()=>{t.Ga(),i.asyncQueue.enqueueAndForget((0,we.A)(function*(){return a=yield Yf(i),c=t,void xt(a).J_.delete(c);var a,c}))}}(Ji(i=Ir(i,mi)),Oy(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new st("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Cp(this,EC(this._delegate,e))}catch(t){throw pa(t,"collection()","Firestore.collection()")}}doc(e){try{return new fl(this,My(this._delegate,e))}catch(t){throw pa(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ha(this,function rT(i,e){if(i=Ir(i,Jf),Dy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new st(Ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Go(i,null,(o=e,new $s(Tn.emptyPath(),o)));var o}(this._delegate,e))}catch(t){throw pa(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function LC(i,e,t){i=Ir(i,mi);const o=Object.assign(Object.assign({},sS),t);return function(c){if(c.maxAttempts<1)throw new st(Ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(c,d,g){const E=new $n;return c.asyncQueue.enqueueAndForget((0,we.A)(function*(){const S=yield function Qw(i){return Xg(i).then(e=>e.datastore)}(c);new Qg(c.asyncQueue,S,g,d,E).nu()})),E.promise}(Ji(i),a=>e(new aS(i,a)),o)}(this._delegate,t=>e(new jT(this,t)))}batch(){return Ji(this._delegate),new $T(new FC(this._delegate,e=>dm(this._delegate,e)))}loadBundle(e){return function WD(i,e){const t=Ji(i=Ir(i,mi)),o=new dN;return function qs(i,e,t,o){const a=function(d,g){let E;return E="string"==typeof d?uu().encode(d):d,V=function(V,K){if(V instanceof Uint8Array)return VD(V,K);if(V instanceof ArrayBuffer)return VD(new Uint8Array(V),K);if(V instanceof ReadableStream)return V.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(E),new UD(V,g);var V}(t,yc(e));i.asyncQueue.enqueueAndForget((0,we.A)(function*(){!function FD(i,e,t){const o=xt(i);var a;(a=(0,we.A)(function*(d,g,E){try{const S=yield g.getMetadata();if(yield function(Re,$e){const qe=xt(Re),kt=Ai($e.createTime);return qe.persistence.runTransaction("hasNewerBundle","readonly",Xt=>qe.Wr.getBundleMetadata(Xt,$e.id)).then(Xt=>!!Xt&&Xt.createTime.compareTo(kt)>=0)}(d.localStore,S))return yield g.close(),E._completeWith({taskState:"Success",documentsLoaded:(Re=S).totalDocuments,bytesLoaded:Re.totalBytes,totalDocuments:Re.totalDocuments,totalBytes:Re.totalBytes}),Promise.resolve(new Set);E._updateProgress(Hf(S));const V=new tC(S,d.localStore,g.serializer);let K=yield g.$a();for(;K;){const de=yield V.ca(K);de&&E._updateProgress(de),K=yield g.$a()}const ee=yield V.complete();return yield Gl(d,ee.Pa,void 0),yield function(Re,$e){const qe=xt(Re);return qe.persistence.runTransaction("Save bundle","readwrite",kt=>qe.Wr.saveBundleMetadata(kt,$e))}(d.localStore,S),E._completeWith(ee.progress),Promise.resolve(ee.ha)}catch(S){return mr("SyncEngine",`Loading bundle failed with ${S}`),E._failWith(S),Promise.resolve(new Set)}var Re}),function c(d,g,E){return a.apply(this,arguments)})(o,e,t).then(a=>{o.sharedClientState.notifyBundleLoaded(a)})}(yield gC(i),a,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function KD(i,e){return function Xf(i,e){return i.asyncQueue.enqueue((0,we.A)(function*(){return function(o,a){const c=xt(o);return c.persistence.runTransaction("Get named query","readonly",d=>c.Wr.getNamedQuery(d,a))}(yield Mu(i),e)}))}(Ji(i=Ir(i,mi)),e).then(t=>t?new Go(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Ha(this,t):null)}}class av extends $y{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sh(new Ru(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return fl.forKey(t,this.firestore,null)}}class jT{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new av(e)}get(e){const t=Mh(e);return this._delegate.get(t).then(o=>new Tm(this._firestore,new dl(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const a=Mh(e);return o?(wm("Transaction.set",o),this._delegate.set(a,t,o)):this._delegate.set(a,t),this}update(e,t,o,...a){const c=Mh(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,o,...a),this}delete(e){const t=Mh(e);return this._delegate.delete(t),this}}class $T{constructor(e){this._delegate=e}set(e,t,o){const a=Mh(e);return o?(wm("WriteBatch.set",o),this._delegate.set(a,t,o)):this._delegate.set(a,t),this}update(e,t,o,...a){const c=Mh(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,o,...a),this}delete(e){const t=Mh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class yd{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new cm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bm(this._firestore,o),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=yd.INSTANCES;let a=o.get(e);a||(a=new WeakMap,o.set(e,a));let c=a.get(t);return c||(c=new yd(e,new av(e),t),a.set(t,c)),c}}yd.INSTANCES=new WeakMap;class fl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new av(e)}static forPath(e,t,o){if(e.length%2!=0)throw new st("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new fl(t,new Fi(t._delegate,o,new Ht(e)))}static forKey(e,t,o){return new fl(t,new Fi(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Cp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Cp(this.firestore,EC(this._delegate,e))}catch(t){throw pa(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,te.Ku)(e))instanceof Fi&&iT(this._delegate,e)}set(e,t){t=wm("DocumentReference.set",t);try{return t?Hy(this._delegate,e,t):Hy(this._delegate,e)}catch(o){throw pa(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?Kc(this._delegate,e):Kc(this._delegate,e,t,...o)}catch(a){throw pa(a,"updateDoc()","DocumentReference.update()")}}delete(){return function um(i){return dm(Ir(i.firestore,mi),[new lc(i._key,oi.none())])}(this._delegate)}onSnapshot(...e){const t=HT(e),o=ga(e,a=>new Tm(this.firestore,new dl(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return NC(this._delegate,t,o)}get(e){let t;return t="cache"===e?.source?function mT(i){i=Ir(i,Fi);const e=Ir(i.firestore,mi),t=Ji(e),o=new bh(e);return function Ba(i,e){const t=new $n;return i.asyncQueue.enqueueAndForget((0,we.A)(function*(){return(o=(0,we.A)(function*(c,d,g){try{const E=yield function(V,K){const ee=xt(V);return ee.persistence.runTransaction("read document","readonly",de=>ee.localDocuments.getDocument(de,K))}(c,d);E.isFoundDocument()?g.resolve(E):E.isNoDocument()?g.resolve(null):g.reject(new st(Ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(E){const S=Hl(E,`Failed to get document '${d} from cache`);g.reject(S)}}),function a(c,d,g){return o.apply(this,arguments)})(yield Mu(i),e,t);var o})),t.promise}(t,i._key).then(a=>new dl(e,o,i._key,a,new ja(null!==a&&a.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function tS(i){i=Ir(i,Fi);const e=Ir(i.firestore,mi);return Py(Ji(e),i._key,{source:"server"}).then(t=>vT(e,i,t))}(this._delegate):function EN(i){i=Ir(i,Fi);const e=Ir(i.firestore,mi);return Py(Ji(e),i._key).then(t=>vT(e,i,t))}(this._delegate),t.then(o=>new Tm(this.firestore,new dl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new fl(this.firestore,this._delegate.withConverter(e?yd.getInstance(this.firestore,e):null))}}function pa(i,e,t){return i.message=i.message.replace(e,t),i}function HT(i){for(const e of i)if("object"==typeof e&&!iI(e))return e;return{}}function ga(i,e){var t,o;let a;return a=iI(i[0])?i[0]:iI(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(o=a.complete)||void 0===o?void 0:o.bind(a)}}class Tm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new fl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return eS(this._delegate,e._delegate)}}class bm extends Tm{data(e){const t=this._delegate.data(e);return this._delegate._converter||function Ln(i,e){i||Nt()}(void 0!==t),t}}class Ha{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new av(e)}where(e,t,o){try{return new Ha(this.firestore,md(this._delegate,function MC(i,e,t){const o=e,a=Vy("where",i);return op._create(a,o,t)}(e,t,o)))}catch(a){throw pa(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ha(this.firestore,md(this._delegate,function hT(i,e="asc"){const t=e,o=Vy("orderBy",i);return sp._create(o,t)}(e,t)))}catch(o){throw pa(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ha(this.firestore,md(this._delegate,function fT(i){return nT("limit",i),om._create("limit",i,"F")}(e)))}catch(t){throw pa(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ha(this.firestore,md(this._delegate,function OC(i){return nT("limitToLast",i),om._create("limitToLast",i,"L")}(e)))}catch(t){throw pa(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ha(this.firestore,md(this._delegate,function YD(...i){return sm._create("startAt",i,!0)}(...e)))}catch(t){throw pa(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ha(this.firestore,md(this._delegate,function By(...i){return sm._create("startAfter",i,!1)}(...e)))}catch(t){throw pa(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ha(this.firestore,md(this._delegate,function lp(...i){return ap._create("endBefore",i,!1)}(...e)))}catch(t){throw pa(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ha(this.firestore,md(this._delegate,function XD(...i){return ap._create("endAt",i,!0)}(...e)))}catch(t){throw pa(t,"endAt()","Query.endAt()")}}isEqual(e){return CC(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function rS(i){i=Ir(i,Go);const e=Ir(i.firestore,mi),t=Ji(e),o=new bh(e);return function Yw(i,e){const t=new $n;return i.asyncQueue.enqueueAndForget((0,we.A)(function*(){return(o=(0,we.A)(function*(c,d,g){try{const E=yield go(c,d,!0),S=new fy(d,E.Is),V=S.Va(E.documents),K=S.applyChanges(V,!1);g.resolve(K.snapshot)}catch(E){const S=Hl(E,`Failed to execute query '${d} against cache`);g.reject(S)}}),function a(c,d,g){return o.apply(this,arguments)})(yield Mu(i),e,t);var o})),t.promise}(t,i._query).then(a=>new Th(e,o,i,a))}(this._delegate):"server"===e?.source?function iS(i){i=Ir(i,Go);const e=Ir(i.firestore,mi),t=Ji(e),o=new bh(e);return Zg(t,i._query,{source:"server"}).then(a=>new Th(e,o,i,a))}(this._delegate):function nS(i){i=Ir(i,Go);const e=Ir(i.firestore,mi),t=Ji(e),o=new bh(e);return rm(i._query),Zg(t,i._query).then(a=>new Th(e,o,i,a))}(this._delegate),t.then(o=>new lv(this.firestore,new Th(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=HT(e),o=ga(e,a=>new lv(this.firestore,new Th(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return NC(this._delegate,t,o)}withConverter(e){return new Ha(this.firestore,this._delegate.withConverter(e?yd.getInstance(this.firestore,e):null))}}class sI{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new bm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class lv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ha(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new bm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new sI(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new bm(this._firestore,o))})}isEqual(e){return eS(this._delegate,e._delegate)}}class Cp extends Ha{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new fl(this.firestore,e):null}doc(e){try{return new fl(this.firestore,void 0===e?My(this._delegate):My(this._delegate,e))}catch(t){throw pa(t,"doc()","CollectionReference.doc()")}}add(e){return function _T(i,e){const t=Ir(i.firestore,mi),o=My(i),a=lm(i.converter,e);return dm(t,[Ch(xu(i.firestore),"addDoc",o._key,a,null!==i.converter,{}).toMutation(o._key,oi.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new fl(this.firestore,t))}isEqual(e){return iT(this._delegate,e._delegate)}withConverter(e){return new Cp(this.firestore,this._delegate.withConverter(e?yd.getInstance(this.firestore,e):null))}}function Mh(i){return Ir(i,Fi)}class aI{constructor(...e){this._delegate=new Wl(...e)}static documentId(){return new aI(_r.keyField().canonicalString())}isEqual(e){return(e=(0,te.Ku)(e))instanceof Wl&&this._delegate._internalPath.isEqual(e._internalPath)}}class vd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function cp(){return new lT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new vd(e)}static delete(){const e=function lS(){return new ku("deleteField")}();return e._methodName="FieldValue.delete",new vd(e)}static arrayUnion(...e){const t=function cS(...i){return new tm("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new vd(t)}static arrayRemove(...e){const t=function uS(...i){return new Ih("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new vd(t)}static increment(e){const t=function VC(i){return new AC("increment",i)}(e);return t._methodName="FieldValue.increment",new vd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const DS={Firestore:oI,GeoPoint:Zf,Timestamp:On,Blob:Sh,Transaction:jT,WriteBatch:$T,DocumentReference:fl,DocumentSnapshot:Tm,Query:Ha,QueryDocumentSnapshot:bm,QuerySnapshot:lv,CollectionReference:Cp,FieldPath:aI,FieldValue:vd,setLogLevel:function PS(i){!function Vr(i){Dr.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};function GT(i,e){return function MS(i,e=dp){return new yp.c(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{o?.()}})}(i,e)}function cI(i,e){return GT(i,e).pipe((0,zi.T)(t=>({payload:t,type:"query"})))}!function lI(i){(function SS(i,e){i.INTERNAL.registerComponent(new ar.uA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(o,a)},"PUBLIC").setServiceProps(Object.assign({},DS)))})(i,(e,t)=>new oI(e,t,new AS)),i.registerVersion("@firebase/firestore-compat","0.3.34")}(qc.A);class zT{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:a,query:c}=Pm(o,t);return new Am(a,c,this.afs)}snapshotChanges(){return function OS(i,e){return GT(i,e).pipe((0,iv.Z)(void 0),tI(),(0,zi.T)(t=>{const[o,a]=t;return a.exists?o?.exists?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(So)}valueChanges(e={}){return this.snapshotChanges().pipe((0,zi.T)(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return(0,Ph.H)(this.ref.get(e)).pipe(So)}}function pl(i,e){return cI(i,e).pipe((0,iv.Z)(void 0),tI(),(0,zi.T)(t=>{const[o,a]=t,c=a.payload.docChanges(),d=c.map(g=>({type:g.type,payload:g}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((g,E)=>{const S=c.find(K=>K.doc.ref.isEqual(g.ref)),V=o?.payload.docs.find(K=>K.ref.isEqual(g.ref));S&&JSON.stringify(S.doc.metadata)===JSON.stringify(g.metadata)||!S&&V&&JSON.stringify(V.metadata)===JSON.stringify(g.metadata)||d.push({type:"modified",payload:{oldIndex:E,newIndex:E,type:"modified",doc:g}})}),d}))}function cv(i,e,t){return pl(i,t).pipe((0,_d.S)((o,a)=>function RS(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function WT(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return uI(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return uI(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return uI(i,e.oldIndex,1)}return i}(i,o))}),i}(o,a.map(c=>c.payload),e),[]),ov(),(0,zi.T)(o=>o.map(a=>({type:a.type,payload:a}))))}function uI(i,e,t,...o){const a=i.slice();return a.splice(e,t,...o),a}function dI(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Am{ref;query;afs;constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=pl(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,zi.T)(o=>o.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,iv.Z)(void 0),tI(),(0,ev.p)(([o,a])=>a.length>0||!o),(0,zi.T)(([,o])=>o),So)}auditTrail(e){return this.stateChanges(e).pipe((0,_d.S)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=dI(e);return cv(this.query,t,this.afs.schedulers.outsideAngular).pipe(So)}valueChanges(e={}){return cI(this.query,this.afs.schedulers.outsideAngular).pipe((0,zi.T)(t=>t.payload.docs.map(o=>e.idField?{...o.data(),[e.idField]:o.id}:o.data())),So)}get(e){return(0,Ph.H)(this.query.get(e)).pipe(So)}add(e){return this.ref.add(e)}doc(e){return new zT(this.ref.doc(e),this.afs)}}class hI{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?pl(this.query,this.afs.schedulers.outsideAngular).pipe((0,zi.T)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,ev.p)(t=>t.length>0),So):pl(this.query,this.afs.schedulers.outsideAngular).pipe(So)}auditTrail(e){return this.stateChanges(e).pipe((0,_d.S)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=dI(e);return cv(this.query,t,this.afs.schedulers.outsideAngular).pipe(So)}valueChanges(e={}){return cI(this.query,this.afs.schedulers.outsideAngular).pipe((0,zi.T)(o=>o.payload.docs.map(a=>e.idField?{[e.idField]:a.id,...a.data()}:a.data())),So)}get(e){return(0,Ph.H)(this.query.get(e)).pipe(So)}}const FN=new m.nKC("angularfire2.enableFirestorePersistence"),KT=new m.nKC("angularfire2.firestore.persistenceSettings"),qT=new m.nKC("angularfire2.firestore.settings"),QT=new m.nKC("angularfire2.firestore.use-emulator");function Pm(i,e=(t=>t)){return{query:e(i),ref:i}}let fI=(()=>{class i{schedulers;firestore;persistenceEnabled$;constructor(t,o,a,c,d,g,E,S,V,K,ee,de,Re,$e,qe,kt,Xt){this.schedulers=E;const St=mp(t,g,o),gn=V;K&&rv(St,g,ee,Re,$e,qe,de,kt),[this.firestore,this.persistenceEnabled$]=KC(`${St.name}.firestore`,"AngularFirestore",St.name,()=>{const Yn=g.runOutsideAngular(()=>St.firestore());if(c&&Yn.settings(c),gn&&Yn.useEmulator(...gn),a&&!(0,De.Vy)(d)){const er=()=>{try{return(0,Ph.H)(Yn.enablePersistence(S||void 0).then(()=>!0,()=>!1))}catch(xe){return typeof console<"u"&&console.warn(xe),(0,Qc.of)(!1)}};return[Yn,g.runOutsideAngular(er)]}return[Yn,(0,Qc.of)(!1)]},[c,gn,a])}collection(t,o){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:d}=Pm(a,o),g=this.schedulers.ngZone.run(()=>c);return new Am(g,d,this)}collectionGroup(t,o){const a=o||(d=>d),c=this.firestore.collectionGroup(t);return new hI(a(c),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>o);return new zT(a,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||i)(m.KVO(gm),m.KVO(gp,8),m.KVO(FN,8),m.KVO(qT,8),m.KVO(m.Agw),m.KVO(m.SKi),m.KVO(MT),m.KVO(KT,8),m.KVO(QT,8),m.KVO(Em,8),m.KVO(JC,8),m.KVO(ZC,8),m.KVO(eI,8),m.KVO(tv,8),m.KVO(nv,8),m.KVO(sr,8),m.KVO($a,8))};static \u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})(),NS=(()=>{class i{constructor(t){this.firestore=t}getPosts(t=10,o){return this.firestore.collection("posts",c=>{let d=c.orderBy("timestamp","desc").limit(t);return o&&(d=d.startAfter(o)),d}).get().pipe((0,zi.T)(c=>c.docs.map(d=>({...d.data(),id:d.id}))))}addPost(t){return this.firestore.collection("posts").add(t).then(()=>console.log("Post added successfully")).catch(o=>console.error("Error adding post:",o))}deletePost(t){return this.firestore.collection("posts").doc(t).delete().then(()=>console.log("Post deleted")).catch(o=>console.error("Error deleting post:",o))}toggleLike(t,o){const a=this.firestore.collection("posts").doc(t).ref;return this.firestore.firestore.runTransaction(function(){var c=(0,we.A)(function*(d){const g=yield d.get(a);if(!g.exists)return;const S=g.data().likes||{};S[o]?delete S[o]:S[o]=!0,d.update(a,{likes:S})});return function(d){return c.apply(this,arguments)}}())}getComments(t){return this.firestore.collection(`posts/${t}/comments`,o=>o.orderBy("timestamp","asc")).valueChanges({idField:"id"})}addComment(t,o){return this.firestore.collection(`posts/${t}/comments`).add(o).then(()=>console.log("Comment added successfully")).catch(a=>console.error("Error adding comment:",a))}static#e=this.\u0275fac=function(o){return new(o||i)(m.KVO(fI))};static#t=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var xS=J(4412),pI=J(8810),kS=J(9437);const Oh_firebaseConfig={apiKey:"AIzaSyC9rn4K-vmkdd8KnJoEFpNolJu-oXO3GFY",authDomain:"boblovers2-815af.firebaseapp.com",projectId:"boblovers2-815af",storageBucket:"boblovers2-815af.firebasestorage.app",messagingSenderId:"281124227593",appId:"1:281124227593:web:13804a8453f5931f8806d8",measurementId:"G-WTYRTMW5H3"};var YT=J(274),Cd=J(980);class Uu{}class Ip{}class Qs{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const o=t.indexOf(":");if(o>0){const a=t.slice(0,o),c=a.toLowerCase(),d=t.slice(o+1).trim();this.maybeSetNormalizedName(a,c),this.headers.has(c)?this.headers.get(c).push(d):this.headers.set(c,[d])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,o)=>{this.setHeaderEntries(o,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,o])=>{this.setHeaderEntries(t,o)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Qs?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Qs;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Qs?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let o=e.value;if("string"==typeof o&&(o=[o]),0===o.length)return;this.maybeSetNormalizedName(e.name,t);const a=("a"===e.op?this.headers.get(t):void 0)||[];a.push(...o),this.headers.set(t,a);break;case"d":const c=e.value;if(c){let d=this.headers.get(t);if(!d)return;d=d.filter(g=>-1===c.indexOf(g)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const o=(Array.isArray(t)?t:[t]).map(c=>c.toString()),a=e.toLowerCase();this.headers.set(a,o),this.maybeSetNormalizedName(e,a)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class XT{encodeKey(e){return JT(e)}encodeValue(e){return JT(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const VS=/%(\d[a-f0-9])/gi,US={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function JT(i){return encodeURIComponent(i).replace(VS,(e,t)=>US[t]??e)}function uv(i){return`${i}`}class wc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new XT,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function LS(i,e){const t=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(a=>{const c=a.indexOf("="),[d,g]=-1==c?[e.decodeKey(a),""]:[e.decodeKey(a.slice(0,c)),e.decodeValue(a.slice(c+1))],E=t.get(d)||[];E.push(g),t.set(d,E)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const o=e.fromObject[t],a=Array.isArray(o)?o.map(uv):[uv(o)];this.map.set(t,a)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(o=>{const a=e[o];Array.isArray(a)?a.forEach(c=>{t.push({param:o,value:c,op:"a"})}):t.push({param:o,value:a,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(o=>t+"="+this.encoder.encodeValue(o)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new wc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(uv(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let o=this.map.get(e.param)||[];const a=o.indexOf(uv(e.value));-1!==a&&o.splice(a,1),o.length>0?this.map.set(e.param,o):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class ZT{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function eb(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function gI(i){return typeof Blob<"u"&&i instanceof Blob}function tb(i){return typeof FormData<"u"&&i instanceof FormData}class wp{constructor(e,t,o,a){let c;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function BS(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==o?o:null,c=a):c=o,c&&(this.reportProgress=!!c.reportProgress,this.withCredentials=!!c.withCredentials,c.responseType&&(this.responseType=c.responseType),c.headers&&(this.headers=c.headers),c.context&&(this.context=c.context),c.params&&(this.params=c.params),this.transferCache=c.transferCache),this.headers??=new Qs,this.context??=new ZT,this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+d}}else this.params=new wc,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||eb(this.body)||gI(this.body)||tb(this.body)||function jS(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)?this.body:this.body instanceof wc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||tb(this.body)?null:gI(this.body)?this.body.type||null:eb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof wc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,o=e.url||this.url,a=e.responseType||this.responseType,c=e.transferCache??this.transferCache,d=void 0!==e.body?e.body:this.body,g=e.withCredentials??this.withCredentials,E=e.reportProgress??this.reportProgress;let S=e.headers||this.headers,V=e.params||this.params;const K=e.context??this.context;return void 0!==e.setHeaders&&(S=Object.keys(e.setHeaders).reduce((ee,de)=>ee.set(de,e.setHeaders[de]),S)),e.setParams&&(V=Object.keys(e.setParams).reduce((ee,de)=>ee.set(de,e.setParams[de]),V)),new wp(t,o,d,{params:V,headers:S,context:K,reportProgress:E,responseType:a,withCredentials:g,transferCache:c})}}var Yc=function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i}(Yc||{});class dv{constructor(e,t=200,o="OK"){this.headers=e.headers||new Qs,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||o,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Id extends dv{constructor(e={}){super(e),this.type=Yc.ResponseHeader}clone(e={}){return new Id({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Tc extends dv{constructor(e={}){super(e),this.type=Yc.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Tc({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Xc extends dv{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Tp(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials,transferCache:i.transferCache}}let hv=(()=>{class i{constructor(t){this.handler=t}request(t,o,a={}){let c;if(t instanceof wp)c=t;else{let E,S;E=a.headers instanceof Qs?a.headers:new Qs(a.headers),a.params&&(S=a.params instanceof wc?a.params:new wc({fromObject:a.params})),c=new wp(t,o,void 0!==a.body?a.body:null,{headers:E,context:a.context,params:S,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials,transferCache:a.transferCache})}const d=(0,Qc.of)(c).pipe((0,YT.H)(E=>this.handler.handle(E)));if(t instanceof wp||"events"===a.observe)return d;const g=d.pipe((0,ev.p)(E=>E instanceof Tc));switch(a.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return g.pipe((0,zi.T)(E=>{if(null!==E.body&&!(E.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return E.body}));case"blob":return g.pipe((0,zi.T)(E=>{if(null!==E.body&&!(E.body instanceof Blob))throw new Error("Response is not a Blob.");return E.body}));case"text":return g.pipe((0,zi.T)(E=>{if(null!==E.body&&"string"!=typeof E.body)throw new Error("Response is not a string.");return E.body}));default:return g.pipe((0,zi.T)(E=>E.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(t,o={}){return this.request("DELETE",t,o)}get(t,o={}){return this.request("GET",t,o)}head(t,o={}){return this.request("HEAD",t,o)}jsonp(t,o){return this.request("JSONP",t,{params:(new wc).append(o,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,o={}){return this.request("OPTIONS",t,o)}patch(t,o,a={}){return this.request("PATCH",t,Tp(a,o))}post(t,o,a={}){return this.request("POST",t,Tp(a,o))}put(t,o,a={}){return this.request("PUT",t,Tp(a,o))}static#e=this.\u0275fac=function(o){return new(o||i)(m.KVO(Uu))};static#t=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac})}return i})();const GS=/^\)\]\}',?\n/;function zS(i){if(i.url)return i.url;const e="X-Request-URL".toLocaleLowerCase();return i.headers.get(e)}let mI=(()=>{class i{constructor(){this.fetchImpl=(0,m.WQX)(WS,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=(0,m.WQX)(m.SKi)}handle(t){return new yp.c(o=>{const a=new AbortController;return this.doRequest(t,a.signal,o).then(rb,c=>o.error(new Xc({error:c}))),()=>a.abort()})}doRequest(t,o,a){var c=this;return(0,we.A)(function*(){const d=c.createRequestInit(t);let g;try{const Re=c.fetchImpl(t.urlWithParams,{signal:o,...d});(function KS(i){i.then(rb,rb)})(Re),a.next({type:Yc.Sent}),g=yield Re}catch(Re){return void a.error(new Xc({error:Re,status:Re.status??0,statusText:Re.statusText,url:t.urlWithParams,headers:Re.headers}))}const E=new Qs(g.headers),S=g.statusText,V=zS(g)??t.urlWithParams;let K=g.status,ee=null;if(t.reportProgress&&a.next(new Id({headers:E,status:K,statusText:S,url:V})),g.body){const Re=g.headers.get("content-length"),$e=[],qe=g.body.getReader();let Xt,St,kt=0;const gn=typeof Zone<"u"&&Zone.current;yield c.ngZone.runOutsideAngular((0,we.A)(function*(){for(;;){const{done:er,value:xe}=yield qe.read();if(er)break;if($e.push(xe),kt+=xe.length,t.reportProgress){St="text"===t.responseType?(St??"")+(Xt??=new TextDecoder).decode(xe,{stream:!0}):void 0;const me=()=>a.next({type:Yc.DownloadProgress,total:Re?+Re:void 0,loaded:kt,partialText:St});gn?gn.run(me):me()}}}));const Yn=c.concatChunks($e,kt);try{const er=g.headers.get("Content-Type")??"";ee=c.parseBody(t,Yn,er)}catch(er){return void a.error(new Xc({error:er,headers:new Qs(g.headers),status:g.status,statusText:g.statusText,url:zS(g)??t.urlWithParams}))}}0===K&&(K=ee?200:0),K>=200&&K<300?(a.next(new Tc({body:ee,headers:E,status:K,statusText:S,url:V})),a.complete()):a.error(new Xc({error:ee,headers:E,status:K,statusText:S,url:V}))})()}parseBody(t,o,a){switch(t.responseType){case"json":const c=(new TextDecoder).decode(o).replace(GS,"");return""===c?null:JSON.parse(c);case"text":return(new TextDecoder).decode(o);case"blob":return new Blob([o],{type:a});case"arraybuffer":return o.buffer}}createRequestInit(t){const o={},a=t.withCredentials?"include":void 0;if(t.headers.forEach((c,d)=>o[c]=d.join(",")),o.Accept??="application/json, text/plain, */*",!o["Content-Type"]){const c=t.detectContentTypeHeader();null!==c&&(o["Content-Type"]=c)}return{body:t.serializeBody(),method:t.method,headers:o,credentials:a}}concatChunks(t,o){const a=new Uint8Array(o);let c=0;for(const d of t)a.set(d,c),c+=d.length;return a}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac})}return i})();class WS{}function rb(){}function qS(i,e){return e(i)}function QS(i,e){return(t,o)=>e.intercept(t,{handle:a=>i(a,o)})}const XS=new m.nKC(""),Rh=new m.nKC(""),bp=new m.nKC(""),fv=new m.nKC("",{providedIn:"root",factory:()=>!0});function pv(){let i=null;return(e,t)=>{null===i&&(i=((0,m.WQX)(XS,{optional:!0})??[]).reduceRight(QS,qS));const o=(0,m.WQX)(m.TgB);if((0,m.WQX)(fv)){const c=o.add();return i(e,t).pipe((0,Cd.j)(()=>o.remove(c)))}return i(e,t)}}let _I=(()=>{class i extends Uu{constructor(t,o){super(),this.backend=t,this.injector=o,this.chain=null,this.pendingTasks=(0,m.WQX)(m.TgB),this.contributeToStability=(0,m.WQX)(fv)}handle(t){if(null===this.chain){const o=Array.from(new Set([...this.injector.get(Rh),...this.injector.get(bp,[])]));this.chain=o.reduceRight((a,c)=>function YS(i,e,t){return(o,a)=>(0,m.N4e)(t,()=>e(o,c=>i(c,a)))}(a,c,this.injector),qS)}if(this.contributeToStability){const o=this.pendingTasks.add();return this.chain(t,a=>this.backend.handle(a)).pipe((0,Cd.j)(()=>this.pendingTasks.remove(o)))}return this.chain(t,o=>this.backend.handle(o))}static#e=this.\u0275fac=function(o){return new(o||i)(m.KVO(Ip),m.KVO(m.uvJ))};static#t=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac})}return i})();const iM=/^\)\]\}',?\n/;let Sm=(()=>{class i{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new m.wOt(-2800,!1);const o=this.xhrFactory;return(o.\u0275loadImpl?(0,Ph.H)(o.\u0275loadImpl()):(0,Qc.of)(null)).pipe((0,Kl.n)(()=>new yp.c(c=>{const d=o.build();if(d.open(t.method,t.urlWithParams),t.withCredentials&&(d.withCredentials=!0),t.headers.forEach(($e,qe)=>d.setRequestHeader($e,qe.join(","))),t.headers.has("Accept")||d.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const $e=t.detectContentTypeHeader();null!==$e&&d.setRequestHeader("Content-Type",$e)}if(t.responseType){const $e=t.responseType.toLowerCase();d.responseType="json"!==$e?$e:"text"}const g=t.serializeBody();let E=null;const S=()=>{if(null!==E)return E;const $e=d.statusText||"OK",qe=new Qs(d.getAllResponseHeaders()),kt=function oM(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(d)||t.url;return E=new Id({headers:qe,status:d.status,statusText:$e,url:kt}),E},V=()=>{let{headers:$e,status:qe,statusText:kt,url:Xt}=S(),St=null;204!==qe&&(St=typeof d.response>"u"?d.responseText:d.response),0===qe&&(qe=St?200:0);let gn=qe>=200&&qe<300;if("json"===t.responseType&&"string"==typeof St){const Yn=St;St=St.replace(iM,"");try{St=""!==St?JSON.parse(St):null}catch(er){St=Yn,gn&&(gn=!1,St={error:er,text:St})}}gn?(c.next(new Tc({body:St,headers:$e,status:qe,statusText:kt,url:Xt||void 0})),c.complete()):c.error(new Xc({error:St,headers:$e,status:qe,statusText:kt,url:Xt||void 0}))},K=$e=>{const{url:qe}=S(),kt=new Xc({error:$e,status:d.status||0,statusText:d.statusText||"Unknown Error",url:qe||void 0});c.error(kt)};let ee=!1;const de=$e=>{ee||(c.next(S()),ee=!0);let qe={type:Yc.DownloadProgress,loaded:$e.loaded};$e.lengthComputable&&(qe.total=$e.total),"text"===t.responseType&&d.responseText&&(qe.partialText=d.responseText),c.next(qe)},Re=$e=>{let qe={type:Yc.UploadProgress,loaded:$e.loaded};$e.lengthComputable&&(qe.total=$e.total),c.next(qe)};return d.addEventListener("load",V),d.addEventListener("error",K),d.addEventListener("timeout",K),d.addEventListener("abort",K),t.reportProgress&&(d.addEventListener("progress",de),null!==g&&d.upload&&d.upload.addEventListener("progress",Re)),d.send(g),c.next({type:Yc.Sent}),()=>{d.removeEventListener("error",K),d.removeEventListener("abort",K),d.removeEventListener("load",V),d.removeEventListener("timeout",K),t.reportProgress&&(d.removeEventListener("progress",de),null!==g&&d.upload&&d.upload.removeEventListener("progress",Re)),d.readyState!==d.DONE&&d.abort()}})))}static#e=this.\u0275fac=function(o){return new(o||i)(m.KVO(De.N0))};static#t=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac})}return i})();const _v=new m.nKC(""),yI=new m.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),vI=new m.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class ab{}let aM=(()=>{class i{constructor(t,o,a){this.doc=t,this.platform=o,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,De._b)(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(o){return new(o||i)(m.KVO(De.qQ),m.KVO(m.Agw),m.KVO(yI))};static#t=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac})}return i})();function lM(i,e){const t=i.url.toLowerCase();if(!(0,m.WQX)(_v)||"GET"===i.method||"HEAD"===i.method||t.startsWith("http://")||t.startsWith("https://"))return e(i);const o=(0,m.WQX)(ab).getToken(),a=(0,m.WQX)(vI);return null!=o&&!i.headers.has(a)&&(i=i.clone({headers:i.headers.set(a,o)})),e(i)}var Jc=function(i){return i[i.Interceptors=0]="Interceptors",i[i.LegacyInterceptors=1]="LegacyInterceptors",i[i.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",i[i.NoXsrfProtection=3]="NoXsrfProtection",i[i.JsonpSupport=4]="JsonpSupport",i[i.RequestsMadeViaParent=5]="RequestsMadeViaParent",i[i.Fetch=6]="Fetch",i}(Jc||{});function lb(...i){const e=[hv,Sm,_I,{provide:Uu,useExisting:_I},{provide:Ip,useFactory:()=>(0,m.WQX)(mI,{optional:!0})??(0,m.WQX)(Sm)},{provide:Rh,useValue:lM,multi:!0},{provide:_v,useValue:!0},{provide:ab,useClass:aM}];for(const t of i)e.push(...t.\u0275providers);return(0,m.EmA)(e)}const Ap=new m.nKC("");function yv(){return function bc(i,e){return{\u0275kind:i,\u0275providers:e}}(Jc.LegacyInterceptors,[{provide:Ap,useFactory:pv},{provide:Rh,useExisting:Ap,multi:!0}])}let dM=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=m.$C({type:i});static#n=this.\u0275inj=m.G2t({providers:[lb(yv())]})}return i})(),Iv=(()=>{class i{constructor(t,o,a){this.afAuth=t,this.router=o,this.http=a,this.serverUrl="https://pi.boblovers.com",this.loggedIn=new xS.t(!1),this.afAuth.authState.subscribe(c=>{this.loggedIn.next(!!c)})}isLoggedIn(){return this.loggedIn.asObservable()}signup(t,o,a,c=""){var d=this;return(0,we.A)(function*(){try{yield(yield d.afAuth.createUserWithEmailAndPassword(t,o)).user?.updateProfile({displayName:a,photoURL:c}),alert("Signup successful!"),yield d.router.navigate(["/profile"])}catch(g){alert(g.message)}})()}login(t,o){var a=this;return(0,we.A)(function*(){try{yield a.afAuth.signInWithEmailAndPassword(t,o),yield a.router.navigate(["/profile"])}catch(c){alert(c.message)}})()}logout(){var t=this;return(0,we.A)(function*(){yield t.afAuth.signOut(),yield t.router.navigate(["/login"])})()}getUserProfile(){return this.afAuth.authState}uploadProfilePicture(t){const a=new FormData;return a.append("file",t),this.http.post("https://pi.boblovers.com/upload",a).pipe((0,zi.T)(c=>c.url?{url:`https://pi.boblovers.com/uploads/${c.url.split("/").pop()}`}:{url:""}),(0,kS.W)(c=>(console.error("Error uploading image:",c),(0,pI.$)(()=>new Error("Image upload failed")))))}updateProfile(t,o){var a=this;return(0,we.A)(function*(){const c=yield a.afAuth.currentUser;c&&(yield c.updateProfile({displayName:t,photoURL:o}))})()}getCurrentUserUid(){var t=this;return(0,we.A)(function*(){const o=yield t.afAuth.currentUser;return o?o.uid:null})()}static#e=this.\u0275fac=function(o){return new(o||i)(m.KVO(Em),m.KVO(B.Ix),m.KVO(hv))};static#t=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function _M(i,e){if(1&i&&m.nrm(0,"img",11),2&i){const t=m.XpG();m.Y8G("src",t.userPhotoURL,m.B4B)}}function yM(i,e){if(1&i&&(m.j41(0,"span"),m.EFF(1),m.k0s()),2&i){const t=m.XpG();m.R7$(),m.JRh(t.userName)}}function gb(i,e){1&i&&(m.j41(0,"div",12)(1,"p"),m.EFF(2,"No posts yet! Be the first to share a thought about Bob."),m.k0s()())}function vM(i,e){1&i&&(m.j41(0,"div",13)(1,"p"),m.EFF(2,"Loading posts..."),m.k0s()())}function mb(i,e){if(1&i&&m.nrm(0,"img",11),2&i){const t=m.XpG().$implicit;m.Y8G("src",t.photoURL,m.B4B)}}function wv(i,e){if(1&i&&(m.j41(0,"div",24)(1,"p")(2,"strong"),m.EFF(3),m.k0s(),m.EFF(4),m.k0s()()),2&i){const t=e.$implicit;m.R7$(3),m.JRh(t.displayName||"Anonymous"),m.R7$(),m.SpI(": ",t.content,"")}}function EM(i,e){if(1&i&&(m.j41(0,"div"),m.DNE(1,wv,5,2,"div",23),m.k0s()),2&i){const t=m.XpG().$implicit;m.R7$(),m.Y8G("ngForOf",t.comments)}}function CM(i,e){if(1&i){const t=m.RV6();m.j41(0,"div",14)(1,"div",15),m.DNE(2,mb,1,1,"img",3),m.j41(3,"span",16),m.EFF(4),m.k0s(),m.j41(5,"span",17),m.EFF(6),m.nI1(7,"date"),m.k0s()(),m.j41(8,"p",18),m.EFF(9),m.k0s(),m.j41(10,"div",19)(11,"button",20),m.bIt("click",function(){const a=m.eBV(t).$implicit,c=m.XpG();return m.Njj(c.toggleLike(a.id))}),m.EFF(12),m.k0s(),m.j41(13,"span"),m.EFF(14),m.k0s()(),m.j41(15,"div",21)(16,"button",20),m.bIt("click",function(){const a=m.eBV(t).$implicit,c=m.XpG();return m.Njj(c.loadComments(a.id))}),m.EFF(17,"View Comments"),m.k0s(),m.DNE(18,EM,2,1,"div",4),m.j41(19,"input",22),m.mxI("ngModelChange",function(a){const c=m.eBV(t).$implicit,d=m.XpG();return m.DH7(d.newComment[c.id||""],a)||(d.newComment[c.id||""]=a),m.Njj(a)}),m.k0s(),m.j41(20,"button",6),m.bIt("click",function(){const a=m.eBV(t).$implicit,c=m.XpG();return m.Njj(c.addComment(a.id))}),m.EFF(21,"Comment"),m.k0s()(),m.j41(22,"button",20),m.bIt("click",function(){const a=m.eBV(t).$implicit,c=m.XpG();return m.Njj(c.deletePost(a.id))}),m.EFF(23,"Delete"),m.k0s()()}if(2&i){const t=e.$implicit,o=m.XpG();m.Y8G("@fadeSlideIn",void 0),m.R7$(2),m.Y8G("ngIf",t.photoURL),m.R7$(2),m.JRh(t.displayName||"Anonymous"),m.R7$(2),m.JRh(m.i5U(7,11,o.convertTimestampToDate(t.timestamp),"medium")),m.R7$(3),m.JRh(t.content),m.R7$(3),m.SpI(" ",t.likes&&o.userId&&t.likes[o.userId]?"\u{1f494} Unlike":"\u2764\ufe0f Like"," "),m.R7$(2),m.Lme(" ",t.likes?o.getObjectKeys(t.likes).length:0," ",t.likes&&1===o.getObjectKeys(t.likes).length?"Like":"Likes"," "),m.R7$(4),m.Y8G("ngIf",t.comments),m.R7$(),m.R50("ngModel",o.newComment[t.id||""]),m.R7$(),m.Y8G("disabled",!(null!=o.newComment[t.id||""]&&o.newComment[t.id||""].trim()))}}function _b(i,e){if(1&i){const t=m.RV6();m.j41(0,"div",25)(1,"button",20),m.bIt("click",function(){m.eBV(t);const a=m.XpG();return m.Njj(a.loadPosts())}),m.EFF(2,"Load More"),m.k0s()()}}let IM=(()=>{class i{constructor(t,o){this.firebaseService=t,this.authService=o,this.posts=[],this.newPost="",this.userPhotoURL=null,this.userName=null,this.userId=null,this.lastVisible=null,this.isLoading=!1,this.newComment={}}ngOnInit(){this.authService.getUserProfile().subscribe(t=>{t&&(this.userPhotoURL=t.photoURL||"assets/default-profile.png",this.userName=t.displayName||"Anonymous",this.userId=t.uid)}),this.loadPosts()}loadPosts(){this.isLoading||(this.isLoading=!0,this.firebaseService.getPosts(10,this.lastVisible).subscribe(t=>{t.length>0&&(this.lastVisible=t[t.length-1].timestamp,this.posts=[...this.posts,...t]),this.isLoading=!1}))}addPost(){this.newPost.trim()&&this.firebaseService.addPost({content:this.newPost,displayName:this.userName,photoURL:this.userPhotoURL,timestamp:new Date,likes:{}}).then(()=>{this.newPost=""})}deletePost(t){t&&this.firebaseService.deletePost(t).then(()=>{this.posts=this.posts.filter(o=>o.id!==t)})}toggleLike(t){if(!t||!this.userId)return;const o=this.userId,a=this.posts.find(d=>d.id===t);if(!a)return;const c=a.likes?.[o]??!1;a.likes||(a.likes={}),c?delete a.likes[o]:a.likes[o]=!0,this.firebaseService.toggleLike(t,o).catch(d=>{console.error("Error toggling like:",d),a.likes&&(c?a.likes[o]=!0:delete a.likes[o])})}loadComments(t){t&&this.firebaseService.getComments(t).subscribe(o=>{const a=this.posts.find(c=>c.id===t);a&&(a.comments=o)})}addComment(t){t&&this.newComment[t||""]?.trim()&&this.firebaseService.addComment(t,{content:this.newComment[t||""],displayName:this.userName,timestamp:new Date}).then(()=>{this.newComment[t||""]=""})}convertTimestampToDate(t){return t instanceof On?t.toDate():t}getObjectKeys(t){return t?Object.keys(t):[]}static#e=this.\u0275fac=function(o){return new(o||i)(m.rXU(NS),m.rXU(Iv))};static#t=this.\u0275cmp=m.VBU({type:i,selectors:[["app-blog"]],decls:14,vars:8,consts:[[1,"blog-container"],[1,"post-creator"],[1,"user-info"],["alt","User Profile","class","profile-pic",3,"src",4,"ngIf"],[4,"ngIf"],["placeholder","Write your thoughts here...",3,"ngModelChange","ngModel"],[3,"click","disabled"],["class","empty-state",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","post-card",4,"ngFor","ngForOf"],["class","load-more",4,"ngIf"],["alt","User Profile",1,"profile-pic",3,"src"],[1,"empty-state"],[1,"loading-state"],[1,"post-card"],[1,"post-header"],[1,"post-author"],[1,"post-date"],[1,"post-content"],[1,"post-actions"],[3,"click"],[1,"comments-section"],["placeholder","Write a comment...",3,"ngModelChange","ngModel"],["class","comment",4,"ngFor","ngForOf"],[1,"comment"],[1,"load-more"]],template:function(o,a){1&o&&(m.j41(0,"div",0)(1,"h2"),m.EFF(2,"Welcome to the Blob"),m.k0s(),m.j41(3,"div",1)(4,"div",2),m.DNE(5,_M,1,1,"img",3)(6,yM,2,1,"span",4),m.k0s(),m.j41(7,"textarea",5),m.mxI("ngModelChange",function(d){return m.DH7(a.newPost,d)||(a.newPost=d),d}),m.k0s(),m.j41(8,"button",6),m.bIt("click",function(){return a.addPost()}),m.EFF(9,"Post"),m.k0s()(),m.DNE(10,gb,3,0,"div",7)(11,vM,3,0,"div",8)(12,CM,24,14,"div",9)(13,_b,3,0,"div",10),m.k0s()),2&o&&(m.R7$(5),m.Y8G("ngIf",a.userPhotoURL),m.R7$(),m.Y8G("ngIf",a.userName),m.R7$(),m.R50("ngModel",a.newPost),m.R7$(),m.Y8G("disabled",!a.newPost.trim()),m.R7$(2),m.Y8G("ngIf",0===a.posts.length&&!a.isLoading),m.R7$(),m.Y8G("ngIf",a.isLoading),m.R7$(),m.Y8G("ngForOf",a.posts),m.R7$(),m.Y8G("ngIf",!a.isLoading&&a.posts.length>0))},dependencies:[De.Sq,De.bT,Ct.me,Ct.BC,Ct.vS,De.vh],styles:[".highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}.blog-container[_ngcontent-%COMP%]{max-width:900px;margin:30px auto;padding:30px;background:linear-gradient(to bottom right,#fff,#f0f0f5);font-family:Roboto,sans-serif;border-radius:15px;box-shadow:0 10px 30px #0000001a;animation:_ngcontent-%COMP%_fadeIn .8s ease-in-out}.blog-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#eb94bd;margin-bottom:2rem;font-size:2.5rem;font-weight:700;text-transform:uppercase;letter-spacing:1px}.post-creator[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:25px;padding:25px;background-color:#fff;border-radius:12px;box-shadow:0 6px 15px #0000001a;transition:transform .3s}.post-creator[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.post-creator[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;margin-bottom:15px;box-shadow:0 4px 10px #0003;object-fit:cover;transition:transform .3s,box-shadow .3s}.post-creator[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]:hover{transform:scale(1.15);box-shadow:0 6px 15px #0000004d}.post-creator[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;max-width:750px;height:120px;padding:15px;font-size:1rem;border:2px solid #e2e8f0;border-radius:8px;margin-bottom:15px;resize:vertical;box-shadow:0 6px 10px #0000000d;transition:border-color .3s}.post-creator[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#eb94bd;outline:none;box-shadow:0 0 10px #eb94bd80}.post-creator[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eb94bd,#e369a2);color:#fff;padding:12px 25px;border:none;border-radius:8px;font-size:1rem;font-weight:700;cursor:pointer;transition:background .3s,transform .2s}.post-creator[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#df5495;transform:translateY(-3px)}.post-creator[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#fff;cursor:not-allowed;transform:none}.empty-state[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem;color:#51719a;margin-top:20px;animation:_ngcontent-%COMP%_fadeIn 1s ease-in-out}.post-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:linear-gradient(to bottom right,#fff,#f9f9fc);padding:25px;border-radius:12px;box-shadow:0 6px 15px #0000001a;margin:20px 0;transition:transform .3s,box-shadow .3s}.post-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #00000026}.post-card[_ngcontent-%COMP%]   .post-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px}.post-card[_ngcontent-%COMP%]   .post-header[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;margin-right:15px;box-shadow:0 3px 8px #0003;transition:transform .3s}.post-card[_ngcontent-%COMP%]   .post-header[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.post-card[_ngcontent-%COMP%]   .post-header[_ngcontent-%COMP%]   .post-author[_ngcontent-%COMP%]{font-weight:700;color:#eb94bd;font-size:1.2rem}.post-card[_ngcontent-%COMP%]   .post-header[_ngcontent-%COMP%]   .post-date[_ngcontent-%COMP%]{margin-left:auto;font-size:.9rem;color:#51719a}.post-card[_ngcontent-%COMP%]   .post-content[_ngcontent-%COMP%]{font-size:1rem;color:#333;line-height:1.8;word-wrap:break-word;margin-bottom:15px}.post-card[_ngcontent-%COMP%]   .post-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.post-card[_ngcontent-%COMP%]   .post-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;color:#eb94bd;font-weight:700;cursor:pointer;font-size:1rem;transition:color .3s}.post-card[_ngcontent-%COMP%]   .post-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#df5495}.post-card[_ngcontent-%COMP%]   .post-actions[_ngcontent-%COMP%]   .like-count[_ngcontent-%COMP%]{font-size:1rem;color:#2e4057}.post-card[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{background:none;border:none;color:#51719a;cursor:pointer;font-size:.9rem;position:absolute;bottom:15px;right:15px;transition:color .3s}.post-card[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]:hover{color:#eb94bd}.post-card[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]{margin-top:15px;border-top:1px solid white;padding-top:15px}.post-card[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;font-size:.9rem;border:1px solid white;border-radius:5px;margin-bottom:10px}.post-card[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#eb94bd;outline:none;box-shadow:0 0 8px #eb94bd66}.post-card[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#eb94bd;color:#fff;padding:8px 15px;border:none;border-radius:5px;font-size:.9rem;cursor:pointer;transition:background .3s}.post-card[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#e369a2}@media (max-width: 768px){.blog-container[_ngcontent-%COMP%]{padding:15px}.post-creator[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:.9rem;height:100px}.post-card[_ngcontent-%COMP%]{padding:20px}.post-card[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]{width:40px;height:40px}.post-card[_ngcontent-%COMP%]   .post-content[_ngcontent-%COMP%]{font-size:.9rem}.post-card[_ngcontent-%COMP%]   .post-date[_ngcontent-%COMP%]{font-size:.8rem}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}"],data:{animation:[(0,Ze.hZ)("fadeSlideIn",[(0,Ze.kY)(":enter",[(0,Ze.i0)("0.5s ease-out",(0,Ze.i7)([(0,Ze.iF)({opacity:0,transform:"translateY(20px)",offset:0}),(0,Ze.iF)({opacity:1,transform:"translateY(0)",offset:1})]))]),(0,Ze.kY)(":leave",[(0,Ze.i0)("0.3s ease-in",(0,Ze.iF)({opacity:0,transform:"translateY(-20px)"}))])])]}})}return i})();function wM(i,e){if(1&i&&(m.j41(0,"h2"),m.EFF(1),m.k0s()),2&i){const t=m.XpG();m.R7$(),m.JRh(t.isLoginMode?"Welcome Back!":"Join Us!")}}function xh(i,e){1&i&&(m.j41(0,"p"),m.EFF(1,"Please enter your login details"),m.k0s())}function kh(i,e){1&i&&(m.j41(0,"p"),m.EFF(1,"Create an account to join our community!"),m.k0s())}function Rm(i,e){if(1&i){const t=m.RV6();m.j41(0,"div",5)(1,"label",13),m.EFF(2,"Display Name"),m.k0s(),m.j41(3,"input",14),m.mxI("ngModelChange",function(a){m.eBV(t);const c=m.XpG();return m.DH7(c.displayName,a)||(c.displayName=a),m.Njj(a)}),m.k0s()()}if(2&i){const t=m.XpG();m.R7$(3),m.R50("ngModel",t.displayName)}}function WN(i,e){if(1&i){const t=m.RV6();m.j41(0,"div",5)(1,"label",15),m.EFF(2,"Profile Photo URL"),m.k0s(),m.j41(3,"input",16),m.mxI("ngModelChange",function(a){m.eBV(t);const c=m.XpG();return m.DH7(c.photoURL,a)||(c.photoURL=a),m.Njj(a)}),m.k0s()()}if(2&i){const t=m.XpG();m.R7$(3),m.R50("ngModel",t.photoURL)}}function TM(i,e){if(1&i&&m.nrm(0,"img",16),2&i){const t=m.XpG(2);m.Y8G("src",t.photoURL,m.B4B)}}function vb(i,e){1&i&&m.nrm(0,"img",17)}function bM(i,e){if(1&i&&(m.j41(0,"div")(1,"div",14),m.DNE(2,TM,1,1,"img",15)(3,vb,1,0,"ng-template",null,1,m.C5r),m.k0s(),m.j41(5,"p")(6,"strong"),m.EFF(7,"Email:"),m.k0s(),m.EFF(8),m.k0s(),m.j41(9,"p")(10,"strong"),m.EFF(11,"Name:"),m.k0s(),m.EFF(12),m.k0s()()),2&i){const t=e.ngIf,o=m.sdS(4),a=m.XpG();m.R7$(2),m.Y8G("ngIf",a.photoURL)("ngIfElse",o),m.R7$(6),m.SpI(" ",t.email,""),m.R7$(4),m.SpI(" ",t.displayName||"No Name Provided","")}}function Eb(i,e){if(1&i&&(m.j41(0,"span"),m.EFF(1),m.k0s()),2&i){const t=m.XpG();m.R7$(),m.JRh(t.selectedFileName)}}function KN(i,e){if(1&i&&(m.j41(0,"div",18),m.nrm(1,"progress",19),m.j41(2,"span"),m.EFF(3),m.nI1(4,"number"),m.k0s()()),2&i){const t=m.XpG();m.R7$(),m.Y8G("value",t.uploadPercent),m.R7$(2),m.SpI("",m.i5U(4,2,t.uploadPercent,"1.0-0"),"%")}}const Tv=[{path:"",component:ce},{path:"about",component:je},{path:"login",component:(()=>{class i{constructor(t){this.authService=t,this.email="",this.password="",this.displayName="",this.photoURL="",this.isLoginMode=!0}toggleMode(){this.isLoginMode=!this.isLoginMode}onSubmit(){this.isLoginMode?this.authService.login(this.email,this.password):this.authService.signup(this.email,this.password,this.displayName,this.photoURL)}logout(){this.authService.logout()}static#e=this.\u0275fac=function(o){return new(o||i)(m.rXU(Iv))};static#t=this.\u0275cmp=m.VBU({type:i,selectors:[["app-login"]],decls:21,vars:9,consts:[["loginForm","ngForm"],[1,"login-wrapper"],[1,"form-container"],[4,"ngIf"],[3,"ngSubmit"],[1,"input-group"],["for","email"],["type","email","id","email","name","email","required","","placeholder","Enter your email",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","","placeholder","Enter your password",3,"ngModelChange","ngModel"],["class","input-group",4,"ngIf"],["type","submit",1,"submit-btn"],[1,"toggle-btn",3,"click"],["for","displayName"],["type","text","id","displayName","name","displayName","required","","placeholder","Enter your display name",3,"ngModelChange","ngModel"],["for","photoURL"],["type","text","id","photoURL","name","photoURL","placeholder","Optional: Enter a photo URL",3,"ngModelChange","ngModel"]],template:function(o,a){if(1&o){const c=m.RV6();m.j41(0,"div",1)(1,"div",2),m.DNE(2,wM,2,1,"h2",3)(3,xh,2,0,"p",3)(4,kh,2,0,"p",3),m.j41(5,"form",4,0),m.bIt("ngSubmit",function(){return m.eBV(c),m.Njj(a.onSubmit())}),m.j41(7,"div",5)(8,"label",6),m.EFF(9,"Email"),m.k0s(),m.j41(10,"input",7),m.mxI("ngModelChange",function(g){return m.eBV(c),m.DH7(a.email,g)||(a.email=g),m.Njj(g)}),m.k0s()(),m.j41(11,"div",5)(12,"label",8),m.EFF(13,"Password"),m.k0s(),m.j41(14,"input",9),m.mxI("ngModelChange",function(g){return m.eBV(c),m.DH7(a.password,g)||(a.password=g),m.Njj(g)}),m.k0s()(),m.DNE(15,Rm,4,1,"div",10)(16,WN,4,1,"div",10),m.j41(17,"button",11),m.EFF(18),m.k0s()(),m.j41(19,"button",12),m.bIt("click",function(){return m.eBV(c),m.Njj(a.toggleMode())}),m.EFF(20),m.k0s()()()}2&o&&(m.R7$(2),m.Y8G("ngIf",a.isLoginMode),m.R7$(),m.Y8G("ngIf",a.isLoginMode),m.R7$(),m.Y8G("ngIf",!a.isLoginMode),m.R7$(6),m.R50("ngModel",a.email),m.R7$(4),m.R50("ngModel",a.password),m.R7$(),m.Y8G("ngIf",!a.isLoginMode),m.R7$(),m.Y8G("ngIf",!a.isLoginMode),m.R7$(2),m.JRh(a.isLoginMode?"Login":"Sign Up"),m.R7$(2),m.SpI(" ",a.isLoginMode?"New here? Sign Up!":"Already have an account? Login"," "))},dependencies:[De.bT,Ct.qT,Ct.me,Ct.BC,Ct.cb,Ct.YS,Ct.vS,Ct.cV],styles:[".highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}.login-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f7f9fc}.form-container[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:1rem;box-shadow:0 8px 16px #0000001a;text-align:center;max-width:400px;width:100%;transition:transform .3s ease-in-out;font-family:Roboto,sans-serif}.form-container[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 8px 16px #0003}h2[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;color:#2e4057;margin-bottom:.5rem;animation:_ngcontent-%COMP%_fadeIn 1s ease-in-out}p[_ngcontent-%COMP%]{font-size:.9rem;color:#333;margin-bottom:1rem}.input-group[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:left}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.8rem;color:#2e4057}.input-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;padding:.8rem;font-size:1rem;color:#333;background:#f7f9fc;border:1px solid #e2e8f0;border-radius:.5rem;transition:all .3s ease-in-out}.input-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .input-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{outline:none;border-color:#eb94bd;box-shadow:0 0 5px #eb94bd80}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:.8rem;background:#eb94bd;color:#fff;font-size:1rem;font-weight:700;border:none;border-radius:.5rem;cursor:pointer;transition:background .3s ease-in-out}.submit-btn[_ngcontent-%COMP%]:hover{background:#f3bfd8}.toggle-btn[_ngcontent-%COMP%]{background:transparent;color:#2e4057;border:none;cursor:pointer;margin-top:1rem;font-size:.9rem;transition:color .3s ease-in-out}.toggle-btn[_ngcontent-%COMP%]:hover{color:#e369a2}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}"]})}return i})()},{path:"gallery",component:Ee},{path:"bob-life",component:Xe},{path:"name-tree",component:pr},{path:"anthem",component:Kn},{path:"quiz",component:Nn},{path:"faq",component:zo},{path:"secret-blog",component:Pt},{path:"blog",component:IM},{path:"profile",component:(()=>{class i{constructor(t){this.authService=t,this.displayName="",this.photoURL="",this.uploadPercent=null,this.selectedFileName=null,this.user=this.authService.getUserProfile()}ngOnInit(){this.user.subscribe(t=>{t&&(this.displayName=t.displayName||"",this.photoURL=t.photoURL||"")})}onFileSelected(t){const o=t.target;if(o?.files&&o.files.length>0){const a=o.files[0];this.selectedFileName=a.name,console.log("Selected file:",a),this.authService.uploadProfilePicture(a).subscribe({next:c=>{c.url&&(console.log("File uploaded successfully:",c.url),this.photoURL=c.url,this.updateProfile())},error:c=>{console.error("Failed to upload file:",c),alert("Error uploading image")}})}}updateProfile(){this.authService.updateProfile(this.displayName,this.photoURL).then(()=>{alert("Profile updated successfully!")}).catch(t=>{console.error("Error updating profile:",t),alert("Failed to update profile")})}static#e=this.\u0275fac=function(o){return new(o||i)(m.rXU(Iv))};static#t=this.\u0275cmp=m.VBU({type:i,selectors:[["app-profile"]],decls:21,vars:6,consts:[["photoUpload",""],["defaultPhoto",""],[1,"profile-wrapper"],[1,"profile-container"],[4,"ngIf"],[3,"ngSubmit"],["for","displayName"],["type","text","id","displayName","name","displayName","placeholder","Enter new display name",3,"ngModelChange","ngModel"],["for","photoUpload"],[1,"custom-file-upload"],["type","file","id","photoUpload","accept","image/*",2,"display","none",3,"change"],["type","button",1,"choose-file-btn",3,"click"],["type","submit"],["class","upload-progress",4,"ngIf"],[1,"profile-picture"],["class","profile-image","alt","Profile Photo",3,"src",4,"ngIf","ngIfElse"],["alt","Profile Photo",1,"profile-image",3,"src"],["src","assets/default-profile.png","alt","Default Profile Photo",1,"profile-image"],[1,"upload-progress"],["max","100",3,"value"]],template:function(o,a){if(1&o){const c=m.RV6();m.j41(0,"div",2)(1,"div",3)(2,"h2"),m.EFF(3,"Your Profile"),m.k0s(),m.DNE(4,bM,13,4,"div",4),m.nI1(5,"async"),m.j41(6,"form",5),m.bIt("ngSubmit",function(){return m.eBV(c),m.Njj(a.updateProfile())}),m.j41(7,"label",6),m.EFF(8,"Update Display Name"),m.k0s(),m.j41(9,"input",7),m.mxI("ngModelChange",function(g){return m.eBV(c),m.DH7(a.displayName,g)||(a.displayName=g),m.Njj(g)}),m.k0s(),m.j41(10,"label",8),m.EFF(11,"Upload Profile Picture"),m.k0s(),m.j41(12,"div",9)(13,"input",10,0),m.bIt("change",function(g){return m.eBV(c),m.Njj(a.onFileSelected(g))}),m.k0s(),m.j41(15,"button",11),m.bIt("click",function(){m.eBV(c);const g=m.sdS(14);return m.Njj(g.click())}),m.EFF(16,"Choose File"),m.k0s(),m.DNE(17,Eb,2,1,"span",4),m.k0s(),m.j41(18,"button",12),m.EFF(19,"Update Profile"),m.k0s(),m.DNE(20,KN,5,5,"div",13),m.k0s()()()}2&o&&(m.R7$(4),m.Y8G("ngIf",m.bMT(5,4,a.user)),m.R7$(5),m.R50("ngModel",a.displayName),m.R7$(8),m.Y8G("ngIf",a.selectedFileName),m.R7$(3),m.Y8G("ngIf",null!==a.uploadPercent))},dependencies:[De.bT,Ct.qT,Ct.me,Ct.BC,Ct.cb,Ct.vS,Ct.cV,De.Jj,De.QX],styles:[".profile-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f7f9fc}.profile-container[_ngcontent-%COMP%]{max-width:500px;width:100%;padding:2rem;background:#fff;border-radius:1rem;box-shadow:0 4px 8px #00000026;text-align:center;font-family:Roboto,sans-serif}.profile-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2e4057;font-size:1.8rem;margin-bottom:1rem}.profile-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#333;margin:.5rem 0;line-height:1.4}.profile-picture[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:130px;height:130px;border-radius:50%;overflow:hidden;box-shadow:0 4px 8px #00000026;transition:transform .3s ease,box-shadow .3s ease;margin:1rem auto}.profile-picture[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 8px 16px #00000040}.profile-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:filter .3s ease}.profile-image[_ngcontent-%COMP%]:hover{filter:brightness(.9)}form[_ngcontent-%COMP%]{margin-top:1.5rem;text-align:left}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.95rem;color:#2e4057;margin-bottom:.5rem;font-weight:500}form[_ngcontent-%COMP%]   .custom-file-upload[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}form[_ngcontent-%COMP%]   .custom-file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}form[_ngcontent-%COMP%]   .custom-file-upload[_ngcontent-%COMP%]   .choose-file-btn[_ngcontent-%COMP%]{padding:.6rem 1.2rem;font-size:.95rem;font-weight:700;color:#fff;background:#eb94bd;border:none;border-radius:.5rem;cursor:pointer;transition:background .3s ease}form[_ngcontent-%COMP%]   .custom-file-upload[_ngcontent-%COMP%]   .choose-file-btn[_ngcontent-%COMP%]:hover{background:#e369a2}form[_ngcontent-%COMP%]   .custom-file-upload[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;color:#2e4057}form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;padding:.8rem;margin-bottom:1rem;border:1px solid #e2e8f0;border-radius:.5rem;font-size:1rem;color:#333;background:#f7f9fc;transition:border .3s ease}form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{border-color:#eb94bd;box-shadow:0 0 5px #eb94bd4d;outline:none}form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;font-size:1.1rem;font-weight:700;color:#fff;background:#eb94bd;border:none;border-radius:.5rem;cursor:pointer;transition:background .3s ease}form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:#e369a2}.upload-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:1rem}.upload-progress[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]{width:80%;height:8px;border-radius:4px;overflow:hidden;appearance:none}.upload-progress[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-webkit-progress-bar{background-color:#e2e8f0}.upload-progress[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-webkit-progress-value{background-color:#eb94bd}.upload-progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;color:#2e4057}"]})}return i})()},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"stories",loadChildren:()=>J.e(947).then(J.bind(J,1947)).then(i=>i.StoriesModule)},{path:"**",component:zn}];let wI=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=m.$C({type:i});static#n=this.\u0275inj=m.G2t({imports:[B.iI.forRoot(Tv),B.iI]})}return i})();function AM(i,e){if(1&i){const t=m.RV6();m.j41(0,"li")(1,"a",18),m.bIt("click",function(){m.eBV(t);const a=m.XpG();return m.Njj(a.closeMenu())}),m.EFF(2,"Login/Sign up"),m.k0s()()}}function PM(i,e){if(1&i){const t=m.RV6();m.j41(0,"li")(1,"a",19),m.bIt("click",function(){m.eBV(t);const a=m.XpG();return m.Njj(a.closeMenu())}),m.EFF(2,"Account"),m.k0s()()}}function DM(i,e){if(1&i){const t=m.RV6();m.j41(0,"li")(1,"a",20),m.bIt("click",function(){m.eBV(t);const a=m.XpG();return m.Njj(a.logout())}),m.EFF(2,"Logout"),m.k0s()()}}let TI=(()=>{class i{constructor(t){this.authService=t,this.menuOpen=!1}ngOnInit(){this.isLoggedIn=this.authService.isLoggedIn()}logout(){this.authService.logout(),this.closeMenu()}toggleMenu(){this.menuOpen=!this.menuOpen}closeMenu(){this.menuOpen=!1}static#e=this.\u0275fac=function(o){return new(o||i)(m.rXU(Iv))};static#t=this.\u0275cmp=m.VBU({type:i,selectors:[["app-header"]],decls:47,vars:13,consts:[["role","banner",1,"site-header"],[1,"wrapper"],["routerLink","/","rel","author",1,"site-title"],[1,"site-nav"],["aria-label","Toggle Menu",1,"menu-toggle",3,"click"],[1,"hamburger"],["routerLink","/","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/about","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/gallery","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/bob-life","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/name-tree","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/quiz","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/anthem","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/faq","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/blog","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/secret-blog","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/stories","routerLinkActive","active",1,"menu-item",3,"click"],[4,"ngIf"],["routerLink","/login","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/profile","routerLinkActive","active",1,"menu-item",3,"click"],[1,"menu-item",3,"click"]],template:function(o,a){1&o&&(m.j41(0,"header",0)(1,"div",1)(2,"a",2),m.EFF(3,"Bob the Cat"),m.k0s(),m.j41(4,"nav",3)(5,"div",4),m.bIt("click",function(){return a.toggleMenu()}),m.nrm(6,"span",5),m.k0s(),m.j41(7,"ul")(8,"li")(9,"a",6),m.bIt("click",function(){return a.closeMenu()}),m.EFF(10,"Home"),m.k0s()(),m.j41(11,"li")(12,"a",7),m.bIt("click",function(){return a.closeMenu()}),m.EFF(13,"About Bob"),m.k0s()(),m.j41(14,"li")(15,"a",8),m.bIt("click",function(){return a.closeMenu()}),m.EFF(16,"Gallery"),m.k0s()(),m.j41(17,"li")(18,"a",9),m.bIt("click",function(){return a.closeMenu()}),m.EFF(19,"A Day in Bob's Life"),m.k0s()(),m.j41(20,"li")(21,"a",10),m.bIt("click",function(){return a.closeMenu()}),m.EFF(22,"Bob's Names"),m.k0s()(),m.j41(23,"li")(24,"a",11),m.bIt("click",function(){return a.closeMenu()}),m.EFF(25,"Bob Quiz"),m.k0s()(),m.j41(26,"li")(27,"a",12),m.bIt("click",function(){return a.closeMenu()}),m.EFF(28,"Bob's Anthem"),m.k0s()(),m.j41(29,"li")(30,"a",13),m.bIt("click",function(){return a.closeMenu()}),m.EFF(31,"FAQ"),m.k0s()(),m.j41(32,"li")(33,"a",14),m.bIt("click",function(){return a.closeMenu()}),m.EFF(34,"Blog"),m.k0s()(),m.j41(35,"li")(36,"a",15),m.bIt("click",function(){return a.closeMenu()}),m.EFF(37,"Secret Momma Page"),m.k0s()(),m.j41(38,"li")(39,"a",16),m.bIt("click",function(){return a.closeMenu()}),m.EFF(40,"Stories"),m.k0s()(),m.DNE(41,AM,3,0,"li",17),m.nI1(42,"async"),m.DNE(43,PM,3,0,"li",17),m.nI1(44,"async"),m.DNE(45,DM,3,0,"li",17),m.nI1(46,"async"),m.k0s()()()()),2&o&&(m.R7$(5),m.AVh("active",a.menuOpen),m.R7$(2),m.AVh("active",a.menuOpen),m.R7$(34),m.Y8G("ngIf",!m.bMT(42,7,a.isLoggedIn)),m.R7$(2),m.Y8G("ngIf",m.bMT(44,9,a.isLoggedIn)),m.R7$(2),m.Y8G("ngIf",m.bMT(46,11,a.isLoggedIn)))},dependencies:[De.bT,B.Wk,B.wQ,De.Jj],styles:['.highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}.site-header[_ngcontent-%COMP%]{background-color:#f7f9fc;border-bottom:1px solid #8ea5c3;position:sticky;top:0;width:100%;z-index:1000}.site-header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 20px}.site-header[_ngcontent-%COMP%]   .site-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#eb94bd;text-decoration:none;font-family:Roboto,sans-serif}.site-header[_ngcontent-%COMP%]   .site-title[_ngcontent-%COMP%]:hover{color:#e369a2}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]{position:relative}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]{display:none;cursor:pointer;width:30px;height:25px;flex-direction:column;justify-content:space-between}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%], .site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:before, .site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#2e4057;height:3px;border-radius:2px;transition:all .3s ease}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:before, .site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:after{position:absolute;width:100%}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:before{transform:translateY(-8px)}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:after{transform:translateY(8px)}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle.active[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]{background-color:transparent}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle.active[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle.active[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:flex;margin:0}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:20px}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{color:#2e4057;text-decoration:none;font-size:1rem;transition:color .3s ease;font-family:Roboto,sans-serif}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover, .site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu-item.active[_ngcontent-%COMP%]{color:#eb94bd}@media (max-width: 768px){.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]{display:flex}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background-color:#f7f9fc;flex-direction:column;width:250px;max-height:0;opacity:0;overflow:hidden;transition:max-height .4s ease,opacity .3s ease;box-shadow:0 4px 6px #0000001a}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul.active[_ngcontent-%COMP%]{max-height:600px;opacity:1}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{display:block;padding:18px 20px;border-bottom:1px solid #8ea5c3}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background-color:#fff}.site-header[_ngcontent-%COMP%]   .site-title[_ngcontent-%COMP%]{font-size:1.5rem}}.menu-item.active[_ngcontent-%COMP%]{font-weight:700;color:#eb94bd}']})}return i})(),QN=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=m.VBU({type:i,selectors:[["app-footer"]],decls:11,vars:0,consts:[[1,"site-footer"],[1,"wrapper"],[1,"footer-content"],["href","https://www.instagram.com/bobbatausa/","target","_blank",1,"footer-link"],[1,"footer-nav"]],template:function(o,a){1&o&&(m.j41(0,"footer",0)(1,"div",1)(2,"div",2)(3,"h2"),m.EFF(4,"Bob the Cat"),m.k0s(),m.j41(5,"a",3),m.EFF(6,"Follow Bob on Instagram"),m.k0s(),m.j41(7,"p"),m.EFF(8,"Follow along Bob on her daily adventures!"),m.k0s()(),m.j41(9,"div",4),m.nrm(10,"ul"),m.k0s()()())},styles:[".highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{margin:0;font-family:Roboto,Helvetica Neue,sans-serif}.site-footer[_ngcontent-%COMP%]{background-color:#f7f9fc;color:#333;padding:3rem 0;font-family:Roboto,sans-serif;border-top:1px solid #cccccc}.site-footer[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:2rem}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]{flex:1;min-width:250px;text-align:left}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:2rem;color:#eb94bd}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5rem;font-size:1.1rem}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]{display:flex;gap:1rem}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{color:#333;font-size:1.8rem;transition:color .3s}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]:hover{color:#eb94bd}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]{flex:1;min-width:200px}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.75rem}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .footer-nav-item[_ngcontent-%COMP%]{color:#333;text-decoration:none;font-size:1.1rem;transition:color .3s}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .footer-nav-item[_ngcontent-%COMP%]:hover{color:#eb94bd}@media (max-width: 768px){.site-footer[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%], .site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]{min-width:unset}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]{margin-top:2rem}}"]})}return i})(),Cb=(()=>{class i{constructor(){this.title="my-angular-website"}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275cmp=m.VBU({type:i,selectors:[["app-root"]],decls:5,vars:0,consts:[["aria-label","Content",1,"page-content"],[1,"wrapper"]],template:function(o,a){1&o&&(m.nrm(0,"app-header"),m.j41(1,"main",0)(2,"div",1),m.nrm(3,"router-outlet"),m.k0s()(),m.nrm(4,"app-footer"))},dependencies:[B.n3,TI,QN]})}return i})();var Wi=J(8008);const SM=[{provide:Wi.\u0275AnimationStyleNormalizer,useFactory:function wb(){return new Wi.\u0275WebAnimationsStyleNormalizer}},{provide:Wi.\u0275AnimationEngine,useClass:(()=>{class i extends Wi.\u0275AnimationEngine{constructor(t,o,a){super(t,o,a)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(o){return new(o||i)(m.KVO(De.qQ),m.KVO(Wi.AnimationDriver),m.KVO(Wi.\u0275AnimationStyleNormalizer))};static#t=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac})}return i})()},{provide:m._9s,useFactory:function Tb(i,e,t){return new Wi.\u0275AnimationRendererFactory(i,e,t)},deps:[T.B7,Wi.\u0275AnimationEngine,m.SKi]}],Di=[{provide:Wi.AnimationDriver,useFactory:()=>new Wi.\u0275WebAnimationsDriver},{provide:m.bc$,useValue:"BrowserAnimations"},...SM],bb=[{provide:Wi.AnimationDriver,useClass:Wi.NoopAnimationDriver},{provide:m.bc$,useValue:"NoopAnimations"},...SM];let bI=(()=>{class i{static withConfig(t){return{ngModule:i,providers:t.disableAnimations?bb:Di}}static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=m.$C({type:i});static#n=this.\u0275inj=m.G2t({providers:Di,imports:[T.Bb]})}return i})();var Pb=J(5343);const Sb="@firebase/database";let bv="";function PI(i){bv=i}class Fh{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,te.As)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,te.$L)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Ob{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,te.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Av=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const e=window[i];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Fh(e)}}catch{}return new Ob},Lh=Av("localStorage"),Pv=Av("sessionStorage"),Vh=new en.Vy("@firebase/database"),DI=function(){let i=1;return function(){return i++}}(),Pp=function(i){const e=(0,te.kj)(i),t=new te.gz;t.update(e);const o=t.digest();return te.K3.encodeByteArray(o)},Uh=function(...i){let e="";for(let t=0;t<i.length;t++){const o=i[t];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?e+=Uh.apply(null,o):e+="object"==typeof o?(0,te.As)(o):o,e+=" "}return e};let Ga=null,Nm=!0;const SI=function(i,e){(0,te.vA)(!e||!0===i||!1===i,"Can't turn on custom loggers persistently."),!0===i?(Vh.logLevel=en.$b.VERBOSE,Ga=Vh.log.bind(Vh),e&&Pv.set("logging_enabled",!0)):"function"==typeof i?Ga=i:(Ga=null,Pv.remove("logging_enabled"))},mo=function(...i){if(!0===Nm&&(Nm=!1,null===Ga&&!0===Pv.get("logging_enabled")&&SI(!0)),Ga){const e=Uh.apply(null,i);Ga(e)}},xm=function(i){return function(...e){mo(i,...e)}},MI=function(...i){const e="FIREBASE INTERNAL ERROR: "+Uh(...i);Vh.error(e)},ql=function(...i){const e=`FIREBASE FATAL ERROR: ${Uh(...i)}`;throw Vh.error(e),new Error(e)},Ns=function(...i){const e="FIREBASE WARNING: "+Uh(...i);Vh.warn(e)},Td=function(i){return"number"==typeof i&&(i!=i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},Ac="[MIN_NAME]",Zc="[MAX_NAME]",bd=function(i,e){if(i===e)return 0;if(i===Ac||e===Zc)return-1;if(e===Ac||i===Zc)return 1;{const t=xb(i),o=xb(e);return null!==t?null!==o?t-o==0?i.length-e.length:t-o:-1:null!==o?1:i<e?-1:1}},MM=function(i,e){return i===e?0:i<e?-1:1},Ad=function(i,e){if(e&&i in e)return e[i];throw new Error("Missing required key ("+i+") in object: "+(0,te.As)(e))},Bh=function(i){if("object"!=typeof i||null===i)return(0,te.As)(i);const e=[];for(const o in i)e.push(o);e.sort();let t="{";for(let o=0;o<e.length;o++)0!==o&&(t+=","),t+=(0,te.As)(e[o]),t+=":",t+=Bh(i[e[o]]);return t+="}",t},Rb=function(i,e){const t=i.length;if(t<=e)return[i];const o=[];for(let a=0;a<t;a+=e)o.push(i.substring(a,a+e>t?t:a+e));return o};function Is(i,e){for(const t in i)i.hasOwnProperty(t)&&e(t,i[t])}const Nb=function(i){(0,te.vA)(!Td(i),"Invalid JSON number");const o=1023;let a,c,d,g,E;0===i?(c=0,d=0,a=1/i==-1/0?1:0):(a=i<0,(i=Math.abs(i))>=Math.pow(2,1-o)?(g=Math.min(Math.floor(Math.log(i)/Math.LN2),o),c=g+o,d=Math.round(i*Math.pow(2,52-g)-Math.pow(2,52))):(c=0,d=Math.round(i/Math.pow(2,-1074))));const S=[];for(E=52;E;E-=1)S.push(d%2?1:0),d=Math.floor(d/2);for(E=11;E;E-=1)S.push(c%2?1:0),c=Math.floor(c/2);S.push(a?1:0),S.reverse();const V=S.join("");let K="";for(E=0;E<64;E+=8){let ee=parseInt(V.substr(E,8),2).toString(16);1===ee.length&&(ee="0"+ee),K+=ee}return K.toLowerCase()},xM=new RegExp("^-?(0*)\\d{1,10}$"),xb=function(i){if(xM.test(i)){const e=Number(i);if(e>=-2147483648&&e<=2147483647)return e}return null},Dp=function(i){try{i()}catch(e){setTimeout(()=>{throw Ns("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Sp=function(i,e){const t=setTimeout(i,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class OI{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(o=>this.appCheck=o)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,o)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,o):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(o=>o.addTokenListener(e))}notifyForInvalidToken(){Ns(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Fb{constructor(e,t,o){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(mo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,o)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,o):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ns(e)}}let km=(()=>{class i{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return i.OWNER="owner",i})();const Vb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xI="websocket",Ov="long_polling";class Vm{constructor(e,t,o,a,c=!1,d="",g=!1,E=!1){this.secure=t,this.namespace=o,this.webSocketOnly=a,this.nodeAdmin=c,this.persistenceKey=d,this.includeNamespaceInQueryParams=g,this.isUsingEmulator=E,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Lh.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Lh.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Bb(i,e,t){let o;if((0,te.vA)("string"==typeof e,"typeof type must == string"),(0,te.vA)("object"==typeof t,"typeof params must == object"),e===xI)o=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else{if(e!==Ov)throw new Error("Unknown connection type: "+e);o=(i.secure?"https://":"http://")+i.internalHost+"/.lp?"}(function FM(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams})(i)&&(t.ns=i.namespace);const a=[];return Is(t,(c,d)=>{a.push(c+"="+d)}),o+a.join("&")}class LM{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,te.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,te.A4)(this.counters_)}}const kI={},Rv={};function Um(i){const e=i.toString();return kI[e]||(kI[e]=new LM),kI[e]}class jb{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<o.length;++a)o[a]&&Dp(()=>{this.onMessage_(o[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Bu{constructor(e,t,o,a,c,d,g){this.connId=e,this.repoInfo=t,this.applicationId=o,this.appCheckToken=a,this.authToken=c,this.transportSessionId=d,this.lastSessionId=g,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=xm(e),this.stats_=Um(t),this.urlFn=E=>(this.appCheckToken&&(E.ac=this.appCheckToken),Bb(t,Ov,E))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new jb(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(i){if((0,te.$g)()||"complete"===document.readyState)i();else{let e=!1;const t=function(){document.body?e||(e=!0,i()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new BI((...c)=>{const[d,g,E,S,V]=c;if(this.incrementIncomingBytes_(c),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===d)this.id=g,this.password=E;else{if("close"!==d)throw new Error("Unrecognized command received: "+d);g?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(g,()=>{this.onClosed_()})):this.onClosed_()}},(...c)=>{const[d,g]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(d,g)},()=>{this.onClosed_()},this.urlFn);const o={start:"t"};o.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(o.cb=this.scriptTagHolder.uniqueCallbackIdentifier),o.v="5",this.transportSessionId&&(o.s=this.transportSessionId),this.lastSessionId&&(o.ls=this.lastSessionId),this.applicationId&&(o.p=this.applicationId),this.appCheckToken&&(o.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Vb.test(location.hostname)&&(o.r="f");const a=this.urlFn(o);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Bu.forceAllow_=!0}static forceDisallow(){Bu.forceDisallow_=!0}static isAvailable(){return!((0,te.$g)()||!Bu.forceAllow_&&(Bu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,te.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const o=(0,te.KA)(t),a=Rb(o,1840);for(let c=0;c<a.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[c]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,te.$g)())return;this.myDisconnFrame=document.createElement("iframe");const o={dframe:"t"};o.id=e,o.pw=t,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,te.As)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class BI{constructor(e,t,o,a){if(this.onDisconnect=o,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,te.$g)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=DI(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=BI.createIFrame_();let c="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(c='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(g){mo("frame writing exception"),g.stack&&mo(g.stack),mo(g)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||mo("No IE domain setting required")}catch{const o=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),o="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+o.length<=1870;){const d=this.pendingSegs.shift();o=o+"&seg"+a+"="+d.seg+"&ts"+a+"="+d.ts+"&d"+a+"="+d.d,a++}return t+=o,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,o){this.pendingSegs.push({seg:e,ts:t,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const o=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(o,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(a),o()})}addTag(e,t){(0,te.$g)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=e,o.onload=o.onreadystatechange=function(){const a=o.readyState;(!a||"loaded"===a||"complete"===a)&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),t())},o.onerror=()=>{mo("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}let jI=null;typeof MozWebSocket<"u"?jI=MozWebSocket:typeof WebSocket<"u"&&(jI=WebSocket);let Bm=(()=>{class i{constructor(t,o,a,c,d,g,E){this.connId=t,this.applicationId=a,this.appCheckToken=c,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=xm(this.connId),this.stats_=Um(o),this.connURL=i.connectionURL_(o,g,E,c,a),this.nodeAdmin=o.nodeAdmin}static connectionURL_(t,o,a,c,d){const g={v:"5"};return!(0,te.$g)()&&typeof location<"u"&&location.hostname&&Vb.test(location.hostname)&&(g.r="f"),o&&(g.s=o),a&&(g.ls=a),c&&(g.ac=c),d&&(g.p=d),Bb(t,xI,g)}open(t,o){this.onDisconnect=o,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Lh.set("previous_websocket_failure",!0);try{let a;if((0,te.$g)()){a={headers:{"User-Agent":`Firebase/5/${bv}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,g=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;g&&(a.proxy={origin:g})}this.mySock=new jI(this.connURL,[],a)}catch(a){this.log_("Error instantiating WebSocket.");const c=a.message||a.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const c=a.message||a.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const a=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);a&&a.length>1&&parseFloat(a[1])<4.4&&(t=!0)}return!t&&null!==jI&&!i.forceDisallow_}static previouslyFailed(){return Lh.isInMemoryStorage||!0===Lh.get("previous_websocket_failure")}markConnectionHealthy(){Lh.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const o=this.frames.join("");this.frames=null;const a=(0,te.$L)(o);this.onMessage(a)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,te.vA)(null===this.frames,"We already have a frame buffer"),t.length<=6){const o=Number(t);if(!isNaN(o))return this.handleNewFrameCount_(o),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const o=t.data;if(this.bytesReceived+=o.length,this.stats_.incrementCounter("bytes_received",o.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(o);else{const a=this.extractFrameCount_(o);null!==a&&this.appendFrame_(a)}}send(t){this.resetKeepAlive();const o=(0,te.As)(t);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const a=Rb(o,16384);a.length>1&&this.sendString_(String(a.length));for(let c=0;c<a.length;c++)this.sendString_(a[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(o){this.log_("Exception thrown from WebSocket.send():",o.message||o.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i})(),BM=(()=>{class i{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Bu,Bm]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const o=Bm&&Bm.isAvailable();let a=o&&!Bm.previouslyFailed();if(t.webSocketOnly&&(o||Ns("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[Bm];else{const c=this.transports_=[];for(const d of i.ALL_TRANSPORTS)d&&d.isAvailable()&&c.push(d);i.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return i.globalTransportInitialized_=!1,i})();class Xb{constructor(e,t,o,a,c,d,g,E,S,V){this.id=e,this.repoInfo_=t,this.applicationId_=o,this.appCheckToken_=a,this.authToken_=c,this.onMessage_=d,this.onReady_=g,this.onDisconnect_=E,this.onKill_=S,this.lastSessionId=V,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=xm("c:"+this.id+":"),this.transportManager_=new BM(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,o)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=Sp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ad("t",e),o=Ad("d",e);if("c"===t)this.onSecondaryControl_(o);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(o)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ad("t",e),o=Ad("d",e);"c"===t?this.onControl_(o):"d"===t&&this.onDataMessage_(o)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ad("t",e);if("d"in e){const o=e.d;if("h"===t){const a=Object.assign({},o);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(o):"r"===t?this.onReset_(o):"e"===t?MI("Server Error: "+o):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):MI("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,o=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==o&&Ns("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,o),Sp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Sp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Lh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class jh{put(e,t,o,a){}merge(e,t,o,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,o){}onDisconnectMerge(e,t,o){}onDisconnectCancel(e,t){}reportStats(e){}}class Mp{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,te.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const o=[...this.listeners_[e]];for(let a=0;a<o.length;a++)o[a].callback.apply(o[a].context,t)}}on(e,t,o){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:o});const a=this.getInitialEvent(e);a&&t.apply(o,a)}off(e,t,o){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let c=0;c<a.length;c++)if(a[c].callback===t&&(!o||o===a[c].context))return void a.splice(c,1)}validateEventType_(e){(0,te.vA)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Fv extends Mp{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,te.jZ)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Fv}getInitialEvent(e){return(0,te.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ai{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let o=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[o]=this.pieces_[a],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ei(){return new ai("")}function wr(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Pd(i){return i.pieces_.length-i.pieceNum_}function Si(i){let e=i.pieceNum_;return e<i.pieces_.length&&e++,new ai(i.pieces_,e)}function Op(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function jm(i,e=0){return i.pieces_.slice(i.pieceNum_+e)}function HI(i){if(i.pieceNum_>=i.pieces_.length)return null;const e=[];for(let t=i.pieceNum_;t<i.pieces_.length-1;t++)e.push(i.pieces_[t]);return new ai(e,0)}function so(i,e){const t=[];for(let o=i.pieceNum_;o<i.pieces_.length;o++)t.push(i.pieces_[o]);if(e instanceof ai)for(let o=e.pieceNum_;o<e.pieces_.length;o++)t.push(e.pieces_[o]);else{const o=e.split("/");for(let a=0;a<o.length;a++)o[a].length>0&&t.push(o[a])}return new ai(t,0)}function Er(i){return i.pieceNum_>=i.pieces_.length}function za(i,e){const t=wr(i),o=wr(e);if(null===t)return e;if(t===o)return za(Si(i),Si(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+i+")")}function qM(i,e){const t=jm(i,0),o=jm(e,0);for(let a=0;a<t.length&&a<o.length;a++){const c=bd(t[a],o[a]);if(0!==c)return c}return t.length===o.length?0:t.length<o.length?-1:1}function Lv(i,e){if(Pd(i)!==Pd(e))return!1;for(let t=i.pieceNum_,o=e.pieceNum_;t<=i.pieces_.length;t++,o++)if(i.pieces_[t]!==e.pieces_[o])return!1;return!0}function Wa(i,e){let t=i.pieceNum_,o=e.pieceNum_;if(Pd(i)>Pd(e))return!1;for(;t<i.pieces_.length;){if(i.pieces_[t]!==e.pieces_[o])return!1;++t,++o}return!0}class QM{constructor(e,t){this.errorPrefix_=t,this.parts_=jm(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=(0,te.OE)(this.parts_[o]);Zb(this)}}function Zb(i){if(i.byteLength_>768)throw new Error(i.errorPrefix_+"has a key path longer than 768 bytes ("+i.byteLength_+").");if(i.parts_.length>32)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+$h(i))}function $h(i){return 0===i.parts_.length?"":"in property '"+i.parts_.join(".")+"'"}class GI extends Mp{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const o=!document[e];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}static getInstance(){return new GI}getInitialEvent(e){return(0,te.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const $m=1e3;let eu,Rp=(()=>{class i extends jh{constructor(t,o,a,c,d,g,E,S){if(super(),this.repoInfo_=t,this.applicationId_=o,this.onDataUpdate_=a,this.onConnectStatus_=c,this.onServerInfoUpdate_=d,this.authTokenProvider_=g,this.appCheckTokenProvider_=E,this.authOverride_=S,this.id=i.nextPersistentConnectionId_++,this.log_=xm("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$m,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,S&&!(0,te.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");GI.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Fv.getInstance().on("online",this.onOnline_,this)}sendRequest(t,o,a){const c=++this.requestNumber_,d={r:c,a:t,b:o};this.log_((0,te.As)(d)),(0,te.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),a&&(this.requestCBHash_[c]=a)}get(t){this.initConnection_();const o=new te.cY,c={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:g=>{const E=g.d;"ok"===g.s?o.resolve(E):o.reject(E)}};return this.outstandingGets_.push(c),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),o.promise}listen(t,o,a,c){this.initConnection_();const d=t._queryIdentifier,g=t._path.toString();this.log_("Listen called for "+g+" "+d),this.listens.has(g)||this.listens.set(g,new Map),(0,te.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,te.vA)(!this.listens.get(g).has(d),"listen() called twice for same path/queryId.");const E={onComplete:c,hashFn:o,query:t,tag:a};this.listens.get(g).set(d,E),this.connected_&&this.sendListen_(E)}sendGet_(t){const o=this.outstandingGets_[t];this.sendRequest("g",o.request,a=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),o.onComplete&&o.onComplete(a)})}sendListen_(t){const o=t.query,a=o._path.toString(),c=o._queryIdentifier;this.log_("Listen on "+a+" for "+c);const d={p:a};t.tag&&(d.q=o._queryObject,d.t=t.tag),d.h=t.hashFn(),this.sendRequest("q",d,E=>{const S=E.d,V=E.s;i.warnOnListenWarnings_(S,o),(this.listens.get(a)&&this.listens.get(a).get(c))===t&&(this.log_("listen response",E),"ok"!==V&&this.removeListen_(a,c),t.onComplete&&t.onComplete(V,S))})}static warnOnListenWarnings_(t,o){if(t&&"object"==typeof t&&(0,te.gR)(t,"w")){const a=(0,te.yw)(t,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const c='".indexOn": "'+o._queryParams.getIndex().toString()+'"',d=o._path.toString();Ns(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,te.qc)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,o=(0,te.Cv)(t)?"auth":"gauth",a={cred:t};null===this.authOverride_?a.noauth=!0:"object"==typeof this.authOverride_&&(a.authvar=this.authOverride_),this.sendRequest(o,a,c=>{const d=c.s,g=c.d||"error";this.authToken_===t&&("ok"===d?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,g))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const o=t.s,a=t.d||"error";"ok"===o?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(o,a)})}unlisten(t,o){const a=t._path.toString(),c=t._queryIdentifier;this.log_("Unlisten called for "+a+" "+c),(0,te.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,c)&&this.connected_&&this.sendUnlisten_(a,c,t._queryObject,o)}sendUnlisten_(t,o,a,c){this.log_("Unlisten on "+t+" for "+o);const d={p:t};c&&(d.q=a,d.t=c),this.sendRequest("n",d)}onDisconnectPut(t,o,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,o,a):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:o,onComplete:a})}onDisconnectMerge(t,o,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,o,a):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:o,onComplete:a})}onDisconnectCancel(t,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:o})}sendOnDisconnect_(t,o,a,c){const d={p:o,d:a};this.log_("onDisconnect "+t,d),this.sendRequest(t,d,g=>{c&&setTimeout(()=>{c(g.s,g.d)},Math.floor(0))})}put(t,o,a,c){this.putInternal("p",t,o,a,c)}merge(t,o,a,c){this.putInternal("m",t,o,a,c)}putInternal(t,o,a,c,d){this.initConnection_();const g={p:o,d:a};void 0!==d&&(g.h=d),this.outstandingPuts_.push({action:t,request:g,onComplete:c}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+o)}sendPut_(t){const o=this.outstandingPuts_[t].action,a=this.outstandingPuts_[t].request,c=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(o,a,d=>{this.log_(o+" response",d),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),c&&c(d.s,d.d)})}reportStats(t){if(this.connected_){const o={c:t};this.log_("reportStats",o),this.sendRequest("s",o,a=>{"ok"!==a.s&&this.log_("reportStats","Error sending stats: "+a.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,te.As)(t));const o=t.r,a=this.requestCBHash_[o];a&&(delete this.requestCBHash_[o],a(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,o){this.log_("handleServerMessage",t,o),"d"===t?this.onDataUpdate_(o.p,o.d,!1,o.t):"m"===t?this.onDataUpdate_(o.p,o.d,!0,o.t):"c"===t?this.onListenRevoked_(o.p,o.q):"ac"===t?this.onAuthRevoked_(o.s,o.d):"apc"===t?this.onAppCheckRevoked_(o.s,o.d):"sd"===t?this.onSecurityDebugPacket_(o):MI("Unrecognized action received from server: "+(0,te.As)(t)+"\nAre you using the latest client?")}onReady_(t,o){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=o,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,te.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$m,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=$m,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=$m),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let o=Math.max(0,this.reconnectDelay_-t);o=Math.random()*o,this.log_("Trying to reconnect in "+o+"ms"),this.scheduleConnect_(o),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,we.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const o=t.onDataMessage_.bind(t),a=t.onReady_.bind(t),c=t.onRealtimeDisconnect_.bind(t),d=t.id+":"+i.nextConnectionId_++,g=t.lastSessionId;let E=!1,S=null;const V=function(){S?S.close():(E=!0,c())};t.realtime_={close:V,sendRequest:function(de){(0,te.vA)(S,"sendRequest call when we're not connected not allowed."),S.sendRequest(de)}};const ee=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[de,Re]=yield Promise.all([t.authTokenProvider_.getToken(ee),t.appCheckTokenProvider_.getToken(ee)]);E?mo("getToken() completed but was canceled"):(mo("getToken() completed. Creating connection."),t.authToken_=de&&de.accessToken,t.appCheckToken_=Re&&Re.token,S=new Xb(d,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,o,a,c,$e=>{Ns($e+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},g))}catch(de){t.log_("Failed to get token: "+de),E||(t.repoInfo_.nodeAdmin&&Ns(de),V())}}})()}interrupt(t){mo("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){mo("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,te.Im)(this.interruptReasons_)&&(this.reconnectDelay_=$m,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const o=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:o})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const o=this.outstandingPuts_[t];o&&"h"in o.request&&o.queued&&(o.onComplete&&o.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,o){let a;a=o?o.map(d=>Bh(d)).join("$"):"default";const c=this.removeListen_(t,a);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(t,o){const a=new ai(t).toString();let c;if(this.listens.has(a)){const d=this.listens.get(a);c=d.get(o),d.delete(o),0===d.size&&this.listens.delete(a)}else c=void 0;return c}onAuthRevoked_(t,o){mo("Auth token revoked: "+t+"/"+o),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,o){mo("App check token revoked: "+t+"/"+o),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const o of t.values())this.sendListen_(o);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let o="js";(0,te.$g)()&&(o=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+o+"."+bv.replace(/\./g,"-")]=1,(0,te.jZ)()?t["framework.cordova"]=1:(0,te.lV)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Fv.getInstance().currentlyOnline();return(0,te.Im)(this.interruptReasons_)&&t}}return i.nextPersistentConnectionId_=0,i.nextConnectionId_=0,i})();class Tr{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Tr(e,t)}}class Hm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const o=new Tr(Ac,e),a=new Tr(Ac,t);return 0!==this.compare(o,a)}minPost(){return Tr.MIN}}class zI extends Hm{static get __EMPTY_NODE(){return eu}static set __EMPTY_NODE(e){eu=e}compare(e,t){return bd(e.name,t.name)}isDefinedOn(e){throw(0,te.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Tr.MIN}maxPost(){return new Tr(Zc,eu)}makePost(e,t){return(0,te.vA)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Tr(e,eu)}toString(){return".key"}}const tu=new zI;class WI{constructor(e,t,o,a,c=null){this.isReverse_=a,this.resultGenerator_=c,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(d=t?o(e.key,t):1,a&&(d*=-1),d<0)e=this.isReverse_?e.left:e.right;else{if(0===d){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let qI,gl=(()=>{class i{constructor(t,o,a,c,d){this.key=t,this.value=o,this.color=a??i.RED,this.left=c??Ka.EMPTY_NODE,this.right=d??Ka.EMPTY_NODE}copy(t,o,a,c,d){return new i(t??this.key,o??this.value,a??this.color,c??this.left,d??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,o,a){let c=this;const d=a(t,c.key);return c=d<0?c.copy(null,null,null,c.left.insert(t,o,a),null):0===d?c.copy(null,o,null,null,null):c.copy(null,null,null,null,c.right.insert(t,o,a)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ka.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,o){let a,c;if(a=this,o(t,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(t,o),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),0===o(t,a.key)){if(a.right.isEmpty())return Ka.EMPTY_NODE;c=a.right.min_(),a=a.copy(c.key,c.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(t,o))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),o=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,o)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})();class Ka{constructor(e,t=Ka.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ka(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,gl.BLACK,null,null))}remove(e){return new Ka(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,gl.BLACK,null,null))}get(e){let t,o=this.root_;for(;!o.isEmpty();){if(t=this.comparator_(e,o.key),0===t)return o.value;t<0?o=o.left:t>0&&(o=o.right)}return null}getPredecessorKey(e){let t,o=this.root_,a=null;for(;!o.isEmpty();){if(t=this.comparator_(e,o.key),0===t){if(o.left.isEmpty())return a?a.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}t<0?o=o.left:t>0&&(a=o,o=o.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new WI(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new WI(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new WI(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new WI(this.root_,null,this.comparator_,!0,e)}}function iA(i,e){return bd(i.name,e.name)}function Gm(i,e){return bd(i,e)}Ka.EMPTY_NODE=new class KI{copy(e,t,o,a,c){return this}insert(e,t,o){return new gl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const ZM=function(i){return"number"==typeof i?"number:"+Nb(i):"string:"+i},oA=function(i){if(i.isLeafNode()){const e=i.val();(0,te.vA)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,te.gR)(e,".sv"),"Priority must be a string or number.")}else(0,te.vA)(i===qI||i.isEmpty(),"priority of unexpected type.");(0,te.vA)(i===qI||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let QI,Dd,eO,zm=(()=>{class i{constructor(t,o=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=o,this.lazyHash_=null,(0,te.vA)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),oA(this.priorityNode_)}static set __childrenNodeConstructor(t){QI=t}static get __childrenNodeConstructor(){return QI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new i(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Er(t)?this:".priority"===wr(t)?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,o){return null}updateImmediateChild(t,o){return".priority"===t?this.updatePriority(o):o.isEmpty()&&".priority"!==t?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,o).updatePriority(this.priorityNode_)}updateChild(t,o){const a=wr(t);return null===a?o:o.isEmpty()&&".priority"!==a?this:((0,te.vA)(".priority"!==a||1===Pd(t),".priority must be the last token in a path"),this.updateImmediateChild(a,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(Si(t),o)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,o){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+ZM(this.priorityNode_.val())+":");const o=typeof this.value_;t+=o+":",t+="number"===o?Nb(this.value_):this.value_,this.lazyHash_=Pp(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===i.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof i.__childrenNodeConstructor?-1:((0,te.vA)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const o=typeof t.value_,a=typeof this.value_,c=i.VALUE_TYPE_ORDER.indexOf(o),d=i.VALUE_TYPE_ORDER.indexOf(a);return(0,te.vA)(c>=0,"Unknown leaf type: "+o),(0,te.vA)(d>=0,"Unknown leaf type: "+a),c===d?"object"===a?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:d-c}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return i.VALUE_TYPE_ORDER=["object","boolean","number","string"],i})();const Li=new class tO extends Hm{compare(e,t){const o=e.node.getPriority(),a=t.node.getPriority(),c=o.compareTo(a);return 0===c?bd(e.name,t.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Tr.MIN}maxPost(){return new Tr(Zc,new zm("[PRIORITY-POST]",eO))}makePost(e,t){const o=Dd(e);return new Tr(t,new zm("[PRIORITY-POST]",o))}toString(){return".priority"}},YI=Math.log(2);class nO{constructor(e){this.count=parseInt(Math.log(e+1)/YI,10),this.current_=this.count-1;const a=(c=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ml=function(i,e,t,o){i.sort(e);const a=function(E,S){const V=S-E;let K,ee;if(0===V)return null;if(1===V)return K=i[E],ee=t?t(K):K,new gl(ee,K.node,gl.BLACK,null,null);{const de=parseInt(V/2,10)+E,Re=a(E,de),$e=a(de+1,S);return K=i[de],ee=t?t(K):K,new gl(ee,K.node,gl.BLACK,Re,$e)}},g=function(E){let S=null,V=null,K=i.length;const ee=function(Re,$e){const qe=K-Re,kt=K;K-=Re;const Xt=a(qe+1,kt),St=i[qe],gn=t?t(St):St;de(new gl(gn,St.node,$e,null,Xt))},de=function(Re){S?(S.left=Re,S=Re):(V=Re,S=Re)};for(let Re=0;Re<E.count;++Re){const $e=E.nextBitIsOne(),qe=Math.pow(2,E.count-(Re+1));$e?ee(qe,gl.BLACK):(ee(qe,gl.BLACK),ee(qe,gl.RED))}return V}(new nO(i.length));return new Ka(o||e,g)};let Hh;const Vi={};class ma{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,te.vA)(Vi&&Li,"ChildrenNode.ts has not been loaded"),Hh=Hh||new ma({".priority":Vi},{".priority":Li}),Hh}get(e){const t=(0,te.yw)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ka?t:null}hasIndex(e){return(0,te.gR)(this.indexSet_,e.toString())}addIndex(e,t){(0,te.vA)(e!==tu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let a=!1;const c=t.getIterator(Tr.Wrap);let g,d=c.getNext();for(;d;)a=a||e.isDefinedOn(d.node),o.push(d),d=c.getNext();g=a?ml(o,e.getCompare()):Vi;const E=e.toString(),S=Object.assign({},this.indexSet_);S[E]=e;const V=Object.assign({},this.indexes_);return V[E]=g,new ma(V,S)}addToIndexes(e,t){const o=(0,te.kH)(this.indexes_,(a,c)=>{const d=(0,te.yw)(this.indexSet_,c);if((0,te.vA)(d,"Missing index implementation for "+c),a===Vi){if(d.isDefinedOn(e.node)){const g=[],E=t.getIterator(Tr.Wrap);let S=E.getNext();for(;S;)S.name!==e.name&&g.push(S),S=E.getNext();return g.push(e),ml(g,d.getCompare())}return Vi}{const g=t.get(e.name);let E=a;return g&&(E=E.remove(new Tr(e.name,g))),E.insert(e,e.node)}});return new ma(o,this.indexSet_)}removeFromIndexes(e,t){const o=(0,te.kH)(this.indexes_,a=>{if(a===Vi)return a;{const c=t.get(e.name);return c?a.remove(new Tr(e.name,c)):a}});return new ma(o,this.indexSet_)}}let Sd,Gn=(()=>{class i{constructor(t,o,a){this.children_=t,this.priorityNode_=o,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&oA(this.priorityNode_),this.children_.isEmpty()&&(0,te.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Sd||(Sd=new i(new Ka(Gm),null,ma.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Sd}updatePriority(t){return this.children_.isEmpty()?this:new i(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const o=this.children_.get(t);return null===o?Sd:o}}getChild(t){const o=wr(t);return null===o?this:this.getImmediateChild(o).getChild(Si(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,o){if((0,te.vA)(o,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(o);{const a=new Tr(t,o);let c,d;o.isEmpty()?(c=this.children_.remove(t),d=this.indexMap_.removeFromIndexes(a,this.children_)):(c=this.children_.insert(t,o),d=this.indexMap_.addToIndexes(a,this.children_));const g=c.isEmpty()?Sd:this.priorityNode_;return new i(c,g,d)}}updateChild(t,o){const a=wr(t);if(null===a)return o;{(0,te.vA)(".priority"!==wr(t)||1===Pd(t),".priority must be the last token in a path");const c=this.getImmediateChild(a).updateChild(Si(t),o);return this.updateImmediateChild(a,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const o={};let a=0,c=0,d=!0;if(this.forEachChild(Li,(g,E)=>{o[g]=E.val(t),a++,d&&i.INTEGER_REGEXP_.test(g)?c=Math.max(c,Number(g)):d=!1}),!t&&d&&c<2*a){const g=[];for(const E in o)g[E]=o[E];return g}return t&&!this.getPriority().isEmpty()&&(o[".priority"]=this.getPriority().val()),o}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+ZM(this.getPriority().val())+":"),this.forEachChild(Li,(o,a)=>{const c=a.hash();""!==c&&(t+=":"+o+":"+c)}),this.lazyHash_=""===t?"":Pp(t)}return this.lazyHash_}getPredecessorChildName(t,o,a){const c=this.resolveIndex_(a);if(c){const d=c.getPredecessorKey(new Tr(t,o));return d?d.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const o=this.resolveIndex_(t);if(o){const a=o.minKey();return a&&a.name}return this.children_.minKey()}getFirstChild(t){const o=this.getFirstChildName(t);return o?new Tr(o,this.children_.get(o)):null}getLastChildName(t){const o=this.resolveIndex_(t);if(o){const a=o.maxKey();return a&&a.name}return this.children_.maxKey()}getLastChild(t){const o=this.getLastChildName(t);return o?new Tr(o,this.children_.get(o)):null}forEachChild(t,o){const a=this.resolveIndex_(t);return a?a.inorderTraversal(c=>o(c.name,c.node)):this.children_.inorderTraversal(o)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,o){const a=this.resolveIndex_(o);if(a)return a.getIteratorFrom(t,c=>c);{const c=this.children_.getIteratorFrom(t.name,Tr.Wrap);let d=c.peek();for(;null!=d&&o.compare(d,t)<0;)c.getNext(),d=c.peek();return c}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,o){const a=this.resolveIndex_(o);if(a)return a.getReverseIteratorFrom(t,c=>c);{const c=this.children_.getReverseIteratorFrom(t.name,Tr.Wrap);let d=c.peek();for(;null!=d&&o.compare(d,t)>0;)c.getNext(),d=c.peek();return c}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Wm?-1:0}withIndex(t){if(t===tu||this.indexMap_.hasIndex(t))return this;{const o=this.indexMap_.addIndex(t,this.children_);return new i(this.children_,this.priorityNode_,o)}}isIndexed(t){return t===tu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const o=t;if(this.getPriority().equals(o.getPriority())){if(this.children_.count()===o.children_.count()){const a=this.getIterator(Li),c=o.getIterator(Li);let d=a.getNext(),g=c.getNext();for(;d&&g;){if(d.name!==g.name||!d.node.equals(g.node))return!1;d=a.getNext(),g=c.getNext()}return null===d&&null===g}return!1}return!1}}resolveIndex_(t){return t===tu?null:this.indexMap_.get(t.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})();const Wm=new class Np extends Gn{constructor(){super(new Ka(Gm),Gn.EMPTY_NODE,ma.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Gn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Tr,{MIN:{value:new Tr(Ac,Gn.EMPTY_NODE)},MAX:{value:new Tr(Zc,Wm)}}),zI.__EMPTY_NODE=Gn.EMPTY_NODE,zm.__childrenNodeConstructor=Gn,function Uv(i){qI=i}(Wm),function Bv(i){eO=i}(Wm);const Km=!0;function Ki(i,e=null){if(null===i)return Gn.EMPTY_NODE;if("object"==typeof i&&".priority"in i&&(e=i[".priority"]),(0,te.vA)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof i&&".value"in i&&null!==i[".value"]&&(i=i[".value"]),"object"!=typeof i||".sv"in i)return new zm(i,Ki(e));if(i instanceof Array||!Km){let t=Gn.EMPTY_NODE;return Is(i,(o,a)=>{if((0,te.gR)(i,o)&&"."!==o.substring(0,1)){const c=Ki(a);(c.isLeafNode()||!c.isEmpty())&&(t=t.updateImmediateChild(o,c))}}),t.updatePriority(Ki(e))}{const t=[];let o=!1;if(Is(i,(d,g)=>{if("."!==d.substring(0,1)){const E=Ki(g);E.isEmpty()||(o=o||!E.getPriority().isEmpty(),t.push(new Tr(d,E)))}}),0===t.length)return Gn.EMPTY_NODE;const c=ml(t,iA,d=>d.name,Gm);if(o){const d=ml(t,Li.getCompare());return new Gn(c,Ki(e),new ma({".priority":d},{".priority":Li}))}return new Gn(c,Ki(e),ma.Default)}}!function cx(i){Dd=i}(Ki);class jv extends Hm{constructor(e){super(),this.indexPath_=e,(0,te.vA)(!Er(e)&&".priority"!==wr(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const o=this.extractChild(e.node),a=this.extractChild(t.node),c=o.compareTo(a);return 0===c?bd(e.name,t.name):c}makePost(e,t){const o=Ki(e),a=Gn.EMPTY_NODE.updateChild(this.indexPath_,o);return new Tr(t,a)}maxPost(){const e=Gn.EMPTY_NODE.updateChild(this.indexPath_,Wm);return new Tr(Zc,e)}toString(){return jm(this.indexPath_,0).join("/")}}const XI=new class sA extends Hm{compare(e,t){const o=e.node.compareTo(t.node);return 0===o?bd(e.name,t.name):o}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Tr.MIN}maxPost(){return Tr.MAX}makePost(e,t){const o=Ki(e);return new Tr(t,o)}toString(){return".value"}};function aA(i){return{type:"value",snapshotNode:i}}function Ui(i,e){return{type:"child_added",snapshotNode:e,childName:i}}function xp(i,e){return{type:"child_removed",snapshotNode:e,childName:i}}function qm(i,e,t){return{type:"child_changed",snapshotNode:e,childName:i,oldSnap:t}}class Gh{constructor(e){this.index_=e}updateChild(e,t,o,a,c,d){(0,te.vA)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const g=e.getImmediateChild(t);return g.getChild(a).equals(o.getChild(a))&&g.isEmpty()===o.isEmpty()||(null!=d&&(o.isEmpty()?e.hasChild(t)?d.trackChildChange(xp(t,g)):(0,te.vA)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):g.isEmpty()?d.trackChildChange(Ui(t,o)):d.trackChildChange(qm(t,o,g))),e.isLeafNode()&&o.isEmpty())?e:e.updateImmediateChild(t,o).withIndex(this.index_)}updateFullNode(e,t,o){return null!=o&&(e.isLeafNode()||e.forEachChild(Li,(a,c)=>{t.hasChild(a)||o.trackChildChange(xp(a,c))}),t.isLeafNode()||t.forEachChild(Li,(a,c)=>{if(e.hasChild(a)){const d=e.getImmediateChild(a);d.equals(c)||o.trackChildChange(qm(a,c,d))}else o.trackChildChange(Ui(a,c))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Gn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class nu{constructor(e){this.indexedFilter_=new Gh(e.getIndex()),this.index_=e.getIndex(),this.startPost_=nu.getStartPost_(e),this.endPost_=nu.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,o=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&o}updateChild(e,t,o,a,c,d){return this.matches(new Tr(t,o))||(o=Gn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,o,a,c,d)}updateFullNode(e,t,o){t.isLeafNode()&&(t=Gn.EMPTY_NODE);let a=t.withIndex(this.index_);a=a.updatePriority(Gn.EMPTY_NODE);const c=this;return t.forEachChild(Li,(d,g)=>{c.matches(new Tr(d,g))||(a=a.updateImmediateChild(d,Gn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,a,o)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class $v{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const o=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?o<=0:o<0},this.withinEndPost=t=>{const o=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?o<=0:o<0},this.rangedFilter_=new nu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,o,a,c,d){return this.rangedFilter_.matches(new Tr(t,o))||(o=Gn.EMPTY_NODE),e.getImmediateChild(t).equals(o)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,o,a,c,d):this.fullLimitUpdateChild_(e,t,o,c,d)}updateFullNode(e,t,o){let a;if(t.isLeafNode()||t.isEmpty())a=Gn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let c;a=Gn.EMPTY_NODE.withIndex(this.index_),c=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;c.hasNext()&&d<this.limit_;){const g=c.getNext();if(this.withinDirectionalStart(g)){if(!this.withinDirectionalEnd(g))break;a=a.updateImmediateChild(g.name,g.node),d++}}}else{let c;a=t.withIndex(this.index_),a=a.updatePriority(Gn.EMPTY_NODE),c=this.reverse_?a.getReverseIterator(this.index_):a.getIterator(this.index_);let d=0;for(;c.hasNext();){const g=c.getNext();d<this.limit_&&this.withinDirectionalStart(g)&&this.withinDirectionalEnd(g)?d++:a=a.updateImmediateChild(g.name,Gn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,a,o)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,o,a,c){let d;if(this.reverse_){const K=this.index_.getCompare();d=(ee,de)=>K(de,ee)}else d=this.index_.getCompare();const g=e;(0,te.vA)(g.numChildren()===this.limit_,"");const E=new Tr(t,o),S=this.reverse_?g.getFirstChild(this.index_):g.getLastChild(this.index_),V=this.rangedFilter_.matches(E);if(g.hasChild(t)){const K=g.getImmediateChild(t);let ee=a.getChildAfterChild(this.index_,S,this.reverse_);for(;null!=ee&&(ee.name===t||g.hasChild(ee.name));)ee=a.getChildAfterChild(this.index_,ee,this.reverse_);const de=null==ee?1:d(ee,E);if(V&&!o.isEmpty()&&de>=0)return c?.trackChildChange(qm(t,o,K)),g.updateImmediateChild(t,o);{c?.trackChildChange(xp(t,K));const $e=g.updateImmediateChild(t,Gn.EMPTY_NODE);return null!=ee&&this.rangedFilter_.matches(ee)?(c?.trackChildChange(Ui(ee.name,ee.node)),$e.updateImmediateChild(ee.name,ee.node)):$e}}return o.isEmpty()?e:V&&d(S,E)>=0?(null!=c&&(c.trackChildChange(xp(S.name,S.node)),c.trackChildChange(Ui(t,o))),g.updateImmediateChild(t,o).updateImmediateChild(S.name,Gn.EMPTY_NODE)):e}}class Md{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Li}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,te.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,te.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ac}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,te.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,te.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Zc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,te.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Li}copy(){const e=new Md;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Gv(i,e,t){const o=i.copy();return o.startSet_=!0,void 0===e&&(e=null),o.indexStartValue_=e,null!=t?(o.startNameSet_=!0,o.indexStartName_=t):(o.startNameSet_=!1,o.indexStartName_=""),o}function Qm(i,e,t){const o=i.copy();return o.endSet_=!0,void 0===e&&(e=null),o.indexEndValue_=e,void 0!==t?(o.endNameSet_=!0,o.indexEndName_=t):(o.endNameSet_=!1,o.indexEndName_=""),o}function zh(i,e){const t=i.copy();return t.index_=e,t}function Od(i){const e={};if(i.isDefault())return e;let t;if(i.index_===Li?t="$priority":i.index_===XI?t="$value":i.index_===tu?t="$key":((0,te.vA)(i.index_ instanceof jv,"Unrecognized index type!"),t=i.index_.toString()),e.orderBy=(0,te.As)(t),i.startSet_){const o=i.startAfterSet_?"startAfter":"startAt";e[o]=(0,te.As)(i.indexStartValue_),i.startNameSet_&&(e[o]+=","+(0,te.As)(i.indexStartName_))}if(i.endSet_){const o=i.endBeforeSet_?"endBefore":"endAt";e[o]=(0,te.As)(i.indexEndValue_),i.endNameSet_&&(e[o]+=","+(0,te.As)(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?e.limitToFirst=i.limit_:e.limitToLast=i.limit_),e}function dA(i){const e={};if(i.startSet_&&(e.sp=i.indexStartValue_,i.startNameSet_&&(e.sn=i.indexStartName_),e.sin=!i.startAfterSet_),i.endSet_&&(e.ep=i.indexEndValue_,i.endNameSet_&&(e.en=i.indexEndName_),e.ein=!i.endBeforeSet_),i.limitSet_){e.l=i.limit_;let t=i.viewFrom_;""===t&&(t=i.isViewFromLeft()?"l":"r"),e.vf=t}return i.index_!==Li&&(e.i=i.index_.toString()),e}class Ys extends jh{constructor(e,t,o,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.log_=xm("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,te.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,o,a){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const d=Ys.getListenId_(e,o),g={};this.listens_[d]=g;const E=Od(e._queryParams);this.restRequest_(c+".json",E,(S,V)=>{let K=V;if(404===S&&(K=null,S=null),null===S&&this.onDataUpdate_(c,K,!1,o),(0,te.yw)(this.listens_,d)===g){let ee;ee=S?401===S?"permission_denied":"rest_error:"+S:"ok",a(ee,null)}})}unlisten(e,t){const o=Ys.getListenId_(e,t);delete this.listens_[o]}get(e){const t=Od(e._queryParams),o=e._path.toString(),a=new te.cY;return this.restRequest_(o+".json",t,(c,d)=>{let g=d;404===c&&(g=null,c=null),null===c?(this.onDataUpdate_(o,g,!1,null),a.resolve(g)):a.reject(new Error(g))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},o){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,c])=>{a&&a.accessToken&&(t.auth=a.accessToken),c&&c.token&&(t.ac=c.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,te.Am)(t);this.log_("Sending REST request for "+d);const g=new XMLHttpRequest;g.onreadystatechange=()=>{if(o&&4===g.readyState){this.log_("REST Response for "+d+" received. status:",g.status,"response:",g.responseText);let E=null;if(g.status>=200&&g.status<300){try{E=(0,te.$L)(g.responseText)}catch{Ns("Failed to parse JSON response for "+d+": "+g.responseText)}o(null,E)}else 401!==g.status&&404!==g.status&&Ns("Got unsuccessful REST response for "+d+" Status: "+g.status),o(g.status);o=null}},g.open("GET",d,!0),g.send()})}}class rO{constructor(){this.rootNode_=Gn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Wv(){return{value:null,children:new Map}}function Rd(i,e,t){if(Er(e))i.value=t,i.children.clear();else if(null!==i.value)i.value=i.value.updateChild(e,t);else{const o=wr(e);i.children.has(o)||i.children.set(o,Wv()),Rd(i.children.get(o),e=Si(e),t)}}function Kv(i,e){if(Er(e))return i.value=null,i.children.clear(),!0;if(null!==i.value){if(i.value.isLeafNode())return!1;{const t=i.value;return i.value=null,t.forEachChild(Li,(o,a)=>{Rd(i,new ai(o),a)}),Kv(i,e)}}if(i.children.size>0){const t=wr(e);return e=Si(e),i.children.has(t)&&Kv(i.children.get(t),e)&&i.children.delete(t),0===i.children.size}return!0}function qv(i,e,t){null!==i.value?t(e,i.value):function iO(i,e){i.children.forEach((t,o)=>{e(o,t)})}(i,(o,a)=>{qv(a,new ai(e.toString()+"/"+o),t)})}class ux{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Is(this.last_,(o,a)=>{t[o]=t[o]-a}),this.last_=e,t}}class ZI{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new ux(e);const o=1e4+2e4*Math.random();Sp(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const e=this.statsListener_.get(),t={};let o=!1;Is(e,(a,c)=>{c>0&&(0,te.gR)(this.statsToReport_,a)&&(t[a]=c,o=!0)}),o&&this.server_.reportStats(t),Sp(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var _a=function(i){return i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",i}(_a||{});function Nd(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class kp{constructor(e,t,o){this.path=e,this.affectedTree=t,this.revert=o,this.type=_a.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Er(this.path)){if(null!=this.affectedTree.value)return(0,te.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ai(e));return new kp(ei(),t,this.revert)}}return(0,te.vA)(wr(this.path)===e,"operationForChild called for unrelated child."),new kp(Si(this.path),this.affectedTree,this.revert)}}class Wh{constructor(e,t){this.source=e,this.path=t,this.type=_a.LISTEN_COMPLETE}operationForChild(e){return Er(this.path)?new Wh(this.source,ei()):new Wh(this.source,Si(this.path))}}class xd{constructor(e,t,o){this.source=e,this.path=t,this.snap=o,this.type=_a.OVERWRITE}operationForChild(e){return Er(this.path)?new xd(this.source,ei(),this.snap.getImmediateChild(e)):new xd(this.source,Si(this.path),this.snap)}}class Kh{constructor(e,t,o){this.source=e,this.path=t,this.children=o,this.type=_a.MERGE}operationForChild(e){if(Er(this.path)){const t=this.children.subtree(new ai(e));return t.isEmpty()?null:t.value?new xd(this.source,ei(),t.value):new Kh(this.source,ei(),t)}return(0,te.vA)(wr(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Kh(this.source,Si(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ju{constructor(e,t,o){this.node_=e,this.fullyInitialized_=t,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Er(e))return this.isFullyInitialized()&&!this.filtered_;const t=wr(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class oO{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ru(i,e,t,o,a,c){const d=o.filter(g=>g.type===t);d.sort((g,E)=>function aO(i,e,t){if(null==e.childName||null==t.childName)throw(0,te.Hk)("Should only compare child_ events.");const o=new Tr(e.childName,e.snapshotNode),a=new Tr(t.childName,t.snapshotNode);return i.index_.compare(o,a)}(i,g,E)),d.forEach(g=>{const E=function fA(i,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,i.index_)),e}(i,g,c);a.forEach(S=>{S.respondsTo(g.type)&&e.push(S.createEvent(E,i.query_))})})}function Jv(i,e){return{eventCache:i,serverCache:e}}function Ym(i,e,t,o){return Jv(new ju(e,t,o),i.serverCache)}function e0(i,e,t,o){return Jv(i.eventCache,new ju(e,t,o))}function Xm(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function qh(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let pA;class _i{constructor(e,t=(()=>(pA||(pA=new Ka(MM)),pA))()){this.value=e,this.children=t}static fromObject(e){let t=new _i(null);return Is(e,(o,a)=>{t=t.set(new ai(o),a)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ei(),value:this.value};if(Er(e))return null;{const o=wr(e),a=this.children.get(o);if(null!==a){const c=a.findRootMostMatchingPathAndValue(Si(e),t);return null!=c?{path:so(new ai(o),c.path),value:c.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Er(e))return this;{const t=wr(e),o=this.children.get(t);return null!==o?o.subtree(Si(e)):new _i(null)}}set(e,t){if(Er(e))return new _i(t,this.children);{const o=wr(e),c=(this.children.get(o)||new _i(null)).set(Si(e),t),d=this.children.insert(o,c);return new _i(this.value,d)}}remove(e){if(Er(e))return this.children.isEmpty()?new _i(null):new _i(null,this.children);{const t=wr(e),o=this.children.get(t);if(o){const a=o.remove(Si(e));let c;return c=a.isEmpty()?this.children.remove(t):this.children.insert(t,a),null===this.value&&c.isEmpty()?new _i(null):new _i(this.value,c)}return this}}get(e){if(Er(e))return this.value;{const t=wr(e),o=this.children.get(t);return o?o.get(Si(e)):null}}setTree(e,t){if(Er(e))return t;{const o=wr(e),c=(this.children.get(o)||new _i(null)).setTree(Si(e),t);let d;return d=c.isEmpty()?this.children.remove(o):this.children.insert(o,c),new _i(this.value,d)}}fold(e){return this.fold_(ei(),e)}fold_(e,t){const o={};return this.children.inorderTraversal((a,c)=>{o[a]=c.fold_(so(e,a),t)}),t(e,this.value,o)}findOnPath(e,t){return this.findOnPath_(e,ei(),t)}findOnPath_(e,t,o){const a=!!this.value&&o(t,this.value);if(a)return a;if(Er(e))return null;{const c=wr(e),d=this.children.get(c);return d?d.findOnPath_(Si(e),so(t,c),o):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ei(),t)}foreachOnPath_(e,t,o){if(Er(e))return this;{this.value&&o(t,this.value);const a=wr(e),c=this.children.get(a);return c?c.foreachOnPath_(Si(e),so(t,a),o):new _i(null)}}foreach(e){this.foreach_(ei(),e)}foreach_(e,t){this.children.inorderTraversal((o,a)=>{a.foreach_(so(e,o),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,o)=>{o.value&&e(t,o.value)})}}class _l{constructor(e){this.writeTree_=e}static empty(){return new _l(new _i(null))}}function Jm(i,e,t){if(Er(e))return new _l(new _i(t));{const o=i.writeTree_.findRootMostValueAndPath(e);if(null!=o){const a=o.path;let c=o.value;const d=za(a,e);return c=c.updateChild(d,t),new _l(i.writeTree_.set(a,c))}{const a=new _i(t),c=i.writeTree_.setTree(e,a);return new _l(c)}}}function t0(i,e,t){let o=i;return Is(t,(a,c)=>{o=Jm(o,so(e,a),c)}),o}function gA(i,e){if(Er(e))return _l.empty();{const t=i.writeTree_.setTree(e,new _i(null));return new _l(t)}}function n0(i,e){return null!=Qh(i,e)}function Qh(i,e){const t=i.writeTree_.findRootMostValueAndPath(e);return null!=t?i.writeTree_.get(t.path).getChild(za(t.path,e)):null}function mA(i){const e=[],t=i.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Li,(o,a)=>{e.push(new Tr(o,a))}):i.writeTree_.children.inorderTraversal((o,a)=>{null!=a.value&&e.push(new Tr(o,a.value))}),e}function kd(i,e){if(Er(e))return i;{const t=Qh(i,e);return new _l(null!=t?new _i(t):i.writeTree_.subtree(e))}}function r0(i){return i.writeTree_.isEmpty()}function Fp(i,e){return _A(ei(),i.writeTree_,e)}function _A(i,e,t){if(null!=e.value)return t.updateChild(i,e.value);{let o=null;return e.children.inorderTraversal((a,c)=>{".priority"===a?((0,te.vA)(null!==c.value,"Priority writes must always be leaf nodes"),o=c.value):t=_A(so(i,a),c,t)}),!t.getChild(i).isEmpty()&&null!==o&&(t=t.updateChild(so(i,".priority"),o)),t}}function Zv(i,e){return Xh(e,i)}function fO(i,e){if(i.snap)return Wa(i.path,e);for(const t in i.children)if(i.children.hasOwnProperty(t)&&Wa(so(i.path,t),e))return!0;return!1}function vA(i){return i.visible}function $u(i,e,t){let o=_l.empty();for(let a=0;a<i.length;++a){const c=i[a];if(e(c)){const d=c.path;let g;if(c.snap)Wa(t,d)?(g=za(t,d),o=Jm(o,g,c.snap)):Wa(d,t)&&(g=za(d,t),o=Jm(o,ei(),c.snap.getChild(g)));else{if(!c.children)throw(0,te.Hk)("WriteRecord should have .snap or .children");if(Wa(t,d))g=za(t,d),o=t0(o,g,c.children);else if(Wa(d,t))if(g=za(d,t),Er(g))o=t0(o,ei(),c.children);else{const E=(0,te.yw)(c.children,wr(g));if(E){const S=E.getChild(Si(g));o=Jm(o,ei(),S)}}}}}return o}function EA(i,e,t,o,a){if(o||a){const c=kd(i.visibleWrites,e);return!a&&r0(c)?t:a||null!=t||n0(c,ei())?Fp($u(i.allWrites,function(S){return(S.visible||a)&&(!o||!~o.indexOf(S.writeId))&&(Wa(S.path,e)||Wa(e,S.path))},e),t||Gn.EMPTY_NODE):null}{const c=Qh(i.visibleWrites,e);if(null!=c)return c;{const d=kd(i.visibleWrites,e);return r0(d)?t:null!=t||n0(d,ei())?Fp(d,t||Gn.EMPTY_NODE):null}}}function Lp(i,e,t,o){return EA(i.writeTree,i.treePath,e,t,o)}function Fd(i,e){return function pO(i,e,t){let o=Gn.EMPTY_NODE;const a=Qh(i.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(Li,(c,d)=>{o=o.updateImmediateChild(c,d)}),o;if(t){const c=kd(i.visibleWrites,e);return t.forEachChild(Li,(d,g)=>{const E=Fp(kd(c,new ai(d)),g);o=o.updateImmediateChild(d,E)}),mA(c).forEach(d=>{o=o.updateImmediateChild(d.name,d.node)}),o}return mA(kd(i.visibleWrites,e)).forEach(d=>{o=o.updateImmediateChild(d.name,d.node)}),o}(i.writeTree,i.treePath,e)}function o0(i,e,t,o){return function CA(i,e,t,o,a){(0,te.vA)(o||a,"Either existingEventSnap or existingServerSnap must exist");const c=so(e,t);if(n0(i.visibleWrites,c))return null;{const d=kd(i.visibleWrites,c);return r0(d)?a.getChild(t):Fp(d,a.getChild(t))}}(i.writeTree,i.treePath,e,t,o)}function Hu(i,e){return function IA(i,e){return Qh(i.visibleWrites,e)}(i.writeTree,so(i.treePath,e))}function Ld(i,e,t){return function gO(i,e,t,o){const a=so(e,t),c=Qh(i.visibleWrites,a);return null!=c?c:o.isCompleteForChild(t)?Fp(kd(i.visibleWrites,a),o.getNode().getImmediateChild(t)):null}(i.writeTree,i.treePath,e,t)}function Yh(i,e){return Xh(so(i.treePath,e),i.writeTree)}function Xh(i,e){return{treePath:i,writeTree:e}}class Vp{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,o=e.childName;(0,te.vA)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,te.vA)(".priority"!==o,"Only non-priority child changes can be tracked.");const a=this.changeMap.get(o);if(a){const c=a.type;if("child_added"===t&&"child_removed"===c)this.changeMap.set(o,qm(o,e.snapshotNode,a.snapshotNode));else if("child_removed"===t&&"child_added"===c)this.changeMap.delete(o);else if("child_removed"===t&&"child_changed"===c)this.changeMap.set(o,xp(o,a.oldSnap));else if("child_changed"===t&&"child_added"===c)this.changeMap.set(o,Ui(o,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==c)throw(0,te.Hk)("Illegal combination of changes: "+e+" occurred after "+a);this.changeMap.set(o,qm(o,e.snapshotNode,a.oldSnap))}}else this.changeMap.set(o,e)}getChanges(){return Array.from(this.changeMap.values())}}const Jh=new class Up{getCompleteChild(e){return null}getChildAfterChild(e,t,o){return null}};class Vd{constructor(e,t,o=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=o}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const o=null!=this.optCompleteServerCache_?new ju(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ld(this.writes_,e,o)}}getChildAfterChild(e,t,o){const a=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:qh(this.viewCache_),c=function s0(i,e,t,o,a,c){return function wA(i,e,t,o,a,c,d){let g;const E=kd(i.visibleWrites,e),S=Qh(E,ei());if(null!=S)g=S;else{if(null==t)return[];g=Fp(E,t)}if(g=g.withIndex(d),g.isEmpty()||g.isLeafNode())return[];{const V=[],K=d.getCompare(),ee=c?g.getReverseIteratorFrom(o,d):g.getIteratorFrom(o,d);let de=ee.getNext();for(;de&&V.length<a;)0!==K(de,o)&&V.push(de),de=ee.getNext();return V}}(i.writeTree,i.treePath,e,t,o,a,c)}(this.writes_,a,t,1,o,e);return 0===c.length?null:c[0]}}function a0(i,e,t,o,a,c){const d=e.eventCache;if(null!=Hu(o,t))return e;{let g,E;if(Er(t))if((0,te.vA)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const S=qh(e),K=Fd(o,S instanceof Gn?S:Gn.EMPTY_NODE);g=i.filter.updateFullNode(e.eventCache.getNode(),K,c)}else{const S=Lp(o,qh(e));g=i.filter.updateFullNode(e.eventCache.getNode(),S,c)}else{const S=wr(t);if(".priority"===S){(0,te.vA)(1===Pd(t),"Can't have a priority with additional path components");const V=d.getNode();E=e.serverCache.getNode();const K=o0(o,t,V,E);g=null!=K?i.filter.updatePriority(V,K):d.getNode()}else{const V=Si(t);let K;if(d.isCompleteForChild(S)){E=e.serverCache.getNode();const ee=o0(o,t,d.getNode(),E);K=null!=ee?d.getNode().getImmediateChild(S).updateChild(V,ee):d.getNode().getImmediateChild(S)}else K=Ld(o,S,e.serverCache);g=null!=K?i.filter.updateChild(d.getNode(),S,K,V,a,c):d.getNode()}}return Ym(e,g,d.isFullyInitialized()||Er(t),i.filter.filtersNodes())}}function e_(i,e,t,o,a,c,d,g){const E=e.serverCache;let S;const V=d?i.filter:i.filter.getIndexedFilter();if(Er(t))S=V.updateFullNode(E.getNode(),o,null);else if(V.filtersNodes()&&!E.isFiltered()){const de=E.getNode().updateChild(t,o);S=V.updateFullNode(E.getNode(),de,null)}else{const de=wr(t);if(!E.isCompleteForPath(t)&&Pd(t)>1)return e;const Re=Si(t),qe=E.getNode().getImmediateChild(de).updateChild(Re,o);S=".priority"===de?V.updatePriority(E.getNode(),qe):V.updateChild(E.getNode(),de,qe,Re,Jh,null)}const K=e0(e,S,E.isFullyInitialized()||Er(t),V.filtersNodes());return a0(i,K,t,a,new Vd(a,K,c),g)}function eE(i,e,t,o,a,c,d){const g=e.eventCache;let E,S;const V=new Vd(a,e,c);if(Er(t))S=i.filter.updateFullNode(e.eventCache.getNode(),o,d),E=Ym(e,S,!0,i.filter.filtersNodes());else{const K=wr(t);if(".priority"===K)S=i.filter.updatePriority(e.eventCache.getNode(),o),E=Ym(e,S,g.isFullyInitialized(),g.isFiltered());else{const ee=Si(t),de=g.getNode().getImmediateChild(K);let Re;if(Er(ee))Re=o;else{const $e=V.getCompleteChild(K);Re=null!=$e?".priority"===Op(ee)&&$e.getChild(HI(ee)).isEmpty()?$e:$e.updateChild(ee,o):Gn.EMPTY_NODE}E=de.equals(Re)?e:Ym(e,i.filter.updateChild(g.getNode(),K,Re,ee,V,d),g.isFullyInitialized(),i.filter.filtersNodes())}}return E}function l0(i,e){return i.eventCache.isCompleteForChild(e)}function c0(i,e,t){return t.foreach((o,a)=>{e=e.updateChild(o,a)}),e}function tE(i,e,t,o,a,c,d,g){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let S,E=e;S=Er(t)?o:new _i(null).setTree(t,o);const V=e.serverCache.getNode();return S.children.inorderTraversal((K,ee)=>{if(V.hasChild(K)){const Re=c0(0,e.serverCache.getNode().getImmediateChild(K),ee);E=e_(i,E,new ai(K),Re,a,c,d,g)}}),S.children.inorderTraversal((K,ee)=>{const de=!e.serverCache.isCompleteForChild(K)&&null===ee.value;if(!V.hasChild(K)&&!de){const $e=c0(0,e.serverCache.getNode().getImmediateChild(K),ee);E=e_(i,E,new ai(K),$e,a,c,d,g)}}),E}class _O{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const o=this.query_._queryParams,a=new Gh(o.getIndex()),c=function Hv(i){return i.loadsAllData()?new Gh(i.getIndex()):i.hasLimit()?new $v(i):new nu(i)}(o);this.processor_=function Bp(i){return{filter:i}}(c);const d=t.serverCache,g=t.eventCache,E=a.updateFullNode(Gn.EMPTY_NODE,d.getNode(),null),S=c.updateFullNode(Gn.EMPTY_NODE,g.getNode(),null),V=new ju(E,d.isFullyInitialized(),a.filtersNodes()),K=new ju(S,g.isFullyInitialized(),c.filtersNodes());this.viewCache_=Jv(K,V),this.eventGenerator_=new oO(this.query_)}get query(){return this.query_}}function d0(i,e){const t=qh(i.viewCache_);return t&&(i.query._queryParams.loadsAllData()||!Er(e)&&!t.getImmediateChild(wr(e)).isEmpty())?t.getChild(e):null}function PA(i){return 0===i.eventRegistrations_.length}function yO(i,e,t){const o=[];if(t){(0,te.vA)(null==e,"A cancel should cancel all event registrations.");const a=i.query._path;i.eventRegistrations_.forEach(c=>{const d=c.createCancelEvent(t,a);d&&o.push(d)})}if(e){let a=[];for(let c=0;c<i.eventRegistrations_.length;++c){const d=i.eventRegistrations_[c];if(d.matches(e)){if(e.hasAnyCallback()){a=a.concat(i.eventRegistrations_.slice(c+1));break}}else a.push(d)}i.eventRegistrations_=a}else i.eventRegistrations_=[];return o}function vO(i,e,t,o){e.type===_a.MERGE&&null!==e.source.queryId&&((0,te.vA)(qh(i.viewCache_),"We should always have a full cache before handling merges"),(0,te.vA)(Xm(i.viewCache_),"Missing event cache, even though we have a server cache"));const a=i.viewCache_,c=function TA(i,e,t,o,a){const c=new Vp;let d,g;if(t.type===_a.OVERWRITE){const S=t;S.source.fromUser?d=eE(i,e,S.path,S.snap,o,a,c):((0,te.vA)(S.source.fromServer,"Unknown source."),g=S.source.tagged||e.serverCache.isFiltered()&&!Er(S.path),d=e_(i,e,S.path,S.snap,o,a,g,c))}else if(t.type===_a.MERGE){const S=t;S.source.fromUser?d=function AA(i,e,t,o,a,c,d){let g=e;return o.foreach((E,S)=>{const V=so(t,E);l0(e,wr(V))&&(g=eE(i,g,V,S,a,c,d))}),o.foreach((E,S)=>{const V=so(t,E);l0(e,wr(V))||(g=eE(i,g,V,S,a,c,d))}),g}(i,e,S.path,S.children,o,a,c):((0,te.vA)(S.source.fromServer,"Unknown source."),g=S.source.tagged||e.serverCache.isFiltered(),d=tE(i,e,S.path,S.children,o,a,g,c))}else if(t.type===_a.ACK_USER_WRITE){const S=t;d=S.revert?function mO(i,e,t,o,a,c){let d;if(null!=Hu(o,t))return e;{const g=new Vd(o,e,a),E=e.eventCache.getNode();let S;if(Er(t)||".priority"===wr(t)){let V;if(e.serverCache.isFullyInitialized())V=Lp(o,qh(e));else{const K=e.serverCache.getNode();(0,te.vA)(K instanceof Gn,"serverChildren would be complete if leaf node"),V=Fd(o,K)}S=i.filter.updateFullNode(E,V,c)}else{const V=wr(t);let K=Ld(o,V,e.serverCache);null==K&&e.serverCache.isCompleteForChild(V)&&(K=E.getImmediateChild(V)),S=null!=K?i.filter.updateChild(E,V,K,Si(t),g,c):e.eventCache.getNode().hasChild(V)?i.filter.updateChild(E,V,Gn.EMPTY_NODE,Si(t),g,c):E,S.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=Lp(o,qh(e)),d.isLeafNode()&&(S=i.filter.updateFullNode(S,d,c)))}return d=e.serverCache.isFullyInitialized()||null!=Hu(o,ei()),Ym(e,S,d,i.filter.filtersNodes())}}(i,e,S.path,o,a,c):function nE(i,e,t,o,a,c,d){if(null!=Hu(a,t))return e;const g=e.serverCache.isFiltered(),E=e.serverCache;if(null!=o.value){if(Er(t)&&E.isFullyInitialized()||E.isCompleteForPath(t))return e_(i,e,t,E.getNode().getChild(t),a,c,g,d);if(Er(t)){let S=new _i(null);return E.getNode().forEachChild(tu,(V,K)=>{S=S.set(new ai(V),K)}),tE(i,e,t,S,a,c,g,d)}return e}{let S=new _i(null);return o.foreach((V,K)=>{const ee=so(t,V);E.isCompleteForPath(ee)&&(S=S.set(V,E.getNode().getChild(ee)))}),tE(i,e,t,S,a,c,g,d)}}(i,e,S.path,S.affectedTree,o,a,c)}else{if(t.type!==_a.LISTEN_COMPLETE)throw(0,te.Hk)("Unknown operation type: "+t.type);d=function Ud(i,e,t,o,a){const c=e.serverCache;return a0(i,e0(e,c.getNode(),c.isFullyInitialized()||Er(t),c.isFiltered()),t,o,Jh,a)}(i,e,t.path,o,c)}const E=c.getChanges();return function bA(i,e,t){const o=e.eventCache;if(o.isFullyInitialized()){const a=o.getNode().isLeafNode()||o.getNode().isEmpty(),c=Xm(i);(t.length>0||!i.eventCache.isFullyInitialized()||a&&!o.getNode().equals(c)||!o.getNode().getPriority().equals(c.getPriority()))&&t.push(aA(Xm(e)))}}(e,d,E),{viewCache:d,changes:E}}(i.processor_,a,e,t,o);return function jp(i,e){(0,te.vA)(e.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,te.vA)(e.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}(i.processor_,c.viewCache),(0,te.vA)(c.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=c.viewCache,DA(i,c.changes,c.viewCache.eventCache.getNode(),null)}function DA(i,e,t,o){return function sO(i,e,t,o){const a=[],c=[];return e.forEach(d=>{"child_changed"===d.type&&i.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&c.push(function Mo(i,e){return{type:"child_moved",snapshotNode:e,childName:i}}(d.childName,d.snapshotNode))}),ru(i,a,"child_removed",e,o,t),ru(i,a,"child_added",e,o,t),ru(i,a,"child_moved",c,o,t),ru(i,a,"child_changed",e,o,t),ru(i,a,"value",e,o,t),a}(i.eventGenerator_,e,t,o?[o]:i.eventRegistrations_)}let t_,n_;class SA{constructor(){this.views=new Map}}function f0(i,e,t,o){const a=e.source.queryId;if(null!==a){const c=i.views.get(a);return(0,te.vA)(null!=c,"SyncTree gave us an op for an invalid query."),vO(c,e,t,o)}{let c=[];for(const d of i.views.values())c=c.concat(vO(d,e,t,o));return c}}function p0(i,e,t,o,a){const d=i.views.get(e._queryIdentifier);if(!d){let g=Lp(t,a?o:null),E=!1;g?E=!0:o instanceof Gn?(g=Fd(t,o),E=!1):(g=Gn.EMPTY_NODE,E=!1);const S=Jv(new ju(g,E,!1),new ju(o,a,!1));return new _O(e,S)}return d}function g0(i){const e=[];for(const t of i.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function yl(i,e){let t=null;for(const o of i.views.values())t=t||d0(o,e);return t}function RA(i,e){return e._queryParams.loadsAllData()?rE(i):i.views.get(e._queryIdentifier)}function NA(i,e){return null!=RA(i,e)}function Gu(i){return null!=rE(i)}function rE(i){for(const e of i.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let _0=1;class iE{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _i(null),this.pendingWriteTree_=function Zm(){return{visibleWrites:_l.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function r_(i,e,t,o,a){return function cO(i,e,t,o,a){(0,te.vA)(o>i.lastWriteId,"Stacking an older write on top of newer ones"),void 0===a&&(a=!0),i.allWrites.push({path:e,snap:t,writeId:o,visible:a}),a&&(i.visibleWrites=Jm(i.visibleWrites,e,t)),i.lastWriteId=o}(i.pendingWriteTree_,e,t,o,a),a?jd(i,new xd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Bd(i,e,t=!1){const o=function dO(i,e){for(let t=0;t<i.allWrites.length;t++){const o=i.allWrites[t];if(o.writeId===e)return o}return null}(i.pendingWriteTree_,e);if(function hO(i,e){const t=i.allWrites.findIndex(g=>g.writeId===e);(0,te.vA)(t>=0,"removeWrite called with nonexistent writeId.");const o=i.allWrites[t];i.allWrites.splice(t,1);let a=o.visible,c=!1,d=i.allWrites.length-1;for(;a&&d>=0;){const g=i.allWrites[d];g.visible&&(d>=t&&fO(g,o.path)?a=!1:Wa(o.path,g.path)&&(c=!0)),d--}return!!a&&(c?(function yA(i){i.visibleWrites=$u(i.allWrites,vA,ei()),i.lastWriteId=i.allWrites.length>0?i.allWrites[i.allWrites.length-1].writeId:-1}(i),!0):(o.snap?i.visibleWrites=gA(i.visibleWrites,o.path):Is(o.children,E=>{i.visibleWrites=gA(i.visibleWrites,so(o.path,E))}),!0))}(i.pendingWriteTree_,e)){let c=new _i(null);return null!=o.snap?c=c.set(ei(),!0):Is(o.children,d=>{c=c.set(new ai(d),!0)}),jd(i,new kp(o.path,c,t))}return[]}function i_(i,e,t){return jd(i,new xd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function o_(i,e,t,o,a=!1){const c=e._path,d=i.syncPointTree_.get(c);let g=[];if(d&&("default"===e._queryIdentifier||NA(d,e))){const E=function OA(i,e,t,o){const a=e._queryIdentifier,c=[];let d=[];const g=Gu(i);if("default"===a)for(const[E,S]of i.views.entries())d=d.concat(yO(S,t,o)),PA(S)&&(i.views.delete(E),S.query._queryParams.loadsAllData()||c.push(S.query));else{const E=i.views.get(a);E&&(d=d.concat(yO(E,t,o)),PA(E)&&(i.views.delete(a),E.query._queryParams.loadsAllData()||c.push(E.query)))}return g&&!Gu(i)&&c.push(new(function MA(){return(0,te.vA)(t_,"Reference.ts has not been loaded"),t_}())(e._repo,e._path)),{removed:c,events:d}}(d,e,t,o);(function CO(i){return 0===i.views.size})(d)&&(i.syncPointTree_=i.syncPointTree_.remove(c));const S=E.removed;if(g=E.events,!a){const V=-1!==S.findIndex(ee=>ee._queryParams.loadsAllData()),K=i.syncPointTree_.findOnPath(c,(ee,de)=>Gu(de));if(V&&!K){const ee=i.syncPointTree_.subtree(c);if(!ee.isEmpty()){const de=function bO(i){return i.fold((e,t,o)=>{if(t&&Gu(t))return[rE(t)];{let a=[];return t&&(a=g0(t)),Is(o,(c,d)=>{a=a.concat(d)}),a}})}(ee);for(let Re=0;Re<de.length;++Re){const $e=de[Re],qe=$e.query,kt=E0(i,$e);i.listenProvider_.startListening(Gp(qe),s_(i,qe),kt.hashFn,kt.onComplete)}}}!K&&S.length>0&&!o&&(V?i.listenProvider_.stopListening(Gp(e),null):S.forEach(ee=>{const de=i.queryToTagMap.get(sE(ee));i.listenProvider_.stopListening(Gp(ee),de)}))}!function AO(i,e){for(let t=0;t<e.length;++t){const o=e[t];if(!o._queryParams.loadsAllData()){const a=sE(o),c=i.queryToTagMap.get(a);i.queryToTagMap.delete(a),i.tagToQueryMap.delete(c)}}}(i,S)}return g}function y0(i,e,t,o){const a=aE(i,o);if(null!=a){const c=lE(a),d=c.path,g=c.queryId,E=za(d,e);return Hp(i,d,new xd(Nd(g),E,t))}return[]}function v0(i,e,t,o=!1){const a=e._path;let c=null,d=!1;i.syncPointTree_.foreachOnPath(a,(ee,de)=>{const Re=za(ee,a);c=c||yl(de,Re),d=d||Gu(de)});let E,g=i.syncPointTree_.get(a);g?(d=d||Gu(g),c=c||yl(g,ei())):(g=new SA,i.syncPointTree_=i.syncPointTree_.set(a,g)),null!=c?E=!0:(E=!1,c=Gn.EMPTY_NODE,i.syncPointTree_.subtree(a).foreachChild((de,Re)=>{const $e=yl(Re,ei());$e&&(c=c.updateImmediateChild(de,$e))}));const S=NA(g,e);if(!S&&!e._queryParams.loadsAllData()){const ee=sE(e);(0,te.vA)(!i.queryToTagMap.has(ee),"View does not exist, but we have a tag");const de=function PO(){return _0++}();i.queryToTagMap.set(ee,de),i.tagToQueryMap.set(de,ee)}let K=function IO(i,e,t,o,a,c){const d=p0(i,e,o,a,c);return i.views.has(e._queryIdentifier)||i.views.set(e._queryIdentifier,d),function h0(i,e){i.eventRegistrations_.push(e)}(d,t),function EO(i,e){const t=i.viewCache_.eventCache,o=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Li,(c,d)=>{o.push(Ui(c,d))}),t.isFullyInitialized()&&o.push(aA(t.getNode())),DA(i,o,t.getNode(),e)}(d,t)}(g,e,t,Zv(i.pendingWriteTree_,a),c,E);if(!S&&!d&&!o){const ee=RA(g,e);K=K.concat(function DO(i,e,t){const o=e._path,a=s_(i,e),c=E0(i,t),d=i.listenProvider_.startListening(Gp(e),a,c.hashFn,c.onComplete),g=i.syncPointTree_.subtree(o);if(a)(0,te.vA)(!Gu(g.value),"If we're adding a query, it shouldn't be shadowed");else{const E=g.fold((S,V,K)=>{if(!Er(S)&&V&&Gu(V))return[rE(V).query];{let ee=[];return V&&(ee=ee.concat(g0(V).map(de=>de.query))),Is(K,(de,Re)=>{ee=ee.concat(Re)}),ee}});for(let S=0;S<E.length;++S){const V=E[S];i.listenProvider_.stopListening(Gp(V),s_(i,V))}}return d}(i,e,ee))}return K}function oE(i,e,t){const a=i.pendingWriteTree_,c=i.syncPointTree_.findOnPath(e,(d,g)=>{const S=yl(g,za(d,e));if(S)return S});return EA(a,e,c,t,!0)}function jd(i,e){return $p(e,i.syncPointTree_,null,Zv(i.pendingWriteTree_,ei()))}function $p(i,e,t,o){if(Er(i.path))return xA(i,e,t,o);{const a=e.get(ei());null==t&&null!=a&&(t=yl(a,ei()));let c=[];const d=wr(i.path),g=i.operationForChild(d),E=e.children.get(d);if(E&&g){const S=t?t.getImmediateChild(d):null,V=Yh(o,d);c=c.concat($p(g,E,S,V))}return a&&(c=c.concat(f0(a,i,o,t))),c}}function xA(i,e,t,o){const a=e.get(ei());null==t&&null!=a&&(t=yl(a,ei()));let c=[];return e.children.inorderTraversal((d,g)=>{const E=t?t.getImmediateChild(d):null,S=Yh(o,d),V=i.operationForChild(d);V&&(c=c.concat(xA(V,g,E,S)))}),a&&(c=c.concat(f0(a,i,o,t))),c}function E0(i,e){const t=e.query,o=s_(i,t);return{hashFn:()=>(function u0(i){return i.viewCache_.serverCache.getNode()}(e)||Gn.EMPTY_NODE).hash(),onComplete:a=>{if("ok"===a)return o?function Dc(i,e,t){const o=aE(i,t);if(o){const a=lE(o),c=a.path,d=a.queryId,g=za(c,e);return Hp(i,c,new Wh(Nd(d),g))}return[]}(i,t._path,o):function Pc(i,e){return jd(i,new Wh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(i,t._path);{const c=function NM(i,e){let t="Unknown Error";"too_big"===i?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===i?t="Client doesn't have permission to access the desired data.":"unavailable"===i&&(t="The service is unavailable");const o=new Error(i+" at "+e._path.toString()+": "+t);return o.code=i.toUpperCase(),o}(a,t);return o_(i,t,null,c)}}}}function s_(i,e){const t=sE(e);return i.queryToTagMap.get(t)}function sE(i){return i._path.toString()+"$"+i._queryIdentifier}function aE(i,e){return i.tagToQueryMap.get(e)}function lE(i){const e=i.indexOf("$");return(0,te.vA)(-1!==e&&e<i.length-1,"Bad queryKey."),{queryId:i.substr(e+1),path:new ai(i.substr(0,e))}}function Hp(i,e,t){const o=i.syncPointTree_.get(e);return(0,te.vA)(o,"Missing sync point for query tag that we're tracking"),f0(o,t,Zv(i.pendingWriteTree_,e),null)}function Gp(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(function m0(){return(0,te.vA)(n_,"Reference.ts has not been loaded"),n_}())(i._repo,i._path):i}class C0{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new C0(t)}node(){return this.node_}}class I0{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=so(this.path_,e);return new I0(this.syncTree_,t)}node(){return oE(this.syncTree_,this.path_)}}const SO=function(i){return(i=i||{}).timestamp=i.timestamp||(new Date).getTime(),i},kA=function(i,e,t){return i&&"object"==typeof i?((0,te.vA)(".sv"in i,"Unexpected leaf node or priority contents"),"string"==typeof i[".sv"]?MO(i[".sv"],e,t):"object"==typeof i[".sv"]?OO(i[".sv"],e):void(0,te.vA)(!1,"Unexpected server value: "+JSON.stringify(i,null,2))):i},MO=function(i,e,t){if("timestamp"===i)return t.timestamp;(0,te.vA)(!1,"Unexpected server value: "+i)},OO=function(i,e,t){i.hasOwnProperty("increment")||(0,te.vA)(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const o=i.increment;"number"!=typeof o&&(0,te.vA)(!1,"Unexpected increment value: "+o);const a=e.node();if((0,te.vA)(null!==a&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return o;const d=a.getValue();return"number"!=typeof d?o:d+o},FA=function(i,e,t,o){return a_(e,new I0(t,i),o)},w0=function(i,e,t){return a_(i,new C0(e),t)};function a_(i,e,t){const o=i.getPriority().val(),a=kA(o,e.getImmediateChild(".priority"),t);let c;if(i.isLeafNode()){const d=i,g=kA(d.getValue(),e,t);return g!==d.getValue()||a!==d.getPriority().val()?new zm(g,Ki(a)):i}{const d=i;return c=d,a!==d.getPriority().val()&&(c=c.updatePriority(new zm(a))),d.forEachChild(Li,(g,E)=>{const S=a_(E,e.getImmediateChild(g),t);S!==E&&(c=c.updateImmediateChild(g,S))}),c}}class LA{constructor(e="",t=null,o={children:{},childCount:0}){this.name=e,this.parent=t,this.node=o}}function cE(i,e){let t=e instanceof ai?e:new ai(e),o=i,a=wr(t);for(;null!==a;){const c=(0,te.yw)(o.node.children,a)||{children:{},childCount:0};o=new LA(a,o,c),t=Si(t),a=wr(t)}return o}function zu(i){return i.node.value}function uE(i,e){i.node.value=e,b0(i)}function T0(i){return i.node.childCount>0}function dE(i,e){Is(i.node.children,(t,o)=>{e(new LA(t,i,o))})}function UA(i,e,t,o){t&&!o&&e(i),dE(i,a=>{UA(a,e,!0,o)}),t&&o&&e(i)}function l_(i){return new ai(null===i.parent?i.name:l_(i.parent)+"/"+i.name)}function b0(i){null!==i.parent&&function NO(i,e,t){const o=function VA(i){return void 0===zu(i)&&!T0(i)}(t),a=(0,te.gR)(i.node.children,e);o&&a?(delete i.node.children[e],i.node.childCount--,b0(i)):!o&&!a&&(i.node.children[e]=t.node,i.node.childCount++,b0(i))}(i.parent,i.name,i)}const hx=/[\[\].#$\/\u0000-\u001F\u007F]/,fx=/[\[\].#$\u0000-\u001F\u007F]/,A0=10485760,hE=function(i){return"string"==typeof i&&0!==i.length&&!hx.test(i)},c_=function(i){return"string"==typeof i&&0!==i.length&&!fx.test(i)},u_=function(i){return null===i||"string"==typeof i||"number"==typeof i&&!Td(i)||i&&"object"==typeof i&&(0,te.gR)(i,".sv")},Ql=function(i,e,t,o){o&&void 0===e||d_((0,te.dI)(i,"value"),e,t)},d_=function(i,e,t){const o=t instanceof ai?new QM(t,i):t;if(void 0===e)throw new Error(i+"contains undefined "+$h(o));if("function"==typeof e)throw new Error(i+"contains a function "+$h(o)+" with contents = "+e.toString());if(Td(e))throw new Error(i+"contains "+e.toString()+" "+$h(o));if("string"==typeof e&&e.length>A0/3&&(0,te.OE)(e)>A0)throw new Error(i+"contains a string greater than "+A0+" utf8 bytes "+$h(o)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let a=!1,c=!1;if(Is(e,(d,g)=>{if(".value"===d)a=!0;else if(".priority"!==d&&".sv"!==d&&(c=!0,!hE(d)))throw new Error(i+" contains an invalid key ("+d+") "+$h(o)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function YM(i,e){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(e),i.byteLength_+=(0,te.OE)(e),Zb(i)})(o,d),d_(i,g,o),function Vv(i){const e=i.parts_.pop();i.byteLength_-=(0,te.OE)(e),i.parts_.length>0&&(i.byteLength_-=1)}(o)}),a&&c)throw new Error(i+' contains ".value" child '+$h(o)+" in addition to actual children.")}},h_=function(i,e,t,o){if(o&&void 0===e)return;const a=(0,te.dI)(i,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(a+" must be an object containing the children to replace.");const c=[];Is(e,(d,g)=>{const E=new ai(d);if(d_(a,g,so(t,E)),".priority"===Op(E)&&!u_(g))throw new Error(a+"contains an invalid value for '"+E.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(E)}),function(i,e){let t,o;for(t=0;t<e.length;t++){o=e[t];const c=jm(o);for(let d=0;d<c.length;d++)if((".priority"!==c[d]||d!==c.length-1)&&!hE(c[d]))throw new Error(i+"contains an invalid key ("+c[d]+") in path "+o.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(qM);let a=null;for(t=0;t<e.length;t++){if(o=e[t],null!==a&&Wa(a,o))throw new Error(i+"contains a path "+a.toString()+" that is ancestor of another path "+o.toString());a=o}}(a,c)},f_=function(i,e,t){if(!t||void 0!==e){if(Td(e))throw new Error((0,te.dI)(i,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!u_(e))throw new Error((0,te.dI)(i,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},zp=function(i,e,t,o){if(!(o&&void 0===t||hE(t)))throw new Error((0,te.dI)(i,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},p_=function(i,e,t,o){if(!(o&&void 0===t||c_(t)))throw new Error((0,te.dI)(i,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},kO=function(i,e,t,o){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),p_(i,e,t,o)},Yl=function(i,e){if(".info"===wr(e))throw new Error(i+" failed = Can't modify data under /.info/")},g_=function(i,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!hE(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),c_(i)}(t))throw new Error((0,te.dI)(i,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class pE{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Wp(i,e){let t=null;for(let o=0;o<e.length;o++){const a=e[o],c=a.getPath();null!==t&&!Lv(c,t.path)&&(i.eventLists_.push(t),t=null),null===t&&(t={events:[],path:c}),t.events.push(a)}t&&i.eventLists_.push(t)}function P0(i,e,t){Wp(i,t),BA(i,o=>Lv(o,e))}function vl(i,e,t){Wp(i,t),BA(i,o=>Wa(o,e)||Wa(e,o))}function BA(i,e){i.recursionDepth_++;let t=!0;for(let o=0;o<i.eventLists_.length;o++){const a=i.eventLists_[o];a&&(e(a.path)?(jA(i.eventLists_[o]),i.eventLists_[o]=null):t=!1)}t&&(i.eventLists_=[]),i.recursionDepth_--}function jA(i){for(let e=0;e<i.events.length;e++){const t=i.events[e];if(null!==t){i.events[e]=null;const o=t.getEventRunner();Ga&&mo("event: "+t.toString()),Dp(o)}}}const D0="repo_interrupt",$A=25;class ef{constructor(e,t,o,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=o,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new pE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Wv(),this.transactionQueueTree_=new LA,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function HA(i){const t=i.infoData_.getNode(new ai(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function su(i){return SO({timestamp:HA(i)})}function LO(i,e,t,o,a){i.dataUpdateCount++;const c=new ai(e);t=i.interceptServerDataCallback_?i.interceptServerDataCallback_(e,t):t;let d=[];if(a)if(o){const E=(0,te.kH)(t,S=>Ki(S));d=function wO(i,e,t,o){const a=aE(i,o);if(a){const c=lE(a),d=c.path,g=c.queryId,E=za(d,e),S=_i.fromObject(t);return Hp(i,d,new Kh(Nd(g),E,S))}return[]}(i.serverSyncTree_,c,E,a)}else{const E=Ki(t);d=y0(i.serverSyncTree_,c,E,a)}else if(o){const E=(0,te.kH)(t,S=>Ki(S));d=function ou(i,e,t){const o=_i.fromObject(t);return jd(i,new Kh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,o))}(i.serverSyncTree_,c,E)}else{const E=Ki(t);d=i_(i.serverSyncTree_,c,E)}let g=c;d.length>0&&(g=au(i,c)),vl(i.eventQueue_,g,d)}function gE(i,e){mE(i,"connected",e),!1===e&&function UO(i){Kp(i,"onDisconnectEvents");const e=su(i),t=Wv();qv(i.onDisconnect_,ei(),(a,c)=>{const d=FA(a,c,i.serverSyncTree_,e);Rd(t,a,d)});let o=[];qv(t,ei(),(a,c)=>{o=o.concat(i_(i.serverSyncTree_,a,c));const d=EE(i,a);au(i,d)}),i.onDisconnect_=Wv(),vl(i.eventQueue_,ei(),o)}(i)}function mE(i,e,t){const o=new ai("/.info/"+e),a=Ki(t);i.infoData_.updateSnapshot(o,a);const c=i_(i.infoSyncTree_,o,a);vl(i.eventQueue_,o,c)}function m_(i){return i.nextWriteId_++}function $d(i,e,t,o,a){Kp(i,"set",{path:e.toString(),value:t,priority:o});const c=su(i),d=Ki(t,o),g=oE(i.serverSyncTree_,e),E=w0(d,g,c),S=m_(i),V=r_(i.serverSyncTree_,e,E,S,!0);Wp(i.eventQueue_,V),i.server_.put(e.toString(),d.val(!0),(ee,de)=>{const Re="ok"===ee;Re||Ns("set at "+e+" failed: "+ee);const $e=Bd(i.serverSyncTree_,S,!Re);vl(i.eventQueue_,e,$e),Xl(0,a,ee,de)});const K=EE(i,e);au(i,K),vl(i.eventQueue_,K,[])}function BO(i,e,t){i.server_.onDisconnectCancel(e.toString(),(o,a)=>{"ok"===o&&Kv(i.onDisconnect_,e),Xl(0,t,o,a)})}function tf(i,e,t,o){const a=Ki(t);i.server_.onDisconnectPut(e.toString(),a.val(!0),(c,d)=>{"ok"===c&&Rd(i.onDisconnect_,e,a),Xl(0,o,c,d)})}function Xs(i,e,t){let o;o=".info"===wr(e._path)?o_(i.infoSyncTree_,e,t):o_(i.serverSyncTree_,e,t),P0(i.eventQueue_,e._path,o)}function S0(i){i.persistentConnection_&&i.persistentConnection_.interrupt(D0)}function Kp(i,...e){let t="";i.persistentConnection_&&(t=i.persistentConnection_.id+":"),mo(t,...e)}function Xl(i,e,t,o){e&&Dp(()=>{if("ok"===t)e(null);else{const a=(t||"error").toUpperCase();let c=a;o&&(c+=": "+o);const d=new Error(c);d.code=a,e(d)}})}function M0(i,e,t){return oE(i.serverSyncTree_,e,t)||Gn.EMPTY_NODE}function vE(i,e=i.transactionQueueTree_){if(e||y_(i,e),zu(e)){const t=KA(i,e);(0,te.vA)(t.length>0,"Sending zero length transaction queue"),t.every(a=>0===a.status)&&function zA(i,e,t){const o=t.map(S=>S.currentWriteId),a=M0(i,e,o);let c=a;const d=a.hash();for(let S=0;S<t.length;S++){const V=t[S];(0,te.vA)(0===V.status,"tryToSendTransactionQueue_: items in queue should all be run."),V.status=1,V.retryCount++;const K=za(e,V.path);c=c.updateChild(K,V.currentOutputSnapshotRaw)}const g=c.val(!0),E=e;i.server_.put(E.toString(),g,S=>{Kp(i,"transaction put response",{path:E.toString(),status:S});let V=[];if("ok"===S){const K=[];for(let ee=0;ee<t.length;ee++)t[ee].status=2,V=V.concat(Bd(i.serverSyncTree_,t[ee].currentWriteId)),t[ee].onComplete&&K.push(()=>t[ee].onComplete(null,!0,t[ee].currentOutputSnapshotResolved)),t[ee].unwatcher();y_(i,cE(i.transactionQueueTree_,e)),vE(i,i.transactionQueueTree_),vl(i.eventQueue_,e,V);for(let ee=0;ee<K.length;ee++)Dp(K[ee])}else{if("datastale"===S)for(let K=0;K<t.length;K++)t[K].status=3===t[K].status?4:0;else{Ns("transaction at "+E.toString()+" failed: "+S);for(let K=0;K<t.length;K++)t[K].status=4,t[K].abortReason=S}au(i,e)}},d)}(i,l_(e),t)}else T0(e)&&dE(e,t=>{vE(i,t)})}function au(i,e){const t=WA(i,e),o=l_(t);return function $O(i,e,t){if(0===e.length)return;const o=[];let a=[];const d=e.filter(g=>0===g.status).map(g=>g.currentWriteId);for(let g=0;g<e.length;g++){const E=e[g],S=za(t,E.path);let K,V=!1;if((0,te.vA)(null!==S,"rerunTransactionsUnderNode_: relativePath should not be null."),4===E.status)V=!0,K=E.abortReason,a=a.concat(Bd(i.serverSyncTree_,E.currentWriteId,!0));else if(0===E.status)if(E.retryCount>=$A)V=!0,K="maxretry",a=a.concat(Bd(i.serverSyncTree_,E.currentWriteId,!0));else{const ee=M0(i,E.path,d);E.currentInputSnapshot=ee;const de=e[g].update(ee.val());if(void 0!==de){d_("transaction failed: Data returned ",de,E.path);let Re=Ki(de);"object"==typeof de&&null!=de&&(0,te.gR)(de,".priority")||(Re=Re.updatePriority(ee.getPriority()));const qe=E.currentWriteId,kt=su(i),Xt=w0(Re,ee,kt);E.currentOutputSnapshotRaw=Re,E.currentOutputSnapshotResolved=Xt,E.currentWriteId=m_(i),d.splice(d.indexOf(qe),1),a=a.concat(r_(i.serverSyncTree_,E.path,Xt,E.currentWriteId,E.applyLocally)),a=a.concat(Bd(i.serverSyncTree_,qe,!0))}else V=!0,K="nodata",a=a.concat(Bd(i.serverSyncTree_,E.currentWriteId,!0))}vl(i.eventQueue_,t,a),a=[],V&&(e[g].status=2,setTimeout(e[g].unwatcher,Math.floor(0)),e[g].onComplete&&o.push("nodata"===K?()=>e[g].onComplete(null,!1,e[g].currentInputSnapshot):()=>e[g].onComplete(new Error(K),!1,null)))}y_(i,i.transactionQueueTree_);for(let g=0;g<o.length;g++)Dp(o[g]);vE(i,i.transactionQueueTree_)}(i,KA(i,t),o),o}function WA(i,e){let t,o=i.transactionQueueTree_;for(t=wr(e);null!==t&&void 0===zu(o);)o=cE(o,t),t=wr(e=Si(e));return o}function KA(i,e){const t=[];return O0(i,e,t),t.sort((o,a)=>o.order-a.order),t}function O0(i,e,t){const o=zu(e);if(o)for(let a=0;a<o.length;a++)t.push(o[a]);dE(e,a=>{O0(i,a,t)})}function y_(i,e){const t=zu(e);if(t){let o=0;for(let a=0;a<t.length;a++)2!==t[a].status&&(t[o]=t[a],o++);t.length=o,uE(e,t.length>0?t:void 0)}dE(e,o=>{y_(i,o)})}function EE(i,e){const t=l_(WA(i,e)),o=cE(i.transactionQueueTree_,e);return function RO(i,e,t){let o=t?i:i.parent;for(;null!==o;){if(e(o))return!0;o=o.parent}}(o,a=>{R0(i,a)}),R0(i,o),UA(o,a=>{R0(i,a)}),t}function R0(i,e){const t=zu(e);if(t){const o=[];let a=[],c=-1;for(let d=0;d<t.length;d++)3===t[d].status||(1===t[d].status?((0,te.vA)(c===d-1,"All SENT items should be at beginning of queue."),c=d,t[d].status=3,t[d].abortReason="set"):((0,te.vA)(0===t[d].status,"Unexpected transaction status in abort"),t[d].unwatcher(),a=a.concat(Bd(i.serverSyncTree_,t[d].currentWriteId,!0)),t[d].onComplete&&o.push(t[d].onComplete.bind(null,new Error("set"),!1,null))));-1===c?uE(e,void 0):t.length=c+1,vl(i.eventQueue_,l_(e),a);for(let d=0;d<o.length;d++)Dp(o[d])}}const N0=function(i,e){const t=mx(i),o=t.namespace;return"firebase.com"===t.domain&&ql(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||"undefined"===o)&&"localhost"!==t.domain&&ql("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ns("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Vm(t.host,t.secure,o,"ws"===t.scheme||"wss"===t.scheme,e,"",o!==t.subdomain),path:new ai(t.pathString)}},mx=function(i){let e="",t="",o="",a="",c="",d=!0,g="https",E=443;if("string"==typeof i){let S=i.indexOf("//");S>=0&&(g=i.substring(0,S-1),i=i.substring(S+2));let V=i.indexOf("/");-1===V&&(V=i.length);let K=i.indexOf("?");-1===K&&(K=i.length),e=i.substring(0,Math.min(V,K)),V<K&&(a=function qA(i){let e="";const t=i.split("/");for(let o=0;o<t.length;o++)if(t[o].length>0){let a=t[o];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}(i.substring(V,K)));const ee=function HO(i){const e={};"?"===i.charAt(0)&&(i=i.substring(1));for(const t of i.split("&")){if(0===t.length)continue;const o=t.split("=");2===o.length?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):Ns(`Invalid query segment '${t}' in query '${i}'`)}return e}(i.substring(Math.min(i.length,K)));S=e.indexOf(":"),S>=0?(d="https"===g||"wss"===g,E=parseInt(e.substring(S+1),10)):S=e.length;const de=e.slice(0,S);if("localhost"===de.toLowerCase())t="localhost";else if(de.split(".").length<=2)t=de;else{const Re=e.indexOf(".");o=e.substring(0,Re).toLowerCase(),t=e.substring(Re+1),c=o}"ns"in ee&&(c=ee.ns)}return{host:e,port:E,domain:t,subdomain:o,secure:d,scheme:g,pathString:a,namespace:c}},GO="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",_x=function(){let i=0;const e=[];return function(t){const o=t===i;let a;i=t;const c=new Array(8);for(a=7;a>=0;a--)c[a]=GO.charAt(t%64),t=Math.floor(t/64);(0,te.vA)(0===t,"Cannot push at time == 0");let d=c.join("");if(o){for(a=11;a>=0&&63===e[a];a--)e[a]=0;e[a]++}else for(a=0;a<12;a++)e[a]=Math.floor(64*Math.random());for(a=0;a<12;a++)d+=GO.charAt(e[a]);return(0,te.vA)(20===d.length,"nextPushId: Length should be 20."),d}}();class zO{constructor(e,t,o,a){this.eventType=e,this.eventRegistration=t,this.snapshot=o,this.prevName=a}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,te.As)(this.snapshot.exportVal())}}class x0{constructor(e,t,o){this.eventRegistration=e,this.error=t,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class qp{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,te.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class QA{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new te.cY;return BO(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Yl("OnDisconnect.remove",this._path);const e=new te.cY;return tf(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Yl("OnDisconnect.set",this._path),Ql("OnDisconnect.set",e,this._path,!1);const t=new te.cY;return tf(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Yl("OnDisconnect.setWithPriority",this._path),Ql("OnDisconnect.setWithPriority",e,this._path,!1),f_("OnDisconnect.setWithPriority",t,!1);const o=new te.cY;return function jO(i,e,t,o,a){const c=Ki(t,o);i.server_.onDisconnectPut(e.toString(),c.val(!0),(d,g)=>{"ok"===d&&Rd(i.onDisconnect_,e,c),Xl(0,a,d,g)})}(this._repo,this._path,e,t,o.wrapCallback(()=>{})),o.promise}update(e){Yl("OnDisconnect.update",this._path),h_("OnDisconnect.update",e,this._path,!1);const t=new te.cY;return function _E(i,e,t,o){if((0,te.Im)(t))return mo("onDisconnect().update() called with empty data.  Don't do anything."),void Xl(0,o,"ok",void 0);i.server_.onDisconnectMerge(e.toString(),t,(a,c)=>{"ok"===a&&Is(t,(d,g)=>{const E=Ki(g);Rd(i.onDisconnect_,so(e,d),E)}),Xl(0,o,a,c)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class qa{constructor(e,t,o,a){this._repo=e,this._path=t,this._queryParams=o,this._orderByCalled=a}get key(){return Er(this._path)?null:Op(this._path)}get ref(){return new Zl(this._repo,this._path)}get _queryIdentifier(){const e=dA(this._queryParams),t=Bh(e);return"{}"===t?"default":t}get _queryObject(){return dA(this._queryParams)}isEqual(e){if(!((e=(0,te.Ku)(e))instanceof qa))return!1;const t=this._repo===e._repo,o=Lv(this._path,e._path);return t&&o&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Jb(i){let e="";for(let t=i.pieceNum_;t<i.pieces_.length;t++)""!==i.pieces_[t]&&(e+="/"+encodeURIComponent(String(i.pieces_[t])));return e||"/"}(this._path)}}function v_(i,e){if(!0===i._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Jl(i){let e=null,t=null;if(i.hasStart()&&(e=i.getIndexStartValue()),i.hasEnd()&&(t=i.getIndexEndValue()),i.getIndex()===tu){const o="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",a="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(i.hasStart()){if(i.getIndexStartName()!==Ac)throw new Error(o);if("string"!=typeof e)throw new Error(a)}if(i.hasEnd()){if(i.getIndexEndName()!==Zc)throw new Error(o);if("string"!=typeof t)throw new Error(a)}}else if(i.getIndex()===Li){if(null!=e&&!u_(e)||null!=t&&!u_(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,te.vA)(i.getIndex()instanceof jv||i.getIndex()===XI,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function CE(i){if(i.hasStart()&&i.hasEnd()&&i.hasLimit()&&!i.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Zl extends qa{constructor(e,t){super(e,t,new Md,!1)}get parent(){const e=HI(this._path);return null===e?null:new Zl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class nf{constructor(e,t,o){this._node=e,this.ref=t,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ai(e),o=rf(this.ref,e);return new nf(this._node.getChild(t),o,Li)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(o,a)=>e(new nf(a,rf(this.ref,o),Li)))}hasChild(e){const t=new ai(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function YA(i,e){return(i=(0,te.Ku)(i))._checkNotDeleted("ref"),void 0!==e?rf(i._root,e):i._root}function WO(i,e){(i=(0,te.Ku)(i))._checkNotDeleted("refFromURL");const t=N0(e,i._repo.repoInfo_.nodeAdmin);g_("refFromURL",t);const o=t.repoInfo;return!i._repo.repoInfo_.isCustomHost()&&o.host!==i._repo.repoInfo_.host&&ql("refFromURL: Host name does not match the current database: (found "+o.host+" but expected "+i._repo.repoInfo_.host+")"),YA(i,t.path.toString())}function rf(i,e){return null===wr((i=(0,te.Ku)(i))._path)?kO("child","path",e,!1):p_("child","path",e,!1),new Zl(i._repo,so(i._path,e))}function sf(i,e){i=(0,te.Ku)(i),Yl("set",i._path),Ql("set",e,i._path,!1);const t=new te.cY;return $d(i._repo,i._path,e,null,t.wrapCallback(()=>{})),t.promise}function JA(i,e){h_("update",e,i._path,!1);const t=new te.cY;return function VO(i,e,t,o){Kp(i,"update",{path:e.toString(),value:t});let a=!0;const c=su(i),d={};if(Is(t,(g,E)=>{a=!1,d[g]=FA(so(e,g),Ki(E),i.serverSyncTree_,c)}),a)mo("update() called with empty data.  Don't do anything."),Xl(0,o,"ok",void 0);else{const g=m_(i),E=function iu(i,e,t,o){!function uO(i,e,t,o){(0,te.vA)(o>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:e,children:t,writeId:o,visible:!0}),i.visibleWrites=t0(i.visibleWrites,e,t),i.lastWriteId=o}(i.pendingWriteTree_,e,t,o);const a=_i.fromObject(t);return jd(i,new Kh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,a))}(i.serverSyncTree_,e,d,g);Wp(i.eventQueue_,E),i.server_.merge(e.toString(),t,(S,V)=>{const K="ok"===S;K||Ns("update at "+e+" failed: "+S);const ee=Bd(i.serverSyncTree_,g,!K),de=ee.length>0?au(i,e):e;vl(i.eventQueue_,de,ee),Xl(0,o,S,V)}),Is(t,S=>{const V=EE(i,so(e,S));au(i,V)}),vl(i.eventQueue_,e,[])}}(i._repo,i._path,e,t.wrapCallback(()=>{})),t.promise}function XO(i){i=(0,te.Ku)(i);const e=new qp(()=>{}),t=new Qp(e);return function gx(i,e,t){const o=function TO(i,e){const t=e._path;let o=null;i.syncPointTree_.foreachOnPath(t,(S,V)=>{const K=za(S,t);o=o||yl(V,K)});let a=i.syncPointTree_.get(t);a?o=o||yl(a,ei()):(a=new SA,i.syncPointTree_=i.syncPointTree_.set(t,a));const c=null!=o,d=c?new ju(o,!0,!1):null;return function Zh(i){return Xm(i.viewCache_)}(p0(a,e,Zv(i.pendingWriteTree_,e._path),c?d.getNode():Gn.EMPTY_NODE,c))}(i.serverSyncTree_,e);return null!=o?Promise.resolve(o):i.server_.get(e).then(a=>{const c=Ki(a).withIndex(e._queryParams.getIndex());let d;if(v0(i.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())d=i_(i.serverSyncTree_,e._path,c);else{const g=s_(i.serverSyncTree_,e);d=y0(i.serverSyncTree_,e._path,c,g)}return vl(i.eventQueue_,e._path,d),o_(i.serverSyncTree_,e,t,null,!0),c},a=>(Kp(i,"get for query "+(0,te.As)(e)+" failed: "+a),Promise.reject(new Error(a))))}(i._repo,i,t).then(o=>new nf(o,new Zl(i._repo,i._path),i._queryParams.getIndex()))}class Qp{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const o=t._queryParams.getIndex();return new zO("value",this,new nf(e.snapshotNode,new Zl(t._repo,t._path),o))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new x0(this,e,t):null}matches(e){return e instanceof Qp&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class IE{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new x0(this,e,t):null}createEvent(e,t){(0,te.vA)(null!=e.childName,"Child events should have a childName.");const o=rf(new Zl(t._repo,t._path),e.childName),a=t._queryParams.getIndex();return new zO(e.type,this,new nf(e.snapshotNode,o,a),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof IE&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function af(i,e,t,o,a){let c;if("object"==typeof o&&(c=void 0,a=o),"function"==typeof o&&(c=o),a&&a.onlyOnce){const E=t,S=(V,K)=>{Xs(i._repo,i,g),E(V,K)};S.userCallback=t.userCallback,S.context=t.context,t=S}const d=new qp(t,c||void 0),g="value"===e?new Qp(d):new IE(e,d);return function yE(i,e,t){let o;o=".info"===wr(e._path)?v0(i.infoSyncTree_,e,t):v0(i.serverSyncTree_,e,t),P0(i.eventQueue_,e._path,o)}(i._repo,i,g),()=>Xs(i._repo,i,g)}function k0(i,e,t,o){return af(i,"value",e,t,o)}function F0(i,e,t,o){return af(i,"child_added",e,t,o)}function L0(i,e,t,o){return af(i,"child_changed",e,t,o)}function ZA(i,e,t,o){return af(i,"child_moved",e,t,o)}function eP(i,e,t,o){return af(i,"child_removed",e,t,o)}function tP(i,e,t){let o=null;const a=t?new qp(t):null;"value"===e?o=new Qp(a):e&&(o=new IE(e,a)),Xs(i._repo,i,o)}class El{}class nP extends El{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){Ql("endAt",this._value,e._path,!0);const t=Qm(e._queryParams,this._value,this._key);if(CE(t),Jl(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qa(e._repo,e._path,t,e._orderByCalled)}}class JO extends El{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){Ql("endBefore",this._value,e._path,!1);const t=function uA(i,e,t){let o;return o=Qm(i,e,i.index_===tu||t?t:Ac),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(CE(t),Jl(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qa(e._repo,e._path,t,e._orderByCalled)}}class iP extends El{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){Ql("startAt",this._value,e._path,!0);const t=Gv(e._queryParams,this._value,this._key);if(CE(t),Jl(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new qa(e._repo,e._path,t,e._orderByCalled)}}class tR extends El{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){Ql("startAfter",this._value,e._path,!1);const t=function zv(i,e,t){let o;return o=Gv(i,e,i.index_===tu||t?t:Zc),o.startAfterSet_=!0,o}(e._queryParams,this._value,this._key);if(CE(t),Jl(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new qa(e._repo,e._path,t,e._orderByCalled)}}class rR extends El{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new qa(e._repo,e._path,function lA(i,e){const t=i.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class oP extends El{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new qa(e._repo,e._path,function cA(i,e){const t=i.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class oR extends El{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){v_(e,"orderByChild");const t=new ai(this._path);if(Er(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const o=new jv(t),a=zh(e._queryParams,o);return Jl(a),new qa(e._repo,e._path,a,!0)}}class aP extends El{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){v_(e,"orderByKey");const t=zh(e._queryParams,tu);return Jl(t),new qa(e._repo,e._path,t,!0)}}class lR extends El{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){v_(e,"orderByPriority");const t=zh(e._queryParams,Li);return Jl(t),new qa(e._repo,e._path,t,!0)}}class cP extends El{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){v_(e,"orderByValue");const t=zh(e._queryParams,XI);return Jl(t),new qa(e._repo,e._path,t,!0)}}class uP extends El{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(Ql("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new nP(this._value,this._key)._apply(new iP(this._value,this._key)._apply(e))}}function Cl(i,...e){let t=(0,te.Ku)(i);for(const o of e)t=o._apply(t);return t}(function us(i){(0,te.vA)(!t_,"__referenceConstructor has already been defined"),t_=i})(Zl),function dx(i){(0,te.vA)(!n_,"__referenceConstructor has already been defined"),n_=i}(Zl);const wE={};function U0(i,e,t,o,a){let c=o||i.options.databaseURL;void 0===c&&(i.options.projectId||ql("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),mo("Using default host for project ",i.options.projectId),c=`${i.options.projectId}-default-rtdb.firebaseio.com`);let E,S,d=N0(c,a),g=d.repoInfo;typeof process<"u"&&process.env&&(S=process.env.FIREBASE_DATABASE_EMULATOR_HOST),S?(E=!0,c=`http://${S}?ns=${g.namespace}`,d=N0(c,a),g=d.repoInfo):E=!d.repoInfo.secure;const V=a&&E?new km(km.OWNER):new Fb(i.name,i.options,e);g_("Invalid Firebase Database URL",d),Er(d.path)||ql("Database URL must point to the root of a Firebase Database (not including a child path).");const K=function hR(i,e,t,o){let a=wE[e.name];a||(a={},wE[e.name]=a);let c=a[i.toURLString()];return c&&ql("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new ef(i,false,t,o),a[i.toURLString()]=c,c}(g,i,V,new OI(i.name,t));return new fP(K,i)}class fP{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function FO(i,e,t){if(i.stats_=Um(i.repoInfo_),i.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)i.server_=new Ys(i.repoInfo_,(o,a,c,d)=>{LO(i,o,a,c,d)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>gE(i,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,te.As)(t)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}i.persistentConnection_=new Rp(i.repoInfo_,e,(o,a,c,d)=>{LO(i,o,a,c,d)},o=>{gE(i,o)},o=>{!function px(i,e){Is(e,(t,o)=>{mE(i,t,o)})}(i,o)},i.authTokenProvider_,i.appCheckProvider_,t),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(o=>{i.server_.refreshAuthToken(o)}),i.appCheckProvider_.addTokenChangeListener(o=>{i.server_.refreshAppCheckToken(o.token)}),i.statsReporter_=function FI(i,e){const t=i.toString();return Rv[t]||(Rv[t]=e()),Rv[t]}(i.repoInfo_,()=>new ZI(i.stats_,i.server_)),i.infoData_=new rO,i.infoSyncTree_=new iE({startListening:(o,a,c,d)=>{let g=[];const E=i.infoData_.getNode(o._path);return E.isEmpty()||(g=i_(i.infoSyncTree_,o._path,E),setTimeout(()=>{d("ok")},0)),g},stopListening:()=>{}}),mE(i,"connected",!1),i.serverSyncTree_=new iE({startListening:(o,a,c,d)=>(i.server_.listen(o,c,a,(g,E)=>{const S=d(g,E);vl(i.eventQueue_,o._path,S)}),[]),stopListening:(o,a)=>{i.server_.unlisten(o,a)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Zl(this._repo,ei())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function dR(i,e){const t=wE[e];(!t||t[i.key]!==i)&&ql(`Database ${e}(${i.repoInfo_}) has already been deleted.`),S0(i),delete t[i.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ql("Cannot call "+e+" on a deleted database.")}}function TE(){BM.IS_TRANSPORT_INITIALIZED&&Ns("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function pP(){TE(),Bu.forceDisallow()}function gP(){TE(),Bm.forceDisallow(),Bu.forceAllow()}function yP(i,e){SI(i,e)}const EP={".sv":"timestamp"};class wP{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Rp.prototype.simpleListen=function(i,e){this.sendRequest("q",{p:i},e)},Rp.prototype.echo=function(i,e){this.sendRequest("echo",{d:i},e)},function vP(i){PI(Mn.SDK_VERSION),(0,Mn._registerComponent)(new ar.uA("database",(e,{instanceIdentifier:t})=>U0(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Mn.registerVersion)(Sb,"1.0.7",i),(0,Mn.registerVersion)(Sb,"1.0.7","esm2017")}();const _R=new en.Vy("@firebase/database-compat"),bP=function(i){_R.warn("FIREBASE WARNING: "+i)};class ER{constructor(e){this._delegate=e}cancel(e){(0,te.od)("OnDisconnect.cancel",0,1,arguments.length),(0,te.oD)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),o=>e(o)),t}remove(e){(0,te.od)("OnDisconnect.remove",0,1,arguments.length),(0,te.oD)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),o=>e(o)),t}set(e,t){(0,te.od)("OnDisconnect.set",1,2,arguments.length),(0,te.oD)("OnDisconnect.set","onComplete",t,!0);const o=this._delegate.set(e);return t&&o.then(()=>t(null),a=>t(a)),o}setWithPriority(e,t,o){(0,te.od)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,te.oD)("OnDisconnect.setWithPriority","onComplete",o,!0);const a=this._delegate.setWithPriority(e,t);return o&&a.then(()=>o(null),c=>o(c)),a}update(e,t){if((0,te.od)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const a={};for(let c=0;c<e.length;++c)a[""+c]=e[c];e=a,bP("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,te.oD)("OnDisconnect.update","onComplete",t,!0);const o=this._delegate.update(e);return t&&o.then(()=>t(null),a=>t(a)),o}}class CR{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,te.od)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Hd{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,te.od)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,te.od)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,te.od)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,te.od)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,te.od)("DataSnapshot.child",0,1,arguments.length),e=String(e),p_("DataSnapshot.child","path",e,!1),new Hd(this._database,this._delegate.child(e))}hasChild(e){return(0,te.od)("DataSnapshot.hasChild",1,1,arguments.length),p_("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,te.od)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,te.od)("DataSnapshot.forEach",1,1,arguments.length),(0,te.oD)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Hd(this._database,t)))}hasChildren(){return(0,te.od)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,te.od)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,te.od)("DataSnapshot.ref",0,0,arguments.length),new Qa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class xs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,o,a){var c;(0,te.od)("Query.on",2,4,arguments.length),(0,te.oD)("Query.on","callback",t,!1);const d=xs.getCancelAndContextArgs_("Query.on",o,a),g=(S,V)=>{t.call(d.context,new Hd(this.database,S),V)};g.userCallback=t,g.context=d.context;const E=null===(c=d.cancel)||void 0===c?void 0:c.bind(d.context);switch(e){case"value":return k0(this._delegate,g,E),t;case"child_added":return F0(this._delegate,g,E),t;case"child_removed":return eP(this._delegate,g,E),t;case"child_changed":return L0(this._delegate,g,E),t;case"child_moved":return ZA(this._delegate,g,E),t;default:throw new Error((0,te.dI)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,o){if((0,te.od)("Query.off",0,3,arguments.length),function(i,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,te.dI)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,te.oD)("Query.off","callback",t,!0),(0,te.HN)("Query.off","context",o,!0),t){const a=()=>{};a.userCallback=t,a.context=o,tP(this._delegate,e,a)}else tP(this._delegate,e)}get(){return XO(this._delegate).then(e=>new Hd(this.database,e))}once(e,t,o,a){(0,te.od)("Query.once",1,4,arguments.length),(0,te.oD)("Query.once","callback",t,!0);const c=xs.getCancelAndContextArgs_("Query.once",o,a),d=new te.cY,g=(S,V)=>{const K=new Hd(this.database,S);t&&t.call(c.context,K,V),d.resolve(K)};g.userCallback=t,g.context=c.context;const E=S=>{c.cancel&&c.cancel.call(c.context,S),d.reject(S)};switch(e){case"value":k0(this._delegate,g,E,{onlyOnce:!0});break;case"child_added":F0(this._delegate,g,E,{onlyOnce:!0});break;case"child_removed":eP(this._delegate,g,E,{onlyOnce:!0});break;case"child_changed":L0(this._delegate,g,E,{onlyOnce:!0});break;case"child_moved":ZA(this._delegate,g,E,{onlyOnce:!0});break;default:throw new Error((0,te.dI)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return d.promise}limitToFirst(e){return(0,te.od)("Query.limitToFirst",1,1,arguments.length),new xs(this.database,Cl(this._delegate,function iR(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new rR(i)}(e)))}limitToLast(e){return(0,te.od)("Query.limitToLast",1,1,arguments.length),new xs(this.database,Cl(this._delegate,function sP(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new oP(i)}(e)))}orderByChild(e){return(0,te.od)("Query.orderByChild",1,1,arguments.length),new xs(this.database,Cl(this._delegate,function sR(i){if("$key"===i)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===i)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===i)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return p_("orderByChild","path",i,!1),new oR(i)}(e)))}orderByKey(){return(0,te.od)("Query.orderByKey",0,0,arguments.length),new xs(this.database,Cl(this._delegate,function aR(){return new aP}()))}orderByPriority(){return(0,te.od)("Query.orderByPriority",0,0,arguments.length),new xs(this.database,Cl(this._delegate,function lP(){return new lR}()))}orderByValue(){return(0,te.od)("Query.orderByValue",0,0,arguments.length),new xs(this.database,Cl(this._delegate,function V0(){return new cP}()))}startAt(e=null,t){return(0,te.od)("Query.startAt",0,2,arguments.length),new xs(this.database,Cl(this._delegate,function eR(i=null,e){return zp("startAt","key",e,!0),new iP(i,e)}(e,t)))}startAfter(e=null,t){return(0,te.od)("Query.startAfter",0,2,arguments.length),new xs(this.database,Cl(this._delegate,function nR(i,e){return zp("startAfter","key",e,!0),new tR(i,e)}(e,t)))}endAt(e=null,t){return(0,te.od)("Query.endAt",0,2,arguments.length),new xs(this.database,Cl(this._delegate,function rP(i,e){return zp("endAt","key",e,!0),new nP(i,e)}(e,t)))}endBefore(e=null,t){return(0,te.od)("Query.endBefore",0,2,arguments.length),new xs(this.database,Cl(this._delegate,function ZO(i,e){return zp("endBefore","key",e,!0),new JO(i,e)}(e,t)))}equalTo(e,t){return(0,te.od)("Query.equalTo",1,2,arguments.length),new xs(this.database,Cl(this._delegate,function cR(i,e){return zp("equalTo","key",e,!0),new uP(i,e)}(e,t)))}toString(){return(0,te.od)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,te.od)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,te.od)("Query.isEqual",1,1,arguments.length),!(e instanceof xs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,o){const a={cancel:void 0,context:void 0};if(t&&o)a.cancel=t,(0,te.oD)(e,"cancel",a.cancel,!0),a.context=o,(0,te.HN)(e,"context",a.context,!0);else if(t)if("object"==typeof t&&null!==t)a.context=t;else{if("function"!=typeof t)throw new Error((0,te.dI)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");a.cancel=t}return a}get ref(){return new Qa(this.database,new Zl(this._delegate._repo,this._delegate._path))}}class Qa extends xs{constructor(e,t){super(e,new qa(t._repo,t._path,new Md,!1)),this.database=e,this._delegate=t}getKey(){return(0,te.od)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,te.od)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Qa(this.database,rf(this._delegate,e))}getParent(){(0,te.od)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Qa(this.database,e):null}getRoot(){return(0,te.od)("Reference.root",0,0,arguments.length),new Qa(this.database,this._delegate.root)}set(e,t){(0,te.od)("Reference.set",1,2,arguments.length),(0,te.oD)("Reference.set","onComplete",t,!0);const o=sf(this._delegate,e);return t&&o.then(()=>t(null),a=>t(a)),o}update(e,t){if((0,te.od)("Reference.update",1,2,arguments.length),Array.isArray(e)){const a={};for(let c=0;c<e.length;++c)a[""+c]=e[c];e=a,bP("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Yl("Reference.update",this._delegate._path),(0,te.oD)("Reference.update","onComplete",t,!0);const o=JA(this._delegate,e);return t&&o.then(()=>t(null),a=>t(a)),o}setWithPriority(e,t,o){(0,te.od)("Reference.setWithPriority",2,3,arguments.length),(0,te.oD)("Reference.setWithPriority","onComplete",o,!0);const a=function XA(i,e,t){if(Yl("setWithPriority",i._path),Ql("setWithPriority",e,i._path,!1),f_("setWithPriority",t,!1),".length"===i.key||".keys"===i.key)throw"setWithPriority failed: "+i.key+" is a read-only object.";const o=new te.cY;return $d(i._repo,i._path,e,t,o.wrapCallback(()=>{})),o.promise}(this._delegate,e,t);return o&&a.then(()=>o(null),c=>o(c)),a}remove(e){(0,te.od)("Reference.remove",0,1,arguments.length),(0,te.oD)("Reference.remove","onComplete",e,!0);const t=function QO(i){return Yl("remove",i._path),sf(i,null)}(this._delegate);return e&&t.then(()=>e(null),o=>e(o)),t}transaction(e,t,o){(0,te.od)("Reference.transaction",1,3,arguments.length),(0,te.oD)("Reference.transaction","transactionUpdate",e,!1),(0,te.oD)("Reference.transaction","onComplete",t,!0),function(i,e,t,o){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,te.dI)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,o);const a=function gR(i,e,t){var o;if(i=(0,te.Ku)(i),Yl("Reference.transaction",i._path),".length"===i.key||".keys"===i.key)throw"Reference.transaction failed: "+i.key+" is a read-only object.";const a=null===(o=t?.applyLocally)||void 0===o||o,c=new te.cY,g=k0(i,()=>{});return function __(i,e,t,o,a,c){Kp(i,"transaction on "+e);const d={path:e,update:t,onComplete:o,status:null,order:DI(),applyLocally:c,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},g=M0(i,e,void 0);d.currentInputSnapshot=g;const E=d.update(g.val());if(void 0===E)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{d_("transaction failed: Data returned ",E,d.path),d.status=0;const S=cE(i.transactionQueueTree_,e),V=zu(S)||[];let K;V.push(d),uE(S,V),"object"==typeof E&&null!==E&&(0,te.gR)(E,".priority")?(K=(0,te.yw)(E,".priority"),(0,te.vA)(u_(K),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):K=(oE(i.serverSyncTree_,e)||Gn.EMPTY_NODE).getPriority().val();const ee=su(i),de=Ki(E,K),Re=w0(de,g,ee);d.currentOutputSnapshotRaw=de,d.currentOutputSnapshotResolved=Re,d.currentWriteId=m_(i);const $e=r_(i.serverSyncTree_,e,Re,d.currentWriteId,d.applyLocally);vl(i.eventQueue_,e,$e),vE(i,i.transactionQueueTree_)}}(i._repo,i._path,e,(E,S,V)=>{let K=null;E?c.reject(E):(K=new nf(V,new Zl(i._repo,i._path),Li),c.resolve(new wP(S,K)))},g,a),c.promise}(this._delegate,e,{applyLocally:o}).then(c=>new CR(c.committed,new Hd(this.database,c.snapshot)));return t&&a.then(c=>t(null,c.committed,c.snapshot),c=>t(c,!1,null)),a}setPriority(e,t){(0,te.od)("Reference.setPriority",1,2,arguments.length),(0,te.oD)("Reference.setPriority","onComplete",t,!0);const o=function YO(i,e){i=(0,te.Ku)(i),Yl("setPriority",i._path),f_("setPriority",e,!1);const t=new te.cY;return $d(i._repo,so(i._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&o.then(()=>t(null),a=>t(a)),o}push(e,t){(0,te.od)("Reference.push",0,2,arguments.length),(0,te.oD)("Reference.push","onComplete",t,!0);const o=function qO(i,e){i=(0,te.Ku)(i),Yl("push",i._path),Ql("push",e,i._path,!0);const t=HA(i._repo),o=_x(t),a=rf(i,o),c=rf(i,o);let d;return d=null!=e?sf(c,e).then(()=>c):Promise.resolve(c),a.then=d.then.bind(d),a.catch=d.then.bind(d,void 0),a}(this._delegate,e),a=o.then(d=>new Qa(this.database,d));t&&a.then(()=>t(null),d=>t(d));const c=new Qa(this.database,o);return c.then=a.then.bind(a),c.catch=a.catch.bind(a,void 0),c}onDisconnect(){return Yl("Reference.onDisconnect",this._delegate._path),new ER(new QA(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Yp{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:pP,forceLongPolling:gP}}useEmulator(e,t,o={}){!function B0(i,e,t,o={}){(i=(0,te.Ku)(i))._checkNotDeleted("useEmulator"),i._instanceStarted&&ql("Cannot call useEmulator() after instance has already been initialized.");const a=i._repoInternal;let c;if(a.repoInfo_.nodeAdmin)o.mockUserToken&&ql('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new km(km.OWNER);else if(o.mockUserToken){const d="string"==typeof o.mockUserToken?o.mockUserToken:(0,te.Fy)(o.mockUserToken,i.app.options.projectId);c=new km(d)}!function hP(i,e,t,o){i.repoInfo_=new Vm(`${e}:${t}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),o&&(i.authTokenProvider_=o)}(a,e,t,c)}(this._delegate,e,t,o)}ref(e){if((0,te.od)("database.ref",0,1,arguments.length),e instanceof Qa){const t=WO(this._delegate,e.toString());return new Qa(this,t)}{const t=YA(this._delegate,e);return new Qa(this,t)}}refFromURL(e){(0,te.od)("database.refFromURL",1,1,arguments.length);const o=WO(this._delegate,e);return new Qa(this,o)}goOffline(){return(0,te.od)("database.goOffline",0,0,arguments.length),function mP(i){(i=(0,te.Ku)(i))._checkNotDeleted("goOffline"),S0(i._repo)}(this._delegate)}goOnline(){return(0,te.od)("database.goOnline",0,0,arguments.length),function _P(i){(i=(0,te.Ku)(i))._checkNotDeleted("goOnline"),function GA(i){i.persistentConnection_&&i.persistentConnection_.resume(D0)}(i._repo)}(this._delegate)}}Yp.ServerValue={TIMESTAMP:function CP(){return EP}(),increment:i=>function IP(i){return{".sv":{increment:i}}}(i)};var PP=Object.freeze({__proto__:null,initStandalone:function AP({app:i,url:e,version:t,customAuthImpl:o,customAppCheckImpl:a,namespace:c,nodeAdmin:d=!1}){PI(t);const g=new ar.h1("database-standalone"),E=new ar.Kq("auth-internal",g);let S;return E.setComponent(new ar.uA("auth-internal",()=>o,"PRIVATE")),a&&(S=new ar.Kq("app-check-internal",g),S.setComponent(new ar.uA("app-check-internal",()=>a,"PRIVATE"))),{instance:new Yp(U0(i,E,S,e,d),i),namespace:c}}});const DP=Yp.ServerValue;function Xp(i,e,t="on",o=dp){return new yp.c(a=>{let c=null;return c=i[t](e,(d,g)=>{o.schedule(()=>{a.next({snapshot:d,prevKey:g})}),"once"===t&&o.schedule(()=>a.complete())},d=>{o.schedule(()=>a.error(d))}),"on"===t?{unsubscribe(){null!=c&&i.off(e,c)}}:{unsubscribe(){}}}).pipe((0,zi.T)(a=>{const{snapshot:c,prevKey:d}=a;let g=null;return c.exists()&&(g=c.key),{type:e,payload:c,prevKey:d,key:g}}),YC())}function j0(i){return null==i}function $0(i){return"function"==typeof i.set}function RP(i,e){return $0(e)?e:i.ref(e)}function NP(i,e){if(function MP(i){return"string"==typeof i}(i))return e.stringCase();if($0(i))return e.firebaseCase();if(function OP(i){return"function"==typeof i.exportVal}(i))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof i)}function bE(i){return(j0(i)||0===i.length)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function E_(i,e,t){return Zy(...(e=bE(e)).map(a=>Xp(i,a,"on",t)))}function G0(i,e){return function(o,a){return NP(o,{stringCase:()=>i.child(o)[e](a),firebaseCase:()=>o[e](a),snapshotCase:()=>o.ref[e](a)})}}function FP(i){return function(t){return t?NP(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}}function z0(i,e){const t=i.length;for(let o=0;o<t;o++)if(i[o].payload.key===e)return o;return-1}function W0(i,e){const{payload:t,prevKey:o,key:a}=e,c=z0(i,a),d=function VP(i,e){if(j0(e))return 0;{const t=z0(i,e);return-1===t?i.length:t+1}}(i,o);switch(e.type){case"value":if(e.payload?.exists()){let g=null;e.payload.forEach(E=>{const S={payload:E,type:"value",prevKey:g,key:E.key};return g=E.key,i=[...i,S],!1})}return i;case"child_added":if(c>-1)(i[c-1]?.key||null)!==o&&(i=i.filter(E=>E.payload.key!==t.key)).splice(d,0,e);else{if(null==o)return[e,...i];(i=i.slice()).splice(d,0,e)}return i;case"child_removed":return i.filter(g=>g.payload.key!==t.key);case"child_changed":return i.map(g=>g.payload.key===a?e:g);case"child_moved":if(c>-1){const g=i.splice(c,1)[0];return(i=i.slice()).splice(d,0,g),i}return i;default:return i}}function K0(i,e,t){return function LP(i,e,t){return Xp(i,"value","once",t).pipe((0,Kl.n)(o=>{const a=[(0,Qc.of)(o)];return e.forEach(c=>a.push(Xp(i,c,"on",t))),Zy(...a).pipe((0,_d.S)(W0,[]))}),ov())}(i,e=bE(e),t)}function UP(i,e){return function(){return Xp(i,"value","on",e)}}!function SP(i){i.INTERNAL.registerComponent(new ar.uA("database-compat",(e,{instanceIdentifier:t})=>{const o=e.getProvider("app-compat").getImmediate(),a=e.getProvider("database").getImmediate({identifier:t});return new Yp(a,o)},"PUBLIC").setServiceProps({Reference:Qa,Query:xs,Database:Yp,DataSnapshot:Hd,enableLogging:yP,INTERNAL:PP,ServerValue:DP}).setMultipleInstances(!0)),i.registerVersion("@firebase/database-compat","1.0.7")}(qc.A);const Y0=new m.nKC("angularfire2.realtimeDatabaseURL"),BP=new m.nKC("angularfire2.database.use-emulator");let X0=(()=>{class i{schedulers;database;constructor(t,o,a,c,d,g,E,S,V,K,ee,de,Re,$e,qe){this.schedulers=g;const kt=E,Xt=mp(t,d,o);S&&rv(Xt,d,V,ee,de,Re,K,$e),this.database=KC(`${Xt.name}.database.${a}`,"AngularFireDatabase",Xt.name,()=>{const St=d.runOutsideAngular(()=>Xt.database(a||void 0));return kt&&St.useEmulator(...kt),St},[kt])}list(t,o){const a=this.schedulers.ngZone.runOutsideAngular(()=>RP(this.database,t));let c=a;return o&&(c=o(a)),function q0(i,e){const t=e.schedulers.outsideAngular,o=e.schedulers.ngZone.run(()=>i.ref);return{query:i,update:G0(o,"update"),set:G0(o,"set"),push:a=>o.push(a),remove:FP(o),snapshotChanges:a=>K0(i,a,t).pipe(So),stateChanges:a=>E_(i,a,t).pipe(So),auditTrail:a=>function H0(i,e,t){return function kP(i,e,t){return function xP(i,e){return Xp(i,"value","on",e).pipe((0,zi.T)(t=>{let o;return t.payload.forEach(a=>(o=a.key,!1)),{data:t,lastKeyToLoad:o}}))}(i,t).pipe(function Db(...i){const e=(0,Jy.ms)(i);return(0,Vu.N)((t,o)=>{const a=i.length,c=new Array(a);let d=i.map(()=>!1),g=!1;for(let E=0;E<a;E++)(0,Xy.Tg)(i[E]).subscribe((0,Ep._)(o,S=>{c[E]=S,!g&&!d[E]&&(d[E]=!0,(g=d.every(Dh.D))&&(d=null))},Pb.l));t.subscribe((0,Ep._)(o,E=>{if(g){const S=[E,...c];o.next(e?e(...S):S)}}))})}(e),(0,zi.T)(([a,c])=>{const d=a.lastKeyToLoad,g=c.map(E=>E.key);return{actions:c,lastKeyToLoad:d,loadedKeys:g}}),function AI(i){return(0,Vu.N)((e,t)=>{let o=!1,a=0;e.subscribe((0,Ep._)(t,c=>(o||(o=!i(c,a++)))&&t.next(c)))})}(a=>-1===a.loadedKeys.indexOf(a.lastKeyToLoad)),(0,zi.T)(a=>a.actions))}(i,E_(i,e).pipe((0,_d.S)((a,c)=>[...a,c],[])),t)}(i,a,t).pipe(So),valueChanges:(a,c)=>K0(i,a,t).pipe((0,zi.T)(g=>g.map(E=>c&&c.idField?{...E.payload.val(),[c.idField]:E.key}:E.payload.val())),So)}}(c,this)}object(t){return function Q0(i,e){return{query:i,snapshotChanges:()=>UP(i,e.schedulers.outsideAngular)().pipe(So),update:t=>i.ref.update(t),set:t=>i.ref.set(t),remove:()=>i.ref.remove(),valueChanges:()=>UP(i,e.schedulers.outsideAngular)().pipe(So,(0,zi.T)(o=>o.payload.exists()?o.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>RP(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(o){return new(o||i)(m.KVO(gm),m.KVO(gp,8),m.KVO(Y0,8),m.KVO(m.Agw),m.KVO(m.SKi),m.KVO(MT),m.KVO(BP,8),m.KVO(Em,8),m.KVO(JC,8),m.KVO(ZC,8),m.KVO(eI,8),m.KVO(tv,8),m.KVO(nv,8),m.KVO(sr,8),m.KVO($a,8))};static \u0275prov=m.jDH({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})(),IR=(()=>{class i{constructor(){qc.A.registerVersion("angularfire",HC.full,"rtdb-compat")}static \u0275fac=function(o){return new(o||i)};static \u0275mod=m.$C({type:i});static \u0275inj=m.G2t({providers:[X0]})}return i})(),J0=(()=>{class i{constructor(t,o,a,c,d){this.doc=t,this.delegate=o,this.zone=a,this.animationType=c,this.moduleImpl=d,this._rendererFactoryPromise=null,this.scheduler=(0,m.WQX)(m.An2,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??Promise.resolve().then(J.bind(J,8008)).then(o=>o)).catch(o=>{throw new m.wOt(5300,!1)}).then(({\u0275createEngine:o,\u0275AnimationRendererFactory:a})=>{this._engine=o(this.animationType,this.doc);const c=new a(this.delegate,this._engine,this.zone);return this.delegate=c,c})}createRenderer(t,o){const a=this.delegate.createRenderer(t,o);if(0===a.\u0275type)return a;"boolean"==typeof a.throwOnSyntheticProps&&(a.throwOnSyntheticProps=!1);const c=new TR(a);return o?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(d=>{const g=d.createRenderer(t,o);c.use(g),this.scheduler?.notify(9)}).catch(d=>{c.use(a)}),c}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static#e=this.\u0275fac=function(o){m.QTQ()};static#t=this.\u0275prov=m.jDH({token:i,factory:i.\u0275fac})}return i})();class TR{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,null!==this.replay){for(const t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,o,a){this.delegate.insertBefore(e,t,o,a)}removeChild(e,t,o){this.delegate.removeChild(e,t,o)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,o,a){this.delegate.setAttribute(e,t,o,a)}removeAttribute(e,t,o){this.delegate.removeAttribute(e,t,o)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,o,a){this.delegate.setStyle(e,t,o,a)}removeStyle(e,t,o){this.delegate.removeStyle(e,t,o)}setProperty(e,t,o){this.shouldReplay(t)&&this.replay.push(a=>a.setProperty(e,t,o)),this.delegate.setProperty(e,t,o)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,o){return this.shouldReplay(t)&&this.replay.push(a=>a.listen(e,t,o)),this.delegate.listen(e,t,o)}shouldReplay(e){return null!==this.replay&&e.startsWith("@")}}function jP(i="animations"){return(0,m.ngT)("NgAsyncAnimations"),(0,m.EmA)([{provide:m._9s,useFactory:(e,t,o)=>new J0(e,t,o,i),deps:[De.qQ,T.B7,m.SKi]},{provide:m.bc$,useValue:"noop"===i?"NoopAnimations":"BrowserAnimations"}])}let bR=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=m.$C({type:i,bootstrap:[Cb]});static#n=this.\u0275inj=m.G2t({providers:[jP()],imports:[T.Bb,wI,bI,Ct.YN,WC.initializeApp(Oh_firebaseConfig),dM,IR]})}return i})();T.sG().bootstrapModule(bR).catch(i=>console.error(i))},4412:(fn,ot,J)=>{J.d(ot,{t:()=>B});var T=J(1413);class B extends T.B{constructor(ce){super(),this._value=ce}get value(){return this.getValue()}_subscribe(ce){const De=super._subscribe(ce);return!De.closed&&ce.next(this._value),De}getValue(){const{hasError:ce,thrownError:De,_value:Fe}=this;if(ce)throw De;return this._throwIfClosed(),Fe}next(ce){super.next(this._value=ce)}}},1985:(fn,ot,J)=>{J.d(ot,{c:()=>Et});var T=J(7707),B=J(8359),m=J(3494),ce=J(1203),De=J(1026),Fe=J(8071),je=J(9786);let Et=(()=>{class Xe{constructor(bt){bt&&(this._subscribe=bt)}lift(bt){const zt=new Xe;return zt.source=this,zt.operator=bt,zt}subscribe(bt,zt,nn){const Zt=function Ee(Xe){return Xe&&Xe instanceof T.vU||function Ie(Xe){return Xe&&(0,Fe.T)(Xe.next)&&(0,Fe.T)(Xe.error)&&(0,Fe.T)(Xe.complete)}(Xe)&&(0,B.Uv)(Xe)}(bt)?bt:new T.Ms(bt,zt,nn);return(0,je.Y)(()=>{const{operator:sn,source:tr}=this;Zt.add(sn?sn.call(Zt,tr):tr?this._subscribe(Zt):this._trySubscribe(Zt))}),Zt}_trySubscribe(bt){try{return this._subscribe(bt)}catch(zt){bt.error(zt)}}forEach(bt,zt){return new(zt=ht(zt))((nn,Zt)=>{const sn=new T.Ms({next:tr=>{try{bt(tr)}catch(pr){Zt(pr),sn.unsubscribe()}},error:Zt,complete:nn});this.subscribe(sn)})}_subscribe(bt){var zt;return null===(zt=this.source)||void 0===zt?void 0:zt.subscribe(bt)}[m.s](){return this}pipe(...bt){return(0,ce.m)(bt)(this)}toPromise(bt){return new(bt=ht(bt))((zt,nn)=>{let Zt;this.subscribe(sn=>Zt=sn,sn=>nn(sn),()=>zt(Zt))})}}return Xe.create=Ot=>new Xe(Ot),Xe})();function ht(Xe){var Ot;return null!==(Ot=Xe??De.$.Promise)&&void 0!==Ot?Ot:Promise}},1413:(fn,ot,J)=>{J.d(ot,{B:()=>je});var T=J(1985),B=J(8359);const ce=(0,J(1853).L)(ht=>function(){ht(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var De=J(7908),Fe=J(9786);let je=(()=>{class ht extends T.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ee){const Xe=new Et(this,this);return Xe.operator=Ee,Xe}_throwIfClosed(){if(this.closed)throw new ce}next(Ee){(0,Fe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Xe of this.currentObservers)Xe.next(Ee)}})}error(Ee){(0,Fe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ee;const{observers:Xe}=this;for(;Xe.length;)Xe.shift().error(Ee)}})}complete(){(0,Fe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ee}=this;for(;Ee.length;)Ee.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Ee;return(null===(Ee=this.observers)||void 0===Ee?void 0:Ee.length)>0}_trySubscribe(Ee){return this._throwIfClosed(),super._trySubscribe(Ee)}_subscribe(Ee){return this._throwIfClosed(),this._checkFinalizedStatuses(Ee),this._innerSubscribe(Ee)}_innerSubscribe(Ee){const{hasError:Xe,isStopped:Ot,observers:bt}=this;return Xe||Ot?B.Kn:(this.currentObservers=null,bt.push(Ee),new B.yU(()=>{this.currentObservers=null,(0,De.o)(bt,Ee)}))}_checkFinalizedStatuses(Ee){const{hasError:Xe,thrownError:Ot,isStopped:bt}=this;Xe?Ee.error(Ot):bt&&Ee.complete()}asObservable(){const Ee=new T.c;return Ee.source=this,Ee}}return ht.create=(Ie,Ee)=>new Et(Ie,Ee),ht})();class Et extends je{constructor(Ie,Ee){super(),this.destination=Ie,this.source=Ee}next(Ie){var Ee,Xe;null===(Xe=null===(Ee=this.destination)||void 0===Ee?void 0:Ee.next)||void 0===Xe||Xe.call(Ee,Ie)}error(Ie){var Ee,Xe;null===(Xe=null===(Ee=this.destination)||void 0===Ee?void 0:Ee.error)||void 0===Xe||Xe.call(Ee,Ie)}complete(){var Ie,Ee;null===(Ee=null===(Ie=this.destination)||void 0===Ie?void 0:Ie.complete)||void 0===Ee||Ee.call(Ie)}_subscribe(Ie){var Ee,Xe;return null!==(Xe=null===(Ee=this.source)||void 0===Ee?void 0:Ee.subscribe(Ie))&&void 0!==Xe?Xe:B.Kn}}},7707:(fn,ot,J)=>{J.d(ot,{Ms:()=>nn,vU:()=>Xe});var T=J(8071),B=J(8359),m=J(1026),ce=J(5334),De=J(5343);const Fe=ht("C",void 0,void 0);function ht(Ct,It,_t){return{kind:Ct,value:It,error:_t}}var Ie=J(9270),Ee=J(9786);class Xe extends B.yU{constructor(It){super(),this.isStopped=!1,It?(this.destination=It,(0,B.Uv)(It)&&It.add(this)):this.destination=pr}static create(It,_t,Yt){return new nn(It,_t,Yt)}next(It){this.isStopped?tr(function Et(Ct){return ht("N",Ct,void 0)}(It),this):this._next(It)}error(It){this.isStopped?tr(function je(Ct){return ht("E",void 0,Ct)}(It),this):(this.isStopped=!0,this._error(It))}complete(){this.isStopped?tr(Fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(It){this.destination.next(It)}_error(It){try{this.destination.error(It)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ot=Function.prototype.bind;function bt(Ct,It){return Ot.call(Ct,It)}class zt{constructor(It){this.partialObserver=It}next(It){const{partialObserver:_t}=this;if(_t.next)try{_t.next(It)}catch(Yt){Zt(Yt)}}error(It){const{partialObserver:_t}=this;if(_t.error)try{_t.error(It)}catch(Yt){Zt(Yt)}else Zt(It)}complete(){const{partialObserver:It}=this;if(It.complete)try{It.complete()}catch(_t){Zt(_t)}}}class nn extends Xe{constructor(It,_t,Yt){let At;if(super(),(0,T.T)(It)||!It)At={next:It??void 0,error:_t??void 0,complete:Yt??void 0};else{let Gt;this&&m.$.useDeprecatedNextContext?(Gt=Object.create(It),Gt.unsubscribe=()=>this.unsubscribe(),At={next:It.next&&bt(It.next,Gt),error:It.error&&bt(It.error,Gt),complete:It.complete&&bt(It.complete,Gt)}):At=It}this.destination=new zt(At)}}function Zt(Ct){m.$.useDeprecatedSynchronousErrorHandling?(0,Ee.l)(Ct):(0,ce.m)(Ct)}function tr(Ct,It){const{onStoppedNotification:_t}=m.$;_t&&Ie.f.setTimeout(()=>_t(Ct,It))}const pr={closed:!0,next:De.l,error:function sn(Ct){throw Ct},complete:De.l}},8359:(fn,ot,J)=>{J.d(ot,{Kn:()=>Fe,yU:()=>De,Uv:()=>je});var T=J(8071);const m=(0,J(1853).L)(ht=>function(Ee){ht(this),this.message=Ee?`${Ee.length} errors occurred during unsubscription:\n${Ee.map((Xe,Ot)=>`${Ot+1}) ${Xe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ee});var ce=J(7908);class De{constructor(Ie){this.initialTeardown=Ie,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ie;if(!this.closed){this.closed=!0;const{_parentage:Ee}=this;if(Ee)if(this._parentage=null,Array.isArray(Ee))for(const bt of Ee)bt.remove(this);else Ee.remove(this);const{initialTeardown:Xe}=this;if((0,T.T)(Xe))try{Xe()}catch(bt){Ie=bt instanceof m?bt.errors:[bt]}const{_finalizers:Ot}=this;if(Ot){this._finalizers=null;for(const bt of Ot)try{Et(bt)}catch(zt){Ie=Ie??[],zt instanceof m?Ie=[...Ie,...zt.errors]:Ie.push(zt)}}if(Ie)throw new m(Ie)}}add(Ie){var Ee;if(Ie&&Ie!==this)if(this.closed)Et(Ie);else{if(Ie instanceof De){if(Ie.closed||Ie._hasParent(this))return;Ie._addParent(this)}(this._finalizers=null!==(Ee=this._finalizers)&&void 0!==Ee?Ee:[]).push(Ie)}}_hasParent(Ie){const{_parentage:Ee}=this;return Ee===Ie||Array.isArray(Ee)&&Ee.includes(Ie)}_addParent(Ie){const{_parentage:Ee}=this;this._parentage=Array.isArray(Ee)?(Ee.push(Ie),Ee):Ee?[Ee,Ie]:Ie}_removeParent(Ie){const{_parentage:Ee}=this;Ee===Ie?this._parentage=null:Array.isArray(Ee)&&(0,ce.o)(Ee,Ie)}remove(Ie){const{_finalizers:Ee}=this;Ee&&(0,ce.o)(Ee,Ie),Ie instanceof De&&Ie._removeParent(this)}}De.EMPTY=(()=>{const ht=new De;return ht.closed=!0,ht})();const Fe=De.EMPTY;function je(ht){return ht instanceof De||ht&&"closed"in ht&&(0,T.T)(ht.remove)&&(0,T.T)(ht.add)&&(0,T.T)(ht.unsubscribe)}function Et(ht){(0,T.T)(ht)?ht():ht.unsubscribe()}},1026:(fn,ot,J)=>{J.d(ot,{$:()=>T});const T={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8793:(fn,ot,J)=>{J.d(ot,{x:()=>De});var T=J(6365),m=J(3794),ce=J(8455);function De(...Fe){return function B(){return(0,T.U)(1)}()((0,ce.H)(Fe,(0,m.lI)(Fe)))}},983:(fn,ot,J)=>{J.d(ot,{w:()=>B});const B=new(J(1985).c)(De=>De.complete())},8455:(fn,ot,J)=>{J.d(ot,{H:()=>It});var T=J(8750),B=J(941),m=J(6745),Fe=J(1985),Et=J(4761),ht=J(8071),Ie=J(5225);function Xe(_t,Yt){if(!_t)throw new Error("Iterable cannot be null");return new Fe.c(At=>{(0,Ie.N)(At,Yt,()=>{const Gt=_t[Symbol.asyncIterator]();(0,Ie.N)(At,Yt,()=>{Gt.next().then(it=>{it.done?At.complete():At.next(it.value)})},0,!0)})})}var Ot=J(5055),bt=J(9858),zt=J(7441),nn=J(5397),Zt=J(7953),sn=J(591),tr=J(5196);function It(_t,Yt){return Yt?function Ct(_t,Yt){if(null!=_t){if((0,Ot.l)(_t))return function ce(_t,Yt){return(0,T.Tg)(_t).pipe((0,m._)(Yt),(0,B.Q)(Yt))}(_t,Yt);if((0,zt.X)(_t))return function je(_t,Yt){return new Fe.c(At=>{let Gt=0;return Yt.schedule(function(){Gt===_t.length?At.complete():(At.next(_t[Gt++]),At.closed||this.schedule())})})}(_t,Yt);if((0,bt.y)(_t))return function De(_t,Yt){return(0,T.Tg)(_t).pipe((0,m._)(Yt),(0,B.Q)(Yt))}(_t,Yt);if((0,Zt.T)(_t))return Xe(_t,Yt);if((0,nn.x)(_t))return function Ee(_t,Yt){return new Fe.c(At=>{let Gt;return(0,Ie.N)(At,Yt,()=>{Gt=_t[Et.l](),(0,Ie.N)(At,Yt,()=>{let it,_e;try{({value:it,done:_e}=Gt.next())}catch(Ut){return void At.error(Ut)}_e?At.complete():At.next(it)},0,!0)}),()=>(0,ht.T)(Gt?.return)&&Gt.return()})}(_t,Yt);if((0,tr.U)(_t))return function pr(_t,Yt){return Xe((0,tr.C)(_t),Yt)}(_t,Yt)}throw(0,sn.L)(_t)}(_t,Yt):(0,T.Tg)(_t)}},8750:(fn,ot,J)=>{J.d(ot,{Tg:()=>Ot});var T=J(1635),B=J(7441),m=J(9858),ce=J(1985),De=J(5055),Fe=J(7953),je=J(591),Et=J(5397),ht=J(5196),Ie=J(8071),Ee=J(5334),Xe=J(3494);function Ot(Ct){if(Ct instanceof ce.c)return Ct;if(null!=Ct){if((0,De.l)(Ct))return function bt(Ct){return new ce.c(It=>{const _t=Ct[Xe.s]();if((0,Ie.T)(_t.subscribe))return _t.subscribe(It);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ct);if((0,B.X)(Ct))return function zt(Ct){return new ce.c(It=>{for(let _t=0;_t<Ct.length&&!It.closed;_t++)It.next(Ct[_t]);It.complete()})}(Ct);if((0,m.y)(Ct))return function nn(Ct){return new ce.c(It=>{Ct.then(_t=>{It.closed||(It.next(_t),It.complete())},_t=>It.error(_t)).then(null,Ee.m)})}(Ct);if((0,Fe.T)(Ct))return sn(Ct);if((0,Et.x)(Ct))return function Zt(Ct){return new ce.c(It=>{for(const _t of Ct)if(It.next(_t),It.closed)return;It.complete()})}(Ct);if((0,ht.U)(Ct))return function tr(Ct){return sn((0,ht.C)(Ct))}(Ct)}throw(0,je.L)(Ct)}function sn(Ct){return new ce.c(It=>{(function pr(Ct,It){var _t,Yt,At,Gt;return(0,T.sH)(this,void 0,void 0,function*(){try{for(_t=(0,T.xN)(Ct);!(Yt=yield _t.next()).done;)if(It.next(Yt.value),It.closed)return}catch(it){At={error:it}}finally{try{Yt&&!Yt.done&&(Gt=_t.return)&&(yield Gt.call(_t))}finally{if(At)throw At.error}}It.complete()})})(Ct,It).catch(_t=>It.error(_t))})}},7673:(fn,ot,J)=>{J.d(ot,{of:()=>m});var T=J(3794),B=J(8455);function m(...ce){const De=(0,T.lI)(ce);return(0,B.H)(ce,De)}},8810:(fn,ot,J)=>{J.d(ot,{$:()=>m});var T=J(1985),B=J(8071);function m(ce,De){const Fe=(0,B.T)(ce)?ce:()=>ce,je=Et=>Et.error(Fe());return new T.c(De?Et=>De.schedule(je,0,Et):je)}},4360:(fn,ot,J)=>{J.d(ot,{_:()=>B});var T=J(7707);function B(ce,De,Fe,je,Et){return new m(ce,De,Fe,je,Et)}class m extends T.vU{constructor(De,Fe,je,Et,ht,Ie){super(De),this.onFinalize=ht,this.shouldUnsubscribe=Ie,this._next=Fe?function(Ee){try{Fe(Ee)}catch(Xe){De.error(Xe)}}:super._next,this._error=Et?function(Ee){try{Et(Ee)}catch(Xe){De.error(Xe)}finally{this.unsubscribe()}}:super._error,this._complete=je?function(){try{je()}catch(Ee){De.error(Ee)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var De;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Fe}=this;super.unsubscribe(),!Fe&&(null===(De=this.onFinalize)||void 0===De||De.call(this))}}}},9437:(fn,ot,J)=>{J.d(ot,{W:()=>ce});var T=J(8750),B=J(4360),m=J(9974);function ce(De){return(0,m.N)((Fe,je)=>{let Ie,Et=null,ht=!1;Et=Fe.subscribe((0,B._)(je,void 0,void 0,Ee=>{Ie=(0,T.Tg)(De(Ee,ce(De)(Fe))),Et?(Et.unsubscribe(),Et=null,Ie.subscribe(je)):ht=!0})),ht&&(Et.unsubscribe(),Et=null,Ie.subscribe(je))})}},274:(fn,ot,J)=>{J.d(ot,{H:()=>m});var T=J(1397),B=J(8071);function m(ce,De){return(0,B.T)(De)?(0,T.Z)(ce,De,1):(0,T.Z)(ce,1)}},9901:(fn,ot,J)=>{J.d(ot,{U:()=>m});var T=J(9974),B=J(4360);function m(ce){return(0,T.N)((De,Fe)=>{let je=!1;De.subscribe((0,B._)(Fe,Et=>{je=!0,Fe.next(Et)},()=>{je||Fe.next(ce),Fe.complete()}))})}},5964:(fn,ot,J)=>{J.d(ot,{p:()=>m});var T=J(9974),B=J(4360);function m(ce,De){return(0,T.N)((Fe,je)=>{let Et=0;Fe.subscribe((0,B._)(je,ht=>ce.call(De,ht,Et++)&&je.next(ht)))})}},980:(fn,ot,J)=>{J.d(ot,{j:()=>B});var T=J(9974);function B(m){return(0,T.N)((ce,De)=>{try{ce.subscribe(De)}finally{De.add(m)}})}},1594:(fn,ot,J)=>{J.d(ot,{$:()=>je});var T=J(9350),B=J(5964),m=J(6697),ce=J(9901),De=J(3774),Fe=J(3669);function je(Et,ht){const Ie=arguments.length>=2;return Ee=>Ee.pipe(Et?(0,B.p)((Xe,Ot)=>Et(Xe,Ot,Ee)):Fe.D,(0,m.s)(1),Ie?(0,ce.U)(ht):(0,De.v)(()=>new T.G))}},6354:(fn,ot,J)=>{J.d(ot,{T:()=>m});var T=J(9974),B=J(4360);function m(ce,De){return(0,T.N)((Fe,je)=>{let Et=0;Fe.subscribe((0,B._)(je,ht=>{je.next(ce.call(De,ht,Et++))}))})}},6365:(fn,ot,J)=>{J.d(ot,{U:()=>m});var T=J(1397),B=J(3669);function m(ce=1/0){return(0,T.Z)(B.D,ce)}},1397:(fn,ot,J)=>{J.d(ot,{Z:()=>Et});var T=J(6354),B=J(8750),m=J(9974),ce=J(5225),De=J(4360),je=J(8071);function Et(ht,Ie,Ee=1/0){return(0,je.T)(Ie)?Et((Xe,Ot)=>(0,T.T)((bt,zt)=>Ie(Xe,bt,Ot,zt))((0,B.Tg)(ht(Xe,Ot))),Ee):("number"==typeof Ie&&(Ee=Ie),(0,m.N)((Xe,Ot)=>function Fe(ht,Ie,Ee,Xe,Ot,bt,zt,nn){const Zt=[];let sn=0,tr=0,pr=!1;const Ct=()=>{pr&&!Zt.length&&!sn&&Ie.complete()},It=Yt=>sn<Xe?_t(Yt):Zt.push(Yt),_t=Yt=>{bt&&Ie.next(Yt),sn++;let At=!1;(0,B.Tg)(Ee(Yt,tr++)).subscribe((0,De._)(Ie,Gt=>{Ot?.(Gt),bt?It(Gt):Ie.next(Gt)},()=>{At=!0},void 0,()=>{if(At)try{for(sn--;Zt.length&&sn<Xe;){const Gt=Zt.shift();zt?(0,ce.N)(Ie,zt,()=>_t(Gt)):_t(Gt)}Ct()}catch(Gt){Ie.error(Gt)}}))};return ht.subscribe((0,De._)(Ie,It,()=>{pr=!0,Ct()})),()=>{nn?.()}}(Xe,Ot,ht,Ee)))}},941:(fn,ot,J)=>{J.d(ot,{Q:()=>ce});var T=J(5225),B=J(9974),m=J(4360);function ce(De,Fe=0){return(0,B.N)((je,Et)=>{je.subscribe((0,m._)(Et,ht=>(0,T.N)(Et,De,()=>Et.next(ht),Fe),()=>(0,T.N)(Et,De,()=>Et.complete(),Fe),ht=>(0,T.N)(Et,De,()=>Et.error(ht),Fe)))})}},2816:(fn,ot,J)=>{J.d(ot,{S:()=>ce});var T=J(9974),B=J(4360);function ce(De,Fe){return(0,T.N)(function m(De,Fe,je,Et,ht){return(Ie,Ee)=>{let Xe=je,Ot=Fe,bt=0;Ie.subscribe((0,B._)(Ee,zt=>{const nn=bt++;Ot=Xe?De(Ot,zt,nn):(Xe=!0,zt),Et&&Ee.next(Ot)},ht&&(()=>{Xe&&Ee.next(Ot),Ee.complete()})))}}(De,Fe,arguments.length>=2,!0))}},9172:(fn,ot,J)=>{J.d(ot,{Z:()=>ce});var T=J(8793),B=J(3794),m=J(9974);function ce(...De){const Fe=(0,B.lI)(De);return(0,m.N)((je,Et)=>{(Fe?(0,T.x)(De,je,Fe):(0,T.x)(De,je)).subscribe(Et)})}},6745:(fn,ot,J)=>{J.d(ot,{_:()=>B});var T=J(9974);function B(m,ce=0){return(0,T.N)((De,Fe)=>{Fe.add(m.schedule(()=>De.subscribe(Fe),ce))})}},5558:(fn,ot,J)=>{J.d(ot,{n:()=>ce});var T=J(8750),B=J(9974),m=J(4360);function ce(De,Fe){return(0,B.N)((je,Et)=>{let ht=null,Ie=0,Ee=!1;const Xe=()=>Ee&&!ht&&Et.complete();je.subscribe((0,m._)(Et,Ot=>{ht?.unsubscribe();let bt=0;const zt=Ie++;(0,T.Tg)(De(Ot,zt)).subscribe(ht=(0,m._)(Et,nn=>Et.next(Fe?Fe(Ot,nn,zt,bt++):nn),()=>{ht=null,Xe()}))},()=>{Ee=!0,Xe()}))})}},6697:(fn,ot,J)=>{J.d(ot,{s:()=>ce});var T=J(983),B=J(9974),m=J(4360);function ce(De){return De<=0?()=>T.w:(0,B.N)((Fe,je)=>{let Et=0;Fe.subscribe((0,m._)(je,ht=>{++Et<=De&&(je.next(ht),De<=Et&&je.complete())}))})}},8141:(fn,ot,J)=>{J.d(ot,{M:()=>De});var T=J(8071),B=J(9974),m=J(4360),ce=J(3669);function De(Fe,je,Et){const ht=(0,T.T)(Fe)||je||Et?{next:Fe,error:je,complete:Et}:Fe;return ht?(0,B.N)((Ie,Ee)=>{var Xe;null===(Xe=ht.subscribe)||void 0===Xe||Xe.call(ht);let Ot=!0;Ie.subscribe((0,m._)(Ee,bt=>{var zt;null===(zt=ht.next)||void 0===zt||zt.call(ht,bt),Ee.next(bt)},()=>{var bt;Ot=!1,null===(bt=ht.complete)||void 0===bt||bt.call(ht),Ee.complete()},bt=>{var zt;Ot=!1,null===(zt=ht.error)||void 0===zt||zt.call(ht,bt),Ee.error(bt)},()=>{var bt,zt;Ot&&(null===(bt=ht.unsubscribe)||void 0===bt||bt.call(ht)),null===(zt=ht.finalize)||void 0===zt||zt.call(ht)}))}):ce.D}},3774:(fn,ot,J)=>{J.d(ot,{v:()=>ce});var T=J(9350),B=J(9974),m=J(4360);function ce(Fe=De){return(0,B.N)((je,Et)=>{let ht=!1;je.subscribe((0,m._)(Et,Ie=>{ht=!0,Et.next(Ie)},()=>ht?Et.complete():Et.error(Fe())))})}function De(){return new T.G}},9270:(fn,ot,J)=>{J.d(ot,{f:()=>T});const T={setTimeout(B,m,...ce){const{delegate:De}=T;return De?.setTimeout?De.setTimeout(B,m,...ce):setTimeout(B,m,...ce)},clearTimeout(B){const{delegate:m}=T;return(m?.clearTimeout||clearTimeout)(B)},delegate:void 0}},4761:(fn,ot,J)=>{J.d(ot,{l:()=>B});const B=function T(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(fn,ot,J)=>{J.d(ot,{s:()=>T});const T="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(fn,ot,J)=>{J.d(ot,{G:()=>B});const B=(0,J(1853).L)(m=>function(){m(this),this.name="EmptyError",this.message="no elements in sequence"})},3794:(fn,ot,J)=>{J.d(ot,{R0:()=>Fe,ms:()=>ce,lI:()=>De});var T=J(8071);function m(je){return je[je.length-1]}function ce(je){return(0,T.T)(m(je))?je.pop():void 0}function De(je){return function B(je){return je&&(0,T.T)(je.schedule)}(m(je))?je.pop():void 0}function Fe(je,Et){return"number"==typeof m(je)?je.pop():Et}},3073:(fn,ot,J)=>{J.d(ot,{D:()=>De});const{isArray:T}=Array,{getPrototypeOf:B,prototype:m,keys:ce}=Object;function De(je){if(1===je.length){const Et=je[0];if(T(Et))return{args:Et,keys:null};if(function Fe(je){return je&&"object"==typeof je&&B(je)===m}(Et)){const ht=ce(Et);return{args:ht.map(Ie=>Et[Ie]),keys:ht}}}return{args:je,keys:null}}},7908:(fn,ot,J)=>{function T(B,m){if(B){const ce=B.indexOf(m);0<=ce&&B.splice(ce,1)}}J.d(ot,{o:()=>T})},1853:(fn,ot,J)=>{function T(B){const ce=B(De=>{Error.call(De),De.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}J.d(ot,{L:()=>T})},8496:(fn,ot,J)=>{function T(B,m){return B.reduce((ce,De,Fe)=>(ce[De]=m[Fe],ce),{})}J.d(ot,{e:()=>T})},9786:(fn,ot,J)=>{J.d(ot,{Y:()=>m,l:()=>ce});var T=J(1026);let B=null;function m(De){if(T.$.useDeprecatedSynchronousErrorHandling){const Fe=!B;if(Fe&&(B={errorThrown:!1,error:null}),De(),Fe){const{errorThrown:je,error:Et}=B;if(B=null,je)throw Et}}else De()}function ce(De){T.$.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=De)}},5225:(fn,ot,J)=>{function T(B,m,ce,De=0,Fe=!1){const je=m.schedule(function(){ce(),Fe?B.add(this.schedule(null,De)):this.unsubscribe()},De);if(B.add(je),!Fe)return je}J.d(ot,{N:()=>T})},3669:(fn,ot,J)=>{function T(B){return B}J.d(ot,{D:()=>T})},7441:(fn,ot,J)=>{J.d(ot,{X:()=>T});const T=B=>B&&"number"==typeof B.length&&"function"!=typeof B},7953:(fn,ot,J)=>{J.d(ot,{T:()=>B});var T=J(8071);function B(m){return Symbol.asyncIterator&&(0,T.T)(m?.[Symbol.asyncIterator])}},8071:(fn,ot,J)=>{function T(B){return"function"==typeof B}J.d(ot,{T:()=>T})},5055:(fn,ot,J)=>{J.d(ot,{l:()=>m});var T=J(3494),B=J(8071);function m(ce){return(0,B.T)(ce[T.s])}},5397:(fn,ot,J)=>{J.d(ot,{x:()=>m});var T=J(4761),B=J(8071);function m(ce){return(0,B.T)(ce?.[T.l])}},9858:(fn,ot,J)=>{J.d(ot,{y:()=>B});var T=J(8071);function B(m){return(0,T.T)(m?.then)}},5196:(fn,ot,J)=>{J.d(ot,{C:()=>m,U:()=>ce});var T=J(1635),B=J(8071);function m(De){return(0,T.AQ)(this,arguments,function*(){const je=De.getReader();try{for(;;){const{value:Et,done:ht}=yield(0,T.N3)(je.read());if(ht)return yield(0,T.N3)(void 0);yield yield(0,T.N3)(Et)}}finally{je.releaseLock()}})}function ce(De){return(0,B.T)(De?.getReader)}},9974:(fn,ot,J)=>{J.d(ot,{N:()=>m,S:()=>B});var T=J(8071);function B(ce){return(0,T.T)(ce?.lift)}function m(ce){return De=>{if(B(De))return De.lift(function(Fe){try{return ce(Fe,this)}catch(je){this.error(je)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(fn,ot,J)=>{J.d(ot,{I:()=>ce});var T=J(6354);const{isArray:B}=Array;function ce(De){return(0,T.T)(Fe=>function m(De,Fe){return B(Fe)?De(...Fe):De(Fe)}(De,Fe))}},5343:(fn,ot,J)=>{function T(){}J.d(ot,{l:()=>T})},1203:(fn,ot,J)=>{J.d(ot,{F:()=>B,m:()=>m});var T=J(3669);function B(...ce){return m(ce)}function m(ce){return 0===ce.length?T.D:1===ce.length?ce[0]:function(Fe){return ce.reduce((je,Et)=>Et(je),Fe)}}},5334:(fn,ot,J)=>{J.d(ot,{m:()=>m});var T=J(1026),B=J(9270);function m(ce){B.f.setTimeout(()=>{const{onUnhandledError:De}=T.$;if(!De)throw ce;De(ce)})}},591:(fn,ot,J)=>{function T(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}J.d(ot,{L:()=>T})},9969:(fn,ot,J)=>{J.d(ot,{FX:()=>Gt,If:()=>T,K2:()=>Fe,hZ:()=>m,i0:()=>ce,i7:()=>ht,iF:()=>je,kY:()=>Ie,kp:()=>B,sf:()=>Yt,ui:()=>At});var T=function(it){return it[it.State=0]="State",it[it.Transition=1]="Transition",it[it.Sequence=2]="Sequence",it[it.Group=3]="Group",it[it.Animate=4]="Animate",it[it.Keyframes=5]="Keyframes",it[it.Style=6]="Style",it[it.Trigger=7]="Trigger",it[it.Reference=8]="Reference",it[it.AnimateChild=9]="AnimateChild",it[it.AnimateRef=10]="AnimateRef",it[it.Query=11]="Query",it[it.Stagger=12]="Stagger",it}(T||{});const B="*";function m(it,_e){return{type:T.Trigger,name:it,definitions:_e,options:{}}}function ce(it,_e=null){return{type:T.Animate,styles:_e,timings:it}}function Fe(it,_e=null){return{type:T.Sequence,steps:it,options:_e}}function je(it){return{type:T.Style,styles:it,offset:null}}function ht(it){return{type:T.Keyframes,steps:it}}function Ie(it,_e,Ut=null){return{type:T.Transition,expr:it,animation:_e,options:Ut}}class Yt{constructor(_e=0,Ut=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=_e+Ut}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(_e=>_e()),this._onDoneFns=[])}onStart(_e){this._originalOnStartFns.push(_e),this._onStartFns.push(_e)}onDone(_e){this._originalOnDoneFns.push(_e),this._onDoneFns.push(_e)}onDestroy(_e){this._onDestroyFns.push(_e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(_e=>_e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(_e=>_e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(_e){this._position=this.totalTime?_e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(_e){const Ut="start"==_e?this._onStartFns:this._onDoneFns;Ut.forEach(Nn=>Nn()),Ut.length=0}}class At{constructor(_e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=_e;let Ut=0,Nn=0,Kn=0;const zn=this.players.length;0==zn?queueMicrotask(()=>this._onFinish()):this.players.forEach(hr=>{hr.onDone(()=>{++Ut==zn&&this._onFinish()}),hr.onDestroy(()=>{++Nn==zn&&this._onDestroy()}),hr.onStart(()=>{++Kn==zn&&this._onStart()})}),this.totalTime=this.players.reduce((hr,vi)=>Math.max(hr,vi.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(_e=>_e()),this._onDoneFns=[])}init(){this.players.forEach(_e=>_e.init())}onStart(_e){this._onStartFns.push(_e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(_e=>_e()),this._onStartFns=[])}onDone(_e){this._onDoneFns.push(_e)}onDestroy(_e){this._onDestroyFns.push(_e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(_e=>_e.play())}pause(){this.players.forEach(_e=>_e.pause())}restart(){this.players.forEach(_e=>_e.restart())}finish(){this._onFinish(),this.players.forEach(_e=>_e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(_e=>_e.destroy()),this._onDestroyFns.forEach(_e=>_e()),this._onDestroyFns=[])}reset(){this.players.forEach(_e=>_e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(_e){const Ut=_e*this.totalTime;this.players.forEach(Nn=>{const Kn=Nn.totalTime?Math.min(1,Ut/Nn.totalTime):1;Nn.setPosition(Kn)})}getPosition(){const _e=this.players.reduce((Ut,Nn)=>null===Ut||Nn.totalTime>Ut.totalTime?Nn:Ut,null);return null!=_e?_e.getPosition():0}beforeDestroy(){this.players.forEach(_e=>{_e.beforeDestroy&&_e.beforeDestroy()})}triggerCallback(_e){const Ut="start"==_e?this._onStartFns:this._onDoneFns;Ut.forEach(Nn=>Nn()),Ut.length=0}}const Gt="!"},8008:(fn,ot,J)=>{J.r(ot),J.d(ot,{AnimationDriver:()=>Bt,NoopAnimationDriver:()=>Ei,\u0275Animation:()=>ps,\u0275AnimationEngine:()=>Da,\u0275AnimationRenderer:()=>ri,\u0275AnimationRendererFactory:()=>gs,\u0275AnimationStyleNormalizer:()=>Xn,\u0275BaseAnimationRenderer:()=>ni,\u0275NoopAnimationStyleNormalizer:()=>xn,\u0275WebAnimationsDriver:()=>js,\u0275WebAnimationsPlayer:()=>es,\u0275WebAnimationsStyleNormalizer:()=>On,\u0275allowPreviousPlayerStylesMerge:()=>Ne,\u0275camelCaseToDashCase:()=>tt,\u0275containsElement:()=>gr,\u0275createEngine:()=>Io,\u0275getParentElement:()=>jn,\u0275invokeQuery:()=>Yr,\u0275normalizeKeyframes:()=>Ge,\u0275validateStyleProperty:()=>mn,\u0275validateWebAnimatableStyleProperty:()=>qi});var T=J(9969),B=J(3953);function ce(re){return new B.wOt(3e3,!1)}const Pt=new Set(["-moz-outline-radius","-moz-outline-radius-bottomleft","-moz-outline-radius-bottomright","-moz-outline-radius-topleft","-moz-outline-radius-topright","-ms-grid-columns","-ms-grid-rows","-webkit-line-clamp","-webkit-text-fill-color","-webkit-text-stroke","-webkit-text-stroke-color","accent-color","all","backdrop-filter","background","background-color","background-position","background-size","block-size","border","border-block-end","border-block-end-color","border-block-end-width","border-block-start","border-block-start-color","border-block-start-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-width","border-color","border-end-end-radius","border-end-start-radius","border-image-outset","border-image-slice","border-image-width","border-inline-end","border-inline-end-color","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-width","border-left","border-left-color","border-left-width","border-radius","border-right","border-right-color","border-right-width","border-start-end-radius","border-start-start-radius","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-width","border-width","bottom","box-shadow","caret-color","clip","clip-path","color","column-count","column-gap","column-rule","column-rule-color","column-rule-width","column-width","columns","filter","flex","flex-basis","flex-grow","flex-shrink","font","font-size","font-size-adjust","font-stretch","font-variation-settings","font-weight","gap","grid-column-gap","grid-gap","grid-row-gap","grid-template-columns","grid-template-rows","height","inline-size","input-security","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","left","letter-spacing","line-clamp","line-height","margin","margin-block-end","margin-block-start","margin-bottom","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","mask","mask-border","mask-position","mask-size","max-block-size","max-height","max-inline-size","max-lines","max-width","min-block-size","min-height","min-inline-size","min-width","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","outline","outline-color","outline-offset","outline-width","padding","padding-block-end","padding-block-start","padding-bottom","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","perspective","perspective-origin","right","rotate","row-gap","scale","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-coordinate","scroll-snap-destination","scrollbar-color","shape-image-threshold","shape-margin","shape-outside","tab-size","text-decoration","text-decoration-color","text-decoration-thickness","text-emphasis","text-emphasis-color","text-indent","text-shadow","text-underline-offset","top","transform","transform-origin","translate","vertical-align","visibility","width","word-spacing","z-index","zoom"]);function Ze(re){switch(re.length){case 0:return new T.sf;case 1:return re[0];default:return new T.ui(re)}}function we(re,b,M=new Map,U=new Map){const Q=[],oe=[];let pe=-1,Ce=null;if(b.forEach(Ke=>{const rt=Ke.get("offset"),Qt=rt==pe,mt=Qt&&Ce||new Map;Ke.forEach((Vn,yn)=>{let bn=yn,hn=Vn;if("offset"!==yn)switch(bn=re.normalizePropertyName(bn,Q),hn){case T.FX:hn=M.get(yn);break;case T.kp:hn=U.get(yn);break;default:hn=re.normalizeStyleValue(yn,bn,hn,Q)}mt.set(bn,hn)}),Qt||oe.push(mt),Ce=mt,pe=rt}),Q.length)throw function _e(re){return new B.wOt(3502,!1)}();return oe}function Mn(re,b,M,U){switch(b){case"start":re.onStart(()=>U(M&&ar(M,"start",re)));break;case"done":re.onDone(()=>U(M&&ar(M,"done",re)));break;case"destroy":re.onDestroy(()=>U(M&&ar(M,"destroy",re)))}}function ar(re,b,M){const oe=en(re.element,re.triggerName,re.fromState,re.toState,b||re.phaseName,M.totalTime??re.totalTime,!!M.disabled),pe=re._data;return null!=pe&&(oe._data=pe),oe}function en(re,b,M,U,Q="",oe=0,pe){return{element:re,triggerName:b,fromState:M,toState:U,phaseName:Q,totalTime:oe,disabled:!!pe}}function te(re,b,M){let U=re.get(b);return U||re.set(b,U=M),U}function fr(re){const b=re.indexOf(":");return[re.substring(1,b),re.slice(b+1)]}const Qr=typeof document>"u"?null:document.documentElement;function jn(re){const b=re.parentNode||re.host||null;return b===Qr?null:b}let lr=null,Wn=!1;function mn(re){lr||(lr=function yo(){return typeof document<"u"?document.body:null}()||{},Wn=!!lr.style&&"WebkitAppearance"in lr.style);let b=!0;return lr.style&&!function Hr(re){return"ebkit"==re.substring(1,6)}(re)&&(b=re in lr.style,!b&&Wn&&(b="Webkit"+re.charAt(0).toUpperCase()+re.slice(1)in lr.style)),b}function qi(re){return Pt.has(re)}function gr(re,b){for(;b;){if(b===re)return!0;b=jn(b)}return!1}function Yr(re,b,M){if(M)return Array.from(re.querySelectorAll(b));const U=re.querySelector(b);return U?[U]:[]}let Ei=(()=>{class re{validateStyleProperty(M){return mn(M)}containsElement(M,U){return gr(M,U)}getParentElement(M){return jn(M)}query(M,U,Q){return Yr(M,U,Q)}computeStyle(M,U,Q){return Q||""}animate(M,U,Q,oe,pe,Ce=[],Ke){return new T.sf(Q,oe)}static#e=this.\u0275fac=function(U){return new(U||re)};static#t=this.\u0275prov=B.jDH({token:re,factory:re.\u0275fac})}return re})();class Bt{static#e=this.NOOP=new Ei}class Xn{}class xn{normalizePropertyName(b,M){return b}normalizeStyleValue(b,M,U,Q){return U}}const ir=1e3,zr="ng-enter",Vr="ng-leave",yt="ng-trigger",Pn=".ng-trigger",mr="ng-animating",Jn=".ng-animating";function Nt(re){if("number"==typeof re)return re;const b=re.match(/^(-?[\.\d]+)(m?s)/);return!b||b.length<2?0:Kt(parseFloat(b[1]),b[2])}function Kt(re,b){return"s"===b?re*ir:re}function Ln(re,b,M){return re.hasOwnProperty("duration")?re:function xt(re,b,M){let Q,oe=0,pe="";if("string"==typeof re){const Ce=re.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Ce)return b.push(ce()),{duration:0,delay:0,easing:""};Q=Kt(parseFloat(Ce[1]),Ce[2]);const Ke=Ce[3];null!=Ke&&(oe=Kt(parseFloat(Ke),Ce[4]));const rt=Ce[5];rt&&(pe=rt)}else Q=re;if(!M){let Ce=!1,Ke=b.length;Q<0&&(b.push(function De(){return new B.wOt(3100,!1)}()),Ce=!0),oe<0&&(b.push(function Fe(){return new B.wOt(3101,!1)}()),Ce=!0),Ce&&b.splice(Ke,0,ce())}return{duration:Q,delay:oe,easing:pe}}(re,b,M)}function Ge(re){return re.length?re[0]instanceof Map?re:re.map(b=>new Map(Object.entries(b))):[]}function st(re){return Array.isArray(re)?new Map(...re):new Map(re)}function $n(re,b,M){b.forEach((U,Q)=>{const oe=ve(Q);M&&!M.has(Q)&&M.set(Q,re.style[oe]),re.style[oe]=U})}function et(re,b){b.forEach((M,U)=>{const Q=ve(U);re.style[Q]=""})}function Be(re){return Array.isArray(re)?1==re.length?re[0]:(0,T.K2)(re):re}const Me=new RegExp("{{\\s*(.+?)\\s*}}","g");function gt(re){let b=[];if("string"==typeof re){let M;for(;M=Me.exec(re);)b.push(M[1]);Me.lastIndex=0}return b}function se(re,b,M){const U=`${re}`,Q=U.replace(Me,(oe,pe)=>{let Ce=b[pe];return null==Ce&&(M.push(function Et(re){return new B.wOt(3003,!1)}()),Ce=""),Ce.toString()});return Q==U?re:Q}const ae=/-+([a-z0-9])/g;function ve(re){return re.replace(ae,(...b)=>b[1].toUpperCase())}function tt(re){return re.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ne(re,b){return 0===re||0===b}function vt(re,b,M){switch(b.type){case T.If.Trigger:return re.visitTrigger(b,M);case T.If.State:return re.visitState(b,M);case T.If.Transition:return re.visitTransition(b,M);case T.If.Sequence:return re.visitSequence(b,M);case T.If.Group:return re.visitGroup(b,M);case T.If.Animate:return re.visitAnimate(b,M);case T.If.Keyframes:return re.visitKeyframes(b,M);case T.If.Style:return re.visitStyle(b,M);case T.If.Reference:return re.visitReference(b,M);case T.If.AnimateChild:return re.visitAnimateChild(b,M);case T.If.AnimateRef:return re.visitAnimateRef(b,M);case T.If.Query:return re.visitQuery(b,M);case T.If.Stagger:return re.visitStagger(b,M);default:throw function ht(re){return new B.wOt(3004,!1)}()}}function kn(re,b){return window.getComputedStyle(re)[b]}const Ci=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class On extends Xn{normalizePropertyName(b,M){return ve(b)}normalizeStyleValue(b,M,U,Q){let oe="";const pe=U.toString().trim();if(Ci.has(M)&&0!==U&&"0"!==U)if("number"==typeof U)oe="px";else{const Ce=U.match(/^[+-]?[\d\.]+([a-z]*)$/);Ce&&0==Ce[1].length&&Q.push(function Ie(re,b){return new B.wOt(3005,!1)}())}return pe+oe}}const Ii="*";const Oi=new Set(["true","1"]),Je=new Set(["false","0"]);function be(re,b){const M=Oi.has(re)||Je.has(re),U=Oi.has(b)||Je.has(b);return(Q,oe)=>{let pe=re==Ii||re==Q,Ce=b==Ii||b==oe;return!pe&&M&&"boolean"==typeof Q&&(pe=Q?Oi.has(re):Je.has(re)),!Ce&&U&&"boolean"==typeof oe&&(Ce=oe?Oi.has(b):Je.has(b)),pe&&Ce}}const Wt=new RegExp("s*:selfs*,?","g");function ln(re,b,M,U){return new Fn(re).build(b,M,U)}class Fn{constructor(b){this._driver=b}build(b,M,U){const Q=new di(M);return this._resetContextStyleTimingState(Q),vt(this,Be(b),Q)}_resetContextStyleTimingState(b){b.currentQuerySelector="",b.collectedStyles=new Map,b.collectedStyles.set("",new Map),b.currentTime=0}visitTrigger(b,M){let U=M.queryCount=0,Q=M.depCount=0;const oe=[],pe=[];return"@"==b.name.charAt(0)&&M.errors.push(function Ee(){return new B.wOt(3006,!1)}()),b.definitions.forEach(Ce=>{if(this._resetContextStyleTimingState(M),Ce.type==T.If.State){const Ke=Ce,rt=Ke.name;rt.toString().split(/\s*,\s*/).forEach(Qt=>{Ke.name=Qt,oe.push(this.visitState(Ke,M))}),Ke.name=rt}else if(Ce.type==T.If.Transition){const Ke=this.visitTransition(Ce,M);U+=Ke.queryCount,Q+=Ke.depCount,pe.push(Ke)}else M.errors.push(function Xe(){return new B.wOt(3007,!1)}())}),{type:T.If.Trigger,name:b.name,states:oe,transitions:pe,queryCount:U,depCount:Q,options:null}}visitState(b,M){const U=this.visitStyle(b.styles,M),Q=b.options&&b.options.params||null;if(U.containsDynamicStyles){const oe=new Set,pe=Q||{};U.styles.forEach(Ce=>{Ce instanceof Map&&Ce.forEach(Ke=>{gt(Ke).forEach(rt=>{pe.hasOwnProperty(rt)||oe.add(rt)})})}),oe.size&&M.errors.push(function Ot(re,b){return new B.wOt(3008,!1)}(0,oe.values()))}return{type:T.If.State,name:b.name,style:U,options:Q?{params:Q}:null}}visitTransition(b,M){M.queryCount=0,M.depCount=0;const U=vt(this,Be(b.animation),M),Q=function Eo(re,b){const M=[];return"string"==typeof re?re.split(/\s*,\s*/).forEach(U=>function Wo(re,b,M){if(":"==re[0]){const Ke=function Ea(re,b){switch(re){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(M,U)=>parseFloat(U)>parseFloat(M);case":decrement":return(M,U)=>parseFloat(U)<parseFloat(M);default:return b.push(function Yt(re){return new B.wOt(3016,!1)}()),"* => *"}}(re,M);if("function"==typeof Ke)return void b.push(Ke);re=Ke}const U=re.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==U||U.length<4)return M.push(function _t(re){return new B.wOt(3015,!1)}()),b;const Q=U[1],oe=U[2],pe=U[3];b.push(be(Q,pe)),"<"==oe[0]&&(Q!=Ii||pe!=Ii)&&b.push(be(pe,Q))}(U,M,b)):M.push(re),M}(b.expr,M.errors);return{type:T.If.Transition,matchers:Q,animation:U,queryCount:M.queryCount,depCount:M.depCount,options:qn(b.options)}}visitSequence(b,M){return{type:T.If.Sequence,steps:b.steps.map(U=>vt(this,U,M)),options:qn(b.options)}}visitGroup(b,M){const U=M.currentTime;let Q=0;const oe=b.steps.map(pe=>{M.currentTime=U;const Ce=vt(this,pe,M);return Q=Math.max(Q,M.currentTime),Ce});return M.currentTime=Q,{type:T.If.Group,steps:oe,options:qn(b.options)}}visitAnimate(b,M){const U=function Ls(re,b){if(re.hasOwnProperty("duration"))return re;if("number"==typeof re)return Zs(Ln(re,b).duration,0,"");const M=re;if(M.split(/\s+/).some(oe=>"{"==oe.charAt(0)&&"{"==oe.charAt(1))){const oe=Zs(0,0,"");return oe.dynamic=!0,oe.strValue=M,oe}const Q=Ln(M,b);return Zs(Q.duration,Q.delay,Q.easing)}(b.timings,M.errors);M.currentAnimateTimings=U;let Q,oe=b.styles?b.styles:(0,T.iF)({});if(oe.type==T.If.Keyframes)Q=this.visitKeyframes(oe,M);else{let pe=b.styles,Ce=!1;if(!pe){Ce=!0;const rt={};U.easing&&(rt.easing=U.easing),pe=(0,T.iF)(rt)}M.currentTime+=U.duration+U.delay;const Ke=this.visitStyle(pe,M);Ke.isEmptyStep=Ce,Q=Ke}return M.currentAnimateTimings=null,{type:T.If.Animate,timings:U,style:Q,options:null}}visitStyle(b,M){const U=this._makeStyleAst(b,M);return this._validateStyleAst(U,M),U}_makeStyleAst(b,M){const U=[],Q=Array.isArray(b.styles)?b.styles:[b.styles];for(let Ce of Q)"string"==typeof Ce?Ce===T.kp?U.push(Ce):M.errors.push(new B.wOt(3002,!1)):U.push(new Map(Object.entries(Ce)));let oe=!1,pe=null;return U.forEach(Ce=>{if(Ce instanceof Map&&(Ce.has("easing")&&(pe=Ce.get("easing"),Ce.delete("easing")),!oe))for(let Ke of Ce.values())if(Ke.toString().indexOf("{{")>=0){oe=!0;break}}),{type:T.If.Style,styles:U,easing:pe,offset:b.offset,containsDynamicStyles:oe,options:null}}_validateStyleAst(b,M){const U=M.currentAnimateTimings;let Q=M.currentTime,oe=M.currentTime;U&&oe>0&&(oe-=U.duration+U.delay),b.styles.forEach(pe=>{"string"!=typeof pe&&pe.forEach((Ce,Ke)=>{const rt=M.collectedStyles.get(M.currentQuerySelector),Qt=rt.get(Ke);let mt=!0;Qt&&(oe!=Q&&oe>=Qt.startTime&&Q<=Qt.endTime&&(M.errors.push(function nn(re,b,M,U,Q){return new B.wOt(3010,!1)}()),mt=!1),oe=Qt.startTime),mt&&rt.set(Ke,{startTime:oe,endTime:Q}),M.options&&function ge(re,b,M){const U=b.params||{},Q=gt(re);Q.length&&Q.forEach(oe=>{U.hasOwnProperty(oe)||M.push(function je(re){return new B.wOt(3001,!1)}())})}(Ce,M.options,M.errors)})})}visitKeyframes(b,M){const U={type:T.If.Keyframes,styles:[],options:null};if(!M.currentAnimateTimings)return M.errors.push(function Zt(){return new B.wOt(3011,!1)}()),U;let oe=0;const pe=[];let Ce=!1,Ke=!1,rt=0;const Qt=b.steps.map(wn=>{const Fr=this._makeStyleAst(wn,M);let $i=null!=Fr.offset?Fr.offset:function ke(re){if("string"==typeof re)return null;let b=null;if(Array.isArray(re))re.forEach(M=>{if(M instanceof Map&&M.has("offset")){const U=M;b=parseFloat(U.get("offset")),U.delete("offset")}});else if(re instanceof Map&&re.has("offset")){const M=re;b=parseFloat(M.get("offset")),M.delete("offset")}return b}(Fr.styles),Ti=0;return null!=$i&&(oe++,Ti=Fr.offset=$i),Ke=Ke||Ti<0||Ti>1,Ce=Ce||Ti<rt,rt=Ti,pe.push(Ti),Fr});Ke&&M.errors.push(function sn(){return new B.wOt(3012,!1)}()),Ce&&M.errors.push(function tr(){return new B.wOt(3200,!1)}());const mt=b.steps.length;let Vn=0;oe>0&&oe<mt?M.errors.push(function pr(){return new B.wOt(3202,!1)}()):0==oe&&(Vn=1/(mt-1));const yn=mt-1,bn=M.currentTime,hn=M.currentAnimateTimings,In=hn.duration;return Qt.forEach((wn,Fr)=>{const $i=Vn>0?Fr==yn?1:Vn*Fr:pe[Fr],Ti=$i*In;M.currentTime=bn+hn.delay+Ti,hn.duration=Ti,this._validateStyleAst(wn,M),wn.offset=$i,U.styles.push(wn)}),U}visitReference(b,M){return{type:T.If.Reference,animation:vt(this,Be(b.animation),M),options:qn(b.options)}}visitAnimateChild(b,M){return M.depCount++,{type:T.If.AnimateChild,options:qn(b.options)}}visitAnimateRef(b,M){return{type:T.If.AnimateRef,animation:this.visitReference(b.animation,M),options:qn(b.options)}}visitQuery(b,M){const U=M.currentQuerySelector,Q=b.options||{};M.queryCount++,M.currentQuery=b;const[oe,pe]=function Cr(re){const b=!!re.split(/\s*,\s*/).find(M=>":self"==M);return b&&(re=re.replace(Wt,"")),re=re.replace(/@\*/g,Pn).replace(/@\w+/g,M=>Pn+"-"+M.slice(1)).replace(/:animating/g,Jn),[re,b]}(b.selector);M.currentQuerySelector=U.length?U+" "+oe:oe,te(M.collectedStyles,M.currentQuerySelector,new Map);const Ce=vt(this,Be(b.animation),M);return M.currentQuery=null,M.currentQuerySelector=U,{type:T.If.Query,selector:oe,limit:Q.limit||0,optional:!!Q.optional,includeSelf:pe,animation:Ce,originalSelector:b.selector,options:qn(b.options)}}visitStagger(b,M){M.currentQuery||M.errors.push(function Ct(){return new B.wOt(3013,!1)}());const U="full"===b.timings?{duration:0,delay:0,easing:"full"}:Ln(b.timings,M.errors,!0);return{type:T.If.Stagger,animation:vt(this,Be(b.animation),M),timings:U,options:null}}}class di{constructor(b){this.errors=b,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function qn(re){return re?(re={...re}).params&&(re.params=function nr(re){return re?{...re}:null}(re.params)):re={},re}function Zs(re,b,M){return{duration:re,delay:b,easing:M}}function hs(re,b,M,U,Q,oe,pe=null,Ce=!1){return{type:1,element:re,keyframes:b,preStyleProps:M,postStyleProps:U,duration:Q,delay:oe,totalTime:Q+oe,easing:pe,subTimeline:Ce}}class Zi{constructor(){this._map=new Map}get(b){return this._map.get(b)||[]}append(b,M){let U=this._map.get(b);U||this._map.set(b,U=[]),U.push(...M)}has(b){return this._map.has(b)}clear(){this._map.clear()}}const qo=new RegExp(":enter","g"),Vs=new RegExp(":leave","g");function Qo(re,b,M,U,Q,oe=new Map,pe=new Map,Ce,Ke,rt=[]){return(new cr).buildKeyframes(re,b,M,U,Q,oe,pe,Ce,Ke,rt)}class cr{buildKeyframes(b,M,U,Q,oe,pe,Ce,Ke,rt,Qt=[]){rt=rt||new Zi;const mt=new co(b,M,rt,Q,oe,Qt,[]);mt.options=Ke;const Vn=Ke.delay?Nt(Ke.delay):0;mt.currentTimeline.delayNextStep(Vn),mt.currentTimeline.setStyles([pe],null,mt.errors,Ke),vt(this,U,mt);const yn=mt.timelines.filter(bn=>bn.containsAnimation());if(yn.length&&Ce.size){let bn;for(let hn=yn.length-1;hn>=0;hn--){const In=yn[hn];if(In.element===M){bn=In;break}}bn&&!bn.allowOnlyTimelineStyles()&&bn.setStyles([Ce],null,mt.errors,Ke)}return yn.length?yn.map(bn=>bn.buildKeyframes()):[hs(M,[],[],[],0,Vn,"",!1)]}visitTrigger(b,M){}visitState(b,M){}visitTransition(b,M){}visitAnimateChild(b,M){const U=M.subInstructions.get(M.element);if(U){const Q=M.createSubContext(b.options),oe=M.currentTimeline.currentTime,pe=this._visitSubInstructions(U,Q,Q.options);oe!=pe&&M.transformIntoNewTimeline(pe)}M.previousNode=b}visitAnimateRef(b,M){const U=M.createSubContext(b.options);U.transformIntoNewTimeline(),this._applyAnimationRefDelays([b.options,b.animation.options],M,U),this.visitReference(b.animation,U),M.transformIntoNewTimeline(U.currentTimeline.currentTime),M.previousNode=b}_applyAnimationRefDelays(b,M,U){for(const Q of b){const oe=Q?.delay;if(oe){const pe="number"==typeof oe?oe:Nt(se(oe,Q?.params??{},M.errors));U.delayNextStep(pe)}}}_visitSubInstructions(b,M,U){let oe=M.currentTimeline.currentTime;const pe=null!=U.duration?Nt(U.duration):null,Ce=null!=U.delay?Nt(U.delay):null;return 0!==pe&&b.forEach(Ke=>{const rt=M.appendInstructionToTimeline(Ke,pe,Ce);oe=Math.max(oe,rt.duration+rt.delay)}),oe}visitReference(b,M){M.updateOptions(b.options,!0),vt(this,b.animation,M),M.previousNode=b}visitSequence(b,M){const U=M.subContextCount;let Q=M;const oe=b.options;if(oe&&(oe.params||oe.delay)&&(Q=M.createSubContext(oe),Q.transformIntoNewTimeline(),null!=oe.delay)){Q.previousNode.type==T.If.Style&&(Q.currentTimeline.snapshotCurrentStyles(),Q.previousNode=Sr);const pe=Nt(oe.delay);Q.delayNextStep(pe)}b.steps.length&&(b.steps.forEach(pe=>vt(this,pe,Q)),Q.currentTimeline.applyStylesToKeyframe(),Q.subContextCount>U&&Q.transformIntoNewTimeline()),M.previousNode=b}visitGroup(b,M){const U=[];let Q=M.currentTimeline.currentTime;const oe=b.options&&b.options.delay?Nt(b.options.delay):0;b.steps.forEach(pe=>{const Ce=M.createSubContext(b.options);oe&&Ce.delayNextStep(oe),vt(this,pe,Ce),Q=Math.max(Q,Ce.currentTimeline.currentTime),U.push(Ce.currentTimeline)}),U.forEach(pe=>M.currentTimeline.mergeTimelineCollectedStyles(pe)),M.transformIntoNewTimeline(Q),M.previousNode=b}_visitTiming(b,M){if(b.dynamic){const U=b.strValue;return Ln(M.params?se(U,M.params,M.errors):U,M.errors)}return{duration:b.duration,delay:b.delay,easing:b.easing}}visitAnimate(b,M){const U=M.currentAnimateTimings=this._visitTiming(b.timings,M),Q=M.currentTimeline;U.delay&&(M.incrementTime(U.delay),Q.snapshotCurrentStyles());const oe=b.style;oe.type==T.If.Keyframes?this.visitKeyframes(oe,M):(M.incrementTime(U.duration),this.visitStyle(oe,M),Q.applyStylesToKeyframe()),M.currentAnimateTimings=null,M.previousNode=b}visitStyle(b,M){const U=M.currentTimeline,Q=M.currentAnimateTimings;!Q&&U.hasCurrentStyleProperties()&&U.forwardFrame();const oe=Q&&Q.easing||b.easing;b.isEmptyStep?U.applyEmptyStep(oe):U.setStyles(b.styles,oe,M.errors,M.options),M.previousNode=b}visitKeyframes(b,M){const U=M.currentAnimateTimings,Q=M.currentTimeline.duration,oe=U.duration,Ce=M.createSubContext().currentTimeline;Ce.easing=U.easing,b.styles.forEach(Ke=>{Ce.forwardTime((Ke.offset||0)*oe),Ce.setStyles(Ke.styles,Ke.easing,M.errors,M.options),Ce.applyStylesToKeyframe()}),M.currentTimeline.mergeTimelineCollectedStyles(Ce),M.transformIntoNewTimeline(Q+oe),M.previousNode=b}visitQuery(b,M){const U=M.currentTimeline.currentTime,Q=b.options||{},oe=Q.delay?Nt(Q.delay):0;oe&&(M.previousNode.type===T.If.Style||0==U&&M.currentTimeline.hasCurrentStyleProperties())&&(M.currentTimeline.snapshotCurrentStyles(),M.previousNode=Sr);let pe=U;const Ce=M.invokeQuery(b.selector,b.originalSelector,b.limit,b.includeSelf,!!Q.optional,M.errors);M.currentQueryTotal=Ce.length;let Ke=null;Ce.forEach((rt,Qt)=>{M.currentQueryIndex=Qt;const mt=M.createSubContext(b.options,rt);oe&&mt.delayNextStep(oe),rt===M.element&&(Ke=mt.currentTimeline),vt(this,b.animation,mt),mt.currentTimeline.applyStylesToKeyframe(),pe=Math.max(pe,mt.currentTimeline.currentTime)}),M.currentQueryIndex=0,M.currentQueryTotal=0,M.transformIntoNewTimeline(pe),Ke&&(M.currentTimeline.mergeTimelineCollectedStyles(Ke),M.currentTimeline.snapshotCurrentStyles()),M.previousNode=b}visitStagger(b,M){const U=M.parentContext,Q=M.currentTimeline,oe=b.timings,pe=Math.abs(oe.duration),Ce=pe*(M.currentQueryTotal-1);let Ke=pe*M.currentQueryIndex;switch(oe.duration<0?"reverse":oe.easing){case"reverse":Ke=Ce-Ke;break;case"full":Ke=U.currentStaggerTime}const Qt=M.currentTimeline;Ke&&Qt.delayNextStep(Ke);const mt=Qt.currentTime;vt(this,b.animation,M),M.previousNode=b,U.currentStaggerTime=Q.currentTime-mt+(Q.startTime-U.currentTimeline.startTime)}}const Sr={};class co{constructor(b,M,U,Q,oe,pe,Ce,Ke){this._driver=b,this.element=M,this.subInstructions=U,this._enterClassName=Q,this._leaveClassName=oe,this.errors=pe,this.timelines=Ce,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Sr,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Ke||new hi(this._driver,M,0),Ce.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(b,M){if(!b)return;const U=b;let Q=this.options;null!=U.duration&&(Q.duration=Nt(U.duration)),null!=U.delay&&(Q.delay=Nt(U.delay));const oe=U.params;if(oe){let pe=Q.params;pe||(pe=this.options.params={}),Object.keys(oe).forEach(Ce=>{(!M||!pe.hasOwnProperty(Ce))&&(pe[Ce]=se(oe[Ce],pe,this.errors))})}}_copyOptions(){const b={};if(this.options){const M=this.options.params;if(M){const U=b.params={};Object.keys(M).forEach(Q=>{U[Q]=M[Q]})}}return b}createSubContext(b=null,M,U){const Q=M||this.element,oe=new co(this._driver,Q,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(Q,U||0));return oe.previousNode=this.previousNode,oe.currentAnimateTimings=this.currentAnimateTimings,oe.options=this._copyOptions(),oe.updateOptions(b),oe.currentQueryIndex=this.currentQueryIndex,oe.currentQueryTotal=this.currentQueryTotal,oe.parentContext=this,this.subContextCount++,oe}transformIntoNewTimeline(b){return this.previousNode=Sr,this.currentTimeline=this.currentTimeline.fork(this.element,b),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(b,M,U){const Q={duration:M??b.duration,delay:this.currentTimeline.currentTime+(U??0)+b.delay,easing:""},oe=new Ri(this._driver,b.element,b.keyframes,b.preStyleProps,b.postStyleProps,Q,b.stretchStartingKeyframe);return this.timelines.push(oe),Q}incrementTime(b){this.currentTimeline.forwardTime(this.currentTimeline.duration+b)}delayNextStep(b){b>0&&this.currentTimeline.delayNextStep(b)}invokeQuery(b,M,U,Q,oe,pe){let Ce=[];if(Q&&Ce.push(this.element),b.length>0){b=(b=b.replace(qo,"."+this._enterClassName)).replace(Vs,"."+this._leaveClassName);let rt=this._driver.query(this.element,b,1!=U);0!==U&&(rt=U<0?rt.slice(rt.length+U,rt.length):rt.slice(0,U)),Ce.push(...rt)}return!oe&&0==Ce.length&&pe.push(function It(re){return new B.wOt(3014,!1)}()),Ce}}class hi{constructor(b,M,U,Q){this._driver=b,this.element=M,this.startTime=U,this._elementTimelineStylesLookup=Q,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(M),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(M,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(b){const M=1===this._keyframes.size&&this._pendingStyles.size;this.duration||M?(this.forwardTime(this.currentTime+b),M&&this.snapshotCurrentStyles()):this.startTime+=b}fork(b,M){return this.applyStylesToKeyframe(),new hi(this._driver,b,M||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(b){this.applyStylesToKeyframe(),this.duration=b,this._loadKeyframe()}_updateStyle(b,M){this._localTimelineStyles.set(b,M),this._globalTimelineStyles.set(b,M),this._styleSummary.set(b,{time:this.currentTime,value:M})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(b){b&&this._previousKeyframe.set("easing",b);for(let[M,U]of this._globalTimelineStyles)this._backFill.set(M,U||T.kp),this._currentKeyframe.set(M,T.kp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(b,M,U,Q){M&&this._previousKeyframe.set("easing",M);const oe=Q&&Q.params||{},pe=function Oo(re,b){const M=new Map;let U;return re.forEach(Q=>{if("*"===Q){U??=b.keys();for(let oe of U)M.set(oe,T.kp)}else for(let[oe,pe]of Q)M.set(oe,pe)}),M}(b,this._globalTimelineStyles);for(let[Ce,Ke]of pe){const rt=se(Ke,oe,U);this._pendingStyles.set(Ce,rt),this._localTimelineStyles.has(Ce)||this._backFill.set(Ce,this._globalTimelineStyles.get(Ce)??T.kp),this._updateStyle(Ce,rt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((b,M)=>{this._currentKeyframe.set(M,b)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((b,M)=>{this._currentKeyframe.has(M)||this._currentKeyframe.set(M,b)}))}snapshotCurrentStyles(){for(let[b,M]of this._localTimelineStyles)this._pendingStyles.set(b,M),this._updateStyle(b,M)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const b=[];for(let M in this._currentKeyframe)b.push(M);return b}mergeTimelineCollectedStyles(b){b._styleSummary.forEach((M,U)=>{const Q=this._styleSummary.get(U);(!Q||M.time>Q.time)&&this._updateStyle(U,M.value)})}buildKeyframes(){this.applyStylesToKeyframe();const b=new Set,M=new Set,U=1===this._keyframes.size&&0===this.duration;let Q=[];this._keyframes.forEach((Ce,Ke)=>{const rt=new Map([...this._backFill,...Ce]);rt.forEach((Qt,mt)=>{Qt===T.FX?b.add(mt):Qt===T.kp&&M.add(mt)}),U||rt.set("offset",Ke/this.duration),Q.push(rt)});const oe=[...b.values()],pe=[...M.values()];if(U){const Ce=Q[0],Ke=new Map(Ce);Ce.set("offset",0),Ke.set("offset",1),Q=[Ce,Ke]}return hs(this.element,Q,oe,pe,this.duration,this.startTime,this.easing,!1)}}class Ri extends hi{constructor(b,M,U,Q,oe,pe,Ce=!1){super(b,M,pe.delay),this.keyframes=U,this.preStyleProps=Q,this.postStyleProps=oe,this._stretchStartingKeyframe=Ce,this.timings={duration:pe.duration,delay:pe.delay,easing:pe.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let b=this.keyframes,{delay:M,duration:U,easing:Q}=this.timings;if(this._stretchStartingKeyframe&&M){const oe=[],pe=U+M,Ce=M/pe,Ke=new Map(b[0]);Ke.set("offset",0),oe.push(Ke);const rt=new Map(b[0]);rt.set("offset",Xr(Ce)),oe.push(rt);const Qt=b.length-1;for(let mt=1;mt<=Qt;mt++){let Vn=new Map(b[mt]);const yn=Vn.get("offset");Vn.set("offset",Xr((M+yn*U)/pe)),oe.push(Vn)}U=pe,M=0,Q="",b=oe}return hs(this.element,b,this.preStyleProps,this.postStyleProps,U,M,Q,!0)}}function Xr(re,b=3){const M=Math.pow(10,b-1);return Math.round(re*M)/M}function eo(re,b,M,U,Q,oe,pe,Ce,Ke,rt,Qt,mt,Vn){return{type:0,element:re,triggerName:b,isRemovalTransition:Q,fromState:M,fromStyles:oe,toState:U,toStyles:pe,timelines:Ce,queriedElements:Ke,preStyleProps:rt,postStyleProps:Qt,totalTime:mt,errors:Vn}}const Mr={};class Us{constructor(b,M,U){this._triggerName=b,this.ast=M,this._stateStyles=U}match(b,M,U,Q){return function bl(re,b,M,U,Q){return re.some(oe=>oe(b,M,U,Q))}(this.ast.matchers,b,M,U,Q)}buildStyles(b,M,U){let Q=this._stateStyles.get("*");return void 0!==b&&(Q=this._stateStyles.get(b?.toString())||Q),Q?Q.buildStyles(M,U):new Map}build(b,M,U,Q,oe,pe,Ce,Ke,rt,Qt){const mt=[],Vn=this.ast.options&&this.ast.options.params||Mr,bn=this.buildStyles(U,Ce&&Ce.params||Mr,mt),hn=Ke&&Ke.params||Mr,In=this.buildStyles(Q,hn,mt),wn=new Set,Fr=new Map,$i=new Map,Ti="void"===Q,ts={params:Al(hn,Vn),delay:this.ast.options?.delay},H=Qt?[]:Qo(b,M,this.ast.animation,oe,pe,bn,In,ts,rt,mt);let $=0;return H.forEach(R=>{$=Math.max(R.duration+R.delay,$)}),mt.length?eo(M,this._triggerName,U,Q,Ti,bn,In,[],[],Fr,$i,$,mt):(H.forEach(R=>{const Y=R.element,he=te(Fr,Y,new Set);R.preStyleProps.forEach(An=>he.add(An));const Tt=te($i,Y,new Set);R.postStyleProps.forEach(An=>Tt.add(An)),Y!==M&&wn.add(Y)}),eo(M,this._triggerName,U,Q,Ti,bn,In,H,[...wn.values()],Fr,$i,$))}}function Al(re,b){const M={...b};return Object.entries(re).forEach(([U,Q])=>{null!=Q&&(M[U]=Q)}),M}class wa{constructor(b,M,U){this.styles=b,this.defaultParams=M,this.normalizer=U}buildStyles(b,M){const U=new Map,Q=Al(b,this.defaultParams);return this.styles.styles.forEach(oe=>{"string"!=typeof oe&&oe.forEach((pe,Ce)=>{pe&&(pe=se(pe,Q,M));const Ke=this.normalizer.normalizePropertyName(Ce,M);pe=this.normalizer.normalizeStyleValue(Ce,Ke,pe,M),U.set(Ce,pe)})}),U}}class Ta{constructor(b,M,U){this.name=b,this.ast=M,this._normalizer=U,this.transitionFactories=[],this.states=new Map,M.states.forEach(Q=>{this.states.set(Q.name,new wa(Q.style,Q.options&&Q.options.params||{},U))}),Xa(this.states,"true","1"),Xa(this.states,"false","0"),M.transitions.forEach(Q=>{this.transitionFactories.push(new Us(b,Q,this.states))}),this.fallbackTransition=function rc(re,b,M){return new Us(re,{type:T.If.Transition,animation:{type:T.If.Sequence,steps:[],options:null},matchers:[(pe,Ce)=>!0],options:null,queryCount:0,depCount:0},b)}(b,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(b,M,U,Q){return this.transitionFactories.find(pe=>pe.match(b,M,U,Q))||null}matchStyles(b,M,U){return this.fallbackTransition.buildStyles(b,M,U)}}function Xa(re,b,M){re.has(b)?re.has(M)||re.set(M,re.get(b)):re.has(M)&&re.set(b,re.get(M))}const ic=new Zi;class ba{constructor(b,M,U){this.bodyNode=b,this._driver=M,this._normalizer=U,this._animations=new Map,this._playersById=new Map,this.players=[]}register(b,M){const U=[],oe=ln(this._driver,M,U,[]);if(U.length)throw function Ut(re){return new B.wOt(3503,!1)}();this._animations.set(b,oe)}_buildPlayer(b,M,U){const Q=b.element,oe=we(this._normalizer,b.keyframes,M,U);return this._driver.animate(Q,oe,b.duration,b.delay,b.easing,[],!0)}create(b,M,U={}){const Q=[],oe=this._animations.get(b);let pe;const Ce=new Map;if(oe?(pe=Qo(this._driver,M,oe,zr,Vr,new Map,new Map,U,ic,Q),pe.forEach(Qt=>{const mt=te(Ce,Qt.element,new Map);Qt.postStyleProps.forEach(Vn=>mt.set(Vn,null))})):(Q.push(function Nn(){return new B.wOt(3300,!1)}()),pe=[]),Q.length)throw function Kn(re){return new B.wOt(3504,!1)}();Ce.forEach((Qt,mt)=>{Qt.forEach((Vn,yn)=>{Qt.set(yn,this._driver.computeStyle(mt,yn,T.kp))})});const rt=Ze(pe.map(Qt=>{const mt=Ce.get(Qt.element);return this._buildPlayer(Qt,new Map,mt)}));return this._playersById.set(b,rt),rt.onDestroy(()=>this.destroy(b)),this.players.push(rt),rt}destroy(b){const M=this._getPlayer(b);M.destroy(),this._playersById.delete(b);const U=this.players.indexOf(M);U>=0&&this.players.splice(U,1)}_getPlayer(b){const M=this._playersById.get(b);if(!M)throw function zn(re){return new B.wOt(3301,!1)}();return M}listen(b,M,U,Q){const oe=en(M,"","","");return Mn(this._getPlayer(b),U,oe,Q),()=>{}}command(b,M,U,Q){if("register"==U)return void this.register(b,Q[0]);if("create"==U)return void this.create(b,M,Q[0]||{});const oe=this._getPlayer(b);switch(U){case"play":oe.play();break;case"pause":oe.pause();break;case"reset":oe.reset();break;case"restart":oe.restart();break;case"finish":oe.finish();break;case"init":oe.init();break;case"setPosition":oe.setPosition(parseFloat(Q[0]));break;case"destroy":this.destroy(b)}}}const ta="ng-animate-queued",As="ng-animate-disabled",na=[],ra={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Aa={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Or="__ng_removed";class Xo{get params(){return this.options.params}constructor(b,M=""){this.namespaceId=M;const U=b&&b.hasOwnProperty("value");if(this.value=function Co(re){return re??null}(U?b.value:b),U){const{value:oe,...pe}=b;this.options=pe}else this.options={};this.options.params||(this.options.params={})}absorbOptions(b){const M=b.params;if(M){const U=this.options.params;Object.keys(M).forEach(Q=>{null==U[Q]&&(U[Q]=M[Q])})}}}const Ro="void",Ps=new Xo(Ro);class ia{constructor(b,M,U){this.id=b,this.hostElement=M,this._engine=U,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+b,Qn(M,this._hostClassName)}listen(b,M,U,Q){if(!this._triggers.has(M))throw function hr(re,b){return new B.wOt(3302,!1)}();if(null==U||0==U.length)throw function vi(re){return new B.wOt(3303,!1)}();if(!function Pa(re){return"start"==re||"done"==re}(U))throw function zo(re,b){return new B.wOt(3400,!1)}();const oe=te(this._elementListeners,b,[]),pe={name:M,phase:U,callback:Q};oe.push(pe);const Ce=te(this._engine.statesByElement,b,new Map);return Ce.has(M)||(Qn(b,yt),Qn(b,yt+"-"+M),Ce.set(M,Ps)),()=>{this._engine.afterFlush(()=>{const Ke=oe.indexOf(pe);Ke>=0&&oe.splice(Ke,1),this._triggers.has(M)||Ce.delete(M)})}}register(b,M){return!this._triggers.has(b)&&(this._triggers.set(b,M),!0)}_getTrigger(b){const M=this._triggers.get(b);if(!M)throw function We(re){return new B.wOt(3401,!1)}();return M}trigger(b,M,U,Q=!0){const oe=this._getTrigger(M),pe=new xr(this.id,M,b);let Ce=this._engine.statesByElement.get(b);Ce||(Qn(b,yt),Qn(b,yt+"-"+M),this._engine.statesByElement.set(b,Ce=new Map));let Ke=Ce.get(M);const rt=new Xo(U,this.id);if(!(U&&U.hasOwnProperty("value"))&&Ke&&rt.absorbOptions(Ke.options),Ce.set(M,rt),Ke||(Ke=Ps),rt.value!==Ro&&Ke.value===rt.value){if(!function Bs(re,b){const M=Object.keys(re),U=Object.keys(b);if(M.length!=U.length)return!1;for(let Q=0;Q<M.length;Q++){const oe=M[Q];if(!b.hasOwnProperty(oe)||re[oe]!==b[oe])return!1}return!0}(Ke.params,rt.params)){const hn=[],In=oe.matchStyles(Ke.value,Ke.params,hn),wn=oe.matchStyles(rt.value,rt.params,hn);hn.length?this._engine.reportError(hn):this._engine.afterFlush(()=>{et(b,In),$n(b,wn)})}return}const Vn=te(this._engine.playersByElement,b,[]);Vn.forEach(hn=>{hn.namespaceId==this.id&&hn.triggerName==M&&hn.queued&&hn.destroy()});let yn=oe.matchTransition(Ke.value,rt.value,b,rt.params),bn=!1;if(!yn){if(!Q)return;yn=oe.fallbackTransition,bn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:b,triggerName:M,transition:yn,fromState:Ke,toState:rt,player:pe,isFallbackTransition:bn}),bn||(Qn(b,ta),pe.onStart(()=>{wi(b,ta)})),pe.onDone(()=>{let hn=this.players.indexOf(pe);hn>=0&&this.players.splice(hn,1);const In=this._engine.playersByElement.get(b);if(In){let wn=In.indexOf(pe);wn>=0&&In.splice(wn,1)}}),this.players.push(pe),Vn.push(pe),pe}deregister(b){this._triggers.delete(b),this._engine.statesByElement.forEach(M=>M.delete(b)),this._elementListeners.forEach((M,U)=>{this._elementListeners.set(U,M.filter(Q=>Q.name!=b))})}clearElementCache(b){this._engine.statesByElement.delete(b),this._elementListeners.delete(b);const M=this._engine.playersByElement.get(b);M&&(M.forEach(U=>U.destroy()),this._engine.playersByElement.delete(b))}_signalRemovalForInnerTriggers(b,M){const U=this._engine.driver.query(b,Pn,!0);U.forEach(Q=>{if(Q[Or])return;const oe=this._engine.fetchNamespacesByElement(Q);oe.size?oe.forEach(pe=>pe.triggerLeaveAnimation(Q,M,!1,!0)):this.clearElementCache(Q)}),this._engine.afterFlushAnimationsDone(()=>U.forEach(Q=>this.clearElementCache(Q)))}triggerLeaveAnimation(b,M,U,Q){const oe=this._engine.statesByElement.get(b),pe=new Map;if(oe){const Ce=[];if(oe.forEach((Ke,rt)=>{if(pe.set(rt,Ke.value),this._triggers.has(rt)){const Qt=this.trigger(b,rt,Ro,Q);Qt&&Ce.push(Qt)}}),Ce.length)return this._engine.markElementAsRemoved(this.id,b,!0,M,pe),U&&Ze(Ce).onDone(()=>this._engine.processLeaveNode(b)),!0}return!1}prepareLeaveAnimationListeners(b){const M=this._elementListeners.get(b),U=this._engine.statesByElement.get(b);if(M&&U){const Q=new Set;M.forEach(oe=>{const pe=oe.name;if(Q.has(pe))return;Q.add(pe);const Ke=this._triggers.get(pe).fallbackTransition,rt=U.get(pe)||Ps,Qt=new Xo(Ro),mt=new xr(this.id,pe,b);this._engine.totalQueuedPlayers++,this._queue.push({element:b,triggerName:pe,transition:Ke,fromState:rt,toState:Qt,player:mt,isFallbackTransition:!0})})}}removeNode(b,M){const U=this._engine;if(b.childElementCount&&this._signalRemovalForInnerTriggers(b,M),this.triggerLeaveAnimation(b,M,!0))return;let Q=!1;if(U.totalAnimations){const oe=U.players.length?U.playersByQueriedElement.get(b):[];if(oe&&oe.length)Q=!0;else{let pe=b;for(;pe=pe.parentNode;)if(U.statesByElement.get(pe)){Q=!0;break}}}if(this.prepareLeaveAnimationListeners(b),Q)U.markElementAsRemoved(this.id,b,!1,M);else{const oe=b[Or];(!oe||oe===ra)&&(U.afterFlush(()=>this.clearElementCache(b)),U.destroyInnerAnimations(b),U._onRemovalComplete(b,M))}}insertNode(b,M){Qn(b,this._hostClassName)}drainQueuedTransitions(b){const M=[];return this._queue.forEach(U=>{const Q=U.player;if(Q.destroyed)return;const oe=U.element,pe=this._elementListeners.get(oe);pe&&pe.forEach(Ce=>{if(Ce.name==U.triggerName){const Ke=en(oe,U.triggerName,U.fromState.value,U.toState.value);Ke._data=b,Mn(U.player,Ce.phase,Ke,Ce.callback)}}),Q.markedForDestroy?this._engine.afterFlush(()=>{Q.destroy()}):M.push(U)}),this._queue=[],M.sort((U,Q)=>{const oe=U.transition.ast.depCount,pe=Q.transition.ast.depCount;return 0==oe||0==pe?oe-pe:this._engine.driver.containsElement(U.element,Q.element)?1:-1})}destroy(b){this.players.forEach(M=>M.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,b)}}class fs{_onRemovalComplete(b,M){this.onRemovalComplete(b,M)}constructor(b,M,U){this.bodyNode=b,this.driver=M,this._normalizer=U,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(Q,oe)=>{}}get queuedPlayers(){const b=[];return this._namespaceList.forEach(M=>{M.players.forEach(U=>{U.queued&&b.push(U)})}),b}createNamespace(b,M){const U=new ia(b,M,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,M)?this._balanceNamespaceList(U,M):(this.newHostElements.set(M,U),this.collectEnterElement(M)),this._namespaceLookup[b]=U}_balanceNamespaceList(b,M){const U=this._namespaceList,Q=this.namespacesByHostElement;if(U.length-1>=0){let pe=!1,Ce=this.driver.getParentElement(M);for(;Ce;){const Ke=Q.get(Ce);if(Ke){const rt=U.indexOf(Ke);U.splice(rt+1,0,b),pe=!0;break}Ce=this.driver.getParentElement(Ce)}pe||U.unshift(b)}else U.push(b);return Q.set(M,b),b}register(b,M){let U=this._namespaceLookup[b];return U||(U=this.createNamespace(b,M)),U}registerTrigger(b,M,U){let Q=this._namespaceLookup[b];Q&&Q.register(M,U)&&this.totalAnimations++}destroy(b,M){b&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const U=this._fetchNamespace(b);this.namespacesByHostElement.delete(U.hostElement);const Q=this._namespaceList.indexOf(U);Q>=0&&this._namespaceList.splice(Q,1),U.destroy(M),delete this._namespaceLookup[b]}))}_fetchNamespace(b){return this._namespaceLookup[b]}fetchNamespacesByElement(b){const M=new Set,U=this.statesByElement.get(b);if(U)for(let Q of U.values())if(Q.namespaceId){const oe=this._fetchNamespace(Q.namespaceId);oe&&M.add(oe)}return M}trigger(b,M,U,Q){if(Jo(M)){const oe=this._fetchNamespace(b);if(oe)return oe.trigger(M,U,Q),!0}return!1}insertNode(b,M,U,Q){if(!Jo(M))return;const oe=M[Or];if(oe&&oe.setForRemoval){oe.setForRemoval=!1,oe.setForMove=!0;const pe=this.collectedLeaveElements.indexOf(M);pe>=0&&this.collectedLeaveElements.splice(pe,1)}if(b){const pe=this._fetchNamespace(b);pe&&pe.insertNode(M,U)}Q&&this.collectEnterElement(M)}collectEnterElement(b){this.collectedEnterElements.push(b)}markElementAsDisabled(b,M){M?this.disabledNodes.has(b)||(this.disabledNodes.add(b),Qn(b,As)):this.disabledNodes.has(b)&&(this.disabledNodes.delete(b),wi(b,As))}removeNode(b,M,U){if(Jo(M)){const Q=b?this._fetchNamespace(b):null;Q?Q.removeNode(M,U):this.markElementAsRemoved(b,M,!1,U);const oe=this.namespacesByHostElement.get(M);oe&&oe.id!==b&&oe.removeNode(M,U)}else this._onRemovalComplete(M,U)}markElementAsRemoved(b,M,U,Q,oe){this.collectedLeaveElements.push(M),M[Or]={namespaceId:b,setForRemoval:Q,hasAnimation:U,removedBeforeQueried:!1,previousTriggersValues:oe}}listen(b,M,U,Q,oe){return Jo(M)?this._fetchNamespace(b).listen(M,U,Q,oe):()=>{}}_buildInstruction(b,M,U,Q,oe){return b.transition.build(this.driver,b.element,b.fromState.value,b.toState.value,U,Q,b.fromState.options,b.toState.options,M,oe)}destroyInnerAnimations(b){let M=this.driver.query(b,Pn,!0);M.forEach(U=>this.destroyActiveAnimationsForElement(U)),0!=this.playersByQueriedElement.size&&(M=this.driver.query(b,Jn,!0),M.forEach(U=>this.finishActiveQueriedAnimationOnElement(U)))}destroyActiveAnimationsForElement(b){const M=this.playersByElement.get(b);M&&M.forEach(U=>{U.queued?U.markedForDestroy=!0:U.destroy()})}finishActiveQueriedAnimationOnElement(b){const M=this.playersByQueriedElement.get(b);M&&M.forEach(U=>U.finish())}whenRenderingDone(){return new Promise(b=>{if(this.players.length)return Ze(this.players).onDone(()=>b());b()})}processLeaveNode(b){const M=b[Or];if(M&&M.setForRemoval){if(b[Or]=ra,M.namespaceId){this.destroyInnerAnimations(b);const U=this._fetchNamespace(M.namespaceId);U&&U.clearElementCache(b)}this._onRemovalComplete(b,M.setForRemoval)}b.classList?.contains(As)&&this.markElementAsDisabled(b,!1),this.driver.query(b,".ng-animate-disabled",!0).forEach(U=>{this.markElementAsDisabled(U,!1)})}flush(b=-1){let M=[];if(this.newHostElements.size&&(this.newHostElements.forEach((U,Q)=>this._balanceNamespaceList(U,Q)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let U=0;U<this.collectedEnterElements.length;U++)Qn(this.collectedEnterElements[U],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const U=[];try{M=this._flushAnimations(U,b)}finally{for(let Q=0;Q<U.length;Q++)U[Q]()}}else for(let U=0;U<this.collectedLeaveElements.length;U++)this.processLeaveNode(this.collectedLeaveElements[U]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(U=>U()),this._flushFns=[],this._whenQuietFns.length){const U=this._whenQuietFns;this._whenQuietFns=[],M.length?Ze(M).onDone(()=>{U.forEach(Q=>Q())}):U.forEach(Q=>Q())}}reportError(b){throw function Qe(re){return new B.wOt(3402,!1)}()}_flushAnimations(b,M){const U=new Zi,Q=[],oe=new Map,pe=[],Ce=new Map,Ke=new Map,rt=new Map,Qt=new Set;this.disabledNodes.forEach(rn=>{Qt.add(rn);const jt=this.driver.query(rn,".ng-animate-queued",!0);for(let Dn=0;Dn<jt.length;Dn++)Qt.add(jt[Dn])});const mt=this.bodyNode,Vn=Array.from(this.statesByElement.keys()),yn=Jr(Vn,this.collectedEnterElements),bn=new Map;let hn=0;yn.forEach((rn,jt)=>{const Dn=zr+hn++;bn.set(jt,Dn),rn.forEach(or=>Qn(or,Dn))});const In=[],wn=new Set,Fr=new Set;for(let rn=0;rn<this.collectedLeaveElements.length;rn++){const jt=this.collectedLeaveElements[rn],Dn=jt[Or];Dn&&Dn.setForRemoval&&(In.push(jt),wn.add(jt),Dn.hasAnimation?this.driver.query(jt,".ng-star-inserted",!0).forEach(or=>wn.add(or)):Fr.add(jt))}const $i=new Map,Ti=Jr(Vn,Array.from(wn));Ti.forEach((rn,jt)=>{const Dn=Vr+hn++;$i.set(jt,Dn),rn.forEach(or=>Qn(or,Dn))}),b.push(()=>{yn.forEach((rn,jt)=>{const Dn=bn.get(jt);rn.forEach(or=>wi(or,Dn))}),Ti.forEach((rn,jt)=>{const Dn=$i.get(jt);rn.forEach(or=>wi(or,Dn))}),In.forEach(rn=>{this.processLeaveNode(rn)})});const ts=[],H=[];for(let rn=this._namespaceList.length-1;rn>=0;rn--)this._namespaceList[rn].drainQueuedTransitions(M).forEach(Dn=>{const or=Dn.player,Wr=Dn.element;if(ts.push(or),this.collectedEnterElements.length){const pi=Wr[Or];if(pi&&pi.setForMove){if(pi.previousTriggersValues&&pi.previousTriggersValues.has(Dn.triggerName)){const xo=pi.previousTriggersValues.get(Dn.triggerName),vn=this.statesByElement.get(Dn.element);if(vn&&vn.has(Dn.triggerName)){const rs=vn.get(Dn.triggerName);rs.value=xo,vn.set(Dn.triggerName,rs)}}return void or.destroy()}}const ho=!mt||!this.driver.containsElement(mt,Wr),ro=$i.get(Wr),No=bn.get(Wr),br=this._buildInstruction(Dn,U,No,ro,ho);if(br.errors&&br.errors.length)return void H.push(br);if(ho)return or.onStart(()=>et(Wr,br.fromStyles)),or.onDestroy(()=>$n(Wr,br.toStyles)),void Q.push(or);if(Dn.isFallbackTransition)return or.onStart(()=>et(Wr,br.fromStyles)),or.onDestroy(()=>$n(Wr,br.toStyles)),void Q.push(or);const To=[];br.timelines.forEach(pi=>{pi.stretchStartingKeyframe=!0,this.disabledNodes.has(pi.element)||To.push(pi)}),br.timelines=To,U.append(Wr,br.timelines),pe.push({instruction:br,player:or,element:Wr}),br.queriedElements.forEach(pi=>te(Ce,pi,[]).push(or)),br.preStyleProps.forEach((pi,xo)=>{if(pi.size){let vn=Ke.get(xo);vn||Ke.set(xo,vn=new Set),pi.forEach((rs,Ms)=>vn.add(Ms))}}),br.postStyleProps.forEach((pi,xo)=>{let vn=rt.get(xo);vn||rt.set(xo,vn=new Set),pi.forEach((rs,Ms)=>vn.add(Ms))})});if(H.length){const rn=[];H.forEach(jt=>{rn.push(function lt(re,b){return new B.wOt(3505,!1)}())}),ts.forEach(jt=>jt.destroy()),this.reportError(rn)}const $=new Map,R=new Map;pe.forEach(rn=>{const jt=rn.element;U.has(jt)&&(R.set(jt,jt),this._beforeAnimationBuild(rn.player.namespaceId,rn.instruction,$))}),Q.forEach(rn=>{const jt=rn.element;this._getPreviousPlayers(jt,!1,rn.namespaceId,rn.triggerName,null).forEach(or=>{te($,jt,[]).push(or),or.destroy()})});const Y=In.filter(rn=>kr(rn,Ke,rt)),he=new Map;ji(he,this.driver,Fr,rt,T.kp).forEach(rn=>{kr(rn,Ke,rt)&&Y.push(rn)});const An=new Map;yn.forEach((rn,jt)=>{ji(An,this.driver,new Set(rn),Ke,T.FX)}),Y.forEach(rn=>{const jt=he.get(rn),Dn=An.get(rn);he.set(rn,new Map([...jt?.entries()??[],...Dn?.entries()??[]]))});const bi=[],ns=[],wo={};pe.forEach(rn=>{const{element:jt,player:Dn,instruction:or}=rn;if(U.has(jt)){if(Qt.has(jt))return Dn.onDestroy(()=>$n(jt,or.toStyles)),Dn.disabled=!0,Dn.overrideTotalTime(or.totalTime),void Q.push(Dn);let Wr=wo;if(R.size>1){let ro=jt;const No=[];for(;ro=ro.parentNode;){const br=R.get(ro);if(br){Wr=br;break}No.push(ro)}No.forEach(br=>R.set(br,Wr))}const ho=this._buildAnimation(Dn.namespaceId,or,$,oe,An,he);if(Dn.setRealPlayer(ho),Wr===wo)bi.push(Dn);else{const ro=this.playersByElement.get(Wr);ro&&ro.length&&(Dn.parentPlayer=Ze(ro)),Q.push(Dn)}}else et(jt,or.fromStyles),Dn.onDestroy(()=>$n(jt,or.toStyles)),ns.push(Dn),Qt.has(jt)&&Q.push(Dn)}),ns.forEach(rn=>{const jt=oe.get(rn.element);if(jt&&jt.length){const Dn=Ze(jt);rn.setRealPlayer(Dn)}}),Q.forEach(rn=>{rn.parentPlayer?rn.syncPlayerEvents(rn.parentPlayer):rn.destroy()});for(let rn=0;rn<In.length;rn++){const jt=In[rn],Dn=jt[Or];if(wi(jt,Vr),Dn&&Dn.hasAnimation)continue;let or=[];if(Ce.size){let ho=Ce.get(jt);ho&&ho.length&&or.push(...ho);let ro=this.driver.query(jt,Jn,!0);for(let No=0;No<ro.length;No++){let br=Ce.get(ro[No]);br&&br.length&&or.push(...br)}}const Wr=or.filter(ho=>!ho.destroyed);Wr.length?Zo(this,jt,Wr):this.processLeaveNode(jt)}return In.length=0,bi.forEach(rn=>{this.players.push(rn),rn.onDone(()=>{rn.destroy();const jt=this.players.indexOf(rn);this.players.splice(jt,1)}),rn.play()}),bi}afterFlush(b){this._flushFns.push(b)}afterFlushAnimationsDone(b){this._whenQuietFns.push(b)}_getPreviousPlayers(b,M,U,Q,oe){let pe=[];if(M){const Ce=this.playersByQueriedElement.get(b);Ce&&(pe=Ce)}else{const Ce=this.playersByElement.get(b);if(Ce){const Ke=!oe||oe==Ro;Ce.forEach(rt=>{rt.queued||!Ke&&rt.triggerName!=Q||pe.push(rt)})}}return(U||Q)&&(pe=pe.filter(Ce=>!(U&&U!=Ce.namespaceId||Q&&Q!=Ce.triggerName))),pe}_beforeAnimationBuild(b,M,U){const oe=M.element,pe=M.isRemovalTransition?void 0:b,Ce=M.isRemovalTransition?void 0:M.triggerName;for(const Ke of M.timelines){const rt=Ke.element,Qt=rt!==oe,mt=te(U,rt,[]);this._getPreviousPlayers(rt,Qt,pe,Ce,M.toState).forEach(yn=>{const bn=yn.getRealPlayer();bn.beforeDestroy&&bn.beforeDestroy(),yn.destroy(),mt.push(yn)})}et(oe,M.fromStyles)}_buildAnimation(b,M,U,Q,oe,pe){const Ce=M.triggerName,Ke=M.element,rt=[],Qt=new Set,mt=new Set,Vn=M.timelines.map(bn=>{const hn=bn.element;Qt.add(hn);const In=hn[Or];if(In&&In.removedBeforeQueried)return new T.sf(bn.duration,bn.delay);const wn=hn!==Ke,Fr=function Ni(re){const b=[];return Ds(re,b),b}((U.get(hn)||na).map($=>$.getRealPlayer())).filter($=>!!$.element&&$.element===hn),$i=oe.get(hn),Ti=pe.get(hn),ts=we(this._normalizer,bn.keyframes,$i,Ti),H=this._buildPlayer(bn,ts,Fr);if(bn.subTimeline&&Q&&mt.add(hn),wn){const $=new xr(b,Ce,hn);$.setRealPlayer(H),rt.push($)}return H});rt.forEach(bn=>{te(this.playersByQueriedElement,bn.element,[]).push(bn),bn.onDone(()=>function to(re,b,M){let U=re.get(b);if(U){if(U.length){const Q=U.indexOf(M);U.splice(Q,1)}0==U.length&&re.delete(b)}return U}(this.playersByQueriedElement,bn.element,bn))}),Qt.forEach(bn=>Qn(bn,mr));const yn=Ze(Vn);return yn.onDestroy(()=>{Qt.forEach(bn=>wi(bn,mr)),$n(Ke,M.toStyles)}),mt.forEach(bn=>{te(Q,bn,[]).push(yn)}),yn}_buildPlayer(b,M,U){return M.length>0?this.driver.animate(b.element,M,b.duration,b.delay,b.easing,U):new T.sf(b.duration,b.delay)}}class xr{constructor(b,M,U){this.namespaceId=b,this.triggerName=M,this.element=U,this._player=new T.sf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(b){this._containsRealPlayer||(this._player=b,this._queuedCallbacks.forEach((M,U)=>{M.forEach(Q=>Mn(b,U,void 0,Q))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(b.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(b){this.totalTime=b}syncPlayerEvents(b){const M=this._player;M.triggerCallback&&b.onStart(()=>M.triggerCallback("start")),b.onDone(()=>this.finish()),b.onDestroy(()=>this.destroy())}_queueEvent(b,M){te(this._queuedCallbacks,b,[]).push(M)}onDone(b){this.queued&&this._queueEvent("done",b),this._player.onDone(b)}onStart(b){this.queued&&this._queueEvent("start",b),this._player.onStart(b)}onDestroy(b){this.queued&&this._queueEvent("destroy",b),this._player.onDestroy(b)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(b){this.queued||this._player.setPosition(b)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(b){const M=this._player;M.triggerCallback&&M.triggerCallback(b)}}function Jo(re){return re&&1===re.nodeType}function ur(re,b){const M=re.style.display;return re.style.display=b??"none",M}function ji(re,b,M,U,Q){const oe=[];M.forEach(Ke=>oe.push(ur(Ke)));const pe=[];U.forEach((Ke,rt)=>{const Qt=new Map;Ke.forEach(mt=>{const Vn=b.computeStyle(rt,mt,Q);Qt.set(mt,Vn),(!Vn||0==Vn.length)&&(rt[Or]=Aa,pe.push(rt))}),re.set(rt,Qt)});let Ce=0;return M.forEach(Ke=>ur(Ke,oe[Ce++])),pe}function Jr(re,b){const M=new Map;if(re.forEach(Ce=>M.set(Ce,[])),0==b.length)return M;const Q=new Set(b),oe=new Map;function pe(Ce){if(!Ce)return 1;let Ke=oe.get(Ce);if(Ke)return Ke;const rt=Ce.parentNode;return Ke=M.has(rt)?rt:Q.has(rt)?1:pe(rt),oe.set(Ce,Ke),Ke}return b.forEach(Ce=>{const Ke=pe(Ce);1!==Ke&&M.get(Ke).push(Ce)}),M}function Qn(re,b){re.classList?.add(b)}function wi(re,b){re.classList?.remove(b)}function Zo(re,b,M){Ze(M).onDone(()=>re.processLeaveNode(b))}function Ds(re,b){for(let M=0;M<re.length;M++){const U=re[M];U instanceof T.ui?Ds(U.players,b):b.push(U)}}function kr(re,b,M){const U=M.get(re);if(!U)return!1;let Q=b.get(re);return Q?U.forEach(oe=>Q.add(oe)):b.set(re,U),M.delete(re),!0}class Da{constructor(b,M,U){this._driver=M,this._normalizer=U,this._triggerCache={},this.onRemovalComplete=(Q,oe)=>{},this._transitionEngine=new fs(b.body,M,U),this._timelineEngine=new ba(b.body,M,U),this._transitionEngine.onRemovalComplete=(Q,oe)=>this.onRemovalComplete(Q,oe)}registerTrigger(b,M,U,Q,oe){const pe=b+"-"+Q;let Ce=this._triggerCache[pe];if(!Ce){const Ke=[],Qt=ln(this._driver,oe,Ke,[]);if(Ke.length)throw function it(re,b){return new B.wOt(3404,!1)}();Ce=function Sc(re,b,M){return new Ta(re,b,M)}(Q,Qt,this._normalizer),this._triggerCache[pe]=Ce}this._transitionEngine.registerTrigger(M,Q,Ce)}register(b,M){this._transitionEngine.register(b,M)}destroy(b,M){this._transitionEngine.destroy(b,M)}onInsert(b,M,U,Q){this._transitionEngine.insertNode(b,M,U,Q)}onRemove(b,M,U){this._transitionEngine.removeNode(b,M,U)}disableAnimations(b,M){this._transitionEngine.markElementAsDisabled(b,M)}process(b,M,U,Q){if("@"==U.charAt(0)){const[oe,pe]=fr(U);this._timelineEngine.command(oe,M,pe,Q)}else this._transitionEngine.trigger(b,M,U,Q)}listen(b,M,U,Q,oe){if("@"==U.charAt(0)){const[pe,Ce]=fr(U);return this._timelineEngine.listen(pe,M,Ce,oe)}return this._transitionEngine.listen(b,M,U,Q,oe)}flush(b=-1){this._transitionEngine.flush(b)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(b){this._transitionEngine.afterFlushAnimationsDone(b)}}class Mt{static#e=this.initialStylesByElement=new WeakMap;constructor(b,M,U){this._element=b,this._startStyles=M,this._endStyles=U,this._state=0;let Q=Mt.initialStylesByElement.get(b);Q||Mt.initialStylesByElement.set(b,Q=new Map),this._initialStyles=Q}start(){this._state<1&&(this._startStyles&&$n(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&($n(this._element,this._initialStyles),this._endStyles&&($n(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Mt.initialStylesByElement.delete(this._element),this._startStyles&&(et(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(et(this._element,this._endStyles),this._endStyles=null),$n(this._element,this._initialStyles),this._state=3)}}function Ur(re){let b=null;return re.forEach((M,U)=>{(function fi(re){return"display"===re||"position"===re})(U)&&(b=b||new Map,b.set(U,M))}),b}class es{constructor(b,M,U,Q){this.element=b,this.keyframes=M,this.options=U,this._specialStyles=Q,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=U.duration,this._delay=U.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(b=>b()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const b=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,b,this.options),this._finalKeyframe=b.length?b[b.length-1]:new Map;const M=()=>this._onFinish();this.domPlayer.addEventListener("finish",M),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",M)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(b){const M=[];return b.forEach(U=>{M.push(Object.fromEntries(U))}),M}_triggerWebAnimation(b,M,U){return b.animate(this._convertKeyframesToObject(M),U)}onStart(b){this._originalOnStartFns.push(b),this._onStartFns.push(b)}onDone(b){this._originalOnDoneFns.push(b),this._onDoneFns.push(b)}onDestroy(b){this._onDestroyFns.push(b)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(b=>b()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(b=>b()),this._onDestroyFns=[])}setPosition(b){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=b*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const b=new Map;this.hasStarted()&&this._finalKeyframe.forEach((U,Q)=>{"offset"!==Q&&b.set(Q,this._finished?U:kn(this.element,Q))}),this.currentSnapshot=b}triggerCallback(b){const M="start"===b?this._onStartFns:this._onDoneFns;M.forEach(U=>U()),M.length=0}}class js{validateStyleProperty(b){return!0}validateAnimatableStyleProperty(b){return!0}containsElement(b,M){return gr(b,M)}getParentElement(b){return jn(b)}query(b,M,U){return Yr(b,M,U)}computeStyle(b,M,U){return kn(b,M)}animate(b,M,U,Q,oe,pe=[]){const Ke={duration:U,delay:Q,fill:0==Q?"both":"forwards"};oe&&(Ke.easing=oe);const rt=new Map,Qt=pe.filter(yn=>yn instanceof es);Ne(U,Q)&&Qt.forEach(yn=>{yn.currentSnapshot.forEach((bn,hn)=>rt.set(hn,bn))});let mt=Ge(M).map(yn=>new Map(yn));mt=function Ft(re,b,M){if(M.size&&b.length){let U=b[0],Q=[];if(M.forEach((oe,pe)=>{U.has(pe)||Q.push(pe),U.set(pe,oe)}),Q.length)for(let oe=1;oe<b.length;oe++){let pe=b[oe];Q.forEach(Ce=>pe.set(Ce,kn(re,Ce)))}}return b}(b,mt,rt);const Vn=function no(re,b){let M=null,U=null;return Array.isArray(b)&&b.length?(M=Ur(b[0]),b.length>1&&(U=Ur(b[b.length-1]))):b instanceof Map&&(M=Ur(b)),M||U?new Mt(re,M,U):null}(b,mt);return new es(b,mt,Ke,Vn)}}function Io(re,b){return"noop"===re?new Da(b,new Ei,new xn):new Da(b,new js,new On)}class ps{constructor(b,M){this._driver=b;const U=[],oe=ln(b,M,U,[]);if(U.length)throw function At(re){return new B.wOt(3500,!1)}();this._animationAst=oe}buildTimelines(b,M,U,Q,oe){const pe=Array.isArray(M)?st(M):M,Ce=Array.isArray(U)?st(U):U,Ke=[];oe=oe||new Zi;const rt=Qo(this._driver,b,this._animationAst,zr,Vr,pe,Ce,Q,oe,Ke);if(Ke.length)throw function Gt(re){return new B.wOt(3501,!1)}();return rt}}const xi="@.disabled";class ni{constructor(b,M,U,Q){this.namespaceId=b,this.delegate=M,this.engine=U,this._onDestroy=Q,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(b){this.delegate.destroyNode?.(b)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(b,M){return this.delegate.createElement(b,M)}createComment(b){return this.delegate.createComment(b)}createText(b){return this.delegate.createText(b)}appendChild(b,M){this.delegate.appendChild(b,M),this.engine.onInsert(this.namespaceId,M,b,!1)}insertBefore(b,M,U,Q=!0){this.delegate.insertBefore(b,M,U),this.engine.onInsert(this.namespaceId,M,b,Q)}removeChild(b,M,U){this.engine.onRemove(this.namespaceId,M,this.delegate)}selectRootElement(b,M){return this.delegate.selectRootElement(b,M)}parentNode(b){return this.delegate.parentNode(b)}nextSibling(b){return this.delegate.nextSibling(b)}setAttribute(b,M,U,Q){this.delegate.setAttribute(b,M,U,Q)}removeAttribute(b,M,U){this.delegate.removeAttribute(b,M,U)}addClass(b,M){this.delegate.addClass(b,M)}removeClass(b,M){this.delegate.removeClass(b,M)}setStyle(b,M,U,Q){this.delegate.setStyle(b,M,U,Q)}removeStyle(b,M,U){this.delegate.removeStyle(b,M,U)}setProperty(b,M,U){"@"==M.charAt(0)&&M==xi?this.disableAnimations(b,!!U):this.delegate.setProperty(b,M,U)}setValue(b,M){this.delegate.setValue(b,M)}listen(b,M,U){return this.delegate.listen(b,M,U)}disableAnimations(b,M){this.engine.disableAnimations(b,M)}}class ri extends ni{constructor(b,M,U,Q,oe){super(M,U,Q,oe),this.factory=b,this.namespaceId=M}setProperty(b,M,U){"@"==M.charAt(0)?"."==M.charAt(1)&&M==xi?this.disableAnimations(b,U=void 0===U||!!U):this.engine.process(this.namespaceId,b,M.slice(1),U):this.delegate.setProperty(b,M,U)}listen(b,M,U){if("@"==M.charAt(0)){const Q=function Ss(re){switch(re){case"body":return document.body;case"document":return document;case"window":return window;default:return re}}(b);let oe=M.slice(1),pe="";return"@"!=oe.charAt(0)&&([oe,pe]=function uo(re){const b=re.indexOf(".");return[re.substring(0,b),re.slice(b+1)]}(oe)),this.engine.listen(this.namespaceId,Q,oe,pe,Ce=>{this.factory.scheduleListenerCallback(Ce._data||-1,U,Ce)})}return this.delegate.listen(b,M,U)}}class gs{constructor(b,M,U){this.delegate=b,this.engine=M,this._zone=U,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,M.onRemovalComplete=(Q,oe)=>{const pe=oe?.parentNode(Q);pe&&oe.removeChild(pe,Q)}}createRenderer(b,M){const Q=this.delegate.createRenderer(b,M);if(!b||!M?.data?.animation){const rt=this._rendererCache;let Qt=rt.get(Q);return Qt||(Qt=new ni("",Q,this.engine,()=>rt.delete(Q)),rt.set(Q,Qt)),Qt}const oe=M.id,pe=M.id+"-"+this._currentId;this._currentId++,this.engine.register(pe,b);const Ce=rt=>{Array.isArray(rt)?rt.forEach(Ce):this.engine.registerTrigger(oe,pe,b,rt.name,rt)};return M.data.animation.forEach(Ce),new ri(this,pe,Q,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(b,M,U){if(b>=0&&b<this._microtaskId)return void this._zone.run(()=>M(U));const Q=this._animationCallbacksBuffer;0==Q.length&&queueMicrotask(()=>{this._zone.run(()=>{Q.forEach(oe=>{const[pe,Ce]=oe;pe(Ce)}),this._animationCallbacksBuffer=[]})}),Q.push([M,U])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}},177:(fn,ot,J)=>{J.d(ot,{AJ:()=>Co,Jj:()=>wa,MD:()=>to,N0:()=>Ni,QT:()=>m,QX:()=>Or,Sm:()=>nn,Sq:()=>qn,VF:()=>De,Vy:()=>ur,Xr:()=>Jr,YU:()=>nr,ZD:()=>ce,_b:()=>Cn,aZ:()=>sn,bT:()=>Zi,fw:()=>Zt,hb:()=>bt,hj:()=>ht,qQ:()=>je,vh:()=>bs});var T=J(3953);let B=null;function m(){return B}function ce(D){B??=D}class De{}const je=new T.nKC("");let Et=(()=>{class D{historyGo(k){throw new Error("")}static#e=this.\u0275fac=function(z){return new(z||D)};static#t=this.\u0275prov=T.jDH({token:D,factory:()=>(0,T.WQX)(Ie),providedIn:"platform"})}return D})();const ht=new T.nKC("");let Ie=(()=>{class D extends Et{constructor(){super(),this._doc=(0,T.WQX)(je),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return m().getBaseHref(this._doc)}onPopState(k){const z=m().getGlobalEventTarget(this._doc,"window");return z.addEventListener("popstate",k,!1),()=>z.removeEventListener("popstate",k)}onHashChange(k){const z=m().getGlobalEventTarget(this._doc,"window");return z.addEventListener("hashchange",k,!1),()=>z.removeEventListener("hashchange",k)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(k){this._location.pathname=k}pushState(k,z,le){this._history.pushState(k,z,le)}replaceState(k,z,le){this._history.replaceState(k,z,le)}forward(){this._history.forward()}back(){this._history.back()}historyGo(k=0){this._history.go(k)}getState(){return this._history.state}static#e=this.\u0275fac=function(z){return new(z||D)};static#t=this.\u0275prov=T.jDH({token:D,factory:()=>new D,providedIn:"platform"})}return D})();function Ee(D,q){if(0==D.length)return q;if(0==q.length)return D;let k=0;return D.endsWith("/")&&k++,q.startsWith("/")&&k++,2==k?D+q.substring(1):1==k?D+q:D+"/"+q}function Xe(D){const q=D.match(/#|\?|$/),k=q&&q.index||D.length;return D.slice(0,k-("/"===D[k-1]?1:0))+D.slice(k)}function Ot(D){return D&&"?"!==D[0]?"?"+D:D}let bt=(()=>{class D{historyGo(k){throw new Error("")}static#e=this.\u0275fac=function(z){return new(z||D)};static#t=this.\u0275prov=T.jDH({token:D,factory:()=>(0,T.WQX)(nn),providedIn:"root"})}return D})();const zt=new T.nKC("");let nn=(()=>{class D extends bt{constructor(k,z){super(),this._platformLocation=k,this._removeListenerFns=[],this._baseHref=z??this._platformLocation.getBaseHrefFromDOM()??(0,T.WQX)(je).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}prepareExternalUrl(k){return Ee(this._baseHref,k)}path(k=!1){const z=this._platformLocation.pathname+Ot(this._platformLocation.search),le=this._platformLocation.hash;return le&&k?`${z}${le}`:z}pushState(k,z,le,Ye){const wt=this.prepareExternalUrl(le+Ot(Ye));this._platformLocation.pushState(k,z,wt)}replaceState(k,z,le,Ye){const wt=this.prepareExternalUrl(le+Ot(Ye));this._platformLocation.replaceState(k,z,wt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(k=0){this._platformLocation.historyGo?.(k)}static#e=this.\u0275fac=function(z){return new(z||D)(T.KVO(Et),T.KVO(zt,8))};static#t=this.\u0275prov=T.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})(),Zt=(()=>{class D extends bt{constructor(k,z){super(),this._platformLocation=k,this._baseHref="",this._removeListenerFns=[],null!=z&&(this._baseHref=z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}path(k=!1){const z=this._platformLocation.hash??"#";return z.length>0?z.substring(1):z}prepareExternalUrl(k){const z=Ee(this._baseHref,k);return z.length>0?"#"+z:z}pushState(k,z,le,Ye){let wt=this.prepareExternalUrl(le+Ot(Ye));0==wt.length&&(wt=this._platformLocation.pathname),this._platformLocation.pushState(k,z,wt)}replaceState(k,z,le,Ye){let wt=this.prepareExternalUrl(le+Ot(Ye));0==wt.length&&(wt=this._platformLocation.pathname),this._platformLocation.replaceState(k,z,wt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(k=0){this._platformLocation.historyGo?.(k)}static#e=this.\u0275fac=function(z){return new(z||D)(T.KVO(Et),T.KVO(zt,8))};static#t=this.\u0275prov=T.jDH({token:D,factory:D.\u0275fac})}return D})(),sn=(()=>{class D{constructor(k){this._subject=new T.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=k;const z=this._locationStrategy.getBaseHref();this._basePath=function It(D){if(new RegExp("^(https?:)?//").test(D)){const[,k]=D.split(/\/\/[^\/]+/);return k}return D}(Xe(Ct(z))),this._locationStrategy.onPopState(le=>{this._subject.emit({url:this.path(!0),pop:!0,state:le.state,type:le.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(k=!1){return this.normalize(this._locationStrategy.path(k))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(k,z=""){return this.path()==this.normalize(k+Ot(z))}normalize(k){return D.stripTrailingSlash(function pr(D,q){if(!D||!q.startsWith(D))return q;const k=q.substring(D.length);return""===k||["/",";","?","#"].includes(k[0])?k:q}(this._basePath,Ct(k)))}prepareExternalUrl(k){return k&&"/"!==k[0]&&(k="/"+k),this._locationStrategy.prepareExternalUrl(k)}go(k,z="",le=null){this._locationStrategy.pushState(le,"",k,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Ot(z)),le)}replaceState(k,z="",le=null){this._locationStrategy.replaceState(le,"",k,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Ot(z)),le)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(k=0){this._locationStrategy.historyGo?.(k)}onUrlChange(k){return this._urlChangeListeners.push(k),this._urlChangeSubscription??=this.subscribe(z=>{this._notifyUrlChangeListeners(z.url,z.state)}),()=>{const z=this._urlChangeListeners.indexOf(k);this._urlChangeListeners.splice(z,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(k="",z){this._urlChangeListeners.forEach(le=>le(k,z))}subscribe(k,z,le){return this._subject.subscribe({next:k,error:z,complete:le})}static#e=this.normalizeQueryParams=Ot;static#t=this.joinWithSlash=Ee;static#n=this.stripTrailingSlash=Xe;static#r=this.\u0275fac=function(z){return new(z||D)(T.KVO(bt))};static#i=this.\u0275prov=T.jDH({token:D,factory:()=>function tr(){return new sn((0,T.KVO)(bt))}(),providedIn:"root"})}return D})();function Ct(D){return D.replace(/\/index.html$/,"")}var Yt=function(D){return D[D.Decimal=0]="Decimal",D[D.Percent=1]="Percent",D[D.Currency=2]="Currency",D[D.Scientific=3]="Scientific",D}(Yt||{}),Gt=function(D){return D[D.Format=0]="Format",D[D.Standalone=1]="Standalone",D}(Gt||{}),it=function(D){return D[D.Narrow=0]="Narrow",D[D.Abbreviated=1]="Abbreviated",D[D.Wide=2]="Wide",D[D.Short=3]="Short",D}(it||{}),_e=function(D){return D[D.Short=0]="Short",D[D.Medium=1]="Medium",D[D.Long=2]="Long",D[D.Full=3]="Full",D}(_e||{});const Ut={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function at(D,q){return Wn((0,T.H5H)(D)[T.KH2.DateFormat],q)}function lt(D,q){return Wn((0,T.H5H)(D)[T.KH2.TimeFormat],q)}function Pt(D,q){return Wn((0,T.H5H)(D)[T.KH2.DateTimeFormat],q)}function Ze(D,q){const k=(0,T.H5H)(D),z=k[T.KH2.NumberSymbols][q];if(typeof z>"u"){if(q===Ut.CurrencyDecimal)return k[T.KH2.NumberSymbols][Ut.Decimal];if(q===Ut.CurrencyGroup)return k[T.KH2.NumberSymbols][Ut.Group]}return z}function Qr(D){if(!D[T.KH2.ExtraData])throw new Error(`Missing extra locale data for the locale "${D[T.KH2.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Wn(D,q){for(let k=q;k>-1;k--)if(typeof D[k]<"u")return D[k];throw new Error("Locale data API: locale data undefined")}function mn(D){const[q,k]=D.split(":");return{hours:+q,minutes:+k}}const Yr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,lo={},Ei=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Bt=function(D){return D[D.Short=0]="Short",D[D.ShortGMT=1]="ShortGMT",D[D.Long=2]="Long",D[D.Extended=3]="Extended",D}(Bt||{}),Xn=function(D){return D[D.FullYear=0]="FullYear",D[D.Month=1]="Month",D[D.Date=2]="Date",D[D.Hours=3]="Hours",D[D.Minutes=4]="Minutes",D[D.Seconds=5]="Seconds",D[D.FractionalSeconds=6]="FractionalSeconds",D[D.Day=7]="Day",D}(Xn||{}),xn=function(D){return D[D.DayPeriods=0]="DayPeriods",D[D.Days=1]="Days",D[D.Months=2]="Months",D[D.Eras=3]="Eras",D}(xn||{});function ir(D,q,k,z){let le=function ae(D){if(tt(D))return D;if("number"==typeof D&&!isNaN(D))return new Date(D);if("string"==typeof D){if(D=D.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(D)){const[le,Ye=1,wt=1]=D.split("-").map(an=>+an);return Nr(le,Ye-1,wt)}const k=parseFloat(D);if(!isNaN(D-k))return new Date(k);let z;if(z=D.match(Yr))return function ve(D){const q=new Date(0);let k=0,z=0;const le=D[8]?q.setUTCFullYear:q.setFullYear,Ye=D[8]?q.setUTCHours:q.setHours;D[9]&&(k=Number(D[9]+D[10]),z=Number(D[9]+D[11])),le.call(q,Number(D[1]),Number(D[2])-1,Number(D[3]));const wt=Number(D[4]||0)-k,an=Number(D[5]||0)-z,on=Number(D[6]||0),Lr=Math.floor(1e3*parseFloat("0."+(D[7]||0)));return Ye.call(q,wt,an,on,Lr),q}(z)}const q=new Date(D);if(!tt(q))throw new Error(`Unable to convert "${D}" into a date`);return q}(D);q=Dr(k,q)||q;let an,wt=[];for(;q;){if(an=Ei.exec(q),!an){wt.push(q);break}{wt=wt.concat(an.slice(1));const Pr=wt.pop();if(!Pr)break;q=Pr}}let on=le.getTimezoneOffset();z&&(on=Me(z,on),le=function se(D,q,k){const z=k?-1:1,le=D.getTimezoneOffset();return function gt(D,q){return(D=new Date(D.getTime())).setMinutes(D.getMinutes()+q),D}(D,z*(Me(q,le)-le))}(le,z,!0));let Lr="";return wt.forEach(Pr=>{const dr=function ge(D){if(Be[D])return Be[D];let q;switch(D){case"G":case"GG":case"GGG":q=Jn(xn.Eras,it.Abbreviated);break;case"GGGG":q=Jn(xn.Eras,it.Wide);break;case"GGGGG":q=Jn(xn.Eras,it.Narrow);break;case"y":q=Pn(Xn.FullYear,1,0,!1,!0);break;case"yy":q=Pn(Xn.FullYear,2,0,!0,!0);break;case"yyy":q=Pn(Xn.FullYear,3,0,!1,!0);break;case"yyyy":q=Pn(Xn.FullYear,4,0,!1,!0);break;case"Y":q=et(1);break;case"YY":q=et(2,!0);break;case"YYY":q=et(3);break;case"YYYY":q=et(4);break;case"M":case"L":q=Pn(Xn.Month,1,1);break;case"MM":case"LL":q=Pn(Xn.Month,2,1);break;case"MMM":q=Jn(xn.Months,it.Abbreviated);break;case"MMMM":q=Jn(xn.Months,it.Wide);break;case"MMMMM":q=Jn(xn.Months,it.Narrow);break;case"LLL":q=Jn(xn.Months,it.Abbreviated,Gt.Standalone);break;case"LLLL":q=Jn(xn.Months,it.Wide,Gt.Standalone);break;case"LLLLL":q=Jn(xn.Months,it.Narrow,Gt.Standalone);break;case"w":q=$n(1);break;case"ww":q=$n(2);break;case"W":q=$n(1,!0);break;case"d":q=Pn(Xn.Date,1);break;case"dd":q=Pn(Xn.Date,2);break;case"c":case"cc":q=Pn(Xn.Day,1);break;case"ccc":q=Jn(xn.Days,it.Abbreviated,Gt.Standalone);break;case"cccc":q=Jn(xn.Days,it.Wide,Gt.Standalone);break;case"ccccc":q=Jn(xn.Days,it.Narrow,Gt.Standalone);break;case"cccccc":q=Jn(xn.Days,it.Short,Gt.Standalone);break;case"E":case"EE":case"EEE":q=Jn(xn.Days,it.Abbreviated);break;case"EEEE":q=Jn(xn.Days,it.Wide);break;case"EEEEE":q=Jn(xn.Days,it.Narrow);break;case"EEEEEE":q=Jn(xn.Days,it.Short);break;case"a":case"aa":case"aaa":q=Jn(xn.DayPeriods,it.Abbreviated);break;case"aaaa":q=Jn(xn.DayPeriods,it.Wide);break;case"aaaaa":q=Jn(xn.DayPeriods,it.Narrow);break;case"b":case"bb":case"bbb":q=Jn(xn.DayPeriods,it.Abbreviated,Gt.Standalone,!0);break;case"bbbb":q=Jn(xn.DayPeriods,it.Wide,Gt.Standalone,!0);break;case"bbbbb":q=Jn(xn.DayPeriods,it.Narrow,Gt.Standalone,!0);break;case"B":case"BB":case"BBB":q=Jn(xn.DayPeriods,it.Abbreviated,Gt.Format,!0);break;case"BBBB":q=Jn(xn.DayPeriods,it.Wide,Gt.Format,!0);break;case"BBBBB":q=Jn(xn.DayPeriods,it.Narrow,Gt.Format,!0);break;case"h":q=Pn(Xn.Hours,1,-12);break;case"hh":q=Pn(Xn.Hours,2,-12);break;case"H":q=Pn(Xn.Hours,1);break;case"HH":q=Pn(Xn.Hours,2);break;case"m":q=Pn(Xn.Minutes,1);break;case"mm":q=Pn(Xn.Minutes,2);break;case"s":q=Pn(Xn.Seconds,1);break;case"ss":q=Pn(Xn.Seconds,2);break;case"S":q=Pn(Xn.FractionalSeconds,1);break;case"SS":q=Pn(Xn.FractionalSeconds,2);break;case"SSS":q=Pn(Xn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":q=Kt(Bt.Short);break;case"ZZZZZ":q=Kt(Bt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":q=Kt(Bt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":q=Kt(Bt.Long);break;default:return null}return Be[D]=q,q}(Pr);Lr+=dr?dr(le,k,on):"''"===Pr?"'":Pr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Lr}function Nr(D,q,k){const z=new Date(0);return z.setFullYear(D,q,k),z.setHours(0,0,0),z}function Dr(D,q){const k=function Kn(D){return(0,T.H5H)(D)[T.KH2.LocaleId]}(D);if(lo[k]??={},lo[k][q])return lo[k][q];let z="";switch(q){case"shortDate":z=at(D,_e.Short);break;case"mediumDate":z=at(D,_e.Medium);break;case"longDate":z=at(D,_e.Long);break;case"fullDate":z=at(D,_e.Full);break;case"shortTime":z=lt(D,_e.Short);break;case"mediumTime":z=lt(D,_e.Medium);break;case"longTime":z=lt(D,_e.Long);break;case"fullTime":z=lt(D,_e.Full);break;case"short":const le=Dr(D,"shortTime"),Ye=Dr(D,"shortDate");z=zr(Pt(D,_e.Short),[le,Ye]);break;case"medium":const wt=Dr(D,"mediumTime"),an=Dr(D,"mediumDate");z=zr(Pt(D,_e.Medium),[wt,an]);break;case"long":const on=Dr(D,"longTime"),Lr=Dr(D,"longDate");z=zr(Pt(D,_e.Long),[on,Lr]);break;case"full":const Pr=Dr(D,"fullTime"),dr=Dr(D,"fullDate");z=zr(Pt(D,_e.Full),[Pr,dr])}return z&&(lo[k][q]=z),z}function zr(D,q){return q&&(D=D.replace(/\{([^}]+)}/g,function(k,z){return null!=q&&z in q?q[z]:k})),D}function Vr(D,q,k="-",z,le){let Ye="";(D<0||le&&D<=0)&&(le?D=1-D:(D=-D,Ye=k));let wt=String(D);for(;wt.length<q;)wt="0"+wt;return z&&(wt=wt.slice(wt.length-q)),Ye+wt}function Pn(D,q,k=0,z=!1,le=!1){return function(Ye,wt){let an=function mr(D,q){switch(D){case Xn.FullYear:return q.getFullYear();case Xn.Month:return q.getMonth();case Xn.Date:return q.getDate();case Xn.Hours:return q.getHours();case Xn.Minutes:return q.getMinutes();case Xn.Seconds:return q.getSeconds();case Xn.FractionalSeconds:return q.getMilliseconds();case Xn.Day:return q.getDay();default:throw new Error(`Unknown DateType value "${D}".`)}}(D,Ye);if((k>0||an>-k)&&(an+=k),D===Xn.Hours)0===an&&-12===k&&(an=12);else if(D===Xn.FractionalSeconds)return function yt(D,q){return Vr(D,3).substring(0,q)}(an,q);const on=Ze(wt,Ut.MinusSign);return Vr(an,q,on,z,le)}}function Jn(D,q,k=Gt.Format,z=!1){return function(le,Ye){return function Nt(D,q,k,z,le,Ye){switch(k){case xn.Months:return function vi(D,q,k){const z=(0,T.H5H)(D),Ye=Wn([z[T.KH2.MonthsFormat],z[T.KH2.MonthsStandalone]],q);return Wn(Ye,k)}(q,le,z)[D.getMonth()];case xn.Days:return function hr(D,q,k){const z=(0,T.H5H)(D),Ye=Wn([z[T.KH2.DaysFormat],z[T.KH2.DaysStandalone]],q);return Wn(Ye,k)}(q,le,z)[D.getDay()];case xn.DayPeriods:const wt=D.getHours(),an=D.getMinutes();if(Ye){const Lr=function jn(D){const q=(0,T.H5H)(D);return Qr(q),(q[T.KH2.ExtraData][2]||[]).map(z=>"string"==typeof z?mn(z):[mn(z[0]),mn(z[1])])}(q),Pr=function Hr(D,q,k){const z=(0,T.H5H)(D);Qr(z);const Ye=Wn([z[T.KH2.ExtraData][0],z[T.KH2.ExtraData][1]],q)||[];return Wn(Ye,k)||[]}(q,le,z),dr=Lr.findIndex(ii=>{if(Array.isArray(ii)){const[Br,Zr]=ii,Lo=wt>=Br.hours&&an>=Br.minutes,Hs=wt<Zr.hours||wt===Zr.hours&&an<Zr.minutes;if(Br.hours<Zr.hours){if(Lo&&Hs)return!0}else if(Lo||Hs)return!0}else if(ii.hours===wt&&ii.minutes===an)return!0;return!1});if(-1!==dr)return Pr[dr]}return function zn(D,q,k){const z=(0,T.H5H)(D),Ye=Wn([z[T.KH2.DayPeriodsFormat],z[T.KH2.DayPeriodsStandalone]],q);return Wn(Ye,k)}(q,le,z)[wt<12?0:1];case xn.Eras:return function zo(D,q){return Wn((0,T.H5H)(D)[T.KH2.Eras],q)}(q,z)[D.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${k}`)}}(le,Ye,D,q,k,z)}}function Kt(D){return function(q,k,z){const le=-1*z,Ye=Ze(k,Ut.MinusSign),wt=le>0?Math.floor(le/60):Math.ceil(le/60);switch(D){case Bt.Short:return(le>=0?"+":"")+Vr(wt,2,Ye)+Vr(Math.abs(le%60),2,Ye);case Bt.ShortGMT:return"GMT"+(le>=0?"+":"")+Vr(wt,1,Ye);case Bt.Long:return"GMT"+(le>=0?"+":"")+Vr(wt,2,Ye)+":"+Vr(Math.abs(le%60),2,Ye);case Bt.Extended:return 0===z?"Z":(le>=0?"+":"")+Vr(wt,2,Ye)+":"+Vr(Math.abs(le%60),2,Ye);default:throw new Error(`Unknown zone width "${D}"`)}}}const Ln=0,xt=4;function st(D){const q=D.getDay(),k=0===q?-3:xt-q;return Nr(D.getFullYear(),D.getMonth(),D.getDate()+k)}function $n(D,q=!1){return function(k,z){let le;if(q){const Ye=new Date(k.getFullYear(),k.getMonth(),1).getDay()-1,wt=k.getDate();le=1+Math.floor((wt+Ye)/7)}else{const Ye=st(k),wt=function Ge(D){const q=Nr(D,Ln,1).getDay();return Nr(D,0,1+(q<=xt?xt:xt+7)-q)}(Ye.getFullYear()),an=Ye.getTime()-wt.getTime();le=1+Math.round(an/6048e5)}return Vr(le,D,Ze(z,Ut.MinusSign))}}function et(D,q=!1){return function(k,z){return Vr(st(k).getFullYear(),D,Ze(z,Ut.MinusSign),q)}}const Be={};function Me(D,q){D=D.replace(/:/g,"");const k=Date.parse("Jan 01, 1970 00:00:00 "+D)/6e4;return isNaN(k)?q:k}function tt(D){return D instanceof Date&&!isNaN(D.valueOf())}const Ne=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Je(D){const q=parseInt(D);if(isNaN(q))throw new Error("Invalid integer literal when parsing "+D);return q}function Cn(D,q){q=encodeURIComponent(q);for(const k of D.split(";")){const z=k.indexOf("="),[le,Ye]=-1==z?[k,""]:[k.slice(0,z),k.slice(z+1)];if(le.trim()===q)return decodeURIComponent(Ye)}return null}const Fn=/\s+/,Cr=[];let nr=(()=>{class D{constructor(k,z){this._ngEl=k,this._renderer=z,this.initialClasses=Cr,this.stateMap=new Map}set klass(k){this.initialClasses=null!=k?k.trim().split(Fn):Cr}set ngClass(k){this.rawClass="string"==typeof k?k.trim().split(Fn):k}ngDoCheck(){for(const z of this.initialClasses)this._updateState(z,!0);const k=this.rawClass;if(Array.isArray(k)||k instanceof Set)for(const z of k)this._updateState(z,!0);else if(null!=k)for(const z of Object.keys(k))this._updateState(z,!!k[z]);this._applyStateDiff()}_updateState(k,z){const le=this.stateMap.get(k);void 0!==le?(le.enabled!==z&&(le.changed=!0,le.enabled=z),le.touched=!0):this.stateMap.set(k,{enabled:z,changed:!0,touched:!0})}_applyStateDiff(){for(const k of this.stateMap){const z=k[0],le=k[1];le.changed?(this._toggleClass(z,le.enabled),le.changed=!1):le.touched||(le.enabled&&this._toggleClass(z,!1),this.stateMap.delete(z)),le.touched=!1}}_toggleClass(k,z){(k=k.trim()).length>0&&k.split(Fn).forEach(le=>{z?this._renderer.addClass(this._ngEl.nativeElement,le):this._renderer.removeClass(this._ngEl.nativeElement,le)})}static#e=this.\u0275fac=function(z){return new(z||D)(T.rXU(T.aKT),T.rXU(T.sFG))};static#t=this.\u0275dir=T.FsC({type:D,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}return D})();class Ls{constructor(q,k,z,le){this.$implicit=q,this.ngForOf=k,this.index=z,this.count=le}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let qn=(()=>{class D{set ngForOf(k){this._ngForOf=k,this._ngForOfDirty=!0}set ngForTrackBy(k){this._trackByFn=k}get ngForTrackBy(){return this._trackByFn}constructor(k,z,le){this._viewContainer=k,this._template=z,this._differs=le,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(k){k&&(this._template=k)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const k=this._ngForOf;!this._differ&&k&&(this._differ=this._differs.find(k).create(this.ngForTrackBy))}if(this._differ){const k=this._differ.diff(this._ngForOf);k&&this._applyChanges(k)}}_applyChanges(k){const z=this._viewContainer;k.forEachOperation((le,Ye,wt)=>{if(null==le.previousIndex)z.createEmbeddedView(this._template,new Ls(le.item,this._ngForOf,-1,-1),null===wt?void 0:wt);else if(null==wt)z.remove(null===Ye?void 0:Ye);else if(null!==Ye){const an=z.get(Ye);z.move(an,wt),Zs(an,le)}});for(let le=0,Ye=z.length;le<Ye;le++){const an=z.get(le).context;an.index=le,an.count=Ye,an.ngForOf=this._ngForOf}k.forEachIdentityChange(le=>{Zs(z.get(le.currentIndex),le)})}static ngTemplateContextGuard(k,z){return!0}static#e=this.\u0275fac=function(z){return new(z||D)(T.rXU(T.c1b),T.rXU(T.C4Q),T.rXU(T._q3))};static#t=this.\u0275dir=T.FsC({type:D,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return D})();function Zs(D,q){D.context.$implicit=q.item}let Zi=(()=>{class D{constructor(k,z){this._viewContainer=k,this._context=new Ko,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=z}set ngIf(k){this._context.$implicit=this._context.ngIf=k,this._updateView()}set ngIfThen(k){Ca("ngIfThen",k),this._thenTemplateRef=k,this._thenViewRef=null,this._updateView()}set ngIfElse(k){Ca("ngIfElse",k),this._elseTemplateRef=k,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(k,z){return!0}static#e=this.\u0275fac=function(z){return new(z||D)(T.rXU(T.c1b),T.rXU(T.C4Q))};static#t=this.\u0275dir=T.FsC({type:D,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return D})();class Ko{constructor(){this.$implicit=null,this.ngIf=null}}function Ca(D,q){if(q&&!q.createEmbeddedView)throw new Error(`${D} must be a TemplateRef, but received '${(0,T.Tbb)(q)}'.`)}function Mr(D,q){return new T.wOt(2100,!1)}class Us{createSubscription(q,k){return(0,T.O8t)(()=>q.subscribe({next:k,error:z=>{throw z}}))}dispose(q){(0,T.O8t)(()=>q.unsubscribe())}}class ea{createSubscription(q,k){return q.then(k,z=>{throw z})}dispose(q){}}const bl=new ea,Al=new Us;let wa=(()=>{class D{constructor(k){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=k}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(k){if(!this._obj){if(k)try{this.markForCheckOnValueUpdate=!1,this._subscribe(k)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return k!==this._obj?(this._dispose(),this.transform(k)):this._latestValue}_subscribe(k){this._obj=k,this._strategy=this._selectStrategy(k),this._subscription=this._strategy.createSubscription(k,z=>this._updateLatestValue(k,z))}_selectStrategy(k){if((0,T.jNT)(k))return bl;if((0,T.zjR)(k))return Al;throw Mr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(k,z){k===this._obj&&(this._latestValue=z,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(z){return new(z||D)(T.rXU(T.gRc,16))};static#t=this.\u0275pipe=T.EJ8({name:"async",type:D,pure:!1,standalone:!0})}return D})();const ba=new T.nKC(""),ta=new T.nKC("");let bs=(()=>{class D{constructor(k,z,le){this.locale=k,this.defaultTimezone=z,this.defaultOptions=le}transform(k,z,le,Ye){if(null==k||""===k||k!=k)return null;try{return ir(k,z??this.defaultOptions?.dateFormat??"mediumDate",Ye||this.locale,le??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(wt){throw Mr()}}static#e=this.\u0275fac=function(z){return new(z||D)(T.rXU(T.xe9,16),T.rXU(ba,24),T.rXU(ta,24))};static#t=this.\u0275pipe=T.EJ8({name:"date",type:D,pure:!0,standalone:!0})}return D})(),Or=(()=>{class D{constructor(k){this._locale=k}transform(k,z,le){if(!function Ps(D){return!(null==D||""===D||D!=D)}(k))return null;le||=this._locale;try{return function Ii(D,q,k){return function vo(D,q,k,z,le,Ye,wt=!1){let an="",on=!1;if(isFinite(D)){let Lr=function Ea(D){let z,le,Ye,wt,an,q=Math.abs(D)+"",k=0;for((le=q.indexOf("."))>-1&&(q=q.replace(".","")),(Ye=q.search(/e/i))>0?(le<0&&(le=Ye),le+=+q.slice(Ye+1),q=q.substring(0,Ye)):le<0&&(le=q.length),Ye=0;"0"===q.charAt(Ye);Ye++);if(Ye===(an=q.length))z=[0],le=1;else{for(an--;"0"===q.charAt(an);)an--;for(le-=Ye,z=[],wt=0;Ye<=an;Ye++,wt++)z[wt]=Number(q.charAt(Ye))}return le>22&&(z=z.splice(0,21),k=le-1,le=1),{digits:z,exponent:k,integerLen:le}}(D);wt&&(Lr=function Wo(D){if(0===D.digits[0])return D;const q=D.digits.length-D.integerLen;return D.exponent?D.exponent+=2:(0===q?D.digits.push(0,0):1===q&&D.digits.push(0),D.integerLen+=2),D}(Lr));let Pr=q.minInt,dr=q.minFrac,ii=q.maxFrac;if(Ye){const os=Ye.match(Ne);if(null===os)throw new Error(`${Ye} is not a valid digit info`);const Rr=os[1],oa=os[3],cn=os[5];null!=Rr&&(Pr=Je(Rr)),null!=oa&&(dr=Je(oa)),null!=cn?ii=Je(cn):null!=oa&&dr>ii&&(ii=dr)}!function Oi(D,q,k){if(q>k)throw new Error(`The minimum number of digits after fraction (${q}) is higher than the maximum (${k}).`);let z=D.digits,le=z.length-D.integerLen;const Ye=Math.min(Math.max(q,le),k);let wt=Ye+D.integerLen,an=z[wt];if(wt>0){z.splice(Math.max(D.integerLen,wt));for(let dr=wt;dr<z.length;dr++)z[dr]=0}else{le=Math.max(0,le),D.integerLen=1,z.length=Math.max(1,wt=Ye+1),z[0]=0;for(let dr=1;dr<wt;dr++)z[dr]=0}if(an>=5)if(wt-1<0){for(let dr=0;dr>wt;dr--)z.unshift(0),D.integerLen++;z.unshift(1),D.integerLen++}else z[wt-1]++;for(;le<Math.max(0,Ye);le++)z.push(0);let on=0!==Ye;const Lr=q+D.integerLen,Pr=z.reduceRight(function(dr,ii,Br,Zr){return Zr[Br]=(ii+=dr)<10?ii:ii-10,on&&(0===Zr[Br]&&Br>=Lr?Zr.pop():on=!1),ii>=10?1:0},0);Pr&&(z.unshift(Pr),D.integerLen++)}(Lr,dr,ii);let Br=Lr.digits,Zr=Lr.integerLen;const Lo=Lr.exponent;let Hs=[];for(on=Br.every(os=>!os);Zr<Pr;Zr++)Br.unshift(0);for(;Zr<0;Zr++)Br.unshift(0);Zr>0?Hs=Br.splice(Zr,Br.length):(Hs=Br,Br=[0]);const is=[];for(Br.length>=q.lgSize&&is.unshift(Br.splice(-q.lgSize,Br.length).join(""));Br.length>q.gSize;)is.unshift(Br.splice(-q.gSize,Br.length).join(""));Br.length&&is.unshift(Br.join("")),an=is.join(Ze(k,z)),Hs.length&&(an+=Ze(k,le)+Hs.join("")),Lo&&(an+=Ze(k,Ut.Exponential)+"+"+Lo)}else an=Ze(k,Ut.Infinity);return an=D<0&&!on?q.negPre+an+q.negSuf:q.posPre+an+q.posSuf,an}(D,function Eo(D,q="-"){const k={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},z=D.split(";"),le=z[0],Ye=z[1],wt=-1!==le.indexOf(".")?le.split("."):[le.substring(0,le.lastIndexOf("0")+1),le.substring(le.lastIndexOf("0")+1)],an=wt[0],on=wt[1]||"";k.posPre=an.substring(0,an.indexOf("#"));for(let Pr=0;Pr<on.length;Pr++){const dr=on.charAt(Pr);"0"===dr?k.minFrac=k.maxFrac=Pr+1:"#"===dr?k.maxFrac=Pr+1:k.posSuf+=dr}const Lr=an.split(",");if(k.gSize=Lr[1]?Lr[1].length:0,k.lgSize=Lr[2]||Lr[1]?(Lr[2]||Lr[1]).length:0,Ye){const Pr=le.length-k.posPre.length-k.posSuf.length,dr=Ye.indexOf("#");k.negPre=Ye.substring(0,dr).replace(/'/g,""),k.negSuf=Ye.slice(dr+Pr).replace(/'/g,"")}else k.negPre=q+k.posPre,k.negSuf=k.posSuf;return k}(function we(D,q){return(0,T.H5H)(D)[T.KH2.NumberFormats][q]}(q,Yt.Decimal),Ze(q,Ut.MinusSign)),q,Ut.Group,Ut.Decimal,k)}(function ia(D){if("string"==typeof D&&!isNaN(Number(D)-parseFloat(D)))return Number(D);if("number"!=typeof D)throw new Error(`${D} is not a number`);return D}(k),le,z)}catch(Ye){throw Mr()}}static#e=this.\u0275fac=function(z){return new(z||D)(T.rXU(T.xe9,16))};static#t=this.\u0275pipe=T.EJ8({name:"number",type:D,pure:!0,standalone:!0})}return D})();let to=(()=>{class D{static#e=this.\u0275fac=function(z){return new(z||D)};static#t=this.\u0275mod=T.$C({type:D});static#n=this.\u0275inj=T.G2t({})}return D})();const Co="browser",Jo="server";function ur(D){return D===Jo}let Jr=(()=>{class D{static#e=this.\u0275prov=(0,T.jDH)({token:D,providedIn:"root",factory:()=>function Pa(D){return D===Co}((0,T.WQX)(T.Agw))?new Qn((0,T.WQX)(je),window):new Zo})}return D})();class Qn{constructor(q,k){this.document=q,this.window=k,this.offset=()=>[0,0]}setOffset(q){this.offset=Array.isArray(q)?()=>q:q}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(q){this.window.scrollTo(q[0],q[1])}scrollToAnchor(q){const k=function wi(D,q){const k=D.getElementById(q)||D.getElementsByName(q)[0];if(k)return k;if("function"==typeof D.createTreeWalker&&D.body&&"function"==typeof D.body.attachShadow){const z=D.createTreeWalker(D.body,NodeFilter.SHOW_ELEMENT);let le=z.currentNode;for(;le;){const Ye=le.shadowRoot;if(Ye){const wt=Ye.getElementById(q)||Ye.querySelector(`[name="${q}"]`);if(wt)return wt}le=z.nextNode()}}return null}(this.document,q);k&&(this.scrollToElement(k),k.focus())}setHistoryScrollRestoration(q){this.window.history.scrollRestoration=q}scrollToElement(q){const k=q.getBoundingClientRect(),z=k.left+this.window.pageXOffset,le=k.top+this.window.pageYOffset,Ye=this.offset();this.window.scrollTo(z-Ye[0],le-Ye[1])}}class Zo{setOffset(q){}getScrollPosition(){return[0,0]}scrollToPosition(q){}scrollToAnchor(q){}setHistoryScrollRestoration(q){}}class Ni{}},3953:(fn,ot,J)=>{J.d(ot,{bc$:()=>WD,iLQ:()=>jE,sZ2:()=>TC,hnV:()=>rg,Hbi:()=>yk,o8S:()=>ec,BIS:()=>KD,gRc:()=>j_,Ql9:()=>zR,Ocv:()=>yD,Z63:()=>zs,aKT:()=>Qg,uvJ:()=>po,zcH:()=>ul,bkB:()=>zl,$GK:()=>q,nKC:()=>vn,zZn:()=>cs,_q3:()=>nN,MKu:()=>rN,xe9:()=>tc,Co$:()=>zI,Vns:()=>eu,SKi:()=>Di,Xx1:()=>oi,Agw:()=>bC,PLl:()=>sT,sFG:()=>AM,_9s:()=>wI,czy:()=>GC,kdw:()=>bo,C4Q:()=>Xc,NYb:()=>Wu,giA:()=>R_,xvI:()=>kR,RxE:()=>tg,c1b:()=>Dv,gXe:()=>Ra,mal:()=>Pv,L39:()=>Zk,Ol2:()=>Gm,w6W:()=>tu,oH4:()=>yw,Rfq:()=>Qt,WQX:()=>cn,naY:()=>ff,QuC:()=>En,EmA:()=>Rs,fpN:()=>_k,HJs:()=>a1,N4e:()=>jc,O8t:()=>t1,An2:()=>kh,H3F:()=>tD,H8p:()=>pg,KH2:()=>$d,TgB:()=>Dd,wOt:()=>Mt,WHO:()=>fD,e01:()=>qd,H5H:()=>gE,Zy3:()=>Ur,mq5:()=>mE,JZv:()=>b,LfX:()=>ho,plB:()=>Ga,jNT:()=>Mi,zjR:()=>N_,ngT:()=>Wi,TL$:()=>GD,Tbb:()=>pe,Vt3:()=>Wa,GFd:()=>Hm,OA$:()=>dh,Jv_:()=>jP,aNF:()=>i,R7$:()=>rv,BMQ:()=>s0,AVh:()=>r_,wni:()=>EP,VBU:()=>w,FsC:()=>Z,jDH:()=>jt,G2t:()=>or,$C:()=>N,EJ8:()=>ue,rXU:()=>Cm,nrm:()=>f_,eu8:()=>Wp,bVm:()=>pE,qex:()=>g_,k0s:()=>h_,j41:()=>fE,RV6:()=>jA,xGo:()=>vy,KVO:()=>Rr,kS0:()=>zg,QTQ:()=>iv,bIt:()=>V0,lsd:()=>wP,XpG:()=>hP,nI1:()=>Yn,bMT:()=>Pe,i5U:()=>Ve,Y8G:()=>m0,eq3:()=>d,mGM:()=>IP,sdS:()=>TP,Njj:()=>da,tSv:()=>hp,eBV:()=>oy,B4B:()=>VC,n$t:()=>fS,xc7:()=>iE,DNE:()=>Ki,C5r:()=>Jp,EFF:()=>j0,JRh:()=>bE,SpI:()=>E_,Lme:()=>H0,DH7:()=>K0,mxI:()=>q0,R50:()=>W0,GBs:()=>CP});let B=null,ce=1;const De=Symbol("SIGNAL");function Fe(n){const r=B;return B=n,r}function Ot(n){if((!_t(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==ce)){if(!n.producerMustRecompute(n)&&!tr(n))return n.dirty=!1,void(n.lastCleanEpoch=ce);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ce}}function tr(n){Yt(n);for(let r=0;r<n.producerNode.length;r++){const s=n.producerNode[r],l=n.producerLastReadVersion[r];if(l!==s.version||(Ot(s),l!==s.version))return!0}return!1}function It(n,r){if(function At(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),1===n.liveConsumerNode.length&&function Gt(n){return void 0!==n.producerNode}(n))for(let l=0;l<n.producerNode.length;l++)It(n.producerNode[l],n.producerIndexOfThis[l]);const s=n.liveConsumerNode.length-1;if(n.liveConsumerNode[r]=n.liveConsumerNode[s],n.liveConsumerIndexOfThis[r]=n.liveConsumerIndexOfThis[s],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,r<n.liveConsumerNode.length){const l=n.liveConsumerIndexOfThis[r],u=n.liveConsumerNode[r];Yt(u),u.producerIndexOfThis[l]=r}}function _t(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Yt(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let hr=null;var Qr=J(1413),jn=J(8359),Hr=J(4412),lr=J(6354);typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const no="https://g.co/ng/security#xss";class Mt extends Error{constructor(r,s){super(Ur(r,s)),this.code=r}}function Ur(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}function ti(n){return{toString:n}.toString()}const ni="__parameters__";function gs(n,r,s){return ti(()=>{const l=function uo(n){return function(...s){if(n){const l=n(...s);for(const u in l)this[u]=l[u]}}}(r);function u(...h){if(this instanceof u)return l.apply(this,h),this;const _=new u(...h);return C.annotation=_,C;function C(P,F,G){const ne=P.hasOwnProperty(ni)?P[ni]:Object.defineProperty(P,ni,{value:[]})[ni];for(;ne.length<=G;)ne.push(null);return(ne[G]=ne[G]||[]).push(_),P}}return s&&(u.prototype=Object.create(s.prototype)),u.prototype.ngMetadataName=n,u.annotationCls=u,u})}const b=globalThis;function Q(n){for(let r in n)if(n[r]===Q)return r;throw Error("Could not find renamed property on target object.")}function oe(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function pe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(pe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Ce(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const rt=Q({__forward_ref__:Q});function Qt(n){return n.__forward_ref__=Qt,n.toString=function(){return pe(this())},n}function mt(n){return Vn(n)?n():n}function Vn(n){return"function"==typeof n&&n.hasOwnProperty(rt)&&n.__forward_ref__===Qt}function jt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function or(n){return{providers:n.providers||[],imports:n.imports||[]}}function Wr(n){return ro(n,To)||ro(n,pi)}function ho(n){return null!==Wr(n)}function ro(n,r){return n.hasOwnProperty(r)?n[r]:null}function br(n){return n&&(n.hasOwnProperty(Oc)||n.hasOwnProperty(xo))?n[Oc]:null}const To=Q({\u0275prov:Q}),Oc=Q({\u0275inj:Q}),pi=Q({ngInjectableDef:Q}),xo=Q({ngInjectorDef:Q});class vn{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=jt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Qi(n){return n&&!!n.\u0275providers}const Sa=Q({\u0275cmp:Q}),lu=Q({\u0275dir:Q}),Dl=Q({\u0275pipe:Q}),xc=Q({\u0275mod:Q}),ko=Q({\u0275fac:Q}),ac=Q({__NG_ELEMENT_ID__:Q}),Ma=Q({__NG_ENV_ID__:Q});function Un(n){return"string"==typeof n?n:null==n?"":String(n)}function D(n,r){throw new Mt(-201,!1)}var q=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(q||{});let k;function z(){return k}function le(n){const r=k;return k=n,r}function Ye(n,r,s){const l=Wr(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:s&q.Optional?null:void 0!==r?r:void D()}const on={},Lr="__NG_DI_FLAG__",Pr="ngTempTokenPath",ii=/\n/gm,Zr="__source";let Lo;function is(n){const r=Lo;return Lo=n,r}function os(n,r=q.Default){if(void 0===Lo)throw new Mt(-203,!1);return null===Lo?Ye(n,void 0,r):Lo.get(n,r&q.Optional?null:void 0,r)}function Rr(n,r=q.Default){return(z()||os)(mt(n),r)}function cn(n,r=q.Default){return Rr(n,Sl(r))}function Sl(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Oa(n){const r=[];for(let s=0;s<n.length;s++){const l=mt(n[s]);if(Array.isArray(l)){if(0===l.length)throw new Mt(900,!1);let u,h=q.Default;for(let _=0;_<l.length;_++){const C=l[_],P=Qu(C);"number"==typeof P?-1===P?u=C.token:h|=P:u=C}r.push(Rr(u,h))}else r.push(Rr(l))}return r}function Os(n,r){return n[Lr]=r,n.prototype[Lr]=r,n}function Qu(n){return n[Lr]}const oi=Os(gs("Optional"),8),bo=Os(gs("SkipSelf"),4);function tl(n,r){return n.hasOwnProperty(ko)?n[ko]:null}function Ol(n,r){n.forEach(s=>Array.isArray(s)?Ol(s,r):r(s))}function Rl(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function sa(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Vo(n,r,s){let l=Gs(n,r);return l>=0?n[1|l]=s:(l=~l,function lc(n,r,s,l){let u=n.length;if(u==r)n.push(s,l);else if(1===u)n.push(l,n[0]),n[0]=s;else{for(u--,n.push(n[u-1],n[u]);u>r;)n[u]=n[u-2],u--;n[r]=s,n[r+1]=l}}(n,l,r,s)),l}function _s(n,r){const s=Gs(n,r);if(s>=0)return n[1|s]}function Gs(n,r){return function Yi(n,r,s){let l=0,u=n.length>>s;for(;u!==l;){const h=l+(u-l>>1),_=n[h<<s];if(r===_)return h<<s;_>r?u=h:l=h+1}return~(u<<s)}(n,r,1)}const Kr={},un=[],zs=new vn(""),cc=new vn("",-1),Fc=new vn("");class uu{get(r,s=on){if(s===on){const l=new Error(`NullInjectorError: No provider for ${pe(r)}!`);throw l.name="NullInjectorError",l}return s}}var Zu=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Zu||{}),Ra=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ra||{}),Na=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Na||{});function Zd(n,r,s){let l=n.length;for(;;){const u=n.indexOf(r,s);if(-1===u)return u;if(0===u||n.charCodeAt(u-1)<=32){const h=r.length;if(u+h===l||n.charCodeAt(u+h)<=32)return u}s=u+1}}function xa(n,r,s){let l=0;for(;l<s.length;){const u=s[l];if("number"==typeof u){if(0!==u)break;l++;const h=s[l++],_=s[l++],C=s[l++];n.setAttribute(r,_,C,h)}else{const h=u,_=s[++l];Lc(h)?n.setProperty(r,h,_):n.setAttribute(r,h,_),l++}}return l}function xl(n){return 3===n||4===n||6===n}function Lc(n){return 64===n.charCodeAt(0)}function ka(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let l=0;l<r.length;l++){const u=r[l];"number"==typeof u?s=u:0===s||eh(n,s,u,null,-1===s||2===s?r[++l]:null)}}return n}function eh(n,r,s,l,u){let h=0,_=n.length;if(-1===r)_=-1;else for(;h<n.length;){const C=n[h++];if("number"==typeof C){if(C===r){_=-1;break}if(C>r){_=h-1;break}}}for(;h<n.length;){const C=n[h];if("number"==typeof C)break;if(C===s){if(null===l)return void(null!==u&&(n[h+1]=u));if(l===n[h+1])return void(n[h+2]=u)}h++,null!==l&&h++,null!==u&&h++}-1!==_&&(n.splice(_,0,r),h=_+1),n.splice(h++,0,s),null!==l&&n.splice(h++,0,l),null!==u&&n.splice(h++,0,u)}const Vc="ng-template";function mf(n,r,s,l){let u=0;if(l){for(;u<r.length&&"string"==typeof r[u];u+=2)if("class"===r[u]&&-1!==Zd(r[u+1].toLowerCase(),s,0))return!0}else if(du(n))return!1;if(u=r.indexOf(1,u),u>-1){let h;for(;++u<r.length&&"string"==typeof(h=r[u]);)if(h.toLowerCase()===s)return!0}return!1}function du(n){return 4===n.type&&n.value!==Vc}function th(n,r,s){return r===(4!==n.type||s?n.value:Vc)}function _f(n,r,s){let l=4;const u=n.attrs,h=null!==u?function nh(n){for(let r=0;r<n.length;r++)if(xl(n[r]))return r;return n.length}(u):0;let _=!1;for(let C=0;C<r.length;C++){const P=r[C];if("number"!=typeof P){if(!_)if(4&l){if(l=2|1&l,""!==P&&!th(n,P,s)||""===P&&1===r.length){if(aa(l))return!1;_=!0}}else if(8&l){if(null===u||!mf(n,u,P,s)){if(aa(l))return!1;_=!0}}else{const F=r[++C],G=G_(P,u,du(n),s);if(-1===G){if(aa(l))return!1;_=!0;continue}if(""!==F){let ne;if(ne=G>h?"":u[G+1].toLowerCase(),2&l&&F!==ne){if(aa(l))return!1;_=!0}}}}else{if(!_&&!aa(l)&&!aa(P))return!1;if(_&&aa(P))continue;_=!1,l=P|1&l}}return aa(l)||_}function aa(n){return!(1&n)}function G_(n,r,s,l){if(null===r)return-1;let u=0;if(l||!s){let h=!1;for(;u<r.length;){const _=r[u];if(_===n)return u;if(3===_||6===_)h=!0;else{if(1===_||2===_){let C=r[++u];for(;"string"==typeof C;)C=r[++u];continue}if(4===_)break;if(0===_){u+=4;continue}}u+=h?1:2}return-1}return function hu(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const l=n[s];if("number"==typeof l)return-1;if(l===r)return s;s++}return-1}(r,n)}function uc(n,r,s=!1){for(let l=0;l<r.length;l++)if(_f(n,r[l],s))return!0;return!1}function fg(n,r){return n?":not("+r.trim()+")":r}function Ai(n){let r=n[0],s=1,l=2,u="",h=!1;for(;s<n.length;){let _=n[s];if("string"==typeof _)if(2&l){const C=n[++s];u+="["+_+(C.length>0?'="'+C+'"':"")+"]"}else 8&l?u+="."+_:4&l&&(u+=" "+_);else""!==u&&!aa(_)&&(r+=fg(h,u),u=""),l=_,h=h||!aa(l);s++}return""!==u&&(r+=fg(h,u)),r}function w(n){return ti(()=>{const r=jr(n),s={...r,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Zu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ra.Emulated,styles:n.styles||un,_:null,schemas:n.schemas||null,tView:null,id:""};la(s);const l=n.dependencies;return s.directiveDefs=Hi(l,!1),s.pipeDefs=Hi(l,!0),s.id=function ys(n){let r=0;const s=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const u of s)r=Math.imul(31,r)+u.charCodeAt(0)|0;return r+=2147483648,"c"+r}(s),s})}function O(n){return Oe(n)||Se(n)}function A(n){return null!==n}function N(n){return ti(()=>({type:n.type,bootstrap:n.bootstrap||un,declarations:n.declarations||un,imports:n.imports||un,exports:n.exports||un,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function j(n,r){if(null==n)return Kr;const s={};for(const l in n)if(n.hasOwnProperty(l)){const u=n[l];let h,_,C=Na.None;Array.isArray(u)?(C=u[0],h=u[1],_=u[2]??h):(h=u,_=u),r?(s[h]=C!==Na.None?[l,C]:l,r[h]=_):s[h]=l}return s}function Z(n){return ti(()=>{const r=jr(n);return la(r),r})}function ue(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Oe(n){return n[Sa]||null}function Se(n){return n[lu]||null}function Rt(n){return n[Dl]||null}function En(n){const r=Oe(n)||Se(n)||Rt(n);return null!==r&&r.standalone}function _n(n,r){const s=n[xc]||null;if(!s&&!0===r)throw new Error(`Type ${pe(n)} does not have '\u0275mod' property.`);return s}function jr(n){const r={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:n.inputs||Kr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||un,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:j(n.inputs,r),outputs:j(n.outputs),debugInfo:null}}function la(n){n.features?.forEach(r=>r(n))}function Hi(n,r){if(!n)return null;const s=r?Rt:O;return()=>("function"==typeof n?n():n).map(l=>s(l)).filter(A)}function Rs(n){return{\u0275providers:n}}function rh(...n){return{\u0275providers:dc(0,n),\u0275fromNgModule:!0}}function dc(n,...r){const s=[],l=new Set;let u;const h=_=>{s.push(_)};return Ol(r,_=>{const C=_;Uc(C,h,[],l)&&(u||=[],u.push(C))}),void 0!==u&&Cf(u,h),s}function Cf(n,r){for(let s=0;s<n.length;s++){const{ngModule:l,providers:u}=n[s];Fa(u,h=>{r(h,l)})}}function Uc(n,r,s,l){if(!(n=mt(n)))return!1;let u=null,h=br(n);const _=!h&&Oe(n);if(h||_){if(_&&!_.standalone)return!1;u=n}else{const P=n.ngModule;if(h=br(P),!h)return!1;u=P}const C=l.has(u);if(_){if(C)return!1;if(l.add(u),_.dependencies){const P="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const F of P)Uc(F,r,s,l)}}else{if(!h)return!1;{if(null!=h.imports&&!C){let F;l.add(u);try{Ol(h.imports,G=>{Uc(G,r,s,l)&&(F||=[],F.push(G))})}finally{}void 0!==F&&Cf(F,r)}if(!C){const F=tl(u)||(()=>new u);r({provide:u,useFactory:F,deps:un},u),r({provide:Fc,useValue:u,multi:!0},u),r({provide:zs,useValue:()=>Rr(u),multi:!0},u)}const P=h.providers;if(null!=P&&!C){const F=n;Fa(P,G=>{r(G,F)})}}}return u!==n&&void 0!==n.providers}function Fa(n,r){for(let s of n)Qi(s)&&(s=s.\u0275providers),Array.isArray(s)?Fa(s,r):r(s)}const td=Q({provide:String,useValue:Q});function If(n){return null!==n&&"object"==typeof n&&td in n}function vs(n){return"function"==typeof n}const pg=new vn(""),fu={},wf={};let nl;function kl(){return void 0===nl&&(nl=new uu),nl}class po{}class La extends po{get destroyed(){return this._destroyed}constructor(r,s,l,u){super(),this.parent=s,this.source=l,this.scopes=u,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Bc(r,_=>this.processProvider(_)),this.records.set(cc,hc(void 0,this)),u.has("environment")&&this.records.set(po,hc(void 0,this));const h=this.records.get(pg);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(Fc,un,q.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const r=Fe(null);try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();const s=this._onDestroyHooks;this._onDestroyHooks=[];for(const l of s)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Fe(r)}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=is(this),l=le(void 0);try{return r()}finally{is(s),le(l)}}get(r,s=on,l=q.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(Ma))return r[Ma](this);l=Sl(l);const h=is(this),_=le(void 0);try{if(!(l&q.SkipSelf)){let P=this.records.get(r);if(void 0===P){const F=function K_(n){return"function"==typeof n||"object"==typeof n&&n instanceof vn}(r)&&Wr(r);P=F&&this.injectableDefInScope(F)?hc(Tf(r),fu):null,this.records.set(r,P)}if(null!=P)return this.hydrate(r,P)}return(l&q.Self?kl():this.parent).get(r,s=l&q.Optional&&s===on?null:s)}catch(C){if("NullInjectorError"===C.name){if((C[Pr]=C[Pr]||[]).unshift(pe(r)),h)throw C;return function el(n,r,s,l){const u=n[Pr];throw r[Zr]&&u.unshift(r[Zr]),n.message=function gf(n,r,s,l=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let u=pe(r);if(Array.isArray(r))u=r.map(pe).join(" -> ");else if("object"==typeof r){let h=[];for(let _ in r)if(r.hasOwnProperty(_)){let C=r[_];h.push(_+":"+("string"==typeof C?JSON.stringify(C):pe(C)))}u=`{${h.join(", ")}}`}return`${s}${l?"("+l+")":""}[${u}]: ${n.replace(ii,"\n  ")}`}("\n"+n.message,u,s,l),n.ngTokenPath=u,n[Pr]=null,n}(C,r,"R3InjectorError",this.source)}throw C}finally{le(_),is(h)}}resolveInjectorInitializers(){const r=Fe(null),s=is(this),l=le(void 0);try{const h=this.get(zs,un,q.Self);for(const _ of h)_()}finally{is(s),le(l),Fe(r)}}toString(){const r=[],s=this.records;for(const l of s.keys())r.push(pe(l));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Mt(205,!1)}processProvider(r){let s=vs(r=mt(r))?r:mt(r&&r.provide);const l=function gg(n){return If(n)?hc(void 0,n.useValue):hc(mg(n),fu)}(r);if(!vs(r)&&!0===r.multi){let u=this.records.get(s);u||(u=hc(void 0,fu,!0),u.factory=()=>Oa(u.multi),this.records.set(s,u)),s=r,u.multi.push(r)}this.records.set(s,l)}hydrate(r,s){const l=Fe(null);try{return s.value===fu&&(s.value=wf,s.value=s.factory()),"object"==typeof s.value&&s.value&&function bf(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}finally{Fe(l)}}injectableDefInScope(r){if(!r.providedIn)return!1;const s=mt(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function Tf(n){const r=Wr(n),s=null!==r?r.factory:tl(n);if(null!==s)return s;if(n instanceof vn)throw new Mt(204,!1);if(n instanceof Function)return function pu(n){if(n.length>0)throw new Mt(204,!1);const s=function No(n){return n&&(n[To]||n[pi])||null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Mt(204,!1)}function mg(n,r,s){let l;if(vs(n)){const u=mt(n);return tl(u)||Tf(u)}if(If(n))l=()=>mt(n.useValue);else if(function ih(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...Oa(n.deps||[]));else if(function z_(n){return!(!n||!n.useExisting)}(n))l=()=>Rr(mt(n.useExisting));else{const u=mt(n&&(n.useClass||n.provide));if(!function _g(n){return!!n.deps}(n))return tl(u)||Tf(u);l=()=>new u(...Oa(n.deps))}return l}function hc(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Bc(n,r){for(const s of n)Array.isArray(s)?Bc(s,r):s&&Qi(s)?Bc(s.\u0275providers,r):r(s)}function jc(n,r){n instanceof La&&n.assertNotDestroyed();const l=is(n),u=le(void 0);try{return r()}finally{is(l),le(u)}}function yg(){return void 0!==z()||null!=function Hs(){return Lo}()}const li=0,Lt=1,Rn=2,Gi=3,Va=4,io=5,Uo=6,rd=7,ci=8,ui=9,Ws=10,Bn=11,mu=12,Eg=13,ki=14,Pi=15,Vl=16,fc=17,Ul=18,ua=19,_u=20,pc=21,Bl=22,gc=23,Sn=25,Mf=1,il=7,$c=9,oo=10;var lh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(lh||{});function Bo(n){return Array.isArray(n)&&"object"==typeof n[Mf]}function Po(n){return Array.isArray(n)&&!0===n[Mf]}function Rf(n){return!!(4&n.flags)}function mc(n){return n.componentOffset>-1}function yu(n){return!(1&~n.flags)}function ol(n){return!!n.template}function Hc(n){return!!(512&n[Rn])}class xf{constructor(r,s,l){this.previousValue=r,this.currentValue=s,this.firstChange=l}isFirstChange(){return this.firstChange}}function sd(n,r,s,l){null!==r?r.applyValueToInputSignal(r,l):n[s]=l}function dh(){return ey}function ey(n){return n.type.prototype.ngOnChanges&&(n.setInput=YE),kf}function kf(){const n=hh(this),r=n?.current;if(r){const s=n.previous;if(s===Kr)n.previous=r;else for(let l in r)s[l]=r[l];n.current=null,this.ngOnChanges(r)}}function YE(n,r,s,l,u){const h=this.declaredInputs[l],_=hh(n)||function Ag(n,r){return n[bg]=r}(n,{previous:Kr,current:null}),C=_.current||(_.current={}),P=_.previous,F=P[h];C[h]=new xf(F&&F.currentValue,s,P===Kr),sd(n,r,u,s)}dh.ngInherit=!0;const bg="__ngSimpleChanges__";function hh(n){return n[bg]||null}const jl=function(n,r,s){};function vr(n){for(;Array.isArray(n);)n=n[li];return n}function Cu(n,r){return vr(r[n])}function go(n,r){return vr(r[n.index])}function ad(n,r){return n.data[r]}function Iu(n,r){return n[r]}function Es(n,r){const s=r[n];return Bo(s)?s:s[li]}function Og(n){return!(128&~n[Rn])}function Ks(n,r){return null==r?null:n[r]}function Ng(n){n[fc]=0}function xg(n){1024&n[Rn]||(n[Rn]|=1024,Og(n)&&ld(n))}function _c(n){return!!(9216&n[Rn]||n[gc]?.dirty)}function $l(n){n[Ws].changeDetectionScheduler?.notify(7),64&n[Rn]&&(n[Rn]|=1024),_c(n)&&ld(n)}function ld(n){n[Ws].changeDetectionScheduler?.notify(0);let r=zc(n);for(;null!==r&&!(8192&r[Rn])&&(r[Rn]|=8192,Og(r));)r=zc(r)}function wu(n,r){if(!(256&~n[Rn]))throw new Mt(911,!1);null===n[pc]&&(n[pc]=[]),n[pc].push(r)}function zc(n){const r=n[Gi];return Po(r)?r[Gi]:r}const Zn={lFrame:dn(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let cd=!1;function Fg(){return Zn.bindingsEnabled}function ft(){return Zn.lFrame.lView}function yr(){return Zn.lFrame.tView}function oy(n){return Zn.lFrame.contextLView=n,n[ci]}function da(n){return Zn.lFrame.contextLView=null,n}function $r(){let n=bu();for(;null!==n&&64===n.type;)n=n.parent;return n}function bu(){return Zn.lFrame.currentTNode}function ha(n,r){const s=Zn.lFrame;s.currentTNode=n,s.isParent=r}function vc(){return Zn.lFrame.isParent}function $o(){Zn.lFrame.isParent=!1}function Pu(){return cd}function Ug(n){cd=n}function Ho(){const n=Zn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function sl(){return Zn.lFrame.bindingIndex++}function al(n){const r=Zn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function v(n,r){const s=Zn.lFrame;s.bindingIndex=s.bindingRootIndex=n,p(r)}function p(n){Zn.lFrame.currentDirectiveIndex=n}function L(){return Zn.lFrame.currentQueryIndex}function X(n){Zn.lFrame.currentQueryIndex=n}function ye(n){const r=n[Lt];return 2===r.type?r.declTNode:1===r.type?n[io]:null}function Le(n,r,s){if(s&q.SkipSelf){let u=r,h=n;for(;!(u=u.parent,null!==u||s&q.Host||(u=ye(h),null===u||(h=h[ki],10&u.type))););if(null===u)return!1;r=u,n=h}const l=Zn.lFrame=Jt();return l.currentTNode=r,l.lView=n,!0}function pt(n){const r=Jt(),s=n[Lt];Zn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Jt(){const n=Zn.lFrame,r=null===n?null:n.child;return null===r?dn(n):r}function dn(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function pn(){const n=Zn.lFrame;return Zn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const gi=pn;function fa(){const n=pn();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function as(){return Zn.lFrame.selectedIndex}function ll(n){Zn.lFrame.selectedIndex=n}function si(){const n=Zn.lFrame;return ad(n.tView,n.selectedIndex)}let _h=!0;function Hl(){return _h}function ls(n){_h=n}function Su(n,r){for(let s=r.directiveStart,l=r.directiveEnd;s<l;s++){const h=n.data[s].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:C,ngAfterViewInit:P,ngAfterViewChecked:F,ngOnDestroy:G}=h;_&&(n.contentHooks??=[]).push(-s,_),C&&((n.contentHooks??=[]).push(s,C),(n.contentCheckHooks??=[]).push(s,C)),P&&(n.viewHooks??=[]).push(-s,P),F&&((n.viewHooks??=[]).push(s,F),(n.viewCheckHooks??=[]).push(s,F)),null!=G&&(n.destroyHooks??=[]).push(s,G)}}function ly(n,r,s){dy(n,r,3,s)}function cy(n,r,s,l){(3&n[Rn])===s&&dy(n,r,s,l)}function uy(n,r){let s=n[Rn];(3&s)===r&&(s&=16383,s+=1,n[Rn]=s)}function dy(n,r,s,l){const h=l??-1,_=r.length-1;let C=0;for(let P=void 0!==l?65535&n[fc]:0;P<_;P++)if("number"==typeof r[P+1]){if(C=r[P],null!=l&&C>=l)break}else r[P]<0&&(n[fc]+=65536),(C<h||-1==h)&&(JE(n,s,r,P),n[fc]=(4294901760&n[fc])+P+2),P++}function hy(n,r){jl(4,n,r);const s=Fe(null);try{r.call(n)}finally{Fe(s),jl(5,n,r)}}function JE(n,r,s,l){const u=s[l]<0,h=s[l+1],C=n[u?-s[l]:s[l]];u?n[Rn]>>14<n[fc]>>16&&(3&n[Rn])===r&&(n[Rn]+=16384,hy(C,h)):hy(C,h)}const hd=-1;class Bg{constructor(r,s,l){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=l}}function tC(n){return n!==hd}function Hf(n){return 32767&n}function Gf(n,r){let s=function Mw(n){return n>>16}(n),l=r;for(;s>0;)l=l[ki],s--;return l}let fy=!0;function py(n){const r=fy;return fy=n,r}const Ow=255,Rw=5;let nC=0;const Wc={};function $g(n,r){const s=gy(n,r);if(-1!==s)return s;const l=r[Lt];l.firstCreatePass&&(n.injectorIndex=r.length,Hg(l.data,n),Hg(r,null),Hg(l.blueprint,null));const u=zf(n,r),h=n.injectorIndex;if(tC(u)){const _=Hf(u),C=Gf(u,r),P=C[Lt].data;for(let F=0;F<8;F++)r[h+F]=C[_+F]|P[_+F]}return r[h+8]=u,h}function Hg(n,r){n.push(0,0,0,0,0,0,0,0,r)}function gy(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function zf(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,l=null,u=r;for(;null!==u;){if(l=yh(u),null===l)return hd;if(s++,u=u[ki],-1!==l.injectorIndex)return l.injectorIndex|s<<16}return hd}function iC(n,r,s){!function rC(n,r,s){let l;"string"==typeof s?l=s.charCodeAt(0)||0:s.hasOwnProperty(ac)&&(l=s[ac]),null==l&&(l=s[ac]=nC++);const u=l&Ow;r.data[n+(u>>Rw)]|=1<<u}(n,r,s)}function Nw(n,r,s){if(s&q.Optional||void 0!==n)return n;D()}function my(n,r,s,l){if(s&q.Optional&&void 0===l&&(l=null),!(s&(q.Self|q.Host))){const u=n[ui],h=le(void 0);try{return u?u.get(r,l,s&q.Optional):Ye(r,l,s&q.Optional)}finally{le(h)}}return Nw(l,0,s)}function xw(n,r,s,l=q.Default,u){if(null!==n){if(2048&r[Rn]&&!(l&q.Self)){const _=function sC(n,r,s,l,u){let h=n,_=r;for(;null!==h&&null!==_&&2048&_[Rn]&&!(512&_[Rn]);){const C=_y(h,_,s,l|q.Self,Wc);if(C!==Wc)return C;let P=h.parent;if(!P){const F=_[_u];if(F){const G=F.get(s,Wc,l);if(G!==Wc)return G}P=yh(_),_=_[ki]}h=P}return u}(n,r,s,l,Wc);if(_!==Wc)return _}const h=_y(n,r,s,l,Wc);if(h!==Wc)return h}return my(r,s,l,u)}function _y(n,r,s,l,u){const h=function OD(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(ac)?n[ac]:void 0;return"number"==typeof r?r>=0?r&Ow:RD:r}(s);if("function"==typeof h){if(!Le(r,n,l))return l&q.Host?Nw(u,0,l):my(r,s,l,u);try{let _;if(_=h(l),null!=_||l&q.Optional)return _;D()}finally{gi()}}else if("number"==typeof h){let _=null,C=gy(n,r),P=hd,F=l&q.Host?r[Pi][io]:null;for((-1===C||l&q.SkipSelf)&&(P=-1===C?zf(n,r):r[C+8],P!==hd&&Fw(l,!1)?(_=r[Lt],C=Hf(P),r=Gf(P,r)):C=-1);-1!==C;){const G=r[Lt];if(yy(h,C,G.data)){const ne=kw(C,r,s,_,l,F);if(ne!==Wc)return ne}P=r[C+8],P!==hd&&Fw(l,r[Lt].data[C+8]===F)&&yy(h,C,r)?(_=G,C=Hf(P),r=Gf(P,r)):C=-1}}return u}function kw(n,r,s,l,u,h){const _=r[Lt],C=_.data[n+8],G=Wf(C,_,s,null==l?mc(C)&&fy:l!=_&&!!(3&C.type),u&q.Host&&h===C);return null!==G?fd(r,_,G,C):Wc}function Wf(n,r,s,l,u){const h=n.providerIndexes,_=r.data,C=1048575&h,P=n.directiveStart,G=h>>20,fe=u?C+G:n.directiveEnd;for(let Ae=l?C:C+G;Ae<fe;Ae++){const Ue=_[Ae];if(Ae<P&&s===Ue||Ae>=P&&Ue.type===s)return Ae}if(u){const Ae=_[P];if(Ae&&ol(Ae)&&Ae.type===s)return P}return null}function fd(n,r,s,l){let u=n[s];const h=r.data;if(function SD(n){return n instanceof Bg}(u)){const _=u;_.resolving&&function ms(n,r){throw r&&r.join(" > "),new Mt(-200,n)}(function Ar(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Un(n)}(h[s]));const C=py(_.canSeeViewProviders);_.resolving=!0;const F=_.injectImpl?le(_.injectImpl):null;Le(n,l,q.Default);try{u=n[s]=_.factory(void 0,h,n,l),r.firstCreatePass&&s>=l.directiveStart&&function ay(n,r,s){const{ngOnChanges:l,ngOnInit:u,ngDoCheck:h}=r.type.prototype;if(l){const _=ey(r);(s.preOrderHooks??=[]).push(n,_),(s.preOrderCheckHooks??=[]).push(n,_)}u&&(s.preOrderHooks??=[]).push(0-n,u),h&&((s.preOrderHooks??=[]).push(n,h),(s.preOrderCheckHooks??=[]).push(n,h))}(s,h[s],r)}finally{null!==F&&le(F),py(C),_.resolving=!1,gi()}}return u}function yy(n,r,s){return!!(s[r+(n>>Rw)]&1<<n)}function Fw(n,r){return!(n&q.Self||n&q.Host&&r)}class Do{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,l){return xw(this._tNode,this._lView,r,Sl(l),s)}}function RD(){return new Do($r(),ft())}function vy(n){return ti(()=>{const r=n.prototype.constructor,s=r[ko]||Gg(r),l=Object.prototype;let u=Object.getPrototypeOf(n.prototype).constructor;for(;u&&u!==l;){const h=u[ko]||Gg(u);if(h&&h!==s)return h;u=Object.getPrototypeOf(u)}return h=>new h})}function Gg(n){return Vn(n)?()=>{const r=Gg(mt(n));return r&&r()}:tl(n)}function yh(n){const r=n[Lt],s=r.type;return 2===s?r.declTNode:1===s?n[io]:null}function zg(n){return function oC(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const l=s.length;let u=0;for(;u<l;){const h=s[u];if(xl(h))break;if(0===h)u+=2;else if("number"==typeof h)for(u++;u<l&&"string"==typeof s[u];)u++;else{if(h===r)return s[u+1];u+=2}}}return null}($r(),n)}function jw(n,r=null,s=null,l){const u=Cy(n,r,s,l);return u.resolveInjectorInitializers(),u}function Cy(n,r=null,s=null,l,u=new Set){const h=[s||un,rh(n)];return l=l||("object"==typeof n?void 0:pe(n)),new La(h,r||kl(),l||null,u)}class cs{static#e=this.THROW_IF_NOT_FOUND=on;static#t=this.NULL=new uu;static create(r,s){if(Array.isArray(r))return jw({name:""},s,r,"");{const l=r.name??"";return jw({name:l},r.parent,r.providers,l)}}static#n=this.\u0275prov=jt({token:cs,providedIn:"any",factory:()=>Rr(cc)});static#r=this.__NG_ELEMENT_ID__=-1}new vn("").__NG_ELEMENT_ID__=n=>{const r=$r();if(null===r)throw new Mt(204,!1);if(2&r.type)return r.value;if(n&q.Optional)return null;throw new Mt(204,!1)};function dC(n){return n.ngOriginalError}class ul{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&dC(r);for(;s&&dC(s);)s=dC(s);return s||null}}const Kg=new vn("",{providedIn:"root",factory:()=>cn(ul).handleError.bind(void 0)});let gd=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=qf;static#t=this.__NG_ENV_ID__=s=>s}return n})();class FD extends gd{constructor(r){super(),this._lView=r}onDestroy(r){return wu(this._lView,r),()=>function ph(n,r){if(null===n[pc])return;const s=n[pc].indexOf(r);-1!==s&&n[pc].splice(s,1)}(this._lView,r)}}function qf(){return new FD(ft())}function UD(){return Qf($r(),ft())}function Qf(n,r){return new Qg(go(n,r))}let Qg=(()=>{class n{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=UD}return n})();function qw(n){return n instanceof Qg?n.nativeElement:n}function Yg(n){return r=>{setTimeout(n,void 0,r)}}const zl=class Iy extends Qr.B{constructor(r=!1){super(),this.destroyRef=void 0,this.__isAsync=r,yg()&&(this.destroyRef=cn(gd,{optional:!0})??void 0)}emit(r){const s=Fe(null);try{super.next(r)}finally{Fe(s)}}subscribe(r,s,l){let u=r,h=s||(()=>null),_=l;if(r&&"object"==typeof r){const P=r;u=P.next?.bind(P),h=P.error?.bind(P),_=P.complete?.bind(P)}this.__isAsync&&(h=Yg(h),u&&(u=Yg(u)),_&&(_=Yg(_)));const C=super.subscribe({next:u,error:h,complete:_});return r instanceof jn.yU&&r.add(C),C}};function fC(){return this._results[Symbol.iterator]()}class wy{static#e=Symbol.iterator;get changes(){return this._changes??=new zl}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const s=wy.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=fC)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){this.dirty=!1;const l=function fo(n){return n.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Ml(n,r,s){if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++){let u=n[l],h=r[l];if(s&&(u=s(u),h=s(h)),h!==u)return!1}return!0}(this._results,l,s))&&(this._results=l,this.length=l.length,this.last=l[this.length-1],this.first=l[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(r){this._onDirty=r}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Jg(n){return!(128&~n.flags)}const by=new Map;let gC=0;const Zg="__ngContext__";function qs(n,r){Bo(r)?(n[Zg]=r[ua],function Yf(n){by.set(n[ua],n)}(r)):n[Zg]=r}function yC(n){return vC(n[mu])}function Jf(n){return vC(n[Va])}function vC(n){for(;null!==n&&!Po(n);)n=n[Va];return n}let wC;function GD(n){wC=n}const TC=new vn("",{providedIn:"root",factory:()=>zD}),zD="ng",sT=new vn(""),bC=new vn("",{providedIn:"platform",factory:()=>"unknown"}),WD=new vn(""),KD=new vn("",{providedIn:"root",factory:()=>function Ou(){if(void 0!==wC)return wC;if(typeof document<"u")return document;throw new Mt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ky=()=>null;function Fu(n,r,s=!1){return ky(n,r,s)}const om=new vn("",{providedIn:"root",factory:()=>!1});let am;function lm(n){return function jy(){if(void 0===am&&(am=null,b.trustedTypes))try{am=b.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return am}()?.createScriptURL(n)||n}class gT{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${no})`}}function ja(n){return n instanceof gT?n.changingThisBreaksApplicationSecurity:n}function dl(n,r){const s=function cm(n){return n instanceof gT&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${no})`)}return s===r}const iS=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var cp=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(cp||{});function VC(n){const r=up();return r?r.sanitize(cp.URL,n)||"":dl(n,"URL")?ja(n):function Hy(n){return(n=String(n)).match(iS)?n:"unsafe:"+n}(Un(n))}function dS(n){const r=up();if(r)return lm(r.sanitize(cp.RESOURCE_URL,n)||"");if(dl(n,"ResourceURL"))return lm(ja(n));throw new Mt(904,!1)}function fS(n,r,s){return function SN(n,r){return"src"===r&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===r&&("base"===n||"link"===n)?dS:VC}(r,s)(n)}function up(){const n=ft();return n&&n[Ws].sanitizer}const TT=/^>|^->|<!--|-->|--!>|<!-$/g,MN=/(<|>)/g,ON="\u200b$1\u200b";function hp(n){return n.ownerDocument.defaultView}function hl(n){return n instanceof Function?n():n}var GC=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(GC||{});let RT;function So(n,r){return RT(n,r)}function pp(n,r,s,l,u){if(null!=l){let h,_=!1;Po(l)?h=l:Bo(l)&&(_=!0,l=l[li]);const C=vr(l);0===n&&null!==s?null==u?Qy(r,s,C):_p(r,s,C,u||null,!0):1===n&&null!==s?_p(r,s,C,u||null,!0):2===n?function vp(n,r,s){const l=Yy(n,r);l&&function yp(n,r,s,l){n.removeChild(r,s,l)}(n,l,r,s)}(r,C,_):3===n&&r.destroyNode(C),null!=h&&function JC(n,r,s,l,u){const h=s[il];h!==vr(s)&&pp(r,n,l,h,u);for(let C=oo;C<s.length;C++){const P=s[C];vm(P[Lt],P,n,r,l,h)}}(r,n,h,s,u)}}function zC(n,r){return n.createComment(function pS(n){return n.replace(TT,r=>r.replace(MN,ON))}(r))}function Ky(n,r,s){return n.createElement(r,s)}function xT(n,r){r[Ws].changeDetectionScheduler?.notify(8),vm(n,r,r[Bn],2,null,null)}function gp(n,r){const s=n[$c],l=r[Gi];(Bo(l)||r[Pi]!==l[Gi][Pi])&&(n[Rn]|=lh.HasTransplantedViews),null===s?n[$c]=[r]:s.push(r)}function mp(n,r){const s=n[$c],l=s.indexOf(r);s.splice(l,1)}function mm(n,r){if(n.length<=oo)return;const s=oo+r,l=n[s];if(l){const u=l[Vl];null!==u&&u!==n&&mp(u,l),r>0&&(n[s-1][Va]=l[Va]);const h=sa(n,oo+r);!function IS(n,r){xT(n,r),r[li]=null,r[io]=null}(l[Lt],l);const _=h[Ul];null!==_&&_.detachView(h[Lt]),l[Gi]=null,l[Va]=null,l[Rn]&=-129}return l}function qy(n,r){if(!(256&r[Rn])){const s=r[Bn];s.destroyNode&&vm(n,r,s,3,null,null),function kT(n){let r=n[mu];if(!r)return WC(n[Lt],n);for(;r;){let s=null;if(Bo(r))s=r[mu];else{const l=r[oo];l&&(s=l)}if(!s){for(;r&&!r[Va]&&r!==n;)Bo(r)&&WC(r[Lt],r),r=r[Gi];null===r&&(r=n),Bo(r)&&WC(r[Lt],r),s=r&&r[Va]}r=s}}(r)}}function WC(n,r){if(256&r[Rn])return;const s=Fe(null);try{r[Rn]&=-129,r[Rn]|=256,r[gc]&&function pr(n){if(Yt(n),_t(n))for(let r=0;r<n.producerNode.length;r++)It(n.producerNode[r],n.producerIndexOfThis[r]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}(r[gc]),function TS(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let l=0;l<s.length;l+=2){const u=r[s[l]];if(!(u instanceof Bg)){const h=s[l+1];if(Array.isArray(h))for(let _=0;_<h.length;_+=2){const C=u[h[_]],P=h[_+1];jl(4,C,P);try{P.call(C)}finally{jl(5,C,P)}}else{jl(4,u,h);try{h.call(u)}finally{jl(5,u,h)}}}}}(n,r),function KC(n,r){const s=n.cleanup,l=r[rd];if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const _=s[h+3];_>=0?l[_]():l[-_].unsubscribe(),h+=2}else s[h].call(l[s[h+1]]);null!==l&&(r[rd]=null);const u=r[pc];if(null!==u){r[pc]=null;for(let h=0;h<u.length;h++)(0,u[h])()}}(n,r),1===r[Lt].type&&r[Bn].destroy();const l=r[Vl];if(null!==l&&Po(r[Gi])){l!==r[Gi]&&mp(l,r);const u=r[Ul];null!==u&&u.detachView(n)}!function BD(n){by.delete(n[ua])}(r)}finally{Fe(s)}}function qC(n,r,s){return function QC(n,r,s){let l=r;for(;null!==l&&40&l.type;)l=(r=l).parent;if(null===l)return s[li];{const{componentOffset:u}=l;if(u>-1){const{encapsulation:h}=n.data[l.directiveStart+u];if(h===Ra.None||h===Ra.Emulated)return null}return go(l,s)}}(n,r.parent,s)}function _p(n,r,s,l,u){n.insertBefore(r,s,l,u)}function Qy(n,r,s){n.appendChild(r,s)}function Qc(n,r,s,l,u){null!==l?_p(n,r,s,l,u):Qy(n,r,s)}function Yy(n,r){return n.parentNode(r)}let Kl,Zy=function Jy(n,r,s){return 40&n.type?go(n,s):null};function _m(n,r,s,l){const u=qC(n,l,r),h=r[Bn],C=function FT(n,r,s){return Zy(n,r,s)}(l.parent||r[io],l,r);if(null!=u)if(Array.isArray(s))for(let P=0;P<s.length;P++)Qc(h,u,s[P],C,!1);else Qc(h,u,s,C,!1);void 0!==Kl&&Kl(h,l,r,s,u)}function Vu(n,r){if(null!==r){const s=r.type;if(3&s)return go(r,n);if(4&s)return ym(-1,n[r.index]);if(8&s){const l=r.child;if(null!==l)return Vu(n,l);{const u=n[r.index];return Po(u)?ym(-1,u):vr(u)}}if(32&s)return So(r,n)()||vr(n[r.index]);{const l=YC(n,r);return null!==l?Array.isArray(l)?l[0]:Vu(zc(n[Pi]),l):Vu(n,r.next)}}return null}function YC(n,r){return null!==r?n[Pi][io].projection[r.projection]:null}function ym(n,r){const s=oo+n+1;if(s<r.length){const l=r[s],u=l[Lt].firstChild;if(null!==u)return Vu(l,u)}return r[il]}function XC(n,r,s,l,u,h,_){for(;null!=s;){const C=l[s.index],P=s.type;if(_&&0===r&&(C&&qs(vr(C),l),s.flags|=2),32&~s.flags)if(8&P)XC(n,r,s.child,l,u,h,!1),pp(r,n,u,C,h);else if(32&P){const F=So(s,l);let G;for(;G=F();)pp(r,n,u,G,h);pp(r,n,u,C,h)}else 16&P?UT(n,r,l,s,u,h):pp(r,n,u,C,h);s=_?s.projectionNext:s.next}}function vm(n,r,s,l,u,h){XC(s,l,n.firstChild,r,u,h,!1)}function UT(n,r,s,l,u,h){const _=s[Pi],P=_[io].projection[l.projection];if(Array.isArray(P))for(let F=0;F<P.length;F++)pp(r,n,u,P[F],h);else{let F=P;const G=_[Gi];Jg(l)&&(F.flags|=128),XC(n,r,F,G,u,h,!0)}}function tv(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function nv(n,r,s){const{mergedAttrs:l,classes:u,styles:h}=s;null!==l&&xa(n,r,l),null!==u&&tv(n,r,u),null!==h&&function eI(n,r,s){n.setAttribute(r,"style",s)}(n,r,h)}const sr={};function rv(n=1){Em(yr(),ft(),as()+n,!1)}function Em(n,r,s,l){if(!l)if(3&~r[Rn]){const h=n.preOrderHooks;null!==h&&cy(r,h,0,s)}else{const h=n.preOrderCheckHooks;null!==h&&ly(r,h,s)}ll(s)}function Cm(n,r=q.Default){const s=ft();return null===s?Rr(n,r):xw($r(),s,mt(n),r)}function iv(){throw new Error("invalid")}function Ep(n,r,s,l,u,h){const _=Fe(null);try{let C=null;u&Na.SignalBased&&(C=r[l][De]),null!==C&&void 0!==C.transformFn&&(h=C.transformFn(h)),u&Na.HasDecoratorInputTransform&&(h=n.inputTransforms[l].call(r,h)),null!==n.setInput?n.setInput(r,C,h,s,l):sd(r,C,l,h)}finally{Fe(_)}}function _d(n,r,s,l,u,h,_,C,P,F,G){const ne=r.blueprint.slice();return ne[li]=u,ne[Rn]=204|l,(null!==F||n&&2048&n[Rn])&&(ne[Rn]|=2048),Ng(ne),ne[Gi]=ne[ki]=n,ne[ci]=s,ne[Ws]=_||n&&n[Ws],ne[Bn]=C||n&&n[Bn],ne[ui]=P||n&&n[ui]||null,ne[io]=h,ne[ua]=function Qw(){return gC++}(),ne[Uo]=G,ne[_u]=F,ne[Pi]=2==r.type?n[Pi]:ne,ne}function Dh(n,r,s,l,u){let h=n.data[r];if(null===h)h=function ov(n,r,s,l,u){const h=bu(),_=vc(),P=n.data[r]=function $T(n,r,s,l,u,h){let _=r?r.injectorIndex:-1,C=0;return function Xi(){return null!==Zn.skipHydrationRootTNode}()&&(C|=128),{type:s,index:l,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:u,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?h:h&&h.parent,s,r,l,u);return null===n.firstChild&&(n.firstChild=P),null!==h&&(_?null==h.child&&null!==P.parent&&(h.child=P):null===h.next&&(h.next=P,P.prev=h)),P}(n,r,s,l,u),function XE(){return Zn.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=s,h.value=l,h.attrs=u;const _=function Au(){const n=Zn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===_?-1:_.injectorIndex}return ha(h,!0),h}function Im(n,r,s,l){if(0===s)return-1;const u=r.length;for(let h=0;h<s;h++)r.push(l),n.blueprint.push(l),n.data.push(null);return u}function BT(n,r,s,l,u){const h=as(),_=2&l;try{ll(-1),_&&r.length>Sn&&Em(n,r,Sn,!1),jl(_?2:0,u),s(l,u)}finally{ll(h),jl(_?3:1,u)}}function nI(n,r,s){if(Rf(r)){const l=Fe(null);try{const h=r.directiveEnd;for(let _=r.directiveStart;_<h;_++){const C=n.data[_];C.contentQueries&&C.contentQueries(1,s[_],_)}}finally{Fe(l)}}}function wm(n,r,s){Fg()&&(function aI(n,r,s,l){const u=s.directiveStart,h=s.directiveEnd;mc(s)&&function zT(n,r,s){const l=go(r,n),u=rI(s);let _=16;s.signals?_=4096:s.onPush&&(_=64);const C=Am(n,_d(n,u,null,_,l,r,null,n[Ws].rendererFactory.createRenderer(l,s),null,null,null));n[r.index]=C}(r,s,n.data[u+s.componentOffset]),n.firstCreatePass||$g(s,r),qs(l,r);const _=s.initialInputs;for(let C=u;C<h;C++){const P=n.data[C],F=fd(r,n,C,s);qs(F,r),null!==_&&RS(0,C-u,F,P,0,_),ol(P)&&(Es(s.index,r)[ci]=fd(r,n,C,s))}}(n,r,s,go(s,r)),!(64&~s.flags)&&vd(n,r,s))}function sv(n,r,s=go){const l=r.localNames;if(null!==l){let u=r.index+1;for(let h=0;h<l.length;h+=2){const _=l[h+1],C=-1===_?s(r,n):n[_];n[u++]=C}}}function rI(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Sh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):r}function Sh(n,r,s,l,u,h,_,C,P,F,G){const ne=Sn+l,fe=ne+u,Ae=function iI(n,r){const s=[];for(let l=0;l<r;l++)s.push(l<n?null:sr);return s}(ne,fe),Ue="function"==typeof F?F():F;return Ae[Lt]={type:n,blueprint:Ae,template:s,queries:null,viewQuery:C,declTNode:r,data:Ae.slice().fill(null,ne),bindingStartIndex:ne,expandoStartIndex:fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:P,consts:Ue,incompleteFirstPass:!1,ssrId:G}}let oI=()=>null;function yd(n,r,s,l,u){for(let h in r){if(!r.hasOwnProperty(h))continue;const _=r[h];if(void 0===_)continue;l??={};let C,P=Na.None;Array.isArray(_)?(C=_[0],P=_[1]):C=_;let F=h;if(null!==u){if(!u.hasOwnProperty(h))continue;F=u[h]}0===n?fl(l,s,F,C,P):fl(l,s,F,C)}return l}function fl(n,r,s,l,u){let h;n.hasOwnProperty(s)?(h=n[s]).push(r,l):h=n[s]=[r,l],void 0!==u&&h.push(u)}function ga(n,r,s,l,u,h,_,C){const P=go(r,s);let G,F=r.inputs;!C&&null!=F&&(G=F[l])?(fI(n,s,G,l,u),mc(r)&&function Tm(n,r){const s=Es(r,n);16&s[Rn]||(s[Rn]|=64)}(s,r.index)):3&r.type&&(l=function HT(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(l),u=null!=_?_(u,r.value||"",l):u,h.setProperty(P,l,u))}function sI(n,r,s,l){if(Fg()){const u=null===l?null:{"":-1},h=function SS(n,r){const s=n.directiveRegistry;let l=null,u=null;if(s)for(let h=0;h<s.length;h++){const _=s[h];if(uc(r,_.selectors,!1))if(l||(l=[]),ol(_))if(null!==_.findHostDirectiveDefs){const C=[];u=u||new Map,_.findHostDirectiveDefs(_,C,u),l.unshift(...C,_),lI(n,r,C.length)}else l.unshift(_),lI(n,r,0);else u=u||new Map,_.findHostDirectiveDefs?.(_,l,u),l.push(_)}return null===l?null:[l,u]}(n,s);let _,C;null===h?_=C=null:[_,C]=h,null!==_&&lv(n,r,s,_,u,C),u&&function MS(n,r,s){if(r){const l=n.localNames=[];for(let u=0;u<r.length;u+=2){const h=s[r[u+1]];if(null==h)throw new Mt(-301,!1);l.push(r[u],h)}}}(s,l,u)}s.mergedAttrs=ka(s.mergedAttrs,s.attrs)}function lv(n,r,s,l,u,h){for(let F=0;F<l.length;F++)iC($g(s,r),n,l[F].type);!function OS(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}(s,n.data.length,l.length);for(let F=0;F<l.length;F++){const G=l[F];G.providersResolver&&G.providersResolver(G)}let _=!1,C=!1,P=Im(n,r,l.length,null);for(let F=0;F<l.length;F++){const G=l[F];s.mergedAttrs=ka(s.mergedAttrs,G.hostAttrs),cI(n,s,r,P,G),GT(P,G,u),null!==G.contentQueries&&(s.flags|=4),(null!==G.hostBindings||null!==G.hostAttrs||0!==G.hostVars)&&(s.flags|=64);const ne=G.type.prototype;!_&&(ne.ngOnChanges||ne.ngOnInit||ne.ngDoCheck)&&((n.preOrderHooks??=[]).push(s.index),_=!0),!C&&(ne.ngOnChanges||ne.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(s.index),C=!0),P++}!function pa(n,r,s){const u=r.directiveEnd,h=n.data,_=r.attrs,C=[];let P=null,F=null;for(let G=r.directiveStart;G<u;G++){const ne=h[G],fe=s?s.get(ne):null,Ue=fe?fe.outputs:null;P=yd(0,ne.inputs,G,P,fe?fe.inputs:null),F=yd(1,ne.outputs,G,F,Ue);const dt=null===P||null===_||du(r)?null:uI(P,G,_);C.push(dt)}null!==P&&(P.hasOwnProperty("class")&&(r.flags|=8),P.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=C,r.inputs=P,r.outputs=F}(n,s,h)}function vd(n,r,s){const l=s.directiveStart,u=s.directiveEnd,h=s.index,_=function f(){return Zn.lFrame.currentDirectiveIndex}();try{ll(h);for(let C=l;C<u;C++){const P=n.data[C],F=r[C];p(C),(null!==P.hostBindings||0!==P.hostVars||null!==P.hostAttrs)&&DS(P,F)}}finally{ll(-1),p(_)}}function DS(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function lI(n,r,s){r.componentOffset=s,(n.components??=[]).push(r.index)}function GT(n,r,s){if(s){if(r.exportAs)for(let l=0;l<r.exportAs.length;l++)s[r.exportAs[l]]=n;ol(r)&&(s[""]=n)}}function cI(n,r,s,l,u){n.data[l]=u;const h=u.factory||(u.factory=tl(u.type)),_=new Bg(h,ol(u),Cm);n.blueprint[l]=_,s[l]=_,function Cp(n,r,s,l,u){const h=u.hostBindings;if(h){let _=n.hostBindingOpCodes;null===_&&(_=n.hostBindingOpCodes=[]);const C=~r.index;(function Mh(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(_)!=C&&_.push(C),_.push(s,l,h)}}(n,r,l,Im(n,s,u.hostVars,sr),u)}function pl(n,r,s,l,u,h){const _=go(n,r);!function cv(n,r,s,l,u,h,_){if(null==h)n.removeAttribute(r,u,s);else{const C=null==_?Un(h):_(h,l||"",u);n.setAttribute(r,u,C,s)}}(r[Bn],_,h,n.value,s,l,u)}function RS(n,r,s,l,u,h){const _=h[r];if(null!==_)for(let C=0;C<_.length;)Ep(l,s,_[C++],_[C++],_[C++],_[C++])}function uI(n,r,s){let l=null,u=0;for(;u<s.length;){const h=s[u];if(0!==h)if(5!==h){if("number"==typeof h)break;if(n.hasOwnProperty(h)){null===l&&(l=[]);const _=n[h];for(let C=0;C<_.length;C+=3)if(_[C]===r){l.push(h,_[C+1],_[C+2],s[u+1]);break}}u+=2}else u+=2;else u+=4}return l}function WT(n,r,s,l){return[n,!0,0,r,null,l,null,s,null,null]}function dI(n,r){const s=n.contentQueries;if(null!==s){const l=Fe(null);try{for(let u=0;u<s.length;u+=2){const _=s[u+1];if(-1!==_){const C=n.data[_];X(s[u]),C.contentQueries(2,r[_],_)}}}finally{Fe(l)}}}function Am(n,r){return n[mu]?n[Eg][Va]=r:n[mu]=r,n[Eg]=r,r}function hI(n,r,s){X(0);const l=Fe(null);try{r(n,s)}finally{Fe(l)}}function KT(n){return n[rd]??=[]}function qT(n){return n.cleanup??=[]}function Pm(n,r){const s=n[ui],l=s?s.get(ul,null):null;l&&l.handleError(r)}function fI(n,r,s,l,u){for(let h=0;h<s.length;){const _=s[h++],C=s[h++],P=s[h++];Ep(n.data[_],r[_],l,C,P,u)}}function Ed(n,r,s){const l=Cu(r,n);!function qc(n,r,s){n.setValue(r,s)}(n[Bn],l,s)}function NS(n,r){const s=Es(r,n),l=s[Lt];!function xS(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])}(l,s);const u=s[li];null!==u&&null===s[Uo]&&(s[Uo]=Fu(u,s[ui])),pI(l,s,s[ci])}function pI(n,r,s){pt(r);try{const l=n.viewQuery;null!==l&&hI(1,l,s);const u=n.template;null!==u&&BT(n,r,u,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),r[Ul]?.finishViewCreation(n),n.staticContentQueries&&dI(n,r),n.staticViewQueries&&hI(2,n.viewQuery,s);const h=n.components;null!==h&&function kS(n,r){for(let s=0;s<r.length;s++)NS(n,r[s])}(r,h)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{r[Rn]&=-5,fa()}}function Cd(n,r){return!r||null===r.firstChild||Jg(n)}function Qs(n,r,s,l,u=!1){for(;null!==s;){const h=r[s.index];null!==h&&l.push(vr(h)),Po(h)&&FS(h,l);const _=s.type;if(8&_)Qs(n,r,s.child,l);else if(32&_){const C=So(s,r);let P;for(;P=C();)l.push(P)}else if(16&_){const C=YC(r,s);if(Array.isArray(C))l.push(...C);else{const P=zc(r[Pi]);Qs(P[Lt],P,C,l,!0)}}s=u?s.projectionNext:s.next}return l}function FS(n,r){for(let s=oo;s<n.length;s++){const l=n[s],u=l[Lt].firstChild;null!==u&&Qs(l[Lt],l,u,r)}n[il]!==n[li]&&r.push(n[il])}let XT=[];const JT={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{ld(n.lView)},consumerOnSignalRead(){this.lView[gc]=this}},uv=100;function wc(n,r=!0,s=0){const l=n[Ws],u=l.rendererFactory;u.begin?.();try{!function LN(n,r){const s=Pu();try{Ug(!0),Yc(n,r);let l=0;for(;_c(n);){if(l===uv)throw new Mt(103,!1);l++,Yc(n,1)}}finally{Ug(s)}}(n,s)}catch(_){throw r&&Pm(n,_),_}finally{u.end?.(),l.inlineEffectRunner?.flush()}}function BS(n,r,s,l){const u=r[Rn];if(!(256&~u))return;r[Ws].inlineEffectRunner?.flush(),pt(r);let C=null,P=null;(function eb(n){return 2!==n.type})(n)&&(P=function LS(n){return n[gc]??function VS(n){const r=XT.pop()??Object.create(JT);return r.lView=n,r}(n)}(r),C=function Zt(n){return n&&(n.nextProducerIndex=0),Fe(n)}(P));try{Ng(r),function ud(n){return Zn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&BT(n,r,s,2,l);const F=!(3&~u);if(F){const fe=n.preOrderCheckHooks;null!==fe&&ly(r,fe,null)}else{const fe=n.preOrderHooks;null!==fe&&cy(r,fe,0,null),uy(r,0)}if(function tb(n){for(let r=yC(n);null!==r;r=Jf(r)){if(!(r[Rn]&lh.HasTransplantedViews))continue;const s=r[$c];for(let l=0;l<s.length;l++)xg(s[l])}}(r),gI(r,0),null!==n.contentQueries&&dI(n,r),F){const fe=n.contentCheckHooks;null!==fe&&ly(r,fe)}else{const fe=n.contentHooks;null!==fe&&cy(r,fe,1),uy(r,1)}!function tI(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let l=0;l<s.length;l++){const u=s[l];if(u<0)ll(~u);else{const h=u,_=s[++l],C=s[++l];v(_,h),C(2,r[h])}}}finally{ll(-1)}}(n,r);const G=n.components;null!==G&&dv(r,G,0);const ne=n.viewQuery;if(null!==ne&&hI(2,ne,l),F){const fe=n.viewCheckHooks;null!==fe&&ly(r,fe)}else{const fe=n.viewHooks;null!==fe&&cy(r,fe,2),uy(r,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[Bl]){for(const fe of r[Bl])fe();r[Bl]=null}r[Rn]&=-73}catch(F){throw ld(r),F}finally{null!==P&&(function sn(n,r){if(Fe(r),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(_t(n))for(let s=n.nextProducerIndex;s<n.producerNode.length;s++)It(n.producerNode[s],n.producerIndexOfThis[s]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}(P,C),function US(n){n.lView[gc]!==n&&(n.lView=null,XT.push(n))}(P)),fa()}}function gI(n,r){for(let s=yC(n);null!==s;s=Jf(s))for(let l=oo;l<s.length;l++)wp(s[l],r)}function jS(n,r,s){wp(Es(r,n),s)}function wp(n,r){Og(n)&&Yc(n,r)}function Yc(n,r){const l=n[Lt],u=n[Rn],h=n[gc];let _=!!(0===r&&16&u);if(_||=!!(64&u&&0===r),_||=!!(1024&u),_||=!(!h?.dirty||!tr(h)),_||=!1,h&&(h.dirty=!1),n[Rn]&=-9217,_)BS(l,n,l.template,n[ci]);else if(8192&u){gI(n,1);const C=l.components;null!==C&&dv(n,C,1)}}function dv(n,r,s){for(let l=0;l<r.length;l++)jS(n,r[l],s)}function Id(n,r){const s=Pu()?64:1088;for(n[Ws].changeDetectionScheduler?.notify(r);n;){n[Rn]|=s;const l=zc(n);if(Hc(n)&&!l)return n;n=l}return null}class Tc{get rootNodes(){const r=this._lView,s=r[Lt];return Qs(s,r,s.firstChild,[])}constructor(r,s,l=!0){this._lView=r,this._cdRefInjectingView=s,this.notifyErrorHandler=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ci]}set context(r){this._lView[ci]=r}get destroyed(){return!(256&~this._lView[Rn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Gi];if(Po(r)){const s=r[8],l=s?s.indexOf(this):-1;l>-1&&(mm(r,l),sa(s,l))}this._attachedToViewContainer=!1}qy(this._lView[Lt],this._lView)}onDestroy(r){wu(this._lView,r)}markForCheck(){Id(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Rn]&=-129}reattach(){$l(this._lView),this._lView[Rn]|=128}detectChanges(){this._lView[Rn]|=1024,wc(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Mt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const r=Hc(this._lView),s=this._lView[Vl];null!==s&&!r&&mp(s,this._lView),xT(this._lView[Lt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Mt(902,!1);this._appRef=r;const s=Hc(this._lView),l=this._lView[Vl];null!==l&&!s&&gp(l,this._lView),$l(this._lView)}}let Xc=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=HS}return n})();const nb=Xc,$S=class extends nb{constructor(r,s,l){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,l){const u=function Oh(n,r,s,l){const u=Fe(null);try{const h=r.tView,P=_d(n,h,s,4096&n[Rn]?4096:16,null,r,null,null,l?.injector??null,l?.embeddedViewInjector??null,l?.dehydratedView??null);P[Vl]=n[r.index];const G=n[Ul];return null!==G&&(P[Ul]=G.createEmbeddedView(h)),pI(h,P,s),P}finally{Fe(u)}}(this._declarationLView,this._declarationTContainer,r,{embeddedViewInjector:s,dehydratedView:l});return new Tc(u)}};function HS(){return Tp($r(),ft())}function Tp(n,r){return 4&n.type?new $S(r,n,Qf(n,r)):null}class kh{}const Rm=new vn("",{providedIn:"root",factory:()=>!1}),yb=new vn("");class TM{}class vb{}class qN{resolveComponentFactory(r){throw function bM(n){const r=Error(`No component factory found for ${pe(n)}.`);return r.ngComponent=n,r}(r)}}class Tv{static#e=this.NULL=new qN}class wI{}let AM=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function PM(){const n=ft(),s=Es($r().index,n);return(Bo(s)?s:n)[Bn]}()}return n})(),DM=(()=>{class n{static#e=this.\u0275prov=jt({token:n,providedIn:"root",factory:()=>null})}return n})();const TI={},Cb=new Set;function Wi(n){Cb.has(n)||(Cb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Ib(n){let r=!0;return setTimeout(()=>{r&&(r=!1,n())}),"function"==typeof b.requestAnimationFrame&&b.requestAnimationFrame(()=>{r&&(r=!1,n())}),()=>{r=!1}}function wb(n){let r=!0;return queueMicrotask(()=>{r&&n()}),()=>{r=!1}}function Tb(...n){}class Di{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new zl(!1),this.onMicrotaskEmpty=new zl(!1),this.onStable=new zl(!1),this.onError=new zl(!1),typeof Zone>"u")throw new Mt(908,!1);Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!l&&s,u.shouldCoalesceRunChangeDetection=l,u.callbackScheduled=!1,function XN(n){const r=()=>{!function YN(n){n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,Zone.root.run(()=>{Ib(()=>{n.callbackScheduled=!1,Ab(n),n.isCheckStableRunning=!0,bI(n),n.isCheckStableRunning=!1})}),Ab(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,l,u,h,_,C)=>{if(function Sb(n){return bv(n,"__ignore_ng_zone__")}(C))return s.invokeTask(u,h,_,C);try{return Pb(n),s.invokeTask(u,h,_,C)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),Db(n)}},onInvoke:(s,l,u,h,_,C,P)=>{try{return Pb(n),s.invoke(u,h,_,C,P)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function Mb(n){return bv(n,"__scheduler_tick__")}(C)&&r(),Db(n)}},onHasTask:(s,l,u,h)=>{s.hasTask(u,h),l===u&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,Ab(n),bI(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,l,u,h)=>(s.handleError(u,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(u)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Di.isInAngularZone())throw new Mt(909,!1)}static assertNotInAngularZone(){if(Di.isInAngularZone())throw new Mt(909,!1)}run(r,s,l){return this._inner.run(r,s,l)}runTask(r,s,l,u){const h=this._inner,_=h.scheduleEventTask("NgZoneEvent: "+u,r,bb,Tb,Tb);try{return h.runTask(_,s,l)}finally{h.cancelTask(_)}}runGuarded(r,s,l){return this._inner.runGuarded(r,s,l)}runOutsideAngular(r){return this._outer.run(r)}}const bb={};function bI(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Ab(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function Pb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Db(n){n._nesting--,bI(n)}class AI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zl,this.onMicrotaskEmpty=new zl,this.onStable=new zl,this.onError=new zl}run(r,s,l){return r.apply(s,l)}runGuarded(r,s,l){return r.apply(s,l)}runOutsideAngular(r){return r()}runTask(r,s,l,u){return r.apply(s,l)}}function bv(n,r){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[r]}var Fh=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Fh||{});const Ob={destroy(){}};function Pv(n,r){!r&&function Fl(n){if(!yg())throw new Mt(-203,!1)}();const s=r?.injector??cn(cs);if(!function $a(n){return"browser"===(n??cn(cs)).get(bC)}(s))return Ob;Wi("NgAfterNextRender");const l=s.get(Pp),u=l.handler??=new DI,h=r?.phase??Fh.MixedReadWrite,_=()=>{u.unregister(P),C()},C=s.get(gd).onDestroy(_),P=jc(s,()=>new Vh(h,()=>{_(),n()}));return u.register(P),{destroy:_}}class Vh{constructor(r,s){this.phase=r,this.callbackFn=s,this.zone=cn(Di),this.errorHandler=cn(ul,{optional:!0}),cn(kh,{optional:!0})?.notify(6)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(r){this.errorHandler?.handleError(r)}}}class DI{constructor(){this.executingCallbacks=!1,this.buckets={[Fh.EarlyRead]:new Set,[Fh.Write]:new Set,[Fh.MixedReadWrite]:new Set,[Fh.Read]:new Set},this.deferredCallbacks=new Set}register(r){(this.executingCallbacks?this.deferredCallbacks:this.buckets[r.phase]).add(r)}unregister(r){this.buckets[r.phase].delete(r),this.deferredCallbacks.delete(r)}execute(){this.executingCallbacks=!0;for(const r of Object.values(this.buckets))for(const s of r)s.invoke();this.executingCallbacks=!1;for(const r of this.deferredCallbacks)this.buckets[r.phase].add(r);this.deferredCallbacks.clear()}destroy(){for(const r of Object.values(this.buckets))r.clear();this.deferredCallbacks.clear()}}let Pp=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const s=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const l of s)l()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=jt({token:n,providedIn:"root",factory:()=>new n})}return n})();function Ga(n){return!!_n(n)}function Ac(n,r,s){let l=s?n.styles:null,u=s?n.classes:null,h=0;if(null!==r)for(let _=0;_<r.length;_++){const C=r[_];"number"==typeof C?h=C:1==h?u=Ce(u,C):2==h&&(l=Ce(l,C+": "+r[++_]+";"))}s?n.styles=l:n.stylesWithoutHost=l,s?n.classes=u:n.classesWithoutHost=u}class Zc extends Tv{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Oe(r);return new Bh(s,this.ngModule)}}function bd(n){const r=[];for(const s in n){if(!n.hasOwnProperty(s))continue;const l=n[s];void 0!==l&&r.push({propName:Array.isArray(l)?l[0]:l,templateName:s})}return r}class Ad{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,l){l=Sl(l);const u=this.injector.get(r,TI,l);return u!==TI||s===TI?u:this.parentInjector.get(r,s,l)}}class Bh extends vb{get inputs(){const r=this.componentDef,s=r.inputTransforms,l=bd(r.inputs);if(null!==s)for(const u of l)s.hasOwnProperty(u.propName)&&(u.transform=s[u.propName]);return l}get outputs(){return bd(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function vf(n){return n.map(Ai).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,l,u){const h=Fe(null);try{let _=(u=u||this.ngModule)instanceof po?u:u?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const C=_?new Ad(r,_):r,P=C.get(wI,null);if(null===P)throw new Mt(407,!1);const F=C.get(DM,null),fe={rendererFactory:P,sanitizer:F,inlineEffectRunner:null,afterRenderEventManager:C.get(Pp,null),changeDetectionScheduler:C.get(kh,null)},Ae=P.createRenderer(null,this.componentDef),Ue=this.componentDef.selectors[0][0]||"div",dt=l?function bS(n,r,s,l){const h=l.get(om,!1)||s===Ra.ShadowDom,_=n.selectRootElement(r,h);return function AS(n){oI(n)}(_),_}(Ae,l,this.componentDef.encapsulation,C):Ky(Ae,Ue,function MM(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Ue));let Vt=512;this.componentDef.signals?Vt|=4096:this.componentDef.onPush||(Vt|=16);let qt=null;null!==dt&&(qt=Fu(dt,C,!0));const Dt=Sh(0,null,null,1,0,null,null,null,null,null,null),rr=_d(null,Dt,null,Vt,null,null,fe,Ae,C,null,qt);let qr,Bi;pt(rr);try{const Fs=this.componentDef;let nc,zE=null;Fs.findHostDirectiveDefs?(nc=[],zE=new Map,Fs.findHostDirectiveDefs(Fs,nc,zE),nc.push(Fs)):nc=[Fs];const nk=function Is(n,r){const s=n[Lt],l=Sn;return n[l]=r,Dh(s,l,2,"#host",null)}(rr,dt),l1=function Nb(n,r,s,l,u,h,_){const C=u[Lt];!function OM(n,r,s,l){for(const u of n)r.mergedAttrs=ka(r.mergedAttrs,u.hostAttrs);null!==r.mergedAttrs&&(Ac(r,r.mergedAttrs,!0),null!==s&&nv(l,s,r))}(l,n,r,_);let P=null;null!==r&&(P=Fu(r,u[ui]));const F=h.rendererFactory.createRenderer(r,s);let G=16;s.signals?G=4096:s.onPush&&(G=64);const ne=_d(u,rI(s),null,G,u[n.index],n,h,F,null,null,P);return C.firstCreatePass&&lI(C,n,l.length-1),Am(u,ne),u[n.index]=ne}(nk,dt,Fs,nc,rr,fe,Ae);Bi=ad(Dt,Sn),dt&&function NM(n,r,s,l){if(l)xa(n,s,["ng-version","18.0.2"]);else{const{attrs:u,classes:h}=function Ef(n){const r=[],s=[];let l=1,u=2;for(;l<n.length;){let h=n[l];if("string"==typeof h)2===u?""!==h&&r.push(h,n[++l]):8===u&&s.push(h);else{if(!aa(u))break;u=h}l++}return{attrs:r,classes:s}}(r.selectors[0]);u&&xa(n,s,u),h&&h.length>0&&tv(n,s,h.join(" "))}}(Ae,Fs,dt,l),void 0!==s&&function xM(n,r,s){const l=n.projection=[];for(let u=0;u<r.length;u++){const h=s[u];l.push(null!=h?Array.from(h):null)}}(Bi,this.ngContentSelectors,s),qr=function RM(n,r,s,l,u,h){const _=$r(),C=u[Lt],P=go(_,u);lv(C,u,_,s,null,l);for(let G=0;G<s.length;G++)qs(fd(u,C,_.directiveStart+G,_),u);vd(C,u,_),P&&qs(P,u);const F=fd(u,C,_.directiveStart+_.componentOffset,_);if(n[ci]=u[ci]=F,null!==h)for(const G of h)G(F,r);return nI(C,_,u),F}(l1,Fs,nc,zE,rr,[kM]),pI(Dt,rr,null)}finally{fa()}return new Rb(this.componentType,qr,Qf(Bi,rr),rr,Bi)}finally{Fe(h)}}}class Rb extends TM{constructor(r,s,l,u,h){super(),this.location=l,this._rootLView=u,this._tNode=h,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new Tc(u,void 0,!1),this.componentType=r}setInput(r,s){const l=this._tNode.inputs;let u;if(null!==l&&(u=l[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const h=this._rootLView;fI(h[Lt],h,u,r,s),this.previousInputValues.set(r,s),Id(Es(this._tNode.index,h),1)}}get injector(){return new Do(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function kM(){const n=$r();Su(ft()[Lt],n)}let Dv=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=xb}return n})();function xb(){return Fb($r(),ft())}const Dp=Dv,kb=class extends Dp{constructor(r,s,l){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=l}get element(){return Qf(this._hostTNode,this._hostLView)}get injector(){return new Do(this._hostTNode,this._hostLView)}get parentInjector(){const r=zf(this._hostTNode,this._hostLView);if(tC(r)){const s=Gf(r,this._hostLView),l=Hf(r);return new Do(s[Lt].data[l+8],s)}return new Do(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Sp(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-oo}createEmbeddedView(r,s,l){let u,h;"number"==typeof l?u=l:null!=l&&(u=l.index,h=l.injector);const C=r.createEmbeddedViewImpl(s||{},h,null);return this.insertImpl(C,u,Cd(this._hostTNode,null)),C}createComponent(r,s,l,u,h){const _=r&&!function rl(n){return"function"==typeof n}(r);let C;if(_)C=s;else{const Ue=s||{};C=Ue.index,l=Ue.injector,u=Ue.projectableNodes,h=Ue.environmentInjector||Ue.ngModuleRef}const P=_?r:new Bh(Oe(r)),F=l||this.parentInjector;if(!h&&null==P.ngModule){const dt=(_?F:this.parentInjector).get(po,null);dt&&(h=dt)}Oe(P.componentType??{});const Ae=P.create(F,u,null,h);return this.insertImpl(Ae.hostView,C,Cd(this._hostTNode,null)),Ae}insert(r,s){return this.insertImpl(r,s,!0)}insertImpl(r,s,l){const u=r._lView;if(function Rg(n){return Po(n[Gi])}(u)){const C=this.indexOf(r);if(-1!==C)this.detach(C);else{const P=u[Gi],F=new kb(P,P[io],P[Gi]);F.detach(F.indexOf(r))}}const h=this._adjustIndex(s),_=this._lContainer;return function Uu(n,r,s,l=!0){const u=r[Lt];if(function gm(n,r,s,l){const u=oo+l,h=s.length;l>0&&(s[u-1][Va]=r),l<h-oo?(r[Va]=s[u],Rl(s,oo+l,r)):(s.push(r),r[Va]=null),r[Gi]=s;const _=r[Vl];null!==_&&s!==_&&gp(_,r);const C=r[Ul];null!==C&&C.insertView(n),$l(r),r[Rn]|=128}(u,r,n,s),l){const _=ym(s,n),C=r[Bn],P=Yy(C,n[il]);null!==P&&function wS(n,r,s,l,u,h){l[li]=u,l[io]=r,vm(n,l,s,1,u,h)}(u,n[io],C,r,P,_)}const h=r[Uo];null!==h&&null!==h.firstChild&&(h.firstChild=null)}(_,u,h,l),r.attachToViewContainerRef(),Rl(OI(_),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Sp(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),l=mm(this._lContainer,s);l&&(sa(OI(this._lContainer),s),qy(l[Lt],l))}detach(r){const s=this._adjustIndex(r,-1),l=mm(this._lContainer,s);return l&&null!=sa(OI(this._lContainer),s)?new Tc(l):null}_adjustIndex(r,s=0){return r??this.length+s}};function Sp(n){return n[8]}function OI(n){return n[8]||(n[8]=[])}function Fb(n,r){let s;const l=r[n.index];return Po(l)?s=l:(s=WT(l,r,null,n),r[n.index]=s,Am(r,s)),Fm(s,r,n,l),new kb(s,n,r)}let Fm=function NI(n,r,s,l){if(n[il])return;let u;u=8&s.type?vr(l):function km(n,r){const s=n[Bn],l=s.createComment(""),u=go(r,n);return _p(s,Yy(s,u),l,function Xy(n,r){return n.nextSibling(r)}(s,u),!1),l}(r,s),n[il]=u},Sv=()=>!1;class Mv{constructor(r){this.queryList=r,this.matches=null}clone(){return new Mv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Lm{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const l=null!==r.contentQueries?r.contentQueries[0]:s.length,u=[];for(let h=0;h<l;h++){const _=s.getByIndex(h);u.push(this.queries[_.indexInDeclarationView].clone())}return new Lm(u)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}finishViewCreation(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==Nv(r,s).matches&&this.queries[s].setDirty()}}class xI{constructor(r,s,l=null){this.flags=s,this.read=l,this.predicate="string"==typeof r?function VM(n){return n.split(",").map(r=>r.trim())}(r):r}}class Ov{constructor(r=[]){this.queries=r}elementStart(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let l=0;l<this.length;l++){const u=null!==s?s.length:0,h=this.getByIndex(l).embeddedTView(r,u);h&&(h.indexInDeclarationView=l,null!==s?s.push(h):s=[h])}return null!==s?new Ov(s):null}template(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Vm{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new Vm(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1&~this.metadata.flags){const s=this._declarationNodeIndex;let l=r.parent;for(;null!==l&&8&l.type&&l.index!==s;)l=l.parent;return s===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const l=this.metadata.predicate;if(Array.isArray(l))for(let u=0;u<l.length;u++){const h=l[u];this.matchTNodeWithReadOption(r,s,FM(s,h)),this.matchTNodeWithReadOption(r,s,Wf(s,r,h,!1,!1))}else l===Xc?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Wf(s,r,l,!1,!1))}matchTNodeWithReadOption(r,s,l){if(null!==l){const u=this.metadata.read;if(null!==u)if(u===Qg||u===Dv||u===Xc&&4&s.type)this.addMatch(s.index,-2);else{const h=Wf(s,r,u,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,l)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function FM(n,r){const s=n.localNames;if(null!==s)for(let l=0;l<s.length;l+=2)if(s[l]===r)return s[l+1];return null}function LM(n,r,s,l){return-1===s?function Bb(n,r){return 11&n.type?Qf(n,r):4&n.type?Tp(n,r):null}(r,n):-2===s?function kI(n,r,s){return s===Qg?Qf(r,n):s===Xc?Tp(r,n):s===Dv?Fb(r,n):void 0}(n,r,l):fd(n,n[Lt],s,r)}function Rv(n,r,s,l){const u=r[Ul].queries[l];if(null===u.matches){const h=n.data,_=s.matches,C=[];for(let P=0;null!==_&&P<_.length;P+=2){const F=_[P];C.push(F<0?null:LM(r,h[F],_[P+1],s.metadata.read))}u.matches=C}return u.matches}function Um(n,r,s,l){const u=n.queries.getByIndex(s),h=u.matches;if(null!==h){const _=Rv(n,r,u,s);for(let C=0;C<h.length;C+=2){const P=h[C];if(P>0)l.push(_[C/2]);else{const F=h[C+1],G=r[-P];for(let ne=oo;ne<G.length;ne++){const fe=G[ne];fe[Vl]===fe[Gi]&&Um(fe[Lt],fe,F,l)}if(null!==G[$c]){const ne=G[$c];for(let fe=0;fe<ne.length;fe++){const Ae=ne[fe];Um(Ae[Lt],Ae,F,l)}}}}}return l}function jb(n,r,s){const l=new wy(!(4&~s));return function jT(n,r,s,l){const u=KT(r);u.push(s),n.firstCreatePass&&qT(n).push(l,u.length-1)}(n,r,l,l.destroy),(r[Ul]??=new Lm).queries.push(new Mv(l))-1}function Hb(n,r,s){null===n.queries&&(n.queries=new Ov),n.queries.track(new Vm(r,s))}function Nv(n,r){return n.queries.getByIndex(r)}function VI(n,r){const s=n[Lt],l=Nv(s,r);return l.crossesNgTemplate?Um(s,n,r,[]):Rv(s,n,l,r)}function UI(n){return function zb(n){return"function"==typeof n&&void 0!==n[De]}(n)&&"function"==typeof n.set}function Wa(n){let r=function Lv(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const l=[n];for(;r;){let u;if(ol(n))u=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Mt(903,!1);u=r.\u0275dir}if(u){if(s){l.push(u);const _=n;_.inputs=Vv(n.inputs),_.inputTransforms=Vv(n.inputTransforms),_.declaredInputs=Vv(n.declaredInputs),_.outputs=Vv(n.outputs);const C=u.hostBindings;C&&GI(n,C);const P=u.viewQuery,F=u.contentQueries;if(P&&Zb(n,P),F&&$h(n,F),QM(n,u),oe(n.outputs,u.outputs),ol(u)&&u.data.animation){const G=n.data;G.animation=(G.animation||[]).concat(u.data.animation)}}const h=u.features;if(h)for(let _=0;_<h.length;_++){const C=h[_];C&&C.ngInherit&&C(n),C===Wa&&(s=!1)}}r=Object.getPrototypeOf(r)}!function YM(n){let r=0,s=null;for(let l=n.length-1;l>=0;l--){const u=n[l];u.hostVars=r+=u.hostVars,u.hostAttrs=ka(u.hostAttrs,s=ka(s,u.hostAttrs))}}(l)}function QM(n,r){for(const s in r.inputs){if(!r.inputs.hasOwnProperty(s)||n.inputs.hasOwnProperty(s))continue;const l=r.inputs[s];if(void 0!==l&&(n.inputs[s]=l,n.declaredInputs[s]=r.declaredInputs[s],null!==r.inputTransforms)){const u=Array.isArray(l)?l[0]:l;if(!r.inputTransforms.hasOwnProperty(u))continue;n.inputTransforms??={},n.inputTransforms[u]=r.inputTransforms[u]}}}function Vv(n){return n===Kr?{}:n===un?[]:n}function Zb(n,r){const s=n.viewQuery;n.viewQuery=s?(l,u)=>{r(l,u),s(l,u)}:r}function $h(n,r){const s=n.contentQueries;n.contentQueries=s?(l,u,h)=>{r(l,u,h),s(l,u,h)}:r}function GI(n,r){const s=n.hostBindings;n.hostBindings=s?(l,u)=>{r(l,u),s(l,u)}:r}function Hm(n){const r=n.inputConfig,s={};for(const l in r)if(r.hasOwnProperty(l)){const u=r[l];Array.isArray(u)&&u[3]&&(s[l]=u[3])}n.inputTransforms=s}class eu{}class zI{}function tu(n,r){return new gl(n,r??null,[])}class gl extends eu{constructor(r,s,l){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Zc(this);const u=_n(r);this._bootstrapComponents=hl(u.bootstrap),this._r3Injector=Cy(r,s,[{provide:eu,useValue:this},{provide:Tv,useValue:this.componentFactoryResolver},...l],pe(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class KI extends zI{constructor(r){super(),this.moduleType=r}create(r){return new gl(this.moduleType,r,[])}}class iA extends eu{constructor(r){super(),this.componentFactoryResolver=new Zc(this),this.instance=null;const s=new La([...r.providers,{provide:eu,useValue:this},{provide:Tv,useValue:this.componentFactoryResolver}],r.parent||kl(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function Gm(n,r,s=null){return new iA({providers:n,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let Dd=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Hr.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(l){return new(l||n)};static#t=this.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Bv(n){return!!YI(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function YI(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function ml(n,r,s){return n[r]=s}function Vi(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function ma(n,r,s,l){const u=Vi(n,r,s);return Vi(n,r+1,l)||u}function Km(n,r,s,l,u,h,_,C,P,F){const G=s+Sn,ne=r.firstCreatePass?function Wm(n,r,s,l,u,h,_,C,P){const F=r.consts,G=Dh(r,n,4,_||null,C||null);sI(r,s,G,Ks(F,P)),Su(r,G);const ne=G.tView=Sh(2,G,l,u,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,F,null);return null!==r.queries&&(r.queries.template(r,G),ne.queries=r.queries.embeddedTView(G)),G}(G,r,n,l,u,h,_,C,P):r.data[G];ha(ne,!1);const fe=jv(r,n,ne,s);Hl()&&_m(r,n,fe,ne),qs(fe,n);const Ae=WT(fe,n,fe,ne);return n[G]=Ae,Am(n,Ae),function RI(n,r,s){return Sv(n,r,s)}(Ae,ne,n),yu(ne)&&wm(r,n,ne),null!=P&&sv(n,ne,F),ne}function Ki(n,r,s,l,u,h,_,C){const P=ft(),F=yr();return Km(P,F,n,r,s,l,u,Ks(F.consts,h),_,C),Ki}let jv=function sA(n,r,s,l){return ls(!0),r[Bn].createComment("")};function s0(n,r,s,l){const u=ft();return Vi(u,sl(),r)&&(yr(),pl(si(),u,n,r,s,l)),s0}function Xh(n,r,s,l,u,h){const C=ma(n,function Ec(){return Zn.lFrame.bindingIndex}(),s,u);return al(2),C?r+Un(s)+l+Un(u)+h:sr}function nE(n,r){return n<<17|r<<2}function Ud(n){return n>>17&32767}function u0(n){return 2|n}function Zh(n){return(131068&n)>>2}function d0(n,r){return-131069&n|r<<2}function h0(n){return 1|n}function t_(n,r,s,l){const u=n[s+1],h=null===r;let _=l?Ud(u):Zh(u),C=!1;for(;0!==_&&(!1===C||h);){const F=n[_+1];SA(n[_],r)&&(C=!0,n[_+1]=l?h0(F):u0(F)),_=l?Ud(F):Zh(F)}C&&(n[s+1]=l?u0(u):h0(u))}function SA(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Gs(n,r)>=0}function m0(n,r,s){const l=ft();return Vi(l,sl(),r)&&ga(yr(),si(),l,n,r,l[Bn],s,!1),m0}function _0(n,r,s,l,u){const _=u?"class":"style";fI(n,s,r.inputs[_],_,l)}function iE(n,r,s){return Pc(n,r,s,!1),iE}function r_(n,r){return Pc(n,r,null,!0),r_}function Pc(n,r,s,l){const u=ft(),h=yr(),_=al(2);h.firstUpdatePass&&function y0(n,r,s,l){const u=n.data;if(null===u[s+1]){const h=u[as()],_=function o_(n,r){return r>=n.expandoStartIndex}(n,s);(function Gp(n,r){return!!(n.flags&(r?8:16))})(h,l)&&null===r&&!_&&(r=!1),r=function wO(n,r,s,l){const u=function I(n){const r=Zn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=l?r.residualClasses:r.residualStyles;if(null===u)0===(l?r.classBindings:r.styleBindings)&&(s=$p(s=jd(null,n,r,s,l),r.attrs,l),h=null);else{const _=r.directiveStylingLast;if(-1===_||n[_]!==u)if(s=jd(u,n,r,s,l),null===h){let P=function v0(n,r,s){const l=s?r.classBindings:r.styleBindings;if(0!==Zh(l))return n[Ud(l)]}(n,r,l);void 0!==P&&Array.isArray(P)&&(P=jd(null,n,r,P[1],l),P=$p(P,r.attrs,l),function oE(n,r,s,l){n[Ud(s?r.classBindings:r.styleBindings)]=l}(n,r,l,P))}else h=function TO(n,r,s){let l;const u=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<u;h++)l=$p(l,n[h].hostAttrs,s);return $p(l,r.attrs,s)}(n,r,l)}return void 0!==h&&(l?r.residualClasses=h:r.residualStyles=h),s}(u,h,r,l),function EO(n,r,s,l,u,h){let _=h?r.classBindings:r.styleBindings,C=Ud(_),P=Zh(_);n[l]=s;let G,F=!1;if(Array.isArray(s)?(G=s[1],(null===G||Gs(s,G)>0)&&(F=!0)):G=s,u)if(0!==P){const fe=Ud(n[C+1]);n[l+1]=nE(fe,C),0!==fe&&(n[fe+1]=d0(n[fe+1],l)),n[C+1]=function _O(n,r){return 131071&n|r<<17}(n[C+1],l)}else n[l+1]=nE(C,0),0!==C&&(n[C+1]=d0(n[C+1],l)),C=l;else n[l+1]=nE(P,0),0===C?C=l:n[P+1]=d0(n[P+1],l),P=l;F&&(n[l+1]=u0(n[l+1])),t_(n,G,l,!0),t_(n,G,l,!1),function DA(n,r,s,l,u){const h=u?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&Gs(h,r)>=0&&(s[l+1]=h0(s[l+1]))}(r,G,n,l,h),_=nE(C,P),h?r.classBindings=_:r.styleBindings=_}(u,h,r,s,_,l)}}(h,n,_,l),r!==sr&&Vi(u,_,r)&&function aE(n,r,s,l,u,h,_,C){if(!(3&r.type))return;const P=n.data,F=P[C+1],G=function PA(n){return!(1&~n)}(F)?lE(P,r,s,u,Zh(F),_):void 0;Hp(G)||(Hp(h)||function mO(n){return!(2&~n)}(F)&&(h=lE(P,null,s,u,C,_)),function ZC(n,r,s,l,u){if(r)u?n.addClass(s,l):n.removeClass(s,l);else{let h=-1===l.indexOf("-")?void 0:GC.DashCase;null==u?n.removeStyle(s,l,h):("string"==typeof u&&u.endsWith("!important")&&(u=u.slice(0,-10),h|=GC.Important),n.setStyle(s,l,u,h))}}(l,_,Cu(as(),s),u,h))}(h,h.data[as()],u,u[Bn],n,u[_+1]=function bO(n,r){return null==n||""===n||("string"==typeof r?n+=r:"object"==typeof n&&(n=pe(ja(n)))),n}(r,s),l,_)}function jd(n,r,s,l,u){let h=null;const _=s.directiveEnd;let C=s.directiveStylingLast;for(-1===C?C=s.directiveStart:C++;C<_&&(h=r[C],l=$p(l,h.hostAttrs,u),h!==n);)C++;return null!==n&&(s.directiveStylingLast=C),l}function $p(n,r,s){const l=s?1:2;let u=-1;if(null!==r)for(let h=0;h<r.length;h++){const _=r[h];"number"==typeof _?u=_:u===l&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Vo(n,_,!!s||r[++h]))}return void 0===n?null:n}function lE(n,r,s,l,u,h){const _=null===r;let C;for(;u>0;){const P=n[u],F=Array.isArray(P),G=F?P[1]:P,ne=null===G;let fe=s[u+1];fe===sr&&(fe=ne?un:void 0);let Ae=ne?_s(fe,l):G===l?fe:void 0;if(F&&!Hp(Ae)&&(Ae=_s(P,l)),Hp(Ae)&&(C=Ae,_))return C;const Ue=n[u+1];u=_?Ud(Ue):Zh(Ue)}if(null!==r){let P=h?r.residualClasses:r.residualStyles;null!=P&&(C=_s(P,l))}return C}function Hp(n){return void 0!==n}function fE(n,r,s,l){const u=ft(),h=yr(),_=Sn+n,C=u[Bn],P=h.firstCreatePass?function d_(n,r,s,l,u,h){const _=r.consts,P=Dh(r,n,2,l,Ks(_,u));return sI(r,s,P,Ks(_,h)),null!==P.attrs&&Ac(P,P.attrs,!1),null!==P.mergedAttrs&&Ac(P,P.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,P),P}(_,h,u,r,s,l):h.data[_],F=zp(h,u,P,C,r,n);u[_]=F;const G=yu(P);return ha(P,!0),nv(C,F,P),!function Np(n){return!(32&~n.flags)}(P)&&Hl()&&_m(h,u,F,P),0===function ry(){return Zn.lFrame.elementDepthCount}()&&qs(F,u),function Cs(){Zn.lFrame.elementDepthCount++}(),G&&(wm(h,u,P),nI(h,P,u)),null!==l&&sv(u,P),fE}function h_(){let n=$r();vc()?$o():(n=n.parent,ha(n,!1));const r=n;(function yc(n){return Zn.skipHydrationRootTNode===n})(r)&&function Vg(){Zn.skipHydrationRootTNode=null}(),function kg(){Zn.lFrame.elementDepthCount--}();const s=yr();return s.firstCreatePass&&(Su(s,n),Rf(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Sw(n){return!!(8&n.flags)}(r)&&_0(s,r,ft(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function eC(n){return!!(16&n.flags)}(r)&&_0(s,r,ft(),r.stylesWithoutHost,!1),h_}function f_(n,r,s,l){return fE(n,r,s,l),h_(),f_}let zp=(n,r,s,l,u,h)=>(ls(!0),Ky(l,u,function cl(){return Zn.lFrame.currentNamespace}()));function g_(n,r,s){const l=ft(),u=yr(),h=n+Sn,_=u.firstCreatePass?function Yl(n,r,s,l,u){const h=r.consts,_=Ks(h,l),C=Dh(r,n,8,"ng-container",_);return null!==_&&Ac(C,_,!0),sI(r,s,C,Ks(h,u)),null!==r.queries&&r.queries.elementStart(r,C),C}(h,u,l,r,s):u.data[h];ha(_,!0);const C=P0(u,l,_,n);return l[h]=C,Hl()&&_m(u,l,C,_),qs(C,l),yu(_)&&(wm(u,l,_),nI(u,_,l)),null!=s&&sv(l,_),g_}function pE(){let n=$r();const r=yr();return vc()?$o():(n=n.parent,ha(n,!1)),r.firstCreatePass&&(Su(r,n),Rf(n)&&r.queries.elementEnd(n)),pE}function Wp(n,r,s){return g_(n,r,s),pE(),Wp}let P0=(n,r,s,l)=>(ls(!0),zC(r[Bn],""));function jA(){return ft()}const ef=void 0;var HA=["en",[["a","p"],["AM","PM"],ef],[["AM","PM"],ef,ef],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ef,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ef,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ef,"{1} 'at' {0}",ef],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function FO(n){const s=Math.floor(Math.abs(n)),l=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===l?1:5}];let su={};function gE(n){const r=function VO(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=m_(r);if(s)return s;const l=r.split("-")[0];if(s=m_(l),s)return s;if("en"===l)return HA;throw new Mt(701,!1)}function mE(n){return gE(n)[$d.PluralCase]}function m_(n){return n in su||(su[n]=b.ng&&b.ng.common&&b.ng.common.locales&&b.ng.common.locales[n]),su[n]}var $d=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}($d||{});const tf="en-US";let S0=tf;let lP=(n,r,s)=>{};function V0(n,r,s,l){const u=ft(),h=yr(),_=$r();return Cl(h,u,u[Bn],_,n,r,l),V0}function Cl(n,r,s,l,u,h,_){const C=yu(l),F=n.firstCreatePass&&qT(n),G=r[ci],ne=KT(r);let fe=!0;if(3&l.type||_){const dt=go(l,r),Vt=_?_(dt):dt,qt=ne.length,Dt=_?qr=>_(vr(qr[l.index])):l.index;let rr=null;if(!_&&C&&(rr=function cR(n,r,s,l){const u=n.cleanup;if(null!=u)for(let h=0;h<u.length-1;h+=2){const _=u[h];if(_===s&&u[h+1]===l){const C=r[rd],P=u[h+2];return C.length>P?C[P]:null}"string"==typeof _&&(h+=2)}return null}(n,r,u,l.index)),null!==rr)(rr.__ngLastListenerFn__||rr).__ngNextListenerFn__=h,rr.__ngLastListenerFn__=h,fe=!1;else{h=wE(l,r,G,h),lP(dt,u,h);const qr=s.listen(Vt,u,h);ne.push(h,qr),F&&F.push(u,Dt,qt,qt+1)}}else h=wE(l,r,G,h);const Ae=l.outputs;let Ue;if(fe&&null!==Ae&&(Ue=Ae[u])){const dt=Ue.length;if(dt)for(let Vt=0;Vt<dt;Vt+=2){const Bi=r[Ue[Vt]][Ue[Vt+1]].subscribe(h),Fs=ne.length;ne.push(h,Bi),F&&F.push(u,l.index,Fs,-(Fs+1))}}}function dP(n,r,s,l){const u=Fe(null);try{return jl(6,r,s),!1!==s(l)}catch(h){return Pm(n,h),!1}finally{jl(7,r,s),Fe(u)}}function wE(n,r,s,l){return function u(h){if(h===Function)return l;Id(n.componentOffset>-1?Es(n.index,r):r,5);let C=dP(r,s,l,h),P=u.__ngNextListenerFn__;for(;P;)C=dP(r,s,P,h)&&C,P=P.__ngNextListenerFn__;return C}}function hP(n=1){return function dd(n){return(Zn.lFrame.contextLView=function fh(n,r){for(;n>0;)r=r[ki],n--;return r}(n,Zn.lFrame.contextLView))[ci]}(n)}function EP(n,r,s,l){!function $b(n,r,s,l){const u=yr();if(u.firstCreatePass){const h=$r();Hb(u,new xI(r,s,l),h.index),function Gb(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(u,n),!(2&~s)&&(u.staticContentQueries=!0)}return jb(u,ft(),s)}(n,r,s,l)}function CP(n,r,s){!function LI(n,r,s){const l=yr();return l.firstCreatePass&&(Hb(l,new xI(n,r,s),-1),!(2&~r)&&(l.staticViewQueries=!0)),jb(l,ft(),r)}(n,r,s)}function IP(n){const r=ft(),s=yr(),l=L();X(l+1);const u=Nv(s,l);if(n.dirty&&function Mg(n){return!(4&~n[Rn])}(r)===!(2&~u.metadata.flags)){if(null===u.matches)n.reset([]);else{const h=VI(r,l);n.reset(h,qw),n.notifyOnChanges()}return!0}return!1}function wP(){return function FI(n,r){return n[Ul].queries[r].queryList}(ft(),L())}function TP(n){return Iu(function Vf(){return Zn.lFrame.contextLView}(),Sn+n)}function j0(n,r=""){const s=ft(),l=yr(),u=n+Sn,h=l.firstCreatePass?Dh(l,u,1,r,null):l.data[u],_=$0(l,s,h,r,n);s[u]=_,Hl()&&_m(l,s,_,h),ha(h,!1)}let $0=(n,r,s,l,u)=>(ls(!0),function NT(n,r){return n.createText(r)}(r[Bn],l));function bE(n){return E_("",n,""),bE}function E_(n,r,s){const l=ft(),u=function Yh(n,r,s,l){return Vi(n,sl(),s)?r+Un(s)+l:sr}(l,n,r,s);return u!==sr&&Ed(l,as(),u),E_}function H0(n,r,s,l,u){const h=ft(),_=Xh(h,n,r,s,l,u);return _!==sr&&Ed(h,as(),_),H0}function W0(n,r,s){UI(r)&&(r=r());const l=ft();return Vi(l,sl(),r)&&ga(yr(),si(),l,n,r,l[Bn],s,!1),W0}function K0(n,r){const s=UI(n);return s&&n.set(r),s}function q0(n,r){const s=ft(),l=yr(),u=$r();return Cl(l,s,s[Bn],u,n,r),q0}function Q0(n,r,s,l,u){if(n=mt(n),Array.isArray(n))for(let h=0;h<n.length;h++)Q0(n[h],r,s,l,u);else{const h=yr(),_=ft(),C=$r();let P=vs(n)?n:mt(n.provide);const F=mg(n),G=1048575&C.providerIndexes,ne=C.directiveStart,fe=C.providerIndexes>>20;if(vs(n)||!n.multi){const Ae=new Bg(F,u,Cm),Ue=X0(P,r,u?G:G+fe,ne);-1===Ue?(iC($g(C,_),h,P),Y0(h,n,r.length),r.push(P),C.directiveStart++,C.directiveEnd++,u&&(C.providerIndexes+=1048576),s.push(Ae),_.push(Ae)):(s[Ue]=Ae,_[Ue]=Ae)}else{const Ae=X0(P,r,G+fe,ne),Ue=X0(P,r,G,G+fe),Vt=Ue>=0&&s[Ue];if(u&&!Vt||!u&&!(Ae>=0&&s[Ae])){iC($g(C,_),h,P);const qt=function TR(n,r,s,l,u){const h=new Bg(n,s,Cm);return h.multi=[],h.index=r,h.componentProviders=0,BP(h,u,l&&!s),h}(u?wR:IR,s.length,u,l,F);!u&&Vt&&(s[Ue].providerFactory=qt),Y0(h,n,r.length,0),r.push(P),C.directiveStart++,C.directiveEnd++,u&&(C.providerIndexes+=1048576),s.push(qt),_.push(qt)}else Y0(h,n,Ae>-1?Ae:Ue,BP(s[u?Ue:Ae],F,!u&&l));!u&&l&&Vt&&s[Ue].componentProviders++}}}function Y0(n,r,s,l){const u=vs(r),h=function W_(n){return!!n.useClass}(r);if(u||h){const P=(h?mt(r.useClass):r).prototype.ngOnDestroy;if(P){const F=n.destroyHooks||(n.destroyHooks=[]);if(!u&&r.multi){const G=F.indexOf(s);-1===G?F.push(s,[l,P]):F[G+1].push(l,P)}else F.push(s,P)}}}function BP(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function X0(n,r,s,l){for(let u=s;u<l;u++)if(r[u]===n)return u;return-1}function IR(n,r,s,l){return J0(this.multi,[])}function wR(n,r,s,l){const u=this.multi;let h;if(this.providerFactory){const _=this.providerFactory.componentProviders,C=fd(s,s[Lt],this.providerFactory.index,l);h=C.slice(0,_),J0(u,h);for(let P=_;P<C.length;P++)h.push(C[P])}else h=[],J0(u,h);return h}function J0(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function jP(n,r=[]){return s=>{s.providersResolver=(l,u)=>function UP(n,r,s){const l=yr();if(l.firstCreatePass){const u=ol(n);Q0(s,l.data,l.blueprint,u,!0),Q0(r,l.data,l.blueprint,u,!1)}}(l,u?u(n):n,r)}}let bR=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const l=dc(0,s.type),u=l.length>0?Gm([l],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,u)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=jt({token:n,providedIn:"environment",factory:()=>new n(Rr(po))})}return n})();function i(n){Wi("NgStandalone"),n.getStandaloneInjector=r=>r.get(bR).getOrCreateStandaloneInjector(n)}function d(n,r,s,l){return qe(ft(),Ho(),n,r,s,l)}function $e(n,r){const s=n[r];return s===sr?void 0:s}function qe(n,r,s,l,u,h){const _=r+s;return Vi(n,_,u)?ml(n,_+1,h?l.call(h,u):l(u)):$e(n,_+1)}function Yn(n,r){const s=yr();let l;const u=n+Sn;s.firstCreatePass?(l=function er(n,r){if(r)for(let s=r.length-1;s>=0;s--){const l=r[s];if(n===l.name)return l}}(r,s.pipeRegistry),s.data[u]=l,l.onDestroy&&(s.destroyHooks??=[]).push(u,l.onDestroy)):l=s.data[u];const h=l.factory||(l.factory=tl(l.type)),C=le(Cm);try{const P=py(!1),F=h();return py(P),function Ex(n,r,s,l){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=l}(s,ft(),u,F),F}finally{le(C)}}function Pe(n,r,s){const l=n+Sn,u=ft(),h=Iu(u,l);return Il(u,l)?qe(u,Ho(),r,h.transform,s,h):h.transform(s)}function Ve(n,r,s,l){const u=n+Sn,h=ft(),_=Iu(h,u);return Il(h,u)?function kt(n,r,s,l,u,h,_){const C=r+s;return ma(n,C,u,h)?ml(n,C+2,_?l.call(_,u,h):l(u,h)):$e(n,C+2)}(h,Ho(),r,_.transform,s,l,_):_.transform(s,l)}function Il(n,r){return n[Lt].data[r].pure}function Jp(n,r){return Tp(n,r)}class tg{constructor(r){this.full=r;const s=r.split(".");this.major=s[0],this.minor=s[1],this.patch=s.slice(2).join(".")}}const kR=new tg("18.0.2");let tD=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(l){return new(l||n)};static#t=this.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const fD=new vn(""),qd=new vn("");let BE,Wu=(()=>{class n{constructor(s,l,u){this._ngZone=s,this.registry=l,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,BE||(function UE(n){BE=n}(u),u.addToWindow(l)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Di.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb()}});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(s)||(clearTimeout(l.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,l,u){let h=-1;l&&l>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==h),s()},l)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:u})}whenStable(s,l,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,l,u),this._runCallbacksIfReady()}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,l,u){return[]}static#e=this.\u0275fac=function(l){return new(l||n)(Rr(Di),Rr(R_),Rr(qd))};static#t=this.\u0275prov=jt({token:n,factory:n.\u0275fac})}return n})(),R_=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,l){this._applications.set(s,l)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,l=!0){return BE?.findTestabilityInTree(this,s,l)??null}static#e=this.\u0275fac=function(l){return new(l||n)};static#t=this.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function Mi(n){return!!n&&"function"==typeof n.then}function N_(n){return!!n&&"function"==typeof n.subscribe}const rg=new vn("");let uf=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,l)=>{this.resolve=s,this.reject=l}),this.appInits=cn(rg,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const u of this.appInits){const h=u();if(Mi(h))s.push(h);else if(N_(h)){const _=new Promise((C,P)=>{h.subscribe({complete:C,error:P})});s.push(_)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{l()}).catch(u=>{this.reject(u)}),0===s.length&&l(),this.initialized=!0}static#e=this.\u0275fac=function(l){return new(l||n)};static#t=this.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const jE=new vn("");function Ku(n,r){return Array.isArray(r)?r.reduce(Ku,n):{...n,...r}}let ec=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=cn(Kg),this.afterRenderEffectManager=cn(Pp),this.zonelessEnabled=cn(Rm),this.externalTestViews=new Set,this.beforeRender=new Qr.B,this.afterTick=new Qr.B,this.componentTypes=[],this.components=[],this.isStable=cn(Dd).hasPendingTasks.pipe((0,lr.T)(s=>!s)),this._injector=cn(po)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,l){const u=s instanceof vb;if(!this._injector.get(uf).done)throw!u&&En(s),new Mt(405,!1);let _;_=u?s:this._injector.get(Tv).resolveComponentFactory(s),this.componentTypes.push(_.componentType);const C=function jR(n){return n.isBoundToModule}(_)?void 0:this._injector.get(eu),F=_.create(cs.NULL,[],l||_.selector,C),G=F.location.nativeElement,ne=F.injector.get(fD,null);return ne?.registerApplication(G),F.onDestroy(()=>{this.detachView(F.hostView),x_(this.components,F),ne?.unregisterApplication(G)}),this._loadComponent(F),F}tick(){this._tick(!0)}_tick(s){if(this._runningTick)throw new Mt(101,!1);const l=Fe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(s)}catch(u){this.internalErrorHandler(u)}finally{this._runningTick=!1,Fe(l),this.afterTick.next()}}detectChangesInAttachedViews(s){let l=null;this._injector.destroyed||(l=this._injector.get(wI,null,{optional:!0}));let u=0;const h=this.afterRenderEffectManager;for(;u<10;){const _=0===u;if(s||!_){this.beforeRender.next(_);for(let{_lView:C,notifyErrorHandler:P}of this._views)HR(C,P,_,this.zonelessEnabled)}else l?.begin?.(),l?.end?.();if(u++,h.executeInternalCallbacks(),!this.allViews.some(({_lView:C})=>_c(C))&&(h.execute(),!this.allViews.some(({_lView:C})=>_c(C))))break}}attachView(s){const l=s;this._views.push(l),l.attachToAppRef(this)}detachView(s){const l=s;x_(this._views,l),l.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const l=this._injector.get(jE,[]);[...this._bootstrapListeners,...l].forEach(u=>u(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>x_(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Mt(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(l){return new(l||n)};static#t=this.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function x_(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}function HR(n,r,s,l){(s||_c(n))&&wc(n,r,s&&!l?0:1)}class GR{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let zR=(()=>{class n{compileModuleSync(s){return new KI(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const l=this.compileModuleSync(s),h=hl(_n(s).declarations).reduce((_,C)=>{const P=Oe(C);return P&&_.push(new Bh(P)),_},[]);return new GR(l,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(l){return new(l||n)};static#t=this.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$E=(()=>{class n{constructor(){this.zone=cn(Di),this.changeDetectionScheduler=cn(kh),this.applicationRef=cn(ec)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||n)};static#t=this.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hf({ngZoneFactory:n,ignoreChangesOutsideZone:r}){return n??=()=>new Di(L_()),[{provide:Di,useFactory:n},{provide:zs,multi:!0,useFactory:()=>{const s=cn($E,{optional:!0});return()=>s.initialize()}},{provide:zs,multi:!0,useFactory:()=>{const s=cn(_o);return()=>{s.initialize()}}},{provide:Kg,useFactory:F_},!0===r?{provide:yb,useValue:!0}:[]]}function F_(){const n=cn(Di),r=cn(ul);return s=>n.runOutsideAngular(()=>r.handleError(s))}function L_(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let _o=(()=>{class n{constructor(){this.subscription=new jn.yU,this.initialized=!1,this.zone=cn(Di),this.pendingTasks=cn(Dd)}initialize(){if(this.initialized)return;this.initialized=!0;let s=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(s=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Di.assertNotInAngularZone(),queueMicrotask(()=>{null!==s&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(s),s=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Di.assertInAngularZone(),s??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(l){return new(l||n)};static#t=this.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sg=(()=>{class n{constructor(){this.appRef=cn(ec),this.taskService=cn(Dd),this.ngZone=cn(Di),this.zonelessEnabled=cn(Rm),this.disableScheduling=cn(yb,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new jn.yU,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof AI||!this.zoneIsDefined)}notify(s){if(!this.zonelessEnabled&&5===s)return;switch(s){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const l=this.useMicrotaskScheduler?wb:Ib;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=l(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=l(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Di.isInAngularZone())}tick(s){if(this.runningTick||this.appRef.destroyed)return;const l=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(s)},void 0,this.schedulerTickApplyArgs)}catch(u){throw this.taskService.remove(l),u}finally{this.cleanup()}this.useMicrotaskScheduler=!0,wb(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(l)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const s=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(s)}}static#e=this.\u0275fac=function(l){return new(l||n)};static#t=this.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const tc=new vn("",{providedIn:"root",factory:()=>cn(tc,q.Optional|q.SkipSelf)||function _D(){return typeof $localize<"u"&&$localize.locale||tf}()}),yD=new vn("",{providedIn:"root",factory:()=>"USD"}),V_=new vn("");let U_=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,l){const u=function PI(n="zone.js",r){return"noop"===n?new AI:"zone.js"===n?new Di(r):n}(l?.ngZone,L_({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return u.run(()=>{const h=l?.ignoreChangesOutsideZone,_=function Ka(n,r,s){return new gl(n,r,s)}(s.moduleType,this.injector,[...hf({ngZoneFactory:()=>u,ignoreChangesOutsideZone:h}),{provide:kh,useExisting:sg}]),C=_.injector.get(ul,null);return u.runOutsideAngular(()=>{const P=u.onError.subscribe({next:F=>{C.handleError(F)}});_.onDestroy(()=>{x_(this._modules,_),P.unsubscribe()})}),function ig(n,r,s){try{const l=s();return Mi(l)?l.catch(u=>{throw r.runOutsideAngular(()=>n.handleError(u)),u}):l}catch(l){throw r.runOutsideAngular(()=>n.handleError(l)),l}}(C,u,()=>{const P=_.injector.get(uf);return P.runInitializers(),P.donePromise.then(()=>(function GA(n){"string"==typeof n&&(S0=n.toLowerCase().replace(/_/g,"-"))}(_.injector.get(tc,tf)||tf),this._moduleDoBootstrap(_),_))})})}bootstrapModule(s,l=[]){const u=Ku({},l);return function WR(n,r,s){const l=new KI(s);return Promise.resolve(l)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,u))}_moduleDoBootstrap(s){const l=s.injector.get(ec);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(u=>l.bootstrap(u));else{if(!s.instance.ngDoBootstrap)throw new Mt(-403,!1);s.instance.ngDoBootstrap(l)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Mt(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const s=this._injector.get(V_,null);s&&(s.forEach(l=>l()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(l){return new(l||n)(Rr(cs))};static#t=this.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),qu=null;const B_=new vn("");function yw(n,r,s=[]){const l=`Platform: ${r}`,u=new vn(l);return(h=[])=>{let _=GE();if(!_||_.injector.get(B_,!1)){const C=[...s,...h,{provide:u,useValue:!0}];n?n(C):function QR(n){if(qu&&!qu.get(B_,!1))throw new Mt(400,!1);(function pD(){!function zo(n){hr=n}(()=>{throw new Mt(600,!1)})})(),qu=n;const r=n.get(U_);(function Ew(n){n.get(sT,null)?.forEach(s=>s())})(n)}(function ag(n=[],r){return cs.create({name:r,providers:[{provide:pg,useValue:"platform"},{provide:V_,useValue:new Set([()=>qu=null])},...n]})}(C,l))}return function ED(n){const r=GE();if(!r)throw new Mt(401,!1);return r}()}}function GE(){return qu?.get(U_)??null}function ff(){return!1}let j_=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=wl}return n})();function wl(n){return function ID(n,r,s){if(mc(n)&&!s){const l=Es(n.index,r);return new Tc(l,l)}return 47&n.type?new Tc(r[Pi],r):null}($r(),ft(),!(16&~n))}class Tx{constructor(){}supports(r){return Bv(r)}create(r){return new uk(r)}}const ck=(n,r)=>r;class uk{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||ck}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,l=this._removalsHead,u=0,h=null;for(;s||l;){const _=!l||s&&s.currentIndex<Ax(l,u,h)?s:l,C=Ax(_,u,h),P=_.currentIndex;if(_===l)u--,l=l._nextRemoved;else if(s=s._next,null==_.previousIndex)u++;else{h||(h=[]);const F=C-u,G=P-u;if(F!=G){for(let fe=0;fe<F;fe++){const Ae=fe<h.length?h[fe]:h[fe]=0,Ue=Ae+fe;G<=Ue&&Ue<F&&(h[fe]=Ae+1)}h[_.previousIndex]=G-F}}C!==P&&r(_,C,P)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Bv(r))throw new Mt(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let u,h,_,s=this._itHead,l=!1;if(Array.isArray(r)){this.length=r.length;for(let C=0;C<this.length;C++)h=r[C],_=this._trackByFn(C,h),null!==s&&Object.is(s.trackById,_)?(l&&(s=this._verifyReinsertion(s,h,_,C)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,_,C),l=!0),s=s._next}else u=0,function Li(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Symbol.iterator]();let l;for(;!(l=s.next()).done;)r(l.value)}}(r,C=>{_=this._trackByFn(u,C),null!==s&&Object.is(s.trackById,_)?(l&&(s=this._verifyReinsertion(s,C,_,u)),Object.is(s.item,C)||this._addIdentityChange(s,C)):(s=this._mismatch(s,C,_,u),l=!0),s=s._next,u++}),this.length=u;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,l,u){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,u)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(l,u))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,u)):r=this._addAfter(new dk(s,l),h,u),r}_verifyReinsertion(r,s,l,u){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==h?r=this._reinsertAfter(h,r._prev,u):r.currentIndex!=u&&(r.currentIndex=u,this._addToMoves(r,u)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const u=r._prevRemoved,h=r._nextRemoved;return null===u?this._removalsHead=h:u._nextRemoved=h,null===h?this._removalsTail=u:h._prevRemoved=u,this._insertAfter(r,s,l),this._addToMoves(r,l),r}_moveAfter(r,s,l){return this._unlink(r),this._insertAfter(r,s,l),this._addToMoves(r,l),r}_addAfter(r,s,l){return this._insertAfter(r,s,l),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,l){const u=null===s?this._itHead:s._next;return r._next=u,r._prev=s,null===u?this._itTail=r:u._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new bx),this._linkedRecords.put(r),r.currentIndex=l,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,l=r._next;return null===s?this._itHead=l:s._next=l,null===l?this._itTail=s:l._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bx),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class dk{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class hk{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===s||s<=l.currentIndex)&&Object.is(l.trackById,r))return l;return null}remove(r){const s=r._prevDup,l=r._nextDup;return null===s?this._head=l:s._nextDup=l,null===l?this._tail=s:l._prevDup=s,null===this._head}}class bx{constructor(){this.map=new Map}put(r){const s=r.trackById;let l=this.map.get(s);l||(l=new hk,this.map.set(s,l)),l.add(r)}get(r,s){const u=this.map.get(r);return u?u.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ax(n,r,s){const l=n.previousIndex;if(null===l)return l;let u=0;return s&&l<s.length&&(u=s[l]),l+r+u}class Px{constructor(){}supports(r){return r instanceof Map||YI(r)}create(){return new fk}}class fk{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||YI(r)))throw new Mt(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(l,u)=>{if(s&&s.key===u)this._maybeAddToChanges(s,l),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(u,l);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let l=s;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const l=r._prev;return s._next=r,s._prev=l,r._prev=s,l&&(l._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const u=this._records.get(r);this._maybeAddToChanges(u,s);const h=u._prev,_=u._next;return h&&(h._next=_),_&&(_._prev=h),u._next=null,u._prev=null,u}const l=new pk(r);return this._records.set(r,l),l.currentValue=s,this._addToAdditions(l),l}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(l=>s(r[l],l))}}class pk{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Dx(){return new nN([new Tx])}let nN=(()=>{class n{static#e=this.\u0275prov=jt({token:n,providedIn:"root",factory:Dx});constructor(s){this.factories=s}static create(s,l){if(null!=l){const u=l.factories.slice();s=s.concat(u)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||Dx()),deps:[[n,new bo,new oi]]}}find(s){const l=this.factories.find(u=>u.supports(s));if(null!=l)return l;throw new Mt(901,!1)}}return n})();function Sx(){return new rN([new Px])}let rN=(()=>{class n{static#e=this.\u0275prov=jt({token:n,providedIn:"root",factory:Sx});constructor(s){this.factories=s}static create(s,l){if(l){const u=l.factories.slice();s=s.concat(u)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||Sx()),deps:[[n,new bo,new oi]]}}find(s){const l=this.factories.find(u=>u.supports(s));if(l)return l;throw new Mt(901,!1)}}return n})();const _k=yw(null,"core",[]);let yk=(()=>{class n{constructor(s){}static#e=this.\u0275fac=function(l){return new(l||n)(Rr(ec))};static#t=this.\u0275mod=N({type:n});static#n=this.\u0275inj=or({})}return n})();function Zk(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function t1(n){const r=Fe(null);try{return n()}finally{Fe(r)}}function a1(n){const r=Oe(n);if(!r)return null;const s=new Bh(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},4341:(fn,ot,J)=>{J.d(ot,{me:()=>It,YN:()=>Ti,tU:()=>oe,BC:()=>Xn,cb:()=>xn,cV:()=>eo,vS:()=>As,Fm:()=>Or,YS:()=>uo,qT:()=>Ja});var T=J(3953),B=J(177),m=J(8455),ce=J(1985),De=J(3073),Fe=J(8750),je=J(3794),Et=J(4360),ht=J(6450),Ie=J(8496),Xe=J(1413),Ot=J(6354);let bt=(()=>{class H{constructor(R,Y){this._renderer=R,this._elementRef=Y,this.onChange=he=>{},this.onTouched=()=>{}}setProperty(R,Y){this._renderer.setProperty(this._elementRef.nativeElement,R,Y)}registerOnTouched(R){this.onTouched=R}registerOnChange(R){this.onChange=R}setDisabledState(R){this.setProperty("disabled",R)}static#e=this.\u0275fac=function(Y){return new(Y||H)(T.rXU(T.sFG),T.rXU(T.aKT))};static#t=this.\u0275dir=T.FsC({type:H})}return H})(),zt=(()=>{class H extends bt{static#e=this.\u0275fac=(()=>{let R;return function(he){return(R||(R=T.xGo(H)))(he||H)}})();static#t=this.\u0275dir=T.FsC({type:H,features:[T.Vt3]})}return H})();const nn=new T.nKC(""),tr={provide:nn,useExisting:(0,T.Rfq)(()=>It),multi:!0},Ct=new T.nKC("");let It=(()=>{class H extends bt{constructor(R,Y,he){super(R,Y),this._compositionMode=he,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function pr(){const H=(0,B.QT)()?(0,B.QT)().getUserAgent():"";return/android (\d+)/.test(H.toLowerCase())}())}writeValue(R){this.setProperty("value",R??"")}_handleInput(R){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(R)}_compositionStart(){this._composing=!0}_compositionEnd(R){this._composing=!1,this._compositionMode&&this.onChange(R)}static#e=this.\u0275fac=function(Y){return new(Y||H)(T.rXU(T.sFG),T.rXU(T.aKT),T.rXU(Ct,8))};static#t=this.\u0275dir=T.FsC({type:H,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(Y,he){1&Y&&T.bIt("input",function(An){return he._handleInput(An.target.value)})("blur",function(){return he.onTouched()})("compositionstart",function(){return he._compositionStart()})("compositionend",function(An){return he._compositionEnd(An.target.value)})},features:[T.Jv_([tr]),T.Vt3]})}return H})();const At=new T.nKC(""),Gt=new T.nKC("");function Kn(H){return function _t(H){return null==H||("string"==typeof H||Array.isArray(H))&&0===H.length}(H.value)?{required:!0}:null}function Qe(H){return null}function at(H){return null!=H}function lt(H){return(0,T.jNT)(H)?(0,m.H)(H):H}function Pt(H){let $={};return H.forEach(R=>{$=null!=R?{...$,...R}:$}),0===Object.keys($).length?null:$}function Ze(H,$){return $.map(R=>R(H))}function Mn(H){return H.map($=>function we(H){return!H.validate}($)?$:R=>$.validate(R))}function en(H){return null!=H?function ar(H){if(!H)return null;const $=H.filter(at);return 0==$.length?null:function(R){return Pt(Ze(R,$))}}(Mn(H)):null}function fr(H){return null!=H?function te(H){if(!H)return null;const $=H.filter(at);return 0==$.length?null:function(R){return function Ee(...H){const $=(0,je.ms)(H),{args:R,keys:Y}=(0,De.D)(H),he=new ce.c(Tt=>{const{length:An}=R;if(!An)return void Tt.complete();const bi=new Array(An);let ns=An,wo=An;for(let rn=0;rn<An;rn++){let jt=!1;(0,Fe.Tg)(R[rn]).subscribe((0,Et._)(Tt,Dn=>{jt||(jt=!0,wo--),bi[rn]=Dn},()=>ns--,void 0,()=>{(!ns||!jt)&&(wo||Tt.next(Y?(0,Ie.e)(Y,bi):bi),Tt.complete())}))}});return $?he.pipe((0,ht.I)($)):he}(Ze(R,$).map(lt)).pipe((0,Ot.T)(Pt))}}(Mn(H)):null}function Qr(H,$){return null===H?[$]:Array.isArray(H)?[...H,$]:[H,$]}function lr(H){return H?Array.isArray(H)?H:[H]:[]}function Wn(H,$){return Array.isArray(H)?H.includes($):H===$}function mn(H,$){const R=lr($);return lr(H).forEach(he=>{Wn(R,he)||R.push(he)}),R}function qi(H,$){return lr($).filter(R=>!Wn(H,R))}class yo{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators($){this._rawValidators=$||[],this._composedValidatorFn=en(this._rawValidators)}_setAsyncValidators($){this._rawAsyncValidators=$||[],this._composedAsyncValidatorFn=fr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy($){this._onDestroyCallbacks.push($)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach($=>$()),this._onDestroyCallbacks=[]}reset($=void 0){this.control&&this.control.reset($)}hasError($,R){return!!this.control&&this.control.hasError($,R)}getError($,R){return this.control?this.control.getError($,R):null}}class gr extends yo{get formDirective(){return null}get path(){return null}}class Yr extends yo{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class lo{constructor($){this._cd=$}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Xn=(()=>{class H extends lo{constructor(R){super(R)}static#e=this.\u0275fac=function(Y){return new(Y||H)(T.rXU(Yr,2))};static#t=this.\u0275dir=T.FsC({type:H,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(Y,he){2&Y&&T.AVh("ng-untouched",he.isUntouched)("ng-touched",he.isTouched)("ng-pristine",he.isPristine)("ng-dirty",he.isDirty)("ng-valid",he.isValid)("ng-invalid",he.isInvalid)("ng-pending",he.isPending)},features:[T.Vt3]})}return H})(),xn=(()=>{class H extends lo{constructor(R){super(R)}static#e=this.\u0275fac=function(Y){return new(Y||H)(T.rXU(gr,10))};static#t=this.\u0275dir=T.FsC({type:H,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(Y,he){2&Y&&T.AVh("ng-untouched",he.isUntouched)("ng-touched",he.isTouched)("ng-pristine",he.isPristine)("ng-dirty",he.isDirty)("ng-valid",he.isValid)("ng-invalid",he.isInvalid)("ng-pending",he.isPending)("ng-submitted",he.isSubmitted)},features:[T.Vt3]})}return H})();const ge="VALID",Me="INVALID",gt="PENDING",se="DISABLED";class ae{}class ve extends ae{constructor($,R){super(),this.value=$,this.source=R}}class tt extends ae{constructor($,R){super(),this.pristine=$,this.source=R}}class Ne extends ae{constructor($,R){super(),this.touched=$,this.source=R}}class Ft extends ae{constructor($,R){super(),this.status=$,this.source=R}}function Ci(H){return(Tn(H)?H.validators:H)||null}function $t(H,$){return(Tn($)?$.asyncValidators:H)||null}function Tn(H){return null!=H&&!Array.isArray(H)&&"object"==typeof H}class Ht{constructor($,R){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._events=new Xe.B,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators($),this._assignAsyncValidators(R)}get validator(){return this._composedValidatorFn}set validator($){this._rawValidators=this._composedValidatorFn=$}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator($){this._rawAsyncValidators=this._composedAsyncValidatorFn=$}get parent(){return this._parent}get valid(){return this.status===ge}get invalid(){return this.status===Me}get pending(){return this.status==gt}get disabled(){return this.status===se}get enabled(){return this.status!==se}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators($){this._assignValidators($)}setAsyncValidators($){this._assignAsyncValidators($)}addValidators($){this.setValidators(mn($,this._rawValidators))}addAsyncValidators($){this.setAsyncValidators(mn($,this._rawAsyncValidators))}removeValidators($){this.setValidators(qi($,this._rawValidators))}removeAsyncValidators($){this.setAsyncValidators(qi($,this._rawAsyncValidators))}hasValidator($){return Wn(this._rawValidators,$)}hasAsyncValidator($){return Wn(this._rawAsyncValidators,$)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched($={}){const R=!1===this.touched;this.touched=!0;const Y=$.sourceControl??this;this._parent&&!$.onlySelf&&this._parent.markAsTouched({...$,sourceControl:Y}),R&&!1!==$.emitEvent&&this._events.next(new Ne(!0,Y))}markAllAsTouched($={}){this.markAsTouched({onlySelf:!0,emitEvent:$.emitEvent,sourceControl:this}),this._forEachChild(R=>R.markAllAsTouched($))}markAsUntouched($={}){const R=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const Y=$.sourceControl??this;this._forEachChild(he=>{he.markAsUntouched({onlySelf:!0,emitEvent:$.emitEvent,sourceControl:Y})}),this._parent&&!$.onlySelf&&this._parent._updateTouched($,Y),R&&!1!==$.emitEvent&&this._events.next(new Ne(!1,Y))}markAsDirty($={}){const R=!0===this.pristine;this.pristine=!1;const Y=$.sourceControl??this;this._parent&&!$.onlySelf&&this._parent.markAsDirty({...$,sourceControl:Y}),R&&!1!==$.emitEvent&&this._events.next(new tt(!1,Y))}markAsPristine($={}){const R=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const Y=$.sourceControl??this;this._forEachChild(he=>{he.markAsPristine({onlySelf:!0,emitEvent:$.emitEvent})}),this._parent&&!$.onlySelf&&this._parent._updatePristine($,Y),R&&!1!==$.emitEvent&&this._events.next(new tt(!0,Y))}markAsPending($={}){this.status=gt;const R=$.sourceControl??this;!1!==$.emitEvent&&(this._events.next(new Ft(this.status,R)),this.statusChanges.emit(this.status)),this._parent&&!$.onlySelf&&this._parent.markAsPending({...$,sourceControl:R})}disable($={}){const R=this._parentMarkedDirty($.onlySelf);this.status=se,this.errors=null,this._forEachChild(he=>{he.disable({...$,onlySelf:!0})}),this._updateValue();const Y=$.sourceControl??this;!1!==$.emitEvent&&(this._events.next(new ve(this.value,Y)),this._events.next(new Ft(this.status,Y)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...$,skipPristineCheck:R},this),this._onDisabledChange.forEach(he=>he(!0))}enable($={}){const R=this._parentMarkedDirty($.onlySelf);this.status=ge,this._forEachChild(Y=>{Y.enable({...$,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:$.emitEvent}),this._updateAncestors({...$,skipPristineCheck:R},this),this._onDisabledChange.forEach(Y=>Y(!1))}_updateAncestors($,R){this._parent&&!$.onlySelf&&(this._parent.updateValueAndValidity($),$.skipPristineCheck||this._parent._updatePristine({},R),this._parent._updateTouched({},R))}setParent($){this._parent=$}getRawValue(){return this.value}updateValueAndValidity($={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const Y=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ge||this.status===gt)&&this._runAsyncValidator(Y,$.emitEvent)}const R=$.sourceControl??this;!1!==$.emitEvent&&(this._events.next(new ve(this.value,R)),this._events.next(new Ft(this.status,R)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!$.onlySelf&&this._parent.updateValueAndValidity({...$,sourceControl:R})}_updateTreeValidity($={emitEvent:!0}){this._forEachChild(R=>R._updateTreeValidity($)),this.updateValueAndValidity({onlySelf:!0,emitEvent:$.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?se:ge}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator($,R){if(this.asyncValidator){this.status=gt,this._hasOwnPendingAsyncValidator={emitEvent:!1!==R};const Y=lt(this.asyncValidator(this));this._asyncValidationSubscription=Y.subscribe(he=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(he,{emitEvent:R,shouldHaveEmitted:$})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const $=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,$}return!1}setErrors($,R={}){this.errors=$,this._updateControlsErrors(!1!==R.emitEvent,this,R.shouldHaveEmitted)}get($){let R=$;return null==R||(Array.isArray(R)||(R=R.split(".")),0===R.length)?null:R.reduce((Y,he)=>Y&&Y._find(he),this)}getError($,R){const Y=R?this.get(R):this;return Y&&Y.errors?Y.errors[$]:null}hasError($,R){return!!this.getError($,R)}get root(){let $=this;for(;$._parent;)$=$._parent;return $}_updateControlsErrors($,R,Y){this.status=this._calculateStatus(),$&&this.statusChanges.emit(this.status),($||Y)&&this._events.next(new Ft(this.status,R)),this._parent&&this._parent._updateControlsErrors($,R,Y)}_initObservables(){this.valueChanges=new T.bkB,this.statusChanges=new T.bkB}_calculateStatus(){return this._allControlsDisabled()?se:this.errors?Me:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gt)?gt:this._anyControlsHaveStatus(Me)?Me:ge}_anyControlsHaveStatus($){return this._anyControls(R=>R.status===$)}_anyControlsDirty(){return this._anyControls($=>$.dirty)}_anyControlsTouched(){return this._anyControls($=>$.touched)}_updatePristine($,R){const Y=!this._anyControlsDirty(),he=this.pristine!==Y;this.pristine=Y,this._parent&&!$.onlySelf&&this._parent._updatePristine($,R),he&&this._events.next(new tt(this.pristine,R))}_updateTouched($={},R){this.touched=this._anyControlsTouched(),this._events.next(new Ne(this.touched,R)),this._parent&&!$.onlySelf&&this._parent._updateTouched($,R)}_registerOnCollectionChange($){this._onCollectionChange=$}_setUpdateStrategy($){Tn($)&&null!=$.updateOn&&(this._updateOn=$.updateOn)}_parentMarkedDirty($){return!$&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find($){return null}_assignValidators($){this._rawValidators=Array.isArray($)?$.slice():$,this._composedValidatorFn=function On(H){return Array.isArray(H)?en(H):H||null}(this._rawValidators)}_assignAsyncValidators($){this._rawAsyncValidators=Array.isArray($)?$.slice():$,this._composedAsyncValidatorFn=function Hn(H){return Array.isArray(H)?fr(H):H||null}(this._rawAsyncValidators)}}class Ii extends Ht{constructor($,R,Y){super(Ci(R),$t(Y,R)),this.controls=$,this._initObservables(),this._setUpdateStrategy(R),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl($,R){return this.controls[$]?this.controls[$]:(this.controls[$]=R,R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange),R)}addControl($,R,Y={}){this.registerControl($,R),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}removeControl($,R={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),delete this.controls[$],this.updateValueAndValidity({emitEvent:R.emitEvent}),this._onCollectionChange()}setControl($,R,Y={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),delete this.controls[$],R&&this.registerControl($,R),this.updateValueAndValidity({emitEvent:Y.emitEvent}),this._onCollectionChange()}contains($){return this.controls.hasOwnProperty($)&&this.controls[$].enabled}setValue($,R={}){(function _r(H,$,R){H._forEachChild((Y,he)=>{if(void 0===R[he])throw new T.wOt(1002,"")})})(this,0,$),Object.keys($).forEach(Y=>{(function vo(H,$,R){const Y=H.controls;if(!($?Object.keys(Y):Y).length)throw new T.wOt(1e3,"");if(!Y[R])throw new T.wOt(1001,"")})(this,!0,Y),this.controls[Y].setValue($[Y],{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R)}patchValue($,R={}){null!=$&&(Object.keys($).forEach(Y=>{const he=this.controls[Y];he&&he.patchValue($[Y],{onlySelf:!0,emitEvent:R.emitEvent})}),this.updateValueAndValidity(R))}reset($={},R={}){this._forEachChild((Y,he)=>{Y.reset($?$[he]:null,{onlySelf:!0,emitEvent:R.emitEvent})}),this._updatePristine(R,this),this._updateTouched(R,this),this.updateValueAndValidity(R)}getRawValue(){return this._reduceChildren({},($,R,Y)=>($[Y]=R.getRawValue(),$))}_syncPendingControls(){let $=this._reduceChildren(!1,(R,Y)=>!!Y._syncPendingControls()||R);return $&&this.updateValueAndValidity({onlySelf:!0}),$}_forEachChild($){Object.keys(this.controls).forEach(R=>{const Y=this.controls[R];Y&&$(Y,R)})}_setUpControls(){this._forEachChild($=>{$.setParent(this),$._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls($){for(const[R,Y]of Object.entries(this.controls))if(this.contains(R)&&$(Y))return!0;return!1}_reduceValue(){return this._reduceChildren({},(R,Y,he)=>((Y.enabled||this.disabled)&&(R[he]=Y.value),R))}_reduceChildren($,R){let Y=$;return this._forEachChild((he,Tt)=>{Y=R(Y,he,Tt)}),Y}_allControlsDisabled(){for(const $ of Object.keys(this.controls))if(this.controls[$].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find($){return this.controls.hasOwnProperty($)?this.controls[$]:null}}const be=new T.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>ut}),ut="always";function ln(H,$,R=ut){nr(H,$),$.valueAccessor.writeValue(H.value),(H.disabled||"always"===R)&&$.valueAccessor.setDisabledState?.(H.disabled),function ke(H,$){$.valueAccessor.registerOnChange(R=>{H._pendingValue=R,H._pendingChange=!0,H._pendingDirty=!0,"change"===H.updateOn&&qn(H,$)})}(H,$),function Zs(H,$){const R=(Y,he)=>{$.valueAccessor.writeValue(Y),he&&$.viewToModelUpdate(Y)};H.registerOnChange(R),$._registerOnDestroy(()=>{H._unregisterOnChange(R)})}(H,$),function Ls(H,$){$.valueAccessor.registerOnTouched(()=>{H._pendingTouched=!0,"blur"===H.updateOn&&H._pendingChange&&qn(H,$),"submit"!==H.updateOn&&H.markAsTouched()})}(H,$),function Cr(H,$){if($.valueAccessor.setDisabledState){const R=Y=>{$.valueAccessor.setDisabledState(Y)};H.registerOnDisabledChange(R),$._registerOnDestroy(()=>{H._unregisterOnDisabledChange(R)})}}(H,$)}function Fn(H,$){H.forEach(R=>{R.registerOnValidatorChange&&R.registerOnValidatorChange($)})}function nr(H,$){const R=function jn(H){return H._rawValidators}(H);null!==$.validator?H.setValidators(Qr(R,$.validator)):"function"==typeof R&&H.setValidators([R]);const Y=function Hr(H){return H._rawAsyncValidators}(H);null!==$.asyncValidator?H.setAsyncValidators(Qr(Y,$.asyncValidator)):"function"==typeof Y&&H.setAsyncValidators([Y]);const he=()=>H.updateValueAndValidity();Fn($._rawValidators,he),Fn($._rawAsyncValidators,he)}function qn(H,$){H._pendingDirty&&H.markAsDirty(),H.setValue(H._pendingValue,{emitModelToViewChange:!1}),$.viewToModelUpdate(H._pendingValue),H._pendingChange=!1}const Xr={provide:gr,useExisting:(0,T.Rfq)(()=>eo)},Oo=Promise.resolve();let eo=(()=>{class H extends gr{constructor(R,Y,he){super(),this.callSetDisabledState=he,this.submitted=!1,this._directives=new Set,this.ngSubmit=new T.bkB,this.form=new Ii({},en(R),fr(Y))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(R){Oo.then(()=>{const Y=this._findContainer(R.path);R.control=Y.registerControl(R.name,R.control),ln(R.control,R,this.callSetDisabledState),R.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(R)})}getControl(R){return this.form.get(R.path)}removeControl(R){Oo.then(()=>{const Y=this._findContainer(R.path);Y&&Y.removeControl(R.name),this._directives.delete(R)})}addFormGroup(R){Oo.then(()=>{const Y=this._findContainer(R.path),he=new Ii({});(function hs(H,$){nr(H,$)})(he,R),Y.registerControl(R.name,he),he.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(R){Oo.then(()=>{const Y=this._findContainer(R.path);Y&&Y.removeControl(R.name)})}getFormGroup(R){return this.form.get(R.path)}updateModel(R,Y){Oo.then(()=>{this.form.get(R.path).setValue(Y)})}setValue(R){this.control.setValue(R)}onSubmit(R){return this.submitted=!0,function Sr(H,$){H._syncPendingControls(),$.forEach(R=>{const Y=R.control;"submit"===Y.updateOn&&Y._pendingChange&&(R.viewToModelUpdate(Y._pendingValue),Y._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(R),"dialog"===R?.target?.method}onReset(){this.resetForm()}resetForm(R=void 0){this.form.reset(R),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(R){return R.pop(),R.length?this.form.get(R):this.form}static#e=this.\u0275fac=function(Y){return new(Y||H)(T.rXU(At,10),T.rXU(Gt,10),T.rXU(be,8))};static#t=this.\u0275dir=T.FsC({type:H,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(Y,he){1&Y&&T.bIt("submit",function(An){return he.onSubmit(An)})("reset",function(){return he.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[T.Jv_([Xr]),T.Vt3]})}return H})();function Mr(H,$){const R=H.indexOf($);R>-1&&H.splice(R,1)}function Us(H){return"object"==typeof H&&null!==H&&2===Object.keys(H).length&&"value"in H&&"disabled"in H}const ea=class extends Ht{constructor($=null,R,Y){super(Ci(R),$t(Y,R)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState($),this._setUpdateStrategy(R),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Tn(R)&&(R.nonNullable||R.initialValueIsDefault)&&(this.defaultValue=Us($)?$.value:$)}setValue($,R={}){this.value=this._pendingValue=$,this._onChange.length&&!1!==R.emitModelToViewChange&&this._onChange.forEach(Y=>Y(this.value,!1!==R.emitViewToModelChange)),this.updateValueAndValidity(R)}patchValue($,R={}){this.setValue($,R)}reset($=this.defaultValue,R={}){this._applyFormState($),this.markAsPristine(R),this.markAsUntouched(R),this.setValue(this.value,R),this._pendingChange=!1}_updateValue(){}_anyControls($){return!1}_allControlsDisabled(){return this.disabled}registerOnChange($){this._onChange.push($)}_unregisterOnChange($){Mr(this._onChange,$)}registerOnDisabledChange($){this._onDisabledChange.push($)}_unregisterOnDisabledChange($){Mr(this._onDisabledChange,$)}_forEachChild($){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState($){Us($)?(this.value=this._pendingValue=$.value,$.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=$}},ta={provide:Yr,useExisting:(0,T.Rfq)(()=>As)},bs=Promise.resolve();let As=(()=>{class H extends Yr{constructor(R,Y,he,Tt,An,bi){super(),this._changeDetectorRef=An,this.callSetDisabledState=bi,this.control=new ea,this._registered=!1,this.name="",this.update=new T.bkB,this._parent=R,this._setValidators(Y),this._setAsyncValidators(he),this.valueAccessor=function co(H,$){if(!$)return null;let R,Y,he;return Array.isArray($),$.forEach(Tt=>{Tt.constructor===It?R=Tt:function cr(H){return Object.getPrototypeOf(H.constructor)===zt}(Tt)?Y=Tt:he=Tt}),he||Y||R||null}(0,Tt)}ngOnChanges(R){if(this._checkForErrors(),!this._registered||"name"in R){if(this._registered&&(this._checkName(),this.formDirective)){const Y=R.name.previousValue;this.formDirective.removeControl({name:Y,path:this._getPath(Y)})}this._setUpControl()}"isDisabled"in R&&this._updateDisabled(R),function Qo(H,$){if(!H.hasOwnProperty("model"))return!1;const R=H.model;return!!R.isFirstChange()||!Object.is($,R.currentValue)}(R,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(R){this.viewModel=R,this.update.emit(R)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ln(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(R){bs.then(()=>{this.control.setValue(R,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(R){const Y=R.isDisabled.currentValue,he=0!==Y&&(0,T.L39)(Y);bs.then(()=>{he&&!this.control.disabled?this.control.disable():!he&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(R){return this._parent?function Wt(H,$){return[...$.path,H]}(R,this._parent):[R]}static#e=this.\u0275fac=function(Y){return new(Y||H)(T.rXU(gr,9),T.rXU(At,10),T.rXU(Gt,10),T.rXU(nn,10),T.rXU(T.gRc,8),T.rXU(be,8))};static#t=this.\u0275dir=T.FsC({type:H,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[T.Jv_([ta]),T.Vt3,T.OA$]})}return H})(),Ja=(()=>{class H{static#e=this.\u0275fac=function(Y){return new(Y||H)};static#t=this.\u0275dir=T.FsC({type:H,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return H})();const na={provide:nn,useExisting:(0,T.Rfq)(()=>Or),multi:!0};let Aa=(()=>{class H{constructor(){this._accessors=[]}add(R,Y){this._accessors.push([R,Y])}remove(R){for(let Y=this._accessors.length-1;Y>=0;--Y)if(this._accessors[Y][1]===R)return void this._accessors.splice(Y,1)}select(R){this._accessors.forEach(Y=>{this._isSameGroup(Y,R)&&Y[1]!==R&&Y[1].fireUncheck(R.value)})}_isSameGroup(R,Y){return!!R[0].control&&R[0]._parent===Y._control._parent&&R[1].name===Y.name}static#e=this.\u0275fac=function(Y){return new(Y||H)};static#t=this.\u0275prov=T.jDH({token:H,factory:H.\u0275fac,providedIn:"root"})}return H})(),Or=(()=>{class H extends zt{constructor(R,Y,he,Tt){super(R,Y),this._registry=he,this._injector=Tt,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=(0,T.WQX)(be,{optional:!0})??ut}ngOnInit(){this._control=this._injector.get(Yr),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(R){this._state=R===this.value,this.setProperty("checked",this._state)}registerOnChange(R){this._fn=R,this.onChange=()=>{R(this.value),this._registry.select(this)}}setDisabledState(R){(this.setDisabledStateFired||R||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",R),this.setDisabledStateFired=!0}fireUncheck(R){this.writeValue(R)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static#e=this.\u0275fac=function(Y){return new(Y||H)(T.rXU(T.sFG),T.rXU(T.aKT),T.rXU(Aa),T.rXU(T.zZn))};static#t=this.\u0275dir=T.FsC({type:H,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(Y,he){1&Y&&T.bIt("change",function(){return he.onChange()})("blur",function(){return he.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[T.Jv_([na]),T.Vt3]})}return H})();let Io=(()=>{class H{constructor(){this._validator=Qe}ngOnChanges(R){if(this.inputName in R){const Y=this.normalizeInput(R[this.inputName].currentValue);this._enabled=this.enabled(Y),this._validator=this._enabled?this.createValidator(Y):Qe,this._onChange&&this._onChange()}}validate(R){return this._validator(R)}registerOnValidatorChange(R){this._onChange=R}enabled(R){return null!=R}static#e=this.\u0275fac=function(Y){return new(Y||H)};static#t=this.\u0275dir=T.FsC({type:H,features:[T.OA$]})}return H})();const ri={provide:At,useExisting:(0,T.Rfq)(()=>uo),multi:!0};let uo=(()=>{class H extends Io{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=T.L39,this.createValidator=R=>Kn}enabled(R){return R}static#e=this.\u0275fac=(()=>{let R;return function(he){return(R||(R=T.xGo(H)))(he||H)}})();static#t=this.\u0275dir=T.FsC({type:H,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(Y,he){2&Y&&T.BMQ("required",he._enabled?"":null)},inputs:{required:"required"},features:[T.Jv_([ri]),T.Vt3]})}return H})();const Q={provide:At,useExisting:(0,T.Rfq)(()=>oe),multi:!0};let oe=(()=>{class H extends Io{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=R=>function es(H){return"number"==typeof H?H:parseInt(H,10)}(R),this.createValidator=R=>function zo(H){return $=>function Yt(H){return null!=H&&"number"==typeof H.length}($.value)&&$.value.length>H?{maxlength:{requiredLength:H,actualLength:$.value.length}}:null}(R)}static#e=this.\u0275fac=(()=>{let R;return function(he){return(R||(R=T.xGo(H)))(he||H)}})();static#t=this.\u0275dir=T.FsC({type:H,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(Y,he){2&Y&&T.BMQ("maxlength",he._enabled?he.maxlength:null)},inputs:{maxlength:"maxlength"},features:[T.Jv_([Q]),T.Vt3]})}return H})(),mt=(()=>{class H{static#e=this.\u0275fac=function(Y){return new(Y||H)};static#t=this.\u0275mod=T.$C({type:H});static#n=this.\u0275inj=T.G2t({})}return H})(),Ti=(()=>{class H{static withConfig(R){return{ngModule:H,providers:[{provide:be,useValue:R.callSetDisabledState??ut}]}}static#e=this.\u0275fac=function(Y){return new(Y||H)};static#t=this.\u0275mod=T.$C({type:H});static#n=this.\u0275inj=T.G2t({imports:[mt]})}return H})()},345:(fn,ot,J)=>{J.d(ot,{B7:()=>At,Bb:()=>Hr,hE:()=>mn,sG:()=>te});var T=J(177),B=J(3953);class m extends T.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ce extends m{static makeCurrent(){(0,T.ZD)(new ce)}onAndCancel(Be,ge,Me){return Be.addEventListener(ge,Me),()=>{Be.removeEventListener(ge,Me)}}dispatchEvent(Be,ge){Be.dispatchEvent(ge)}remove(Be){Be.parentNode&&Be.parentNode.removeChild(Be)}createElement(Be,ge){return(ge=ge||this.getDefaultDocument()).createElement(Be)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Be){return Be.nodeType===Node.ELEMENT_NODE}isShadowRoot(Be){return Be instanceof DocumentFragment}getGlobalEventTarget(Be,ge){return"window"===ge?window:"document"===ge?Be:"body"===ge?Be.body:null}getBaseHref(Be){const ge=function Fe(){return De=De||document.querySelector("base"),De?De.getAttribute("href"):null}();return null==ge?null:function je(et){return new URL(et,document.baseURI).pathname}(ge)}resetBaseElement(){De=null}getUserAgent(){return window.navigator.userAgent}getCookie(Be){return(0,T._b)(document.cookie,Be)}}let De=null,ht=(()=>{class et{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(Me){return new(Me||et)};static#t=this.\u0275prov=B.jDH({token:et,factory:et.\u0275fac})}return et})();const Ie=new B.nKC("");let Ee=(()=>{class et{constructor(ge,Me){this._zone=Me,this._eventNameToPlugin=new Map,ge.forEach(gt=>{gt.manager=this}),this._plugins=ge.slice().reverse()}addEventListener(ge,Me,gt){return this._findPluginFor(Me).addEventListener(ge,Me,gt)}getZone(){return this._zone}_findPluginFor(ge){let Me=this._eventNameToPlugin.get(ge);if(Me)return Me;if(Me=this._plugins.find(se=>se.supports(ge)),!Me)throw new B.wOt(5101,!1);return this._eventNameToPlugin.set(ge,Me),Me}static#e=this.\u0275fac=function(Me){return new(Me||et)(B.KVO(Ie),B.KVO(B.SKi))};static#t=this.\u0275prov=B.jDH({token:et,factory:et.\u0275fac})}return et})();class Xe{constructor(Be){this._doc=Be}}const Ot="ng-app-id";let bt=(()=>{class et{constructor(ge,Me,gt,se={}){this.doc=ge,this.appId=Me,this.nonce=gt,this.platformId=se,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,T.Vy)(se),this.resetHostNodes()}addStyles(ge){for(const Me of ge)1===this.changeUsageCount(Me,1)&&this.onStyleAdded(Me)}removeStyles(ge){for(const Me of ge)this.changeUsageCount(Me,-1)<=0&&this.onStyleRemoved(Me)}ngOnDestroy(){const ge=this.styleNodesInDOM;ge&&(ge.forEach(Me=>Me.remove()),ge.clear());for(const Me of this.getAllStyles())this.onStyleRemoved(Me);this.resetHostNodes()}addHost(ge){this.hostNodes.add(ge);for(const Me of this.getAllStyles())this.addStyleToHost(ge,Me)}removeHost(ge){this.hostNodes.delete(ge)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(ge){for(const Me of this.hostNodes)this.addStyleToHost(Me,ge)}onStyleRemoved(ge){const Me=this.styleRef;Me.get(ge)?.elements?.forEach(gt=>gt.remove()),Me.delete(ge)}collectServerRenderedStyles(){const ge=this.doc.head?.querySelectorAll(`style[${Ot}="${this.appId}"]`);if(ge?.length){const Me=new Map;return ge.forEach(gt=>{null!=gt.textContent&&Me.set(gt.textContent,gt)}),Me}return null}changeUsageCount(ge,Me){const gt=this.styleRef;if(gt.has(ge)){const se=gt.get(ge);return se.usage+=Me,se.usage}return gt.set(ge,{usage:Me,elements:[]}),Me}getStyleElement(ge,Me){const gt=this.styleNodesInDOM,se=gt?.get(Me);if(se?.parentNode===ge)return gt.delete(Me),se.removeAttribute(Ot),se;{const ae=this.doc.createElement("style");return this.nonce&&ae.setAttribute("nonce",this.nonce),ae.textContent=Me,this.platformIsServer&&ae.setAttribute(Ot,this.appId),ge.appendChild(ae),ae}}addStyleToHost(ge,Me){const gt=this.getStyleElement(ge,Me),se=this.styleRef,ae=se.get(Me)?.elements;ae?ae.push(gt):se.set(Me,{elements:[gt],usage:1})}resetHostNodes(){const ge=this.hostNodes;ge.clear(),ge.add(this.doc.head)}static#e=this.\u0275fac=function(Me){return new(Me||et)(B.KVO(T.qQ),B.KVO(B.sZ2),B.KVO(B.BIS,8),B.KVO(B.Agw))};static#t=this.\u0275prov=B.jDH({token:et,factory:et.\u0275fac})}return et})();const zt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},nn=/%COMP%/g,Ct=new B.nKC("",{providedIn:"root",factory:()=>!0});function Yt(et,Be){return Be.map(ge=>ge.replace(nn,et))}let At=(()=>{class et{constructor(ge,Me,gt,se,ae,ve,tt,Ne=null){this.eventManager=ge,this.sharedStylesHost=Me,this.appId=gt,this.removeStylesOnCompDestroy=se,this.doc=ae,this.platformId=ve,this.ngZone=tt,this.nonce=Ne,this.rendererByCompId=new Map,this.platformIsServer=(0,T.Vy)(ve),this.defaultRenderer=new Gt(ge,ae,tt,this.platformIsServer)}createRenderer(ge,Me){if(!ge||!Me)return this.defaultRenderer;this.platformIsServer&&Me.encapsulation===B.gXe.ShadowDom&&(Me={...Me,encapsulation:B.gXe.Emulated});const gt=this.getOrCreateRenderer(ge,Me);return gt instanceof zn?gt.applyToHost(ge):gt instanceof Kn&&gt.applyStyles(),gt}getOrCreateRenderer(ge,Me){const gt=this.rendererByCompId;let se=gt.get(Me.id);if(!se){const ae=this.doc,ve=this.ngZone,tt=this.eventManager,Ne=this.sharedStylesHost,Ft=this.removeStylesOnCompDestroy,vt=this.platformIsServer;switch(Me.encapsulation){case B.gXe.Emulated:se=new zn(tt,Ne,Me,this.appId,Ft,ae,ve,vt);break;case B.gXe.ShadowDom:return new Nn(tt,Ne,ge,Me,ae,ve,this.nonce,vt);default:se=new Kn(tt,Ne,Me,Ft,ae,ve,vt)}gt.set(Me.id,se)}return se}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(Me){return new(Me||et)(B.KVO(Ee),B.KVO(bt),B.KVO(B.sZ2),B.KVO(Ct),B.KVO(T.qQ),B.KVO(B.Agw),B.KVO(B.SKi),B.KVO(B.BIS))};static#t=this.\u0275prov=B.jDH({token:et,factory:et.\u0275fac})}return et})();class Gt{constructor(Be,ge,Me,gt){this.eventManager=Be,this.doc=ge,this.ngZone=Me,this.platformIsServer=gt,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(Be,ge){return ge?this.doc.createElementNS(zt[ge]||ge,Be):this.doc.createElement(Be)}createComment(Be){return this.doc.createComment(Be)}createText(Be){return this.doc.createTextNode(Be)}appendChild(Be,ge){(Ut(Be)?Be.content:Be).appendChild(ge)}insertBefore(Be,ge,Me){Be&&(Ut(Be)?Be.content:Be).insertBefore(ge,Me)}removeChild(Be,ge){Be&&Be.removeChild(ge)}selectRootElement(Be,ge){let Me="string"==typeof Be?this.doc.querySelector(Be):Be;if(!Me)throw new B.wOt(-5104,!1);return ge||(Me.textContent=""),Me}parentNode(Be){return Be.parentNode}nextSibling(Be){return Be.nextSibling}setAttribute(Be,ge,Me,gt){if(gt){ge=gt+":"+ge;const se=zt[gt];se?Be.setAttributeNS(se,ge,Me):Be.setAttribute(ge,Me)}else Be.setAttribute(ge,Me)}removeAttribute(Be,ge,Me){if(Me){const gt=zt[Me];gt?Be.removeAttributeNS(gt,ge):Be.removeAttribute(`${Me}:${ge}`)}else Be.removeAttribute(ge)}addClass(Be,ge){Be.classList.add(ge)}removeClass(Be,ge){Be.classList.remove(ge)}setStyle(Be,ge,Me,gt){gt&(B.czy.DashCase|B.czy.Important)?Be.style.setProperty(ge,Me,gt&B.czy.Important?"important":""):Be.style[ge]=Me}removeStyle(Be,ge,Me){Me&B.czy.DashCase?Be.style.removeProperty(ge):Be.style[ge]=""}setProperty(Be,ge,Me){null!=Be&&(Be[ge]=Me)}setValue(Be,ge){Be.nodeValue=ge}listen(Be,ge,Me){if("string"==typeof Be&&!(Be=(0,T.QT)().getGlobalEventTarget(this.doc,Be)))throw new Error(`Unsupported event target ${Be} for event ${ge}`);return this.eventManager.addEventListener(Be,ge,this.decoratePreventDefault(Me))}decoratePreventDefault(Be){return ge=>{if("__ngUnwrap__"===ge)return Be;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>Be(ge)):Be(ge))&&ge.preventDefault()}}}function Ut(et){return"TEMPLATE"===et.tagName&&void 0!==et.content}class Nn extends Gt{constructor(Be,ge,Me,gt,se,ae,ve,tt){super(Be,se,ae,tt),this.sharedStylesHost=ge,this.hostEl=Me,this.shadowRoot=Me.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ne=Yt(gt.id,gt.styles);for(const Ft of Ne){const vt=document.createElement("style");ve&&vt.setAttribute("nonce",ve),vt.textContent=Ft,this.shadowRoot.appendChild(vt)}}nodeOrShadowRoot(Be){return Be===this.hostEl?this.shadowRoot:Be}appendChild(Be,ge){return super.appendChild(this.nodeOrShadowRoot(Be),ge)}insertBefore(Be,ge,Me){return super.insertBefore(this.nodeOrShadowRoot(Be),ge,Me)}removeChild(Be,ge){return super.removeChild(this.nodeOrShadowRoot(Be),ge)}parentNode(Be){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Be)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Kn extends Gt{constructor(Be,ge,Me,gt,se,ae,ve,tt){super(Be,se,ae,ve),this.sharedStylesHost=ge,this.removeStylesOnCompDestroy=gt,this.styles=tt?Yt(tt,Me.styles):Me.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class zn extends Kn{constructor(Be,ge,Me,gt,se,ae,ve,tt){const Ne=gt+"-"+Me.id;super(Be,ge,Me,se,ae,ve,tt,Ne),this.contentAttr=function It(et){return"_ngcontent-%COMP%".replace(nn,et)}(Ne),this.hostAttr=function _t(et){return"_nghost-%COMP%".replace(nn,et)}(Ne)}applyToHost(Be){this.applyStyles(),this.setAttribute(Be,this.hostAttr,"")}createElement(Be,ge){const Me=super.createElement(Be,ge);return super.setAttribute(Me,this.contentAttr,""),Me}}let hr=(()=>{class et extends Xe{constructor(ge){super(ge)}supports(ge){return!0}addEventListener(ge,Me,gt){return ge.addEventListener(Me,gt,!1),()=>this.removeEventListener(ge,Me,gt)}removeEventListener(ge,Me,gt){return ge.removeEventListener(Me,gt)}static#e=this.\u0275fac=function(Me){return new(Me||et)(B.KVO(T.qQ))};static#t=this.\u0275prov=B.jDH({token:et,factory:et.\u0275fac})}return et})();const vi=["alt","control","meta","shift"],zo={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},We={alt:et=>et.altKey,control:et=>et.ctrlKey,meta:et=>et.metaKey,shift:et=>et.shiftKey};let Qe=(()=>{class et extends Xe{constructor(ge){super(ge)}supports(ge){return null!=et.parseEventName(ge)}addEventListener(ge,Me,gt){const se=et.parseEventName(Me),ae=et.eventCallback(se.fullKey,gt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,T.QT)().onAndCancel(ge,se.domEventName,ae))}static parseEventName(ge){const Me=ge.toLowerCase().split("."),gt=Me.shift();if(0===Me.length||"keydown"!==gt&&"keyup"!==gt)return null;const se=et._normalizeKey(Me.pop());let ae="",ve=Me.indexOf("code");if(ve>-1&&(Me.splice(ve,1),ae="code."),vi.forEach(Ne=>{const Ft=Me.indexOf(Ne);Ft>-1&&(Me.splice(Ft,1),ae+=Ne+".")}),ae+=se,0!=Me.length||0===se.length)return null;const tt={};return tt.domEventName=gt,tt.fullKey=ae,tt}static matchEventFullKeyCode(ge,Me){let gt=zo[ge.key]||ge.key,se="";return Me.indexOf("code.")>-1&&(gt=ge.code,se="code."),!(null==gt||!gt)&&(gt=gt.toLowerCase()," "===gt?gt="space":"."===gt&&(gt="dot"),vi.forEach(ae=>{ae!==gt&&(0,We[ae])(ge)&&(se+=ae+".")}),se+=gt,se===Me)}static eventCallback(ge,Me,gt){return se=>{et.matchEventFullKeyCode(se,ge)&&gt.runGuarded(()=>Me(se))}}static _normalizeKey(ge){return"esc"===ge?"escape":ge}static#e=this.\u0275fac=function(Me){return new(Me||et)(B.KVO(T.qQ))};static#t=this.\u0275prov=B.jDH({token:et,factory:et.\u0275fac})}return et})();const te=(0,B.oH4)(B.fpN,"browser",[{provide:B.Agw,useValue:T.AJ},{provide:B.PLl,useValue:function we(){ce.makeCurrent()},multi:!0},{provide:T.qQ,useFactory:function ar(){return(0,B.TL$)(document),document},deps:[]}]),fr=new B.nKC(""),Qr=[{provide:B.e01,useClass:class Et{addToWindow(Be){B.JZv.getAngularTestability=(Me,gt=!0)=>{const se=Be.findTestabilityInTree(Me,gt);if(null==se)throw new B.wOt(5103,!1);return se},B.JZv.getAllAngularTestabilities=()=>Be.getAllTestabilities(),B.JZv.getAllAngularRootElements=()=>Be.getAllRootElements(),B.JZv.frameworkStabilizers||(B.JZv.frameworkStabilizers=[]),B.JZv.frameworkStabilizers.push(Me=>{const gt=B.JZv.getAllAngularTestabilities();let se=gt.length;const ae=function(){se--,0==se&&Me()};gt.forEach(ve=>{ve.whenStable(ae)})})}findTestabilityInTree(Be,ge,Me){return null==ge?null:Be.getTestability(ge)??(Me?(0,T.QT)().isShadowRoot(ge)?this.findTestabilityInTree(Be,ge.host,!0):this.findTestabilityInTree(Be,ge.parentElement,!0):null)}},deps:[]},{provide:B.WHO,useClass:B.NYb,deps:[B.SKi,B.giA,B.e01]},{provide:B.NYb,useClass:B.NYb,deps:[B.SKi,B.giA,B.e01]}],jn=[{provide:B.H8p,useValue:"root"},{provide:B.zcH,useFactory:function Mn(){return new B.zcH},deps:[]},{provide:Ie,useClass:hr,multi:!0,deps:[T.qQ,B.SKi,B.Agw]},{provide:Ie,useClass:Qe,multi:!0,deps:[T.qQ]},At,bt,Ee,{provide:B._9s,useExisting:At},{provide:T.N0,useClass:ht,deps:[]},[]];let Hr=(()=>{class et{constructor(ge){}static withServerTransition(ge){return{ngModule:et,providers:[{provide:B.sZ2,useValue:ge.appId}]}}static#e=this.\u0275fac=function(Me){return new(Me||et)(B.KVO(fr,12))};static#t=this.\u0275mod=B.$C({type:et});static#n=this.\u0275inj=B.G2t({providers:[...jn,...Qr],imports:[T.MD,B.Hbi]})}return et})(),mn=(()=>{class et{constructor(ge){this._doc=ge}getTitle(){return this._doc.title}setTitle(ge){this._doc.title=ge||""}static#e=this.\u0275fac=function(Me){return new(Me||et)(B.KVO(T.qQ))};static#t=this.\u0275prov=B.jDH({token:et,factory:et.\u0275fac,providedIn:"root"})}return et})()},6814:(fn,ot,J)=>{J.d(ot,{Ix:()=>bo,Wk:()=>Ml,wQ:()=>fo,iI:()=>du,n3:()=>Qn});var T=J(467),B=J(3953),m=J(1985),ce=J(8071),Fe=J(8455),je=J(7673),Et=J(4412),ht=J(3073),Ie=J(3669),Ee=J(6450),Xe=J(3794),Ot=J(8496),bt=J(4360),zt=J(5225);function nn(...w){const O=(0,Xe.lI)(w),A=(0,Xe.ms)(w),{args:N,keys:j}=(0,ht.D)(w);if(0===N.length)return(0,Fe.H)([],O);const Z=new m.c(function Zt(w,O,A=Ie.D){return N=>{sn(O,()=>{const{length:j}=w,Z=new Array(j);let ue=j,Oe=j;for(let Se=0;Se<j;Se++)sn(O,()=>{const Rt=(0,Fe.H)(w[Se],O);let En=!1;Rt.subscribe((0,bt._)(N,_n=>{Z[Se]=_n,En||(En=!0,Oe--),Oe||N.next(A(Z.slice()))},()=>{--ue||N.complete()}))},N)},N)}}(N,O,j?ue=>(0,Ot.e)(j,ue):Ie.D));return A?Z.pipe((0,Ee.I)(A)):Z}function sn(w,O,A){w?(0,zt.N)(A,w,O):O()}var tr=J(9350),pr=J(8793),Ct=J(8750);function It(w){return new m.c(O=>{(0,Ct.Tg)(w()).subscribe(O)})}var _t=J(1203),Yt=J(8810),At=J(983),Gt=J(8359),it=J(9974);function _e(){return(0,it.N)((w,O)=>{let A=null;w._refCount++;const N=(0,bt._)(O,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(A=null);const j=w._connection,Z=A;A=null,j&&(!Z||j===Z)&&j.unsubscribe(),O.unsubscribe()});w.subscribe(N),N.closed||(A=w.connect())})}class Ut extends m.c{constructor(O,A){super(),this.source=O,this.subjectFactory=A,this._subject=null,this._refCount=0,this._connection=null,(0,it.S)(O)&&(this.lift=O.lift)}_subscribe(O){return this.getSubject().subscribe(O)}getSubject(){const O=this._subject;return(!O||O.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:O}=this;this._subject=this._connection=null,O?.unsubscribe()}connect(){let O=this._connection;if(!O){O=this._connection=new Gt.yU;const A=this.getSubject();O.add(this.source.subscribe((0,bt._)(A,void 0,()=>{this._teardown(),A.complete()},N=>{this._teardown(),A.error(N)},()=>this._teardown()))),O.closed&&(this._connection=null,O=Gt.yU.EMPTY)}return O}refCount(){return _e()(this)}}var Nn=J(1413),Kn=J(177),zn=J(6354),hr=J(5558),vi=J(6697),zo=J(9172),We=J(5964),Qe=J(1397),at=J(1594),lt=J(274),Pt=J(8141),Ze=J(9437),we=J(2816),Mn=J(9901);function ar(w){return w<=0?()=>At.w:(0,it.N)((O,A)=>{let N=[];O.subscribe((0,bt._)(A,j=>{N.push(j),w<N.length&&N.shift()},()=>{for(const j of N)A.next(j);A.complete()},void 0,()=>{N=null}))})}var en=J(3774),Qr=J(980),jn=J(5343),lr=J(6365),Wn=J(345);const mn="primary",qi=Symbol("RouteTitle");class yo{constructor(O){this.params=O||{}}has(O){return Object.prototype.hasOwnProperty.call(this.params,O)}get(O){if(this.has(O)){const A=this.params[O];return Array.isArray(A)?A[0]:A}return null}getAll(O){if(this.has(O)){const A=this.params[O];return Array.isArray(A)?A:[A]}return[]}get keys(){return Object.keys(this.params)}}function gr(w){return new yo(w)}function Yr(w,O,A){const N=A.path.split("/");if(N.length>w.length||"full"===A.pathMatch&&(O.hasChildren()||N.length<w.length))return null;const j={};for(let Z=0;Z<N.length;Z++){const ue=N[Z],Oe=w[Z];if(":"===ue[0])j[ue.substring(1)]=Oe;else if(ue!==Oe.path)return null}return{consumed:w.slice(0,N.length),posParams:j}}function Ei(w,O){const A=w?Bt(w):void 0,N=O?Bt(O):void 0;if(!A||!N||A.length!=N.length)return!1;let j;for(let Z=0;Z<A.length;Z++)if(j=A[Z],!Xn(w[j],O[j]))return!1;return!0}function Bt(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}function Xn(w,O){if(Array.isArray(w)&&Array.isArray(O)){if(w.length!==O.length)return!1;const A=[...w].sort(),N=[...O].sort();return A.every((j,Z)=>N[Z]===j)}return w===O}function xn(w){return w.length>0?w[w.length-1]:null}function ir(w){return function De(w){return!!w&&(w instanceof m.c||(0,ce.T)(w.lift)&&(0,ce.T)(w.subscribe))}(w)?w:(0,B.jNT)(w)?(0,Fe.H)(Promise.resolve(w)):(0,je.of)(w)}const Nr={exact:function yt(w,O,A){if(!st(w.segments,O.segments)||!Nt(w.segments,O.segments,A)||w.numberOfChildren!==O.numberOfChildren)return!1;for(const N in O.children)if(!w.children[N]||!yt(w.children[N],O.children[N],A))return!1;return!0},subset:mr},Dr={exact:function Vr(w,O){return Ei(w,O)},subset:function Pn(w,O){return Object.keys(O).length<=Object.keys(w).length&&Object.keys(O).every(A=>Xn(w[A],O[A]))},ignored:()=>!0};function zr(w,O,A){return Nr[A.paths](w.root,O.root,A.matrixParams)&&Dr[A.queryParams](w.queryParams,O.queryParams)&&!("exact"===A.fragment&&w.fragment!==O.fragment)}function mr(w,O,A){return Jn(w,O,O.segments,A)}function Jn(w,O,A,N){if(w.segments.length>A.length){const j=w.segments.slice(0,A.length);return!(!st(j,A)||O.hasChildren()||!Nt(j,A,N))}if(w.segments.length===A.length){if(!st(w.segments,A)||!Nt(w.segments,A,N))return!1;for(const j in O.children)if(!w.children[j]||!mr(w.children[j],O.children[j],N))return!1;return!0}{const j=A.slice(0,w.segments.length),Z=A.slice(w.segments.length);return!!(st(w.segments,j)&&Nt(w.segments,j,N)&&w.children[mn])&&Jn(w.children[mn],O,Z,N)}}function Nt(w,O,A){return O.every((N,j)=>Dr[A](w[j].parameters,N.parameters))}class Kt{constructor(O=new Ln([],{}),A={},N=null){this.root=O,this.queryParams=A,this.fragment=N}get queryParamMap(){return this._queryParamMap??=gr(this.queryParams),this._queryParamMap}toString(){return ge.serialize(this)}}class Ln{constructor(O,A){this.segments=O,this.children=A,this.parent=null,Object.values(A).forEach(N=>N.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Me(this)}}class xt{constructor(O,A){this.path=O,this.parameters=A}get parameterMap(){return this._parameterMap??=gr(this.parameters),this._parameterMap}toString(){return vt(this)}}function st(w,O){return w.length===O.length&&w.every((A,N)=>A.path===O[N].path)}let et=(()=>{class w{static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275prov=B.jDH({token:w,factory:()=>new Be,providedIn:"root"})}return w})();class Be{parse(O){const A=new Eo(O);return new Kt(A.parseRootSegment(),A.parseQueryParams(),A.parseFragment())}serialize(O){const A=`/${gt(O.root,!0)}`,N=function Ci(w){const O=Object.entries(w).map(([A,N])=>Array.isArray(N)?N.map(j=>`${ae(A)}=${ae(j)}`).join("&"):`${ae(A)}=${ae(N)}`).filter(A=>A);return O.length?`?${O.join("&")}`:""}(O.queryParams);return`${A}${N}${"string"==typeof O.fragment?`#${function ve(w){return encodeURI(w)}(O.fragment)}`:""}`}}const ge=new Be;function Me(w){return w.segments.map(O=>vt(O)).join("/")}function gt(w,O){if(!w.hasChildren())return Me(w);if(O){const A=w.children[mn]?gt(w.children[mn],!1):"",N=[];return Object.entries(w.children).forEach(([j,Z])=>{j!==mn&&N.push(`${j}:${gt(Z,!1)}`)}),N.length>0?`${A}(${N.join("//")})`:A}{const A=function $n(w,O){let A=[];return Object.entries(w.children).forEach(([N,j])=>{N===mn&&(A=A.concat(O(j,N)))}),Object.entries(w.children).forEach(([N,j])=>{N!==mn&&(A=A.concat(O(j,N)))}),A}(w,(N,j)=>j===mn?[gt(w.children[mn],!1)]:[`${j}:${gt(N,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[mn]?`${Me(w)}/${A[0]}`:`${Me(w)}/(${A.join("//")})`}}function se(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ae(w){return se(w).replace(/%3B/gi,";")}function tt(w){return se(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ne(w){return decodeURIComponent(w)}function Ft(w){return Ne(w.replace(/\+/g,"%20"))}function vt(w){return`${tt(w.path)}${function kn(w){return Object.entries(w).map(([O,A])=>`;${tt(O)}=${tt(A)}`).join("")}(w.parameters)}`}const On=/^[^\/()?;#]+/;function $t(w){const O=w.match(On);return O?O[0]:""}const Hn=/^[^\/()?;=#]+/,vo=/^[^=?&#]+/,Ht=/^[^&#]+/;class Eo{constructor(O){this.url=O,this.remaining=O}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ln([],{}):new Ln([],this.parseChildren())}parseQueryParams(){const O={};if(this.consumeOptional("?"))do{this.parseQueryParam(O)}while(this.consumeOptional("&"));return O}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const O=[];for(this.peekStartsWith("(")||O.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),O.push(this.parseSegment());let A={};this.peekStartsWith("/(")&&(this.capture("/"),A=this.parseParens(!0));let N={};return this.peekStartsWith("(")&&(N=this.parseParens(!1)),(O.length>0||Object.keys(A).length>0)&&(N[mn]=new Ln(O,A)),N}parseSegment(){const O=$t(this.remaining);if(""===O&&this.peekStartsWith(";"))throw new B.wOt(4009,!1);return this.capture(O),new xt(Ne(O),this.parseMatrixParams())}parseMatrixParams(){const O={};for(;this.consumeOptional(";");)this.parseParam(O);return O}parseParam(O){const A=function Tn(w){const O=w.match(Hn);return O?O[0]:""}(this.remaining);if(!A)return;this.capture(A);let N="";if(this.consumeOptional("=")){const j=$t(this.remaining);j&&(N=j,this.capture(N))}O[Ne(A)]=Ne(N)}parseQueryParam(O){const A=function _r(w){const O=w.match(vo);return O?O[0]:""}(this.remaining);if(!A)return;this.capture(A);let N="";if(this.consumeOptional("=")){const ue=function Ii(w){const O=w.match(Ht);return O?O[0]:""}(this.remaining);ue&&(N=ue,this.capture(N))}const j=Ft(A),Z=Ft(N);if(O.hasOwnProperty(j)){let ue=O[j];Array.isArray(ue)||(ue=[ue],O[j]=ue),ue.push(Z)}else O[j]=Z}parseParens(O){const A={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const N=$t(this.remaining),j=this.remaining[N.length];if("/"!==j&&")"!==j&&";"!==j)throw new B.wOt(4010,!1);let Z;N.indexOf(":")>-1?(Z=N.slice(0,N.indexOf(":")),this.capture(Z),this.capture(":")):O&&(Z=mn);const ue=this.parseChildren();A[Z]=1===Object.keys(ue).length?ue[mn]:new Ln([],ue),this.consumeOptional("//")}return A}peekStartsWith(O){return this.remaining.startsWith(O)}consumeOptional(O){return!!this.peekStartsWith(O)&&(this.remaining=this.remaining.substring(O.length),!0)}capture(O){if(!this.consumeOptional(O))throw new B.wOt(4011,!1)}}function Wo(w){return w.segments.length>0?new Ln([],{[mn]:w}):w}function Ea(w){const O={};for(const[N,j]of Object.entries(w.children)){const Z=Ea(j);if(N===mn&&0===Z.segments.length&&Z.hasChildren())for(const[ue,Oe]of Object.entries(Z.children))O[ue]=Oe;else(Z.segments.length>0||Z.hasChildren())&&(O[N]=Z)}return function Oi(w){if(1===w.numberOfChildren&&w.children[mn]){const O=w.children[mn];return new Ln(w.segments.concat(O.segments),O.children)}return w}(new Ln(w.segments,O))}function Je(w){return w instanceof Kt}function ut(w){let O;const j=Wo(function A(Z){const ue={};for(const Se of Z.children){const Rt=A(Se);ue[Se.outlet]=Rt}const Oe=new Ln(Z.url,ue);return Z===w&&(O=Oe),Oe}(w.root));return O??j}function Wt(w,O,A,N){let j=w;for(;j.parent;)j=j.parent;if(0===O.length)return Fn(j,j,j,A,N);const Z=function di(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new nr(!0,0,w);let O=0,A=!1;const N=w.reduce((j,Z,ue)=>{if("object"==typeof Z&&null!=Z){if(Z.outlets){const Oe={};return Object.entries(Z.outlets).forEach(([Se,Rt])=>{Oe[Se]="string"==typeof Rt?Rt.split("/"):Rt}),[...j,{outlets:Oe}]}if(Z.segmentPath)return[...j,Z.segmentPath]}return"string"!=typeof Z?[...j,Z]:0===ue?(Z.split("/").forEach((Oe,Se)=>{0==Se&&"."===Oe||(0==Se&&""===Oe?A=!0:".."===Oe?O++:""!=Oe&&j.push(Oe))}),j):[...j,Z]},[]);return new nr(A,O,N)}(O);if(Z.toRoot())return Fn(j,j,new Ln([],{}),A,N);const ue=function Ls(w,O,A){if(w.isAbsolute)return new ke(O,!0,0);if(!A)return new ke(O,!1,NaN);if(null===A.parent)return new ke(A,!0,0);const N=ln(w.commands[0])?0:1;return function qn(w,O,A){let N=w,j=O,Z=A;for(;Z>j;){if(Z-=j,N=N.parent,!N)throw new B.wOt(4005,!1);j=N.segments.length}return new ke(N,!1,j-Z)}(A,A.segments.length-1+N,w.numberOfDoubleDots)}(Z,j,w),Oe=ue.processChildren?Zi(ue.segmentGroup,ue.index,Z.commands):hs(ue.segmentGroup,ue.index,Z.commands);return Fn(j,ue.segmentGroup,Oe,A,N)}function ln(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function Cn(w){return"object"==typeof w&&null!=w&&w.outlets}function Fn(w,O,A,N,j){let ue,Z={};N&&Object.entries(N).forEach(([Se,Rt])=>{Z[Se]=Array.isArray(Rt)?Rt.map(En=>`${En}`):`${Rt}`}),ue=w===O?A:Cr(w,O,A);const Oe=Wo(Ea(ue));return new Kt(Oe,Z,j)}function Cr(w,O,A){const N={};return Object.entries(w.children).forEach(([j,Z])=>{N[j]=Z===O?A:Cr(Z,O,A)}),new Ln(w.segments,N)}class nr{constructor(O,A,N){if(this.isAbsolute=O,this.numberOfDoubleDots=A,this.commands=N,O&&N.length>0&&ln(N[0]))throw new B.wOt(4003,!1);const j=N.find(Cn);if(j&&j!==xn(N))throw new B.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ke{constructor(O,A,N){this.segmentGroup=O,this.processChildren=A,this.index=N}}function hs(w,O,A){if(w??=new Ln([],{}),0===w.segments.length&&w.hasChildren())return Zi(w,O,A);const N=function Ko(w,O,A){let N=0,j=O;const Z={match:!1,pathIndex:0,commandIndex:0};for(;j<w.segments.length;){if(N>=A.length)return Z;const ue=w.segments[j],Oe=A[N];if(Cn(Oe))break;const Se=`${Oe}`,Rt=N<A.length-1?A[N+1]:null;if(j>0&&void 0===Se)break;if(Se&&Rt&&"object"==typeof Rt&&void 0===Rt.outlets){if(!Vs(Se,Rt,ue))return Z;N+=2}else{if(!Vs(Se,{},ue))return Z;N++}j++}return{match:!0,pathIndex:j,commandIndex:N}}(w,O,A),j=A.slice(N.commandIndex);if(N.match&&N.pathIndex<w.segments.length){const Z=new Ln(w.segments.slice(0,N.pathIndex),{});return Z.children[mn]=new Ln(w.segments.slice(N.pathIndex),w.children),Zi(Z,0,j)}return N.match&&0===j.length?new Ln(w.segments,{}):N.match&&!w.hasChildren()?Ca(w,O,A):N.match?Zi(w,0,j):Ca(w,O,A)}function Zi(w,O,A){if(0===A.length)return new Ln(w.segments,{});{const N=function Zs(w){return Cn(w[0])?w[0].outlets:{[mn]:w}}(A),j={};if(Object.keys(N).some(Z=>Z!==mn)&&w.children[mn]&&1===w.numberOfChildren&&0===w.children[mn].segments.length){const Z=Zi(w.children[mn],O,A);return new Ln(w.segments,Z.children)}return Object.entries(N).forEach(([Z,ue])=>{"string"==typeof ue&&(ue=[ue]),null!==ue&&(j[Z]=hs(w.children[Z],O,ue))}),Object.entries(w.children).forEach(([Z,ue])=>{void 0===N[Z]&&(j[Z]=ue)}),new Ln(w.segments,j)}}function Ca(w,O,A){const N=w.segments.slice(0,O);let j=0;for(;j<A.length;){const Z=A[j];if(Cn(Z)){const Se=qo(Z.outlets);return new Ln(N,Se)}if(0===j&&ln(A[0])){N.push(new xt(w.segments[O].path,Ia(A[0]))),j++;continue}const ue=Cn(Z)?Z.outlets[mn]:`${Z}`,Oe=j<A.length-1?A[j+1]:null;ue&&Oe&&ln(Oe)?(N.push(new xt(ue,Ia(Oe))),j+=2):(N.push(new xt(ue,{})),j++)}return new Ln(N,{})}function qo(w){const O={};return Object.entries(w).forEach(([A,N])=>{"string"==typeof N&&(N=[N]),null!==N&&(O[A]=Ca(new Ln([],{}),0,N))}),O}function Ia(w){const O={};return Object.entries(w).forEach(([A,N])=>O[A]=`${N}`),O}function Vs(w,O,A){return w==A.path&&Ei(O,A.parameters)}const Qo="imperative";var cr=function(w){return w[w.NavigationStart=0]="NavigationStart",w[w.NavigationEnd=1]="NavigationEnd",w[w.NavigationCancel=2]="NavigationCancel",w[w.NavigationError=3]="NavigationError",w[w.RoutesRecognized=4]="RoutesRecognized",w[w.ResolveStart=5]="ResolveStart",w[w.ResolveEnd=6]="ResolveEnd",w[w.GuardsCheckStart=7]="GuardsCheckStart",w[w.GuardsCheckEnd=8]="GuardsCheckEnd",w[w.RouteConfigLoadStart=9]="RouteConfigLoadStart",w[w.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",w[w.ChildActivationStart=11]="ChildActivationStart",w[w.ChildActivationEnd=12]="ChildActivationEnd",w[w.ActivationStart=13]="ActivationStart",w[w.ActivationEnd=14]="ActivationEnd",w[w.Scroll=15]="Scroll",w[w.NavigationSkipped=16]="NavigationSkipped",w}(cr||{});class Sr{constructor(O,A){this.id=O,this.url=A}}class co extends Sr{constructor(O,A,N="imperative",j=null){super(O,A),this.type=cr.NavigationStart,this.navigationTrigger=N,this.restoredState=j}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hi extends Sr{constructor(O,A,N){super(O,A),this.urlAfterRedirects=N,this.type=cr.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Ri=function(w){return w[w.Redirect=0]="Redirect",w[w.SupersededByNewNavigation=1]="SupersededByNewNavigation",w[w.NoDataFromResolver=2]="NoDataFromResolver",w[w.GuardRejected=3]="GuardRejected",w}(Ri||{}),Xr=function(w){return w[w.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",w[w.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",w}(Xr||{});class Oo extends Sr{constructor(O,A,N,j){super(O,A),this.reason=N,this.code=j,this.type=cr.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class eo extends Sr{constructor(O,A,N,j){super(O,A),this.reason=N,this.code=j,this.type=cr.NavigationSkipped}}class Mr extends Sr{constructor(O,A,N,j){super(O,A),this.error=N,this.target=j,this.type=cr.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Us extends Sr{constructor(O,A,N,j){super(O,A),this.urlAfterRedirects=N,this.state=j,this.type=cr.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ea extends Sr{constructor(O,A,N,j){super(O,A),this.urlAfterRedirects=N,this.state=j,this.type=cr.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bl extends Sr{constructor(O,A,N,j,Z){super(O,A),this.urlAfterRedirects=N,this.state=j,this.shouldActivate=Z,this.type=cr.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Al extends Sr{constructor(O,A,N,j){super(O,A),this.urlAfterRedirects=N,this.state=j,this.type=cr.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wa extends Sr{constructor(O,A,N,j){super(O,A),this.urlAfterRedirects=N,this.state=j,this.type=cr.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sc{constructor(O){this.route=O,this.type=cr.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ta{constructor(O){this.route=O,this.type=cr.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rc{constructor(O){this.snapshot=O,this.type=cr.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xa{constructor(O){this.snapshot=O,this.type=cr.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ic{constructor(O){this.snapshot=O,this.type=cr.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ba{constructor(O){this.snapshot=O,this.type=cr.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ta{constructor(O,A,N){this.routerEvent=O,this.position=A,this.anchor=N,this.type=cr.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class bs{}class As{constructor(O,A){this.url=O,this.navigationBehaviorOptions=A}}class Mc{constructor(O){this.injector=O,this.outlet=null,this.route=null,this.children=new Yo(this.injector),this.attachRef=null}}let Yo=(()=>{class w{constructor(A){this.parentInjector=A,this.contexts=new Map}onChildOutletCreated(A,N){const j=this.getOrCreateContext(A);j.outlet=N,this.contexts.set(A,j)}onChildOutletDestroyed(A){const N=this.getContext(A);N&&(N.outlet=null,N.attachRef=null)}onOutletDeactivated(){const A=this.contexts;return this.contexts=new Map,A}onOutletReAttached(A){this.contexts=A}getOrCreateContext(A){let N=this.getContext(A);return N||(N=new Mc(this.parentInjector),this.contexts.set(A,N)),N}getContext(A){return this.contexts.get(A)||null}static#e=this.\u0275fac=function(N){return new(N||w)(B.KVO(B.uvJ))};static#t=this.\u0275prov=B.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();class na{constructor(O){this._root=O}get root(){return this._root.value}parent(O){const A=this.pathFromRoot(O);return A.length>1?A[A.length-2]:null}children(O){const A=ra(O,this._root);return A?A.children.map(N=>N.value):[]}firstChild(O){const A=ra(O,this._root);return A&&A.children.length>0?A.children[0].value:null}siblings(O){const A=Aa(O,this._root);return A.length<2?[]:A[A.length-2].children.map(j=>j.value).filter(j=>j!==O)}pathFromRoot(O){return Aa(O,this._root).map(A=>A.value)}}function ra(w,O){if(w===O.value)return O;for(const A of O.children){const N=ra(w,A);if(N)return N}return null}function Aa(w,O){if(w===O.value)return[O];for(const A of O.children){const N=Aa(w,A);if(N.length)return N.unshift(O),N}return[]}class Or{constructor(O,A){this.value=O,this.children=A}toString(){return`TreeNode(${this.value})`}}function Xo(w){const O={};return w&&w.children.forEach(A=>O[A.value.outlet]=A),O}class Ro extends na{constructor(O,A){super(O),this.snapshot=A,Jo(this,O)}toString(){return this.snapshot.toString()}}function Ps(w){const O=function ia(w){const Z=new to([],{},{},"",{},mn,w,null,{});return new Co("",new Or(Z,[]))}(w),A=new Et.t([new xt("",{})]),N=new Et.t({}),j=new Et.t({}),Z=new Et.t({}),ue=new Et.t(""),Oe=new fs(A,N,Z,ue,j,mn,w,O.root);return Oe.snapshot=O.root,new Ro(new Or(Oe,[]),O)}class fs{constructor(O,A,N,j,Z,ue,Oe,Se){this.urlSubject=O,this.paramsSubject=A,this.queryParamsSubject=N,this.fragmentSubject=j,this.dataSubject=Z,this.outlet=ue,this.component=Oe,this._futureSnapshot=Se,this.title=this.dataSubject?.pipe((0,zn.T)(Rt=>Rt[qi]))??(0,je.of)(void 0),this.url=O,this.params=A,this.queryParams=N,this.fragment=j,this.data=Z}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,zn.T)(O=>gr(O))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,zn.T)(O=>gr(O))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xr(w,O,A="emptyOnly"){let N;const{routeConfig:j}=w;return N=null===O||"always"!==A&&""!==j?.path&&(O.component||O.routeConfig?.loadComponent)?{params:{...w.params},data:{...w.data},resolve:{...w.data,...w._resolvedData??{}}}:{params:{...O.params,...w.params},data:{...O.data,...w.data},resolve:{...w.data,...O.data,...j?.data,...w._resolvedData}},j&&Jr(j)&&(N.resolve[qi]=j.title),N}class to{get title(){return this.data?.[qi]}constructor(O,A,N,j,Z,ue,Oe,Se,Rt){this.url=O,this.params=A,this.queryParams=N,this.fragment=j,this.data=Z,this.outlet=ue,this.component=Oe,this.routeConfig=Se,this._resolve=Rt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=gr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=gr(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(N=>N.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Co extends na{constructor(O,A){super(A),this.url=O,Jo(this,A)}toString(){return Pa(this._root)}}function Jo(w,O){O.value._routerState=w,O.children.forEach(A=>Jo(w,A))}function Pa(w){const O=w.children.length>0?` { ${w.children.map(Pa).join(", ")} } `:"";return`${w.value}${O}`}function ur(w){if(w.snapshot){const O=w.snapshot,A=w._futureSnapshot;w.snapshot=A,Ei(O.queryParams,A.queryParams)||w.queryParamsSubject.next(A.queryParams),O.fragment!==A.fragment&&w.fragmentSubject.next(A.fragment),Ei(O.params,A.params)||w.paramsSubject.next(A.params),function lo(w,O){if(w.length!==O.length)return!1;for(let A=0;A<w.length;++A)if(!Ei(w[A],O[A]))return!1;return!0}(O.url,A.url)||w.urlSubject.next(A.url),Ei(O.data,A.data)||w.dataSubject.next(A.data)}else w.snapshot=w._futureSnapshot,w.dataSubject.next(w._futureSnapshot.data)}function ji(w,O){const A=Ei(w.params,O.params)&&function Ge(w,O){return st(w,O)&&w.every((A,N)=>Ei(A.parameters,O[N].parameters))}(w.url,O.url);return A&&!(!w.parent!=!O.parent)&&(!w.parent||ji(w.parent,O.parent))}function Jr(w){return"string"==typeof w.title||null===w.title}let Qn=(()=>{class w{constructor(){this.activated=null,this._activatedRoute=null,this.name=mn,this.activateEvents=new B.bkB,this.deactivateEvents=new B.bkB,this.attachEvents=new B.bkB,this.detachEvents=new B.bkB,this.parentContexts=(0,B.WQX)(Yo),this.location=(0,B.WQX)(B.c1b),this.changeDetector=(0,B.WQX)(B.gRc),this.inputBinder=(0,B.WQX)(Zo,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(A){if(A.name){const{firstChange:N,previousValue:j}=A.name;if(N)return;this.isTrackedInParentContexts(j)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(j)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(A){return this.parentContexts.getContext(A)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const A=this.parentContexts.getContext(this.name);A?.route&&(A.attachRef?this.attach(A.attachRef,A.route):this.activateWith(A.route,A.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B.wOt(4012,!1);this.location.detach();const A=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(A.instance),A}attach(A,N){this.activated=A,this._activatedRoute=N,this.location.insert(A.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(A.instance)}deactivate(){if(this.activated){const A=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(A)}}activateWith(A,N){if(this.isActivated)throw new B.wOt(4013,!1);this._activatedRoute=A;const j=this.location,ue=A.snapshot.component,Oe=this.parentContexts.getOrCreateContext(this.name).children,Se=new wi(A,Oe,j.injector);this.activated=j.createComponent(ue,{index:j.length,injector:Se,environmentInjector:N}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275dir=B.FsC({type:w,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[B.OA$]})}return w})();class wi{__ngOutletInjector(O){return new wi(this.route,this.childContexts,O)}constructor(O,A,N){this.route=O,this.childContexts=A,this.parent=N}get(O,A){return O===fs?this.route:O===Yo?this.childContexts:this.parent.get(O,A)}}const Zo=new B.nKC("");let Ni=(()=>{class w{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(A){this.unsubscribeFromRouteData(A),this.subscribeToRouteData(A)}unsubscribeFromRouteData(A){this.outletDataSubscriptions.get(A)?.unsubscribe(),this.outletDataSubscriptions.delete(A)}subscribeToRouteData(A){const{activatedRoute:N}=A,j=nn([N.queryParams,N.params,N.data]).pipe((0,hr.n)(([Z,ue,Oe],Se)=>(Oe={...Z,...ue,...Oe},0===Se?(0,je.of)(Oe):Promise.resolve(Oe)))).subscribe(Z=>{if(!A.isActivated||!A.activatedComponentRef||A.activatedRoute!==N||null===N.component)return void this.unsubscribeFromRouteData(A);const ue=(0,B.HJs)(N.component);if(ue)for(const{templateName:Oe}of ue.inputs)A.activatedComponentRef.setInput(Oe,Z[Oe]);else this.unsubscribeFromRouteData(A)});this.outletDataSubscriptions.set(A,j)}static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275prov=B.jDH({token:w,factory:w.\u0275fac})}return w})();function Bs(w,O,A){if(A&&w.shouldReuseRoute(O.value,A.value.snapshot)){const N=A.value;N._futureSnapshot=O.value;const j=function kr(w,O,A){return O.children.map(N=>{for(const j of A.children)if(w.shouldReuseRoute(N.value,j.value.snapshot))return Bs(w,N,j);return Bs(w,N)})}(w,O,A);return new Or(N,j)}{if(w.shouldAttach(O.value)){const Z=w.retrieve(O.value);if(null!==Z){const ue=Z.route;return ue.value._futureSnapshot=O.value,ue.children=O.children.map(Oe=>Bs(w,Oe)),ue}}const N=function Da(w){return new fs(new Et.t(w.url),new Et.t(w.params),new Et.t(w.queryParams),new Et.t(w.fragment),new Et.t(w.data),w.outlet,w.component,w)}(O.value),j=O.children.map(Z=>Bs(w,Z));return new Or(N,j)}}class no{constructor(O,A){this.redirectTo=O,this.navigationBehaviorOptions=A}}const Mt="ngNavigationCancelingError";function Ur(w,O){const{redirectTo:A,navigationBehaviorOptions:N}=Je(O)?{redirectTo:O,navigationBehaviorOptions:void 0}:O,j=fi(!1,Ri.Redirect);return j.url=A,j.navigationBehaviorOptions=N,j}function fi(w,O){const A=new Error(`NavigationCancelingError: ${w||""}`);return A[Mt]=!0,A.cancellationCode=O,A}function js(w){return!!w&&w[Mt]}let Io=(()=>{class w{static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275cmp=B.VBU({type:w,selectors:[["ng-component"]],standalone:!0,features:[B.aNF],decls:1,vars:0,template:function(N,j){1&N&&B.nrm(0,"router-outlet")},dependencies:[Qn],encapsulation:2})}return w})();function b(w){const O=w.children&&w.children.map(b),A=O?{...w,children:O}:{...w};return!A.component&&!A.loadComponent&&(O||A.loadChildren)&&A.outlet&&A.outlet!==mn&&(A.component=Io),A}function M(w){return w.outlet||mn}function Q(w){if(!w)return null;if(w.routeConfig?._injector)return w.routeConfig._injector;for(let O=w.parent;O;O=O.parent){const A=O.routeConfig;if(A?._loadedInjector)return A._loadedInjector;if(A?._injector)return A._injector}return null}class Ce{constructor(O,A,N,j,Z){this.routeReuseStrategy=O,this.futureState=A,this.currState=N,this.forwardEvent=j,this.inputBindingEnabled=Z}activate(O){const A=this.futureState._root,N=this.currState?this.currState._root:null;this.deactivateChildRoutes(A,N,O),ur(this.futureState.root),this.activateChildRoutes(A,N,O)}deactivateChildRoutes(O,A,N){const j=Xo(A);O.children.forEach(Z=>{const ue=Z.value.outlet;this.deactivateRoutes(Z,j[ue],N),delete j[ue]}),Object.values(j).forEach(Z=>{this.deactivateRouteAndItsChildren(Z,N)})}deactivateRoutes(O,A,N){const j=O.value,Z=A?A.value:null;if(j===Z)if(j.component){const ue=N.getContext(j.outlet);ue&&this.deactivateChildRoutes(O,A,ue.children)}else this.deactivateChildRoutes(O,A,N);else Z&&this.deactivateRouteAndItsChildren(A,N)}deactivateRouteAndItsChildren(O,A){O.value.component&&this.routeReuseStrategy.shouldDetach(O.value.snapshot)?this.detachAndStoreRouteSubtree(O,A):this.deactivateRouteAndOutlet(O,A)}detachAndStoreRouteSubtree(O,A){const N=A.getContext(O.value.outlet),j=N&&O.value.component?N.children:A,Z=Xo(O);for(const ue of Object.values(Z))this.deactivateRouteAndItsChildren(ue,j);if(N&&N.outlet){const ue=N.outlet.detach(),Oe=N.children.onOutletDeactivated();this.routeReuseStrategy.store(O.value.snapshot,{componentRef:ue,route:O,contexts:Oe})}}deactivateRouteAndOutlet(O,A){const N=A.getContext(O.value.outlet),j=N&&O.value.component?N.children:A,Z=Xo(O);for(const ue of Object.values(Z))this.deactivateRouteAndItsChildren(ue,j);N&&(N.outlet&&(N.outlet.deactivate(),N.children.onOutletDeactivated()),N.attachRef=null,N.route=null)}activateChildRoutes(O,A,N){const j=Xo(A);O.children.forEach(Z=>{this.activateRoutes(Z,j[Z.value.outlet],N),this.forwardEvent(new ba(Z.value.snapshot))}),O.children.length&&this.forwardEvent(new Xa(O.value.snapshot))}activateRoutes(O,A,N){const j=O.value,Z=A?A.value:null;if(ur(j),j===Z)if(j.component){const ue=N.getOrCreateContext(j.outlet);this.activateChildRoutes(O,A,ue.children)}else this.activateChildRoutes(O,A,N);else if(j.component){const ue=N.getOrCreateContext(j.outlet);if(this.routeReuseStrategy.shouldAttach(j.snapshot)){const Oe=this.routeReuseStrategy.retrieve(j.snapshot);this.routeReuseStrategy.store(j.snapshot,null),ue.children.onOutletReAttached(Oe.contexts),ue.attachRef=Oe.componentRef,ue.route=Oe.route.value,ue.outlet&&ue.outlet.attach(Oe.componentRef,Oe.route.value),ur(Oe.route.value),this.activateChildRoutes(O,null,ue.children)}else{const Oe=Q(j.snapshot);ue.attachRef=null,ue.route=j,ue.injector=Oe??ue.injector,ue.outlet&&ue.outlet.activateWith(j,ue.injector),this.activateChildRoutes(O,null,ue.children)}}else this.activateChildRoutes(O,null,N)}}class Ke{constructor(O){this.path=O,this.route=this.path[this.path.length-1]}}class rt{constructor(O,A){this.component=O,this.route=A}}function Qt(w,O,A){const N=w._root;return yn(N,O?O._root:null,A,[N.value])}function Vn(w,O){const A=Symbol(),N=O.get(w,A);return N===A?"function"!=typeof w||(0,B.LfX)(w)?O.get(w):w:N}function yn(w,O,A,N,j={canDeactivateChecks:[],canActivateChecks:[]}){const Z=Xo(O);return w.children.forEach(ue=>{(function bn(w,O,A,N,j={canDeactivateChecks:[],canActivateChecks:[]}){const Z=w.value,ue=O?O.value:null,Oe=A?A.getContext(w.value.outlet):null;if(ue&&Z.routeConfig===ue.routeConfig){const Se=function hn(w,O,A){if("function"==typeof A)return A(w,O);switch(A){case"pathParamsChange":return!st(w.url,O.url);case"pathParamsOrQueryParamsChange":return!st(w.url,O.url)||!Ei(w.queryParams,O.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ji(w,O)||!Ei(w.queryParams,O.queryParams);default:return!ji(w,O)}}(ue,Z,Z.routeConfig.runGuardsAndResolvers);Se?j.canActivateChecks.push(new Ke(N)):(Z.data=ue.data,Z._resolvedData=ue._resolvedData),yn(w,O,Z.component?Oe?Oe.children:null:A,N,j),Se&&Oe&&Oe.outlet&&Oe.outlet.isActivated&&j.canDeactivateChecks.push(new rt(Oe.outlet.component,ue))}else ue&&In(O,Oe,j),j.canActivateChecks.push(new Ke(N)),yn(w,null,Z.component?Oe?Oe.children:null:A,N,j)})(ue,Z[ue.value.outlet],A,N.concat([ue.value]),j),delete Z[ue.value.outlet]}),Object.entries(Z).forEach(([ue,Oe])=>In(Oe,A.getContext(ue),j)),j}function In(w,O,A){const N=Xo(w),j=w.value;Object.entries(N).forEach(([Z,ue])=>{In(ue,j.component?O?O.children.getContext(Z):null:O,A)}),A.canDeactivateChecks.push(new rt(j.component&&O&&O.outlet&&O.outlet.isActivated?O.outlet.component:null,j))}function wn(w){return"function"==typeof w}function R(w){return w instanceof tr.G||"EmptyError"===w?.name}const Y=Symbol("INITIAL_VALUE");function he(){return(0,hr.n)(w=>nn(w.map(O=>O.pipe((0,vi.s)(1),(0,zo.Z)(Y)))).pipe((0,zn.T)(O=>{for(const A of O)if(!0!==A){if(A===Y)return Y;if(!1===A||Tt(A))return A}return!0}),(0,We.p)(O=>O!==Y),(0,vi.s)(1)))}function Tt(w){return Je(w)||w instanceof no}function ho(w){return(0,_t.F)((0,Pt.M)(O=>{if("boolean"!=typeof O)throw Ur(0,O)}),(0,zn.T)(O=>!0===O))}class No{constructor(O){this.segmentGroup=O||null}}class br extends Error{constructor(O){super(),this.urlTree=O}}function To(w){return(0,Yt.$)(new No(w))}class vn{constructor(O,A){this.urlSerializer=O,this.urlTree=A}lineralizeSegments(O,A){let N=[],j=A.root;for(;;){if(N=N.concat(j.segments),0===j.numberOfChildren)return(0,je.of)(N);if(j.numberOfChildren>1||!j.children[mn])return(0,Yt.$)(new B.wOt(4e3,!1));j=j.children[mn]}}applyRedirectCommands(O,A,N,j,Z){if("string"!=typeof A){const Oe=A,{queryParams:Se,fragment:Rt,routeConfig:En,url:_n,outlet:jr,params:la,data:Hi,title:ca}=j,ys=(0,B.N4e)(Z,()=>Oe({params:la,data:Hi,queryParams:Se,fragment:Rt,routeConfig:En,url:_n,outlet:jr,title:ca}));if(ys instanceof Kt)throw new br(ys);A=ys}const ue=this.applyRedirectCreateUrlTree(A,this.urlSerializer.parse(A),O,N);if("/"===A[0])throw new br(ue);return ue}applyRedirectCreateUrlTree(O,A,N,j){const Z=this.createSegmentGroup(O,A.root,N,j);return new Kt(Z,this.createQueryParams(A.queryParams,this.urlTree.queryParams),A.fragment)}createQueryParams(O,A){const N={};return Object.entries(O).forEach(([j,Z])=>{if("string"==typeof Z&&":"===Z[0]){const Oe=Z.substring(1);N[j]=A[Oe]}else N[j]=Z}),N}createSegmentGroup(O,A,N,j){const Z=this.createSegments(O,A.segments,N,j);let ue={};return Object.entries(A.children).forEach(([Oe,Se])=>{ue[Oe]=this.createSegmentGroup(O,Se,N,j)}),new Ln(Z,ue)}createSegments(O,A,N,j){return A.map(Z=>":"===Z.path[0]?this.findPosParam(O,Z,j):this.findOrReturn(Z,N))}findPosParam(O,A,N){const j=N[A.path.substring(1)];if(!j)throw new B.wOt(4001,!1);return j}findOrReturn(O,A){let N=0;for(const j of A){if(j.path===O.path)return A.splice(N),j;N++}return O}}const rs={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ms(w,O,A,N,j){const Z=Rc(w,O,A);return Z.matched?(N=function ps(w,O){return w.providers&&!w._injector&&(w._injector=(0,B.Ol2)(w.providers,O,`Route: ${w.path}`)),w._injector??O}(O,N),function ro(w,O,A,N){const j=O.canMatch;if(!j||0===j.length)return(0,je.of)(!0);const Z=j.map(ue=>{const Oe=Vn(ue,w);return ir(function $(w){return w&&wn(w.canMatch)}(Oe)?Oe.canMatch(O,A):(0,B.N4e)(w,()=>Oe(O,A)))});return(0,je.of)(Z).pipe(he(),ho())}(N,O,A).pipe((0,zn.T)(ue=>!0===ue?Z:{...rs}))):(0,je.of)(Z)}function Rc(w,O,A){if("**"===O.path)return function oc(w){return{matched:!0,parameters:w.length>0?xn(w).parameters:{},consumedSegments:w,remainingSegments:[],positionalParamSegments:{}}}(A);if(""===O.path)return"full"===O.pathMatch&&(w.hasChildren()||A.length>0)?{...rs}:{matched:!0,consumedSegments:[],remainingSegments:A,parameters:{},positionalParamSegments:{}};const j=(O.matcher||Yr)(A,w,O);if(!j)return{...rs};const Z={};Object.entries(j.posParams??{}).forEach(([Oe,Se])=>{Z[Oe]=Se.path});const ue=j.consumed.length>0?{...Z,...j.consumed[j.consumed.length-1].parameters}:Z;return{matched:!0,consumedSegments:j.consumed,remainingSegments:A.slice(j.consumed.length),parameters:ue,positionalParamSegments:j.posParams??{}}}function $s(w,O,A,N){return A.length>0&&function pf(w,O,A){return A.some(N=>Za(w,O,N)&&M(N)!==mn)}(w,A,N)?{segmentGroup:new Ln(O,sc(N,new Ln(A,w.children))),slicedSegments:[]}:0===A.length&&function Nc(w,O,A){return A.some(N=>Za(w,O,N))}(w,A,N)?{segmentGroup:new Ln(w.segments,Pl(w,A,N,w.children)),slicedSegments:A}:{segmentGroup:new Ln(w.segments,w.children),slicedSegments:A}}function Pl(w,O,A,N){const j={};for(const Z of A)if(Za(w,O,Z)&&!N[M(Z)]){const ue=new Ln([],{});j[M(Z)]=ue}return{...N,...j}}function sc(w,O){const A={};A[mn]=O;for(const N of w)if(""===N.path&&M(N)!==mn){const j=new Ln([],{});A[M(N)]=j}return A}function Za(w,O,A){return(!(w.hasChildren()||O.length>0)||"full"!==A.pathMatch)&&""===A.path}class lu{}class ko{constructor(O,A,N,j,Z,ue,Oe){this.injector=O,this.configLoader=A,this.rootComponentType=N,this.config=j,this.urlTree=Z,this.paramsInheritanceStrategy=ue,this.urlSerializer=Oe,this.applyRedirects=new vn(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(O){return new B.wOt(4002,`'${O.segmentGroup}'`)}recognize(){const O=$s(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(O).pipe((0,zn.T)(({children:A,rootSnapshot:N})=>{const j=new Or(N,A),Z=new Co("",j),ue=function be(w,O,A=null,N=null){return Wt(ut(w),O,A,N)}(N,[],this.urlTree.queryParams,this.urlTree.fragment);return ue.queryParams=this.urlTree.queryParams,Z.url=this.urlSerializer.serialize(ue),{state:Z,tree:ue}}))}match(O){const A=new to([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),mn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,O,mn,A).pipe((0,zn.T)(N=>({children:N,rootSnapshot:A})),(0,Ze.W)(N=>{if(N instanceof br)return this.urlTree=N.urlTree,this.match(N.urlTree.root);throw N instanceof No?this.noMatchError(N):N}))}processSegmentGroup(O,A,N,j,Z){return 0===N.segments.length&&N.hasChildren()?this.processChildren(O,A,N,Z):this.processSegment(O,A,N,N.segments,j,!0,Z).pipe((0,zn.T)(ue=>ue instanceof Or?[ue]:[]))}processChildren(O,A,N,j){const Z=[];for(const ue of Object.keys(N.children))"primary"===ue?Z.unshift(ue):Z.push(ue);return(0,Fe.H)(Z).pipe((0,lt.H)(ue=>{const Oe=N.children[ue],Se=function U(w,O){const A=w.filter(N=>M(N)===O);return A.push(...w.filter(N=>M(N)!==O)),A}(A,ue);return this.processSegmentGroup(O,Se,Oe,ue,j)}),(0,we.S)((ue,Oe)=>(ue.push(...Oe),ue)),(0,Mn.U)(null),function te(w,O){const A=arguments.length>=2;return N=>N.pipe(w?(0,We.p)((j,Z)=>w(j,Z,N)):Ie.D,ar(1),A?(0,Mn.U)(O):(0,en.v)(()=>new tr.G))}(),(0,Qe.Z)(ue=>{if(null===ue)return To(N);const Oe=Un(ue);return function ac(w){w.sort((O,A)=>O.value.outlet===mn?-1:A.value.outlet===mn?1:O.value.outlet.localeCompare(A.value.outlet))}(Oe),(0,je.of)(Oe)}))}processSegment(O,A,N,j,Z,ue,Oe){return(0,Fe.H)(A).pipe((0,lt.H)(Se=>this.processSegmentAgainstRoute(Se._injector??O,A,Se,N,j,Z,ue,Oe).pipe((0,Ze.W)(Rt=>{if(Rt instanceof No)return(0,je.of)(null);throw Rt}))),(0,at.$)(Se=>!!Se),(0,Ze.W)(Se=>{if(R(Se))return function Sa(w,O,A){return 0===O.length&&!w.children[A]}(N,j,Z)?(0,je.of)(new lu):To(N);throw Se}))}processSegmentAgainstRoute(O,A,N,j,Z,ue,Oe,Se){return function Qi(w,O,A,N){return!!(M(w)===N||N!==mn&&Za(O,A,w))&&Rc(O,w,A).matched}(N,j,Z,ue)?void 0===N.redirectTo?this.matchSegmentAgainstRoute(O,j,N,Z,ue,Se):this.allowRedirects&&Oe?this.expandSegmentAgainstRouteUsingRedirect(O,j,A,N,Z,ue,Se):To(j):To(j)}expandSegmentAgainstRouteUsingRedirect(O,A,N,j,Z,ue,Oe){const{matched:Se,parameters:Rt,consumedSegments:En,positionalParamSegments:_n,remainingSegments:jr}=Rc(A,j,Z);if(!Se)return To(A);"string"==typeof j.redirectTo&&"/"===j.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const la=new to(Z,Rt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Yd(j),M(j),j.component??j._loadedComponent??null,j,cu(j)),Hi=xr(la,Oe,this.paramsInheritanceStrategy);la.params=Object.freeze(Hi.params),la.data=Object.freeze(Hi.data);const ca=this.applyRedirects.applyRedirectCommands(En,j.redirectTo,_n,la,O);return this.applyRedirects.lineralizeSegments(j,ca).pipe((0,Qe.Z)(ys=>this.processSegment(O,N,A,ys.concat(jr),ue,!1,Oe)))}matchSegmentAgainstRoute(O,A,N,j,Z,ue){const Oe=Ms(A,N,j,O);return"**"===N.path&&(A.children={}),Oe.pipe((0,hr.n)(Se=>Se.matched?this.getChildConfig(O=N._injector??O,N,j).pipe((0,hr.n)(({routes:Rt})=>{const En=N._loadedInjector??O,{parameters:_n,consumedSegments:jr,remainingSegments:la}=Se,Hi=new to(jr,_n,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Yd(N),M(N),N.component??N._loadedComponent??null,N,cu(N)),ca=xr(Hi,ue,this.paramsInheritanceStrategy);Hi.params=Object.freeze(ca.params),Hi.data=Object.freeze(ca.data);const{segmentGroup:ys,slicedSegments:Rs}=$s(A,jr,la,Rt);if(0===Rs.length&&ys.hasChildren())return this.processChildren(En,Rt,ys,Hi).pipe((0,zn.T)(dc=>new Or(Hi,dc)));if(0===Rt.length&&0===Rs.length)return(0,je.of)(new Or(Hi,[]));const rh=M(N)===Z;return this.processSegment(En,Rt,ys,Rs,rh?mn:Z,!0,Hi).pipe((0,zn.T)(dc=>new Or(Hi,dc instanceof Or?[dc]:[])))})):To(A)))}getChildConfig(O,A,N){return A.children?(0,je.of)({routes:A.children,injector:O}):A.loadChildren?void 0!==A._loadedRoutes?(0,je.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):function Wr(w,O,A,N){const j=O.canLoad;if(void 0===j||0===j.length)return(0,je.of)(!0);const Z=j.map(ue=>{const Oe=Vn(ue,w);return ir(function $i(w){return w&&wn(w.canLoad)}(Oe)?Oe.canLoad(O,A):(0,B.N4e)(w,()=>Oe(O,A)))});return(0,je.of)(Z).pipe(he(),ho())}(O,A,N).pipe((0,Qe.Z)(j=>j?this.configLoader.loadChildren(O,A).pipe((0,Pt.M)(Z=>{A._loadedRoutes=Z.routes,A._loadedInjector=Z.injector})):function xo(w){return(0,Yt.$)(fi(!1,Ri.GuardRejected))}())):(0,je.of)({routes:[],injector:O})}}function Ma(w){const O=w.value.routeConfig;return O&&""===O.path}function Un(w){const O=[],A=new Set;for(const N of w){if(!Ma(N)){O.push(N);continue}const j=O.find(Z=>N.value.routeConfig===Z.value.routeConfig);void 0!==j?(j.children.push(...N.children),A.add(j)):O.push(N)}for(const N of A){const j=Un(N.children);O.push(new Or(N.value,j))}return O.filter(N=>!A.has(N))}function Yd(w){return w.data||{}}function cu(w){return w.resolve||{}}function Fo(w){const O=w.children.map(A=>Fo(A)).flat();return[w,...O]}function z(w){return(0,hr.n)(O=>{const A=w(O);return A?(0,Fe.H)(A).pipe((0,zn.T)(()=>O)):(0,je.of)(O)})}let le=(()=>{class w{buildTitle(A){let N,j=A.root;for(;void 0!==j;)N=this.getResolvedTitleForRoute(j)??N,j=j.children.find(Z=>Z.outlet===mn);return N}getResolvedTitleForRoute(A){return A.data[qi]}static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275prov=B.jDH({token:w,factory:()=>(0,B.WQX)(Ye),providedIn:"root"})}return w})(),Ye=(()=>{class w extends le{constructor(A){super(),this.title=A}updateTitle(A){const N=this.buildTitle(A);void 0!==N&&this.title.setTitle(N)}static#e=this.\u0275fac=function(N){return new(N||w)(B.KVO(Wn.hE))};static#t=this.\u0275prov=B.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const wt=new B.nKC("",{providedIn:"root",factory:()=>({})}),an=new B.nKC("");let on=(()=>{class w{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,B.WQX)(B.Ql9)}loadComponent(A){if(this.componentLoaders.get(A))return this.componentLoaders.get(A);if(A._loadedComponent)return(0,je.of)(A._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(A);const N=ir(A.loadComponent()).pipe((0,zn.T)(dr),(0,Pt.M)(Z=>{this.onLoadEndListener&&this.onLoadEndListener(A),A._loadedComponent=Z}),(0,Qr.j)(()=>{this.componentLoaders.delete(A)})),j=new Ut(N,()=>new Nn.B).pipe(_e());return this.componentLoaders.set(A,j),j}loadChildren(A,N){if(this.childrenLoaders.get(N))return this.childrenLoaders.get(N);if(N._loadedRoutes)return(0,je.of)({routes:N._loadedRoutes,injector:N._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(N);const Z=function Lr(w,O,A,N){return ir(w.loadChildren()).pipe((0,zn.T)(dr),(0,Qe.Z)(j=>j instanceof B.Co$||Array.isArray(j)?(0,je.of)(j):(0,Fe.H)(O.compileModuleAsync(j))),(0,zn.T)(j=>{N&&N(w);let Z,ue,Oe=!1;return Array.isArray(j)?(ue=j,!0):(Z=j.create(A).injector,ue=Z.get(an,[],{optional:!0,self:!0}).flat()),{routes:ue.map(b),injector:Z}}))}(N,this.compiler,A,this.onLoadEndListener).pipe((0,Qr.j)(()=>{this.childrenLoaders.delete(N)})),ue=new Ut(Z,()=>new Nn.B).pipe(_e());return this.childrenLoaders.set(N,ue),ue}static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275prov=B.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function dr(w){return function Pr(w){return w&&"object"==typeof w&&"default"in w}(w)?w.default:w}let ii=(()=>{class w{static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275prov=B.jDH({token:w,factory:()=>(0,B.WQX)(Br),providedIn:"root"})}return w})(),Br=(()=>{class w{shouldProcessUrl(A){return!0}extract(A){return A}merge(A,N){return A}static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275prov=B.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const Zr=new B.nKC(""),Lo=new B.nKC("");function Hs(w,O,A){const N=w.get(Lo),j=w.get(Kn.qQ);return w.get(B.SKi).runOutsideAngular(()=>{if(!j.startViewTransition||N.skipNextTransition)return N.skipNextTransition=!1,new Promise(Rt=>setTimeout(Rt));let Z;const ue=new Promise(Rt=>{Z=Rt}),Oe=j.startViewTransition(()=>(Z(),function is(w){return new Promise(O=>{(0,B.mal)(O,{injector:w})})}(w))),{onViewTransitionCreated:Se}=N;return Se&&(0,B.N4e)(w,()=>Se({transition:Oe,from:O,to:A})),ue})}const os=new B.nKC("");let Rr=(()=>{class w{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Nn.B,this.transitionAbortSubject=new Nn.B,this.configLoader=(0,B.WQX)(on),this.environmentInjector=(0,B.WQX)(B.uvJ),this.urlSerializer=(0,B.WQX)(et),this.rootContexts=(0,B.WQX)(Yo),this.location=(0,B.WQX)(Kn.aZ),this.inputBindingEnabled=null!==(0,B.WQX)(Zo,{optional:!0}),this.titleStrategy=(0,B.WQX)(le),this.options=(0,B.WQX)(wt,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,B.WQX)(ii),this.createViewTransition=(0,B.WQX)(Zr,{optional:!0}),this.navigationErrorHandler=(0,B.WQX)(os,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,je.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=j=>this.events.next(new Ta(j)),this.configLoader.onLoadStartListener=j=>this.events.next(new Sc(j))}complete(){this.transitions?.complete()}handleNavigationRequest(A){const N=++this.navigationId;this.transitions?.next({...this.transitions.value,...A,id:N})}setupNavigations(A,N,j){return this.transitions=new Et.t({id:0,currentUrlTree:N,currentRawUrl:N,extractedUrl:this.urlHandlingStrategy.extract(N),urlAfterRedirects:this.urlHandlingStrategy.extract(N),rawUrl:N,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Qo,restoredState:null,currentSnapshot:j.snapshot,targetSnapshot:null,currentRouterState:j,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,We.p)(Z=>0!==Z.id),(0,zn.T)(Z=>({...Z,extractedUrl:this.urlHandlingStrategy.extract(Z.rawUrl)})),(0,hr.n)(Z=>{let ue=!1,Oe=!1;return(0,je.of)(Z).pipe((0,hr.n)(Se=>{if(this.navigationId>Z.id)return this.cancelNavigationTransition(Z,"",Ri.SupersededByNewNavigation),At.w;this.currentTransition=Z,this.currentNavigation={id:Se.id,initialUrl:Se.rawUrl,extractedUrl:Se.extractedUrl,trigger:Se.source,extras:Se.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const Rt=!A.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!Rt&&"reload"!==(Se.extras.onSameUrlNavigation??A.onSameUrlNavigation)){const _n="";return this.events.next(new eo(Se.id,this.urlSerializer.serialize(Se.rawUrl),_n,Xr.IgnoredSameUrlNavigation)),Se.resolve(!1),At.w}if(this.urlHandlingStrategy.shouldProcessUrl(Se.rawUrl))return(0,je.of)(Se).pipe((0,hr.n)(_n=>{const jr=this.transitions?.getValue();return this.events.next(new co(_n.id,this.urlSerializer.serialize(_n.extractedUrl),_n.source,_n.restoredState)),jr!==this.transitions?.getValue()?At.w:Promise.resolve(_n)}),function ms(w,O,A,N,j,Z){return(0,Qe.Z)(ue=>function Dl(w,O,A,N,j,Z,ue="emptyOnly"){return new ko(w,O,A,N,j,ue,Z).recognize()}(w,O,A,N,ue.extractedUrl,j,Z).pipe((0,zn.T)(({state:Oe,tree:Se})=>({...ue,targetSnapshot:Oe,urlAfterRedirects:Se}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,A.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,Pt.M)(_n=>{Z.targetSnapshot=_n.targetSnapshot,Z.urlAfterRedirects=_n.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:_n.urlAfterRedirects};const jr=new Us(_n.id,this.urlSerializer.serialize(_n.extractedUrl),this.urlSerializer.serialize(_n.urlAfterRedirects),_n.targetSnapshot);this.events.next(jr)}));if(Rt&&this.urlHandlingStrategy.shouldProcessUrl(Se.currentRawUrl)){const{id:_n,extractedUrl:jr,source:la,restoredState:Hi,extras:ca}=Se,ys=new co(_n,this.urlSerializer.serialize(jr),la,Hi);this.events.next(ys);const Rs=Ps(this.rootComponentType).snapshot;return this.currentTransition=Z={...Se,targetSnapshot:Rs,urlAfterRedirects:jr,extras:{...ca,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=jr,(0,je.of)(Z)}{const _n="";return this.events.next(new eo(Se.id,this.urlSerializer.serialize(Se.extractedUrl),_n,Xr.IgnoredByUrlHandlingStrategy)),Se.resolve(!1),At.w}}),(0,Pt.M)(Se=>{const Rt=new ea(Se.id,this.urlSerializer.serialize(Se.extractedUrl),this.urlSerializer.serialize(Se.urlAfterRedirects),Se.targetSnapshot);this.events.next(Rt)}),(0,zn.T)(Se=>(this.currentTransition=Z={...Se,guards:Qt(Se.targetSnapshot,Se.currentSnapshot,this.rootContexts)},Z)),function An(w,O){return(0,Qe.Z)(A=>{const{targetSnapshot:N,currentSnapshot:j,guards:{canActivateChecks:Z,canDeactivateChecks:ue}}=A;return 0===ue.length&&0===Z.length?(0,je.of)({...A,guardsResult:!0}):function bi(w,O,A,N){return(0,Fe.H)(w).pipe((0,Qe.Z)(j=>function or(w,O,A,N,j){const Z=O&&O.routeConfig?O.routeConfig.canDeactivate:null;if(!Z||0===Z.length)return(0,je.of)(!0);const ue=Z.map(Oe=>{const Se=Q(O)??j,Rt=Vn(Oe,Se);return ir(function H(w){return w&&wn(w.canDeactivate)}(Rt)?Rt.canDeactivate(w,O,A,N):(0,B.N4e)(Se,()=>Rt(w,O,A,N))).pipe((0,at.$)())});return(0,je.of)(ue).pipe(he())}(j.component,j.route,A,O,N)),(0,at.$)(j=>!0!==j,!0))}(ue,N,j,w).pipe((0,Qe.Z)(Oe=>Oe&&function Fr(w){return"boolean"==typeof w}(Oe)?function ns(w,O,A,N){return(0,Fe.H)(O).pipe((0,lt.H)(j=>(0,pr.x)(function rn(w,O){return null!==w&&O&&O(new rc(w)),(0,je.of)(!0)}(j.route.parent,N),function wo(w,O){return null!==w&&O&&O(new ic(w)),(0,je.of)(!0)}(j.route,N),function Dn(w,O,A){const N=O[O.length-1],Z=O.slice(0,O.length-1).reverse().map(ue=>function mt(w){const O=w.routeConfig?w.routeConfig.canActivateChild:null;return O&&0!==O.length?{node:w,guards:O}:null}(ue)).filter(ue=>null!==ue).map(ue=>It(()=>{const Oe=ue.guards.map(Se=>{const Rt=Q(ue.node)??A,En=Vn(Se,Rt);return ir(function ts(w){return w&&wn(w.canActivateChild)}(En)?En.canActivateChild(N,w):(0,B.N4e)(Rt,()=>En(N,w))).pipe((0,at.$)())});return(0,je.of)(Oe).pipe(he())}));return(0,je.of)(Z).pipe(he())}(w,j.path,A),function jt(w,O,A){const N=O.routeConfig?O.routeConfig.canActivate:null;if(!N||0===N.length)return(0,je.of)(!0);const j=N.map(Z=>It(()=>{const ue=Q(O)??A,Oe=Vn(Z,ue);return ir(function Ti(w){return w&&wn(w.canActivate)}(Oe)?Oe.canActivate(O,w):(0,B.N4e)(ue,()=>Oe(O,w))).pipe((0,at.$)())}));return(0,je.of)(j).pipe(he())}(w,j.route,A))),(0,at.$)(j=>!0!==j,!0))}(N,Z,w,O):(0,je.of)(Oe)),(0,zn.T)(Oe=>({...A,guardsResult:Oe})))})}(this.environmentInjector,Se=>this.events.next(Se)),(0,Pt.M)(Se=>{if(Z.guardsResult=Se.guardsResult,Se.guardsResult&&"boolean"!=typeof Se.guardsResult)throw Ur(0,Se.guardsResult);const Rt=new bl(Se.id,this.urlSerializer.serialize(Se.extractedUrl),this.urlSerializer.serialize(Se.urlAfterRedirects),Se.targetSnapshot,!!Se.guardsResult);this.events.next(Rt)}),(0,We.p)(Se=>!!Se.guardsResult||(this.cancelNavigationTransition(Se,"",Ri.GuardRejected),!1)),z(Se=>{if(Se.guards.canActivateChecks.length)return(0,je.of)(Se).pipe((0,Pt.M)(Rt=>{const En=new Al(Rt.id,this.urlSerializer.serialize(Rt.extractedUrl),this.urlSerializer.serialize(Rt.urlAfterRedirects),Rt.targetSnapshot);this.events.next(En)}),(0,hr.n)(Rt=>{let En=!1;return(0,je.of)(Rt).pipe(function Xd(w,O){return(0,Qe.Z)(A=>{const{targetSnapshot:N,guards:{canActivateChecks:j}}=A;if(!j.length)return(0,je.of)(A);const Z=new Set(j.map(Se=>Se.route)),ue=new Set;for(const Se of Z)if(!ue.has(Se))for(const Rt of Fo(Se))ue.add(Rt);let Oe=0;return(0,Fe.H)(ue).pipe((0,lt.H)(Se=>Z.has(Se)?function D(w,O,A,N){const j=w.routeConfig,Z=w._resolve;return void 0!==j?.title&&!Jr(j)&&(Z[qi]=j.title),function q(w,O,A,N){const j=Bt(w);if(0===j.length)return(0,je.of)({});const Z={};return(0,Fe.H)(j).pipe((0,Qe.Z)(ue=>function k(w,O,A,N){const j=Q(O)??N,Z=Vn(w,j);return ir(Z.resolve?Z.resolve(O,A):(0,B.N4e)(j,()=>Z(O,A)))}(w[ue],O,A,N).pipe((0,at.$)(),(0,Pt.M)(Oe=>{if(Oe instanceof no)throw Ur(new Be,Oe);Z[ue]=Oe}))),ar(1),function fr(w){return(0,zn.T)(()=>w)}(Z),(0,Ze.W)(ue=>R(ue)?At.w:(0,Yt.$)(ue)))}(Z,w,O,N).pipe((0,zn.T)(ue=>(w._resolvedData=ue,w.data=xr(w,w.parent,A).resolve,null)))}(Se,N,w,O):(Se.data=xr(Se,Se.parent,w).resolve,(0,je.of)(void 0))),(0,Pt.M)(()=>Oe++),ar(1),(0,Qe.Z)(Se=>Oe===ue.size?(0,je.of)(A):At.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,Pt.M)({next:()=>En=!0,complete:()=>{En||this.cancelNavigationTransition(Rt,"",Ri.NoDataFromResolver)}}))}),(0,Pt.M)(Rt=>{const En=new wa(Rt.id,this.urlSerializer.serialize(Rt.extractedUrl),this.urlSerializer.serialize(Rt.urlAfterRedirects),Rt.targetSnapshot);this.events.next(En)}))}),z(Se=>{const Rt=En=>{const _n=[];En.routeConfig?.loadComponent&&!En.routeConfig._loadedComponent&&_n.push(this.configLoader.loadComponent(En.routeConfig).pipe((0,Pt.M)(jr=>{En.component=jr}),(0,zn.T)(()=>{})));for(const jr of En.children)_n.push(...Rt(jr));return _n};return nn(Rt(Se.targetSnapshot.root)).pipe((0,Mn.U)(null),(0,vi.s)(1))}),z(()=>this.afterPreactivation()),(0,hr.n)(()=>{const{currentSnapshot:Se,targetSnapshot:Rt}=Z,En=this.createViewTransition?.(this.environmentInjector,Se.root,Rt.root);return En?(0,Fe.H)(En).pipe((0,zn.T)(()=>Z)):(0,je.of)(Z)}),(0,zn.T)(Se=>{const Rt=function Ds(w,O,A){const N=Bs(w,O._root,A?A._root:void 0);return new Ro(N,O)}(A.routeReuseStrategy,Se.targetSnapshot,Se.currentRouterState);return this.currentTransition=Z={...Se,targetRouterState:Rt},this.currentNavigation.targetRouterState=Rt,Z}),(0,Pt.M)(()=>{this.events.next(new bs)}),((w,O,A,N)=>(0,zn.T)(j=>(new Ce(O,j.targetRouterState,j.currentRouterState,A,N).activate(w),j)))(this.rootContexts,A.routeReuseStrategy,Se=>this.events.next(Se),this.inputBindingEnabled),(0,vi.s)(1),(0,Pt.M)({next:Se=>{ue=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new hi(Se.id,this.urlSerializer.serialize(Se.extractedUrl),this.urlSerializer.serialize(Se.urlAfterRedirects))),this.titleStrategy?.updateTitle(Se.targetRouterState.snapshot),Se.resolve(!0)},complete:()=>{ue=!0}}),function Hr(w){return(0,it.N)((O,A)=>{(0,Ct.Tg)(w).subscribe((0,bt._)(A,()=>A.complete(),jn.l)),!A.closed&&O.subscribe(A)})}(this.transitionAbortSubject.pipe((0,Pt.M)(Se=>{throw Se}))),(0,Qr.j)(()=>{!ue&&!Oe&&this.cancelNavigationTransition(Z,"",Ri.SupersededByNewNavigation),this.currentTransition?.id===Z.id&&(this.currentNavigation=null,this.currentTransition=null)}),(0,Ze.W)(Se=>{if(Oe=!0,js(Se))this.events.next(new Oo(Z.id,this.urlSerializer.serialize(Z.extractedUrl),Se.message,Se.cancellationCode)),function es(w){return js(w)&&Je(w.url)}(Se)?this.events.next(new As(Se.url,Se.navigationBehaviorOptions)):Z.resolve(!1);else{const Rt=new Mr(Z.id,this.urlSerializer.serialize(Z.extractedUrl),Se,Z.targetSnapshot??void 0);try{const En=(0,B.N4e)(this.environmentInjector,()=>this.navigationErrorHandler?.(Rt));if(En instanceof no){const{message:_n,cancellationCode:jr}=Ur(0,En);this.events.next(new Oo(Z.id,this.urlSerializer.serialize(Z.extractedUrl),_n,jr)),this.events.next(new As(En.redirectTo,En.navigationBehaviorOptions))}else{this.events.next(Rt);const _n=A.errorHandler(Se);Z.resolve(!!_n)}}catch(En){this.options.resolveNavigationPromiseOnError?Z.resolve(!1):Z.reject(En)}}return At.w}))}))}cancelNavigationTransition(A,N,j){const Z=new Oo(A.id,this.urlSerializer.serialize(A.extractedUrl),N,j);this.events.next(Z),A.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275prov=B.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function oa(w){return w!==Qo}let cn=(()=>{class w{static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275prov=B.jDH({token:w,factory:()=>(0,B.WQX)(Oa),providedIn:"root"})}return w})();class Sl{shouldDetach(O){return!1}store(O,A){}shouldAttach(O){return!1}retrieve(O){return null}shouldReuseRoute(O,A){return O.routeConfig===A.routeConfig}}let Oa=(()=>{class w extends Sl{static#e=this.\u0275fac=(()=>{let A;return function(j){return(A||(A=B.xGo(w)))(j||w)}})();static#t=this.\u0275prov=B.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})(),Os=(()=>{class w{static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275prov=B.jDH({token:w,factory:()=>(0,B.WQX)(Qu),providedIn:"root"})}return w})(),Qu=(()=>{class w extends Os{constructor(){super(...arguments),this.location=(0,B.WQX)(Kn.aZ),this.urlSerializer=(0,B.WQX)(et),this.options=(0,B.WQX)(wt,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,B.WQX)(ii),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Kt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Ps(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(A){return this.location.subscribe(N=>{"popstate"===N.type&&A(N.url,N.state)})}handleRouterEvent(A,N){if(A instanceof co)this.stateMemento=this.createStateMemento();else if(A instanceof eo)this.rawUrlTree=N.initialUrl;else if(A instanceof Us){if("eager"===this.urlUpdateStrategy&&!N.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(N.finalUrl,N.initialUrl);this.setBrowserUrl(j,N)}}else A instanceof bs?(this.currentUrlTree=N.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(N.finalUrl,N.initialUrl),this.routerState=N.targetRouterState,"deferred"===this.urlUpdateStrategy&&(N.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,N))):A instanceof Oo&&(A.code===Ri.GuardRejected||A.code===Ri.NoDataFromResolver)?this.restoreHistory(N):A instanceof Mr?this.restoreHistory(N,!0):A instanceof hi&&(this.lastSuccessfulId=A.id,this.currentPageId=this.browserPageId)}setBrowserUrl(A,N){const j=this.urlSerializer.serialize(A);if(this.location.isCurrentPathEqualTo(j)||N.extras.replaceUrl){const ue={...N.extras.state,...this.generateNgRouterState(N.id,this.browserPageId)};this.location.replaceState(j,"",ue)}else{const Z={...N.extras.state,...this.generateNgRouterState(N.id,this.browserPageId+1)};this.location.go(j,"",Z)}}restoreHistory(A,N=!1){if("computed"===this.canceledNavigationResolution){const Z=this.currentPageId-this.browserPageId;0!==Z?this.location.historyGo(Z):this.currentUrlTree===A.finalUrl&&0===Z&&(this.resetState(A),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(N&&this.resetState(A),this.resetUrlToCurrentUrlTree())}resetState(A){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,A.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(A,N){return"computed"===this.canceledNavigationResolution?{navigationId:A,\u0275routerPageId:N}:{navigationId:A}}static#e=this.\u0275fac=(()=>{let A;return function(j){return(A||(A=B.xGo(w)))(j||w)}})();static#t=this.\u0275prov=B.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();var el=function(w){return w[w.COMPLETE=0]="COMPLETE",w[w.FAILED=1]="FAILED",w[w.REDIRECTING=2]="REDIRECTING",w}(el||{});function gf(w,O){w.events.pipe((0,We.p)(A=>A instanceof hi||A instanceof Oo||A instanceof Mr||A instanceof eo),(0,zn.T)(A=>A instanceof hi||A instanceof eo?el.COMPLETE:A instanceof Oo&&(A.code===Ri.Redirect||A.code===Ri.SupersededByNewNavigation)?el.REDIRECTING:el.FAILED),(0,We.p)(A=>A!==el.REDIRECTING),(0,vi.s)(1)).subscribe(()=>{O()})}function dg(w){throw w}const oi={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Yu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bo=(()=>{class w{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=(0,B.WQX)(B.H3F),this.stateManager=(0,B.WQX)(Os),this.options=(0,B.WQX)(wt,{optional:!0})||{},this.pendingTasks=(0,B.WQX)(B.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,B.WQX)(Rr),this.urlSerializer=(0,B.WQX)(et),this.location=(0,B.WQX)(Kn.aZ),this.urlHandlingStrategy=(0,B.WQX)(ii),this._events=new Nn.B,this.errorHandler=this.options.errorHandler||dg,this.navigated=!1,this.routeReuseStrategy=(0,B.WQX)(cn),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,B.WQX)(an,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,B.WQX)(Zo,{optional:!0}),this.eventsSubscription=new Gt.yU,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:A=>{this.console.warn(A)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const A=this.navigationTransitions.events.subscribe(N=>{try{const j=this.navigationTransitions.currentTransition,Z=this.navigationTransitions.currentNavigation;if(null!==j&&null!==Z)if(this.stateManager.handleRouterEvent(N,Z),N instanceof Oo&&N.code!==Ri.Redirect&&N.code!==Ri.SupersededByNewNavigation)this.navigated=!0;else if(N instanceof hi)this.navigated=!0;else if(N instanceof As){const ue=N.navigationBehaviorOptions,Oe=this.urlHandlingStrategy.merge(N.url,j.currentRawUrl),Se={info:j.extras.info,skipLocationChange:j.extras.skipLocationChange,replaceUrl:j.extras.replaceUrl||"eager"===this.urlUpdateStrategy||oa(j.source),...ue};this.scheduleNavigation(Oe,Qo,null,Se,{resolve:j.resolve,reject:j.reject,promise:j.promise})}(function tl(w){return!(w instanceof bs||w instanceof As)})(N)&&this._events.next(N)}catch(j){this.navigationTransitions.transitionAbortSubject.next(j)}});this.eventsSubscription.add(A)}resetRootComponentType(A){this.routerState.root.component=A,this.navigationTransitions.rootComponentType=A}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Qo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((A,N)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(A,"popstate",N)},0)})}navigateToSyncWithBrowser(A,N,j){const Z={replaceUrl:!0},ue=j?.navigationId?j:null;if(j){const Se={...j};delete Se.navigationId,delete Se.\u0275routerPageId,0!==Object.keys(Se).length&&(Z.state=Se)}const Oe=this.parseUrl(A);this.scheduleNavigation(Oe,N,ue,Z)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(A){this.config=A.map(b),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(A,N={}){const{relativeTo:j,queryParams:Z,fragment:ue,queryParamsHandling:Oe,preserveFragment:Se}=N,Rt=Se?this.currentUrlTree.fragment:ue;let _n,En=null;switch(Oe){case"merge":En={...this.currentUrlTree.queryParams,...Z};break;case"preserve":En=this.currentUrlTree.queryParams;break;default:En=Z||null}null!==En&&(En=this.removeEmptyProps(En));try{_n=ut(j?j.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof A[0]||"/"!==A[0][0])&&(A=[]),_n=this.currentUrlTree.root}return Wt(_n,A,En,Rt??null)}navigateByUrl(A,N={skipLocationChange:!1}){const j=Je(A)?A:this.parseUrl(A),Z=this.urlHandlingStrategy.merge(j,this.rawUrlTree);return this.scheduleNavigation(Z,Qo,null,N)}navigate(A,N={skipLocationChange:!1}){return function Xu(w){for(let O=0;O<w.length;O++)if(null==w[O])throw new B.wOt(4008,!1)}(A),this.navigateByUrl(this.createUrlTree(A,N),N)}serializeUrl(A){return this.urlSerializer.serialize(A)}parseUrl(A){try{return this.urlSerializer.parse(A)}catch{return this.urlSerializer.parse("/")}}isActive(A,N){let j;if(j=!0===N?{...oi}:!1===N?{...Yu}:N,Je(A))return zr(this.currentUrlTree,A,j);const Z=this.parseUrl(A);return zr(this.currentUrlTree,Z,j)}removeEmptyProps(A){return Object.entries(A).reduce((N,[j,Z])=>(null!=Z&&(N[j]=Z),N),{})}scheduleNavigation(A,N,j,Z,ue){if(this.disposed)return Promise.resolve(!1);let Oe,Se,Rt;ue?(Oe=ue.resolve,Se=ue.reject,Rt=ue.promise):Rt=new Promise((_n,jr)=>{Oe=_n,Se=jr});const En=this.pendingTasks.add();return gf(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(En))}),this.navigationTransitions.handleNavigationRequest({source:N,restoredState:j,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:A,extras:Z,resolve:Oe,reject:Se,promise:Rt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Rt.catch(_n=>Promise.reject(_n))}static#e=this.\u0275fac=function(N){return new(N||w)};static#t=this.\u0275prov=B.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})(),Ml=(()=>{class w{constructor(A,N,j,Z,ue,Oe){this.router=A,this.route=N,this.tabIndexAttribute=j,this.renderer=Z,this.el=ue,this.locationStrategy=Oe,this.href=null,this.commands=null,this.onChanges=new Nn.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Se=ue.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Se||"area"===Se,this.isAnchorElement?this.subscription=A.events.subscribe(Rt=>{Rt instanceof hi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(A){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",A)}ngOnChanges(A){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(A){null!=A?(this.commands=Array.isArray(A)?A:[A],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(A,N,j,Z,ue){const Oe=this.urlTree;return!!(null===Oe||this.isAnchorElement&&(0!==A||N||j||Z||ue||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(Oe,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const A=this.urlTree;this.href=null!==A&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(A)):null;const N=null===this.href?null:(0,B.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",N)}applyAttributeValue(A,N){const j=this.renderer,Z=this.el.nativeElement;null!==N?j.setAttribute(Z,A,N):j.removeAttribute(Z,A)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(N){return new(N||w)(B.rXU(bo),B.rXU(fs),B.kS0("tabindex"),B.rXU(B.sFG),B.rXU(B.aKT),B.rXU(Kn.hb))};static#t=this.\u0275dir=B.FsC({type:w,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(N,j){1&N&&B.bIt("click",function(ue){return j.onClick(ue.button,ue.ctrlKey,ue.shiftKey,ue.altKey,ue.metaKey)}),2&N&&B.BMQ("target",j.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",B.L39],skipLocationChange:[2,"skipLocationChange","skipLocationChange",B.L39],replaceUrl:[2,"replaceUrl","replaceUrl",B.L39],routerLink:"routerLink"},standalone:!0,features:[B.GFd,B.OA$]})}return w})(),fo=(()=>{class w{get isActive(){return this._isActive}constructor(A,N,j,Z,ue){this.router=A,this.element=N,this.renderer=j,this.cdr=Z,this.link=ue,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new B.bkB,this.routerEventsSubscription=A.events.subscribe(Oe=>{Oe instanceof hi&&this.update()})}ngAfterContentInit(){(0,je.of)(this.links.changes,(0,je.of)(null)).pipe((0,lr.U)()).subscribe(A=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const A=[...this.links.toArray(),this.link].filter(N=>!!N).map(N=>N.onChanges);this.linkInputChangesSubscription=(0,Fe.H)(A).pipe((0,lr.U)()).subscribe(N=>{this._isActive!==this.isLinkActive(this.router)(N)&&this.update()})}set routerLinkActive(A){const N=Array.isArray(A)?A:A.split(" ");this.classes=N.filter(j=>!!j)}ngOnChanges(A){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const A=this.hasActiveLinks();this.classes.forEach(N=>{A?this.renderer.addClass(this.element.nativeElement,N):this.renderer.removeClass(this.element.nativeElement,N)}),A&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==A&&(this._isActive=A,this.cdr.markForCheck(),this.isActiveChange.emit(A))})}isLinkActive(A){const N=function Ol(w){return!!w.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return j=>{const Z=j.urlTree;return!!Z&&A.isActive(Z,N)}}hasActiveLinks(){const A=this.isLinkActive(this.router);return this.link&&A(this.link)||this.links.some(A)}static#e=this.\u0275fac=function(N){return new(N||w)(B.rXU(bo),B.rXU(B.aKT),B.rXU(B.sFG),B.rXU(B.gRc),B.rXU(Ml,8))};static#t=this.\u0275dir=B.FsC({type:w,selectors:[["","routerLinkActive",""]],contentQueries:function(N,j,Z){if(1&N&&B.wni(Z,Ml,5),2&N){let ue;B.mGM(ue=B.lsd())&&(j.links=ue)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[B.OA$]})}return w})();class Rl{}let Jd=(()=>{class w{constructor(A,N,j,Z,ue){this.router=A,this.injector=j,this.preloadingStrategy=Z,this.loader=ue}setUpPreloading(){this.subscription=this.router.events.pipe((0,We.p)(A=>A instanceof hi),(0,lt.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(A,N){const j=[];for(const Z of N){Z.providers&&!Z._injector&&(Z._injector=(0,B.Ol2)(Z.providers,A,`Route: ${Z.path}`));const ue=Z._injector??A,Oe=Z._loadedInjector??ue;(Z.loadChildren&&!Z._loadedRoutes&&void 0===Z.canLoad||Z.loadComponent&&!Z._loadedComponent)&&j.push(this.preloadConfig(ue,Z)),(Z.children||Z._loadedRoutes)&&j.push(this.processRoutes(Oe,Z.children??Z._loadedRoutes))}return(0,Fe.H)(j).pipe((0,lr.U)())}preloadConfig(A,N){return this.preloadingStrategy.preload(N,()=>{let j;j=N.loadChildren&&void 0===N.canLoad?this.loader.loadChildren(A,N):(0,je.of)(null);const Z=j.pipe((0,Qe.Z)(ue=>null===ue?(0,je.of)(void 0):(N._loadedRoutes=ue.routes,N._loadedInjector=ue.injector,this.processRoutes(ue.injector??A,ue.routes))));if(N.loadComponent&&!N._loadedComponent){const ue=this.loader.loadComponent(N);return(0,Fe.H)([Z,ue]).pipe((0,lr.U)())}return Z})}static#e=this.\u0275fac=function(N){return new(N||w)(B.KVO(bo),B.KVO(B.Ql9),B.KVO(B.uvJ),B.KVO(Rl),B.KVO(on))};static#t=this.\u0275prov=B.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const kc=new B.nKC("");let lc=(()=>{class w{constructor(A,N,j,Z,ue={}){this.urlSerializer=A,this.transitions=N,this.viewportScroller=j,this.zone=Z,this.options=ue,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,B.WQX)(B.uvJ),ue.scrollPositionRestoration||="disabled",ue.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(A=>{A instanceof co?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=A.navigationTrigger,this.restoredId=A.restoredState?A.restoredState.navigationId:0):A instanceof hi?(this.lastId=A.id,this.scheduleScrollEvent(A,this.urlSerializer.parse(A.urlAfterRedirects).fragment)):A instanceof eo&&A.code===Xr.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(A,this.urlSerializer.parse(A.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(A=>{A instanceof ta&&(A.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(A.position):A.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(A.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(A,N){var j=this;this.zone.runOutsideAngular((0,T.A)(function*(){yield new Promise(Z=>{setTimeout(()=>{Z()}),(0,B.mal)(()=>{Z()},{injector:j.environmentInjector})}),j.zone.run(()=>{j.transitions.events.next(new ta(A,"popstate"===j.lastSource?j.store[j.restoredId]:null,N))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(N){B.QTQ()};static#t=this.\u0275prov=B.jDH({token:w,factory:w.\u0275fac})}return w})();function _s(w,O){return{\u0275kind:w,\u0275providers:O}}function un(){const w=(0,B.WQX)(B.zZn);return O=>{const A=w.get(B.o8S);if(O!==A.components[0])return;const N=w.get(bo),j=w.get(zs);1===w.get(cc)&&N.initialNavigation(),w.get(Ra,null,B.$GK.Optional)?.setUpPreloading(),w.get(kc,null,B.$GK.Optional)?.init(),N.resetRootComponentType(A.componentTypes[0]),j.closed||(j.next(),j.complete(),j.unsubscribe())}}const zs=new B.nKC("",{factory:()=>new Nn.B}),cc=new B.nKC("",{providedIn:"root",factory:()=>1}),Ra=new B.nKC("");function Na(w){return _s(0,[{provide:Ra,useExisting:Jd},{provide:Rl,useExisting:w}])}function ka(w){return _s(9,[{provide:Zr,useValue:Hs},{provide:Lo,useValue:{skipNextTransition:!!w?.skipInitialTransition,...w}}])}const Vc=new B.nKC("ROUTER_FORROOT_GUARD"),mf=[Kn.aZ,{provide:et,useClass:Be},bo,Yo,{provide:fs,useFactory:function Vo(w){return w.routerState.root},deps:[bo]},on,[]];let du=(()=>{class w{constructor(A){}static forRoot(A,N){return{ngModule:w,providers:[mf,[],{provide:an,multi:!0,useValue:A},{provide:Vc,useFactory:G_,deps:[[bo,new B.Xx1,new B.kdw]]},{provide:wt,useValue:N||{}},N?.useHash?{provide:Kn.hb,useClass:Kn.fw}:{provide:Kn.hb,useClass:Kn.Sm},{provide:kc,useFactory:()=>{const w=(0,B.WQX)(Kn.Xr),O=(0,B.WQX)(B.SKi),A=(0,B.WQX)(wt),N=(0,B.WQX)(Rr),j=(0,B.WQX)(et);return A.scrollOffset&&w.setOffset(A.scrollOffset),new lc(j,N,w,O,A)}},N?.preloadingStrategy?Na(N.preloadingStrategy).\u0275providers:[],N?.initialNavigation?uc(N):[],N?.bindToComponentInputs?_s(8,[Ni,{provide:Zo,useExisting:Ni}]).\u0275providers:[],N?.enableViewTransitions?ka().\u0275providers:[],[{provide:yf,useFactory:un},{provide:B.iLQ,multi:!0,useExisting:yf}]]}}static forChild(A){return{ngModule:w,providers:[{provide:an,multi:!0,useValue:A}]}}static#e=this.\u0275fac=function(N){return new(N||w)(B.KVO(Vc,8))};static#t=this.\u0275mod=B.$C({type:w});static#n=this.\u0275inj=B.G2t({})}return w})();function G_(w){return"guarded"}function uc(w){return["disabled"===w.initialNavigation?_s(3,[{provide:B.hnV,multi:!0,useFactory:()=>{const O=(0,B.WQX)(bo);return()=>{O.setUpLocationChangeListener()}}},{provide:cc,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?_s(2,[{provide:cc,useValue:0},{provide:B.hnV,multi:!0,deps:[B.zZn],useFactory:O=>{const A=O.get(Kn.hj,Promise.resolve());return()=>A.then(()=>new Promise(N=>{const j=O.get(bo),Z=O.get(zs);gf(j,()=>{N(!0)}),O.get(Rr).afterPreactivation=()=>(N(!0),Z.closed?(0,je.of)(void 0):Z),j.initialNavigation()}))}}]).\u0275providers:[]]}const yf=new B.nKC("")},3345:(fn,ot,J)=>{J.d(ot,{A:()=>zt});var T=J(1076),B=J(1362),m=J(7852),ce=J(8041);class De{constructor(Zt,sn){this._delegate=Zt,this.firebase=sn,(0,m._addComponent)(Zt,new B.uA("app-compat",()=>this,"PUBLIC")),this.container=Zt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Zt){this._delegate.automaticDataCollectionEnabled=Zt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Zt=>{this._delegate.checkDestroyed(),Zt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,m.deleteApp)(this._delegate)))}_getService(Zt,sn=m._DEFAULT_ENTRY_NAME){var tr;this._delegate.checkDestroyed();const pr=this._delegate.container.getProvider(Zt);return!pr.isInitialized()&&"EXPLICIT"===(null===(tr=pr.getComponent())||void 0===tr?void 0:tr.instantiationMode)&&pr.initialize(),pr.getImmediate({identifier:sn})}_removeServiceInstance(Zt,sn=m._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Zt).clearInstance(sn)}_addComponent(Zt){(0,m._addComponent)(this._delegate,Zt)}_addOrOverwriteComponent(Zt){(0,m._addOrOverwriteComponent)(this._delegate,Zt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const je=new T.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ie=function ht(){const nn=function Et(nn){const Zt={},sn={__esModule:!0,initializeApp:function Ct(At,Gt={}){const it=m.initializeApp(At,Gt);if((0,T.gR)(Zt,it.name))return Zt[it.name];const _e=new nn(it,sn);return Zt[it.name]=_e,_e},app:pr,registerVersion:m.registerVersion,setLogLevel:m.setLogLevel,onLog:m.onLog,apps:null,SDK_VERSION:m.SDK_VERSION,INTERNAL:{registerComponent:function _t(At){const Gt=At.name,it=Gt.replace("-compat","");if(m._registerComponent(At)&&"PUBLIC"===At.type){const _e=(Ut=pr())=>{if("function"!=typeof Ut[it])throw je.create("invalid-app-argument",{appName:Gt});return Ut[it]()};void 0!==At.serviceProps&&(0,T.zw)(_e,At.serviceProps),sn[it]=_e,nn.prototype[it]=function(...Ut){return this._getService.bind(this,Gt).apply(this,At.multipleInstances?Ut:[])}}return"PUBLIC"===At.type?sn[it]:null},removeApp:function tr(At){delete Zt[At]},useAsService:function Yt(At,Gt){return"serverAuth"===Gt?null:Gt},modularAPIs:m}};function pr(At){if(!(0,T.gR)(Zt,At=At||m._DEFAULT_ENTRY_NAME))throw je.create("no-app",{appName:At});return Zt[At]}return sn.default=sn,Object.defineProperty(sn,"apps",{get:function It(){return Object.keys(Zt).map(At=>Zt[At])}}),pr.App=nn,sn}(De);return nn.INTERNAL=Object.assign(Object.assign({},nn.INTERNAL),{createFirebaseNamespace:ht,extendNamespace:function Zt(sn){(0,T.zw)(nn,sn)},createSubscribe:T.tD,ErrorFactory:T.FA,deepExtend:T.zw}),nn}(),Ee=new ce.Vy("@firebase/app-compat");if((0,T.Bd)()&&void 0!==window.firebase){Ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nn=window.firebase.SDK_VERSION;nn&&nn.indexOf("LITE")>=0&&Ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const zt=Ie;!function bt(nn){(0,m.registerVersion)("@firebase/app-compat","0.2.38",nn)}()},7852:(fn,ot,J)=>{J.r(ot),J.d(ot,{FirebaseError:()=>ce.g,SDK_VERSION:()=>st,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>Dr,_addOrOverwriteComponent:()=>zr,_apps:()=>xn,_clearComponents:()=>Nt,_components:()=>Nr,_getProvider:()=>yt,_isFirebaseApp:()=>mr,_isFirebaseServerApp:()=>Jn,_registerComponent:()=>Vr,_removeServiceInstance:()=>Pn,_serverApps:()=>ir,deleteApp:()=>Me,getApp:()=>Be,getApps:()=>ge,initializeApp:()=>$n,initializeServerApp:()=>et,onLog:()=>ae,registerVersion:()=>se,setLogLevel:()=>ve});var T=J(467),B=J(1362),m=J(8041),ce=J(1076);const De=(Je,be)=>be.some(ut=>Je instanceof ut);let Fe,je;const Ie=new WeakMap,Ee=new WeakMap,Xe=new WeakMap,Ot=new WeakMap,bt=new WeakMap;let Zt={get(Je,be,ut){if(Je instanceof IDBTransaction){if("done"===be)return Ee.get(Je);if("objectStoreNames"===be)return Je.objectStoreNames||Xe.get(Je);if("store"===be)return ut.objectStoreNames[1]?void 0:ut.objectStore(ut.objectStoreNames[0])}return Ct(Je[be])},set:(Je,be,ut)=>(Je[be]=ut,!0),has:(Je,be)=>Je instanceof IDBTransaction&&("done"===be||"store"===be)||be in Je};function pr(Je){return"function"==typeof Je?function tr(Je){return Je!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ht(){return je||(je=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Je)?function(...be){return Je.apply(It(this),be),Ct(Ie.get(this))}:function(...be){return Ct(Je.apply(It(this),be))}:function(be,...ut){const Wt=Je.call(It(this),be,...ut);return Xe.set(Wt,be.sort?be.sort():[be]),Ct(Wt)}}(Je):(Je instanceof IDBTransaction&&function nn(Je){if(Ee.has(Je))return;const be=new Promise((ut,Wt)=>{const ln=()=>{Je.removeEventListener("complete",Cn),Je.removeEventListener("error",Fn),Je.removeEventListener("abort",Fn)},Cn=()=>{ut(),ln()},Fn=()=>{Wt(Je.error||new DOMException("AbortError","AbortError")),ln()};Je.addEventListener("complete",Cn),Je.addEventListener("error",Fn),Je.addEventListener("abort",Fn)});Ee.set(Je,be)}(Je),De(Je,function Et(){return Fe||(Fe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Je,Zt):Je)}function Ct(Je){if(Je instanceof IDBRequest)return function zt(Je){const be=new Promise((ut,Wt)=>{const ln=()=>{Je.removeEventListener("success",Cn),Je.removeEventListener("error",Fn)},Cn=()=>{ut(Ct(Je.result)),ln()},Fn=()=>{Wt(Je.error),ln()};Je.addEventListener("success",Cn),Je.addEventListener("error",Fn)});return be.then(ut=>{ut instanceof IDBCursor&&Ie.set(ut,Je)}).catch(()=>{}),bt.set(be,Je),be}(Je);if(Ot.has(Je))return Ot.get(Je);const be=pr(Je);return be!==Je&&(Ot.set(Je,be),bt.set(be,Je)),be}const It=Je=>bt.get(Je),At=["get","getKey","getAll","getAllKeys","count"],Gt=["put","add","delete","clear"],it=new Map;function _e(Je,be){if(!(Je instanceof IDBDatabase)||be in Je||"string"!=typeof be)return;if(it.get(be))return it.get(be);const ut=be.replace(/FromIndex$/,""),Wt=be!==ut,ln=Gt.includes(ut);if(!(ut in(Wt?IDBIndex:IDBObjectStore).prototype)||!ln&&!At.includes(ut))return;const Cn=function(){var Fn=(0,T.A)(function*(Cr,...nr){const di=this.transaction(Cr,ln?"readwrite":"readonly");let ke=di.store;return Wt&&(ke=ke.index(nr.shift())),(yield Promise.all([ke[ut](...nr),ln&&di.done]))[0]});return function(nr){return Fn.apply(this,arguments)}}();return it.set(be,Cn),Cn}!function sn(Je){Zt=Je(Zt)}(Je=>({...Je,get:(be,ut,Wt)=>_e(be,ut)||Je.get(be,ut,Wt),has:(be,ut)=>!!_e(be,ut)||Je.has(be,ut)}));class Ut{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(ut=>{if(function Nn(Je){const be=Je.getComponent();return"VERSION"===be?.type}(ut)){const Wt=ut.getImmediate();return`${Wt.library}/${Wt.version}`}return null}).filter(ut=>ut).join(" ")}}const Kn="@firebase/app",zn="0.10.8",hr=new m.Vy("@firebase/app"),vi="@firebase/app-compat",zo="@firebase/analytics-compat",We="@firebase/analytics",Qe="@firebase/app-check-compat",at="@firebase/app-check",lt="@firebase/auth",Pt="@firebase/auth-compat",Ze="@firebase/database",we="@firebase/database-compat",Mn="@firebase/functions",ar="@firebase/functions-compat",en="@firebase/installations",te="@firebase/installations-compat",fr="@firebase/messaging",Qr="@firebase/messaging-compat",jn="@firebase/performance",Hr="@firebase/performance-compat",lr="@firebase/remote-config",Wn="@firebase/remote-config-compat",mn="@firebase/storage",qi="@firebase/storage-compat",yo="@firebase/firestore",gr="@firebase/vertexai-preview",Yr="@firebase/firestore-compat",lo="firebase",Bt="[DEFAULT]",Xn={[Kn]:"fire-core",[vi]:"fire-core-compat",[We]:"fire-analytics",[zo]:"fire-analytics-compat",[at]:"fire-app-check",[Qe]:"fire-app-check-compat",[lt]:"fire-auth",[Pt]:"fire-auth-compat",[Ze]:"fire-rtdb",[we]:"fire-rtdb-compat",[Mn]:"fire-fn",[ar]:"fire-fn-compat",[en]:"fire-iid",[te]:"fire-iid-compat",[fr]:"fire-fcm",[Qr]:"fire-fcm-compat",[jn]:"fire-perf",[Hr]:"fire-perf-compat",[lr]:"fire-rc",[Wn]:"fire-rc-compat",[mn]:"fire-gcs",[qi]:"fire-gcs-compat",[yo]:"fire-fst",[Yr]:"fire-fst-compat",[gr]:"fire-vertex","fire-js":"fire-js",[lo]:"fire-js-all"},xn=new Map,ir=new Map,Nr=new Map;function Dr(Je,be){try{Je.container.addComponent(be)}catch(ut){hr.debug(`Component ${be.name} failed to register with FirebaseApp ${Je.name}`,ut)}}function zr(Je,be){Je.container.addOrOverwriteComponent(be)}function Vr(Je){const be=Je.name;if(Nr.has(be))return hr.debug(`There were multiple attempts to register component ${be}.`),!1;Nr.set(be,Je);for(const ut of xn.values())Dr(ut,Je);for(const ut of ir.values())Dr(ut,Je);return!0}function yt(Je,be){const ut=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return ut&&ut.triggerHeartbeat(),Je.container.getProvider(be)}function Pn(Je,be,ut=Bt){yt(Je,be).clearInstance(ut)}function mr(Je){return void 0!==Je.options}function Jn(Je){return void 0!==Je.settings}function Nt(){Nr.clear()}const Ln=new ce.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class xt{constructor(be,ut,Wt){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},ut),this._name=ut.name,this._automaticDataCollectionEnabled=ut.automaticDataCollectionEnabled,this._container=Wt,this.container.addComponent(new B.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}class Ge extends xt{constructor(be,ut,Wt,ln){const Cn=void 0!==ut.automaticDataCollectionEnabled&&ut.automaticDataCollectionEnabled,Fn={name:Wt,automaticDataCollectionEnabled:Cn};super(void 0!==be.apiKey?be:be.options,Fn,ln),this._serverConfig=Object.assign({automaticDataCollectionEnabled:Cn},ut),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,ut.releaseOnDeref=void 0,se(Kn,zn,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(be){this.isDeleted||(this._refCount++,void 0!==be&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(be,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Me(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ln.create("server-app-deleted")}}const st="10.12.5";function $n(Je,be={}){let ut=Je;"object"!=typeof be&&(be={name:be});const Wt=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},be),ln=Wt.name;if("string"!=typeof ln||!ln)throw Ln.create("bad-app-name",{appName:String(ln)});if(ut||(ut=(0,ce.T9)()),!ut)throw Ln.create("no-options");const Cn=xn.get(ln);if(Cn){if((0,ce.bD)(ut,Cn.options)&&(0,ce.bD)(Wt,Cn.config))return Cn;throw Ln.create("duplicate-app",{appName:ln})}const Fn=new B.h1(ln);for(const nr of Nr.values())Fn.addComponent(nr);const Cr=new xt(ut,Wt,Fn);return xn.set(ln,Cr),Cr}function et(Je,be){if((0,ce.Bd)()&&!(0,ce.p7)())throw Ln.create("invalid-server-app-environment");let ut;void 0===be.automaticDataCollectionEnabled&&(be.automaticDataCollectionEnabled=!1),ut=mr(Je)?Je.options:Je;const Wt=Object.assign(Object.assign({},be),ut);if(void 0!==Wt.releaseOnDeref&&delete Wt.releaseOnDeref,void 0!==be.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Ln.create("finalization-registry-not-supported",{});const Cn=""+(di=JSON.stringify(Wt),[...di].reduce((ke,Ls)=>Math.imul(31,ke)+Ls.charCodeAt(0)|0,0)),Fn=ir.get(Cn);var di;if(Fn)return Fn.incRefCount(be.releaseOnDeref),Fn;const Cr=new B.h1(Cn);for(const di of Nr.values())Cr.addComponent(di);const nr=new Ge(ut,be,Cn,Cr);return ir.set(Cn,nr),nr}function Be(Je=Bt){const be=xn.get(Je);if(!be&&Je===Bt&&(0,ce.T9)())return $n();if(!be)throw Ln.create("no-app",{appName:Je});return be}function ge(){return Array.from(xn.values())}function Me(Je){return gt.apply(this,arguments)}function gt(){return(gt=(0,T.A)(function*(Je){let be=!1;const ut=Je.name;xn.has(ut)?(be=!0,xn.delete(ut)):ir.has(ut)&&Je.decRefCount()<=0&&(ir.delete(ut),be=!0),be&&(yield Promise.all(Je.container.getProviders().map(Wt=>Wt.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function se(Je,be,ut){var Wt;let ln=null!==(Wt=Xn[Je])&&void 0!==Wt?Wt:Je;ut&&(ln+=`-${ut}`);const Cn=ln.match(/\s|\//),Fn=be.match(/\s|\//);if(Cn||Fn){const Cr=[`Unable to register library "${ln}" with version "${be}":`];return Cn&&Cr.push(`library name "${ln}" contains illegal characters (whitespace or "/")`),Cn&&Fn&&Cr.push("and"),Fn&&Cr.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void hr.warn(Cr.join(" "))}Vr(new B.uA(`${ln}-version`,()=>({library:ln,version:be}),"VERSION"))}function ae(Je,be){if(null!==Je&&"function"!=typeof Je)throw Ln.create("invalid-log-argument");(0,m.Ey)(Je,be)}function ve(Je){(0,m.He)(Je)}const tt="firebase-heartbeat-database",Ne=1,Ft="firebase-heartbeat-store";let vt=null;function kn(){return vt||(vt=function _t(Je,be,{blocked:ut,upgrade:Wt,blocking:ln,terminated:Cn}={}){const Fn=indexedDB.open(Je,be),Cr=Ct(Fn);return Wt&&Fn.addEventListener("upgradeneeded",nr=>{Wt(Ct(Fn.result),nr.oldVersion,nr.newVersion,Ct(Fn.transaction),nr)}),ut&&Fn.addEventListener("blocked",nr=>ut(nr.oldVersion,nr.newVersion,nr)),Cr.then(nr=>{Cn&&nr.addEventListener("close",()=>Cn()),ln&&nr.addEventListener("versionchange",di=>ln(di.oldVersion,di.newVersion,di))}).catch(()=>{}),Cr}(tt,Ne,{upgrade:(Je,be)=>{if(0===be)try{Je.createObjectStore(Ft)}catch(ut){console.warn(ut)}}}).catch(Je=>{throw Ln.create("idb-open",{originalErrorMessage:Je.message})})),vt}function On(){return(On=(0,T.A)(function*(Je){try{const ut=(yield kn()).transaction(Ft),Wt=yield ut.objectStore(Ft).get(Tn(Je));return yield ut.done,Wt}catch(be){if(be instanceof ce.g)hr.warn(be.message);else{const ut=Ln.create("idb-get",{originalErrorMessage:be?.message});hr.warn(ut.message)}}})).apply(this,arguments)}function $t(Je,be){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,T.A)(function*(Je,be){try{const Wt=(yield kn()).transaction(Ft,"readwrite");yield Wt.objectStore(Ft).put(be,Tn(Je)),yield Wt.done}catch(ut){if(ut instanceof ce.g)hr.warn(ut.message);else{const Wt=Ln.create("idb-set",{originalErrorMessage:ut?.message});hr.warn(Wt.message)}}})).apply(this,arguments)}function Tn(Je){return`${Je.name}!${Je.options.appId}`}class Ht{constructor(be){this.container=be,this._heartbeatsCache=null;const ut=this.container.getProvider("app").getImmediate();this._storage=new Wo(ut),this._heartbeatsCachePromise=this._storage.read().then(Wt=>(this._heartbeatsCache=Wt,Wt))}triggerHeartbeat(){var be=this;return(0,T.A)(function*(){var ut,Wt;const Cn=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Fn=Ii();if((null!=(null===(ut=be._heartbeatsCache)||void 0===ut?void 0:ut.heartbeats)||(be._heartbeatsCache=yield be._heartbeatsCachePromise,null!=(null===(Wt=be._heartbeatsCache)||void 0===Wt?void 0:Wt.heartbeats)))&&be._heartbeatsCache.lastSentHeartbeatDate!==Fn&&!be._heartbeatsCache.heartbeats.some(Cr=>Cr.date===Fn))return be._heartbeatsCache.heartbeats.push({date:Fn,agent:Cn}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(Cr=>{const nr=new Date(Cr.date).valueOf();return Date.now()-nr<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,T.A)(function*(){var ut;if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null==(null===(ut=be._heartbeatsCache)||void 0===ut?void 0:ut.heartbeats)||0===be._heartbeatsCache.heartbeats.length)return"";const Wt=Ii(),{heartbeatsToSend:ln,unsentEntries:Cn}=function Eo(Je,be=1024){const ut=[];let Wt=Je.slice();for(const ln of Je){const Cn=ut.find(Fn=>Fn.agent===ln.agent);if(Cn){if(Cn.dates.push(ln.date),Ea(ut)>be){Cn.dates.pop();break}}else if(ut.push({agent:ln.agent,dates:[ln.date]}),Ea(ut)>be){ut.pop();break}Wt=Wt.slice(1)}return{heartbeatsToSend:ut,unsentEntries:Wt}}(be._heartbeatsCache.heartbeats),Fn=(0,ce.Uj)(JSON.stringify({version:2,heartbeats:ln}));return be._heartbeatsCache.lastSentHeartbeatDate=Wt,Cn.length>0?(be._heartbeatsCache.heartbeats=Cn,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),Fn})()}}function Ii(){return(new Date).toISOString().substring(0,10)}class Wo{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,T.A)(function*(){return!!(0,ce.zW)()&&(0,ce.eX)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,T.A)(function*(){if(yield be._canUseIndexedDBPromise){const Wt=yield function Ci(Je){return On.apply(this,arguments)}(be.app);return Wt?.heartbeats?Wt:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(be){var ut=this;return(0,T.A)(function*(){var Wt;if(yield ut._canUseIndexedDBPromise){const Cn=yield ut.read();return $t(ut.app,{lastSentHeartbeatDate:null!==(Wt=be.lastSentHeartbeatDate)&&void 0!==Wt?Wt:Cn.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var ut=this;return(0,T.A)(function*(){var Wt;if(yield ut._canUseIndexedDBPromise){const Cn=yield ut.read();return $t(ut.app,{lastSentHeartbeatDate:null!==(Wt=be.lastSentHeartbeatDate)&&void 0!==Wt?Wt:Cn.lastSentHeartbeatDate,heartbeats:[...Cn.heartbeats,...be.heartbeats]})}})()}}function Ea(Je){return(0,ce.Uj)(JSON.stringify({version:2,heartbeats:Je})).length}!function Oi(Je){Vr(new B.uA("platform-logger",be=>new Ut(be),"PRIVATE")),Vr(new B.uA("heartbeat",be=>new Ht(be),"PRIVATE")),se(Kn,zn,Je),se(Kn,zn,"esm2017"),se("fire-js","")}("")},1362:(fn,ot,J)=>{J.d(ot,{Kq:()=>De,h1:()=>Et,uA:()=>m});var T=J(467),B=J(1076);class m{constructor(Ie,Ee,Xe){this.name=Ie,this.instanceFactory=Ee,this.type=Xe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ie){return this.instantiationMode=Ie,this}setMultipleInstances(Ie){return this.multipleInstances=Ie,this}setServiceProps(Ie){return this.serviceProps=Ie,this}setInstanceCreatedCallback(Ie){return this.onInstanceCreated=Ie,this}}const ce="[DEFAULT]";class De{constructor(Ie,Ee){this.name=Ie,this.container=Ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ie){const Ee=this.normalizeInstanceIdentifier(Ie);if(!this.instancesDeferred.has(Ee)){const Xe=new B.cY;if(this.instancesDeferred.set(Ee,Xe),this.isInitialized(Ee)||this.shouldAutoInitialize())try{const Ot=this.getOrInitializeService({instanceIdentifier:Ee});Ot&&Xe.resolve(Ot)}catch{}}return this.instancesDeferred.get(Ee).promise}getImmediate(Ie){var Ee;const Xe=this.normalizeInstanceIdentifier(Ie?.identifier),Ot=null!==(Ee=Ie?.optional)&&void 0!==Ee&&Ee;if(!this.isInitialized(Xe)&&!this.shouldAutoInitialize()){if(Ot)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Xe})}catch(bt){if(Ot)return null;throw bt}}getComponent(){return this.component}setComponent(Ie){if(Ie.name!==this.name)throw Error(`Mismatching Component ${Ie.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ie,this.shouldAutoInitialize()){if(function je(ht){return"EAGER"===ht.instantiationMode}(Ie))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[Ee,Xe]of this.instancesDeferred.entries()){const Ot=this.normalizeInstanceIdentifier(Ee);try{const bt=this.getOrInitializeService({instanceIdentifier:Ot});Xe.resolve(bt)}catch{}}}}clearInstance(Ie=ce){this.instancesDeferred.delete(Ie),this.instancesOptions.delete(Ie),this.instances.delete(Ie)}delete(){var Ie=this;return(0,T.A)(function*(){const Ee=Array.from(Ie.instances.values());yield Promise.all([...Ee.filter(Xe=>"INTERNAL"in Xe).map(Xe=>Xe.INTERNAL.delete()),...Ee.filter(Xe=>"_delete"in Xe).map(Xe=>Xe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ie=ce){return this.instances.has(Ie)}getOptions(Ie=ce){return this.instancesOptions.get(Ie)||{}}initialize(Ie={}){const{options:Ee={}}=Ie,Xe=this.normalizeInstanceIdentifier(Ie.instanceIdentifier);if(this.isInitialized(Xe))throw Error(`${this.name}(${Xe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ot=this.getOrInitializeService({instanceIdentifier:Xe,options:Ee});for(const[bt,zt]of this.instancesDeferred.entries())Xe===this.normalizeInstanceIdentifier(bt)&&zt.resolve(Ot);return Ot}onInit(Ie,Ee){var Xe;const Ot=this.normalizeInstanceIdentifier(Ee),bt=null!==(Xe=this.onInitCallbacks.get(Ot))&&void 0!==Xe?Xe:new Set;bt.add(Ie),this.onInitCallbacks.set(Ot,bt);const zt=this.instances.get(Ot);return zt&&Ie(zt,Ot),()=>{bt.delete(Ie)}}invokeOnInitCallbacks(Ie,Ee){const Xe=this.onInitCallbacks.get(Ee);if(Xe)for(const Ot of Xe)try{Ot(Ie,Ee)}catch{}}getOrInitializeService({instanceIdentifier:Ie,options:Ee={}}){let Xe=this.instances.get(Ie);if(!Xe&&this.component&&(Xe=this.component.instanceFactory(this.container,{instanceIdentifier:(ht=Ie,ht===ce?void 0:ht),options:Ee}),this.instances.set(Ie,Xe),this.instancesOptions.set(Ie,Ee),this.invokeOnInitCallbacks(Xe,Ie),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ie,Xe)}catch{}var ht;return Xe||null}normalizeInstanceIdentifier(Ie=ce){return this.component?this.component.multipleInstances?Ie:ce:Ie}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Et{constructor(Ie){this.name=Ie,this.providers=new Map}addComponent(Ie){const Ee=this.getProvider(Ie.name);if(Ee.isComponentSet())throw new Error(`Component ${Ie.name} has already been registered with ${this.name}`);Ee.setComponent(Ie)}addOrOverwriteComponent(Ie){this.getProvider(Ie.name).isComponentSet()&&this.providers.delete(Ie.name),this.addComponent(Ie)}getProvider(Ie){if(this.providers.has(Ie))return this.providers.get(Ie);const Ee=new De(Ie,this);return this.providers.set(Ie,Ee),Ee}getProviders(){return Array.from(this.providers.values())}}},8041:(fn,ot,J)=>{J.d(ot,{$b:()=>B,Ey:()=>ht,He:()=>Et,Vy:()=>je});const T=[];var B=function(Ie){return Ie[Ie.DEBUG=0]="DEBUG",Ie[Ie.VERBOSE=1]="VERBOSE",Ie[Ie.INFO=2]="INFO",Ie[Ie.WARN=3]="WARN",Ie[Ie.ERROR=4]="ERROR",Ie[Ie.SILENT=5]="SILENT",Ie}(B||{});const m={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},ce=B.INFO,De={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},Fe=(Ie,Ee,...Xe)=>{if(Ee<Ie.logLevel)return;const Ot=(new Date).toISOString(),bt=De[Ee];if(!bt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ee})`);console[bt](`[${Ot}]  ${Ie.name}:`,...Xe)};class je{constructor(Ee){this.name=Ee,this._logLevel=ce,this._logHandler=Fe,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(Ee){if(!(Ee in B))throw new TypeError(`Invalid value "${Ee}" assigned to \`logLevel\``);this._logLevel=Ee}setLogLevel(Ee){this._logLevel="string"==typeof Ee?m[Ee]:Ee}get logHandler(){return this._logHandler}set logHandler(Ee){if("function"!=typeof Ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ee}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ee){this._userLogHandler=Ee}debug(...Ee){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...Ee),this._logHandler(this,B.DEBUG,...Ee)}log(...Ee){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...Ee),this._logHandler(this,B.VERBOSE,...Ee)}info(...Ee){this._userLogHandler&&this._userLogHandler(this,B.INFO,...Ee),this._logHandler(this,B.INFO,...Ee)}warn(...Ee){this._userLogHandler&&this._userLogHandler(this,B.WARN,...Ee),this._logHandler(this,B.WARN,...Ee)}error(...Ee){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...Ee),this._logHandler(this,B.ERROR,...Ee)}}function Et(Ie){T.forEach(Ee=>{Ee.setLogLevel(Ie)})}function ht(Ie,Ee){for(const Xe of T){let Ot=null;Ee&&Ee.level&&(Ot=m[Ee.level]),Xe.userLogHandler=null===Ie?null:(bt,zt,...nn)=>{const Zt=nn.map(sn=>{if(null==sn)return null;if("string"==typeof sn)return sn;if("number"==typeof sn||"boolean"==typeof sn)return sn.toString();if(sn instanceof Error)return sn.message;try{return JSON.stringify(sn)}catch{return null}}).filter(sn=>sn).join(" ");zt>=(Ot??bt.logLevel)&&Ie({level:B[zt].toLowerCase(),message:Zt,args:nn,type:bt.name})}}}},9254:(fn,ot,J)=>{J.r(ot);var T=J(467),B=J(3345),m=J(7852),ce=J(1076),De=J(8041),Fe=J(1635),je=J(1362);const ht={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const zt=function Ot(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},nn=function bt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Zt=new ce.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tr=new De.Vy("@firebase/auth");function Ct(v,...f){tr.logLevel<=De.$b.ERROR&&tr.error(`Auth (${m.SDK_VERSION}): ${v}`,...f)}function It(v,...f){throw it(v,...f)}function _t(v,...f){return it(v,...f)}function Yt(v,f,p){const I=Object.assign(Object.assign({},nn()),{[f]:p});return new ce.FA("auth","Firebase",I).create(f,{appName:v.name})}function At(v){return Yt(v,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gt(v,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&It(v,"argument-error"),Yt(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function it(v,...f){if("string"!=typeof v){const p=f[0],I=[...f.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(p,...I)}return Zt.create(v,...f)}function _e(v,f,...p){if(!v)throw it(f,...p)}function Ut(v){const f="INTERNAL ASSERTION FAILED: "+v;throw Ct(f),new Error(f)}function Nn(v,f){v||Ut(f)}function Kn(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function zn(){return"http:"===hr()||"https:"===hr()}function hr(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class We{constructor(f,p){this.shortDelay=f,this.longDelay=p,Nn(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,ce.jZ)()||(0,ce.lV)()}get(){return function vi(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(zn()||(0,ce.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Qe(v,f){Nn(v.emulator,"Emulator should always be set here");const{url:p}=v.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class at{static initialize(f,p,I){this.fetchImpl=f,p&&(this.headersImpl=p),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ut("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ut("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ut("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Pt=new We(3e4,6e4);function Ze(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function we(v,f,p,I){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,T.A)(function*(v,f,p,I,L={}){return ar(v,L,(0,T.A)(function*(){let X={},ye={};I&&("GET"===f?ye=I:X={body:JSON.stringify(I)});const Le=(0,ce.Am)(Object.assign({key:v.config.apiKey},ye)).slice(1),pt=yield v._getAdditionalHeaders();return pt["Content-Type"]="application/json",v.languageCode&&(pt["X-Firebase-Locale"]=v.languageCode),at.fetch()(Qr(v,v.config.apiHost,p,Le),Object.assign({method:f,headers:pt,referrerPolicy:"no-referrer"},X))}))})).apply(this,arguments)}function ar(v,f,p){return en.apply(this,arguments)}function en(){return(en=(0,T.A)(function*(v,f,p){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},lt),f);try{const L=new Hr(v),X=yield Promise.race([p(),L.promise]);L.clearNetworkTimeout();const ye=yield X.json();if("needConfirmation"in ye)throw lr(v,"account-exists-with-different-credential",ye);if(X.ok&&!("errorMessage"in ye))return ye;{const Le=X.ok?ye.errorMessage:ye.error.message,[pt,Jt]=Le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===pt)throw lr(v,"credential-already-in-use",ye);if("EMAIL_EXISTS"===pt)throw lr(v,"email-already-in-use",ye);if("USER_DISABLED"===pt)throw lr(v,"user-disabled",ye);const dn=I[pt]||pt.toLowerCase().replace(/[_\s]+/g,"-");if(Jt)throw Yt(v,dn,Jt);It(v,dn)}}catch(L){if(L instanceof ce.g)throw L;It(v,"network-request-failed",{message:String(L)})}})).apply(this,arguments)}function te(v,f,p,I){return fr.apply(this,arguments)}function fr(){return(fr=(0,T.A)(function*(v,f,p,I,L={}){const X=yield we(v,f,p,I,L);return"mfaPendingCredential"in X&&It(v,"multi-factor-auth-required",{_serverResponse:X}),X})).apply(this,arguments)}function Qr(v,f,p,I){const L=`${f}${p}?${I}`;return v.config.emulator?Qe(v.config,L):`${v.config.apiScheme}://${L}`}function jn(v){switch(v){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Hr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,I)=>{this.timer=setTimeout(()=>I(_t(this.auth,"network-request-failed")),Pt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lr(v,f,p){const I={appName:v.name};p.email&&(I.email=p.email),p.phoneNumber&&(I.phoneNumber=p.phoneNumber);const L=_t(v,f,I);return L.customData._tokenResponse=p,L}function Wn(v){return void 0!==v&&void 0!==v.getResponse}function mn(v){return void 0!==v&&void 0!==v.enterprise}class qi{constructor(f){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=f.recaptchaEnforcementState}getProviderEnforcementState(f){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const p of this.recaptchaEnforcementState)if(p.provider&&p.provider===f)return jn(p.enforcementState);return null}isProviderEnabled(f){return"ENFORCE"===this.getProviderEnforcementState(f)||"AUDIT"===this.getProviderEnforcementState(f)}}function gr(){return(gr=(0,T.A)(function*(v){return(yield we(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Yr(v,f){return lo.apply(this,arguments)}function lo(){return(lo=(0,T.A)(function*(v,f){return we(v,"GET","/v2/recaptchaConfig",Ze(v,f))})).apply(this,arguments)}function Bt(){return(Bt=(0,T.A)(function*(v,f){return we(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function xn(){return(xn=(0,T.A)(function*(v,f){return we(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ir(v,f){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,T.A)(function*(v,f){return we(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Dr(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function yt(){return(yt=(0,T.A)(function*(v,f=!1){const p=(0,ce.Ku)(v),I=yield p.getIdToken(f),L=mr(I);_e(L&&L.exp&&L.auth_time&&L.iat,p.auth,"internal-error");const X="object"==typeof L.firebase?L.firebase:void 0,ye=X?.sign_in_provider;return{claims:L,token:I,authTime:Dr(Pn(L.auth_time)),issuedAtTime:Dr(Pn(L.iat)),expirationTime:Dr(Pn(L.exp)),signInProvider:ye||null,signInSecondFactor:X?.sign_in_second_factor||null}})).apply(this,arguments)}function Pn(v){return 1e3*Number(v)}function mr(v){const[f,p,I]=v.split(".");if(void 0===f||void 0===p||void 0===I)return Ct("JWT malformed, contained fewer than 3 sections"),null;try{const L=(0,ce.u)(p);return L?JSON.parse(L):(Ct("Failed to decode base64 JWT payload"),null)}catch(L){return Ct("Caught error parsing JWT payload as JSON",L?.toString()),null}}function Jn(v){const f=mr(v);return _e(f,"internal-error"),_e(typeof f.exp<"u","internal-error"),_e(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}function Nt(v,f){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,T.A)(function*(v,f,p=!1){if(p)return f;try{return yield f}catch(I){throw I instanceof ce.g&&function Ln({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}class xt{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const L=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,L)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const I=this.getInterval(f);this.timerId=setTimeout((0,T.A)(function*(){yield p.iteration()}),I)}iteration(){var f=this;return(0,T.A)(function*(){try{yield f.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&f.schedule(!0))}f.schedule()})()}}class Ge{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dr(this.lastLoginAt),this.creationTime=Dr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function st(v){return $n.apply(this,arguments)}function $n(){return($n=(0,T.A)(function*(v){var f;const p=v.auth,I=yield v.getIdToken(),L=yield Nt(v,ir(p,{idToken:I}));_e(L?.users.length,p,"internal-error");const X=L.users[0];v._notifyReloadListener(X);const ye=null!==(f=X.providerUserInfo)&&void 0!==f&&f.length?Me(X.providerUserInfo):[],Le=function ge(v,f){return[...v.filter(I=>!f.some(L=>L.providerId===I.providerId)),...f]}(v.providerData,ye),dn=!!v.isAnonymous&&!(v.email&&X.passwordHash||Le?.length),pn={uid:X.localId,displayName:X.displayName||null,photoURL:X.photoUrl||null,email:X.email||null,emailVerified:X.emailVerified||!1,phoneNumber:X.phoneNumber||null,tenantId:X.tenantId||null,providerData:Le,metadata:new Ge(X.createdAt,X.lastLoginAt),isAnonymous:dn};Object.assign(v,pn)})).apply(this,arguments)}function Be(){return(Be=(0,T.A)(function*(v){const f=(0,ce.Ku)(v);yield st(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Me(v){return v.map(f=>{var{providerId:p}=f,I=(0,Fe.Tt)(f,["providerId"]);return{providerId:p,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function se(){return(se=(0,T.A)(function*(v,f){const p=yield ar(v,{},(0,T.A)(function*(){const I=(0,ce.Am)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:L,apiKey:X}=v.config,ye=Qr(v,L,"/v1/token",`key=${X}`),Le=yield v._getAdditionalHeaders();return Le["Content-Type"]="application/x-www-form-urlencoded",at.fetch()(ye,{method:"POST",headers:Le,body:I})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}function ve(){return(ve=(0,T.A)(function*(v,f){return we(v,"POST","/v2/accounts:revokeToken",Ze(v,f))})).apply(this,arguments)}class tt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){_e(f.idToken,"internal-error"),_e(typeof f.idToken<"u","internal-error"),_e(typeof f.refreshToken<"u","internal-error");const p="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):Jn(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}updateFromIdToken(f){_e(0!==f.length,"internal-error");const p=Jn(f);this.updateTokensAndExpiration(f,null,p)}getToken(f,p=!1){var I=this;return(0,T.A)(function*(){return p||!I.accessToken||I.isExpired?(_e(I.refreshToken,f,"user-token-expired"),I.refreshToken?(yield I.refresh(f,I.refreshToken),I.accessToken):null):I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var I=this;return(0,T.A)(function*(){const{accessToken:L,refreshToken:X,expiresIn:ye}=yield function gt(v,f){return se.apply(this,arguments)}(f,p);I.updateTokensAndExpiration(L,X,Number(ye))})()}updateTokensAndExpiration(f,p,I){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(f,p){const{refreshToken:I,accessToken:L,expirationTime:X}=p,ye=new tt;return I&&(_e("string"==typeof I,"internal-error",{appName:f}),ye.refreshToken=I),L&&(_e("string"==typeof L,"internal-error",{appName:f}),ye.accessToken=L),X&&(_e("number"==typeof X,"internal-error",{appName:f}),ye.expirationTime=X),ye}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new tt,this.toJSON())}_performRefresh(){return Ut("not implemented")}}function Ne(v,f){_e("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class Ft{constructor(f){var{uid:p,auth:I,stsTokenManager:L}=f,X=(0,Fe.Tt)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=I,this.stsTokenManager=L,this.accessToken=L.accessToken,this.displayName=X.displayName||null,this.email=X.email||null,this.emailVerified=X.emailVerified||!1,this.phoneNumber=X.phoneNumber||null,this.photoURL=X.photoURL||null,this.isAnonymous=X.isAnonymous||!1,this.tenantId=X.tenantId||null,this.providerData=X.providerData?[...X.providerData]:[],this.metadata=new Ge(X.createdAt||void 0,X.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,T.A)(function*(){const I=yield Nt(p,p.stsTokenManager.getToken(p.auth,f));return _e(I,p.auth,"internal-error"),p.accessToken!==I&&(p.accessToken=I,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),I})()}getIdTokenResult(f){return function Vr(v){return yt.apply(this,arguments)}(this,f)}reload(){return function et(v){return Be.apply(this,arguments)}(this)}_assign(f){this!==f&&(_e(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const p=new Ft(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(f){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var I=this;return(0,T.A)(function*(){let L=!1;f.idToken&&f.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(f),L=!0),p&&(yield st(I)),yield I.auth._persistUserIfCurrent(I),L&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var f=this;return(0,T.A)(function*(){if((0,m._isFirebaseServerApp)(f.auth.app))return Promise.reject(At(f.auth));const p=yield f.getIdToken();return yield Nt(f,function Ei(v,f){return Bt.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var I,L,X,ye,Le,pt,Jt,dn;const pn=null!==(I=p.displayName)&&void 0!==I?I:void 0,gi=null!==(L=p.email)&&void 0!==L?L:void 0,fa=null!==(X=p.phoneNumber)&&void 0!==X?X:void 0,dd=null!==(ye=p.photoURL)&&void 0!==ye?ye:void 0,as=null!==(Le=p.tenantId)&&void 0!==Le?Le:void 0,ll=null!==(pt=p._redirectEventId)&&void 0!==pt?pt:void 0,si=null!==(Jt=p.createdAt)&&void 0!==Jt?Jt:void 0,jf=null!==(dn=p.lastLoginAt)&&void 0!==dn?dn:void 0,{uid:mh,emailVerified:$f,isAnonymous:Du,providerData:cl,stsTokenManager:_h}=p;_e(mh&&_h,f,"internal-error");const Hl=tt.fromJSON(this.name,_h);_e("string"==typeof mh,f,"internal-error"),Ne(pn,f.name),Ne(gi,f.name),_e("boolean"==typeof $f,f,"internal-error"),_e("boolean"==typeof Du,f,"internal-error"),Ne(fa,f.name),Ne(dd,f.name),Ne(as,f.name),Ne(ll,f.name),Ne(si,f.name),Ne(jf,f.name);const ls=new Ft({uid:mh,auth:f,email:gi,emailVerified:$f,displayName:pn,isAnonymous:Du,photoURL:dd,phoneNumber:fa,tenantId:as,stsTokenManager:Hl,createdAt:si,lastLoginAt:jf});return cl&&Array.isArray(cl)&&(ls.providerData=cl.map(ay=>Object.assign({},ay))),ll&&(ls._redirectEventId=ll),ls}static _fromIdTokenResponse(f,p,I=!1){return(0,T.A)(function*(){const L=new tt;L.updateFromServerResponse(p);const X=new Ft({uid:p.localId,auth:f,stsTokenManager:L,isAnonymous:I});return yield st(X),X})()}static _fromGetAccountInfoResponse(f,p,I){return(0,T.A)(function*(){const L=p.users[0];_e(void 0!==L.localId,"internal-error");const X=void 0!==L.providerUserInfo?Me(L.providerUserInfo):[],ye=!(L.email&&L.passwordHash||X?.length),Le=new tt;Le.updateFromIdToken(I);const pt=new Ft({uid:L.localId,auth:f,stsTokenManager:Le,isAnonymous:ye}),Jt={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:X,metadata:new Ge(L.createdAt,L.lastLoginAt),isAnonymous:!(L.email&&L.passwordHash||X?.length)};return Object.assign(pt,Jt),pt})()}}const vt=new Map;function kn(v){Nn(v instanceof Function,"Expected a class definition");let f=vt.get(v);return f?(Nn(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,vt.set(v,f),f)}const On=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,T.A)(function*(){return!0})()}_set(p,I){var L=this;return(0,T.A)(function*(){L.storage[p]=I})()}_get(p){var I=this;return(0,T.A)(function*(){const L=I.storage[p];return void 0===L?null:L})()}_remove(p){var I=this;return(0,T.A)(function*(){delete I.storage[p]})()}_addListener(p,I){}_removeListener(p,I){}}return v.type="NONE",v})();function $t(v,f,p){return`firebase:${v}:${f}:${p}`}class Hn{constructor(f,p,I){this.persistence=f,this.auth=p,this.userKey=I;const{config:L,name:X}=this.auth;this.fullUserKey=$t(this.userKey,L.apiKey,X),this.fullPersistenceKey=$t("persistence",L.apiKey,X),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,T.A)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?Ft._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,T.A)(function*(){if(p.persistence===f)return;const I=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,I?p.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,I="authUser"){return(0,T.A)(function*(){if(!p.length)return new Hn(kn(On),f,I);const L=(yield Promise.all(p.map(function(){var Jt=(0,T.A)(function*(dn){if(yield dn._isAvailable())return dn});return function(dn){return Jt.apply(this,arguments)}}()))).filter(Jt=>Jt);let X=L[0]||kn(On);const ye=$t(I,f.config.apiKey,f.name);let Le=null;for(const Jt of p)try{const dn=yield Jt._get(ye);if(dn){const pn=Ft._fromJSON(f,dn);Jt!==X&&(Le=pn),X=Jt;break}}catch{}const pt=L.filter(Jt=>Jt._shouldAllowMigration);return X._shouldAllowMigration&&pt.length?(X=pt[0],Le&&(yield X._set(ye,Le.toJSON())),yield Promise.all(p.map(function(){var Jt=(0,T.A)(function*(dn){if(dn!==X)try{yield dn._remove(ye)}catch{}});return function(dn){return Jt.apply(this,arguments)}}())),new Hn(X,f,I)):new Hn(X,f,I)})()}}function Tn(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Ii(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(vo(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Wo(f))return"Blackberry";if(Ea(f))return"Webos";if(_r(f))return"Safari";if((f.includes("chrome/")||Ht(f))&&!f.includes("edge/"))return"Chrome";if(Eo(f))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function vo(v=(0,ce.ZQ)()){return/firefox\//i.test(v)}function _r(v=(0,ce.ZQ)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ht(v=(0,ce.ZQ)()){return/crios\//i.test(v)}function Ii(v=(0,ce.ZQ)()){return/iemobile/i.test(v)}function Eo(v=(0,ce.ZQ)()){return/android/i.test(v)}function Wo(v=(0,ce.ZQ)()){return/blackberry/i.test(v)}function Ea(v=(0,ce.ZQ)()){return/webos/i.test(v)}function Oi(v=(0,ce.ZQ)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Wt(v=(0,ce.ZQ)()){return Oi(v)||Eo(v)||Ea(v)||Wo(v)||/windows phone/i.test(v)||Ii(v)}function Cn(v,f=[]){let p;switch(v){case"Browser":p=Tn((0,ce.ZQ)());break;case"Worker":p=`${Tn((0,ce.ZQ)())}-${v}`;break;default:p=v}const I=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${m.SDK_VERSION}/${I}`}class Fn{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,p){const I=X=>new Promise((ye,Le)=>{try{ye(f(X))}catch(pt){Le(pt)}});I.onAbort=p,this.queue.push(I);const L=this.queue.length-1;return()=>{this.queue[L]=()=>Promise.resolve()}}runMiddleware(f){var p=this;return(0,T.A)(function*(){if(p.auth.currentUser===f)return;const I=[];try{for(const L of p.queue)yield L(f),L.onAbort&&I.push(L.onAbort)}catch(L){I.reverse();for(const X of I)try{X()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:L?.message})}})()}}function nr(){return(nr=(0,T.A)(function*(v,f={}){return we(v,"GET","/v2/passwordPolicy",Ze(v,f))})).apply(this,arguments)}class ke{constructor(f){var p,I,L,X;const ye=f.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(p=ye.minPasswordLength)&&void 0!==p?p:6,ye.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ye.maxPasswordLength),void 0!==ye.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ye.containsLowercaseCharacter),void 0!==ye.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ye.containsUppercaseCharacter),void 0!==ye.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ye.containsNumericCharacter),void 0!==ye.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ye.containsNonAlphanumericCharacter),this.enforcementState=f.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(L=null===(I=f.allowedNonAlphanumericCharacters)||void 0===I?void 0:I.join(""))&&void 0!==L?L:"",this.forceUpgradeOnSignin=null!==(X=f.forceUpgradeOnSignin)&&void 0!==X&&X,this.schemaVersion=f.schemaVersion}validatePassword(f){var p,I,L,X,ye,Le;const pt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(f,pt),this.validatePasswordCharacterOptions(f,pt),pt.isValid&&(pt.isValid=null===(p=pt.meetsMinPasswordLength)||void 0===p||p),pt.isValid&&(pt.isValid=null===(I=pt.meetsMaxPasswordLength)||void 0===I||I),pt.isValid&&(pt.isValid=null===(L=pt.containsLowercaseLetter)||void 0===L||L),pt.isValid&&(pt.isValid=null===(X=pt.containsUppercaseLetter)||void 0===X||X),pt.isValid&&(pt.isValid=null===(ye=pt.containsNumericCharacter)||void 0===ye||ye),pt.isValid&&(pt.isValid=null===(Le=pt.containsNonAlphanumericCharacter)||void 0===Le||Le),pt}validatePasswordLengthOptions(f,p){const I=this.customStrengthOptions.minPasswordLength,L=this.customStrengthOptions.maxPasswordLength;I&&(p.meetsMinPasswordLength=f.length>=I),L&&(p.meetsMaxPasswordLength=f.length<=L)}validatePasswordCharacterOptions(f,p){let I;this.updatePasswordCharacterOptionsStatuses(p,!1,!1,!1,!1);for(let L=0;L<f.length;L++)I=f.charAt(L),this.updatePasswordCharacterOptionsStatuses(p,I>="a"&&I<="z",I>="A"&&I<="Z",I>="0"&&I<="9",this.allowedNonAlphanumericCharacters.includes(I))}updatePasswordCharacterOptionsStatuses(f,p,I,L,X){this.customStrengthOptions.containsLowercaseLetter&&(f.containsLowercaseLetter||(f.containsLowercaseLetter=p)),this.customStrengthOptions.containsUppercaseLetter&&(f.containsUppercaseLetter||(f.containsUppercaseLetter=I)),this.customStrengthOptions.containsNumericCharacter&&(f.containsNumericCharacter||(f.containsNumericCharacter=L)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(f.containsNonAlphanumericCharacter||(f.containsNonAlphanumericCharacter=X))}}class Ls{constructor(f,p,I,L){this.app=f,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=I,this.config=L,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zs(this),this.idTokenSubscription=new Zs(this),this.beforeStateQueue=new Fn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=L.sdkClientVersion}_initializeWithPersistence(f,p){var I=this;return p&&(this._popupRedirectResolver=kn(p)),this._initializationPromise=this.queue((0,T.A)(function*(){var L,X;if(!I._deleted&&(I.persistenceManager=yield Hn.create(I,f),!I._deleted)){if(null!==(L=I._popupRedirectResolver)&&void 0!==L&&L._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(p),I.lastNotifiedUid=(null===(X=I.currentUser)||void 0===X?void 0:X.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,T.A)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p,!0)}})()}initializeCurrentUserFromIdToken(f){var p=this;return(0,T.A)(function*(){try{const I=yield ir(p,{idToken:f}),L=yield Ft._fromGetAccountInfoResponse(p,I,f);yield p.directlySetCurrentUser(L)}catch(I){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",I),yield p.directlySetCurrentUser(null)}})()}initializeCurrentUser(f){var p=this;return(0,T.A)(function*(){var I;if((0,m._isFirebaseServerApp)(p.app)){const Le=p.app.settings.authIdToken;return Le?new Promise(pt=>{setTimeout(()=>p.initializeCurrentUserFromIdToken(Le).then(pt,pt))}):p.directlySetCurrentUser(null)}const L=yield p.assertedPersistence.getCurrentUser();let X=L,ye=!1;if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Le=null===(I=p.redirectUser)||void 0===I?void 0:I._redirectEventId,pt=X?._redirectEventId,Jt=yield p.tryRedirectSignIn(f);(!Le||Le===pt)&&Jt?.user&&(X=Jt.user,ye=!0)}if(!X)return p.directlySetCurrentUser(null);if(!X._redirectEventId){if(ye)try{yield p.beforeStateQueue.runMiddleware(X)}catch(Le){X=L,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Le))}return X?p.reloadAndSetCurrentUserOrClear(X):p.directlySetCurrentUser(null)}return _e(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===X._redirectEventId?p.directlySetCurrentUser(X):p.reloadAndSetCurrentUserOrClear(X)})()}tryRedirectSignIn(f){var p=this;return(0,T.A)(function*(){let I=null;try{I=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch{yield p._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,T.A)(function*(){try{yield st(f)}catch(I){if("auth/network-request-failed"!==I?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function zo(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,T.A)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,T.A)(function*(){if((0,m._isFirebaseServerApp)(p.app))return Promise.reject(At(p));const I=f?(0,ce.Ku)(f):null;return I&&_e(I.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(I&&I._clone(p))})()}_updateCurrentUser(f,p=!1){var I=this;return(0,T.A)(function*(){if(!I._deleted)return f&&_e(I.tenantId===f.tenantId,I,"tenant-id-mismatch"),p||(yield I.beforeStateQueue.runMiddleware(f)),I.queue((0,T.A)(function*(){yield I.directlySetCurrentUser(f),I.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,T.A)(function*(){return(0,m._isFirebaseServerApp)(f.app)?Promise.reject(At(f)):(yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0))})()}setPersistence(f){var p=this;return(0,m._isFirebaseServerApp)(this.app)?Promise.reject(At(this)):this.queue((0,T.A)(function*(){yield p.assertedPersistence.setPersistence(kn(f))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(f){var p=this;return(0,T.A)(function*(){p._getPasswordPolicyInternal()||(yield p._updatePasswordPolicy());const I=p._getPasswordPolicyInternal();return I.schemaVersion!==p.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(p._errorFactory.create("unsupported-password-policy-schema-version",{})):I.validatePassword(f)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var f=this;return(0,T.A)(function*(){const p=yield function Cr(v){return nr.apply(this,arguments)}(f),I=new ke(p);null===f.tenantId?f._projectPasswordPolicy=I:f._tenantPasswordPolicies[f.tenantId]=I})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new ce.FA("auth","Firebase",f())}onAuthStateChanged(f,p,I){return this.registerStateListener(this.authStateSubscription,f,p,I)}beforeAuthStateChanged(f,p){return this.beforeStateQueue.pushCallback(f,p)}onIdTokenChanged(f,p,I){return this.registerStateListener(this.idTokenSubscription,f,p,I)}authStateReady(){return new Promise((f,p)=>{if(this.currentUser)f();else{const I=this.onAuthStateChanged(()=>{I(),f()},p)}})}revokeAccessToken(f){var p=this;return(0,T.A)(function*(){if(p.currentUser){const I=yield p.currentUser.getIdToken(),L={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:f,idToken:I};null!=p.tenantId&&(L.tenantId=p.tenantId),yield function ae(v,f){return ve.apply(this,arguments)}(p,L)}})()}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var I=this;return(0,T.A)(function*(){const L=yield I.getOrInitRedirectPersistenceManager(p);return null===f?L.removeCurrentUser():L.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,T.A)(function*(){if(!p.redirectPersistenceManager){const I=f&&kn(f)||p._popupRedirectResolver;_e(I,p,"argument-error"),p.redirectPersistenceManager=yield Hn.create(p,[kn(I._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,T.A)(function*(){var I,L;return p._isInitialized&&(yield p.queue((0,T.A)(function*(){}))),(null===(I=p._currentUser)||void 0===I?void 0:I._redirectEventId)===f?p._currentUser:(null===(L=p.redirectUser)||void 0===L?void 0:L._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,T.A)(function*(){if(f===p.currentUser)return p.queue((0,T.A)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,I,L){if(this._deleted)return()=>{};const X="function"==typeof p?p:p.next.bind(p);let ye=!1;const Le=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(Le,this,"internal-error"),Le.then(()=>{ye||X(this.currentUser)}),"function"==typeof p){const pt=f.addObserver(p,I,L);return()=>{ye=!0,pt()}}{const pt=f.addObserver(p);return()=>{ye=!0,pt()}}}directlySetCurrentUser(f){var p=this;return(0,T.A)(function*(){p.currentUser&&p.currentUser!==f&&p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh(),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Cn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,T.A)(function*(){var p;const I={"X-Client-Version":f.clientVersion};f.app.options.appId&&(I["X-Firebase-gmpid"]=f.app.options.appId);const L=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();L&&(I["X-Firebase-Client"]=L);const X=yield f._getAppCheckToken();return X&&(I["X-Firebase-AppCheck"]=X),I})()}_getAppCheckToken(){var f=this;return(0,T.A)(function*(){var p;const I=yield null===(p=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return I?.error&&function pr(v,...f){tr.logLevel<=De.$b.WARN&&tr.warn(`Auth (${m.SDK_VERSION}): ${v}`,...f)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function qn(v){return(0,ce.Ku)(v)}class Zs{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,ce.tD)(p=>this.observer=p)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let hs={loadJS:()=>(0,T.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ko(v){return hs.loadJS(v)}function Vs(v){return`__${v}${Math.floor(1e6*Math.random())}`}class Sr{constructor(f){this.type="recaptcha-enterprise",this.auth=qn(f)}verify(f="verify",p=!1){var I=this;return(0,T.A)(function*(){function X(){return X=(0,T.A)(function*(Le){if(!p){if(null==Le.tenantId&&null!=Le._agentRecaptchaConfig)return Le._agentRecaptchaConfig.siteKey;if(null!=Le.tenantId&&void 0!==Le._tenantRecaptchaConfigs[Le.tenantId])return Le._tenantRecaptchaConfigs[Le.tenantId].siteKey}return new Promise(function(){var pt=(0,T.A)(function*(Jt,dn){Yr(Le,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(pn=>{if(void 0!==pn.recaptchaKey){const gi=new qi(pn);return null==Le.tenantId?Le._agentRecaptchaConfig=gi:Le._tenantRecaptchaConfigs[Le.tenantId]=gi,Jt(gi.siteKey)}dn(new Error("recaptcha Enterprise site key undefined"))}).catch(pn=>{dn(pn)})});return function(Jt,dn){return pt.apply(this,arguments)}}())}),X.apply(this,arguments)}function ye(Le,pt,Jt){const dn=window.grecaptcha;mn(dn)?dn.enterprise.ready(()=>{dn.enterprise.execute(Le,{action:f}).then(pn=>{pt(pn)}).catch(()=>{pt("NO_RECAPTCHA")})}):Jt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Le,pt)=>{(function L(Le){return X.apply(this,arguments)})(I.auth).then(Jt=>{if(!p&&mn(window.grecaptcha))ye(Jt,Le,pt);else{if(typeof window>"u")return void pt(new Error("RecaptchaVerifier is only supported in browser"));let dn=function qo(){return hs.recaptchaEnterpriseScript}();0!==dn.length&&(dn+=Jt),Ko(dn).then(()=>{ye(Jt,Le,pt)}).catch(pn=>{pt(pn)})}}).catch(Jt=>{pt(Jt)})})})()}}function co(v,f,p){return hi.apply(this,arguments)}function hi(){return(hi=(0,T.A)(function*(v,f,p,I=!1){const L=new Sr(v);let X;try{X=yield L.verify(p)}catch{X=yield L.verify(p,!0)}const ye=Object.assign({},f);return Object.assign(ye,I?{captchaResp:X}:{captchaResponse:X}),Object.assign(ye,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ye,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ye})).apply(this,arguments)}function Ri(v,f,p,I){return Xr.apply(this,arguments)}function Xr(){return Xr=(0,T.A)(function*(v,f,p,I){var L;if(null!==(L=v._getRecaptchaConfig())&&void 0!==L&&L.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const X=yield co(v,f,p,"getOobCode"===p);return I(v,X)}return I(v,f).catch(function(){var X=(0,T.A)(function*(ye){if("auth/missing-recaptcha-token"===ye.code){console.log(`${p} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Le=yield co(v,f,p,"getOobCode"===p);return I(v,Le)}return Promise.reject(ye)});return function(ye){return X.apply(this,arguments)}}())}),Xr.apply(this,arguments)}function bl(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function wa(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class Ta{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return Ut("not implemented")}_getIdTokenResponse(f){return Ut("not implemented")}_linkToIdToken(f,p){return Ut("not implemented")}_getReauthenticationResolver(f){return Ut("not implemented")}}function rc(v,f){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,T.A)(function*(v,f){return we(v,"POST","/v1/accounts:resetPassword",Ze(v,f))})).apply(this,arguments)}function ba(){return(ba=(0,T.A)(function*(v,f){return we(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ta(v,f){return bs.apply(this,arguments)}function bs(){return(bs=(0,T.A)(function*(v,f){return we(v,"POST","/v1/accounts:signUp",f)})).apply(this,arguments)}function Ja(){return(Ja=(0,T.A)(function*(v,f){return we(v,"POST","/v1/accounts:update",Ze(v,f))})).apply(this,arguments)}function Mc(v,f){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,T.A)(function*(v,f){return te(v,"POST","/v1/accounts:signInWithPassword",Ze(v,f))})).apply(this,arguments)}function na(v,f){return ra.apply(this,arguments)}function ra(){return(ra=(0,T.A)(function*(v,f){return we(v,"POST","/v1/accounts:sendOobCode",Ze(v,f))})).apply(this,arguments)}function Or(){return(Or=(0,T.A)(function*(v,f){return na(v,f)})).apply(this,arguments)}function Xo(v,f){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,T.A)(function*(v,f){return na(v,f)})).apply(this,arguments)}function Ps(v,f){return ia.apply(this,arguments)}function ia(){return(ia=(0,T.A)(function*(v,f){return na(v,f)})).apply(this,arguments)}function xr(){return(xr=(0,T.A)(function*(v,f){return na(v,f)})).apply(this,arguments)}function Co(){return(Co=(0,T.A)(function*(v,f){return te(v,"POST","/v1/accounts:signInWithEmailLink",Ze(v,f))})).apply(this,arguments)}function Pa(){return(Pa=(0,T.A)(function*(v,f){return te(v,"POST","/v1/accounts:signInWithEmailLink",Ze(v,f))})).apply(this,arguments)}class ur extends Ta{constructor(f,p,I,L=null){super("password",I),this._email=f,this._password=p,this._tenantId=L}static _fromEmailAndPassword(f,p){return new ur(f,p,"password")}static _fromEmailAndCode(f,p,I=null){return new ur(f,p,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,T.A)(function*(){switch(p.signInMethod){case"password":return Ri(f,{returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Mc);case"emailLink":return function to(v,f){return Co.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:It(f,"internal-error")}})()}_linkToIdToken(f,p){var I=this;return(0,T.A)(function*(){switch(I.signInMethod){case"password":return Ri(f,{idToken:p,returnSecureToken:!0,email:I._email,password:I._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ta);case"emailLink":return function Jo(v,f){return Pa.apply(this,arguments)}(f,{idToken:p,email:I._email,oobCode:I._password});default:It(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function ji(v,f){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,T.A)(function*(v,f){return te(v,"POST","/v1/accounts:signInWithIdp",Ze(v,f))})).apply(this,arguments)}class wi extends Ta{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new wi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):It("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:I,signInMethod:L}=p,X=(0,Fe.Tt)(p,["providerId","signInMethod"]);if(!I||!L)return null;const ye=new wi(I,L);return ye.idToken=X.idToken||void 0,ye.accessToken=X.accessToken||void 0,ye.secret=X.secret,ye.nonce=X.nonce,ye.pendingToken=X.pendingToken||null,ye}_getIdTokenResponse(f){return ji(f,this.buildRequest())}_linkToIdToken(f,p){const I=this.buildRequest();return I.idToken=p,ji(f,I)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,ji(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,ce.Am)(p)}return f}}function Ni(){return(Ni=(0,T.A)(function*(v,f){return we(v,"POST","/v1/accounts:sendVerificationCode",Ze(v,f))})).apply(this,arguments)}function Bs(){return(Bs=(0,T.A)(function*(v,f){return te(v,"POST","/v1/accounts:signInWithPhoneNumber",Ze(v,f))})).apply(this,arguments)}function Da(){return(Da=(0,T.A)(function*(v,f){const p=yield te(v,"POST","/v1/accounts:signInWithPhoneNumber",Ze(v,f));if(p.temporaryProof)throw lr(v,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const no={USER_NOT_FOUND:"user-not-found"};function Ur(){return(Ur=(0,T.A)(function*(v,f){return te(v,"POST","/v1/accounts:signInWithPhoneNumber",Ze(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),no)})).apply(this,arguments)}class fi extends Ta{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new fi({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new fi({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function Ds(v,f){return Bs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function kr(v,f){return Da.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Mt(v,f){return Ur.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:I,verificationCode:L}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:I,code:L}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:I,phoneNumber:L,temporaryProof:X}=f;return I||p||L||X?new fi({verificationId:p,verificationCode:I,phoneNumber:L,temporaryProof:X}):null}}class Io{constructor(f){var p,I,L,X,ye,Le;const pt=(0,ce.I9)((0,ce.hp)(f)),Jt=null!==(p=pt.apiKey)&&void 0!==p?p:null,dn=null!==(I=pt.oobCode)&&void 0!==I?I:null,pn=function es(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(L=pt.mode)&&void 0!==L?L:null);_e(Jt&&dn&&pn,"argument-error"),this.apiKey=Jt,this.operation=pn,this.code=dn,this.continueUrl=null!==(X=pt.continueUrl)&&void 0!==X?X:null,this.languageCode=null!==(ye=pt.languageCode)&&void 0!==ye?ye:null,this.tenantId=null!==(Le=pt.tenantId)&&void 0!==Le?Le:null}static parseLink(f){const p=function js(v){const f=(0,ce.I9)((0,ce.hp)(v)).link,p=f?(0,ce.I9)((0,ce.hp)(f)).deep_link_id:null,I=(0,ce.I9)((0,ce.hp)(v)).deep_link_id;return(I?(0,ce.I9)((0,ce.hp)(I)).link:null)||I||p||f||v}(f);try{return new Io(p)}catch{return null}}}let ti=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(p,I){return ur._fromEmailAndPassword(p,I)}static credentialWithLink(p,I){const L=Io.parseLink(I);return _e(L,"argument-error"),ur._fromEmailAndCode(p,L.code,L.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class xi{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class ni extends xi{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class ri extends ni{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return _e("providerId"in p&&"signInMethod"in p,"argument-error"),wi._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return _e(f.idToken||f.accessToken,"argument-error"),wi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return ri.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return ri.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:I,oauthTokenSecret:L,pendingToken:X,nonce:ye,providerId:Le}=f;if(!I&&!L&&!p&&!X||!Le)return null;try{return new ri(Le)._credential({idToken:p,accessToken:I,nonce:ye,pendingToken:X})}catch{return null}}}let Ss=(()=>{class v extends ni{constructor(){super("facebook.com")}static credential(p){return wi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),uo=(()=>{class v extends ni{constructor(){super("google.com"),this.addScope("profile")}static credential(p,I){return wi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:I})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:I,oauthAccessToken:L}=p;if(!I&&!L)return null;try{return v.credential(I,L)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),gs=(()=>{class v extends ni{constructor(){super("github.com")}static credential(p){return wi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class b extends Ta{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return ji(f,this.buildRequest())}_linkToIdToken(f,p){const I=this.buildRequest();return I.idToken=p,ji(f,I)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,ji(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:I,signInMethod:L,pendingToken:X}=p;return I&&L&&X&&I===L?new b(I,X):null}static _create(f,p){return new b(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class U extends xi{constructor(f){_e(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return U.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return U.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=b.fromJSON(f);return _e(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:I}=f;if(!p||!I)return null;try{return b._create(I,p)}catch{return null}}}let Q=(()=>{class v extends ni{constructor(){super("twitter.com")}static credential(p,I){return wi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:I})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:I,oauthTokenSecret:L}=p;if(!I||!L)return null;try{return v.credential(I,L)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function oe(v,f){return pe.apply(this,arguments)}function pe(){return(pe=(0,T.A)(function*(v,f){return te(v,"POST","/v1/accounts:signUp",Ze(v,f))})).apply(this,arguments)}class Ce{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,I,L=!1){return(0,T.A)(function*(){const X=yield Ft._fromIdTokenResponse(f,I,L),ye=Ke(I);return new Ce({user:X,providerId:ye,_tokenResponse:I,operationType:p})})()}static _forOperation(f,p,I){return(0,T.A)(function*(){yield f._updateTokensIfNecessary(I,!0);const L=Ke(I);return new Ce({user:f,providerId:L,_tokenResponse:I,operationType:p})})()}}function Ke(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Qt(){return(Qt=(0,T.A)(function*(v){var f;if((0,m._isFirebaseServerApp)(v.app))return Promise.reject(At(v));const p=qn(v);if(yield p._initializationPromise,null!==(f=p.currentUser)&&void 0!==f&&f.isAnonymous)return new Ce({user:p.currentUser,providerId:null,operationType:"signIn"});const I=yield oe(p,{returnSecureToken:!0}),L=yield Ce._fromIdTokenResponse(p,"signIn",I,!0);return yield p._updateCurrentUser(L.user),L})).apply(this,arguments)}class mt extends ce.g{constructor(f,p,I,L){var X;super(p.code,p.message),this.operationType=I,this.user=L,Object.setPrototypeOf(this,mt.prototype),this.customData={appName:f.name,tenantId:null!==(X=f.tenantId)&&void 0!==X?X:void 0,_serverResponse:p.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(f,p,I,L){return new mt(f,p,I,L)}}function Vn(v,f,p,I){return("reauthenticate"===f?p._getReauthenticationResolver(v):p._getIdTokenResponse(v)).catch(X=>{throw"auth/multi-factor-auth-required"===X.code?mt._fromErrorAndOperation(v,X,f,I):X})}function yn(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function hn(){return hn=(0,T.A)(function*(v,f){const p=(0,ce.Ku)(v);yield Fr(!0,p,f);const{providerUserInfo:I}=yield function Xn(v,f){return xn.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),L=yn(I||[]);return p.providerData=p.providerData.filter(X=>L.has(X.providerId)),L.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),hn.apply(this,arguments)}function In(v,f){return wn.apply(this,arguments)}function wn(){return(wn=(0,T.A)(function*(v,f,p=!1){const I=yield Nt(v,f._linkToIdToken(v.auth,yield v.getIdToken()),p);return Ce._forOperation(v,"link",I)})).apply(this,arguments)}function Fr(v,f,p){return $i.apply(this,arguments)}function $i(){return($i=(0,T.A)(function*(v,f,p){yield st(f);const L=!1===v?"provider-already-linked":"no-such-provider";_e(yn(f.providerData).has(p)===v,f.auth,L)})).apply(this,arguments)}function Ti(v,f){return ts.apply(this,arguments)}function ts(){return(ts=(0,T.A)(function*(v,f,p=!1){const{auth:I}=v;if((0,m._isFirebaseServerApp)(I.app))return Promise.reject(At(I));const L="reauthenticate";try{const X=yield Nt(v,Vn(I,L,f,v),p);_e(X.idToken,I,"internal-error");const ye=mr(X.idToken);_e(ye,I,"internal-error");const{sub:Le}=ye;return _e(v.uid===Le,I,"user-mismatch"),Ce._forOperation(v,L,X)}catch(X){throw"auth/user-not-found"===X?.code&&It(I,"user-mismatch"),X}})).apply(this,arguments)}function H(v,f){return $.apply(this,arguments)}function $(){return($=(0,T.A)(function*(v,f,p=!1){if((0,m._isFirebaseServerApp)(v.app))return Promise.reject(At(v));const I="signIn",L=yield Vn(v,I,f),X=yield Ce._fromIdTokenResponse(v,I,L);return p||(yield v._updateCurrentUser(X.user)),X})).apply(this,arguments)}function R(v,f){return Y.apply(this,arguments)}function Y(){return(Y=(0,T.A)(function*(v,f){return H(qn(v),f)})).apply(this,arguments)}function he(v,f){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,T.A)(function*(v,f){const p=(0,ce.Ku)(v);return yield Fr(!1,p,f.providerId),In(p,f)})).apply(this,arguments)}function An(v,f){return bi.apply(this,arguments)}function bi(){return(bi=(0,T.A)(function*(v,f){return Ti((0,ce.Ku)(v),f)})).apply(this,arguments)}function wo(){return(wo=(0,T.A)(function*(v,f){return te(v,"POST","/v1/accounts:signInWithCustomToken",Ze(v,f))})).apply(this,arguments)}function jt(){return jt=(0,T.A)(function*(v,f){if((0,m._isFirebaseServerApp)(v.app))return Promise.reject(At(v));const p=qn(v),I=yield function ns(v,f){return wo.apply(this,arguments)}(p,{token:f,returnSecureToken:!0}),L=yield Ce._fromIdTokenResponse(p,"signIn",I);return yield p._updateCurrentUser(L.user),L}),jt.apply(this,arguments)}class Dn{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?or._fromServerResponse(f,p):"totpInfo"in p?Wr._fromServerResponse(f,p):It(f,"internal-error")}}class or extends Dn{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new or(p)}}class Wr extends Dn{constructor(f){super("totp",f)}static _fromServerResponse(f,p){return new Wr(p)}}function ho(v,f,p){var I;_e((null===(I=p.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),_e(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(_e(p.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(_e(p.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function ro(v){return No.apply(this,arguments)}function No(){return(No=(0,T.A)(function*(v){const f=qn(v);f._getPasswordPolicyInternal()&&(yield f._updatePasswordPolicy())})).apply(this,arguments)}function To(){return(To=(0,T.A)(function*(v,f,p){const I=qn(v),L={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};p&&ho(I,L,p),yield Ri(I,L,"getOobCode",Xo)})).apply(this,arguments)}function pi(){return pi=(0,T.A)(function*(v,f,p){yield rc((0,ce.Ku)(v),{oobCode:f,newPassword:p}).catch(function(){var I=(0,T.A)(function*(L){throw"auth/password-does-not-meet-requirements"===L.code&&ro(v),L});return function(L){return I.apply(this,arguments)}}())}),pi.apply(this,arguments)}function vn(){return vn=(0,T.A)(function*(v,f){yield function As(v,f){return Ja.apply(this,arguments)}((0,ce.Ku)(v),{oobCode:f})}),vn.apply(this,arguments)}function rs(v,f){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,T.A)(function*(v,f){const p=(0,ce.Ku)(v),I=yield rc(p,{oobCode:f}),L=I.requestType;switch(_e(L,p,"internal-error"),L){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":_e(I.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":_e(I.mfaInfo,p,"internal-error");default:_e(I.email,p,"internal-error")}let X=null;return I.mfaInfo&&(X=Dn._fromServerResponse(qn(p),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:X},operation:L}})).apply(this,arguments)}function oc(){return(oc=(0,T.A)(function*(v,f){const{data:p}=yield rs((0,ce.Ku)(v),f);return p.email})).apply(this,arguments)}function Pl(){return(Pl=(0,T.A)(function*(v,f,p){if((0,m._isFirebaseServerApp)(v.app))return Promise.reject(At(v));const I=qn(v),ye=yield Ri(I,{returnSecureToken:!0,email:f,password:p,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oe).catch(pt=>{throw"auth/password-does-not-meet-requirements"===pt.code&&ro(v),pt}),Le=yield Ce._fromIdTokenResponse(I,"signIn",ye);return yield I._updateCurrentUser(Le.user),Le})).apply(this,arguments)}function Nc(){return(Nc=(0,T.A)(function*(v,f,p){const I=qn(v),L={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};(function X(ye,Le){_e(Le.handleCodeInApp,I,"argument-error"),Le&&ho(I,ye,Le)})(L,p),yield Ri(I,L,"getOobCode",Ps)})).apply(this,arguments)}function Sa(){return(Sa=(0,T.A)(function*(v,f,p){if((0,m._isFirebaseServerApp)(v.app))return Promise.reject(At(v));const I=(0,ce.Ku)(v),L=ti.credentialWithLink(f,p||Kn());return _e(L._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),R(I,L)})).apply(this,arguments)}function Dl(){return(Dl=(0,T.A)(function*(v,f){return we(v,"POST","/v1/accounts:createAuthUri",Ze(v,f))})).apply(this,arguments)}function ko(){return ko=(0,T.A)(function*(v,f){const I={identifier:f,continueUri:zn()?Kn():"http://localhost"},{signinMethods:L}=yield function lu(v,f){return Dl.apply(this,arguments)}((0,ce.Ku)(v),I);return L||[]}),ko.apply(this,arguments)}function Ma(){return Ma=(0,T.A)(function*(v,f){const p=(0,ce.Ku)(v),L={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&ho(p.auth,L,f);const{email:X}=yield function Aa(v,f){return Or.apply(this,arguments)}(p.auth,L);X!==v.email&&(yield v.reload())}),Ma.apply(this,arguments)}function Ar(){return Ar=(0,T.A)(function*(v,f,p){const I=(0,ce.Ku)(v),X={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};p&&ho(I.auth,X,p);const{email:ye}=yield function fs(v,f){return xr.apply(this,arguments)}(I.auth,X);ye!==v.email&&(yield v.reload())}),Ar.apply(this,arguments)}function cu(){return(cu=(0,T.A)(function*(v,f){return we(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Xd(){return Xd=(0,T.A)(function*(v,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const I=(0,ce.Ku)(v),X={idToken:yield I.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},ye=yield Nt(I,function Yd(v,f){return cu.apply(this,arguments)}(I.auth,X));I.displayName=ye.displayName||null,I.photoURL=ye.photoUrl||null;const Le=I.providerData.find(({providerId:pt})=>"password"===pt);Le&&(Le.displayName=I.displayName,Le.photoURL=I.photoURL),yield I._updateTokensIfNecessary(ye)}),Xd.apply(this,arguments)}function q(v,f,p){return k.apply(this,arguments)}function k(){return k=(0,T.A)(function*(v,f,p){const{auth:I}=v,X={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(X.email=f),p&&(X.password=p);const ye=yield Nt(v,function ic(v,f){return ba.apply(this,arguments)}(I,X));yield v._updateTokensIfNecessary(ye,!0)}),k.apply(this,arguments)}class le{constructor(f,p,I={}){this.isNewUser=f,this.providerId=p,this.profile=I}}class Ye extends le{constructor(f,p,I,L){super(f,p,I),this.username=L}}class wt extends le{constructor(f,p){super(f,"facebook.com",p)}}class an extends Ye{constructor(f,p){super(f,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class on extends le{constructor(f,p){super(f,"google.com",p)}}class Lr extends Ye{constructor(f,p,I){super(f,"twitter.com",p,I)}}function Pr(v){const{user:f,_tokenResponse:p}=v;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function z(v){var f,p;if(!v)return null;const{providerId:I}=v,L=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},X=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&v?.idToken){const ye=null===(p=null===(f=mr(v.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(ye)return new le(X,"anonymous"!==ye&&"custom"!==ye?ye:null)}if(!I)return null;switch(I){case"facebook.com":return new wt(X,L);case"github.com":return new an(X,L);case"google.com":return new on(X,L);case"twitter.com":return new Lr(X,L,v.screenName||null);case"custom":case"anonymous":return new le(X,null);default:return new le(X,I,L)}}(p)}class Os{constructor(f,p,I){this.type=f,this.credential=p,this.user=I}static _fromIdtoken(f,p){return new Os("enroll",f,p)}static _fromMfaPendingCredential(f){return new Os("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,I;if(f?.multiFactorSession){if(null!==(p=f.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Os._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(I=f.multiFactorSession)&&void 0!==I&&I.idToken)return Os._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Qu{constructor(f,p,I){this.session=f,this.hints=p,this.signInResolver=I}static _fromError(f,p){const I=qn(f),L=p.customData._serverResponse,X=(L.mfaInfo||[]).map(Le=>Dn._fromServerResponse(I,Le));_e(L.mfaPendingCredential,I,"internal-error");const ye=Os._fromMfaPendingCredential(L.mfaPendingCredential);return new Qu(ye,X,function(){var Le=(0,T.A)(function*(pt){const Jt=yield pt._process(I,ye);delete L.mfaInfo,delete L.mfaPendingCredential;const dn=Object.assign(Object.assign({},L),{idToken:Jt.idToken,refreshToken:Jt.refreshToken});switch(p.operationType){case"signIn":const pn=yield Ce._fromIdTokenResponse(I,p.operationType,dn);return yield I._updateCurrentUser(pn.user),pn;case"reauthenticate":return _e(p.user,I,"internal-error"),Ce._forOperation(p.user,p.operationType,dn);default:It(I,"internal-error")}});return function(pt){return Le.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,T.A)(function*(){return p.signInResolver(f)})()}}class Xu{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(I=>Dn._fromServerResponse(f.auth,I)))})}static _fromUser(f){return new Xu(f)}getSession(){var f=this;return(0,T.A)(function*(){return Os._fromIdtoken(yield f.user.getIdToken(),f.user)})()}enroll(f,p){var I=this;return(0,T.A)(function*(){const L=f,X=yield I.getSession(),ye=yield Nt(I.user,L._process(I.user.auth,X,p));return yield I.user._updateTokensIfNecessary(ye),I.user.reload()})()}unenroll(f){var p=this;return(0,T.A)(function*(){const I="string"==typeof f?f:f.uid,L=yield p.user.getIdToken();try{const X=yield Nt(p.user,function bo(v,f){return we(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ze(v,f))}(p.user.auth,{idToken:L,mfaEnrollmentId:I}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ye})=>ye!==I),yield p.user._updateTokensIfNecessary(X),yield p.user.reload()}catch(X){throw X}})()}}const tl=new WeakMap,fo="__sak";class Ol{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(fo,"1"),this.storage.removeItem(fo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const kc=(()=>{class v extends Ol{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,I)=>this.onStorageEvent(p,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Rl(){const v=(0,ce.ZQ)();return _r(v)||Oi(v)}()&&function ln(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Wt(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const I of Object.keys(this.listeners)){const L=this.storage.getItem(I),X=this.localCache[I];L!==X&&p(I,X,L)}}onStorageEvent(p,I=!1){if(!p.key)return void this.forAllChangedKeys((Le,pt,Jt)=>{this.notifyListeners(Le,Jt)});const L=p.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Le=this.storage.getItem(L);if(p.newValue!==Le)null!==p.newValue?this.storage.setItem(L,p.newValue):this.storage.removeItem(L);else if(this.localCache[L]===p.newValue&&!I)return}const X=()=>{const Le=this.storage.getItem(L);!I&&this.localCache[L]===Le||this.notifyListeners(L,Le)},ye=this.storage.getItem(L);!function ut(){return(0,ce.lT)()&&10===document.documentMode}()||ye===p.newValue||p.newValue===p.oldValue?X():setTimeout(X,10)}notifyListeners(p,I){this.localCache[p]=I;const L=this.listeners[p];if(L)for(const X of Array.from(L))X(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,I,L)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:I,newValue:L}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(I)}_removeListener(p,I){this.listeners[p]&&(this.listeners[p].delete(I),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,I){var L=()=>super._set,X=this;return(0,T.A)(function*(){yield L().call(X,p,I),X.localCache[p]=JSON.stringify(I)})()}_get(p){var I=()=>super._get,L=this;return(0,T.A)(function*(){const X=yield I().call(L,p);return L.localCache[p]=JSON.stringify(X),X})()}_remove(p){var I=()=>super._remove,L=this;return(0,T.A)(function*(){yield I().call(L,p),delete L.localCache[p]})()}}return v.type="LOCAL",v})(),Nl=(()=>{class v extends Ol{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,I){}_removeListener(p,I){}}return v.type="SESSION",v})();let _s=(()=>{class v{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const I=this.receivers.find(X=>X.isListeningto(p));if(I)return I;const L=new v(p);return this.receivers.push(L),L}isListeningto(p){return this.eventTarget===p}handleEvent(p){var I=this;return(0,T.A)(function*(){const L=p,{eventId:X,eventType:ye,data:Le}=L.data,pt=I.handlersMap[ye];if(!pt?.size)return;L.ports[0].postMessage({status:"ack",eventId:X,eventType:ye});const Jt=Array.from(pt).map(function(){var pn=(0,T.A)(function*(gi){return gi(L.origin,Le)});return function(gi){return pn.apply(this,arguments)}}()),dn=yield function Vo(v){return Promise.all(v.map(function(){var f=(0,T.A)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(I){return{fulfilled:!1,reason:I}}});return function(p){return f.apply(this,arguments)}}()))}(Jt);L.ports[0].postMessage({status:"done",eventId:X,eventType:ye,response:dn})})()}_subscribe(p,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(I)}_unsubscribe(p,I){this.handlersMap[p]&&I&&this.handlersMap[p].delete(I),(!I||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Gs(v="",f=10){let p="";for(let I=0;I<f;I++)p+=Math.floor(10*Math.random());return v+p}class H_{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,I=50){var L=this;return(0,T.A)(function*(){const X=typeof MessageChannel<"u"?new MessageChannel:null;if(!X)throw new Error("connection_unavailable");let ye,Le;return new Promise((pt,Jt)=>{const dn=Gs("",20);X.port1.start();const pn=setTimeout(()=>{Jt(new Error("unsupported_event"))},I);Le={messageChannel:X,onMessage(gi){const fa=gi;if(fa.data.eventId===dn)switch(fa.data.status){case"ack":clearTimeout(pn),ye=setTimeout(()=>{Jt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ye),pt(fa.data.response);break;default:clearTimeout(pn),clearTimeout(ye),Jt(new Error("invalid_response"))}}},L.handlers.add(Le),X.port1.addEventListener("message",Le.onMessage),L.target.postMessage({eventType:f,eventId:dn,data:p},[X.port2])}).finally(()=>{Le&&L.removeMessageHandler(Le)})})()}}function Yi(){return window}function un(){return typeof Yi().WorkerGlobalScope<"u"&&"function"==typeof Yi().importScripts}function cc(){return(cc=(0,T.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Zu="firebaseLocalStorageDb",Na="firebaseLocalStorage",Zd="fbase_key";class xa{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function xl(v,f){return v.transaction([Na],f?"readwrite":"readonly").objectStore(Na)}function ka(){const v=indexedDB.open(Zu,1);return new Promise((f,p)=>{v.addEventListener("error",()=>{p(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(Na,{keyPath:Zd})}catch(L){p(L)}}),v.addEventListener("success",(0,T.A)(function*(){const I=v.result;I.objectStoreNames.contains(Na)?f(I):(I.close(),yield function Lc(){const v=indexedDB.deleteDatabase(Zu);return new xa(v).toPromise()}(),f(yield ka()))}))})}function eh(v,f,p){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,T.A)(function*(v,f,p){const I=xl(v,!0).put({[Zd]:f,value:p});return new xa(I).toPromise()})).apply(this,arguments)}function du(){return(du=(0,T.A)(function*(v,f){const p=xl(v,!1).get(f),I=yield new xa(p).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function th(v,f){const p=xl(v,!0).delete(f);return new xa(p).toPromise()}const uc=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,T.A)(function*(){return p.db||(p.db=yield ka()),p.db})()}_withRetries(p){var I=this;return(0,T.A)(function*(){let L=0;for(;;)try{const X=yield I._openDb();return yield p(X)}catch(X){if(L++>3)throw X;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,T.A)(function*(){return un()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,T.A)(function*(){p.receiver=_s._getInstance(function uu(){return un()?self:null}()),p.receiver._subscribe("keyChanged",function(){var I=(0,T.A)(function*(L,X){return{keyProcessed:(yield p._poll()).includes(X.key)}});return function(L,X){return I.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var I=(0,T.A)(function*(L,X){return["keyChanged"]});return function(L,X){return I.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,T.A)(function*(){var I,L;if(p.activeServiceWorker=yield function zs(){return cc.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new H_(p.activeServiceWorker);const X=yield p.sender._send("ping",{},800);X&&null!==(I=X[0])&&void 0!==I&&I.fulfilled&&null!==(L=X[0])&&void 0!==L&&L.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var I=this;return(0,T.A)(function*(){if(I.sender&&I.activeServiceWorker&&function Fc(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:p},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,T.A)(function*(){try{if(!indexedDB)return!1;const p=yield ka();return yield eh(p,fo,"1"),yield th(p,fo),!0}catch{}return!1})()}_withPendingWrite(p){var I=this;return(0,T.A)(function*(){I.pendingWrites++;try{yield p()}finally{I.pendingWrites--}})()}_set(p,I){var L=this;return(0,T.A)(function*(){return L._withPendingWrite((0,T.A)(function*(){return yield L._withRetries(X=>eh(X,p,I)),L.localCache[p]=I,L.notifyServiceWorker(p)}))})()}_get(p){var I=this;return(0,T.A)(function*(){const L=yield I._withRetries(X=>function mf(v,f){return du.apply(this,arguments)}(X,p));return I.localCache[p]=L,L})()}_remove(p){var I=this;return(0,T.A)(function*(){return I._withPendingWrite((0,T.A)(function*(){return yield I._withRetries(L=>th(L,p)),delete I.localCache[p],I.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,T.A)(function*(){const I=yield p._withRetries(ye=>{const Le=xl(ye,!1).getAll();return new xa(Le).toPromise()});if(!I)return[];if(0!==p.pendingWrites)return[];const L=[],X=new Set;if(0!==I.length)for(const{fbase_key:ye,value:Le}of I)X.add(ye),JSON.stringify(p.localCache[ye])!==JSON.stringify(Le)&&(p.notifyListeners(ye,Le),L.push(ye));for(const ye of Object.keys(p.localCache))p.localCache[ye]&&!X.has(ye)&&(p.notifyListeners(ye,null),L.push(ye));return L})()}notifyListeners(p,I){this.localCache[p]=I;const L=this.listeners[p];if(L)for(const X of Array.from(L))X(I)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,T.A)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(I)}_removeListener(p,I){this.listeners[p]&&(this.listeners[p].delete(I),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Ai=1e12;class vf{constructor(f){this.auth=f,this.counter=Ai,this._widgets=new Map}render(f,p){const I=this.counter;return this._widgets.set(I,new Ef(f,this.auth.name,p||{})),this.counter++,I}reset(f){var p;const I=f||Ai;null===(p=this._widgets.get(I))||void 0===p||p.delete(),this._widgets.delete(I)}getResponse(f){var p;return(null===(p=this._widgets.get(f||Ai))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,T.A)(function*(){var I;return null===(I=p._widgets.get(f||Ai))||void 0===I||I.execute(),""})()}}class Ef{constructor(f,p,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const L="string"==typeof f?document.getElementById(f):f;_e(L,"argument-error",{appName:p}),this.container=L,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function w(v){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)f.push(p.charAt(Math.floor(62*Math.random())));return f.join("")}(50);const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const O=Vs("rcb"),A=new We(3e4,6e4);class N{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Yi().grecaptcha)||void 0===f||!f.render)}load(f,p=""){return _e(function j(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(p),f,"argument-error"),this.shouldResolveImmediately(p)&&Wn(Yi().grecaptcha)?Promise.resolve(Yi().grecaptcha):new Promise((I,L)=>{const X=Yi().setTimeout(()=>{L(_t(f,"network-request-failed"))},A.get());Yi()[O]=()=>{Yi().clearTimeout(X),delete Yi()[O];const Le=Yi().grecaptcha;if(!Le||!Wn(Le))return void L(_t(f,"internal-error"));const pt=Le.render;Le.render=(Jt,dn)=>{const pn=pt(Jt,dn);return this.counter++,pn},this.hostLanguage=p,I(Le)},Ko(`${function Ca(){return hs.recaptchaV2Script}()}?${(0,ce.Am)({onload:O,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(X),L(_t(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var p;return!(null===(p=Yi().grecaptcha)||void 0===p||!p.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Z{load(f){return(0,T.A)(function*(){return new vf(f)})()}clearedOneInstance(){}}const ue="recaptcha",Oe={theme:"light",type:"image"};class Se{constructor(f,p,I=Object.assign({},Oe)){this.parameters=I,this.type=ue,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qn(f),this.isInvisible="invisible"===this.parameters.size,_e(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const L="string"==typeof p?document.getElementById(p):p;_e(L,this.auth,"argument-error"),this.container=L,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Z:new N,this.validateStartingState()}verify(){var f=this;return(0,T.A)(function*(){f.assertNotDestroyed();const p=yield f.render(),I=f.getAssertedRecaptcha();return I.getResponse(p)||new Promise(X=>{const ye=Le=>{Le&&(f.tokenChangeListeners.delete(ye),X(Le))};f.tokenChangeListeners.add(ye),f.isInvisible&&I.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){_e(!this.parameters.sitekey,this.auth,"argument-error"),_e(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_e(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(I=>I(p)),"function"==typeof f)f(p);else if("string"==typeof f){const I=Yi()[f];"function"==typeof I&&I(p)}}}assertNotDestroyed(){_e(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,T.A)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const I=document.createElement("div");p.appendChild(I),p=I}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,T.A)(function*(){_e(zn()&&!un(),f.auth,"internal-error"),yield function Rt(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function yo(v){return gr.apply(this,arguments)}(f.auth);_e(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return _e(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class En{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=fi._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function jr(){return(jr=(0,T.A)(function*(v,f,p){if((0,m._isFirebaseServerApp)(v.app))return Promise.reject(At(v));const I=qn(v),L=yield Rs(I,f,(0,ce.Ku)(p));return new En(L,X=>R(I,X))})).apply(this,arguments)}function Hi(){return(Hi=(0,T.A)(function*(v,f,p){const I=(0,ce.Ku)(v);yield Fr(!1,I,"phone");const L=yield Rs(I.auth,f,(0,ce.Ku)(p));return new En(L,X=>he(I,X))})).apply(this,arguments)}function ys(){return(ys=(0,T.A)(function*(v,f,p){const I=(0,ce.Ku)(v);if((0,m._isFirebaseServerApp)(I.auth.app))return Promise.reject(At(I.auth));const L=yield Rs(I.auth,f,(0,ce.Ku)(p));return new En(L,X=>An(I,X))})).apply(this,arguments)}function Rs(v,f,p){return rh.apply(this,arguments)}function rh(){return rh=(0,T.A)(function*(v,f,p){var I;const L=yield p.verify();try{let X;if(_e("string"==typeof L,v,"argument-error"),_e(p.type===ue,v,"argument-error"),X="string"==typeof f?{phoneNumber:f}:f,"session"in X){const ye=X.session;if("phoneNumber"in X)return _e("enroll"===ye.type,v,"internal-error"),(yield function gf(v,f){return we(v,"POST","/v2/accounts/mfaEnrollment:start",Ze(v,f))}(v,{idToken:ye.credential,phoneEnrollmentInfo:{phoneNumber:X.phoneNumber,recaptchaToken:L}})).phoneSessionInfo.sessionInfo;{_e("signin"===ye.type,v,"internal-error");const Le=(null===(I=X.multiFactorHint)||void 0===I?void 0:I.uid)||X.multiFactorUid;return _e(Le,v,"missing-multi-factor-info"),(yield function yf(v,f){return we(v,"POST","/v2/accounts/mfaSignIn:start",Ze(v,f))}(v,{mfaPendingCredential:ye.credential,mfaEnrollmentId:Le,phoneSignInInfo:{recaptchaToken:L}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ye}=yield function Zo(v,f){return Ni.apply(this,arguments)}(v,{phoneNumber:X.phoneNumber,recaptchaToken:L});return ye}}finally{p._reset()}}),rh.apply(this,arguments)}function Cf(){return(Cf=(0,T.A)(function*(v,f){const p=(0,ce.Ku)(v);if((0,m._isFirebaseServerApp)(p.auth.app))return Promise.reject(At(p.auth));yield In(p,f)})).apply(this,arguments)}let Uc=(()=>{class v{constructor(p){this.providerId=v.PROVIDER_ID,this.auth=qn(p)}verifyPhoneNumber(p,I){return Rs(this.auth,p,(0,ce.Ku)(I))}static credential(p,I){return fi._fromVerification(p,I)}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:I,temporaryProof:L}=p;return I&&L?fi._fromTokenResponse(I,L):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ed(v,f){return f?kn(f):(_e(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Fa extends Ta{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return ji(f,this._buildIdpRequest())}_linkToIdToken(f,p){return ji(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return ji(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function td(v){return H(v.auth,new Fa(v),v.bypassAuthState)}function If(v){const{auth:f,user:p}=v;return _e(p,f,"internal-error"),Ti(p,new Fa(v),v.bypassAuthState)}function z_(v){return ih.apply(this,arguments)}function ih(){return(ih=(0,T.A)(function*(v){const{auth:f,user:p}=v;return _e(p,f,"internal-error"),In(p,new Fa(v),v.bypassAuthState)})).apply(this,arguments)}class vs{constructor(f,p,I,L,X=!1){this.auth=f,this.resolver=I,this.user=L,this.bypassAuthState=X,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,T.A)(function*(I,L){f.pendingPromise={resolve:I,reject:L};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(X){f.reject(X)}});return function(I,L){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,T.A)(function*(){const{urlResponse:I,sessionId:L,postBody:X,tenantId:ye,error:Le,type:pt}=f;if(Le)return void p.reject(Le);const Jt={auth:p.auth,requestUri:I,sessionId:L,tenantId:ye||void 0,postBody:X||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(pt)(Jt))}catch(dn){p.reject(dn)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return td;case"linkViaPopup":case"linkViaRedirect":return z_;case"reauthViaPopup":case"reauthViaRedirect":return If;default:It(this.auth,"internal-error")}}resolve(f){Nn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Nn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const W_=new We(2e3,1e4);function fu(){return(fu=(0,T.A)(function*(v,f,p){if((0,m._isFirebaseServerApp)(v.app))return Promise.reject(_t(v,"operation-not-supported-in-this-environment"));const I=qn(v);Gt(v,f,xi);const L=ed(I,p);return new La(I,"signInViaPopup",f,L).executeNotNull()})).apply(this,arguments)}function nl(){return(nl=(0,T.A)(function*(v,f,p){const I=(0,ce.Ku)(v);if((0,m._isFirebaseServerApp)(I.auth.app))return Promise.reject(_t(I.auth,"operation-not-supported-in-this-environment"));Gt(I.auth,f,xi);const L=ed(I.auth,p);return new La(I.auth,"reauthViaPopup",f,L,I).executeNotNull()})).apply(this,arguments)}function po(){return(po=(0,T.A)(function*(v,f,p){const I=(0,ce.Ku)(v);Gt(I.auth,f,xi);const L=ed(I.auth,p);return new La(I.auth,"linkViaPopup",f,L,I).executeNotNull()})).apply(this,arguments)}let La=(()=>{class v extends vs{constructor(p,I,L,X,ye){super(p,I,X,ye),this.provider=L,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var p=this;return(0,T.A)(function*(){const I=yield p.execute();return _e(I,p.auth,"internal-error"),I})()}onExecution(){var p=this;return(0,T.A)(function*(){Nn(1===p.filter.length,"Popup operations only handle one event");const I=Gs();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],I),p.authWindow.associatedEvent=I,p.resolver._originValidation(p.auth).catch(L=>{p.reject(L)}),p.resolver._isIframeWebStorageSupported(p.auth,L=>{L||p.reject(_t(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_t(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const p=()=>{var I,L;this.pollId=null!==(L=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==L&&L.closed?window.setTimeout(()=>{this.pollId=null,this.reject(_t(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,W_.get())};p()}}return v.currentPopupAction=null,v})();const Tf="pendingRedirect",pu=new Map;class gg extends vs{constructor(f,p,I=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,I),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,T.A)(function*(){let I=pu.get(p.auth._key());if(!I){try{const X=(yield function mg(v,f){return hc.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;I=()=>Promise.resolve(X)}catch(L){I=()=>Promise.reject(L)}pu.set(p.auth._key(),I)}return p.bypassAuthState||pu.set(p.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,I=this;return(0,T.A)(function*(){if("signInViaRedirect"===f.type)return p().call(I,f);if("unknown"!==f.type){if(f.eventId){const L=yield I.auth._redirectUserForId(f.eventId);if(L)return I.user=L,p().call(I,f);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,T.A)(function*(){})()}cleanUp(){}}function hc(){return(hc=(0,T.A)(function*(v,f){const p=yg(f),I=jc(v);if(!(yield I._isAvailable()))return!1;const L="true"===(yield I._get(p));return yield I._remove(p),L})).apply(this,arguments)}function _g(v,f){return bf.apply(this,arguments)}function bf(){return(bf=(0,T.A)(function*(v,f){return jc(v)._set(yg(f),"true")})).apply(this,arguments)}function Bc(v,f){pu.set(v._key(),f)}function jc(v){return kn(v._redirectPersistence)}function yg(v){return $t(Tf,v.config.apiKey,v.name)}function Fl(v,f,p){return function nd(v,f,p){return Af.apply(this,arguments)}(v,f,p)}function Af(){return(Af=(0,T.A)(function*(v,f,p){if((0,m._isFirebaseServerApp)(v.app))return Promise.reject(At(v));const I=qn(v);Gt(v,f,xi),yield I._initializationPromise;const L=ed(I,p);return yield _g(L,I),L._openRedirect(I,f,"signInViaRedirect")})).apply(this,arguments)}function WE(v,f,p){return function Ao(v,f,p){return Pf.apply(this,arguments)}(v,f,p)}function Pf(){return(Pf=(0,T.A)(function*(v,f,p){const I=(0,ce.Ku)(v);if(Gt(I.auth,f,xi),(0,m._isFirebaseServerApp)(I.auth.app))return Promise.reject(At(I.auth));yield I.auth._initializationPromise;const L=ed(I.auth,p);yield _g(L,I.auth);const X=yield Sf(I);return L._openRedirect(I.auth,f,"reauthViaRedirect",X)})).apply(this,arguments)}function oh(v,f,p){return function rl(v,f,p){return Ll.apply(this,arguments)}(v,f,p)}function Ll(){return(Ll=(0,T.A)(function*(v,f,p){const I=(0,ce.Ku)(v);Gt(I.auth,f,xi),yield I.auth._initializationPromise;const L=ed(I.auth,p);yield Fr(!1,I,f.providerId),yield _g(L,I.auth);const X=yield Sf(I);return L._openRedirect(I.auth,f,"linkViaRedirect",X)})).apply(this,arguments)}function Df(){return(Df=(0,T.A)(function*(v,f){return yield qn(v)._initializationPromise,sh(v,f,!1)})).apply(this,arguments)}function sh(v,f){return vg.apply(this,arguments)}function vg(){return(vg=(0,T.A)(function*(v,f,p=!1){if((0,m._isFirebaseServerApp)(v.app))return Promise.reject(At(v));const I=qn(v),L=ed(I,f),ye=yield new gg(I,L,p).execute();return ye&&!p&&(delete ye.user._redirectEventId,yield I._persistUserIfCurrent(ye.user),yield I._setRedirectUser(null,f)),ye})).apply(this,arguments)}function Sf(v){return gu.apply(this,arguments)}function gu(){return(gu=(0,T.A)(function*(v){const f=Gs(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class li{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(f,I)&&(p=!0,this.sendToConsumer(f,I),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Gi(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rn(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var I;if(f.error&&!Rn(f)){const L=(null===(I=f.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";p.onError(_t(this.auth,L))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const I=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&I}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lt(f))}saveEventToCache(f){this.cachedEventUids.add(Lt(f)),this.lastProcessedEventTime=Date.now()}}function Lt(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function Rn({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function Va(v){return io.apply(this,arguments)}function io(){return(io=(0,T.A)(function*(v,f={}){return we(v,"GET","/v1/projects",f)})).apply(this,arguments)}const Uo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rd=/^https?/;function ui(){return(ui=(0,T.A)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield Va(v);for(const p of f)try{if(Ws(p))return}catch{}It(v,"unauthorized-domain")})).apply(this,arguments)}function Ws(v){const f=Kn(),{protocol:p,hostname:I}=new URL(f);if(v.startsWith("chrome-extension://")){const ye=new URL(v);return""===ye.hostname&&""===I?"chrome-extension:"===p&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&ye.hostname===I}if(!rd.test(p))return!1;if(Uo.test(v))return I===v;const L=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+L+"|"+L+")$","i").test(I)}const Bn=new We(3e4,6e4);function mu(){const v=Yi().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let p=0;p<v.CP.length;p++)v.CP[p]=null}let ki=null;const Vl=new We(5e3,15e3),fc="__/auth/iframe",Ul="emulator/auth/iframe",ua={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_u=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pc(v){const f=v.config;_e(f.authDomain,v,"auth-domain-config-required");const p=f.emulator?Qe(f,Ul):`https://${v.config.authDomain}/${fc}`,I={apiKey:f.apiKey,appName:v.name,v:m.SDK_VERSION},L=_u.get(v.config.apiHost);L&&(I.eid=L);const X=v._getFrameworks();return X.length&&(I.fw=X.join(",")),`${p}?${(0,ce.Am)(I).slice(1)}`}function gc(){return gc=(0,T.A)(function*(v){const f=yield function Pi(v){return ki=ki||function Eg(v){return new Promise((f,p)=>{var I,L,X;function ye(){mu(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{mu(),p(_t(v,"network-request-failed"))},timeout:Bn.get()})}if(null!==(L=null===(I=Yi().gapi)||void 0===I?void 0:I.iframes)&&void 0!==L&&L.Iframe)f(gapi.iframes.getContext());else{if(null===(X=Yi().gapi)||void 0===X||!X.load){const Le=Vs("iframefcb");return Yi()[Le]=()=>{gapi.load?ye():p(_t(v,"network-request-failed"))},Ko(`${function Ia(){return hs.gapiScript}()}?onload=${Le}`).catch(pt=>p(pt))}ye()}}).catch(f=>{throw ki=null,f})}(v),ki}(v),p=Yi().gapi;return _e(p,v,"internal-error"),f.open({where:document.body,url:pc(v),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ua,dontclear:!0},I=>new Promise(function(){var L=(0,T.A)(function*(X,ye){yield I.restyle({setHideOnLeave:!1});const Le=_t(v,"network-request-failed"),pt=Yi().setTimeout(()=>{ye(Le)},Vl.get());function Jt(){Yi().clearTimeout(pt),X(I)}I.ping(Jt).then(Jt,()=>{ye(Le)})});return function(X,ye){return L.apply(this,arguments)}}()))}),gc.apply(this,arguments)}const Sn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class $c{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Bo="__/auth/handler",Po="emulator/auth/handler",Rf=encodeURIComponent("fac");function mc(v,f,p,I,L,X){return yu.apply(this,arguments)}function yu(){return(yu=(0,T.A)(function*(v,f,p,I,L,X){_e(v.config.authDomain,v,"auth-domain-config-required"),_e(v.config.apiKey,v,"invalid-api-key");const ye={apiKey:v.config.apiKey,appName:v.name,authType:p,redirectUrl:I,v:m.SDK_VERSION,eventId:L};if(f instanceof xi){f.setDefaultLanguage(v.languageCode),ye.providerId=f.providerId||"",(0,ce.Im)(f.getCustomParameters())||(ye.customParameters=JSON.stringify(f.getCustomParameters()));for(const[dn,pn]of Object.entries(X||{}))ye[dn]=pn}if(f instanceof ni){const dn=f.getScopes().filter(pn=>""!==pn);dn.length>0&&(ye.scopes=dn.join(","))}v.tenantId&&(ye.tid=v.tenantId);const Le=ye;for(const dn of Object.keys(Le))void 0===Le[dn]&&delete Le[dn];const pt=yield v._getAppCheckToken(),Jt=pt?`#${Rf}=${encodeURIComponent(pt)}`:"";return`${function ol({config:v}){return v.emulator?Qe(v,Po):`https://${v.authDomain}/${Bo}`}(v)}?${(0,ce.Am)(Le).slice(1)}${Jt}`})).apply(this,arguments)}const Hc="webStorageSupport",id=class vu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nl,this._completeRedirectFn=sh,this._overrideRedirectResult=Bc}_openPopup(f,p,I,L){var X=this;return(0,T.A)(function*(){var ye;Nn(null===(ye=X.eventManagers[f._key()])||void 0===ye?void 0:ye.manager,"_initialize() not called before _openPopup()");const Le=yield mc(f,p,I,Kn(),L);return function oo(v,f,p,I=500,L=600){const X=Math.max((window.screen.availHeight-L)/2,0).toString(),ye=Math.max((window.screen.availWidth-I)/2,0).toString();let Le="";const pt=Object.assign(Object.assign({},Sn),{width:I.toString(),height:L.toString(),top:X,left:ye}),Jt=(0,ce.ZQ)().toLowerCase();p&&(Le=Ht(Jt)?"_blank":p),vo(Jt)&&(f=f||"http://localhost",pt.scrollbars="yes");const dn=Object.entries(pt).reduce((gi,[fa,dd])=>`${gi}${fa}=${dd},`,"");if(function be(v=(0,ce.ZQ)()){var f;return Oi(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Jt)&&"_self"!==Le)return function lh(v,f){const p=document.createElement("a");p.href=v,p.target=f;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(I)}(f||"",Le),new $c(null);const pn=window.open(f||"",Le,dn);_e(pn,v,"popup-blocked");try{pn.focus()}catch{}return new $c(pn)}(f,Le,Gs())})()}_openRedirect(f,p,I,L){var X=this;return(0,T.A)(function*(){return yield X._originValidation(f),function Kr(v){Yi().location.href=v}(yield mc(f,p,I,Kn(),L)),new Promise(()=>{})})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:L,promise:X}=this.eventManagers[p];return L?Promise.resolve(L):(Nn(X,"If manager is not set, promise should be"),X)}const I=this.initAndGetManager(f);return this.eventManagers[p]={promise:I},I.catch(()=>{delete this.eventManagers[p]}),I}initAndGetManager(f){var p=this;return(0,T.A)(function*(){const I=yield function Bl(v){return gc.apply(this,arguments)}(f),L=new li(f);return I.register("authEvent",X=>(_e(X?.authEvent,f,"invalid-auth-event"),{status:L.onEvent(X.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:L},p.iframes[f._key()]=I,L})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(Hc,{type:Hc},L=>{var X;const ye=null===(X=L?.[0])||void 0===X?void 0:X[Hc];void 0!==ye&&p(!!ye),It(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function ci(v){return ui.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return Wt()||_r()||Oi()}};class ch{constructor(f){this.factorId=f}_process(f,p,I){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,I);case"signin":return this._finalizeSignIn(f,p.credential);default:return Ut("unexpected MultiFactorSessionType")}}}class uh extends ch{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new uh(f)}_finalizeEnroll(f,p,I){return function dg(v,f){return we(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ze(v,f))}(f,{idToken:p,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function nh(v,f){return we(v,"POST","/v2/accounts/mfaSignIn:finalize",Ze(v,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let KE=(()=>{class v{constructor(){}static assertion(p){return uh._fromCredential(p)}}return v.FACTOR_ID="phone",v})();var wg="@firebase/auth";class bw{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,T.A)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(I=>{f(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);p&&(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Eu(){return window}(0,ce.XA)("authIdTokenMaxAge"),function Zi(v){hs=v}({loadJS:v=>new Promise((f,p)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=f,I.onerror=L=>{const X=_t("internal-error");X.customData=L,p(X)},I.type="text/javascript",I.charset="UTF-8",function X_(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(I)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Pw(v){(0,m._registerComponent)(new je.uA("auth",(f,{options:p})=>{const I=f.getProvider("app").getImmediate(),L=f.getProvider("heartbeat"),X=f.getProvider("app-check-internal"),{apiKey:ye,authDomain:Le}=I.options;_e(ye&&!ye.includes(":"),"invalid-api-key",{appName:I.name});const pt={apiKey:ye,authDomain:Le,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cn(v)},Jt=new Ls(I,L,X,pt);return function Us(v,f){const p=f?.persistence||[],I=(Array.isArray(p)?p:[p]).map(kn);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(I,f?.popupRedirectResolver)}(Jt,p),Jt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,I)=>{f.getProvider("auth-internal").initialize()})),(0,m._registerComponent)(new je.uA("auth-internal",f=>{const p=qn(f.getProvider("auth").getImmediate());return new bw(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,m.registerVersion)(wg,"1.7.6",function Aw(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(v)),(0,m.registerVersion)(wg,"1.7.6","esm2017")}("Browser");function od(){return od=(0,T.A)(function*(v,f,p){var I;const{BuildInfo:L}=Eu();Nn(f.sessionId,"AuthEvent did not contain a session ID");const X=yield function bg(v){return hh.apply(this,arguments)}(f.sessionId),ye={};return Oi()?ye.ibi=L.packageName:Eo()?ye.apn=L.packageName:It(v,"operation-not-supported-in-this-environment"),L.displayName&&(ye.appDisplayName=L.displayName),ye.sessionId=X,mc(v,p,f.type,void 0,null!==(I=f.eventId)&&void 0!==I?I:void 0,ye)}),od.apply(this,arguments)}function sd(){return(sd=(0,T.A)(function*(v){const{BuildInfo:f}=Eu(),p={};Oi()?p.iosBundleId=f.packageName:Eo()?p.androidPackageName=f.packageName:It(v,"operation-not-supported-in-this-environment"),yield Va(v,p)})).apply(this,arguments)}function kf(){return(kf=(0,T.A)(function*(v,f,p){const{cordova:I}=Eu();let L=()=>{};try{yield new Promise((X,ye)=>{let Le=null;function pt(){var pn;X();const gi=null===(pn=I.plugins.browsertab)||void 0===pn?void 0:pn.close;"function"==typeof gi&&gi(),"function"==typeof p?.close&&p.close()}function Jt(){Le||(Le=window.setTimeout(()=>{ye(_t(v,"redirect-cancelled-by-user"))},2e3))}function dn(){"visible"===document?.visibilityState&&Jt()}f.addPassiveListener(pt),document.addEventListener("resume",Jt,!1),Eo()&&document.addEventListener("visibilitychange",dn,!1),L=()=>{f.removePassiveListener(pt),document.removeEventListener("resume",Jt,!1),document.removeEventListener("visibilitychange",dn,!1),Le&&window.clearTimeout(Le)}})}finally{L()}})).apply(this,arguments)}function hh(){return(hh=(0,T.A)(function*(v){const f=function Ag(v){if(Nn(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const f=new ArrayBuffer(v.length),p=new Uint8Array(f);for(let I=0;I<v.length;I++)p[I]=v.charCodeAt(I);return p}(v),p=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(p)).map(L=>L.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class ty extends li{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInitialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInitialized(),this.passiveListeners.forEach(p=>p(f)),super.onEvent(f)}initialized(){var f=this;return(0,T.A)(function*(){yield f.initPromise})()}}function Sg(v){return vr.apply(this,arguments)}function vr(){return(vr=(0,T.A)(function*(v){const f=yield go()._get(Ff(v));return f&&(yield go()._remove(Ff(v))),f})).apply(this,arguments)}function Cu(){const v=[];for(let p=0;p<20;p++){const I=Math.floor(62*Math.random());v.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(I))}return v.join("")}function go(){return kn(kc)}function Ff(v){return $t("authEvent",v.config.apiKey,v.name)}function Es(v){if(!v?.includes("?"))return{};const[f,...p]=v.split("?");return(0,ce.I9)(p.join("?"))}const Rg=class Og{constructor(){this._redirectPersistence=Nl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=sh,this._overrideRedirectResult=Bc}_initialize(f){var p=this;return(0,T.A)(function*(){const I=f._key();let L=p.eventManagers.get(I);return L||(L=new ty(f),p.eventManagers.set(I,L),p.attachCallbackListeners(f,L)),L})()}_openPopup(f){It(f,"operation-not-supported-in-this-environment")}_openRedirect(f,p,I,L){var X=this;return(0,T.A)(function*(){!function YE(v){var f,p,I,L,X,ye,Le,pt,Jt,dn;const pn=Eu();_e("function"==typeof(null===(f=pn?.universalLinks)||void 0===f?void 0:f.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),_e(typeof(null===(p=pn?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),_e("function"==typeof(null===(X=null===(L=null===(I=pn?.cordova)||void 0===I?void 0:I.plugins)||void 0===L?void 0:L.browsertab)||void 0===X?void 0:X.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_e("function"==typeof(null===(pt=null===(Le=null===(ye=pn?.cordova)||void 0===ye?void 0:ye.plugins)||void 0===Le?void 0:Le.browsertab)||void 0===pt?void 0:pt.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_e("function"==typeof(null===(dn=null===(Jt=pn?.cordova)||void 0===Jt?void 0:Jt.InAppBrowser)||void 0===dn?void 0:dn.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const ye=yield X._initialize(f);yield ye.initialized(),ye.resetRedirect(),function K_(){pu.clear()}(),yield X._originValidation(f);const Le=function jl(v,f,p=null){return{type:f,eventId:p,urlResponse:null,sessionId:Cu(),postBody:null,tenantId:v.tenantId,error:_t(v,"no-auth-event")}}(f,I,L);yield function Dg(v,f){return go()._set(Ff(v),f)}(f,Le);const pt=yield function Z_(v,f,p){return od.apply(this,arguments)}(f,Le,p),Jt=yield function dh(v){const{cordova:f}=Eu();return new Promise(p=>{f.plugins.browsertab.isAvailable(I=>{let L=null;I?f.plugins.browsertab.openUrl(v):L=f.InAppBrowser.open(v,function Je(v=(0,ce.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),p(L)})})}(pt);return function ey(v,f,p){return kf.apply(this,arguments)}(f,ye,Jt)})()}_isIframeWebStorageSupported(f,p){throw new Error("Method not implemented.")}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function xf(v){return sd.apply(this,arguments)}(f)),this.originValidationPromises[p]}attachCallbackListeners(f,p){const{universalLinks:I,handleOpenURL:L,BuildInfo:X}=Eu(),ye=setTimeout((0,T.A)(function*(){yield Sg(f),p.onEvent(Ks())}),500),Le=function(){var dn=(0,T.A)(function*(pn){clearTimeout(ye);const gi=yield Sg(f);let fa=null;gi&&pn?.url&&(fa=function Gc(v,f){var p,I;const L=function Iu(v){const f=Es(v),p=f.link?decodeURIComponent(f.link):void 0,I=Es(p).link,L=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Es(L).link||L||I||p||v}(f);if(L.includes("/__/auth/callback")){const X=Es(L),ye=X.firebaseError?function ad(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(X.firebaseError)):null,Le=null===(I=null===(p=ye?.code)||void 0===p?void 0:p.split("auth/"))||void 0===I?void 0:I[1],pt=Le?_t(Le):null;return pt?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:pt,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:L,postBody:null}}return null}(gi,pn.url)),p.onEvent(fa||Ks())});return function(gi){return dn.apply(this,arguments)}}();typeof I<"u"&&"function"==typeof I.subscribe&&I.subscribe(null,Le);const pt=L,Jt=`${X.packageName.toLowerCase()}://`;Eu().handleOpenURL=function(){var dn=(0,T.A)(function*(pn){if(pn.toLowerCase().startsWith(Jt)&&Le({url:pn}),"function"==typeof pt)try{pt(pn)}catch(gi){console.error(gi)}});return function(pn){return dn.apply(this,arguments)}}()}};function Ks(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_t("no-auth-event")}}function $l(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function wu(v=(0,ce.ZQ)()){return!("file:"!==$l()&&"ionic:"!==$l()&&"capacitor:"!==$l()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Tu(){try{const v=self.localStorage,f=Gs();if(v)return v.setItem(f,"1"),v.removeItem(f),!function gh(v=(0,ce.ZQ)()){return function zc(){return(0,ce.lT)()&&11===document?.documentMode}()||function Zn(v=(0,ce.ZQ)()){return/Edge\/\d+/.test(v)}(v)}()||(0,ce.zW)()}catch{return cd()&&(0,ce.zW)()}return!1}function cd(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ny(){return(function ld(){return"http:"===$l()||"https:"===$l()}()||(0,ce.sr)()||wu())&&!function ph(){return(0,ce.lV)()||(0,ce.Ll)()}()&&Tu()&&!cd()}function ry(){return wu()&&typeof document<"u"}function kg(){return(kg=(0,T.A)(function*(){return!!ry()&&new Promise(v=>{const f=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),v(!0)})})})).apply(this,arguments)}const Xi={LOCAL:"local",NONE:"none",SESSION:"session"},yc=_e,Lf="persistence";function Lg(v){return Vg.apply(this,arguments)}function Vg(){return(Vg=(0,T.A)(function*(v){yield v._initializationPromise;const f=yr(),p=$t(Lf,v.config.apiKey,v.name);f&&f.setItem(p,v._getPersistence())})).apply(this,arguments)}function yr(){var v;try{return(null===(v=function Fg(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const oy=_e;class da{constructor(){this.browserResolver=kn(id),this.cordovaResolver=kn(Rg),this.underlyingResolver=null,this._redirectPersistence=Nl,this._completeRedirectFn=sh,this._overrideRedirectResult=Bc}_initialize(f){var p=this;return(0,T.A)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,p,I,L){var X=this;return(0,T.A)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openPopup(f,p,I,L)})()}_openRedirect(f,p,I,L){var X=this;return(0,T.A)(function*(){return yield X.selectUnderlyingResolver(),X.assertedUnderlyingResolver._openRedirect(f,p,I,L)})()}_isIframeWebStorageSupported(f,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,p)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return ry()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return oy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,T.A)(function*(){if(f.underlyingResolver)return;const p=yield function Cs(){return kg.apply(this,arguments)}();f.underlyingResolver=p?f.cordovaResolver:f.browserResolver})()}}function $r(v){return v.unwrap()}function Au(v){return vc(v)}function vc(v){const{_tokenResponse:f}=v instanceof ce.g?v.customData:v;if(!f)return null;if(!(v instanceof ce.g)&&"temporaryProof"in f&&"phoneNumber"in f)return Uc.credentialFromResult(v);const p=f.providerId;if(!p||p===ht.PASSWORD)return null;let I;switch(p){case ht.GOOGLE:I=uo;break;case ht.FACEBOOK:I=Ss;break;case ht.GITHUB:I=gs;break;case ht.TWITTER:I=Q;break;default:const{oauthIdToken:L,oauthAccessToken:X,oauthTokenSecret:ye,pendingToken:Le,nonce:pt}=f;return X||ye||L||Le?Le?p.startsWith("saml.")?b._create(p,Le):wi._fromParams({providerId:p,signInMethod:p,pendingToken:Le,idToken:L,accessToken:X}):new ri(p).credential({idToken:L,accessToken:X,rawNonce:pt}):null}return v instanceof ce.g?I.credentialFromError(v):I.credentialFromResult(v)}function $o(v,f){return f.catch(p=>{throw p instanceof ce.g&&function ha(v,f){var p;const I=null===(p=f.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===f?.code)f.resolver=new sy(v,function el(v,f){var p;const I=(0,ce.Ku)(v),L=f;return _e(f.customData.operationType,I,"argument-error"),_e(null===(p=L.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,I,"argument-error"),Qu._fromError(I,L)}(v,f));else if(I){const L=vc(f),X=f;L&&(X.credential=L,X.tenantId=I.tenantId||void 0,X.email=I.email||void 0,X.phoneNumber=I.phoneNumber||void 0)}}(v,p),p}).then(p=>{const L=p.user;return{operationType:p.operationType,credential:Au(p),additionalUserInfo:Pr(p),user:ss.getOrCreate(L)}})}function Vf(v,f){return Uf.apply(this,arguments)}function Uf(){return(Uf=(0,T.A)(function*(v,f){const p=yield f;return{verificationId:p.verificationId,confirm:I=>$o(v,p.confirm(I))}})).apply(this,arguments)}class sy{constructor(f,p){this.resolver=p,this.auth=function bu(v){return v.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return $o($r(this.auth),this.resolver.resolveSignIn(f))}}class ss{constructor(f){this._delegate=f,this.multiFactor=function Ml(v){const f=(0,ce.Ku)(v);return tl.has(f)||tl.set(f,Xu._fromUser(f)),tl.get(f)}(f)}static getOrCreate(f){return ss.USER_MAP.has(f)||ss.USER_MAP.set(f,new ss(f)),ss.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var p=this;return(0,T.A)(function*(){return $o(p.auth,he(p._delegate,f))})()}linkWithPhoneNumber(f,p){var I=this;return(0,T.A)(function*(){return Vf(I.auth,function la(v,f,p){return Hi.apply(this,arguments)}(I._delegate,f,p))})()}linkWithPopup(f){var p=this;return(0,T.A)(function*(){return $o(p.auth,function kl(v,f,p){return po.apply(this,arguments)}(p._delegate,f,da))})()}linkWithRedirect(f){var p=this;return(0,T.A)(function*(){return yield Lg(qn(p.auth)),oh(p._delegate,f,da)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var p=this;return(0,T.A)(function*(){return $o(p.auth,An(p._delegate,f))})()}reauthenticateWithPhoneNumber(f,p){return Vf(this.auth,function ca(v,f,p){return ys.apply(this,arguments)}(this._delegate,f,p))}reauthenticateWithPopup(f){return $o(this.auth,function wf(v,f,p){return nl.apply(this,arguments)}(this._delegate,f,da))}reauthenticateWithRedirect(f){var p=this;return(0,T.A)(function*(){return yield Lg(qn(p.auth)),WE(p._delegate,f,da)})()}sendEmailVerification(f){return function ac(v,f){return Ma.apply(this,arguments)}(this._delegate,f)}unlink(f){var p=this;return(0,T.A)(function*(){return yield function bn(v,f){return hn.apply(this,arguments)}(p._delegate,f),p})()}updateEmail(f){return function Fo(v,f){const p=(0,ce.Ku)(v);return(0,m._isFirebaseServerApp)(p.auth.app)?Promise.reject(At(p.auth)):q(p,f,null)}(this._delegate,f)}updatePassword(f){return function D(v,f){return q((0,ce.Ku)(v),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function dc(v,f){return Cf.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function ms(v,f){return Xd.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,p){return function Un(v,f,p){return Ar.apply(this,arguments)}(this._delegate,f,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ss.USER_MAP=new WeakMap;const Pu=_e;let Ug=(()=>{class v{constructor(p,I){if(this.app=p,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:L}=p.options;Pu(L,"invalid-api-key",{appName:p.name}),Pu(L,"invalid-api-key",{appName:p.name});const X=typeof window<"u"?da:void 0;this._delegate=I.initialize({options:{persistence:Ec(L,p.name),popupRedirectResolver:X}}),this._delegate._updateErrorMap(zt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ss.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,I){!function ea(v,f,p){const I=qn(v);_e(I._canInitEmulator,I,"emulator-config-failed"),_e(/^https?:\/\//.test(f),I,"invalid-emulator-scheme");const L=!!p?.disableWarnings,X=bl(f),{host:ye,port:Le}=function Al(v){const f=bl(v),p=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!p)return{host:"",port:null};const I=p[2].split("@").pop()||"",L=/^(\[[^\]]+\])(:|$)/.exec(I);if(L){const X=L[1];return{host:X,port:wa(I.substr(X.length+1))}}{const[X,ye]=I.split(":");return{host:X,port:wa(ye)}}}(f);I.config.emulator={url:`${X}//${ye}${null===Le?"":`:${Le}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:ye,port:Le,protocol:X.replace(":",""),options:Object.freeze({disableWarnings:L})}),L||function Sc(){function v(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,p,I)}applyActionCode(p){return function xo(v,f){return vn.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return rs(this._delegate,p)}confirmPasswordReset(p,I){return function Oc(v,f,p){return pi.apply(this,arguments)}(this._delegate,p,I)}createUserWithEmailAndPassword(p,I){var L=this;return(0,T.A)(function*(){return $o(L._delegate,function $s(v,f,p){return Pl.apply(this,arguments)}(L._delegate,p,I))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function xc(v,f){return ko.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Za(v,f){const p=Io.parseLink(f);return"EMAIL_SIGNIN"===p?.operation}(0,p)}getRedirectResult(){var p=this;return(0,T.A)(function*(){Pu(ny(),p._delegate,"operation-not-supported-in-this-environment");const I=yield function q_(v,f){return Df.apply(this,arguments)}(p._delegate,da);return I?$o(p._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Ng(v,f){qn(v)._logFramework(f)}(this._delegate,p)}onAuthStateChanged(p,I,L){const{next:X,error:ye,complete:Le}=Ho(p,I,L);return this._delegate.onAuthStateChanged(X,ye,Le)}onIdTokenChanged(p,I,L){const{next:X,error:ye,complete:Le}=Ho(p,I,L);return this._delegate.onIdTokenChanged(X,ye,Le)}sendSignInLinkToEmail(p,I){return function pf(v,f,p){return Nc.apply(this,arguments)}(this._delegate,p,I)}sendPasswordResetEmail(p,I){return function br(v,f,p){return To.apply(this,arguments)}(this._delegate,p,I||void 0)}setPersistence(p){var I=this;return(0,T.A)(function*(){let L;switch(function iy(v,f){yc(Object.values(Xi).includes(f),v,"invalid-persistence-type"),(0,ce.lV)()?yc(f!==Xi.SESSION,v,"unsupported-persistence-type"):(0,ce.Ll)()?yc(f===Xi.NONE,v,"unsupported-persistence-type"):cd()?yc(f===Xi.NONE||f===Xi.LOCAL&&(0,ce.zW)(),v,"unsupported-persistence-type"):yc(f===Xi.NONE||Tu(),v,"unsupported-persistence-type")}(I._delegate,p),p){case Xi.SESSION:L=Nl;break;case Xi.LOCAL:L=(yield kn(uc)._isAvailable())?uc:kc;break;case Xi.NONE:L=On;break;default:return It("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(L)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return $o(this._delegate,function rt(v){return Qt.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return $o(this._delegate,R(this._delegate,p))}signInWithCustomToken(p){return $o(this._delegate,function rn(v,f){return jt.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,I){return $o(this._delegate,function sc(v,f,p){return(0,m._isFirebaseServerApp)(v.app)?Promise.reject(At(v)):R((0,ce.Ku)(v),ti.credential(f,p)).catch(function(){var I=(0,T.A)(function*(L){throw"auth/password-does-not-meet-requirements"===L.code&&ro(v),L});return function(L){return I.apply(this,arguments)}}())}(this._delegate,p,I))}signInWithEmailLink(p,I){return $o(this._delegate,function Qi(v,f,p){return Sa.apply(this,arguments)}(this._delegate,p,I))}signInWithPhoneNumber(p,I){return Vf(this._delegate,function _n(v,f,p){return jr.apply(this,arguments)}(this._delegate,p,I))}signInWithPopup(p){var I=this;return(0,T.A)(function*(){return Pu(ny(),I._delegate,"operation-not-supported-in-this-environment"),$o(I._delegate,function pg(v,f,p){return fu.apply(this,arguments)}(I._delegate,p,da))})()}signInWithRedirect(p){var I=this;return(0,T.A)(function*(){return Pu(ny(),I._delegate,"operation-not-supported-in-this-environment"),yield Lg(I._delegate),Fl(I._delegate,p,da)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Rc(v,f){return oc.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Xi,v})();function Ho(v,f,p){let I=v;"function"!=typeof v&&({next:I,error:f,complete:p}=v);const L=I;return{next:ye=>L(ye&&ss.getOrCreate(ye)),error:f,complete:p}}function Ec(v,f){const p=function ft(v,f){const p=yr();if(!p)return[];const I=$t(Lf,v,f);switch(p.getItem(I)){case Xi.NONE:return[On];case Xi.LOCAL:return[uc,Nl];case Xi.SESSION:return[Nl];default:return[]}}(v,f);if(typeof self<"u"&&!p.includes(uc)&&p.push(uc),typeof window<"u")for(const I of[kc,Nl])p.includes(I)||p.push(I);return p.includes(On)||p.push(On),p}class ud{constructor(){this.providerId="phone",this._delegate=new Uc($r(B.A.auth()))}static credential(f,p){return Uc.credential(f,p)}verifyPhoneNumber(f,p){return this._delegate.verifyPhoneNumber(f,p)}unwrap(){return this._delegate}}ud.PHONE_SIGN_IN_METHOD=Uc.PHONE_SIGN_IN_METHOD,ud.PROVIDER_ID=Uc.PROVIDER_ID;const sl=_e;class al{constructor(f,p,I=B.A.app()){var L;sl(null===(L=I.options)||void 0===L?void 0:L.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new Se(I.auth(),f,p),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Bf(v){v.INTERNAL.registerComponent(new je.uA("auth-compat",f=>{const p=f.getProvider("app-compat").getImmediate(),I=f.getProvider("auth");return new Ug(p,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ti,FacebookAuthProvider:Ss,GithubAuthProvider:gs,GoogleAuthProvider:uo,OAuthProvider:ri,SAMLAuthProvider:U,PhoneAuthProvider:ud,PhoneMultiFactorGenerator:KE,RecaptchaVerifier:al,TwitterAuthProvider:Q,Auth:Ug,AuthCredential:Ta,Error:ce.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.5.11")}(B.A)},467:(fn,ot,J)=>{function T(m,ce,De,Fe,je,Et,ht){try{var Ie=m[Et](ht),Ee=Ie.value}catch(Xe){return void De(Xe)}Ie.done?ce(Ee):Promise.resolve(Ee).then(Fe,je)}function B(m){return function(){var ce=this,De=arguments;return new Promise(function(Fe,je){var Et=m.apply(ce,De);function ht(Ee){T(Et,Fe,je,ht,Ie,"next",Ee)}function Ie(Ee){T(Et,Fe,je,ht,Ie,"throw",Ee)}ht(void 0)})}}J.d(ot,{A:()=>B})},1635:(fn,ot,J)=>{function ce(We,Qe){var at={};for(var lt in We)Object.prototype.hasOwnProperty.call(We,lt)&&Qe.indexOf(lt)<0&&(at[lt]=We[lt]);if(null!=We&&"function"==typeof Object.getOwnPropertySymbols){var Pt=0;for(lt=Object.getOwnPropertySymbols(We);Pt<lt.length;Pt++)Qe.indexOf(lt[Pt])<0&&Object.prototype.propertyIsEnumerable.call(We,lt[Pt])&&(at[lt[Pt]]=We[lt[Pt]])}return at}function Xe(We,Qe,at,lt){return new(at||(at=Promise))(function(Ze,we){function Mn(te){try{en(lt.next(te))}catch(fr){we(fr)}}function ar(te){try{en(lt.throw(te))}catch(fr){we(fr)}}function en(te){te.done?Ze(te.value):function Pt(Ze){return Ze instanceof at?Ze:new at(function(we){we(Ze)})}(te.value).then(Mn,ar)}en((lt=lt.apply(We,Qe||[])).next())})}function Ct(We){return this instanceof Ct?(this.v=We,this):new Ct(We)}function It(We,Qe,at){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pt,lt=at.apply(We,Qe||[]),Ze=[];return Pt={},Mn("next"),Mn("throw"),Mn("return",function we(jn){return function(Hr){return Promise.resolve(Hr).then(jn,fr)}}),Pt[Symbol.asyncIterator]=function(){return this},Pt;function Mn(jn,Hr){lt[jn]&&(Pt[jn]=function(lr){return new Promise(function(Wn,mn){Ze.push([jn,lr,Wn,mn])>1||ar(jn,lr)})},Hr&&(Pt[jn]=Hr(Pt[jn])))}function ar(jn,Hr){try{!function en(jn){jn.value instanceof Ct?Promise.resolve(jn.value.v).then(te,fr):Qr(Ze[0][2],jn)}(lt[jn](Hr))}catch(lr){Qr(Ze[0][3],lr)}}function te(jn){ar("next",jn)}function fr(jn){ar("throw",jn)}function Qr(jn,Hr){jn(Hr),Ze.shift(),Ze.length&&ar(Ze[0][0],Ze[0][1])}}function Yt(We){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var at,Qe=We[Symbol.asyncIterator];return Qe?Qe.call(We):(We=function nn(We){var Qe="function"==typeof Symbol&&Symbol.iterator,at=Qe&&We[Qe],lt=0;if(at)return at.call(We);if(We&&"number"==typeof We.length)return{next:function(){return We&&lt>=We.length&&(We=void 0),{value:We&&We[lt++],done:!We}}};throw new TypeError(Qe?"Object is not iterable.":"Symbol.iterator is not defined.")}(We),at={},lt("next"),lt("throw"),lt("return"),at[Symbol.asyncIterator]=function(){return this},at);function lt(Ze){at[Ze]=We[Ze]&&function(we){return new Promise(function(Mn,ar){!function Pt(Ze,we,Mn,ar){Promise.resolve(ar).then(function(en){Ze({value:en,done:Mn})},we)}(Mn,ar,(we=We[Ze](we)).done,we.value)})}}}J.d(ot,{AQ:()=>It,N3:()=>Ct,Tt:()=>ce,sH:()=>Xe,xN:()=>Yt}),"function"==typeof SuppressedError&&SuppressedError}},fn=>{fn(fn.s=541)}]);