"use strict";(self.webpackChunkmy_angular_website=self.webpackChunkmy_angular_website||[]).push([[792],{1076:(gs,Ur,dt)=>{dt.d(Ur,{$L:()=>Je,$g:()=>kc,A4:()=>Ee,Am:()=>Ws,As:()=>xt,Bd:()=>me,Cv:()=>tr,FA:()=>Ne,Fy:()=>yi,HN:()=>Jr,Hk:()=>ke,I9:()=>Po,Im:()=>Va,K3:()=>He,KA:()=>Br,Ku:()=>$a,Ll:()=>Un,OE:()=>Dr,T9:()=>Cn,Uj:()=>Jt,XA:()=>Ht,ZQ:()=>tt,bD:()=>Ei,cY:()=>zt,dI:()=>co,eX:()=>ue,g:()=>he,gR:()=>Wt,gz:()=>Ci,hp:()=>uu,jZ:()=>Gn,kH:()=>Fc,kj:()=>Ba,lT:()=>si,lV:()=>vi,nr:()=>K,oD:()=>Wo,od:()=>Ks,p7:()=>Xn,qc:()=>An,sr:()=>Sr,tD:()=>$i,u:()=>pe,vA:()=>je,yw:()=>ai,zW:()=>X,zw:()=>ze});const D={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},je=function(k,M){if(!k)throw ke(M)},ke=function(k){return new Error("Firebase Database ("+D.SDK_VERSION+") INTERNAL ASSERT FAILED: "+k)},ee=function(k){const M=[];let U=0;for(let te=0;te<k.length;te++){let W=k.charCodeAt(te);W<128?M[U++]=W:W<2048?(M[U++]=W>>6|192,M[U++]=63&W|128):55296==(64512&W)&&te+1<k.length&&56320==(64512&k.charCodeAt(te+1))?(W=65536+((1023&W)<<10)+(1023&k.charCodeAt(++te)),M[U++]=W>>18|240,M[U++]=W>>12&63|128,M[U++]=W>>6&63|128,M[U++]=63&W|128):(M[U++]=W>>12|224,M[U++]=W>>6&63|128,M[U++]=63&W|128)}return M},He={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(k,M){if(!Array.isArray(k))throw Error("encodeByteArray takes an array as a parameter");this.init_();const U=M?this.byteToCharMapWebSafe_:this.byteToCharMap_,te=[];for(let W=0;W<k.length;W+=3){const we=k[W],Ve=W+1<k.length,bt=Ve?k[W+1]:0,$e=W+2<k.length,mn=$e?k[W+2]:0;let wi=(15&bt)<<2|mn>>6,Js=63&mn;$e||(Js=64,Ve||(wi=64)),te.push(U[we>>2],U[(3&we)<<4|bt>>4],U[wi],U[Js])}return te.join("")},encodeString(k,M){return this.HAS_NATIVE_SUPPORT&&!M?btoa(k):this.encodeByteArray(ee(k),M)},decodeString(k,M){return this.HAS_NATIVE_SUPPORT&&!M?atob(k):function(k){const M=[];let U=0,te=0;for(;U<k.length;){const W=k[U++];if(W<128)M[te++]=String.fromCharCode(W);else if(W>191&&W<224){const we=k[U++];M[te++]=String.fromCharCode((31&W)<<6|63&we)}else if(W>239&&W<365){const $e=((7&W)<<18|(63&k[U++])<<12|(63&k[U++])<<6|63&k[U++])-65536;M[te++]=String.fromCharCode(55296+($e>>10)),M[te++]=String.fromCharCode(56320+(1023&$e))}else{const we=k[U++],Ve=k[U++];M[te++]=String.fromCharCode((15&W)<<12|(63&we)<<6|63&Ve)}}return M.join("")}(this.decodeStringToByteArray(k,M))},decodeStringToByteArray(k,M){this.init_();const U=M?this.charToByteMapWebSafe_:this.charToByteMap_,te=[];for(let W=0;W<k.length;){const we=U[k.charAt(W++)],bt=W<k.length?U[k.charAt(W)]:0;++W;const mn=W<k.length?U[k.charAt(W)]:64;++W;const wt=W<k.length?U[k.charAt(W)]:64;if(++W,null==we||null==bt||null==mn||null==wt)throw new Zn;te.push(we<<2|bt>>4),64!==mn&&(te.push(bt<<4&240|mn>>2),64!==wt&&te.push(mn<<6&192|wt))}return te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let k=0;k<this.ENCODED_VALS.length;k++)this.byteToCharMap_[k]=this.ENCODED_VALS.charAt(k),this.charToByteMap_[this.byteToCharMap_[k]]=k,this.byteToCharMapWebSafe_[k]=this.ENCODED_VALS_WEBSAFE.charAt(k),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[k]]=k,k>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(k)]=k,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(k)]=k)}}};class Zn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Br=function(k){const M=ee(k);return He.encodeByteArray(M,!0)},Jt=function(k){return Br(k).replace(/\./g,"")},pe=function(k){try{return He.decodeString(k,!0)}catch(M){console.error("base64Decode failed: ",M)}return null};function Ee(k){return ze(void 0,k)}function ze(k,M){if(!(M instanceof Object))return M;switch(M.constructor){case Date:return new Date(M.getTime());case Object:void 0===k&&(k={});break;case Array:k=[];break;default:return M}for(const U in M)!M.hasOwnProperty(U)||!yt(U)||(k[U]=ze(k[U],M[U]));return k}function yt(k){return"__proto__"!==k}const Ct=()=>{try{return function Ut(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const k=process.env.__FIREBASE_DEFAULTS__;return k?JSON.parse(k):void 0})()||(()=>{if(typeof document>"u")return;let k;try{k=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const M=k&&pe(k[1]);return M&&JSON.parse(M)})()}catch(k){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${k}`)}},Cn=()=>{var k;return null===(k=Ct())||void 0===k?void 0:k.config},Ht=k=>{var M;return null===(M=Ct())||void 0===M?void 0:M[`_${k}`]};class zt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((M,U)=>{this.resolve=M,this.reject=U})}wrapCallback(M){return(U,te)=>{U?this.reject(U):this.resolve(te),"function"==typeof M&&(this.promise.catch(()=>{}),1===M.length?M(U):M(U,te))}}}function yi(k,M){if(k.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const te=M||"demo-project",W=k.iat||0,we=k.sub||k.user_id;if(!we)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ve=Object.assign({iss:`https://securetoken.google.com/${te}`,aud:te,iat:W,exp:W+3600,auth_time:W,sub:we,user_id:we,firebase:{sign_in_provider:"custom",identities:{}}},k);return[Jt(JSON.stringify({alg:"none",type:"JWT"})),Jt(JSON.stringify(Ve)),""].join(".")}function tt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Gn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function Un(){var k;const M=null===(k=Ct())||void 0===k?void 0:k.forceEnvironment;if("node"===M)return!0;if("browser"===M)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function me(){return typeof window<"u"||Xn()}function Xn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Sr(){const k="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof k&&void 0!==k.id}function vi(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function si(){const k=tt();return k.indexOf("MSIE ")>=0||k.indexOf("Trident/")>=0}function kc(){return!0===D.NODE_CLIENT||!0===D.NODE_ADMIN}function K(){return!Un()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X(){try{return"object"==typeof indexedDB}catch{return!1}}function ue(){return new Promise((k,M)=>{try{let U=!0;const te="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open(te);W.onsuccess=()=>{W.result.close(),U||self.indexedDB.deleteDatabase(te),k(!0)},W.onupgradeneeded=()=>{U=!1},W.onerror=()=>{var we;M((null===(we=W.error)||void 0===we?void 0:we.message)||"")}}catch(U){M(U)}})}class he extends Error{constructor(M,U,te){super(U),this.code=M,this.customData=te,this.name="FirebaseError",Object.setPrototypeOf(this,he.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ne.prototype.create)}}class Ne{constructor(M,U,te){this.service=M,this.serviceName=U,this.errors=te}create(M,...U){const te=U[0]||{},W=`${this.service}/${M}`,we=this.errors[M],Ve=we?function Nt(k,M){return k.replace(er,(U,te)=>{const W=M[te];return null!=W?String(W):`<${te}?>`})}(we,te):"Error";return new he(W,`${this.serviceName}: ${Ve} (${W}).`,te)}}const er=/\{\$([^}]+)}/g;function Je(k){return JSON.parse(k)}function xt(k){return JSON.stringify(k)}const gn=function(k){let M={},U={},te={},W="";try{const we=k.split(".");M=Je(pe(we[0])||""),U=Je(pe(we[1])||""),W=we[2],te=U.d||{},delete U.d}catch{}return{header:M,claims:U,data:te,signature:W}},tr=function(k){const U=gn(k).claims;return!!U&&"object"==typeof U&&U.hasOwnProperty("iat")},An=function(k){const M=gn(k).claims;return"object"==typeof M&&!0===M.admin};function Wt(k,M){return Object.prototype.hasOwnProperty.call(k,M)}function ai(k,M){if(Object.prototype.hasOwnProperty.call(k,M))return k[M]}function Va(k){for(const M in k)if(Object.prototype.hasOwnProperty.call(k,M))return!1;return!0}function Fc(k,M,U){const te={};for(const W in k)Object.prototype.hasOwnProperty.call(k,W)&&(te[W]=M.call(U,k[W],W,k));return te}function Ei(k,M){if(k===M)return!0;const U=Object.keys(k),te=Object.keys(M);for(const W of U){if(!te.includes(W))return!1;const we=k[W],Ve=M[W];if(Go(we)&&Go(Ve)){if(!Ei(we,Ve))return!1}else if(we!==Ve)return!1}for(const W of te)if(!U.includes(W))return!1;return!0}function Go(k){return null!==k&&"object"==typeof k}function Ws(k){const M=[];for(const[U,te]of Object.entries(k))Array.isArray(te)?te.forEach(W=>{M.push(encodeURIComponent(U)+"="+encodeURIComponent(W))}):M.push(encodeURIComponent(U)+"="+encodeURIComponent(te));return M.length?"&"+M.join("&"):""}function Po(k){const M={};return k.replace(/^\?/,"").split("&").forEach(te=>{if(te){const[W,we]=te.split("=");M[decodeURIComponent(W)]=decodeURIComponent(we)}}),M}function uu(k){const M=k.indexOf("?");if(!M)return"";const U=k.indexOf("#",M);return k.substring(M,U>0?U:void 0)}class Ci{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let M=1;M<this.blockSize;++M)this.pad_[M]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(M,U){U||(U=0);const te=this.W_;if("string"==typeof M)for(let wt=0;wt<16;wt++)te[wt]=M.charCodeAt(U)<<24|M.charCodeAt(U+1)<<16|M.charCodeAt(U+2)<<8|M.charCodeAt(U+3),U+=4;else for(let wt=0;wt<16;wt++)te[wt]=M[U]<<24|M[U+1]<<16|M[U+2]<<8|M[U+3],U+=4;for(let wt=16;wt<80;wt++){const wi=te[wt-3]^te[wt-8]^te[wt-14]^te[wt-16];te[wt]=4294967295&(wi<<1|wi>>>31)}let mn,Mr,W=this.chain_[0],we=this.chain_[1],Ve=this.chain_[2],bt=this.chain_[3],$e=this.chain_[4];for(let wt=0;wt<80;wt++){wt<40?wt<20?(mn=bt^we&(Ve^bt),Mr=1518500249):(mn=we^Ve^bt,Mr=1859775393):wt<60?(mn=we&Ve|bt&(we|Ve),Mr=2400959708):(mn=we^Ve^bt,Mr=3395469782);const wi=(W<<5|W>>>27)+mn+$e+Mr+te[wt]&4294967295;$e=bt,bt=Ve,Ve=4294967295&(we<<30|we>>>2),we=W,W=wi}this.chain_[0]=this.chain_[0]+W&4294967295,this.chain_[1]=this.chain_[1]+we&4294967295,this.chain_[2]=this.chain_[2]+Ve&4294967295,this.chain_[3]=this.chain_[3]+bt&4294967295,this.chain_[4]=this.chain_[4]+$e&4294967295}update(M,U){if(null==M)return;void 0===U&&(U=M.length);const te=U-this.blockSize;let W=0;const we=this.buf_;let Ve=this.inbuf_;for(;W<U;){if(0===Ve)for(;W<=te;)this.compress_(M,W),W+=this.blockSize;if("string"==typeof M){for(;W<U;)if(we[Ve]=M.charCodeAt(W),++Ve,++W,Ve===this.blockSize){this.compress_(we),Ve=0;break}}else for(;W<U;)if(we[Ve]=M[W],++Ve,++W,Ve===this.blockSize){this.compress_(we),Ve=0;break}}this.inbuf_=Ve,this.total_+=U}digest(){const M=[];let U=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let W=this.blockSize-1;W>=56;W--)this.buf_[W]=255&U,U/=256;this.compress_(this.buf_);let te=0;for(let W=0;W<5;W++)for(let we=24;we>=0;we-=8)M[te]=this.chain_[W]>>we&255,++te;return M}}function $i(k,M){const U=new Pr(k,M);return U.subscribe.bind(U)}class Pr{constructor(M,U){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=U,this.task.then(()=>{M(this)}).catch(te=>{this.error(te)})}next(M){this.forEachObserver(U=>{U.next(M)})}error(M){this.forEachObserver(U=>{U.error(M)}),this.close(M)}complete(){this.forEachObserver(M=>{M.complete()}),this.close()}subscribe(M,U,te){let W;if(void 0===M&&void 0===U&&void 0===te)throw new Error("Missing Observer.");W=function nh(k,M){if("object"!=typeof k||null===k)return!1;for(const U of M)if(U in k&&"function"==typeof k[U])return!0;return!1}(M,["next","error","complete"])?M:{next:M,error:U,complete:te},void 0===W.next&&(W.next=ao),void 0===W.error&&(W.error=ao),void 0===W.complete&&(W.complete=ao);const we=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch{}}),this.observers.push(W),we}unsubscribeOne(M){void 0===this.observers||void 0===this.observers[M]||(delete this.observers[M],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(M){if(!this.finalized)for(let U=0;U<this.observers.length;U++)this.sendOne(U,M)}sendOne(M,U){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[M])try{U(this.observers[M])}catch(te){typeof console<"u"&&console.error&&console.error(te)}})}close(M){this.finalized||(this.finalized=!0,void 0!==M&&(this.finalError=M),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ao(){}const Ks=function(k,M,U,te){let W;if(te<M?W="at least "+M:te>U&&(W=0===U?"none":"no more than "+U),W)throw new Error(k+" failed: Was called with "+te+(1===te?" argument.":" arguments.")+" Expects "+W+".")};function co(k,M){return`${k} failed: ${M} argument `}function Wo(k,M,U,te){if((!te||U)&&"function"!=typeof U)throw new Error(co(k,M)+"must be a valid function.")}function Jr(k,M,U,te){if((!te||U)&&("object"!=typeof U||null===U))throw new Error(co(k,M)+"must be a valid context object.")}const Ba=function(k){const M=[];let U=0;for(let te=0;te<k.length;te++){let W=k.charCodeAt(te);if(W>=55296&&W<=56319){const we=W-55296;te++,je(te<k.length,"Surrogate pair missing trail surrogate."),W=65536+(we<<10)+(k.charCodeAt(te)-56320)}W<128?M[U++]=W:W<2048?(M[U++]=W>>6|192,M[U++]=63&W|128):W<65536?(M[U++]=W>>12|224,M[U++]=W>>6&63|128,M[U++]=63&W|128):(M[U++]=W>>18|240,M[U++]=W>>12&63|128,M[U++]=W>>6&63|128,M[U++]=63&W|128)}return M},Dr=function(k){let M=0;for(let U=0;U<k.length;U++){const te=k.charCodeAt(U);te<128?M++:te<2048?M+=2:te>=55296&&te<=56319?(M+=4,U++):M+=3}return M};function $a(k){return k&&k._delegate?k._delegate:k}},3912:(gs,Ur,dt)=>{let je=null,ee=1;const pn=Symbol("SIGNAL");function He(n){const e=je;return je=n,e}function yt(n){if((!zt(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==ee)){if(!n.producerMustRecompute(n)&&!gr(n))return n.dirty=!1,void(n.lastCleanEpoch=ee);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ee}}function gr(n){yi(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(yt(t),r!==t.version))return!0}return!1}function Ht(n,e){if(function tt(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),1===n.liveConsumerNode.length&&function Gn(n){return void 0!==n.producerNode}(n))for(let r=0;r<n.producerNode.length;r++)Ht(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];yi(i),i.producerIndexOfThis[r]=e}}function zt(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function yi(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let si=null;function Mt(n){return"function"==typeof n}function Gt(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const tr=Gt(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function An(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Wt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Mt(r))try{r()}catch(o){e=o instanceof tr?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{Fc(o)}catch(s){e=e??[],s instanceof tr?e=[...e,...s.errors]:e.push(s)}}if(e)throw new tr(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Fc(e);else{if(e instanceof Wt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&An(t,e)}remove(e){const{_finalizers:t}=this;t&&An(t,e),e instanceof Wt&&e._removeParent(this)}}Wt.EMPTY=(()=>{const n=new Wt;return n.closed=!0,n})();const ai=Wt.EMPTY;function Va(n){return n instanceof Wt||n&&"closed"in n&&Mt(n.remove)&&Mt(n.add)&&Mt(n.unsubscribe)}function Fc(n){Mt(n)?n():n.unsubscribe()}const Ei={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Go={setTimeout(n,e,...t){const{delegate:r}=Go;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Go;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ua(n){Go.setTimeout(()=>{const{onUnhandledError:e}=Ei;if(!e)throw n;e(n)})}function Ws(){}const Po=$i("C",void 0,void 0);function $i(n,e,t){return{kind:n,value:e,error:t}}let Pr=null;function Hi(n){if(Ei.useDeprecatedSynchronousErrorHandling){const e=!Pr;if(e&&(Pr={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Pr;if(Pr=null,t)throw r}}else n()}class ao extends Wt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Va(e)&&e.add(this)):this.destination=du}static create(e,t,r){return new Wo(e,t,r)}next(e){this.isStopped?Dr(function Ci(n){return $i("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Dr(function uu(n){return $i("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Dr(Po,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ks=Function.prototype.bind;function co(n,e){return Ks.call(n,e)}class Qs{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Jr(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Jr(r)}else Jr(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Jr(t)}}}class Wo extends ao{constructor(e,t,r){let i;if(super(),Mt(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Ei.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&co(e.next,o),error:e.error&&co(e.error,o),complete:e.complete&&co(e.complete,o)}):i=e}this.destination=new Qs(i)}}function Jr(n){Ei.useDeprecatedSynchronousErrorHandling?function nh(n){Ei.useDeprecatedSynchronousErrorHandling&&Pr&&(Pr.errorThrown=!0,Pr.error=n)}(n):Ua(n)}function Dr(n,e){const{onStoppedNotification:t}=Ei;t&&Go.setTimeout(()=>t(n,e))}const du={closed:!0,next:Ws,error:function Ba(n){throw n},complete:Ws},_s="function"==typeof Symbol&&Symbol.observable||"@@observable";function jr(n){return n}function Lc(n){return 0===n.length?jr:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let tn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function $a(n){return n&&n instanceof ao||function ja(n){return n&&Mt(n.next)&&Mt(n.error)&&Mt(n.complete)}(n)&&Va(n)}(t)?t:new Wo(t,r,i);return Hi(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=hu(r))((i,o)=>{const s=new Wo({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[_s](){return this}pipe(...t){return Lc(t)(this)}toPromise(t){return new(t=hu(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function hu(n){var e;return null!==(e=n??Ei.Promise)&&void 0!==e?e:Promise}const k=Gt(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let M=(()=>{class n extends tn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new U(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new k}next(t){Hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Hi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?ai:(this.currentObservers=null,o.push(t),new Wt(()=>{this.currentObservers=null,An(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new tn;return t.source=this,t}}return n.create=(e,t)=>new U(e,t),n})();class U extends M{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:ai}}class te extends M{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function W(n){return Mt(n?.lift)}function we(n){return e=>{if(W(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ve(n,e,t,r,i){return new bt(n,e,t,r,i)}class bt extends ao{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function $e(n,e){return we((t,r)=>{let i=0;t.subscribe(Ve(r,o=>{r.next(n.call(e,o,i++))}))})}typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const Dg="https://g.co/ng/security#xss";class Q extends Error{constructor(e,t){super(function Ga(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function qi(n){return{toString:n}.toString()}const na="__parameters__";function Hc(n,e,t){return qi(()=>{const r=function vu(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(c,l,h){const g=c.hasOwnProperty(na)?c[na]:Object.defineProperty(c,na,{value:[]})[na];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const un=globalThis;function Kt(n){for(let e in n)if(n[e]===Kt)return e;throw Error("Could not find renamed property on target object.")}function hE(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function nr(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(nr).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Mg(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const v0=Kt({__forward_ref__:Kt});function sn(n){return n.__forward_ref__=sn,n.toString=function(){return nr(this())},n}function nt(n){return gh(n)?n():n}function gh(n){return"function"==typeof n&&n.hasOwnProperty(v0)&&n.__forward_ref__===sn}function xe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ui(n){return{providers:n.providers||[],imports:n.imports||[]}}function mh(n){return vE(n,Ng)||vE(n,b0)}function vE(n,e){return n.hasOwnProperty(e)?n[e]:null}function _h(n){return n&&(n.hasOwnProperty(EE)||n.hasOwnProperty(xg))?n[EE]:null}const Ng=Kt({\u0275prov:Kt}),EE=Kt({\u0275inj:Kt}),b0=Kt({ngInjectableDef:Kt}),xg=Kt({ngInjectorDef:Kt});class Ce{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=xe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Fg(n){return n&&!!n.\u0275providers}const Cu=Kt({\u0275cmp:Kt}),Lg=Kt({\u0275dir:Kt}),AE=Kt({\u0275pipe:Kt}),SE=Kt({\u0275mod:Kt}),ws=Kt({\u0275fac:Kt}),Wa=Kt({__NG_ELEMENT_ID__:Kt}),yh=Kt({__NG_ENV_ID__:Kt});function ct(n){return"string"==typeof n?n:null==n?"":String(n)}function qc(n,e){throw new Q(-201,!1)}var Tt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Tt||{});let Qo;function PE(){return Qo}function Ii(n){const e=Qo;return Qo=n,e}function Gc(n,e,t){const r=mh(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Tt.Optional?null:void 0!==e?e:void qc()}const wu={},Iu="__NG_DI_FLAG__",vh="ngTempTokenPath",D0=/\n/gm,Ug="__source";let Wc;function Is(n){const e=Wc;return Wc=n,e}function bu(n,e=Tt.Default){if(void 0===Wc)throw new Q(-203,!1);return null===Wc?Gc(n,void 0,e):Wc.get(n,e&Tt.Optional?null:void 0,e)}function fe(n,e=Tt.Default){return(PE()||bu)(nt(n),e)}function le(n,e=Tt.Default){return fe(n,Tu(e))}function Tu(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Au(n){const e=[];for(let t=0;t<n.length;t++){const r=nt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Q(900,!1);let i,o=Tt.Default;for(let s=0;s<r.length;s++){const a=r[s],c=Bg(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}e.push(fe(i,o))}else e.push(fe(r))}return e}function Su(n,e){return n[Iu]=e,n.prototype[Iu]=e,n}function Bg(n){return n[Iu]}const Ch=Su(Hc("Optional"),8),wh=Su(Hc("SkipSelf"),4);function Ka(n,e){return n.hasOwnProperty(ws)?n[ws]:null}function bs(n,e){n.forEach(t=>Array.isArray(t)?bs(t,e):e(t))}function OE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ih(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Gi(n,e,t){let r=Qc(n,e);return r>=0?n[1|r]=t:(r=~r,function RE(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Th(n,e){const t=Qc(n,e);if(t>=0)return n[1|t]}function Qc(n,e){return function NE(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const ho={},jt=[],fo=new Ce(""),xE=new Ce("",-1),Du=new Ce("");class Ah{get(e,t=wu){if(t===wu){const r=new Error(`NullInjectorError: No provider for ${nr(e)}!`);throw r.name="NullInjectorError",r}return t}}var Yc=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Yc||{}),Ti=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ti||{}),ia=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ia||{});function k0(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Mu(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{const o=i,s=t[++r];oa(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Jc(n){return 3===n||4===n||6===n}function oa(n){return 64===n.charCodeAt(0)}function Qa(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||kE(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function kE(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}const FE="ng-template";function F0(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==k0(e[i+1].toLowerCase(),t,0))return!0}else if(Ou(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===t)return!0}return!1}function Ou(n){return 4===n.type&&n.value!==FE}function LE(n,e,t){return e===(4!==n.type||t?n.value:FE)}function L0(n,e,t){let r=4;const i=n.attrs,o=null!==i?function V0(n){for(let e=0;e<n.length;e++)if(Jc(n[e]))return e;return n.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!LE(n,c,t)||""===c&&1===e.length){if(Do(r))return!1;s=!0}}else if(8&r){if(null===i||!F0(n,i,c,t)){if(Do(r))return!1;s=!0}}else{const l=e[++a],h=jg(c,i,Ou(n),t);if(-1===h){if(Do(r))return!1;s=!0;continue}if(""!==l){let g;if(g=h>o?"":i[h+1].toLowerCase(),2&r&&l!==g){if(Do(r))return!1;s=!0}}}}else{if(!s&&!Do(r)&&!Do(c))return!1;if(s&&Do(c))continue;s=!1,r=c|1&r}}return Do(r)||s}function Do(n){return!(1&n)}function jg(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function Hg(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function VE(n,e,t=!1){for(let r=0;r<e.length;r++)if(L0(n,e[r],t))return!0;return!1}function UE(n,e){return n?":not("+e.trim()+")":e}function Ru(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Do(s)&&(e+=UE(o,i),i=""),r=s,o=o||!Do(r);t++}return""!==i&&(e+=UE(o,i)),e}function sr(n){return qi(()=>{const e=Ph(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Yc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ti.Emulated,styles:n.styles||jt,_:null,schemas:n.schemas||null,tView:null,id:""};BE(t);const r=n.dependencies;return t.directiveDefs=Dh(r,!1),t.pipeDefs=Dh(r,!0),t.id=function j0(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function qg(n){return vt(n)||_r(n)}function Gg(n){return null!==n}function Wi(n){return qi(()=>({type:n.type,bootstrap:n.bootstrap||jt,declarations:n.declarations||jt,imports:n.imports||jt,exports:n.exports||jt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Sh(n,e){if(null==n)return ho;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let o,s,a=ia.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==ia.None?[r,a]:r,e[o]=s):t[o]=r}return t}function it(n){return qi(()=>{const e=Ph(n);return BE(e),e})}function di(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function vt(n){return n[Cu]||null}function _r(n){return n[Lg]||null}function yr(n){return n[AE]||null}function Zr(n,e){const t=n[SE]||null;if(!t&&!0===e)throw new Error(`Type ${nr(n)} does not have '\u0275mod' property.`);return t}function Ph(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ho,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||jt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Sh(n.inputs,e),outputs:Sh(n.outputs),debugInfo:null}}function BE(n){n.features?.forEach(e=>e(n))}function Dh(n,e){if(!n)return null;const t=e?yr:qg;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(Gg)}function Mh(...n){return{\u0275providers:Nu(0,n),\u0275fromNgModule:!0}}function Nu(n,...e){const t=[],r=new Set;let i;const o=s=>{t.push(s)};return bs(e,s=>{const a=s;Zc(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&Kg(i,o),t}function Kg(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];Oh(i,o=>{e(o,r)})}}function Zc(n,e,t,r){if(!(n=nt(n)))return!1;let i=null,o=_h(n);const s=!o&&vt(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const c=n.ngModule;if(o=_h(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)Zc(l,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;r.add(i);try{bs(o.imports,h=>{Zc(h,e,t,r)&&(l||=[],l.push(h))})}finally{}void 0!==l&&Kg(l,e)}if(!a){const l=Ka(i)||(()=>new i);e({provide:i,useFactory:l,deps:jt},i),e({provide:Du,useValue:i,multi:!0},i),e({provide:fo,useValue:()=>fe(i),multi:!0},i)}const c=o.providers;if(null!=c&&!a){const l=n;Oh(c,h=>{e(h,l)})}}}return i!==n&&void 0!==n.providers}function Oh(n,e){for(let t of n)Fg(t)&&(t=t.\u0275providers),Array.isArray(t)?Oh(t,e):e(t)}const jE=Kt({provide:String,useValue:Kt});function Rh(n){return null!==n&&"object"==typeof n&&jE in n}function Ts(n){return"function"==typeof n}const Yg=new Ce(""),Nh={},Jg={};let Zg;function xh(){return void 0===Zg&&(Zg=new Ah),Zg}class $r{}class Xc extends $r{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xg(e,s=>this.processProvider(s)),this.records.set(xE,tl(void 0,this)),i.has("environment")&&this.records.set($r,tl(void 0,this));const o=this.records.get(Yg);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Du,jt,Tt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=He(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),He(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Is(this),r=Ii(void 0);try{return e()}finally{Is(t),Ii(r)}}get(e,t=wu,r=Tt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(yh))return e[yh](this);r=Tu(r);const o=Is(this),s=Ii(void 0);try{if(!(r&Tt.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function W0(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ce}(e)&&mh(e);c=l&&this.injectableDefInScope(l)?tl(el(e),Nh):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&Tt.Self?xh():this.parent).get(e,t=r&Tt.Optional&&t===wu?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[vh]=a[vh]||[]).unshift(nr(e)),o)throw a;return function ME(n,e,t,r){const i=n[vh];throw e[Ug]&&i.unshift(e[Ug]),n.message=function O0(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=nr(e);if(Array.isArray(e))i=e.map(nr).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):nr(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(D0,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[vh]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Ii(s),Is(o)}}resolveInjectorInitializers(){const e=He(null),t=Is(this),r=Ii(void 0);try{const o=this.get(fo,jt,Tt.Self);for(const s of o)s()}finally{Is(t),Ii(r),He(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(nr(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){let t=Ts(e=nt(e))?e:nt(e&&e.provide);const r=function z0(n){return Rh(n)?tl(void 0,n.useValue):tl(HE(n),Nh)}(e);if(!Ts(e)&&!0===e.multi){let i=this.records.get(t);i||(i=tl(void 0,Nh,!0),i.factory=()=>Au(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){const r=He(null);try{return t.value===Nh&&(t.value=Jg,t.value=t.factory()),"object"==typeof t.value&&t.value&&function G0(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{He(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=nt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function el(n){const e=mh(n),t=null!==e?e.factory:Ka(n);if(null!==t)return t;if(n instanceof Ce)throw new Q(204,!1);if(n instanceof Function)return function H0(n){if(n.length>0)throw new Q(204,!1);const t=function I0(n){return n&&(n[Ng]||n[b0])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Q(204,!1)}function HE(n,e,t){let r;if(Ts(n)){const i=nt(n);return Ka(i)||el(i)}if(Rh(n))r=()=>nt(n.useValue);else if(function Qg(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Au(n.deps||[]));else if(function $E(n){return!(!n||!n.useExisting)}(n))r=()=>fe(nt(n.useExisting));else{const i=nt(n&&(n.useClass||n.provide));if(!function q0(n){return!!n.deps}(n))return Ka(i)||el(i);r=()=>new i(...Au(n.deps))}return r}function tl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Xg(n,e){for(const t of n)Array.isArray(t)?Xg(t,e):t&&Fg(t)?Xg(t.\u0275providers,e):e(t)}function Ai(n,e){n instanceof Xc&&n.assertNotDestroyed();const r=Is(n),i=Ii(void 0);try{return e()}finally{Is(r),Ii(i)}}function zE(){return void 0!==PE()||null!=function Eh(){return Wc}()}const wn=0,Ie=1,Qe=2,vr=3,Ki=4,Or=5,Rr=6,Ja=7,dn=8,cr=9,Yo=10,ot=11,Fu=12,GE=13,Za=14,Pn=15,rl=16,il=17,hi=18,ol=19,WE=20,Jo=21,Fh=22,As=23,Ye=25,im=1,Zo=7,aa=9,rr=10;var Vh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Vh||{});function Nr(n){return Array.isArray(n)&&"object"==typeof n[im]}function Xr(n){return Array.isArray(n)&&!0===n[im]}function om(n){return!!(4&n.flags)}function ca(n){return n.componentOffset>-1}function sl(n){return!(1&~n.flags)}function Mo(n){return!!n.template}function Lu(n){return!!(512&n[Qe])}class iA{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function jh(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}function po(){return Si}function Si(n){return n.type.prototype.ngOnChanges&&(n.setInput=XE),Vu}function Vu(){const n=$h(this),e=n?.current;if(e){const t=n.previous;if(t===ho)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function XE(n,e,t,r,i){const o=this.declaredInputs[r],s=$h(n)||function um(n,e){return n[eC]=e}(n,{previous:ho,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new iA(l&&l.currentValue,t,c===ho),jh(n,e,i,t)}po.ngInherit=!0;const eC="__ngSimpleChanges__";function $h(n){return n[eC]||null}const Xo=function(n,e,t){};function Qt(n){for(;Array.isArray(n);)n=n[wn];return n}function Uu(n,e){return Qt(e[n])}function ei(n,e){return Qt(e[n.index])}function ec(n,e){return n.data[e]}function la(n,e){return n[e]}function Qi(n,e){const t=e[n];return Nr(t)?t:t[wn]}function tc(n){return!(128&~n[Qe])}function Yi(n,e){return null==e?null:n[e]}function rC(n){n[il]=0}function pm(n){1024&n[Qe]||(n[Qe]|=1024,tc(n)&&Hh(n))}function Bu(n){return!!(9216&n[Qe]||n[As]?.dirty)}function gm(n){n[Yo].changeDetectionScheduler?.notify(7),64&n[Qe]&&(n[Qe]|=1024),Bu(n)&&Hh(n)}function Hh(n){n[Yo].changeDetectionScheduler?.notify(0);let e=d(n);for(;null!==e&&!(8192&e[Qe])&&(e[Qe]|=8192,tc(e));)e=d(e)}function p(n,e){if(!(256&~n[Qe]))throw new Q(911,!1);null===n[Jo]&&(n[Jo]=[]),n[Jo].push(e)}function d(n){const e=n[vr];return Xr(e)?e[vr]:e}const m={lFrame:Yk(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let O=!1;function Le(){return m.bindingsEnabled}function ne(){return m.lFrame.lView}function mt(){return m.lFrame.tView}function Dn(n){return m.lFrame.contextLView=n,n[dn]}function Mn(n){return m.lFrame.contextLView=null,n}function Yt(){let n=_m();for(;null!==n&&64===n.type;)n=n.parent;return n}function _m(){return m.lFrame.currentTNode}function go(n,e){const t=m.lFrame;t.currentTNode=n,t.isParent=e}function ym(){return m.lFrame.isParent}function oA(){m.lFrame.isParent=!1}function zk(){return O}function qk(n){O=n}function Ji(){const n=m.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ds(){return m.lFrame.bindingIndex++}function rc(n){const e=m.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function G8(n,e){const t=m.lFrame;t.bindingIndex=t.bindingRootIndex=n,sA(e)}function sA(n){m.lFrame.currentDirectiveIndex=n}function cA(){return m.lFrame.currentQueryIndex}function aC(n){m.lFrame.currentQueryIndex=n}function K8(n){const e=n[Ie];return 2===e.type?e.declTNode:1===e.type?n[Or]:null}function Kk(n,e,t){if(t&Tt.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&Tt.Host||(i=K8(o),null===i||(o=o[Za],10&i.type))););if(null===i)return!1;e=i,n=o}const r=m.lFrame=Qk();return r.currentTNode=e,r.lView=n,!0}function lA(n){const e=Qk(),t=n[Ie];m.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Qk(){const n=m.lFrame,e=null===n?null:n.child;return null===e?Yk(n):e}function Yk(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Jk(){const n=m.lFrame;return m.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Zk=Jk;function uA(){const n=Jk();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Di(){return m.lFrame.selectedIndex}function $u(n){m.lFrame.selectedIndex=n}function On(){const n=m.lFrame;return ec(n.tView,n.selectedIndex)}let e1=!0;function vm(){return e1}function ua(n){e1=n}function cC(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function lC(n,e,t){t1(n,e,3,t)}function uC(n,e,t,r){(3&n[Qe])===t&&t1(n,e,t,r)}function dA(n,e){let t=n[Qe];(3&t)===e&&(t&=16383,t+=1,n[Qe]=t)}function t1(n,e,t,r){const o=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&n[il]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[il]+=65536),(a<o||-1==o)&&(t6(n,t,e,c),n[il]=(4294901760&n[il])+c+2),c++}function n1(n,e){Xo(4,n,e);const t=He(null);try{e.call(n)}finally{He(t),Xo(5,n,e)}}function t6(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];i?n[Qe]>>14<n[il]>>16&&(3&n[Qe])===e&&(n[Qe]+=16384,n1(a,o)):n1(a,o)}const qh=-1;class Em{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function fA(n){return n!==qh}function Cm(n){return 32767&n}function wm(n,e){let t=function s6(n){return n>>16}(n),r=e;for(;t>0;)r=r[Za],t--;return r}let pA=!0;function dC(n){const e=pA;return pA=n,e}const r1=255,i1=5;let a6=0;const da={};function hC(n,e){const t=o1(n,e);if(-1!==t)return t;const r=e[Ie];r.firstCreatePass&&(n.injectorIndex=e.length,gA(r.data,n),gA(e,null),gA(r.blueprint,null));const i=fC(n,e),o=n.injectorIndex;if(fA(i)){const s=Cm(i),a=wm(i,e),c=a[Ie].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function gA(n,e){n.push(0,0,0,0,0,0,0,0,e)}function o1(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function fC(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=h1(i),null===r)return qh;if(t++,i=i[Za],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return qh}function mA(n,e,t){!function c6(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Wa)&&(r=t[Wa]),null==r&&(r=t[Wa]=a6++);const i=r&r1;e.data[n+(i>>i1)]|=1<<i}(n,e,t)}function s1(n,e,t){if(t&Tt.Optional||void 0!==n)return n;qc()}function a1(n,e,t,r){if(t&Tt.Optional&&void 0===r&&(r=null),!(t&(Tt.Self|Tt.Host))){const i=n[cr],o=Ii(void 0);try{return i?i.get(e,r,t&Tt.Optional):Gc(e,r,t&Tt.Optional)}finally{Ii(o)}}return s1(r,0,t)}function c1(n,e,t,r=Tt.Default,i){if(null!==n){if(2048&e[Qe]&&!(r&Tt.Self)){const s=function f6(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[Qe]&&!(512&s[Qe]);){const a=l1(o,s,t,r|Tt.Self,da);if(a!==da)return a;let c=o.parent;if(!c){const l=s[WE];if(l){const h=l.get(t,da,r);if(h!==da)return h}c=h1(s),s=s[Za]}o=c}return i}(n,e,t,r,da);if(s!==da)return s}const o=l1(n,e,t,r,da);if(o!==da)return o}return a1(e,t,r,i)}function l1(n,e,t,r,i){const o=function d6(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Wa)?n[Wa]:void 0;return"number"==typeof e?e>=0?e&r1:h6:e}(t);if("function"==typeof o){if(!Kk(e,n,r))return r&Tt.Host?s1(i,0,r):a1(e,t,r,i);try{let s;if(s=o(r),null!=s||r&Tt.Optional)return s;qc()}finally{Zk()}}else if("number"==typeof o){let s=null,a=o1(n,e),c=qh,l=r&Tt.Host?e[Pn][Or]:null;for((-1===a||r&Tt.SkipSelf)&&(c=-1===a?fC(n,e):e[a+8],c!==qh&&d1(r,!1)?(s=e[Ie],a=Cm(c),e=wm(c,e)):a=-1);-1!==a;){const h=e[Ie];if(u1(o,a,h.data)){const g=u6(a,e,t,s,r,l);if(g!==da)return g}c=e[a+8],c!==qh&&d1(r,e[Ie].data[a+8]===l)&&u1(o,a,e)?(s=h,a=Cm(c),e=wm(c,e)):a=-1}}return i}function u6(n,e,t,r,i,o){const s=e[Ie],a=s.data[n+8],h=pC(a,s,t,null==r?ca(a)&&pA:r!=s&&!!(3&a.type),i&Tt.Host&&o===a);return null!==h?Hu(e,s,h,a):da}function pC(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,c=n.directiveStart,h=o>>20,_=i?a+h:n.directiveEnd;for(let v=r?a:a+h;v<_;v++){const w=s[v];if(v<c&&t===w||v>=c&&w.type===t)return v}if(i){const v=s[c];if(v&&Mo(v)&&v.type===t)return c}return null}function Hu(n,e,t,r){let i=n[t];const o=e.data;if(function n6(n){return n instanceof Em}(i)){const s=i;s.resolving&&function P0(n,e){throw e&&e.join(" > "),new Q(-200,n)}(function Ft(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ct(n)}(o[t]));const a=dC(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Ii(s.injectImpl):null;Kk(n,r,Tt.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function e6(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=Si(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==l&&Ii(l),dC(a),s.resolving=!1,Zk()}}return i}function u1(n,e,t){return!!(t[e+(n>>i1)]&1<<n)}function d1(n,e){return!(n&Tt.Self||n&Tt.Host&&e)}class Hr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return c1(this._tNode,this._lView,e,Tu(r),t)}}function h6(){return new Hr(Yt(),ne())}function ti(n){return qi(()=>{const e=n.prototype.constructor,t=e[ws]||_A(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[ws]||_A(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function _A(n){return gh(n)?()=>{const e=_A(nt(n));return e&&e()}:Ka(n)}function h1(n){const e=n[Ie],t=e.type;return 2===t?e.declTNode:1===t?n[Or]:null}function _1(n,e=null,t=null,r){const i=y1(n,e,t,r);return i.resolveInjectorInitializers(),i}function y1(n,e=null,t=null,r,i=new Set){const o=[t||jt,Mh(n)];return r=r||("object"==typeof n?void 0:nr(n)),new Xc(o,e||xh(),r||null,i)}class xr{static#e=this.THROW_IF_NOT_FOUND=wu;static#t=this.NULL=new Ah;static create(e,t){if(Array.isArray(e))return _1({name:""},t,e,"");{const r=e.name??"";return _1({name:r},e.parent,e.providers,r)}}static#n=this.\u0275prov=xe({token:xr,providedIn:"any",factory:()=>fe(xE)});static#r=this.__NG_ELEMENT_ID__=-1}new Ce("").__NG_ELEMENT_ID__=n=>{const e=Yt();if(null===e)throw new Q(204,!1);if(2&e.type)return e.value;if(n&Tt.Optional)return null;throw new Q(204,!1)};function vA(n){return n.ngOriginalError}class es{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&vA(e);for(;t&&vA(t);)t=vA(t);return t||null}}const E1=new Ce("",{providedIn:"root",factory:()=>le(es).handleError.bind(void 0)});let Kh=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=I6;static#t=this.__NG_ENV_ID__=t=>t}return n})();class w6 extends Kh{constructor(e){super(),this._lView=e}onDestroy(e){return p(this._lView,e),()=>function u(n,e){if(null===n[Jo])return;const t=n[Jo].indexOf(e);-1!==t&&n[Jo].splice(t,1)}(this._lView,e)}}function I6(){return new w6(ne())}function b6(){return Qh(Yt(),ne())}function Qh(n,e){return new Ro(ei(n,e))}let Ro=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=b6}return n})();function w1(n){return n instanceof Ro?n.nativeElement:n}function EA(n){return e=>{setTimeout(n,void 0,e)}}const lr=class T6 extends M{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,zE()&&(this.destroyRef=le(Kh,{optional:!0})??void 0)}emit(e){const t=He(null);try{super.next(e)}finally{He(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=EA(o),i&&(i=EA(i)),s&&(s=EA(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof Wt&&e.add(a),a}};function A6(){return this._results[Symbol.iterator]()}class CA{static#e=Symbol.iterator;get changes(){return this._changes??=new lr}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=CA.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=A6)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const r=function bi(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function x0(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function mC(n){return!(128&~n.flags)}const wA=new Map;let P6=0;const yC="__ngContext__";function Mi(n,e){Nr(e)?(n[yC]=e[ol],function M6(n){wA.set(n[ol],n)}(e)):n[yC]=e}function R1(n){return x1(n[Fu])}function N1(n){return x1(n[Ki])}function x1(n){for(;null!==n&&!Xr(n);)n=n[Ki];return n}let bA;const Tm=new Ce("",{providedIn:"root",factory:()=>K6}),K6="ng",$1=new Ce(""),ts=new Ce("",{providedIn:"platform",factory:()=>"unknown"}),H1=new Ce(""),z1=new Ce("",{providedIn:"root",factory:()=>function al(){if(void 0!==bA)return bA;if(typeof document<"u")return document;throw new Q(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let q1=()=>null;function OA(n,e,t=!1){return q1(n,e,t)}const X1=new Ce("",{providedIn:"root",factory:()=>!1});let SC;function iF(n){return function LA(){if(void 0===SC&&(SC=null,un.trustedTypes))try{SC=un.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return SC}()?.createScriptURL(n)||n}class oF{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Dg})`}}function cl(n){return n instanceof oF?n.changingThisBreaksApplicationSecurity:n}function Rm(n,e){const t=function pK(n){return n instanceof oF&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Dg})`)}return t===e}const yK=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ef=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(ef||{});function ll(n){const e=xm();return e?e.sanitize(ef.URL,n)||"":Rm(n,"URL")?cl(n):function VA(n){return(n=String(n)).match(yK)?n:"unsafe:"+n}(ct(n))}function pF(n){const e=xm();if(e)return iF(e.sanitize(ef.RESOURCE_URL,n)||"");if(Rm(n,"ResourceURL"))return iF(cl(n));throw new Q(904,!1)}function xm(){const n=ne();return n&&n[Yo].sanitizer}const xK=/^>|^->|<!--|-->|--!>|<!-$/g,kK=/(<|>)/g,FK="\u200b$1\u200b";function vF(n){return n.ownerDocument.defaultView}function No(n){return n instanceof Function?n():n}var ul=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ul||{});let qA;function GA(n,e){return qA(n,e)}function nf(n,e,t,r,i){if(null!=r){let o,s=!1;Xr(r)?o=r:Nr(r)&&(s=!0,r=r[wn]);const a=Qt(r);0===n&&null!==t?null==i?PF(e,t,a):zu(e,t,a,i||null,!0):1===n&&null!==t?zu(e,t,a,i||null,!0):2===n?function Lm(n,e,t){const r=NC(n,e);r&&function XK(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function n7(n,e,t,r,i){const o=t[Zo];o!==Qt(t)&&nf(e,n,r,o,i);for(let a=rr;a<t.length;a++){const c=t[a];kC(c[Ie],c,n,e,r,o)}}(e,n,o,t,i)}}function KA(n,e){return n.createComment(function mF(n){return n.replace(xK,e=>e.replace(kK,FK))}(e))}function OC(n,e,t){return n.createElement(e,t)}function TF(n,e){e[Yo].changeDetectionScheduler?.notify(8),kC(n,e,e[ot],2,null,null)}function AF(n,e){const t=n[aa],r=e[vr];(Nr(r)||e[Pn]!==r[vr][Pn])&&(n[Qe]|=Vh.HasTransplantedViews),null===t?n[aa]=[e]:t.push(e)}function QA(n,e){const t=n[aa],r=t.indexOf(e);t.splice(r,1)}function km(n,e){if(n.length<=rr)return;const t=rr+e,r=n[t];if(r){const i=r[rl];null!==i&&i!==n&&QA(i,r),e>0&&(n[t-1][Ki]=r[Ki]);const o=Ih(n,rr+e);!function WK(n,e){TF(n,e),e[wn]=null,e[Or]=null}(r[Ie],r);const s=o[hi];null!==s&&s.detachView(o[Ie]),r[vr]=null,r[Ki]=null,r[Qe]&=-129}return r}function RC(n,e){if(!(256&e[Qe])){const t=e[ot];t.destroyNode&&kC(n,e,t,3,null,null),function QK(n){let e=n[Fu];if(!e)return YA(n[Ie],n);for(;e;){let t=null;if(Nr(e))t=e[Fu];else{const r=e[rr];r&&(t=r)}if(!t){for(;e&&!e[Ki]&&e!==n;)Nr(e)&&YA(e[Ie],e),e=e[vr];null===e&&(e=n),Nr(e)&&YA(e[Ie],e),t=e&&e[Ki]}e=t}}(e)}}function YA(n,e){if(256&e[Qe])return;const t=He(null);try{e[Qe]&=-129,e[Qe]|=256,e[As]&&function Yr(n){if(yi(n),zt(n))for(let e=0;e<n.producerNode.length;e++)Ht(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}(e[As]),function ZK(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Em)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];Xo(4,a,c);try{c.call(a)}finally{Xo(5,a,c)}}else{Xo(4,i,o);try{o.call(i)}finally{Xo(5,i,o)}}}}}(n,e),function JK(n,e){const t=n.cleanup,r=e[Ja];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else t[o].call(r[t[o+1]]);null!==r&&(e[Ja]=null);const i=e[Jo];if(null!==i){e[Jo]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(n,e),1===e[Ie].type&&e[ot].destroy();const r=e[rl];if(null!==r&&Xr(e[vr])){r!==e[vr]&&QA(r,e);const i=e[hi];null!==i&&i.detachView(n)}!function O6(n){wA.delete(n[ol])}(e)}finally{He(t)}}function JA(n,e,t){return function SF(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[wn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===Ti.None||o===Ti.Emulated)return null}return ei(r,t)}}(n,e.parent,t)}function zu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function PF(n,e,t){n.appendChild(e,t)}function DF(n,e,t,r,i){null!==r?zu(n,e,t,r,i):PF(n,e,t)}function NC(n,e){return n.parentNode(e)}let ZA,RF=function OF(n,e,t){return 40&n.type?ei(n,t):null};function xC(n,e,t,r){const i=JA(n,r,e),o=e[ot],a=function MF(n,e,t){return RF(n,e,t)}(r.parent||e[Or],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)DF(o,i,t[c],a,!1);else DF(o,i,t,a,!1);void 0!==ZA&&ZA(o,r,e,t,i)}function Fm(n,e){if(null!==e){const t=e.type;if(3&t)return ei(e,n);if(4&t)return XA(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Fm(n,r);{const i=n[e.index];return Xr(i)?XA(-1,i):Qt(i)}}if(32&t)return GA(e,n)()||Qt(n[e.index]);{const r=xF(n,e);return null!==r?Array.isArray(r)?r[0]:Fm(d(n[Pn]),r):Fm(n,e.next)}}return null}function xF(n,e){return null!==e?n[Pn][Or].projection[e.projection]:null}function XA(n,e){const t=rr+n+1;if(t<e.length){const r=e[t],i=r[Ie].firstChild;if(null!==i)return Fm(r,i)}return e[Zo]}function eS(n,e,t,r,i,o,s){for(;null!=t;){const a=r[t.index],c=t.type;if(s&&0===e&&(a&&Mi(Qt(a),r),t.flags|=2),32&~t.flags)if(8&c)eS(n,e,t.child,r,i,o,!1),nf(e,n,i,a,o);else if(32&c){const l=GA(t,r);let h;for(;h=l();)nf(e,n,i,h,o);nf(e,n,i,a,o)}else 16&c?FF(n,e,r,t,i,o):nf(e,n,i,a,o);t=s?t.projectionNext:t.next}}function kC(n,e,t,r,i,o){eS(t,r,n.firstChild,e,i,o,!1)}function FF(n,e,t,r,i,o){const s=t[Pn],c=s[Or].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)nf(e,n,i,c[l],o);else{let l=c;const h=s[vr];mC(r)&&(l.flags|=128),eS(n,e,l,h,i,o,!0)}}function LF(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function VF(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&Mu(n,e,r),null!==i&&LF(n,e,i),null!==o&&function i7(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}const ht={};function Oe(n=1){UF(mt(),ne(),Di()+n,!1)}function UF(n,e,t,r){if(!r)if(3&~e[Qe]){const o=n.preOrderHooks;null!==o&&uC(e,o,0,t)}else{const o=n.preOrderCheckHooks;null!==o&&lC(e,o,t)}$u(t)}function ve(n,e=Tt.Default){const t=ne();return null===t?fe(n,e):c1(Yt(),t,nt(n),e)}function jF(n,e,t,r,i,o){const s=He(null);try{let a=null;i&ia.SignalBased&&(a=e[r][pn]),null!==a&&void 0!==a.transformFn&&(o=a.transformFn(o)),i&ia.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),null!==n.setInput?n.setInput(e,a,o,t,r):jh(e,a,r,o)}finally{He(s)}}function FC(n,e,t,r,i,o,s,a,c,l,h){const g=e.blueprint.slice();return g[wn]=i,g[Qe]=204|r,(null!==l||n&&2048&n[Qe])&&(g[Qe]|=2048),rC(g),g[vr]=g[Za]=n,g[dn]=t,g[Yo]=s||n&&n[Yo],g[ot]=a||n&&n[ot],g[cr]=c||n&&n[cr]||null,g[Or]=o,g[ol]=function D6(){return P6++}(),g[Rr]=h,g[WE]=l,g[Pn]=2==e.type?n[Pn]:g,g}function rf(n,e,t,r,i){let o=n.data[e];if(null===o)o=function tS(n,e,t,r,i){const o=_m(),s=ym(),c=n.data[e]=function h7(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return function nn(){return null!==m.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(n,e,t,r,i),function q8(){return m.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function ju(){const n=m.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return go(o,!0),o}function Vm(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function $F(n,e,t,r,i){const o=Di(),s=2&r;try{$u(-1),s&&e.length>Ye&&UF(n,e,Ye,!1),Xo(s?2:0,i),t(r,i)}finally{$u(o),Xo(s?3:1,i)}}function nS(n,e,t){if(om(e)){const r=He(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{He(r)}}}function rS(n,e,t){Le()&&(function v7(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;ca(t)&&function A7(n,e,t){const r=ei(e,n),i=HF(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=LC(n,FC(n,i,null,s,r,e,null,n[Yo].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||hC(t,e),Mi(r,e);const s=t.initialInputs;for(let a=i;a<o;a++){const c=n.data[a],l=Hu(e,n,a,t);Mi(l,e),null!==s&&S7(0,a-i,l,c,0,s),Mo(c)&&(Qi(t.index,e)[dn]=Hu(e,n,a,t))}}(n,e,t,ei(t,e)),!(64&~t.flags)&&KF(n,e,t))}function iS(n,e,t=ei){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}function HF(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=oS(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function oS(n,e,t,r,i,o,s,a,c,l,h){const g=Ye+r,_=g+i,v=function s7(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:ht);return t}(g,_),w="function"==typeof l?l():l;return v[Ie]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:h}}let zF=()=>null;function qF(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;const s=e[o];if(void 0===s)continue;r??={};let a,c=ia.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(null!==i){if(!i.hasOwnProperty(o))continue;l=i[o]}0===n?GF(r,t,l,a,c):GF(r,t,l,a)}return r}function GF(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],void 0!==i&&o.push(i)}function _o(n,e,t,r,i,o,s,a){const c=ei(e,t);let h,l=e.inputs;!a&&null!=l&&(h=l[r])?(uS(n,t,h,r,i),ca(e)&&function g7(n,e){const t=Qi(e,n);16&t[Qe]||(t[Qe]|=64)}(t,e.index)):3&e.type&&(r=function p7(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(c,r,i))}function sS(n,e,t,r){if(Le()){const i=null===r?null:{"":-1},o=function C7(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(VE(e,s.selectors,!1))if(r||(r=[]),Mo(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),aS(n,e,a.length)}else r.unshift(s),aS(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&WF(n,e,t,s,i,a),i&&function w7(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new Q(-301,!1);r.push(e[i],o)}}}(t,r,i)}t.mergedAttrs=Qa(t.mergedAttrs,t.attrs)}function WF(n,e,t,r,i,o){for(let l=0;l<r.length;l++)mA(hC(t,e),n,r[l].type);!function b7(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=Vm(n,e,r.length,null);for(let l=0;l<r.length;l++){const h=r[l];t.mergedAttrs=Qa(t.mergedAttrs,h.hostAttrs),T7(n,t,e,c,h),I7(c,h,i),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const g=h.type.prototype;!s&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function f7(n,e,t){const i=e.directiveEnd,o=n.data,s=e.attrs,a=[];let c=null,l=null;for(let h=e.directiveStart;h<i;h++){const g=o[h],_=t?t.get(g):null,w=_?_.outputs:null;c=qF(0,g.inputs,h,c,_?_.inputs:null),l=qF(1,g.outputs,h,l,w);const b=null===c||null===s||Ou(e)?null:P7(c,h,s);a.push(b)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,o)}function KF(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function W8(){return m.lFrame.currentDirectiveIndex}();try{$u(o);for(let a=r;a<i;a++){const c=n.data[a],l=e[a];sA(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&E7(c,l)}}finally{$u(-1),sA(s)}}function E7(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function aS(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function I7(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Mo(e)&&(t[""]=n)}}function T7(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=Ka(i.type)),s=new Em(o,Mo(i),ve);n.blueprint[r]=s,t[r]=s,function _7(n,e,t,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function y7(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(n,e,r,Vm(n,t,i.hostVars,ht),i)}function ha(n,e,t,r,i,o){const s=ei(n,e);!function cS(n,e,t,r,i,o,s){if(null==o)n.removeAttribute(e,i,t);else{const a=null==s?ct(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}(e[ot],s,o,n.value,t,r,i)}function S7(n,e,t,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)jF(r,t,s[a++],s[a++],s[a++],s[a++])}function P7(n,e,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function QF(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function YF(n,e){const t=n.contentQueries;if(null!==t){const r=He(null);try{for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const a=n.data[s];aC(t[i]),a.contentQueries(2,e[s],s)}}}finally{He(r)}}}function LC(n,e){return n[Fu]?n[GE][Ki]=e:n[Fu]=e,n[GE]=e,e}function lS(n,e,t){aC(0);const r=He(null);try{e(n,t)}finally{He(r)}}function JF(n){return n[Ja]??=[]}function ZF(n){return n.cleanup??=[]}function VC(n,e){const t=n[cr],r=t?t.get(es,null):null;r&&r.handleError(e)}function uS(n,e,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++],c=t[o++];jF(n.data[s],e[s],r,a,c,i)}}function oc(n,e,t){const r=Uu(e,n);!function bF(n,e,t){n.setValue(e,t)}(n[ot],r,t)}function D7(n,e){const t=Qi(e,n),r=t[Ie];!function M7(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[wn];null!==i&&null===t[Rr]&&(t[Rr]=OA(i,t[cr])),dS(r,t,t[dn])}function dS(n,e,t){lA(e);try{const r=n.viewQuery;null!==r&&lS(1,r,t);const i=n.template;null!==i&&$F(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[hi]?.finishViewCreation(n),n.staticContentQueries&&YF(n,e),n.staticViewQueries&&lS(2,n.viewQuery,t);const o=n.components;null!==o&&function O7(n,e){for(let t=0;t<e.length;t++)D7(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Qe]&=-5,uA()}}function qu(n,e){return!e||null===e.firstChild||mC(n)}function Um(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];null!==o&&r.push(Qt(o)),Xr(o)&&tL(o,r);const s=t.type;if(8&s)Um(n,e,t.child,r);else if(32&s){const a=GA(t,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=xF(e,t);if(Array.isArray(a))r.push(...a);else{const c=d(e[Pn]);Um(c[Ie],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function tL(n,e){for(let t=rr;t<n.length;t++){const r=n[t],i=r[Ie].firstChild;null!==i&&Um(r[Ie],r,i,e)}n[Zo]!==n[wn]&&e.push(n[Zo])}let nL=[];const k7={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Hh(n.lView)},consumerOnSignalRead(){this.lView[As]=this}},F7=100;function UC(n,e=!0,t=0){const r=n[Yo],i=r.rendererFactory;i.begin?.();try{!function L7(n,e){const t=zk();try{qk(!0),fS(n,e);let r=0;for(;Bu(n);){if(r===F7)throw new Q(103,!1);r++,fS(n,1)}}finally{qk(t)}}(n,t)}catch(s){throw e&&VC(n,s),s}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function V7(n,e,t,r){const i=e[Qe];if(!(256&~i))return;e[Yo].inlineEffectRunner?.flush(),lA(e);let a=null,c=null;(function U7(n){return 2!==n.type})(n)&&(c=function R7(n){return n[As]??function N7(n){const e=nL.pop()??Object.create(k7);return e.lView=n,e}(n)}(e),a=function ft(n){return n&&(n.nextProducerIndex=0),He(n)}(c));try{rC(e),function Gk(n){return m.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&$F(n,e,t,2,r);const l=!(3&~i);if(l){const _=n.preOrderCheckHooks;null!==_&&lC(e,_,null)}else{const _=n.preOrderHooks;null!==_&&uC(e,_,0,null),dA(e,0)}if(function B7(n){for(let e=R1(n);null!==e;e=N1(e)){if(!(e[Qe]&Vh.HasTransplantedViews))continue;const t=e[aa];for(let r=0;r<t.length;r++)pm(t[r])}}(e),iL(e,0),null!==n.contentQueries&&YF(n,e),l){const _=n.contentCheckHooks;null!==_&&lC(e,_)}else{const _=n.contentHooks;null!==_&&uC(e,_,1),dA(e,1)}!function o7(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)$u(~i);else{const o=i,s=t[++r],a=t[++r];G8(s,o),a(2,e[o])}}}finally{$u(-1)}}(n,e);const h=n.components;null!==h&&sL(e,h,0);const g=n.viewQuery;if(null!==g&&lS(2,g,r),l){const _=n.viewCheckHooks;null!==_&&lC(e,_)}else{const _=n.viewHooks;null!==_&&uC(e,_,2),dA(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Fh]){for(const _ of e[Fh])_();e[Fh]=null}e[Qe]&=-73}catch(l){throw Hh(e),l}finally{null!==c&&(function Ct(n,e){if(He(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(zt(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ht(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}(c,a),function x7(n){n.lView[As]!==n&&(n.lView=null,nL.push(n))}(c)),uA()}}function iL(n,e){for(let t=R1(n);null!==t;t=N1(t))for(let r=rr;r<t.length;r++)oL(t[r],e)}function j7(n,e,t){oL(Qi(e,n),t)}function oL(n,e){tc(n)&&fS(n,e)}function fS(n,e){const r=n[Ie],i=n[Qe],o=n[As];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!gr(o)),s||=!1,o&&(o.dirty=!1),n[Qe]&=-9217,s)V7(r,n,r.template,n[dn]);else if(8192&i){iL(n,1);const a=r.components;null!==a&&sL(n,a,1)}}function sL(n,e,t){for(let r=0;r<e.length;r++)j7(n,e[r],t)}function Bm(n,e){const t=zk()?64:1088;for(n[Yo].changeDetectionScheduler?.notify(e);n;){n[Qe]|=t;const r=d(n);if(Lu(n)&&!r)return n;n=r}return null}class jm{get rootNodes(){const e=this._lView,t=e[Ie];return Um(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[dn]}set context(e){this._lView[dn]=e}get destroyed(){return!(256&~this._lView[Qe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[vr];if(Xr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(km(e,r),Ih(t,r))}this._attachedToViewContainer=!1}RC(this._lView[Ie],this._lView)}onDestroy(e){p(this._lView,e)}markForCheck(){Bm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Qe]&=-129}reattach(){gm(this._lView),this._lView[Qe]|=128}detectChanges(){this._lView[Qe]|=1024,UC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=Lu(this._lView),t=this._lView[rl];null!==t&&!e&&QA(t,this._lView),TF(this._lView[Ie],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e;const t=Lu(this._lView),r=this._lView[rl];null!==r&&!t&&AF(r,this._lView),gm(this._lView)}}let sc=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=z7}return n})();const $7=sc,H7=class extends $7{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function sf(n,e,t,r){const i=He(null);try{const o=e.tView,c=FC(n,o,t,4096&n[Qe]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[rl]=n[e.index];const h=n[hi];return null!==h&&(c[hi]=h.createEmbeddedView(o)),dS(o,c,t),c}finally{He(i)}}(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new jm(i)}};function z7(){return BC(Yt(),ne())}function BC(n,e){return 4&n.type?new H7(e,n,Qh(n,e)):null}class lf{}const Qm=new Ce("",{providedIn:"root",factory:()=>!1}),SL=new Ce("");class OQ{}class PL{}class NQ{resolveComponentFactory(e){throw function RQ(n){const e=Error(`No component factory found for ${nr(n)}.`);return e.ngComponent=n,e}(e)}}class qC{static#e=this.NULL=new NQ}class GC{}let fa=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function xQ(){const n=ne(),t=Qi(Yt().index,n);return(Nr(t)?t:n)[ot]}()}return n})(),kQ=(()=>{class n{static#e=this.\u0275prov=xe({token:n,providedIn:"root",factory:()=>null})}return n})();const IS={},ML=new Set;function xo(n){ML.has(n)||(ML.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function OL(n){let e=!0;return setTimeout(()=>{e&&(e=!1,n())}),"function"==typeof un.requestAnimationFrame&&un.requestAnimationFrame(()=>{e&&(e=!1,n())}),()=>{e=!1}}function RL(n){let e=!0;return queueMicrotask(()=>{e&&n()}),()=>{e=!1}}function NL(...n){}class Ot{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lr(!1),this.onMicrotaskEmpty=new lr(!1),this.onStable=new lr(!1),this.onError=new lr(!1),typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,function VQ(n){const e=()=>{!function LQ(n){n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,Zone.root.run(()=>{OL(()=>{n.callbackScheduled=!1,TS(n),n.isCheckStableRunning=!0,bS(n),n.isCheckStableRunning=!1})}),TS(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(function UQ(n){return FL(n,"__ignore_ng_zone__")}(a))return t.invokeTask(i,o,s,a);try{return xL(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),kL(n)}},onInvoke:(t,r,i,o,s,a,c)=>{try{return xL(n),t.invoke(i,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function BQ(n){return FL(n,"__scheduler_tick__")}(a)&&e(),kL(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,TS(n),bS(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ot.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(Ot.isInAngularZone())throw new Q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,FQ,NL,NL);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const FQ={};function bS(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function TS(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function xL(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function kL(n){n._nesting--,bS(n)}class AS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lr,this.onMicrotaskEmpty=new lr,this.onStable=new lr,this.onError=new lr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}function FL(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}var Ku=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ku||{});const LL={destroy(){}};function PS(n,e){!e&&function kh(n){if(!zE())throw new Q(-203,!1)}();const t=e?.injector??le(xr);if(!function ns(n){return"browser"===(n??le(xr)).get(ts)}(t))return LL;xo("NgAfterNextRender");const r=t.get(Ym),i=r.handler??=new UL,o=e?.phase??Ku.MixedReadWrite,s=()=>{i.unregister(c),a()},a=t.get(Kh).onDestroy(s),c=Ai(t,()=>new VL(o,()=>{s(),n()}));return i.register(c),{destroy:s}}class VL{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=le(Ot),this.errorHandler=le(es,{optional:!0}),le(lf,{optional:!0})?.notify(6)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}}class UL{constructor(){this.executingCallbacks=!1,this.buckets={[Ku.EarlyRead]:new Set,[Ku.Write]:new Set,[Ku.MixedReadWrite]:new Set,[Ku.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const t of e)t.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let Ym=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=xe({token:n,providedIn:"root",factory:()=>new n})}return n})();function KC(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Mg(i,a):2==o&&(r=Mg(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}class $L extends qC{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=vt(e);return new Xm(t,this.ngModule)}}function HL(n){const e=[];for(const t in n){if(!n.hasOwnProperty(t))continue;const r=n[t];void 0!==r&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}class QC{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Tu(r);const i=this.injector.get(e,IS,r);return i!==IS||t===IS?i:this.parentInjector.get(e,t,r)}}class Xm extends PL{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=HL(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return HL(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function U0(n){return n.map(Ru).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){const o=He(null);try{let s=(i=i||this.ngModule)instanceof $r?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new QC(e,s):e,c=a.get(GC,null);if(null===c)throw new Q(407,!1);const l=a.get(kQ,null),_={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:a.get(Ym,null),changeDetectionScheduler:a.get(lf,null)},v=c.createRenderer(null,this.componentDef),w=this.componentDef.selectors[0][0]||"div",b=r?function a7(n,e,t,r){const o=r.get(X1,!1)||t===Ti.ShadowDom,s=n.selectRootElement(e,o);return function c7(n){zF(n)}(s),s}(v,r,this.componentDef.encapsulation,a):OC(v,w,function qQ(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(w));let A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let N=null;null!==b&&(N=OA(b,a,!0));const R=oS(0,null,null,1,0,null,null,null,null,null,null),V=FC(null,R,null,A,null,null,_,v,a,null,N);let ie,be;lA(V);try{const Ae=this.componentDef;let x,P=null;Ae.findHostDirectiveDefs?(x=[],P=new Map,Ae.findHostDirectiveDefs(Ae,x,P),x.push(Ae)):x=[Ae];const F=function WQ(n,e){const t=n[Ie],r=Ye;return n[r]=e,rf(t,r,2,"#host",null)}(V,b),B=function KQ(n,e,t,r,i,o,s){const a=i[Ie];!function QQ(n,e,t,r){for(const i of n)e.mergedAttrs=Qa(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(KC(e,e.mergedAttrs,!0),null!==t&&VF(r,t,e))}(r,n,e,s);let c=null;null!==e&&(c=OA(e,i[cr]));const l=o.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const g=FC(i,HF(t),null,h,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&aS(a,n,r.length-1),LC(i,g),i[n.index]=g}(F,b,Ae,x,V,_,v);be=ec(R,Ye),b&&function JQ(n,e,t,r){if(r)Mu(n,t,["ng-version","18.0.2"]);else{const{attrs:i,classes:o}=function B0(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!Do(i))break;i=o}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Mu(n,t,i),o&&o.length>0&&LF(n,t,o.join(" "))}}(v,Ae,b,r),void 0!==t&&function ZQ(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(be,this.ngContentSelectors,t),ie=function YQ(n,e,t,r,i,o){const s=Yt(),a=i[Ie],c=ei(s,i);WF(a,i,s,t,null,r);for(let h=0;h<t.length;h++)Mi(Hu(i,a,s.directiveStart+h,s),i);KF(a,i,s),c&&Mi(c,i);const l=Hu(i,a,s.directiveStart+s.componentOffset,s);if(n[dn]=i[dn]=l,null!==o)for(const h of o)h(l,e);return nS(a,s,i),l}(B,Ae,x,P,V,[XQ]),dS(R,V,null)}finally{uA()}return new GQ(this.componentType,ie,Qh(be,V),V,be)}finally{He(o)}}}class GQ extends OQ{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new jm(i,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;uS(o[Ie],o,i,e,t),this.previousInputValues.set(e,t),Bm(Qi(this._tNode.index,o),1)}}get injector(){return new Hr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function XQ(){const n=Yt();cC(ne()[Ie],n)}let Ms=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=eY}return n})();function eY(){return GL(Yt(),ne())}const tY=Ms,zL=class extends tY{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Qh(this._hostTNode,this._hostLView)}get injector(){return new Hr(this._hostTNode,this._hostLView)}get parentInjector(){const e=fC(this._hostTNode,this._hostLView);if(fA(e)){const t=wm(e,this._hostLView),r=Cm(e);return new Hr(t[Ie].data[r+8],t)}return new Hr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=qL(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-rr}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=e.createEmbeddedViewImpl(t||{},o,null);return this.insertImpl(a,i,qu(this._hostTNode,null)),a}createComponent(e,t,r,i,o){const s=e&&!function xu(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}const c=s?e:new Xm(vt(e)),l=r||this.parentInjector;if(!o&&null==c.ngModule){const b=(s?l:this.parentInjector).get($r,null);b&&(o=b)}vt(c.componentType??{});const v=c.create(l,i,null,o);return this.insertImpl(v.hostView,a,qu(this._hostTNode,null)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function nC(n){return Xr(n[vr])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=i[vr],l=new zL(c,c[Or],c[vr]);l.detach(l.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;return function af(n,e,t,r=!0){const i=e[Ie];if(function YK(n,e,t,r){const i=rr+r,o=t.length;r>0&&(t[i-1][Ki]=e),r<o-rr?(e[Ki]=t[i],OE(t,rr+r,e)):(t.push(e),e[Ki]=null),e[vr]=t;const s=e[rl];null!==s&&t!==s&&AF(s,e);const a=e[hi];null!==a&&a.insertView(n),gm(e),e[Qe]|=128}(i,e,n,t),r){const s=XA(t,n),a=e[ot],c=NC(a,n[Zo]);null!==c&&function KK(n,e,t,r,i,o){r[wn]=i,r[Or]=e,kC(n,r,t,1,i,o)}(i,n[Or],a,e,c,s)}const o=e[Rr];null!==o&&null!==o.firstChild&&(o.firstChild=null)}(s,i,o,r),e.attachToViewContainerRef(),OE(OS(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=qL(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=km(this._lContainer,t);r&&(Ih(OS(this._lContainer),t),RC(r[Ie],r))}detach(e){const t=this._adjustIndex(e,-1),r=km(this._lContainer,t);return r&&null!=Ih(OS(this._lContainer),t)?new jm(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function qL(n){return n[8]}function OS(n){return n[8]||(n[8]=[])}function GL(n,e){let t;const r=e[n.index];return Xr(r)?t=r:(t=QF(r,e,null,n),e[n.index]=t,LC(e,t)),WL(t,e,n,r),new zL(t,n,e)}let WL=function QL(n,e,t,r){if(n[Zo])return;let i;i=8&t.type?Qt(r):function nY(n,e){const t=n[ot],r=t.createComment(""),i=ei(e,n);return zu(t,NC(t,i),r,function e7(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Zo]=i},RS=()=>!1;class NS{constructor(e){this.queryList=e,this.matches=null}clone(){return new NS(this.queryList)}setDirty(){this.queryList.setDirty()}}class xS{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const s=t.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new xS(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==US(e,t).matches&&this.queries[t].setDirty()}}class YL{constructor(e,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof e?function uY(n){return n.split(",").map(e=>e.trim())}(e):e}}class kS{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new kS(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class FS{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new FS(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,t,sY(t,o)),this.matchTNodeWithReadOption(e,t,pC(t,e,o,!1,!1))}else r===sc?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,pC(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Ro||i===Ms||i===sc&&4&t.type)this.addMatch(t.index,-2);else{const o=pC(t,e,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function sY(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function cY(n,e,t,r){return-1===t?function aY(n,e){return 11&n.type?Qh(n,e):4&n.type?BC(n,e):null}(e,n):-2===t?function lY(n,e,t){return t===Ro?Qh(e,n):t===sc?BC(e,n):t===Ms?GL(e,n):void 0}(n,e,r):Hu(n,n[Ie],t,e)}function JL(n,e,t,r){const i=e[hi].queries[r];if(null===i.matches){const o=n.data,s=t.matches,a=[];for(let c=0;null!==s&&c<s.length;c+=2){const l=s[c];a.push(l<0?null:cY(e,o[l],s[c+1],t.metadata.read))}i.matches=a}return i.matches}function LS(n,e,t,r){const i=n.queries.getByIndex(t),o=i.matches;if(null!==o){const s=JL(n,e,i,t);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)r.push(s[a/2]);else{const l=o[a+1],h=e[-c];for(let g=rr;g<h.length;g++){const _=h[g];_[rl]===_[vr]&&LS(_[Ie],_,l,r)}if(null!==h[aa]){const g=h[aa];for(let _=0;_<g.length;_++){const v=g[_];LS(v[Ie],v,l,r)}}}}}return r}function eV(n,e,t,r){const i=mt();if(i.firstCreatePass){const o=Yt();(function tV(n,e,t){null===n.queries&&(n.queries=new kS),n.queries.track(new FS(e,t))})(i,new YL(e,t,r),o.index),function dY(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),!(2&~t)&&(i.staticContentQueries=!0)}return function ZL(n,e,t){const r=new CA(!(4&~t));return function d7(n,e,t,r){const i=JF(e);i.push(t),n.firstCreatePass&&ZF(n).push(r,i.length-1)}(n,e,r,r.destroy),(e[hi]??=new xS).queries.push(new NS(r))-1}(i,ne(),t)}function US(n,e){return n.queries.getByIndex(e)}function nV(n,e){const t=n[Ie],r=US(t,e);return r.crossesNgTemplate?LS(t,n,e,[]):JL(t,n,r,e)}function oV(n){return function rV(n){return"function"==typeof n&&void 0!==n[pn]}(n)&&"function"==typeof n.set}function hn(n){let e=function mV(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Mo(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=JC(n.inputs),s.inputTransforms=JC(n.inputTransforms),s.declaredInputs=JC(n.declaredInputs),s.outputs=JC(n.outputs);const a=i.hostBindings;a&&AY(n,a);const c=i.viewQuery,l=i.contentQueries;if(c&&bY(n,c),l&&TY(n,l),wY(n,i),hE(n.outputs,i.outputs),Mo(i)&&i.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===hn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function IY(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Qa(i.hostAttrs,t=Qa(t,i.hostAttrs))}}(r)}function wY(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];if(void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function JC(n){return n===ho?{}:n===jt?[]:n}function bY(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function TY(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function AY(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function EV(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}class Qu{}class CV{}class jS extends Qu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $L(this);const i=Zr(e);this._bootstrapComponents=No(i.bootstrap),this._r3Injector=y1(e,t,[{provide:Qu,useValue:this},{provide:qC,useValue:this.componentFactoryResolver},...r],nr(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class $S extends CV{constructor(e){super(),this.moduleType=e}create(e){return new jS(this.moduleType,e,[])}}class wV extends Qu{constructor(e){super(),this.componentFactoryResolver=new $L(this),this.instance=null;const t=new Xc([...e.providers,{provide:Qu,useValue:this},{provide:qC,useValue:this.componentFactoryResolver}],e.parent||xh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function ZC(n,e,t=null){return new wV({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let ac=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new te(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ew(n){return!!function HS(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function pa(n,e,t){return n[e]=t}function Er(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Yu(n,e,t,r){const i=Er(n,e,t);return Er(n,e+1,r)||i}function n_(n,e,t,r,i,o,s,a,c,l){const h=t+Ye,g=e.firstCreatePass?function UY(n,e,t,r,i,o,s,a,c){const l=e.consts,h=rf(e,n,4,s||null,a||null);sS(e,t,h,Yi(l,c)),cC(e,h);const g=h.tView=oS(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}(h,e,n,r,i,o,s,a,c):e.data[h];go(g,!1);const _=bV(e,n,g,t);vm()&&xC(e,n,_,g),Mi(_,n);const v=QF(_,n,_,g);return n[h]=v,LC(n,v),function KL(n,e,t){return RS(n,e,t)}(v,g,n),sl(g)&&rS(e,n,g),null!=c&&iS(n,g,l),g}function an(n,e,t,r,i,o,s,a){const c=ne(),l=mt();return n_(c,l,n,e,t,r,i,Yi(l.consts,o),s,a),an}let bV=function TV(n,e,t,r){return ua(!0),e[ot].createComment("")};function Os(n,e,t,r){const i=ne();return Er(i,Ds(),e)&&(mt(),ha(On(),i,n,e,t,r)),Os}function Ef(n,e,t,r,i,o){const a=Yu(n,function nc(){return m.lFrame.bindingIndex}(),t,i);return rc(2),a?e+ct(t)+r+ct(i)+o:ht}function aw(n,e){return n<<17|e<<2}function pl(n){return n>>17&32767}function XS(n){return 2|n}function Zu(n){return(131068&n)>>2}function eP(n,e){return-131069&n|e<<2}function tP(n){return 1|n}function n2(n,e,t,r){const i=n[t+1],o=null===e;let s=r?pl(i):Zu(i),a=!1;for(;0!==s&&(!1===a||o);){const l=n[s+1];TJ(n[s],e)&&(a=!0,n[s+1]=r?tP(l):XS(l)),s=r?pl(l):Zu(l)}a&&(n[t+1]=r?XS(i):tP(i))}function TJ(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Qc(n,e)>=0}function rt(n,e,t){const r=ne();return Er(r,Ds(),e)&&_o(mt(),On(),r,n,e,r[ot],t,!1),rt}function nP(n,e,t,r,i){const s=i?"class":"style";uS(n,t,e.inputs[s],s,r)}function rP(n,e,t){return Rs(n,e,t,!1),rP}function Xu(n,e){return Rs(n,e,null,!0),Xu}function Rs(n,e,t,r){const i=ne(),o=mt(),s=rc(2);o.firstUpdatePass&&function u2(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[Di()],s=function l2(n,e){return e>=n.expandoStartIndex}(n,t);(function p2(n,e){return!!(n.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function xJ(n,e,t,r){const i=function aA(n){const e=m.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=s_(t=iP(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=iP(i,n,e,t,r),null===o){let c=function kJ(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Zu(r))return n[pl(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=iP(null,n,e,c[1],r),c=s_(c,e.attrs,r),function FJ(n,e,t,r){n[pl(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else o=function LJ(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=s_(r,n[o].hostAttrs,t);return s_(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function IJ(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=pl(s),c=Zu(s);n[r]=t;let h,l=!1;if(Array.isArray(t)?(h=t[1],(null===h||Qc(t,h)>0)&&(l=!0)):h=t,i)if(0!==c){const _=pl(n[a+1]);n[r+1]=aw(_,a),0!==_&&(n[_+1]=eP(n[_+1],r)),n[a+1]=function CJ(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=aw(a,0),0!==a&&(n[a+1]=eP(n[a+1],r)),a=r;else n[r+1]=aw(c,0),0===a?a=r:n[c+1]=eP(n[c+1],r),c=r;l&&(n[r+1]=XS(n[r+1])),n2(n,h,r,!0),n2(n,h,r,!1),function bJ(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Qc(o,e)>=0&&(t[r+1]=tP(t[r+1]))}(e,h,n,r,o),s=aw(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}(o,n,s,r),e!==ht&&Er(i,s,e)&&function h2(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],h=function wJ(n){return!(1&~n)}(l)?f2(c,e,t,i,Zu(l),s):void 0;cw(h)||(cw(o)||function EJ(n){return!(2&~n)}(l)&&(o=f2(c,null,t,i,a,s)),function r7(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:ul.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=ul.Important),n.setStyle(t,r,i,o))}}(r,s,Uu(Di(),t),i,o))}(o,o.data[Di()],i,i[ot],n,i[s+1]=function jJ(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=nr(cl(n)))),n}(e,t),r,s)}function iP(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=s_(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function s_(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Gi(n,s,!!t||e[++o]))}return void 0===n?null:n}function f2(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const c=n[i],l=Array.isArray(c),h=l?c[1]:c,g=null===h;let _=t[i+1];_===ht&&(_=g?jt:void 0);let v=g?Th(_,r):h===r?_:void 0;if(l&&!cw(v)&&(v=Th(c,r)),cw(v)&&(a=v,s))return a;const w=n[i+1];i=s?pl(w):Zu(w)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=Th(c,r))}return a}function cw(n){return void 0!==n}function se(n,e,t,r){const i=ne(),o=mt(),s=Ye+n,a=i[ot],c=o.firstCreatePass?function uZ(n,e,t,r,i,o){const s=e.consts,c=rf(e,n,2,r,Yi(s,i));return sS(e,t,c,Yi(s,o)),null!==c.attrs&&KC(c,c.attrs,!1),null!==c.mergedAttrs&&KC(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,i,e,t,r):o.data[s],l=y2(o,i,c,a,e,n);i[s]=l;const h=sl(c);return go(c,!0),VF(a,l,c),!function df(n){return!(32&~n.flags)}(c)&&vm()&&xC(o,i,l,c),0===function oe(){return m.lFrame.elementDepthCount}()&&Mi(l,i),function Se(){m.lFrame.elementDepthCount++}(),h&&(rS(o,i,c),nS(o,c,i)),null!==r&&iS(i,c),se}function re(){let n=Yt();ym()?oA():(n=n.parent,go(n,!1));const e=n;(function Oo(n){return m.skipHydrationRootTNode===n})(e)&&function sC(){m.skipHydrationRootTNode=null}(),function Ue(){m.lFrame.elementDepthCount--}();const t=mt();return t.firstCreatePass&&(cC(t,n),om(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function i6(n){return!!(8&n.flags)}(e)&&nP(t,e,ne(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function o6(n){return!!(16&n.flags)}(e)&&nP(t,e,ne(),e.stylesWithoutHost,!1),re}function _n(n,e,t,r){return se(n,e,t,r),re(),_n}let y2=(n,e,t,r,i,o)=>(ua(!0),OC(r,i,function Xk(){return m.lFrame.currentNamespace}()));function a_(n,e,t){const r=ne(),i=mt(),o=n+Ye,s=i.firstCreatePass?function fZ(n,e,t,r,i){const o=e.consts,s=Yi(o,r),a=rf(e,n,8,"ng-container",s);return null!==s&&KC(a,s,!0),sS(e,t,a,Yi(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,t):i.data[o];go(s,!0);const a=v2(i,r,s,n);return r[o]=a,vm()&&xC(i,r,a,s),Mi(a,r),sl(s)&&(rS(i,r,s),nS(i,s,r)),null!=t&&iS(r,s),a_}function c_(){let n=Yt();const e=mt();return ym()?oA():(n=n.parent,go(n,!1)),e.firstCreatePass&&(cC(e,n),om(n)&&e.queries.elementEnd(n)),c_}function cP(n,e,t){return a_(n,e,t),c_(),cP}let v2=(n,e,t,r)=>(ua(!0),KA(e[ot],""));function yo(){return ne()}const ed=void 0;var _Z=["en",[["a","p"],["AM","PM"],ed],[["AM","PM"],ed,ed],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ed,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ed,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ed,"{1} 'at' {0}",ed],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function mZ(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let Pf={};function Zi(n){const e=function yZ(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=I2(e);if(t)return t;const r=e.split("-")[0];if(t=I2(r),t)return t;if("en"===r)return _Z;throw new Q(701,!1)}function I2(n){return n in Pf||(Pf[n]=un.ng&&un.ng.common&&un.ng.common.locales&&un.ng.common.locales[n]),Pf[n]}var Rn=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Rn||{});const Df="en-US";let b2=Df;let H2=(n,e,t)=>{};function At(n,e,t,r){const i=ne(),o=mt(),s=Yt();return dP(o,i,i[ot],s,n,e,r),At}function dP(n,e,t,r,i,o,s){const a=sl(r),l=n.firstCreatePass&&ZF(n),h=e[dn],g=JF(e);let _=!0;if(3&r.type||s){const b=ei(r,e),A=s?s(b):b,N=g.length,R=s?ie=>s(Qt(ie[r.index])):r.index;let V=null;if(!s&&a&&(V=function sX(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[Ja],c=i[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==V)(V.__ngLastListenerFn__||V).__ngNextListenerFn__=o,V.__ngLastListenerFn__=o,_=!1;else{o=W2(r,e,h,o),H2(b,i,o);const ie=t.listen(A,i,o);g.push(o,ie),l&&l.push(i,R,N,N+1)}}else o=W2(r,e,h,o);const v=r.outputs;let w;if(_&&null!==v&&(w=v[i])){const b=w.length;if(b)for(let A=0;A<b;A+=2){const be=e[w[A]][w[A+1]].subscribe(o),Ae=g.length;g.push(o,be),l&&l.push(i,r.index,Ae,-(Ae+1))}}}function G2(n,e,t,r){const i=He(null);try{return Xo(6,e,t),!1!==t(r)}catch(o){return VC(n,o),!1}finally{Xo(7,e,t),He(i)}}function W2(n,e,t,r){return function i(o){if(o===Function)return r;Bm(n.componentOffset>-1?Qi(n.index,e):e,5);let a=G2(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=G2(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function It(n=1){return function Q8(n){return(m.lFrame.contextLView=function iC(n,e){for(;n>0;)e=e[Za],n--;return e}(n,m.lFrame.contextLView))[dn]}(n)}function oU(){return function VS(n,e){return n[hi].queries[e].queryList}(ne(),cA())}function fw(n){return la(function z8(){return m.lFrame.contextLView}(),Ye+n)}function _e(n,e=""){const t=ne(),r=mt(),i=n+Ye,o=r.firstCreatePass?rf(r,i,1,e,null):r.data[i],s=gU(r,t,o,e,n);t[i]=s,vm()&&xC(r,t,s,o),go(o,!1)}let gU=(n,e,t,r,i)=>(ua(!0),function WA(n,e){return n.createText(e)}(e[ot],r));function qr(n){return td("",n,""),qr}function td(n,e,t){const r=ne(),i=function vf(n,e,t,r){return Er(n,Ds(),t)?e+ct(t)+r:ht}(r,n,e,t);return i!==ht&&oc(r,Di(),i),td}function pw(n,e,t,r,i){const o=ne(),s=Ef(o,n,e,t,r,i);return s!==ht&&oc(o,Di(),s),pw}function _a(n,e,t){oV(e)&&(e=e());const r=ne();return Er(r,Ds(),e)&&_o(mt(),On(),r,n,e,r[ot],t,!1),_a}function cc(n,e){const t=oV(n);return t&&n.set(e),t}function ya(n,e){const t=ne(),r=mt(),i=Yt();return dP(r,t,t[ot],i,n,e),ya}function fP(n,e,t,r,i){if(n=nt(n),Array.isArray(n))for(let o=0;o<n.length;o++)fP(n[o],e,t,r,i);else{const o=mt(),s=ne(),a=Yt();let c=Ts(n)?n:nt(n.provide);const l=HE(n),h=1048575&a.providerIndexes,g=a.directiveStart,_=a.providerIndexes>>20;if(Ts(n)||!n.multi){const v=new Em(l,i,ve),w=gP(c,e,i?h:h+_,g);-1===w?(mA(hC(a,s),o,c),pP(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),s.push(v)):(t[w]=v,s[w]=v)}else{const v=gP(c,e,h+_,g),w=gP(c,e,h,h+_),A=w>=0&&t[w];if(i&&!A||!i&&!(v>=0&&t[v])){mA(hC(a,s),o,c);const N=function MX(n,e,t,r,i){const o=new Em(n,t,ve);return o.multi=[],o.index=e,o.componentProviders=0,IU(o,i,r&&!t),o}(i?DX:PX,t.length,i,r,l);!i&&A&&(t[w].providerFactory=N),pP(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(N),s.push(N)}else pP(o,n,v>-1?v:w,IU(t[i?w:v],l,!i&&r));!i&&r&&A&&t[w].componentProviders++}}}function pP(n,e,t,r){const i=Ts(e),o=function $0(n){return!!n.useClass}(e);if(i||o){const c=(o?nt(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const h=l.indexOf(t);-1===h?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function IU(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function gP(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function PX(n,e,t,r){return mP(this.multi,[])}function DX(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Hu(t,t[Ie],this.providerFactory.index,r);o=a.slice(0,s),mP(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],mP(i,o);return o}function mP(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Wn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function SX(n,e,t){const r=mt();if(r.firstCreatePass){const i=Mo(n);fP(t,r.data,r.blueprint,i,!0),fP(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}let OX=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=Nu(0,t.type),i=r.length>0?ZC([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=xe({token:n,providedIn:"environment",factory:()=>new n(fe($r))})}return n})();function bU(n){xo("NgStandalone"),n.getStandaloneInjector=e=>e.get(OX).getOrCreateStandaloneInjector(n)}function p_(n,e){const t=n[e];return t===ht?void 0:t}function SU(n,e,t,r,i,o){const s=e+t;return Er(n,s,i)?pa(n,s+1,o?r.call(o,i):r(i)):p_(n,s+1)}function nd(n,e){const t=mt();let r;const i=n+Ye;t.firstCreatePass?(r=function HX(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const o=r.factory||(r.factory=Ka(r.type)),a=Ii(ve);try{const c=dC(!1),l=o();return dC(c),function gX(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,ne(),i,l),l}finally{Ii(a)}}function g_(n,e,t){const r=n+Ye,i=ne(),o=la(i,r);return m_(i,r)?SU(i,Ji(),e,o.transform,t,o):o.transform(t)}function _P(n,e,t,r){const i=n+Ye,o=ne(),s=la(o,i);return m_(o,i)?function PU(n,e,t,r,i,o,s){const a=e+t;return Yu(n,a,i,o)?pa(n,a+2,s?r.call(s,i,o):r(i,o)):p_(n,a+2)}(o,Ji(),e,s.transform,t,r,s):s.transform(t,r)}function m_(n,e){return n[Ie].data[e].pure}function yP(n,e){return BC(n,e)}class Rf{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const pee=new Rf("18.0.2");let WU=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const ZU=new Ce(""),yw=new Ce("");let AP,bP=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,AP||(function Bee(n){AP=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ot.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Ot),fe(TP),fe(yw))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})(),TP=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return AP?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function v_(n){return!!n&&"function"==typeof n.then}function XU(n){return!!n&&"function"==typeof n.subscribe}const SP=new Ce("");let PP=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=le(SP,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const o=i();if(v_(o))t.push(o);else if(XU(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const vw=new Ce("");function nB(n,e){return Array.isArray(e)?e.reduce(nB,n):{...n,...e}}let xs=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=le(E1),this.afterRenderEffectManager=le(Ym),this.zonelessEnabled=le(Qm),this.externalTestViews=new Set,this.beforeRender=new M,this.afterTick=new M,this.componentTypes=[],this.components=[],this.isStable=le(ac).hasPendingTasks.pipe($e(t=>!t)),this._injector=le($r)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof PL;if(!this._injector.get(PP).done)throw!i&&function sa(n){const e=vt(n)||_r(n)||yr(n);return null!==e&&e.standalone}(t),new Q(405,!1);let s;s=i?t:this._injector.get(qC).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function jee(n){return n.isBoundToModule}(s)?void 0:this._injector.get(Qu),l=s.create(xr.NULL,[],r||s.selector,a),h=l.location.nativeElement,g=l.injector.get(ZU,null);return g?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Ew(this.components,l),g?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new Q(101,!1);const r=He(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,He(r),this.afterTick.next()}}detectChangesInAttachedViews(t){let r=null;this._injector.destroyed||(r=this._injector.get(GC,null,{optional:!0}));let i=0;const o=this.afterRenderEffectManager;for(;i<10;){const s=0===i;if(t||!s){this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:c}of this._views)Hee(a,c,s,this.zonelessEnabled)}else r?.begin?.(),r?.end?.();if(i++,o.executeInternalCallbacks(),!this.allViews.some(({_lView:a})=>Bu(a))&&(o.execute(),!this.allViews.some(({_lView:a})=>Bu(a))))break}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Ew(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(vw,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ew(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Q(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ew(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Hee(n,e,t,r){(t||Bu(n))&&UC(n,e,t&&!r?0:1)}class zee{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let iB=(()=>{class n{compileModuleSync(t){return new $S(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=No(Zr(t).declarations).reduce((s,a)=>{const c=vt(a);return c&&s.push(new Xm(c)),s},[]);return new zee(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wee=(()=>{class n{constructor(){this.zone=le(Ot),this.changeDetectionScheduler=le(lf),this.applicationRef=le(xs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function DP({ngZoneFactory:n,ignoreChangesOutsideZone:e}){return n??=()=>new Ot(MP()),[{provide:Ot,useFactory:n},{provide:fo,multi:!0,useFactory:()=>{const t=le(Wee,{optional:!0});return()=>t.initialize()}},{provide:fo,multi:!0,useFactory:()=>{const t=le(Yee);return()=>{t.initialize()}}},{provide:E1,useFactory:Qee},!0===e?{provide:SL,useValue:!0}:[]]}function Qee(){const n=le(Ot),e=le(es);return t=>n.runOutsideAngular(()=>e.handleError(t))}function MP(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let Yee=(()=>{class n{constructor(){this.subscription=new Wt,this.initialized=!1,this.zone=le(Ot),this.pendingTasks=le(ac)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ot.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ot.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),E_=(()=>{class n{constructor(){this.appRef=le(xs),this.taskService=le(ac),this.ngZone=le(Ot),this.zonelessEnabled=le(Qm),this.disableScheduling=le(SL,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Wt,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof AS||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?RL:OL;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Ot.isInAngularZone())}tick(t){if(this.runningTick||this.appRef.destroyed)return;const r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(t)},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,RL(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const lc=new Ce("",{providedIn:"root",factory:()=>le(lc,Tt.Optional|Tt.SkipSelf)||function Jee(){return typeof $localize<"u"&&$localize.locale||Df}()}),RP=new Ce("");let cB=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function jQ(n="zone.js",e){return"noop"===n?new AS:"zone.js"===n?new Ot(e):n}(r?.ngZone,MP({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=r?.ignoreChangesOutsideZone,s=function NY(n,e,t){return new jS(n,e,t)}(t.moduleType,this.injector,[...DP({ngZoneFactory:()=>i,ignoreChangesOutsideZone:o}),{provide:lf,useExisting:E_}]),a=s.injector.get(es,null);return i.runOutsideAngular(()=>{const c=i.onError.subscribe({next:l=>{a.handleError(l)}});s.onDestroy(()=>{Ew(this._modules,s),c.unsubscribe()})}),function tB(n,e,t){try{const r=t();return v_(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(a,i,()=>{const c=s.injector.get(PP);return c.runInitializers(),c.donePromise.then(()=>(function T2(n){"string"==typeof n&&(b2=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(lc,Df)||Df),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=nB({},r);return function Gee(n,e,t){const r=new $S(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(xs);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new Q(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Q(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(RP,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(fe(xr))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),gl=null;const lB=new Ce("");function uB(n,e,t=[]){const r=`Platform: ${e}`,i=new Ce(r);return(o=[])=>{let s=NP();if(!s||s.injector.get(lB,!1)){const a=[...t,...o,{provide:i,useValue:!0}];n?n(a):function ete(n){if(gl&&!gl.get(lB,!1))throw new Q(400,!1);(function eB(){!function kc(n){si=n}(()=>{throw new Q(600,!1)})})(),gl=n;const e=n.get(cB);(function hB(n){n.get($1,null)?.forEach(t=>t())})(n)}(function dB(n=[],e){return xr.create({name:e,providers:[{provide:Yg,useValue:"platform"},{provide:RP,useValue:new Set([()=>gl=null])},...n]})}(a,r))}return function tte(n){const e=NP();if(!e)throw new Q(401,!1);return e}()}}function NP(){return gl?.get(cB)??null}let C_=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=rte}return n})();function rte(n){return function ite(n,e,t){if(ca(n)&&!t){const r=Qi(n.index,e);return new jm(r,r)}return 47&n.type?new jm(e[Pn],e):null}(Yt(),ne(),!(16&~n))}class yB{constructor(){}supports(e){return ew(e)}create(e){return new lte(e)}}const cte=(n,e)=>e;class lte{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||cte}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<EB(r,i,o)?t:r,a=EB(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const l=a-i,h=c-i;if(l!=h){for(let _=0;_<l;_++){const v=_<o.length?o[_]:o[_]=0,w=v+_;h<=w&&w<l&&(o[_]=v+1)}o[s.previousIndex]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!ew(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function LY(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new ute(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new vB),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vB),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class ute{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dte{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class vB{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new dte,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function EB(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function wB(){return new VP([new yB])}let VP=(()=>{class n{static#e=this.\u0275prov=xe({token:n,providedIn:"root",factory:wB});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||wB()),deps:[[n,new wh,new Ch]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new Q(901,!1)}}return n})();const mte=uB(null,"core",[]);let _te=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(fe(xs))};static#t=this.\u0275mod=Wi({type:n});static#n=this.\u0275inj=ui({})}return n})();function Nf(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function YB(n){const e=He(null);try{return n()}finally{He(e)}}let JB=null;function ml(){return JB}class sne{}const Eo=new Ce("");let jP=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:()=>le(cne),providedIn:"platform"})}return n})();const ane=new Ce("");let cne=(()=>{class n extends jP{constructor(){super(),this._doc=le(Eo),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ml().getBaseHref(this._doc)}onPopState(t){const r=ml().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=ml().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function $P(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ZB(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function uc(n){return n&&"?"!==n[0]?"?"+n:n}let id=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:()=>le(ej),providedIn:"root"})}return n})();const XB=new Ce("");let ej=(()=>{class n extends id{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??le(Eo).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return $P(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+uc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+uc(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+uc(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(jP),fe(XB,8))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lne=(()=>{class n extends id{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=$P(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+uc(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+uc(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(jP),fe(XB,8))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})(),b_=(()=>{class n{constructor(t){this._subject=new lr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function hne(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(ZB(tj(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+uc(r))}normalize(t){return n.stripTrailingSlash(function dne(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,tj(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+uc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+uc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=uc;static#t=this.joinWithSlash=$P;static#n=this.stripTrailingSlash=ZB;static#r=this.\u0275fac=function(r){return new(r||n)(fe(id))};static#i=this.\u0275prov=xe({token:n,factory:()=>function une(){return new b_(fe(id))}(),providedIn:"root"})}return n})();function tj(n){return n.replace(/\/index.html$/,"")}var Ow=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(Ow||{}),eo=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(eo||{}),In=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(In||{}),Fo=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Fo||{});const kr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Rw(n,e){return os(Zi(n)[Rn.DateFormat],e)}function Nw(n,e){return os(Zi(n)[Rn.TimeFormat],e)}function xw(n,e){return os(Zi(n)[Rn.DateTimeFormat],e)}function is(n,e){const t=Zi(n),r=t[Rn.NumberSymbols][e];if(typeof r>"u"){if(e===kr.CurrencyDecimal)return t[Rn.NumberSymbols][kr.Decimal];if(e===kr.CurrencyGroup)return t[Rn.NumberSymbols][kr.Group]}return r}function rj(n){if(!n[Rn.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Rn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function os(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function zP(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Ane=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,kw={},Sne=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var dc=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(dc||{}),rn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(rn||{}),on=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(on||{});function Pne(n,e,t,r){let i=function Lne(n){if(sj(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,o=1,s=1]=n.split("-").map(a=>+a);return Fw(i,o-1,s)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Ane))return function Vne(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return o.call(e,s,a,c,l),e}(r)}const e=new Date(n);if(!sj(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=hc(t,e)||e;let a,s=[];for(;e;){if(a=Sne.exec(e),!a){s.push(e);break}{s=s.concat(a.slice(1));const h=s.pop();if(!h)break;e=h}}let c=i.getTimezoneOffset();r&&(c=oj(r,c),i=function Fne(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function kne(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(oj(e,i)-i))}(i,r,!0));let l="";return s.forEach(h=>{const g=function xne(n){if(GP[n])return GP[n];let e;switch(n){case"G":case"GG":case"GGG":e=Nn(on.Eras,In.Abbreviated);break;case"GGGG":e=Nn(on.Eras,In.Wide);break;case"GGGGG":e=Nn(on.Eras,In.Narrow);break;case"y":e=Fr(rn.FullYear,1,0,!1,!0);break;case"yy":e=Fr(rn.FullYear,2,0,!0,!0);break;case"yyy":e=Fr(rn.FullYear,3,0,!1,!0);break;case"yyyy":e=Fr(rn.FullYear,4,0,!1,!0);break;case"Y":e=Bw(1);break;case"YY":e=Bw(2,!0);break;case"YYY":e=Bw(3);break;case"YYYY":e=Bw(4);break;case"M":case"L":e=Fr(rn.Month,1,1);break;case"MM":case"LL":e=Fr(rn.Month,2,1);break;case"MMM":e=Nn(on.Months,In.Abbreviated);break;case"MMMM":e=Nn(on.Months,In.Wide);break;case"MMMMM":e=Nn(on.Months,In.Narrow);break;case"LLL":e=Nn(on.Months,In.Abbreviated,eo.Standalone);break;case"LLLL":e=Nn(on.Months,In.Wide,eo.Standalone);break;case"LLLLL":e=Nn(on.Months,In.Narrow,eo.Standalone);break;case"w":e=qP(1);break;case"ww":e=qP(2);break;case"W":e=qP(1,!0);break;case"d":e=Fr(rn.Date,1);break;case"dd":e=Fr(rn.Date,2);break;case"c":case"cc":e=Fr(rn.Day,1);break;case"ccc":e=Nn(on.Days,In.Abbreviated,eo.Standalone);break;case"cccc":e=Nn(on.Days,In.Wide,eo.Standalone);break;case"ccccc":e=Nn(on.Days,In.Narrow,eo.Standalone);break;case"cccccc":e=Nn(on.Days,In.Short,eo.Standalone);break;case"E":case"EE":case"EEE":e=Nn(on.Days,In.Abbreviated);break;case"EEEE":e=Nn(on.Days,In.Wide);break;case"EEEEE":e=Nn(on.Days,In.Narrow);break;case"EEEEEE":e=Nn(on.Days,In.Short);break;case"a":case"aa":case"aaa":e=Nn(on.DayPeriods,In.Abbreviated);break;case"aaaa":e=Nn(on.DayPeriods,In.Wide);break;case"aaaaa":e=Nn(on.DayPeriods,In.Narrow);break;case"b":case"bb":case"bbb":e=Nn(on.DayPeriods,In.Abbreviated,eo.Standalone,!0);break;case"bbbb":e=Nn(on.DayPeriods,In.Wide,eo.Standalone,!0);break;case"bbbbb":e=Nn(on.DayPeriods,In.Narrow,eo.Standalone,!0);break;case"B":case"BB":case"BBB":e=Nn(on.DayPeriods,In.Abbreviated,eo.Format,!0);break;case"BBBB":e=Nn(on.DayPeriods,In.Wide,eo.Format,!0);break;case"BBBBB":e=Nn(on.DayPeriods,In.Narrow,eo.Format,!0);break;case"h":e=Fr(rn.Hours,1,-12);break;case"hh":e=Fr(rn.Hours,2,-12);break;case"H":e=Fr(rn.Hours,1);break;case"HH":e=Fr(rn.Hours,2);break;case"m":e=Fr(rn.Minutes,1);break;case"mm":e=Fr(rn.Minutes,2);break;case"s":e=Fr(rn.Seconds,1);break;case"ss":e=Fr(rn.Seconds,2);break;case"S":e=Fr(rn.FractionalSeconds,1);break;case"SS":e=Fr(rn.FractionalSeconds,2);break;case"SSS":e=Fr(rn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Vw(dc.Short);break;case"ZZZZZ":e=Vw(dc.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Vw(dc.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Vw(dc.Long);break;default:return null}return GP[n]=e,e}(h);l+=g?g(i,t,c):"''"===h?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Fw(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function hc(n,e){const t=function pne(n){return Zi(n)[Rn.LocaleId]}(n);if(kw[t]??={},kw[t][e])return kw[t][e];let r="";switch(e){case"shortDate":r=Rw(n,Fo.Short);break;case"mediumDate":r=Rw(n,Fo.Medium);break;case"longDate":r=Rw(n,Fo.Long);break;case"fullDate":r=Rw(n,Fo.Full);break;case"shortTime":r=Nw(n,Fo.Short);break;case"mediumTime":r=Nw(n,Fo.Medium);break;case"longTime":r=Nw(n,Fo.Long);break;case"fullTime":r=Nw(n,Fo.Full);break;case"short":const i=hc(n,"shortTime"),o=hc(n,"shortDate");r=Lw(xw(n,Fo.Short),[i,o]);break;case"medium":const s=hc(n,"mediumTime"),a=hc(n,"mediumDate");r=Lw(xw(n,Fo.Medium),[s,a]);break;case"long":const c=hc(n,"longTime"),l=hc(n,"longDate");r=Lw(xw(n,Fo.Long),[c,l]);break;case"full":const h=hc(n,"fullTime"),g=hc(n,"fullDate");r=Lw(xw(n,Fo.Full),[h,g])}return r&&(kw[t][e]=r),r}function Lw(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function ks(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function Fr(n,e,t=0,r=!1,i=!1){return function(o,s){let a=function Mne(n,e){switch(n){case rn.FullYear:return e.getFullYear();case rn.Month:return e.getMonth();case rn.Date:return e.getDate();case rn.Hours:return e.getHours();case rn.Minutes:return e.getMinutes();case rn.Seconds:return e.getSeconds();case rn.FractionalSeconds:return e.getMilliseconds();case rn.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,o);if((t>0||a>-t)&&(a+=t),n===rn.Hours)0===a&&-12===t&&(a=12);else if(n===rn.FractionalSeconds)return function Dne(n,e){return ks(n,3).substring(0,e)}(a,e);const c=is(s,kr.MinusSign);return ks(a,e,c,r,i)}}function Nn(n,e,t=eo.Format,r=!1){return function(i,o){return function One(n,e,t,r,i,o){switch(t){case on.Months:return function _ne(n,e,t){const r=Zi(n),o=os([r[Rn.MonthsFormat],r[Rn.MonthsStandalone]],e);return os(o,t)}(e,i,r)[n.getMonth()];case on.Days:return function mne(n,e,t){const r=Zi(n),o=os([r[Rn.DaysFormat],r[Rn.DaysStandalone]],e);return os(o,t)}(e,i,r)[n.getDay()];case on.DayPeriods:const s=n.getHours(),a=n.getMinutes();if(o){const l=function Cne(n){const e=Zi(n);return rj(e),(e[Rn.ExtraData][2]||[]).map(r=>"string"==typeof r?zP(r):[zP(r[0]),zP(r[1])])}(e),h=function wne(n,e,t){const r=Zi(n);rj(r);const o=os([r[Rn.ExtraData][0],r[Rn.ExtraData][1]],e)||[];return os(o,t)||[]}(e,i,r),g=l.findIndex(_=>{if(Array.isArray(_)){const[v,w]=_,b=s>=v.hours&&a>=v.minutes,A=s<w.hours||s===w.hours&&a<w.minutes;if(v.hours<w.hours){if(b&&A)return!0}else if(b||A)return!0}else if(_.hours===s&&_.minutes===a)return!0;return!1});if(-1!==g)return h[g]}return function gne(n,e,t){const r=Zi(n),o=os([r[Rn.DayPeriodsFormat],r[Rn.DayPeriodsStandalone]],e);return os(o,t)}(e,i,r)[s<12?0:1];case on.Eras:return function yne(n,e){return os(Zi(n)[Rn.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,o,n,e,t,r)}}function Vw(n){return function(e,t,r){const i=-1*r,o=is(t,kr.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case dc.Short:return(i>=0?"+":"")+ks(s,2,o)+ks(Math.abs(i%60),2,o);case dc.ShortGMT:return"GMT"+(i>=0?"+":"")+ks(s,1,o);case dc.Long:return"GMT"+(i>=0?"+":"")+ks(s,2,o)+":"+ks(Math.abs(i%60),2,o);case dc.Extended:return 0===r?"Z":(i>=0?"+":"")+ks(s,2,o)+":"+ks(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}const Rne=0,Uw=4;function ij(n){const e=n.getDay(),t=0===e?-3:Uw-e;return Fw(n.getFullYear(),n.getMonth(),n.getDate()+t)}function qP(n,e=!1){return function(t,r){let i;if(e){const o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{const o=ij(t),s=function Nne(n){const e=Fw(n,Rne,1).getDay();return Fw(n,0,1+(e<=Uw?Uw:Uw+7)-e)}(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return ks(i,n,is(r,kr.MinusSign))}}function Bw(n,e=!1){return function(t,r){return ks(ij(t).getFullYear(),n,is(r,kr.MinusSign),e)}}const GP={};function oj(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function sj(n){return n instanceof Date&&!isNaN(n.valueOf())}const Une=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function YP(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function uj(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}const ZP=/\s+/,dj=[];let hj=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=dj,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(ZP):dj}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(ZP):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(ZP).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(ve(Ro),ve(fa))};static#t=this.\u0275dir=it({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class Jne{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _l=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Jne(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),pj(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{pj(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(ve(Ms),ve(sc),ve(VP))};static#t=this.\u0275dir=it({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function pj(n,e){n.context.$implicit=e.item}let fc=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Zne,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){gj("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){gj("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(ve(Ms),ve(sc))};static#t=this.\u0275dir=it({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Zne{constructor(){this.$implicit=null,this.ngIf=null}}function gj(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${nr(e)}'.`)}function Fs(n,e){return new Q(2100,!1)}class nre{createSubscription(e,t){return YB(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){YB(()=>e.unsubscribe())}}class rre{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const ire=new rre,ore=new nre;let tD=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(v_(t))return ire;if(XU(t))return ore;throw Fs()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(ve(C_,16))};static#t=this.\u0275pipe=di({name:"async",type:n,pure:!1,standalone:!0})}return n})();const dre=new Ce(""),hre=new Ce("");let _j=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(null==t||""===t||t!=t)return null;try{return Pne(t,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(s){throw Fs()}}static#e=this.\u0275fac=function(r){return new(r||n)(ve(lc,16),ve(dre,24),ve(hre,24))};static#t=this.\u0275pipe=di({name:"date",type:n,pure:!0,standalone:!0})}return n})(),vj=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function nD(n){return!(null==n||""===n||n!=n)}(t))return null;i||=this._locale;try{return function qne(n,e,t){return function KP(n,e,t,r,i,o,s=!1){let a="",c=!1;if(isFinite(n)){let l=function Wne(n){let r,i,o,s,a,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;"0"===e.charAt(o);o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;"0"===e.charAt(a);)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);s&&(l=function Gne(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(l));let h=e.minInt,g=e.minFrac,_=e.maxFrac;if(o){const R=o.match(Une);if(null===R)throw new Error(`${o} is not a valid digit info`);const V=R[1],ie=R[3],be=R[5];null!=V&&(h=YP(V)),null!=ie&&(g=YP(ie)),null!=be?_=YP(be):null!=ie&&g>_&&(_=g)}!function Kne(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const o=Math.min(Math.max(e,i),t);let s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let g=s;g<r.length;g++)r[g]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let g=1;g<s;g++)r[g]=0}if(a>=5)if(s-1<0){for(let g=0;g>s;g--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=0!==o;const l=e+n.integerLen,h=r.reduceRight(function(g,_,v,w){return w[v]=(_+=g)<10?_:_-10,c&&(0===w[v]&&v>=l?w.pop():c=!1),_>=10?1:0},0);h&&(r.unshift(h),n.integerLen++)}(l,g,_);let v=l.digits,w=l.integerLen;const b=l.exponent;let A=[];for(c=v.every(R=>!R);w<h;w++)v.unshift(0);for(;w<0;w++)v.unshift(0);w>0?A=v.splice(w,v.length):(A=v,v=[0]);const N=[];for(v.length>=e.lgSize&&N.unshift(v.splice(-e.lgSize,v.length).join(""));v.length>e.gSize;)N.unshift(v.splice(-e.gSize,v.length).join(""));v.length&&N.unshift(v.join("")),a=N.join(is(t,r)),A.length&&(a+=is(t,i)+A.join("")),b&&(a+=is(t,kr.Exponential)+"+"+b)}else a=is(t,kr.Infinity);return a=n<0&&!c?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(n,function QP(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],o=r[1],s=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let h=0;h<c.length;h++){const g=c.charAt(h);"0"===g?t.minFrac=t.maxFrac=h+1:"#"===g?t.maxFrac=h+1:t.posSuf+=g}const l=a.split(",");if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){const h=i.length-t.posPre.length-t.posSuf.length,g=o.indexOf("#");t.negPre=o.substring(0,g).replace(/'/g,""),t.negSuf=o.slice(g+h).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function HP(n,e){return Zi(n)[Rn.NumberFormats][e]}(e,Ow.Decimal),is(e,kr.MinusSign)),e,kr.Group,kr.Decimal,t)}(function rD(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(o){throw Fs()}}static#e=this.\u0275fac=function(r){return new(r||n)(ve(lc,16))};static#t=this.\u0275pipe=di({name:"number",type:n,pure:!0,standalone:!0})}return n})();let Cre=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Wi({type:n});static#n=this.\u0275inj=ui({})}return n})();const Ej="browser";function $w(n){return"server"===n}let bre=(()=>{class n{static#e=this.\u0275prov=xe({token:n,providedIn:"root",factory:()=>function Ire(n){return n===Ej}(le(ts))?new Tre(le(Eo),window):new Sre})}return n})();class Tre{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function Are(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}}class Sre{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class Cj{}class tie extends sne{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class oD extends tie{static makeCurrent(){!function one(n){JB??=n}(new oD)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function nie(){return P_=P_||document.querySelector("base"),P_?P_.getAttribute("href"):null}();return null==t?null:function rie(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){P_=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return uj(document.cookie,e)}}let P_=null,oie=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();const sD=new Ce("");let Mj=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(fe(sD),fe(Ot))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();class Oj{constructor(e){this._doc=e}}const aD="ng-app-id";let Rj=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=$w(o),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${aD}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(aD),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(aD,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){const i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Eo),fe(Tm),fe(z1,8),fe(ts))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();const cD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},lD=/%COMP%/g,lie=new Ce("",{providedIn:"root",factory:()=>!0});function xj(n,e){return e.map(t=>t.replace(lD,n))}let uD=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=$w(a),this.defaultRenderer=new dD(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ti.ShadowDom&&(r={...r,encapsulation:Ti.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof Fj?i.applyToHost(t):i instanceof hD&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Ti.Emulated:o=new Fj(c,l,r,this.appId,h,s,a,g);break;case Ti.ShadowDom:return new fie(c,l,t,r,s,a,this.nonce,g);default:o=new hD(c,l,r,h,s,a,g)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Mj),fe(Rj),fe(Tm),fe(lie),fe(Eo),fe(ts),fe(Ot),fe(z1))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();class dD{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(cD[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(kj(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(kj(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=cD[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=cD[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ul.DashCase|ul.Important)?e.style.setProperty(t,r,i&ul.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ul.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=ml().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function kj(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class fie extends dD{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=xj(i.id,i.styles);for(const h of l){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class hD extends dD{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?xj(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Fj extends hD{constructor(e,t,r,i,o,s,a,c){const l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=function uie(n){return"_ngcontent-%COMP%".replace(lD,n)}(l),this.hostAttr=function die(n){return"_nghost-%COMP%".replace(lD,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let pie=(()=>{class n extends Oj{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Eo))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();const Lj=["alt","control","meta","shift"],gie={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mie={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let _ie=(()=>{class n extends Oj{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ml().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Lj.forEach(l=>{const h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=gie[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Lj.forEach(s=>{s!==i&&(0,mie[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Eo))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();const Cie=uB(mte,"browser",[{provide:ts,useValue:Ej},{provide:$1,useValue:function yie(){oD.makeCurrent()},multi:!0},{provide:Eo,useFactory:function Eie(){return function W6(n){bA=n}(document),document},deps:[]}]),wie=new Ce(""),Bj=[{provide:yw,useClass:class iie{addToWindow(e){un.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Q(5103,!1);return o},un.getAllAngularTestabilities=()=>e.getAllTestabilities(),un.getAllAngularRootElements=()=>e.getAllRootElements(),un.frameworkStabilizers||(un.frameworkStabilizers=[]),un.frameworkStabilizers.push(r=>{const i=un.getAllAngularTestabilities();let o=i.length;const s=function(){o--,0==o&&r()};i.forEach(a=>{a.whenStable(s)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?ml().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:ZU,useClass:bP,deps:[Ot,TP,yw]},{provide:bP,useClass:bP,deps:[Ot,TP,yw]}],jj=[{provide:Yg,useValue:"root"},{provide:es,useFactory:function vie(){return new es},deps:[]},{provide:sD,useClass:pie,multi:!0,deps:[Eo,Ot,ts]},{provide:sD,useClass:_ie,multi:!0,deps:[Eo]},uD,Rj,Mj,{provide:GC,useExisting:uD},{provide:Cj,useClass:oie,deps:[]},[]];let $j=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Tm,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(fe(wie,12))};static#t=this.\u0275mod=Wi({type:n});static#n=this.\u0275inj=ui({providers:[...jj,...Bj],imports:[Cre,_te]})}return n})(),Iie=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Eo))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ae=dt(467),kf=dt(1635);const qj=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Gj(n){return Mt(n?.then)}function Wj(n){return Mt(n[_s])}function Kj(n){return Symbol.asyncIterator&&Mt(n?.[Symbol.asyncIterator])}function Qj(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Yj=function Pie(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Jj(n){return Mt(n?.[Yj])}function Zj(n){return(0,kf.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,kf.N3)(t.read());if(i)return yield(0,kf.N3)(void 0);yield yield(0,kf.N3)(r)}}finally{t.releaseLock()}})}function Xj(n){return Mt(n?.getReader)}function Co(n){if(n instanceof tn)return n;if(null!=n){if(Wj(n))return function Die(n){return new tn(e=>{const t=n[_s]();if(Mt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(qj(n))return function Mie(n){return new tn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Gj(n))return function Oie(n){return new tn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ua)})}(n);if(Kj(n))return e$(n);if(Jj(n))return function Rie(n){return new tn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Xj(n))return function Nie(n){return e$(Zj(n))}(n)}throw Qj(n)}function e$(n){return new tn(e=>{(function xie(n,e){var t,r,i,o;return(0,kf.sH)(this,void 0,void 0,function*(){try{for(t=(0,kf.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function pc(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function sd(n,e=0){return we((t,r)=>{t.subscribe(Ve(r,i=>pc(r,n,()=>r.next(i),e),()=>pc(r,n,()=>r.complete(),e),i=>pc(r,n,()=>r.error(i),e)))})}function Ff(n,e=0){return we((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function t$(n,e){if(!n)throw new Error("Iterable cannot be null");return new tn(t=>{pc(t,e,()=>{const r=n[Symbol.asyncIterator]();pc(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function kn(n,e){return e?function Bie(n,e){if(null!=n){if(Wj(n))return function kie(n,e){return Co(n).pipe(Ff(e),sd(e))}(n,e);if(qj(n))return function Lie(n,e){return new tn(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Gj(n))return function Fie(n,e){return Co(n).pipe(Ff(e),sd(e))}(n,e);if(Kj(n))return t$(n,e);if(Jj(n))return function Vie(n,e){return new tn(t=>{let r;return pc(t,e,()=>{r=n[Yj](),pc(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>Mt(r?.return)&&r.return()})}(n,e);if(Xj(n))return function Uie(n,e){return t$(Zj(n),e)}(n,e)}throw Qj(n)}(n,e):Co(n)}function fD(n){return n[n.length-1]}function pD(n){return Mt(fD(n))?n.pop():void 0}function D_(n){return function jie(n){return n&&Mt(n.schedule)}(fD(n))?n.pop():void 0}function Ze(...n){return kn(n,D_(n))}const{isArray:Hie}=Array,{getPrototypeOf:zie,prototype:qie,keys:Gie}=Object;function n$(n){if(1===n.length){const e=n[0];if(Hie(e))return{args:e,keys:null};if(function Wie(n){return n&&"object"==typeof n&&zie(n)===qie}(e)){const t=Gie(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:Kie}=Array;function r$(n){return $e(e=>function Qie(n,e){return Kie(e)?n(...e):n(e)}(n,e))}function i$(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function gD(...n){const e=D_(n),t=pD(n),{args:r,keys:i}=n$(n);if(0===r.length)return kn([],e);const o=new tn(function Yie(n,e,t=jr){return r=>{o$(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)o$(e,()=>{const l=kn(n[c],e);let h=!1;l.subscribe(Ve(r,g=>{o[c]=g,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>i$(i,s):jr));return t?o.pipe(r$(t)):o}function o$(n,e,t){n?pc(t,n,e):e()}const Ww=Gt(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Oi(n,e,t=1/0){return Mt(e)?Oi((r,i)=>$e((o,s)=>e(r,o,i,s))(Co(n(r,i))),t):("number"==typeof e&&(t=e),we((r,i)=>function Jie(n,e,t,r,i,o,s,a){const c=[];let l=0,h=0,g=!1;const _=()=>{g&&!c.length&&!l&&e.complete()},v=b=>l<r?w(b):c.push(b),w=b=>{o&&e.next(b),l++;let A=!1;Co(t(b,h++)).subscribe(Ve(e,N=>{i?.(N),o?v(N):e.next(N)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;c.length&&l<r;){const N=c.shift();s?pc(e,s,()=>w(N)):w(N)}_()}catch(N){e.error(N)}}))};return n.subscribe(Ve(e,v,()=>{g=!0,_()})),()=>{a?.()}}(r,i,n,t)))}function Lf(n=1/0){return Oi(jr,n)}function mD(...n){return function Zie(){return Lf(1)}()(kn(n,D_(n)))}function s$(n){return new tn(e=>{Co(n()).subscribe(e)})}function M_(n,e){const t=Mt(n)?n:()=>n,r=i=>i.error(t());return new tn(e?i=>e.schedule(r,0,i):r)}const Ls=new tn(n=>n.complete());function _D(){return we((n,e)=>{let t=null;n._refCount++;const r=Ve(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class a$ extends tn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,W(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Wt;const t=this.getSubject();e.add(this.source.subscribe(Ve(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Wt.EMPTY)}return e}refCount(){return _D()(this)}}function Lr(n,e){return we((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(Ve(r,c=>{i?.unsubscribe();let l=0;const h=o++;Co(n(c,h)).subscribe(i=Ve(r,g=>r.next(e?e(c,g,h,l++):g),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Vf(n){return n<=0?()=>Ls:we((e,t)=>{let r=0;e.subscribe(Ve(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Kw(...n){const e=D_(n);return we((t,r)=>{(e?mD(n,t,e):mD(n,t)).subscribe(r)})}function ss(n,e){return we((t,r)=>{let i=0;t.subscribe(Ve(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Qw(n){return we((e,t)=>{let r=!1;e.subscribe(Ve(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function c$(n=eoe){return we((e,t)=>{let r=!1;e.subscribe(Ve(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function eoe(){return new Ww}function yl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ss((i,o)=>n(i,o,r)):jr,Vf(1),t?Qw(e):c$(()=>new Ww))}function Uf(n,e){return Mt(e)?Oi(n,e,1):Oi(n,1)}function Ri(n,e,t){const r=Mt(n)||e||t?{next:n,error:e,complete:t}:n;return r?we((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Ve(o,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),o.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):jr}function ad(n){return we((e,t)=>{let o,r=null,i=!1;r=e.subscribe(Ve(t,void 0,void 0,s=>{o=Co(n(s,ad(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Bf(n,e){return we(function toe(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(Ve(s,h=>{const g=l++;c=a?n(c,h,g):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}(n,e,arguments.length>=2,!0))}function yD(n){return n<=0?()=>Ls:we((e,t)=>{let r=[];e.subscribe(Ve(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function O_(n){return we((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Et="primary",R_=Symbol("RouteTitle");class ooe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function jf(n){return new ooe(n)}function soe(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(":"===s[0])i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function va(n,e){const t=n?vD(n):void 0,r=e?vD(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!l$(n[i],e[i]))return!1;return!0}function vD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function l$(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function u$(n){return n.length>0?n[n.length-1]:null}function vl(n){return function Sie(n){return!!n&&(n instanceof tn||Mt(n.lift)&&Mt(n.subscribe))}(n)?n:v_(n)?kn(Promise.resolve(n)):Ze(n)}const coe={exact:function f$(n,e,t){if(!cd(n.segments,e.segments)||!Yw(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!f$(n.children[r],e.children[r],t))return!1;return!0},subset:p$},d$={exact:function loe(n,e){return va(n,e)},subset:function uoe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>l$(n[t],e[t]))},ignored:()=>!0};function h$(n,e,t){return coe[t.paths](n.root,e.root,t.matrixParams)&&d$[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function p$(n,e,t){return g$(n,e,e.segments,t)}function g$(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!cd(i,t)||e.hasChildren()||!Yw(i,t,r))}if(n.segments.length===t.length){if(!cd(n.segments,t)||!Yw(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!p$(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(cd(n.segments,i)&&Yw(n.segments,i,r)&&n.children[Et])&&g$(n.children[Et],e,o,r)}}function Yw(n,e,t){return e.every((r,i)=>d$[t](n[i].parameters,r.parameters))}class $f{constructor(e=new yn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=jf(this.queryParams),this._queryParamMap}toString(){return foe.serialize(this)}}class yn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zw(this)}}class N_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=jf(this.parameters),this._parameterMap}toString(){return y$(this)}}function cd(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Hf=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:()=>new Jw,providedIn:"root"})}return n})();class Jw{parse(e){const t=new boe(e);return new $f(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${x_(e.root,!0)}`,r=function moe(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Xw(t)}=${Xw(i)}`).join("&"):`${Xw(t)}=${Xw(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function poe(n){return encodeURI(n)}(e.fragment)}`:""}`}}const foe=new Jw;function Zw(n){return n.segments.map(e=>y$(e)).join("/")}function x_(n,e){if(!n.hasChildren())return Zw(n);if(e){const t=n.children[Et]?x_(n.children[Et],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Et&&r.push(`${i}:${x_(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function hoe(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Et&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Et&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Et?[x_(n.children[Et],!1)]:[`${i}:${x_(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Et]?`${Zw(n)}/${t[0]}`:`${Zw(n)}/(${t.join("//")})`}}function m$(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xw(n){return m$(n).replace(/%3B/gi,";")}function ED(n){return m$(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function eI(n){return decodeURIComponent(n)}function _$(n){return eI(n.replace(/\+/g,"%20"))}function y$(n){return`${ED(n.path)}${function goe(n){return Object.entries(n).map(([e,t])=>`;${ED(e)}=${ED(t)}`).join("")}(n.parameters)}`}const _oe=/^[^\/()?;#]+/;function CD(n){const e=n.match(_oe);return e?e[0]:""}const yoe=/^[^\/()?;=#]+/,Eoe=/^[^=?&#]+/,woe=/^[^&#]+/;class boe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new yn([],{}):new yn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Et]=new yn(e,t)),r}parseSegment(){const e=CD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new N_(eI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function voe(n){const e=n.match(yoe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=CD(this.remaining);i&&(r=i,this.capture(r))}e[eI(t)]=eI(r)}parseQueryParam(e){const t=function Coe(n){const e=n.match(Eoe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function Ioe(n){const e=n.match(woe);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=_$(t),o=_$(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=CD(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Q(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Et);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[Et]:new yn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}}function v$(n){return n.segments.length>0?new yn([],{[Et]:n}):n}function E$(n){const e={};for(const[r,i]of Object.entries(n.children)){const o=E$(i);if(r===Et&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Toe(n){if(1===n.numberOfChildren&&n.children[Et]){const e=n.children[Et];return new yn(n.segments.concat(e.segments),e.children)}return n}(new yn(n.segments,e))}function k_(n){return n instanceof $f}function C$(n){let e;const i=v$(function t(o){const s={};for(const c of o.children){const l=t(c);s[c.outlet]=l}const a=new yn(o.url,s);return o===n&&(e=a),a}(n.root));return e??i}function w$(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return wD(i,i,i,t,r);const o=function Soe(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new b$(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new b$(t,e,r)}(e);if(o.toRoot())return wD(i,i,new yn([],{}),t,r);const s=function Poe(n,e,t){if(n.isAbsolute)return new nI(e,!0,0);if(!t)return new nI(e,!1,NaN);if(null===t.parent)return new nI(t,!0,0);const r=tI(n.commands[0])?0:1;return function Doe(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new nI(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),a=s.processChildren?L_(s.segmentGroup,s.index,o.commands):T$(s.segmentGroup,s.index,o.commands);return wD(i,s.segmentGroup,a,t,r)}function tI(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function F_(n){return"object"==typeof n&&null!=n&&n.outlets}function wD(n,e,t,r,i){let s,o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`}),s=n===e?t:I$(n,e,t);const a=v$(E$(s));return new $f(a,o,i)}function I$(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:I$(o,e,t)}),new yn(n.segments,r)}class b${constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&tI(r[0]))throw new Q(4003,!1);const i=r.find(F_);if(i&&i!==u$(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class nI{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function T$(n,e,t){if(n??=new yn([],{}),0===n.segments.length&&n.hasChildren())return L_(n,e,t);const r=function Ooe(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const s=n.segments[i],a=t[r];if(F_(a))break;const c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!S$(c,l,s))return o;r+=2}else{if(!S$(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new yn(n.segments.slice(0,r.pathIndex),{});return o.children[Et]=new yn(n.segments.slice(r.pathIndex),n.children),L_(o,0,i)}return r.match&&0===i.length?new yn(n.segments,{}):r.match&&!n.hasChildren()?ID(n,e,t):r.match?L_(n,0,i):ID(n,e,t)}function L_(n,e,t){if(0===t.length)return new yn(n.segments,{});{const r=function Moe(n){return F_(n[0])?n[0].outlets:{[Et]:n}}(t),i={};if(Object.keys(r).some(o=>o!==Et)&&n.children[Et]&&1===n.numberOfChildren&&0===n.children[Et].segments.length){const o=L_(n.children[Et],e,t);return new yn(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=T$(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new yn(n.segments,i)}}function ID(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(F_(o)){const c=Roe(o.outlets);return new yn(r,c)}if(0===i&&tI(t[0])){r.push(new N_(n.segments[e].path,A$(t[0]))),i++;continue}const s=F_(o)?o.outlets[Et]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&tI(a)?(r.push(new N_(s,A$(a))),i+=2):(r.push(new N_(s,{})),i++)}return new yn(r,{})}function Roe(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=ID(new yn([],{}),0,r))}),e}function A$(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function S$(n,e,t){return n==t.path&&va(e,t.parameters)}const V_="imperative";var $t=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}($t||{});class Ea{constructor(e,t){this.id=e,this.url=t}}class rI extends Ea{constructor(e,t,r="imperative",i=null){super(e,t),this.type=$t.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class gc extends Ea{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=$t.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Lo=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Lo||{}),iI=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(iI||{});class ld extends Ea{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=$t.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class zf extends Ea{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=$t.NavigationSkipped}}class bD extends Ea{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=$t.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class P$ extends Ea{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=$t.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Noe extends Ea{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=$t.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xoe extends Ea{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=$t.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class koe extends Ea{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=$t.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Foe extends Ea{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=$t.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Loe{constructor(e){this.route=e,this.type=$t.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Voe{constructor(e){this.route=e,this.type=$t.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Uoe{constructor(e){this.snapshot=e,this.type=$t.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Boe{constructor(e){this.snapshot=e,this.type=$t.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class joe{constructor(e){this.snapshot=e,this.type=$t.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $oe{constructor(e){this.snapshot=e,this.type=$t.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class D${constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=$t.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class TD{}class oI{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}class Hoe{constructor(e){this.injector=e,this.outlet=null,this.route=null,this.children=new U_(this.injector),this.attachRef=null}}let U_=(()=>{class n{constructor(t){this.parentInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Hoe(this.parentInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)(fe($r))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class M${constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=AD(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=AD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=SD(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return SD(e,this._root).map(t=>t.value)}}function AD(n,e){if(n===e.value)return e;for(const t of e.children){const r=AD(n,t);if(r)return r}return null}function SD(n,e){if(n===e.value)return[e];for(const t of e.children){const r=SD(n,t);if(r.length)return r.unshift(e),r}return[]}class Vs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function qf(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class O$ extends M${constructor(e,t){super(e),this.snapshot=t,PD(this,e)}toString(){return this.snapshot.toString()}}function R$(n){const e=function zoe(n){const o=new aI([],{},{},"",{},Et,n,null,{});return new N$("",new Vs(o,[]))}(n),t=new te([new N_("",{})]),r=new te({}),i=new te({}),o=new te({}),s=new te(""),a=new Gf(t,r,o,s,i,Et,n,e.root);return a.snapshot=e.root,new O$(new Vs(a,[]),e)}class Gf{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe($e(l=>l[R_]))??Ze(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe($e(e=>jf(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe($e(e=>jf(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sI(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&k$(i)&&(r.resolve[R_]=i.title),r}class aI{get title(){return this.data?.[R_]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=jf(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=jf(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class N$ extends M${constructor(e,t){super(t),this.url=e,PD(this,t)}toString(){return x$(this._root)}}function PD(n,e){e.value._routerState=n,e.children.forEach(t=>PD(n,t))}function x$(n){const e=n.children.length>0?` { ${n.children.map(x$).join(", ")} } `:"";return`${n.value}${e}`}function DD(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,va(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),va(e.params,t.params)||n.paramsSubject.next(t.params),function aoe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!va(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),va(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function MD(n,e){const t=va(n.params,e.params)&&function doe(n,e){return cd(n,e)&&n.every((t,r)=>va(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||MD(n.parent,e.parent))}function k$(n){return"string"==typeof n.title||null===n.title}let OD=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Et,this.activateEvents=new lr,this.deactivateEvents=new lr,this.attachEvents=new lr,this.detachEvents=new lr,this.parentContexts=le(U_),this.location=le(Ms),this.changeDetector=le(C_),this.inputBinder=le(cI,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new RD(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=it({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[po]})}return n})();class RD{__ngOutletInjector(e){return new RD(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Gf?this.route:e===U_?this.childContexts:this.parent.get(e,t)}}const cI=new Ce("");let F$=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=gD([r.queryParams,r.params,r.data]).pipe(Lr(([o,s,a],c)=>(a={...o,...s,...a},0===c?Ze(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const s=function ine(n){const e=vt(n);if(!e)return null;const t=new Xm(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();function B_(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Goe(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return B_(n,r,i);return B_(n,r)})}(n,e,t);return new Vs(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>B_(n,a)),s}}const r=function Woe(n){return new Gf(new te(n.url),new te(n.params),new te(n.queryParams),new te(n.fragment),new te(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>B_(n,o));return new Vs(r,i)}}class ND{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const L$="ngNavigationCancelingError";function lI(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=k_(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=V$(!1,Lo.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function V$(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[L$]=!0,t.cancellationCode=e,t}function U$(n){return!!n&&n[L$]}let B$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=sr({type:n,selectors:[["ng-component"]],standalone:!0,features:[bU],decls:1,vars:0,template:function(r,i){1&r&&_n(0,"router-outlet")},dependencies:[OD],encapsulation:2})}return n})();function xD(n){const e=n.children&&n.children.map(xD),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Et&&(t.component=B$),t}function Us(n){return n.outlet||Et}function j_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class tse{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),DD(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=qf(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=qf(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=qf(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=qf(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new $oe(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Boe(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(DD(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),DD(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=j_(i.snapshot);s.attachRef=null,s.route=i,s.injector=a??s.injector,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class j${constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class uI{constructor(e,t){this.component=e,this.route=t}}function nse(n,e,t){const r=n._root;return $_(r,e?e._root:null,t,[r.value])}function Wf(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function w0(n){return null!==mh(n)}(n)?e.get(n):n:r}function $_(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=qf(e);return n.children.forEach(s=>{(function ise(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function ose(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!cd(n.url,e.url);case"pathParamsOrQueryParamsChange":return!cd(n.url,e.url)||!va(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!MD(n,e)||!va(n.queryParams,e.queryParams);default:return!MD(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new j$(r)):(o.data=s.data,o._resolvedData=s._resolvedData),$_(n,e,o.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new uI(a.outlet.component,s))}else s&&H_(e,a,i),i.canActivateChecks.push(new j$(r)),$_(n,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>H_(a,t.getContext(s),i)),i}function H_(n,e,t){const r=qf(n),i=n.value;Object.entries(r).forEach(([o,s])=>{H_(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new uI(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function z_(n){return"function"==typeof n}function $$(n){return n instanceof Ww||"EmptyError"===n?.name}const dI=Symbol("INITIAL_VALUE");function Kf(){return Lr(n=>gD(n.map(e=>e.pipe(Vf(1),Kw(dI)))).pipe($e(e=>{for(const t of e)if(!0!==t){if(t===dI)return dI;if(!1===t||hse(t))return t}return!0}),ss(e=>e!==dI),Vf(1)))}function hse(n){return k_(n)||n instanceof ND}function H$(n){return function Ys(...n){return Lc(n)}(Ri(e=>{if("boolean"!=typeof e)throw lI(0,e)}),$e(e=>!0===e))}class kD{constructor(e){this.segmentGroup=e||null}}class hI extends Error{constructor(e){super(),this.urlTree=e}}function Qf(n){return M_(new kD(n))}class Tse{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ze(r);if(i.numberOfChildren>1||!i.children[Et])return M_(new Q(4e3,!1));i=i.children[Et]}}applyRedirectCommands(e,t,r,i,o){if("string"!=typeof t){const a=t,{queryParams:c,fragment:l,routeConfig:h,url:g,outlet:_,params:v,data:w,title:b}=i,A=Ai(o,()=>a({params:v,data:w,queryParams:c,fragment:l,routeConfig:h,url:g,outlet:_,title:b}));if(A instanceof $f)throw new hI(A);t=A}const s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if("/"===t[0])throw new hI(s);return s}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new $f(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&":"===o[0]){const a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new yn(o,s)}createSegments(e,t,r,i){return t.map(o=>":"===o.path[0]?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const FD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ase(n,e,t,r,i){const o=LD(n,e,t);return o.matched?(r=function Qoe(n,e){return n.providers&&!n._injector&&(n._injector=ZC(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function wse(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Ze(i.map(s=>{const a=Wf(s,n);return vl(function dse(n){return n&&z_(n.canMatch)}(a)?a.canMatch(e,t):Ai(n,()=>a(e,t)))})).pipe(Kf(),H$()):Ze(!0)}(r,e,t).pipe($e(s=>!0===s?o:{...FD}))):Ze(o)}function LD(n,e,t){if("**"===e.path)return function Sse(n){return{matched:!0,parameters:n.length>0?u$(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...FD}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||soe)(t,n,e);if(!i)return{...FD};const o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function z$(n,e,t,r){return t.length>0&&function Mse(n,e,t){return t.some(r=>fI(n,e,r)&&Us(r)!==Et)}(n,t,r)?{segmentGroup:new yn(e,Dse(r,new yn(t,n.children))),slicedSegments:[]}:0===t.length&&function Ose(n,e,t){return t.some(r=>fI(n,e,r))}(n,t,r)?{segmentGroup:new yn(n.segments,Pse(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new yn(n.segments,n.children),slicedSegments:t}}function Pse(n,e,t,r){const i={};for(const o of t)if(fI(n,e,o)&&!r[Us(o)]){const s=new yn([],{});i[Us(o)]=s}return{...r,...i}}function Dse(n,e){const t={};t[Et]=e;for(const r of n)if(""===r.path&&Us(r)!==Et){const i=new yn([],{});t[Us(r)]=i}return t}function fI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class xse{}class Lse{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Tse(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){const e=z$(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe($e(({children:t,rootSnapshot:r})=>{const i=new Vs(r,t),o=new N$("",i),s=function Aoe(n,e,t=null,r=null){return w$(C$(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){const t=new aI([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Et,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Et,t).pipe($e(r=>({children:r,rootSnapshot:t})),ad(r=>{if(r instanceof hI)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof kD?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe($e(s=>s instanceof Vs?[s]:[]))}processChildren(e,t,r,i){const o=[];for(const s of Object.keys(r.children))"primary"===s?o.unshift(s):o.push(s);return kn(o).pipe(Uf(s=>{const a=r.children[s],c=function Xoe(n,e){const t=n.filter(r=>Us(r)===e);return t.push(...n.filter(r=>Us(r)!==e)),t}(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Bf((s,a)=>(s.push(...a),s)),Qw(null),function noe(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ss((i,o)=>n(i,o,r)):jr,yD(1),t?Qw(e):c$(()=>new Ww))}(),Oi(s=>{if(null===s)return Qf(r);const a=q$(s);return function Vse(n){n.sort((e,t)=>e.value.outlet===Et?-1:t.value.outlet===Et?1:e.value.outlet.localeCompare(t.value.outlet))}(a),Ze(a)}))}processSegment(e,t,r,i,o,s,a){return kn(t).pipe(Uf(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(ad(l=>{if(l instanceof kD)return Ze(null);throw l}))),yl(c=>!!c),ad(c=>{if($$(c))return function Nse(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?Ze(new xse):Qf(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return function Rse(n,e,t,r){return!!(Us(n)===r||r!==Et&&fI(e,t,n))&&LD(e,n,t).matched}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Qf(i):Qf(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){const{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:g,remainingSegments:_}=LD(t,i,o);if(!c)return Qf(t);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const v=new aI(o,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,G$(i),Us(i),i.component??i._loadedComponent??null,i,W$(i)),w=sI(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(w.params),v.data=Object.freeze(w.data);const b=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,g,v,e);return this.applyRedirects.lineralizeSegments(i,b).pipe(Oi(A=>this.processSegment(e,r,t,A.concat(_),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){const a=Ase(t,r,i,e);return"**"===r.path&&(t.children={}),a.pipe(Lr(c=>c.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Lr(({routes:l})=>{const h=r._loadedInjector??e,{parameters:g,consumedSegments:_,remainingSegments:v}=c,w=new aI(_,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,G$(r),Us(r),r.component??r._loadedComponent??null,r,W$(r)),b=sI(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(b.params),w.data=Object.freeze(b.data);const{segmentGroup:A,slicedSegments:N}=z$(t,_,v,l);if(0===N.length&&A.hasChildren())return this.processChildren(h,l,A,w).pipe($e(V=>new Vs(w,V)));if(0===l.length&&0===N.length)return Ze(new Vs(w,[]));const R=Us(r)===o;return this.processSegment(h,l,A,N,R?Et:o,!0,w).pipe($e(V=>new Vs(w,V instanceof Vs?[V]:[])))})):Qf(t)))}getChildConfig(e,t,r){return t.children?Ze({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ze({routes:t._loadedRoutes,injector:t._loadedInjector}):function Cse(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Ze(!0):Ze(i.map(s=>{const a=Wf(s,n);return vl(function ase(n){return n&&z_(n.canLoad)}(a)?a.canLoad(e,t):Ai(n,()=>a(e,t)))})).pipe(Kf(),H$())}(e,t,r).pipe(Oi(i=>i?this.configLoader.loadChildren(e,t).pipe(Ri(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function bse(n){return M_(V$(!1,Lo.GuardRejected))}())):Ze({routes:[],injector:e})}}function Use(n){const e=n.value.routeConfig;return e&&""===e.path}function q$(n){const e=[],t=new Set;for(const r of n){if(!Use(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=q$(r.children);e.push(new Vs(r.value,i))}return e.filter(r=>!t.has(r))}function G$(n){return n.data||{}}function W$(n){return n.resolve||{}}function K$(n){const e=n.children.map(t=>K$(t)).flat();return[n,...e]}function VD(n){return Lr(e=>{const t=n(e);return t?kn(t).pipe($e(()=>e)):Ze(e)})}let Q$=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Et);return r}getResolvedTitleForRoute(t){return t.data[R_]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:()=>le(qse),providedIn:"root"})}return n})(),qse=(()=>{class n extends Q${constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Iie))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Yf=new Ce("",{providedIn:"root",factory:()=>({})}),Jf=new Ce("");let UD=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=le(iB)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ze(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=vl(t.loadComponent()).pipe($e(Y$),Ri(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),O_(()=>{this.componentLoaders.delete(t)})),i=new a$(r,()=>new M).pipe(_D());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ze({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function Gse(n,e,t,r){return vl(n.loadChildren()).pipe($e(Y$),Oi(i=>i instanceof CV||Array.isArray(i)?Ze(i):kn(e.compileModuleAsync(i))),$e(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(t).injector,s=o.get(Jf,[],{optional:!0,self:!0}).flat()),{routes:s.map(xD),injector:o}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(O_(()=>{this.childrenLoaders.delete(r)})),s=new a$(o,()=>new M).pipe(_D());return this.childrenLoaders.set(r,s),s}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Y$(n){return function Wse(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let BD=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:()=>le(Kse),providedIn:"root"})}return n})(),Kse=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const J$=new Ce(""),Z$=new Ce("");function Qse(n,e,t){const r=n.get(Z$),i=n.get(Eo);return n.get(Ot).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o;const s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),function Yse(n){return new Promise(e=>{PS(e,{injector:n})})}(n))),{onViewTransitionCreated:c}=r;return c&&Ai(n,()=>c({transition:a,from:e,to:t})),s})}const X$=new Ce("");let pI=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new M,this.transitionAbortSubject=new M,this.configLoader=le(UD),this.environmentInjector=le($r),this.urlSerializer=le(Hf),this.rootContexts=le(U_),this.location=le(b_),this.inputBindingEnabled=null!==le(cI,{optional:!0}),this.titleStrategy=le(Q$),this.options=le(Yf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=le(BD),this.createViewTransition=le(J$,{optional:!0}),this.navigationErrorHandler=le(X$,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ze(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Voe(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Loe(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new te({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:V_,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ss(o=>0!==o.id),$e(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Lr(o=>{let s=!1,a=!1;return Ze(o).pipe(Lr(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Lo.SupersededByNewNavigation),Ls;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!l&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const g="";return this.events.next(new zf(c.id,this.urlSerializer.serialize(c.rawUrl),g,iI.IgnoredSameUrlNavigation)),c.resolve(!1),Ls}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Ze(c).pipe(Lr(g=>{const _=this.transitions?.getValue();return this.events.next(new rI(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),_!==this.transitions?.getValue()?Ls:Promise.resolve(g)}),function Bse(n,e,t,r,i,o){return Oi(s=>function kse(n,e,t,r,i,o,s="emptyOnly"){return new Lse(n,e,t,r,i,s,o).recognize()}(n,e,t,r,s.extractedUrl,i,o).pipe($e(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ri(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects};const _=new P$(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:g,extractedUrl:_,source:v,restoredState:w,extras:b}=c,A=new rI(g,this.urlSerializer.serialize(_),v,w);this.events.next(A);const N=R$(this.rootComponentType).snapshot;return this.currentTransition=o={...c,targetSnapshot:N,urlAfterRedirects:_,extras:{...b,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=_,Ze(o)}{const g="";return this.events.next(new zf(c.id,this.urlSerializer.serialize(c.extractedUrl),g,iI.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Ls}}),Ri(c=>{const l=new Noe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),$e(c=>(this.currentTransition=o={...c,guards:nse(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},o)),function fse(n,e){return Oi(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?Ze({...t,guardsResult:!0}):function pse(n,e,t,r){return kn(n).pipe(Oi(i=>function Ese(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Ze(o.map(a=>{const c=j_(e)??i,l=Wf(a,c);return vl(function use(n){return n&&z_(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):Ai(c,()=>l(n,e,t,r))).pipe(yl())})).pipe(Kf()):Ze(!0)}(i.component,i.route,t,e,r)),yl(i=>!0!==i,!0))}(s,r,i,n).pipe(Oi(a=>a&&function sse(n){return"boolean"==typeof n}(a)?function gse(n,e,t,r){return kn(e).pipe(Uf(i=>mD(function _se(n,e){return null!==n&&e&&e(new Uoe(n)),Ze(!0)}(i.route.parent,r),function mse(n,e){return null!==n&&e&&e(new joe(n)),Ze(!0)}(i.route,r),function vse(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function rse(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>s$(()=>Ze(s.guards.map(c=>{const l=j_(s.node)??t,h=Wf(c,l);return vl(function lse(n){return n&&z_(n.canActivateChild)}(h)?h.canActivateChild(r,n):Ai(l,()=>h(r,n))).pipe(yl())})).pipe(Kf())));return Ze(o).pipe(Kf())}(n,i.path,t),function yse(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ze(!0);const i=r.map(o=>s$(()=>{const s=j_(e)??t,a=Wf(o,s);return vl(function cse(n){return n&&z_(n.canActivate)}(a)?a.canActivate(e,n):Ai(s,()=>a(e,n))).pipe(yl())}));return Ze(i).pipe(Kf())}(n,i.route,t))),yl(i=>!0!==i,!0))}(r,o,n,e):Ze(a)),$e(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),Ri(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&"boolean"!=typeof c.guardsResult)throw lI(0,c.guardsResult);const l=new xoe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),ss(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",Lo.GuardRejected),!1)),VD(c=>{if(c.guards.canActivateChecks.length)return Ze(c).pipe(Ri(l=>{const h=new koe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Lr(l=>{let h=!1;return Ze(l).pipe(function jse(n,e){return Oi(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ze(t);const o=new Set(i.map(c=>c.route)),s=new Set;for(const c of o)if(!s.has(c))for(const l of K$(c))s.add(l);let a=0;return kn(s).pipe(Uf(c=>o.has(c)?function $se(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!k$(i)&&(o[R_]=i.title),function Hse(n,e,t,r){const i=vD(n);if(0===i.length)return Ze({});const o={};return kn(i).pipe(Oi(s=>function zse(n,e,t,r){const i=j_(e)??r,o=Wf(n,i);return vl(o.resolve?o.resolve(e,t):Ai(i,()=>o(e,t)))}(n[s],e,t,r).pipe(yl(),Ri(a=>{if(a instanceof ND)throw lI(new Jw,a);o[s]=a}))),yD(1),function roe(n){return $e(()=>n)}(o),ad(s=>$$(s)?Ls:M_(s)))}(o,n,e,r).pipe($e(s=>(n._resolvedData=s,n.data=sI(n,n.parent,t).resolve,null)))}(c,r,n,e):(c.data=sI(c,c.parent,n).resolve,Ze(void 0))),Ri(()=>a++),yD(1),Oi(c=>a===s.size?Ze(t):Ls))})}(this.paramsInheritanceStrategy,this.environmentInjector),Ri({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Lo.NoDataFromResolver)}}))}),Ri(l=>{const h=new Foe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),VD(c=>{const l=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(Ri(_=>{h.component=_}),$e(()=>{})));for(const _ of h.children)g.push(...l(_));return g};return gD(l(c.targetSnapshot.root)).pipe(Qw(null),Vf(1))}),VD(()=>this.afterPreactivation()),Lr(()=>{const{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?kn(h).pipe($e(()=>o)):Ze(o)}),$e(c=>{const l=function qoe(n,e,t){const r=B_(n,e._root,t?t._root:void 0);return new O$(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o={...c,targetRouterState:l},this.currentNavigation.targetRouterState=l,o}),Ri(()=>{this.events.next(new TD)}),((n,e,t,r)=>$e(i=>(new tse(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Vf(1),Ri({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new gc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),function ioe(n){return we((e,t)=>{Co(n).subscribe(Ve(t,()=>t.complete(),Ws)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Ri(c=>{throw c}))),O_(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Lo.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ad(c=>{if(a=!0,U$(c))this.events.next(new ld(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),function Koe(n){return U$(n)&&k_(n.url)}(c)?this.events.next(new oI(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{const l=new bD(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{const h=Ai(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof ND){const{message:g,cancellationCode:_}=lI(0,h);this.events.next(new ld(o.id,this.urlSerializer.serialize(o.extractedUrl),g,_)),this.events.next(new oI(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);const g=t.errorHandler(c);o.resolve(!!g)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Ls}))}))}cancelNavigationTransition(t,r,i){const o=new ld(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Jse(n){return n!==V_}let Zse=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:()=>le(eae),providedIn:"root"})}return n})();class Xse{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let eae=(()=>{class n extends Xse{static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eH=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:()=>le(tae),providedIn:"root"})}return n})(),tae=(()=>{class n extends eH{constructor(){super(...arguments),this.location=le(b_),this.urlSerializer=le(Hf),this.options=le(Yf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=le(BD),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new $f,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=R$(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof rI)this.stateMemento=this.createStateMemento();else if(t instanceof zf)this.rawUrlTree=r.initialUrl;else if(t instanceof P$){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof TD?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof ld&&(t.code===Lo.GuardRejected||t.code===Lo.NoDataFromResolver)?this.restoreHistory(r):t instanceof bD?this.restoreHistory(r,!0):t instanceof gc&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&0===o&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var q_=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(q_||{});function tH(n,e){n.events.pipe(ss(t=>t instanceof gc||t instanceof ld||t instanceof bD||t instanceof zf),$e(t=>t instanceof gc||t instanceof zf?q_.COMPLETE:t instanceof ld&&(t.code===Lo.Redirect||t.code===Lo.SupersededByNewNavigation)?q_.REDIRECTING:q_.FAILED),ss(t=>t!==q_.REDIRECTING),Vf(1)).subscribe(()=>{e()})}function nae(n){throw n}const rae={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iae={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Bs=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=le(WU),this.stateManager=le(eH),this.options=le(Yf,{optional:!0})||{},this.pendingTasks=le(ac),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=le(pI),this.urlSerializer=le(Hf),this.location=le(b_),this.urlHandlingStrategy=le(BD),this._events=new M,this.errorHandler=this.options.errorHandler||nae,this.navigated=!1,this.routeReuseStrategy=le(Zse),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=le(Jf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!le(cI,{optional:!0}),this.eventsSubscription=new Wt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof ld&&r.code!==Lo.Redirect&&r.code!==Lo.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof gc)this.navigated=!0;else if(r instanceof oI){const s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||Jse(i.source),...s};this.scheduleNavigation(a,V_,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function sae(n){return!(n instanceof TD||n instanceof oI)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),V_,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(xD),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s;let g,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...o};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}null!==h&&(h=this.removeEmptyProps(h));try{g=C$(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),g=this.currentUrlTree.root}return w$(g,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=k_(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,V_,null,r)}navigate(t,r={skipLocationChange:!1}){return function oae(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new Q(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...rae}:!1===r?{...iae}:r,k_(t))return h$(this.currentUrlTree,t,i);const o=this.parseUrl(t);return h$(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((g,_)=>{a=g,c=_});const h=this.pendingTasks.add();return tH(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Zf=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new M,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof gc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,o,s){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==t||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const r=null===this.href?null:function gF(n,e,t){return function NK(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?pF:ll}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(ve(Bs),ve(Gf),function Im(n){return function l6(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(Jc(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===e)return t[i+1];i+=2}}}return null}(Yt(),n)}("tabindex"),ve(fa),ve(Ro),ve(id))};static#t=this.\u0275dir=it({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&At("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Os("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Nf],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Nf],replaceUrl:[2,"replaceUrl","replaceUrl",Nf],routerLink:"routerLink"},standalone:!0,features:[EV,po]})}return n})(),nH=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new lr,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof gc&&this.update()})}ngAfterContentInit(){Ze(this.links.changes,Ze(null)).pipe(Lf()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=kn(t).pipe(Lf()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function aae(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{const o=i.urlTree;return!!o&&t.isActive(o,r)}}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ve(Bs),ve(Ro),ve(fa),ve(C_),ve(Zf,8))};static#t=this.\u0275dir=it({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(1&r&&function rU(n,e,t,r){eV(n,e,t,r)}(o,Zf,5),2&r){let s;(function iU(n){const e=ne(),t=mt(),r=cA();aC(r+1);const i=US(t,r);if(n.dirty&&function Ps(n){return!(4&~n[Qe])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)n.reset([]);else{const o=nV(e,r);n.reset(o,w1),n.notifyOnChanges()}return!0}return!1})(s=oU())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[po]})}return n})();class rH{}let cae=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ss(t=>t instanceof gc),Uf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=ZC(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return kn(i).pipe(Lf())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ze(null);const o=i.pipe(Oi(s=>null===s?Ze(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?kn([o,this.loader.loadComponent(r)]).pipe(Lf()):o})}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Bs),fe(iB),fe($r),fe(rH),fe(UD))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const jD=new Ce("");let iH=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=le($r),s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof rI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof gc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof zf&&t.code===iI.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof D$&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){var i=this;this.zone.runOutsideAngular((0,ae.A)(function*(){yield new Promise(o=>{setTimeout(()=>{o()}),PS(()=>{o()},{injector:i.environmentInjector})}),i.zone.run(()=>{i.transitions.events.next(new D$(t,"popstate"===i.lastSource?i.store[i.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function BF(){throw new Error("invalid")}()};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();function Ca(n,e){return{\u0275kind:n,\u0275providers:e}}function sH(){const n=le(xr);return e=>{const t=n.get(xs);if(e!==t.components[0])return;const r=n.get(Bs),i=n.get(aH);1===n.get($D)&&r.initialNavigation(),n.get(cH,null,Tt.Optional)?.setUpPreloading(),n.get(jD,null,Tt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const aH=new Ce("",{factory:()=>new M}),$D=new Ce("",{providedIn:"root",factory:()=>1}),cH=new Ce("");function hae(n){return Ca(0,[{provide:cH,useExisting:cae},{provide:rH,useExisting:n}])}function pae(n){return Ca(9,[{provide:J$,useValue:Qse},{provide:Z$,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const lH=new Ce("ROUTER_FORROOT_GUARD"),gae=[b_,{provide:Hf,useClass:Jw},Bs,U_,{provide:Gf,useFactory:function oH(n){return n.routerState.root},deps:[Bs]},UD,[]];let uH=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[gae,[],{provide:Jf,multi:!0,useValue:t},{provide:lH,useFactory:vae,deps:[[Bs,new Ch,new wh]]},{provide:Yf,useValue:r||{}},r?.useHash?{provide:id,useClass:lne}:{provide:id,useClass:ej},{provide:jD,useFactory:()=>{const n=le(bre),e=le(Ot),t=le(Yf),r=le(pI),i=le(Hf);return t.scrollOffset&&n.setOffset(t.scrollOffset),new iH(i,r,n,e,t)}},r?.preloadingStrategy?hae(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Eae(r):[],r?.bindToComponentInputs?Ca(8,[F$,{provide:cI,useExisting:F$}]).\u0275providers:[],r?.enableViewTransitions?pae().\u0275providers:[],[{provide:dH,useFactory:sH},{provide:vw,multi:!0,useExisting:dH}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Jf,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(fe(lH,8))};static#t=this.\u0275mod=Wi({type:n});static#n=this.\u0275inj=ui({})}return n})();function vae(n){return"guarded"}function Eae(n){return["disabled"===n.initialNavigation?Ca(3,[{provide:SP,multi:!0,useFactory:()=>{const e=le(Bs);return()=>{e.setUpLocationChangeListener()}}},{provide:$D,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ca(2,[{provide:$D,useValue:0},{provide:SP,multi:!0,deps:[xr],useFactory:e=>{const t=e.get(ane,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Bs),o=e.get(aH);tH(i,()=>{r(!0)}),e.get(pI).afterPreactivation=()=>(r(!0),o.closed?Ze(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const dH=new Ce("");let wae=(()=>{class n{ngOnInit(){this.setupVideoLoop()}setupVideoLoop(){const t=document.getElementById("background-video"),r=["assets/videos/IMG_4171.mp4","assets/videos/IMG_4242.mp4","assets/videos/IMG_4437.mp4"];let i=0;t.addEventListener("ended",()=>{i=(i+1)%r.length,t.src=r[i],t.play()})}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=sr({type:n,selectors:[["app-home"]],decls:20,vars:0,consts:[["aria-label","Content",1,"page-content"],[1,"video-container"],["id","background-video","autoplay","","muted","","playsinline",""],["src","assets/videos/IMG_4171.mp4","type","video/mp4"],[1,"wrapper"],["id","meet-bob-"],[1,"welcome-text"],[1,"image-container"],["src","/assets/bob.jpg","alt","Bob's Picture",1,"intro-image"],[1,"info-text"],["routerLink","/about",1,"page-link"],[1,"fas","fa-paw"],[1,"cta-container"],["routerLink","/about",1,"cta-button"]],template:function(r,i){1&r&&(se(0,"main",0)(1,"div",1)(2,"video",2),_n(3,"source",3),re()(),se(4,"div",4)(5,"h1",5),_e(6,"Meet Bob \u{1f431}"),re(),se(7,"p",6),_e(8," Welcome to the official site of Bob, the most charming cat you\u2019ll ever meet. "),re(),se(9,"div",7),_n(10,"img",8),re(),se(11,"p",9),_e(12," Looking to learn more about our fluffy friend? Check out "),se(13,"a",10),_n(14,"i",11),_e(15," About Bob "),re(),_e(16,". "),re(),se(17,"div",12)(18,"a",13),_e(19,"Learn More About Bob"),re()()()())},dependencies:[Zf],styles:['.highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}.page-content[_ngcontent-%COMP%]{position:relative;overflow:hidden;color:#333;font-family:Roboto,sans-serif;padding:20px}.video-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:-1}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;min-width:100%;min-height:100%;width:auto;height:auto;transform:translate(-50%,-50%);opacity:.4;object-fit:cover;filter:brightness(70%)}.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;max-width:800px;margin:0 auto;background:#f7f9fc;box-shadow:0 4px 8px #0000001a;border-radius:8px;padding:40px;position:relative;z-index:1}#meet-bob-[_ngcontent-%COMP%]{color:#eb94bd;text-align:center;font-size:2.5rem;margin-bottom:20px;position:relative}#meet-bob-[_ngcontent-%COMP%]:after{content:"";width:60px;height:4px;background-color:#2e4057;display:block;margin:10px auto 0;border-radius:2px}.welcome-text[_ngcontent-%COMP%], .info-text[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.8;margin-bottom:20px;text-align:center}.page-link[_ngcontent-%COMP%]{position:relative;color:#2e4057;text-decoration:none;transition:color .3s}.page-link[_ngcontent-%COMP%]:hover{color:#eb94bd}.page-link[_ngcontent-%COMP%]:after{content:"";position:absolute;width:0;height:2px;background-color:#eb94bd;left:0;bottom:-5px;transition:width .3s}.page-link[_ngcontent-%COMP%]:hover:after{width:100%}.page-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.image-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:600px;margin:20px 0}.image-container[_ngcontent-%COMP%]   .intro-image[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:10px;transition:transform .3s,box-shadow .3s}.image-container[_ngcontent-%COMP%]   .intro-image[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 8px 16px #0003}.image-container[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;border:0px solid rgba(235,148,189,.5);border-radius:10px;pointer-events:none}.cta-container[_ngcontent-%COMP%]{text-align:center;margin:40px 0}.cta-button[_ngcontent-%COMP%]{background-color:#eb94bd;color:#fff;padding:15px 30px;border-radius:50px;text-decoration:none;font-size:1.2rem;transition:background-color .3s}.cta-button[_ngcontent-%COMP%]:hover{background-color:#e369a2}@media (max-width: 768px){#meet-bob-[_ngcontent-%COMP%]{font-size:2rem}.wrapper[_ngcontent-%COMP%]{padding:20px}.cta-button[_ngcontent-%COMP%]{font-size:1rem;padding:10px 20px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{display:none}}']})}return n})();function Iae(n,e){if(1&n&&(a_(0),se(1,"section",2),_n(2,"img",3),se(3,"p",4),_e(4),re()(),c_()),2&n){const t=e.$implicit;Oe(),rP("background-color",t.bgColor)("color",t.fgColor),Oe(),rt("src",t.image,ll)("alt",t.alt),Oe(2),qr(t.text)}}let bae=(()=>{class n{constructor(){this.sections=[{image:"/assets/about_me/initial.png",alt:"Bob being mysterious",bgColor:"#FFEBEE",fgColor:"#004D40",text:"Hey there, I\u2019m Bob, but I\u2019ve gone by a few names in my time. You see, I\u2019m quite the mysterious kitty.\n             My original name was \u201cMiming,\u201d but somewhere along the way, I decided \u201cBob\u201d suited me better."},{image:"/assets/about_me/bday.jpg",alt:"Bob birthday celebration",bgColor:"#FFF3E0",fgColor:"#5D4037",text:"I celebrate my birthday on February 25th, but nobody really knows when I was born.\n             I just wandered into a hospital and that day, February 25th, was where my incredible journey began.\n             Luckily, my owner\u2019s dad found me and brought me to my forever home."},{image:"/assets/about_me/pretty.jpg",alt:"Bob looking majestic",bgColor:"#E8F5E9",fgColor:"#1B5E20",text:"I may look majestic with my regal demeanor and majestic whiskers, but don\u2019t let that fool you\u2014I\u2019m a playful and talkative kitty as well!\n             I love playtime with my humans.\n             Sometimes, I even have a play fights with another cat in the house, Adoba, who we also call \u201cPoopy.\u201d\n             We keep things interesting around here!"},{image:"/assets/about_me/fighting.jpg",alt:"Bob fighting Poopy",bgColor:"#E3F2FD",fgColor:"#0D47A1",text:"One thing you should know about me\u2014I may be declawed (thanks to a previous owner), but I can still hold my own in a fight!\n             I\u2019m also quite the chatterbox and always have something to say."},{image:"/assets/about_me/eating.jpg",alt:"Bob enjoying wet food",bgColor:"#F3E5F5",fgColor:"#4A148C",text:"When it comes to food, I\u2019m a bit of a connoisseur. I\u2019m extremely picky, and my absolute favorite is wet food, especially the kind with plenty of gravy. Yum!"},{image:"/assets/about_me/window.jpg",alt:"Bob sunbathing",bgColor:"#FFFDE7",fgColor:"#F57F17",text:"On sunny days, you\u2019ll often find me perched on a windowsill, basking in the sunlight. Sunbathing is one of my guilty pleasures."},{image:"/assets/about_me/drinking.jpg",alt:"Bob drinking from a human cup",bgColor:"#E0F7FA",fgColor:"#006064",text:"Oh, and let\u2019s talk about my favorite place to drink water from\u2014the human cups. I like to take a sip from them when I\u2019m feeling fancy."},{image:"/assets/about_me/attitude.jpg",alt:"Bob with an attitude",bgColor:"#FCE4EC",fgColor:"#880E4F",text:"But here\u2019s the thing\u2014don\u2019t be late getting home to me.\n             I might have a bit of an attitude when you arrive home late.\n             I just like to keep my humans on their toes, you know?"},{image:"/assets/about_me/magestic.jpg",alt:"Bob the Majestic Feline",bgColor:"#F1F8E9",fgColor:"#33691E",text:"So there you have it, a glimpse into the life of yours truly, Bob the Majestic Feline.\n             Thanks for visiting my page, and feel free to follow along with my adventures! \u{1f638}\u{1f43e}"}]}ngOnInit(){}onWindowScroll(){document.querySelectorAll(".about-section").forEach(r=>{r.getBoundingClientRect().top<window.innerHeight-100&&r.classList.add("visible")})}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=sr({type:n,selectors:[["app-about"]],hostBindings:function(r,i){1&r&&At("scroll",function(){return i.onWindowScroll()},0,vF)},decls:4,vars:1,consts:[[1,"about-bob"],[4,"ngFor","ngForOf"],[1,"about-section"],[1,"about-image",3,"src","alt"],[1,"about-text"]],template:function(r,i){1&r&&(se(0,"section",0)(1,"h1"),_e(2,"Scroll down to meet Bob!"),re()(),an(3,Iae,5,7,"ng-container",1)),2&r&&(Oe(3),rt("ngForOf",i.sections))},dependencies:[_l],styles:[".highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}.about-bob[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;color:#eb94bd;text-align:center;font-size:2.5rem;padding:2rem 0}.about-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;padding:3rem 1.5rem;background-color:#f7f9fc;color:#333;text-align:center;transition:background-color .5s ease,color .5s ease;opacity:0;transform:translateY(20px);transition:opacity .6s ease,transform .6s ease}.about-section.visible[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.about-section[_ngcontent-%COMP%]   .about-image[_ngcontent-%COMP%]{width:100%;max-width:300px;border-radius:15px;margin-bottom:1.5rem;transition:transform .3s ease,box-shadow .3s ease}.about-section[_ngcontent-%COMP%]   .about-image[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 8px 16px #0003}.about-section[_ngcontent-%COMP%]   .about-text[_ngcontent-%COMP%]{max-width:600px;font-size:1.2rem;line-height:1.6;font-family:Roboto,sans-serif}@media (prefers-reduced-motion: no-preference){.about-section[_ngcontent-%COMP%]{opacity:0;transform:translateY(20px)}.about-section.visible[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.about-section[_ngcontent-%COMP%]{padding:2rem 1rem;text-align:center}.about-section[_ngcontent-%COMP%]   .about-image[_ngcontent-%COMP%]{max-width:250px}.about-bob[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}"]})}return n})();const Tae=[{filename:"IMG_4482.png",caption:"Denzel Washington Bob",isZoomed:!1},{filename:"IMG_4509.JPG",caption:"Bob's Casual Adventure Day",isZoomed:!1},{filename:"IMG_4553.png",caption:"Grandma Bob",isZoomed:!1},{filename:"IMG_4558.png",caption:"Bob Takes a Sip From Mama's Water Cup",isZoomed:!1},{filename:"IMG_4575.png",caption:"Wow, She Can Yawn!",isZoomed:!1},{filename:"IMG_4669.png",caption:"Bob and the Cardboard Box Retreat",isZoomed:!1},{filename:"IMG_1606.jpg",caption:"Window world\u{1fa9f}\u{1f30f}",isZoomed:!1},{filename:"IMG_4676.png",caption:"Guess Which One is Bob",isZoomed:!1},{filename:"IMG_4688.png",caption:"Bob's Unconventional Nap Position",isZoomed:!1},{filename:"IMG_9980.jpg",caption:"Box cat\u{1f4e6}",isZoomed:!1},{filename:"IMG_4654.jpg",caption:"Bob & Poopy",isZoomed:!1},{filename:"IMG_7030.jpeg",caption:"Christmas Bob\u{1f385}\u{1f3fc}\u{1f384}",isZoomed:!1},{filename:"IMG_2590.jpg",caption:"Majestic outdoors Bob\u{1f3d5}\ufe0f",isZoomed:!1},{filename:"IMG_0536.jpg",caption:"2 legged on laptop Bob\u{1f996}",isZoomed:!1},{filename:"IMG_1071.jpg",caption:"Black\u{1f5a4} & Pink\u{1fa77}feeties Bob",isZoomed:!1},{filename:"IMG_2799.jpg",caption:"Laundry World\u{1f457}\u{1f45a}",isZoomed:!1},{filename:"IMG_3215.png",caption:"Stalking/Lurking Bob\u{1f3c3}\u{1f3fb}\u200d\u2640\ufe0f\u{1f977}\u{1f3fb}",isZoomed:!1},{filename:"IMG_9782.png",caption:"Vegetarian Bob\u{1f966}",isZoomed:!1}],Aae=n=>({hovered:n});function Sae(n,e){if(1&n){const t=yo();se(0,"div",2),At("mouseenter",function(){const i=Dn(t).index;return Mn(It().hoveredIndex=i)})("mouseleave",function(){return Dn(t),Mn(It().hoveredIndex=-1)}),se(1,"a",3),_n(2,"img",4),re(),se(3,"div",5),_e(4),re()()}if(2&n){const t=e.$implicit,r=e.index,i=It();rt("ngClass",function AU(n,e,t,r){return SU(ne(),Ji(),n,e,t,r)}(5,Aae,r===i.hoveredIndex)),Oe(),Os("href","assets/photos/"+t.filename,ll)("data-title",t.caption),Oe(),rt("src","assets/photos/"+t.filename,ll),Oe(2),qr(t.caption)}}let Pae=(()=>{class n{constructor(t){this.renderer=t,this.imagesList=Tae,this.hoveredIndex=-1}ngOnInit(){this.loadLightbox2()}loadLightbox2(){const t=this.renderer.createElement("link");t.rel="stylesheet",t.href="assets/css/lightbox.min.css",this.renderer.appendChild(document.head,t);const r=this.renderer.createElement("script");r.src="assets/js/lightbox.min.js",r.onload=()=>{window.lightbox.option({resizeDuration:200,wrapAround:!0})},this.renderer.appendChild(document.body,r)}static#e=this.\u0275fac=function(r){return new(r||n)(ve(fa))};static#t=this.\u0275cmp=sr({type:n,selectors:[["app-gallery"]],decls:2,vars:1,consts:[[1,"image-gallery"],["class","image-item",3,"ngClass","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"image-item",3,"mouseenter","mouseleave","ngClass"],["data-lightbox","gallery"],["alt","Image",3,"src"],[1,"image-caption"]],template:function(r,i){1&r&&(se(0,"div",0),an(1,Sae,5,7,"div",1),re()),2&r&&(Oe(),rt("ngForOf",i.imagesList))},dependencies:[hj,_l],styles:[".image-gallery-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.image-gallery[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.image-item[_ngcontent-%COMP%]{position:relative;overflow:hidden;border-radius:10px;box-shadow:0 4px 6px #0000001a;width:200px;height:200px}.image-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:10px}.image-caption[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;background-color:#00000080;color:#fff;padding:5px;text-align:center;font-size:14px}.image-item[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:transform .2s ease-in-out}"]})}return n})(),Dae=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=sr({type:n,selectors:[["app-bob-life"]],decls:40,vars:0,consts:[["aria-label","Content",1,"page-content"],[1,"wrapper"]],template:function(r,i){1&r&&(se(0,"main",0)(1,"div",1)(2,"h1"),_e(3,"A Day in My Life \u{1f43e}"),re(),se(4,"section")(5,"h2"),_e(6,"Morning Adventures"),re(),se(7,"ul")(8,"li"),_e(9,"In the morning, I meow for food because breakfast is the most important meal of the day."),re(),se(10,"li"),_e(11,"If my human takes too long to wake up, I meow near the door to remind them I'm hungry."),re(),se(12,"li"),_e(13,"I pretend to walk on them and meow even more for food once they finally wake up."),re(),se(14,"li"),_e(15,"After eating, I follow my human downstairs, meowing like I haven't eaten in years! (even though it's probably only been 4 hours...)."),re()()(),se(16,"section")(17,"h2"),_e(18,"Post-Breakfast Rituals"),re(),se(19,"ul")(20,"li"),_e(21,"After breakfast, it's time for my favorite activity: sunbathing!"),re(),se(22,"li"),_e(23,"I like to freeze and pretend to be a statue, ready to pounce on any unsuspecting toy or piece of string."),re(),se(24,"li"),_e(25,"I occasionally munch on some grass \u2013 don't judge me; it's a cat thing!"),re(),se(26,"li"),_e(27,"Bothering my owner is a must. I meow and drag my favorite toy around for some playtime."),re(),se(28,"li"),_e(29,"For extra attention, I like to step on my owner's neck while they're trying to relax. I think she likes it!"),re()()(),se(30,"section")(31,"h2"),_e(32,"Bedtime Antics"),re(),se(33,"ul")(34,"li"),_e(35,"When my human comes home, I'm always happy to see her. But if she take too long to get in bed, I will give her an attitude."),re(),se(36,"li"),_e(37,"I bite my owners ankles and playfully chase them like they're my prey until they finally get into bed."),re(),se(38,"li"),_e(39,"The moment they get into bed, I snuggle up close \u2013 because nighttime is cuddle time!"),re()()()()())},styles:["main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{padding:20px;text-align:left}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{margin-bottom:20px}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:disc;padding-left:20px}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:16px;margin-bottom:8px}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}"]})}return n})();function Mae(n,e){1&n&&cP(0)}function Oae(n,e){if(1&n&&(se(0,"span"),_e(1),re()),2&n){const t=It().$implicit;Oe(),qr(t)}}function Rae(n,e){if(1&n&&(se(0,"li"),an(1,Mae,1,0,"ng-container",5)(2,Oae,2,1,"span",5),re()),2&n){const t=e.$implicit,r=It(4);Oe(),rt("ngIf",r.isNameCategory(t)),Oe(),rt("ngIf",!r.isNameCategory(t))}}function Nae(n,e){if(1&n&&(se(0,"ul"),an(1,Rae,3,2,"li",2),re()),2&n){const t=It(2).$implicit;Oe(),rt("ngForOf",t.children)}}function xae(n,e){if(1&n){const t=yo();a_(0),se(1,"h2",4),At("click",function(){Dn(t);const i=It().$implicit;return Mn(It().toggleCategory(i))}),_e(2),re(),an(3,Nae,2,1,"ul",5),c_()}if(2&n){const t=It().$implicit;Oe(),Xu("is-open",t.isOpen),Oe(),qr(t.name),Oe(),rt("ngIf",t.isOpen)}}function kae(n,e){1&n&&_e(0),2&n&&qr(It().$implicit)}function Fae(n,e){if(1&n&&(se(0,"li"),an(1,xae,4,4,"ng-container",3)(2,kae,1,1,"ng-template",null,0,yP),re()),2&n){const t=e.$implicit,r=fw(3),i=It();Oe(),rt("ngIf",i.isNameCategory(t))("ngIfElse",r)}}let Lae=(()=>{class n{constructor(){this.data={name:"Bob's Names",isOpen:!0,children:[{name:"Bob",isOpen:!1,children:["Bob","Bobby","Bobby girl","Bobs","Bob-ob","Bobsicle","Bob Popsicle","Bobatha","Bob Bibby","Bob house"]},{name:"Buba",isOpen:!1,children:["Buba","Bubbas"]},{name:"Mom/Momma",isOpen:!1,children:["Mom","Mom-om","Mom Mimmy","Mommy","Mommy pie","Momma","Mommas world","Mommas mama","Momma cat","Mamma girl","Mommy pie","Mommas bubbas","Mommy girl","Mommy cat","Big momma"]},{name:"Baby",isOpen:!1,children:["Baby girl","Baby world","Baby","Baby boy","Baby mommy","Baby cat","Baby pie","Baby, my sweet maymie maymie maymie","Baby, my sweet lady lady lady"]},{name:"Maymie",isOpen:!1,children:["Maymie","Maymie baby","Maymie, my sweet baby baby baby"]},{name:"World",isOpen:!1,children:["World","Worldy","Worldy baby girl","Worley baby girly","Window world","Big world"]},{name:"Sweet",isOpen:!1,children:["Sweet baby","Sweet maymie","Sweet girl","Sweet boy","Sweetie","Sweetie weetie","Sweet heart baby fart","Sweet heart","Sweet pie","Sweet world","Sweetness","Sweetness girl","Sweetness girl in a baby world"]},{name:"Girly/Cutie",isOpen:!1,children:["Cutie pie","Girly pie","Girly cat","Pretty","Pretty baby","Pretty lady","Pretty Mimmy"]},{name:"Mim/Bib",isOpen:!1,children:["Mim","Mimmy","Bibby","Bib"]},{name:"Yum-Themed",isOpen:!1,children:["Yummy","Yummy Mommy","Yum yums","Yum yum girl","Yum yum","Yum yum cat","Yum yum mommy num num(s)","Yum yum baby num num(s)","Num nums"]},{name:"Miscellaneous",isOpen:!1,children:["Madness","Boy","Oisee mommy","Doy doy doy mommy boy","Fat girl","Big girl","Shamamma","Chamamma","Ptza ptza ptza ptza *ptza","Ruey baby rue","Waybie","Lady","Waymie baby","Mommy Origami","Quantic Bobby Girl"]}]}}toggleCategory(t){this.isNameCategory(t)&&(t.isOpen=!t.isOpen)}isNameCategory(t){return"object"==typeof t&&"name"in t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=sr({type:n,selectors:[["app-names-list"]],decls:5,vars:2,consts:[["plainText",""],[1,"name-tree"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[3,"click"],[4,"ngIf"]],template:function(r,i){1&r&&(se(0,"div",1)(1,"h1"),_e(2),re(),se(3,"ul"),an(4,Fae,4,2,"li",2),re()()),2&r&&(Oe(2),qr(i.data.name),Oe(2),rt("ngForOf",i.data.children))},dependencies:[_l,fc],styles:['@charset "UTF-8";.highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}.name-tree[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;max-width:600px;margin:20px auto;padding:20px;background-color:#f7f9fc;border-radius:8px;box-shadow:0 2px 4px #0000001a}.name-tree[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;text-align:center}.name-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.name-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.name-tree[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{cursor:pointer;color:#2e4057;margin:10px 0}.name-tree[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{color:#eb94bd}.name-tree[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;padding-left:20px;color:#0b0f14;font-weight:500;font-size:1.1rem}.name-tree[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:before{content:"\\25b8";display:inline-block;margin-right:5px;transition:transform .3s ease}.name-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:5px;margin-left:20px}.name-tree[_ngcontent-%COMP%]   .is-open[_ngcontent-%COMP%]:before{transform:rotate(90deg)}']})}return n})(),hH=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(ve(fa),ve(Ro))};static#t=this.\u0275dir=it({type:n})}return n})(),ud=(()=>{class n extends hH{static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static#t=this.\u0275dir=it({type:n,features:[hn]})}return n})();const wa=new Ce(""),Bae={provide:wa,useExisting:sn(()=>El),multi:!0},$ae=new Ce("");let El=(()=>{class n extends hH{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function jae(){const n=ml()?ml().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ve(fa),ve(Ro),ve($ae,8))};static#t=this.\u0275dir=it({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&At("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Wn([Bae]),hn]})}return n})();const Ni=new Ce(""),wl=new Ce("");function _H(n){return function Cl(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function gI(n){return null}function IH(n){return null!=n}function bH(n){return v_(n)?kn(n):n}function TH(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function AH(n,e){return e.map(t=>t(n))}function SH(n){return n.map(e=>function zae(n){return!n.validate}(e)?e:t=>e.validate(t))}function HD(n){return null!=n?function PH(n){if(!n)return null;const e=n.filter(IH);return 0==e.length?null:function(t){return TH(AH(t,e))}}(SH(n)):null}function zD(n){return null!=n?function DH(n){if(!n)return null;const e=n.filter(IH);return 0==e.length?null:function(t){return function Vae(...n){const e=pD(n),{args:t,keys:r}=n$(n),i=new tn(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let c=s,l=s;for(let h=0;h<s;h++){let g=!1;Co(t[h]).subscribe(Ve(o,_=>{g||(g=!0,l--),a[h]=_},()=>c--,void 0,()=>{(!c||!g)&&(l||o.next(r?i$(r,a):a),o.complete())}))}});return e?i.pipe(r$(e)):i}(AH(t,e).map(bH)).pipe($e(TH))}}(SH(n)):null}function MH(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function qD(n){return n?Array.isArray(n)?n:[n]:[]}function mI(n,e){return Array.isArray(n)?n.includes(e):n===e}function NH(n,e){const t=qD(e);return qD(n).forEach(i=>{mI(t,i)||t.push(i)}),t}function xH(n,e){return qD(e).filter(t=>!mI(n,t))}class kH{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=HD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=zD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class to extends kH{get formDirective(){return null}get path(){return null}}class Il extends kH{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class FH{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Xf=(()=>{class n extends FH{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ve(Il,2))};static#t=this.\u0275dir=it({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Xu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[hn]})}return n})(),_I=(()=>{class n extends FH{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ve(to,10))};static#t=this.\u0275dir=it({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Xu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[hn]})}return n})();const G_="VALID",vI="INVALID",ep="PENDING",W_="DISABLED";class tp{}class VH extends tp{constructor(e,t){super(),this.value=e,this.source=t}}class KD extends tp{constructor(e,t){super(),this.pristine=e,this.source=t}}class QD extends tp{constructor(e,t){super(),this.touched=e,this.source=t}}class EI extends tp{constructor(e,t){super(),this.status=e,this.source=t}}function YD(n){return(CI(n)?n.validators:n)||null}function JD(n,e){return(CI(e)?e.asyncValidators:n)||null}function CI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class ZD{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._events=new M,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===G_}get invalid(){return this.status===vI}get pending(){return this.status==ep}get disabled(){return this.status===W_}get enabled(){return this.status!==W_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(NH(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(NH(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(xH(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(xH(e,this._rawAsyncValidators))}hasValidator(e){return mI(this._rawValidators,e)}hasAsyncValidator(e){return mI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new QD(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&!1!==e.emitEvent&&this._events.next(new QD(!1,r))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new KD(!1,r))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&!1!==e.emitEvent&&this._events.next(new KD(!0,r))}markAsPending(e={}){this.status=ep;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new EI(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=W_,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new VH(this.value,r)),this._events.next(new EI(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=G_,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===G_||this.status===ep)&&this._runAsyncValidator(r,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new VH(this.value,t)),this._events.next(new EI(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?W_:G_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ep,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const r=bH(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new EI(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new lr,this.statusChanges=new lr}_calculateStatus(){return this._allControlsDisabled()?W_:this.errors?vI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ep)?ep:this._anyControlsHaveStatus(vI)?vI:G_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new KD(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new QD(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){CI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Jae(n){return Array.isArray(n)?HD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Zae(n){return Array.isArray(n)?zD(n):n||null}(this._rawAsyncValidators)}}class XD extends ZD{constructor(e,t,r){super(YD(t),JD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function BH(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new Q(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function UH(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new Q(1e3,"");if(!r[t])throw new Q(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const np=new Ce("CallSetDisabledState",{providedIn:"root",factory:()=>wI}),wI="always";function K_(n,e,t=wI){eM(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function tce(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&jH(n,e)})}(n,e),function rce(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function nce(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&jH(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function ece(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function TI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function eM(n,e){const t=function OH(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(MH(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function RH(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(MH(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();TI(e._rawValidators,i),TI(e._rawAsyncValidators,i)}function jH(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const cce={provide:to,useExisting:sn(()=>rp)},Q_=Promise.resolve();let rp=(()=>{class n extends to{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new lr,this.form=new XD({},HD(t),zD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Q_.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),K_(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Q_.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Q_.then(()=>{const r=this._findContainer(t.path),i=new XD({});(function $H(n,e){eM(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Q_.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Q_.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function HH(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(ve(Ni,10),ve(wl,10),ve(np,8))};static#t=this.\u0275dir=it({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&At("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Wn([cce]),hn]})}return n})();function zH(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function qH(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const GH=class extends ZD{constructor(e=null,t,r){super(YD(t),JD(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),CI(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=qH(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){zH(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){zH(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){qH(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},dce={provide:Il,useExisting:sn(()=>dd)},QH=Promise.resolve();let dd=(()=>{class n extends Il{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new GH,this._registered=!1,this.name="",this.update=new lr,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function rM(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===El?t=o:function sce(n){return Object.getPrototypeOf(n.constructor)===ud}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function nM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){K_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){QH.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&Nf(r);QH.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function II(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(ve(to,9),ve(Ni,10),ve(wl,10),ve(wa,10),ve(C_,8),ve(np,8))};static#t=this.\u0275dir=it({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Wn([dce]),hn,po]})}return n})(),SI=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=it({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})();const fce={provide:wa,useExisting:sn(()=>iM),multi:!0};let pce=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iM=(()=>{class n extends ud{constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=le(np,{optional:!0})??wI}ngOnInit(){this._control=this._injector.get(Il),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static#e=this.\u0275fac=function(r){return new(r||n)(ve(fa),ve(Ro),ve(pce),ve(xr))};static#t=this.\u0275dir=it({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){1&r&&At("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Wn([fce]),hn]})}return n})();let hd=(()=>{class n{constructor(){this._validator=gI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):gI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=it({type:n,features:[po]})}return n})();const Dce={provide:Ni,useExisting:sn(()=>Y_),multi:!0};let Y_=(()=>{class n extends hd{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Nf,this.createValidator=t=>_H}enabled(t){return t}static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static#t=this.\u0275dir=it({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Os("required",i._enabled?"":null)},inputs:{required:"required"},features:[Wn([Dce]),hn]})}return n})();const Nce={provide:Ni,useExisting:sn(()=>uM),multi:!0};let uM=(()=>{class n extends hd{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function i4(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>function CH(n){return e=>function pH(n){return null!=n&&"number"==typeof n.length}(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static#t=this.\u0275dir=it({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Os("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Wn([Nce]),hn]})}return n})(),kce=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Wi({type:n});static#n=this.\u0275inj=ui({})}return n})(),Lce=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:np,useValue:t.callSetDisabledState??wI}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Wi({type:n});static#n=this.\u0275inj=ui({imports:[kce]})}return n})();function Vce(n,e){if(1&n){const t=yo();se(0,"div",6)(1,"input",7),ya("ngModelChange",function(i){Dn(t);const o=It().index,s=It();return cc(s.userAnswers[o],i)||(s.userAnswers[o]=i),Mn(i)}),re(),se(2,"label"),_e(3),re()()}if(2&n){const t=e.$implicit,r=It().index,i=It();Oe(),rt("name","question"+r)("value",t),_a("ngModel",i.userAnswers[r]),Oe(2),qr(t)}}function Uce(n,e){if(1&n&&(se(0,"div",4)(1,"p"),_e(2),re(),an(3,Vce,4,4,"div",5),re()),2&n){const t=e.$implicit,r=e.index;Oe(2),pw("",r+1,". ",t.question,""),Oe(),rt("ngForOf",t.answers)}}function Bce(n,e){1&n&&(se(0,"p"),_e(1,"Perfect! You know Bob very well!"),re())}function jce(n,e){1&n&&(se(0,"p"),_e(1,"So close! You're almost a Bob expert!"),re())}function $ce(n,e){1&n&&(se(0,"p"),_e(1," Keep it up! You're on your way to becoming a Bob expert. "),re())}function Hce(n,e){1&n&&(se(0,"p"),_e(1," Not bad! You know some things about Bob, but there's more to learn. "),re())}function zce(n,e){1&n&&(se(0,"p"),_e(1,"You've got some Bobology to catch up on!"),re())}function qce(n,e){if(1&n&&(se(0,"div",8)(1,"h2"),_e(2),re(),an(3,Bce,2,0,"p",9)(4,jce,2,0,"p",9)(5,$ce,2,0,"p",9)(6,Hce,2,0,"p",9)(7,zce,2,0,"p",9),re()),2&n){const t=It();Oe(2),pw("Your Score: ",t.score,"/",t.questions.length,""),Oe(),rt("ngIf",t.score===t.questions.length),Oe(),rt("ngIf",t.score===t.questions.length-1),Oe(),rt("ngIf",t.score>=5&&t.score<t.questions.length-1),Oe(),rt("ngIf",t.score>0&&t.score<5),Oe(),rt("ngIf",0===t.score)}}let Gce=(()=>{class n{constructor(){this.questions=[{question:"Where is Bob's favorite place to lay down on her owner?",answers:["Lap","Neck","Shoulder","Feet"],correctAnswer:"Neck"},{question:"What is Bob's favorite flavor of tube treat?",answers:["Salmon","Chicken","Tuna","Beef"],correctAnswer:"Chicken"},{question:"When is Bob's birthday?",answers:["February 14th","February 25th","March 3rd","January 1st"],correctAnswer:"February 25th"},{question:"What gender is Bob?",answers:["Lady","Gentleman","",""],correctAnswer:"Lady"},{question:"Who would beat Bob in a fight?",answers:["Godzilla","A T-Rex","King Kong","None of the above"],correctAnswer:"None of the above"},{question:"Which paw on Bob is pink?",answers:["Front right","Back left","Front left","Back right"],correctAnswer:"Back right"},{question:"Who is Bob's arch-nemesis?",answers:["Adoba","Neighbor's dog","Bird outside","The vacuum"],correctAnswer:"Adoba"},{question:"What\u2019s Bob\u2019s favorite time of day?",answers:["Early morning","Nap time","Dinner time","Late night"],correctAnswer:"Nap time"},{question:"What is Bob's superpower?",answers:["Invisibility","Teleportation","Mind control","Cuteness overload"],correctAnswer:"Cuteness overload"}],this.userAnswers=new Array(this.questions.length).fill(""),this.quizSubmitted=!1,this.score=0}submitQuiz(){this.score=0;for(let t=0;t<this.questions.length;t++)this.userAnswers[t]===this.questions[t].correctAnswer&&this.score++;this.quizSubmitted=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=sr({type:n,selectors:[["app-quiz"]],decls:7,vars:2,consts:[[1,"quiz-container"],["class","question-block",4,"ngFor","ngForOf"],[3,"click"],["class","results",4,"ngIf"],[1,"question-block"],["class","answer-option",4,"ngFor","ngForOf"],[1,"answer-option"],["type","radio",3,"ngModelChange","name","value","ngModel"],[1,"results"],[4,"ngIf"]],template:function(r,i){1&r&&(se(0,"div",0)(1,"h1"),_e(2,"Test Your Knowledge of Bob \u{1f431}"),re(),an(3,Uce,4,3,"div",1),se(4,"button",2),At("click",function(){return i.submitQuiz()}),_e(5,"Submit Answers"),re(),an(6,qce,8,7,"div",3),re()),2&r&&(Oe(3),rt("ngForOf",i.questions),Oe(3),rt("ngIf",i.quizSubmitted))},dependencies:[_l,fc,El,iM,Xf,dd],styles:[".highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}.quiz-container[_ngcontent-%COMP%]{max-width:600px;margin:20px auto;padding:20px;background-color:#f7f9fc;border-radius:8px;box-shadow:0 4px 8px #0000001a;font-family:Roboto,sans-serif}h1[_ngcontent-%COMP%]{color:#eb94bd;text-align:center}.question-block[_ngcontent-%COMP%]{margin-bottom:20px}.question-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;color:#333}.question-block[_ngcontent-%COMP%]   .answer-option[_ngcontent-%COMP%]{margin-left:20px;display:flex;align-items:center;font-size:1rem;color:#2e4057}.question-block[_ngcontent-%COMP%]   .answer-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:10px}button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;background-color:#eb94bd;color:#fff;border:none;border-radius:5px;font-size:1.1rem;cursor:pointer;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#e369a2}.results[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.results[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#eb94bd;font-size:1.8rem}.results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#333}"]})}return n})(),Wce=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=sr({type:n,selectors:[["app-anthem"]],decls:25,vars:0,consts:[["aria-label","Content",1,"page-content"],[1,"wrapper"],["id","anthem-title"],[1,"decorative-elements"],[1,"fireworks",2,"background-image","url('/assets/bob.jpg')"],[1,"stars",2,"background-image","url('/assets/bob.jpg')"],[1,"welcome-text"]],template:function(r,i){1&r&&(se(0,"main",0)(1,"div",1)(2,"h1",2),_e(3,"Star Spangled Bobby Girl"),re(),se(4,"div",3),_n(5,"div",4)(6,"div",5),re(),se(7,"p",6),_e(8," O say can you see, by the Yum yum's early light,"),_n(9,"br"),_e(10," What so Sweet heart we hailed, at the Maymie's last meow,"),_n(11,"br"),_e(12," Whose broad Bobsicles and bright stars, through the perilous Mommy pie fight,"),_n(13,"br"),_e(14," O'er the ramparts Bobitha watched, were so gallantly streaming?"),_n(15,"br"),_e(16," And the baby fart's red glare, Bob pops bursting in Big world air,"),_n(17,"br"),_e(18," Gave proof through the Momom, that our Baby boy was still there;"),_n(19,"br"),_e(20," O, say, does that bobby girl maymie, yet wave,"),_n(21,"br"),_e(22," O'er the land of the Window world,"),_n(23,"br"),_e(24," and the home of the Worldey baby girly. "),re()()())},styles:['.page-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;display:flex;justify-content:center;align-items:center}.wrapper[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;background:linear-gradient(to bottom,#f8c0c0,#f1f1f1);border:2px solid #000;padding:20px;box-shadow:0 4px 6px #0000001a}.wrapper[_ngcontent-%COMP%]   h1#anthem-title[_ngcontent-%COMP%]{font-size:2.5rem;color:#0033a0;text-align:center;padding-bottom:20px;border-bottom:2px solid #BD202E;margin-bottom:20px}.wrapper[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6;margin:20px 0;text-align:left;padding:0 10px}.wrapper[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]   br[_ngcontent-%COMP%]{content:"";display:block;margin:1em 0}@media (max-width: 600px){.wrapper[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]{font-size:.9rem;padding:0 15px}}@media screen and (max-width: 768px){.wrapper[_ngcontent-%COMP%]{padding:15px}.wrapper[_ngcontent-%COMP%]   h1#anthem-title[_ngcontent-%COMP%]{font-size:2rem}}']})}return n})(),Kce=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=sr({type:n,selectors:[["app-page-not-found"]],decls:11,vars:0,consts:[[1,"page-not-found"],["src","assets/bob404.png","alt","Bob the cat as a construction worker",1,"not-found-image"],["routerLink","/"]],template:function(r,i){1&r&&(se(0,"div",0)(1,"h1"),_e(2,"Oops!"),re(),se(3,"p"),_e(4,"It looks like Bob is still building this page."),re(),_n(5,"img",1),se(6,"p"),_e(7,"Let's get you back "),se(8,"a",2),_e(9,"home"),re(),_e(10,"."),re()())},dependencies:[Zf],styles:[".page-not-found[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#333}.page-not-found[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:tomato}.page-not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}.page-not-found[_ngcontent-%COMP%]   .not-found-image[_ngcontent-%COMP%]{max-width:100%;height:auto;margin:20px 0}.page-not-found[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.page-not-found[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return n})();function Qce(n,e){if(1&n&&(se(0,"div",5)(1,"p"),_e(2),re()()),2&n){const t=It().$implicit;Oe(2),qr(t.answer)}}function Yce(n,e){if(1&n){const t=yo();se(0,"div",2)(1,"div",3),At("click",function(){const i=Dn(t).$implicit;return Mn(It().toggleAnswer(i))}),se(2,"h3"),_e(3),re()(),an(4,Qce,3,1,"div",4),re()}if(2&n){const t=e.$implicit;Oe(3),qr(t.question),Oe(),rt("ngIf",t.show)}}let Jce=(()=>{class n{constructor(){this.faqs=[{question:"Is she a maymie?",answer:"Absolutely! She is a maymie lady.",show:!1},{question:"Is she a baby?",answer:"Yes, her name is Baby World.",show:!1},{question:"Can you air fry her?",answer:"No, she is too pretty.",show:!1},{question:"Does she love to play?",answer:"Oh yes, especially when its late at night and her owner wants to go to bed!",show:!1},{question:"What's her favorite snack?",answer:"She loves tube treats!",show:!1},{question:"What is your return policy?",answer:"We dont have a return polcicy, she is not for sale...",show:!1},{question:"How do I track my order?",answer:"She cant be ordered... but she likes to go outside and wander around the house!",show:!1},{question:"Do you ship internationally?",answer:"Hey! Who made this webiste...",show:!1}]}toggleAnswer(t){t.show=!t.show}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=sr({type:n,selectors:[["app-faq"]],decls:4,vars:1,consts:[[1,"faq-container"],["class","faq-item",4,"ngFor","ngForOf"],[1,"faq-item"],[1,"question",3,"click"],["class","answer",4,"ngIf"],[1,"answer"]],template:function(r,i){1&r&&(se(0,"div",0)(1,"h2"),_e(2,"Frequently Asked Questions About Bob"),re(),an(3,Yce,5,2,"div",1),re()),2&r&&(Oe(3),rt("ngForOf",i.faqs))},dependencies:[_l,fc],styles:[".faq-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.faq-item[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;margin-bottom:10px;padding-bottom:10px}.faq-item[_ngcontent-%COMP%]   .question[_ngcontent-%COMP%]{cursor:pointer}.faq-item[_ngcontent-%COMP%]   .question[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.faq-item[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]{margin-top:10px}.faq-item[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]})}return n})();function Zce(n,e){1&n&&(se(0,"p"),_e(1,"Incorrect PIN. Please try again."),re())}function Xce(n,e){if(1&n){const t=yo();se(0,"div")(1,"h2"),_e(2,"Enter PIN to Access"),re(),se(3,"form",1),At("ngSubmit",function(){return Dn(t),Mn(It().checkPin())}),se(4,"input",2),ya("ngModelChange",function(i){Dn(t);const o=It();return cc(o.pin,i)||(o.pin=i),Mn(i)}),re(),se(5,"button",3),_e(6,"Enter"),re()(),an(7,Zce,2,0,"p",0),re()}if(2&n){const t=It();Oe(4),_a("ngModel",t.pin),Oe(3),rt("ngIf",t.invalidPin)}}function ele(n,e){if(1&n&&(se(0,"div")(1,"p"),_e(2),re()()),2&n){const t=e.$implicit;Oe(2),qr(t)}}function tle(n,e){if(1&n&&(se(0,"div")(1,"h2"),_e(2,"Secret Blog"),re(),an(3,ele,3,1,"div",4),re()),2&n){const t=It();Oe(3),rt("ngForOf",t.posts)}}let nle=(()=>{class n{constructor(){this.pin="",this.isAuthenticated=!1,this.invalidPin=!1,this.posts=["This is the first secret post.","Here is another hidden message.","More secret thoughts.","PREEY GIRL"],this.correctPin="1127"}checkPin(){this.pin===this.correctPin?(this.isAuthenticated=!0,this.invalidPin=!1):this.invalidPin=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=sr({type:n,selectors:[["app-secret-blog"]],decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngSubmit"],["type","password","name","pin","maxlength","4","required","",3,"ngModelChange","ngModel"],["type","submit"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&an(0,Xce,8,2,"div",0)(1,tle,4,1,"div",0),2&r&&(rt("ngIf",!i.isAuthenticated),Oe(),rt("ngIf",i.isAuthenticated))},dependencies:[_l,fc,SI,El,Xf,_I,Y_,uM,dd,rp],styles:["h2[_ngcontent-%COMP%]{color:#333}div[_ngcontent-%COMP%]{margin-bottom:20px}button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:10px 20px;border:none;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#45a049}input[type=password][_ngcontent-%COMP%]{width:80px;padding:5px}"]})}return n})();var at=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(at||{});const mc="*";function rle(n,e){return{type:at.Trigger,name:n,definitions:e,options:{}}}function h4(n,e=null){return{type:at.Animate,styles:e,timings:n}}function J_(n){return{type:at.Style,styles:n,offset:null}}function ole(n){return{type:at.Keyframes,steps:n}}function f4(n,e,t=null){return{type:at.Transition,expr:n,animation:e,options:t}}class Z_{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class p4{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}var Ia=dt(3345);Ia.A.registerVersion("firebase","10.12.5","app-compat");var ba=dt(7852);(0,ba.registerVersion)("firebase","10.12.5","app");class ple extends Wt{constructor(e,t){super()}schedule(e,t=0){return this}}const PI={setInterval(n,e,...t){const{delegate:r}=PI;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=PI;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class g4 extends ple{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return PI.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&PI.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,An(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const hM={now:()=>(hM.delegate||Date).now(),delegate:void 0};class X_{constructor(e,t=X_.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}X_.now=hM.now;class m4 extends X_{constructor(e,t=X_.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const _le=new class mle extends m4{}(class gle extends g4{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),fM=new m4(g4),pM=new Rf("ANGULARFIRE2_VERSION");class gM{constructor(){return((n,e)=>{const t=(0,ba.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r})(vle)}}const vle="app-check";function ip(){}class _4{zone;delegate;constructor(e,t=_le){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},t,r)}}class Ele{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ip,{},ip,ip)),t.pipe(Ri({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let mM=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new _4(Zone.current)),this.insideAngular=t.run(()=>new _4(Zone.current,fM)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(fe(Ot))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wr(n){return function wle(n){return function(t){return(t=t.lift(new Ele(n.ngZone))).pipe(Ff(n.outsideAngular),sd(n.insideAngular))}}(function op(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}const ble=["ngOnDestroy"];class y4{constructor(e){return e}}const ey=new Ce("angularfire2.app.options"),ty=new Ce("angularfire2.app.name");function DI(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const s=Ia.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ia.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){const a=!!module.hot;Sle("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new y4(s)}const Sle=(n,...e)=>{},Ple={provide:y4,useFactory:DI,deps:[ey,Ot,[new Ch,ty]]};let Dle=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:ey,useValue:t},{provide:ty,useValue:r}]}}constructor(t){Ia.A.registerVersion("angularfire",pM.full,"core"),Ia.A.registerVersion("angularfire",pM.full,"app-compat"),Ia.A.registerVersion("angular",pee.full,t.toString())}static \u0275fac=function(r){return new(r||n)(fe(ts))};static \u0275mod=Wi({type:n});static \u0275inj=ui({providers:[Ple]})}return n})();function _M(n,e,t,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return function Mle(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,s)||(v4("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Ole?" You may need to reload as Firebase is not HMR aware.":""}`),v4("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const Ole=typeof module<"u"&&!!module.hot,v4=(n,...e)=>{};function yM(...n){const e=D_(n),t=function $ie(n,e){return"number"==typeof fD(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Co(r[0]):Lf(t)(kn(r,e)):Ls}globalThis.\u0275AngularfireInstanceCache||=[],dt(9254);class Rle extends M{constructor(e=1/0,t=1/0,r=hM){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}}function E4(n={}){const{connector:e=(()=>new M),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},v=()=>{_(),s=c=void 0,h=g=!1},w=()=>{const b=s;v(),b?.unsubscribe()};return we((b,A)=>{l++,!g&&!h&&_();const N=c=c??e();A.add(()=>{l--,0===l&&!g&&!h&&(a=vM(w,i))}),N.subscribe(A),!s&&l>0&&(s=new Wo({next:R=>N.next(R),error:R=>{g=!0,_(),a=vM(v,t,R),N.error(R)},complete:()=>{h=!0,_(),a=vM(v,r),N.complete()}}),Co(b).subscribe(s))})(o)}}function vM(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Wo({next:()=>{r.unsubscribe(),n()}});return Co(e(...t)).subscribe(r)}function C4(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,E4({connector:()=>new Rle(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function w4(n,e){return Mt(e)?Lr(()=>n,e):Lr(()=>n)}const EM=new Ce("angularfire2.auth.use-emulator"),CM=new Ce("angularfire2.auth.settings"),wM=new Ce("angularfire2.auth.tenant-id"),IM=new Ce("angularfire2.auth.langugage-code"),bM=new Ce("angularfire2.auth.use-device-language"),TM=new Ce("angularfire.auth.persistence"),AM=(n,e,t,r,i,o,s,a)=>_M(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(const[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]);let MI=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,h,g,_,v){const w=new M,b=Ze(void 0).pipe(sd(s.outsideAngular),Lr(()=>o.runOutsideAngular(()=>Promise.resolve().then(dt.bind(dt,9254)))),$e(()=>DI(t,o,r)),$e(A=>AM(A,o,a,l,h,g,c,_)),C4({bufferSize:1,refCount:!1}));if($w(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ze(null);else{b.pipe(yl()).subscribe();const A=b.pipe(Lr(V=>V.getRedirectResult().then(ie=>ie,()=>null)),Wr,C4({bufferSize:1,refCount:!1})),N=b.pipe(Lr(V=>new tn(ie=>({unsubscribe:o.runOutsideAngular(()=>V.onAuthStateChanged(be=>ie.next(be),be=>ie.error(be),()=>ie.complete()))})))),R=b.pipe(Lr(V=>new tn(ie=>({unsubscribe:o.runOutsideAngular(()=>V.onIdTokenChanged(be=>ie.next(be),be=>ie.error(be),()=>ie.complete()))}))));this.authState=A.pipe(w4(N),Ff(s.outsideAngular),sd(s.insideAngular)),this.user=A.pipe(w4(R),Ff(s.outsideAngular),sd(s.insideAngular)),this.idToken=this.user.pipe(Lr(V=>V?kn(V.getIdToken()):Ze(null))),this.idTokenResult=this.user.pipe(Lr(V=>V?kn(V.getIdTokenResult()):Ze(null))),this.credential=yM(A,w,this.authState.pipe(ss(V=>!V))).pipe($e(V=>V?.user?V:null),Ff(s.outsideAngular),sd(s.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(ble.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const c=a?.[o];return"function"==typeof c?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{const g=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,g),g})})})}))(this,b,o,{spy:{apply:(A,N,R)=>{(A.startsWith("signIn")||A.startsWith("createUser"))&&R.then(V=>w.next(V))}}})}static \u0275fac=function(r){return new(r||n)(fe(ey),fe(ty,8),fe(ts),fe(Ot),fe(mM),fe(EM,8),fe(CM,8),fe(wM,8),fe(IM,8),fe(bM,8),fe(TM,8),fe(gM,8))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function SM(){return we((n,e)=>{let t,r=!1;n.subscribe(Ve(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}function I4(n,e=jr){return n=n??xle,we((t,r)=>{let i,o=!0;t.subscribe(Ve(r,s=>{const a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function xle(n,e){return n===e}var pd,A4,_c=dt(1362),Vo=dt(8041),S=dt(1076),b4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},T4={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(x,P,F){F||(F=0);var B=Array(16);if("string"==typeof P)for(var $=0;16>$;++$)B[$]=P.charCodeAt(F++)|P.charCodeAt(F++)<<8|P.charCodeAt(F++)<<16|P.charCodeAt(F++)<<24;else for($=0;16>$;++$)B[$]=P[F++]|P[F++]<<8|P[F++]<<16|P[F++]<<24;var G=x.g[3],L=(P=x.g[0])+(G^(F=x.g[1])&(($=x.g[2])^G))+B[0]+3614090360&4294967295;L=(F=($=(G=(P=(F=($=(G=(P=(F=($=(G=(P=(F=($=(G=(P=(F=($=(G=(P=(F=($=(G=(P=(F=($=(G=(P=(F=($=(G=(P=(F=($=(G=(P=(F=($=(G=(P=(F=($=(G=(P=(F=($=(G=(P=(F=($=(G=(P=(F=($=(G=(P=(F=($=(G=(P=F+(L<<7&4294967295|L>>>25))+((L=G+($^P&(F^$))+B[1]+3905402710&4294967295)<<12&4294967295|L>>>20))+((L=$+(F^G&(P^F))+B[2]+606105819&4294967295)<<17&4294967295|L>>>15))+((L=F+(P^$&(G^P))+B[3]+3250441966&4294967295)<<22&4294967295|L>>>10))+((L=P+(G^F&($^G))+B[4]+4118548399&4294967295)<<7&4294967295|L>>>25))+((L=G+($^P&(F^$))+B[5]+1200080426&4294967295)<<12&4294967295|L>>>20))+((L=$+(F^G&(P^F))+B[6]+2821735955&4294967295)<<17&4294967295|L>>>15))+((L=F+(P^$&(G^P))+B[7]+4249261313&4294967295)<<22&4294967295|L>>>10))+((L=P+(G^F&($^G))+B[8]+1770035416&4294967295)<<7&4294967295|L>>>25))+((L=G+($^P&(F^$))+B[9]+2336552879&4294967295)<<12&4294967295|L>>>20))+((L=$+(F^G&(P^F))+B[10]+4294925233&4294967295)<<17&4294967295|L>>>15))+((L=F+(P^$&(G^P))+B[11]+2304563134&4294967295)<<22&4294967295|L>>>10))+((L=P+(G^F&($^G))+B[12]+1804603682&4294967295)<<7&4294967295|L>>>25))+((L=G+($^P&(F^$))+B[13]+4254626195&4294967295)<<12&4294967295|L>>>20))+((L=$+(F^G&(P^F))+B[14]+2792965006&4294967295)<<17&4294967295|L>>>15))+((L=F+(P^$&(G^P))+B[15]+1236535329&4294967295)<<22&4294967295|L>>>10))+((L=P+($^G&(F^$))+B[1]+4129170786&4294967295)<<5&4294967295|L>>>27))+((L=G+(F^$&(P^F))+B[6]+3225465664&4294967295)<<9&4294967295|L>>>23))+((L=$+(P^F&(G^P))+B[11]+643717713&4294967295)<<14&4294967295|L>>>18))+((L=F+(G^P&($^G))+B[0]+3921069994&4294967295)<<20&4294967295|L>>>12))+((L=P+($^G&(F^$))+B[5]+3593408605&4294967295)<<5&4294967295|L>>>27))+((L=G+(F^$&(P^F))+B[10]+38016083&4294967295)<<9&4294967295|L>>>23))+((L=$+(P^F&(G^P))+B[15]+3634488961&4294967295)<<14&4294967295|L>>>18))+((L=F+(G^P&($^G))+B[4]+3889429448&4294967295)<<20&4294967295|L>>>12))+((L=P+($^G&(F^$))+B[9]+568446438&4294967295)<<5&4294967295|L>>>27))+((L=G+(F^$&(P^F))+B[14]+3275163606&4294967295)<<9&4294967295|L>>>23))+((L=$+(P^F&(G^P))+B[3]+4107603335&4294967295)<<14&4294967295|L>>>18))+((L=F+(G^P&($^G))+B[8]+1163531501&4294967295)<<20&4294967295|L>>>12))+((L=P+($^G&(F^$))+B[13]+2850285829&4294967295)<<5&4294967295|L>>>27))+((L=G+(F^$&(P^F))+B[2]+4243563512&4294967295)<<9&4294967295|L>>>23))+((L=$+(P^F&(G^P))+B[7]+1735328473&4294967295)<<14&4294967295|L>>>18))+((L=F+(G^P&($^G))+B[12]+2368359562&4294967295)<<20&4294967295|L>>>12))+((L=P+(F^$^G)+B[5]+4294588738&4294967295)<<4&4294967295|L>>>28))+((L=G+(P^F^$)+B[8]+2272392833&4294967295)<<11&4294967295|L>>>21))+((L=$+(G^P^F)+B[11]+1839030562&4294967295)<<16&4294967295|L>>>16))+((L=F+($^G^P)+B[14]+4259657740&4294967295)<<23&4294967295|L>>>9))+((L=P+(F^$^G)+B[1]+2763975236&4294967295)<<4&4294967295|L>>>28))+((L=G+(P^F^$)+B[4]+1272893353&4294967295)<<11&4294967295|L>>>21))+((L=$+(G^P^F)+B[7]+4139469664&4294967295)<<16&4294967295|L>>>16))+((L=F+($^G^P)+B[10]+3200236656&4294967295)<<23&4294967295|L>>>9))+((L=P+(F^$^G)+B[13]+681279174&4294967295)<<4&4294967295|L>>>28))+((L=G+(P^F^$)+B[0]+3936430074&4294967295)<<11&4294967295|L>>>21))+((L=$+(G^P^F)+B[3]+3572445317&4294967295)<<16&4294967295|L>>>16))+((L=F+($^G^P)+B[6]+76029189&4294967295)<<23&4294967295|L>>>9))+((L=P+(F^$^G)+B[9]+3654602809&4294967295)<<4&4294967295|L>>>28))+((L=G+(P^F^$)+B[12]+3873151461&4294967295)<<11&4294967295|L>>>21))+((L=$+(G^P^F)+B[15]+530742520&4294967295)<<16&4294967295|L>>>16))+((L=F+($^G^P)+B[2]+3299628645&4294967295)<<23&4294967295|L>>>9))+((L=P+($^(F|~G))+B[0]+4096336452&4294967295)<<6&4294967295|L>>>26))+((L=G+(F^(P|~$))+B[7]+1126891415&4294967295)<<10&4294967295|L>>>22))+((L=$+(P^(G|~F))+B[14]+2878612391&4294967295)<<15&4294967295|L>>>17))+((L=F+(G^($|~P))+B[5]+4237533241&4294967295)<<21&4294967295|L>>>11))+((L=P+($^(F|~G))+B[12]+1700485571&4294967295)<<6&4294967295|L>>>26))+((L=G+(F^(P|~$))+B[3]+2399980690&4294967295)<<10&4294967295|L>>>22))+((L=$+(P^(G|~F))+B[10]+4293915773&4294967295)<<15&4294967295|L>>>17))+((L=F+(G^($|~P))+B[1]+2240044497&4294967295)<<21&4294967295|L>>>11))+((L=P+($^(F|~G))+B[8]+1873313359&4294967295)<<6&4294967295|L>>>26))+((L=G+(F^(P|~$))+B[15]+4264355552&4294967295)<<10&4294967295|L>>>22))+((L=$+(P^(G|~F))+B[6]+2734768916&4294967295)<<15&4294967295|L>>>17))+((L=F+(G^($|~P))+B[13]+1309151649&4294967295)<<21&4294967295|L>>>11))+((G=(P=F+((L=P+($^(F|~G))+B[4]+4149444226&4294967295)<<6&4294967295|L>>>26))+((L=G+(F^(P|~$))+B[11]+3174756917&4294967295)<<10&4294967295|L>>>22))^(($=G+((L=$+(P^(G|~F))+B[2]+718787259&4294967295)<<15&4294967295|L>>>17))|~P))+B[9]+3951481745&4294967295,x.g[0]=x.g[0]+P&4294967295,x.g[1]=x.g[1]+($+(L<<21&4294967295|L>>>11))&4294967295,x.g[2]=x.g[2]+$&4294967295,x.g[3]=x.g[3]+G&4294967295}function s(x,P){this.h=P;for(var F=[],B=!0,$=x.length-1;0<=$;$--){var G=0|x[$];B&&G==P||(F[$]=G,B=!1)}this.g=F}(function e(x,P){function F(){}F.prototype=P.prototype,x.D=P.prototype,x.prototype=new F,x.prototype.constructor=x,x.C=function(B,$,G){for(var L=Array(arguments.length-2),fs=2;fs<arguments.length;fs++)L[fs-2]=arguments[fs];return P.prototype[$].apply(B,L)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(x,P){void 0===P&&(P=x.length);for(var F=P-this.blockSize,B=this.B,$=this.h,G=0;G<P;){if(0==$)for(;G<=F;)i(this,x,G),G+=this.blockSize;if("string"==typeof x){for(;G<P;)if(B[$++]=x.charCodeAt(G++),$==this.blockSize){i(this,B),$=0;break}}else for(;G<P;)if(B[$++]=x[G++],$==this.blockSize){i(this,B),$=0;break}}this.h=$,this.o+=P},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var P=1;P<x.length-8;++P)x[P]=0;var F=8*this.o;for(P=x.length-8;P<x.length;++P)x[P]=255&F,F/=256;for(this.u(x),x=Array(16),P=F=0;4>P;++P)for(var B=0;32>B;B+=8)x[F++]=this.g[P]>>>B&255;return x};var a={};function c(x){return-128<=x&&128>x?function o(x,P){var F=a;return Object.prototype.hasOwnProperty.call(F,x)?F[x]:F[x]=P(x)}(x,function(P){return new s([0|P],0>P?-1:0)}):new s([0|x],0>x?-1:0)}function l(x){if(isNaN(x)||!isFinite(x))return g;if(0>x)return A(l(-x));for(var P=[],F=1,B=0;x>=F;B++)P[B]=x/F|0,F*=4294967296;return new s(P,0)}var g=c(0),_=c(1),v=c(16777216);function w(x){if(0!=x.h)return!1;for(var P=0;P<x.g.length;P++)if(0!=x.g[P])return!1;return!0}function b(x){return-1==x.h}function A(x){for(var P=x.g.length,F=[],B=0;B<P;B++)F[B]=~x.g[B];return new s(F,~x.h).add(_)}function N(x,P){return x.add(A(P))}function R(x,P){for(;(65535&x[P])!=x[P];)x[P+1]+=x[P]>>>16,x[P]&=65535,P++}function V(x,P){this.g=x,this.h=P}function ie(x,P){if(w(P))throw Error("division by zero");if(w(x))return new V(g,g);if(b(x))return P=ie(A(x),P),new V(A(P.g),A(P.h));if(b(P))return P=ie(x,A(P)),new V(A(P.g),P.h);if(30<x.g.length){if(b(x)||b(P))throw Error("slowDivide_ only works with positive integers.");for(var F=_,B=P;0>=B.l(x);)F=be(F),B=be(B);var $=Ae(F,1),G=Ae(B,1);for(B=Ae(B,2),F=Ae(F,2);!w(B);){var L=G.add(B);0>=L.l(x)&&($=$.add(F),G=L),B=Ae(B,1),F=Ae(F,1)}return P=N(x,$.j(P)),new V($,P)}for($=g;0<=x.l(P);){for(F=Math.max(1,Math.floor(x.m()/P.m())),B=48>=(B=Math.ceil(Math.log(F)/Math.LN2))?1:Math.pow(2,B-48),L=(G=l(F)).j(P);b(L)||0<L.l(x);)L=(G=l(F-=B)).j(P);w(G)&&(G=_),$=$.add(G),x=N(x,L)}return new V($,x)}function be(x){for(var P=x.g.length+1,F=[],B=0;B<P;B++)F[B]=x.i(B)<<1|x.i(B-1)>>>31;return new s(F,x.h)}function Ae(x,P){var F=P>>5;P%=32;for(var B=x.g.length-F,$=[],G=0;G<B;G++)$[G]=0<P?x.i(G+F)>>>P|x.i(G+F+1)<<32-P:x.i(G+F);return new s($,x.h)}(n=s.prototype).m=function(){if(b(this))return-A(this).m();for(var x=0,P=1,F=0;F<this.g.length;F++){var B=this.i(F);x+=(0<=B?B:4294967296+B)*P,P*=4294967296}return x},n.toString=function(x){if(2>(x=x||10)||36<x)throw Error("radix out of range: "+x);if(w(this))return"0";if(b(this))return"-"+A(this).toString(x);for(var P=l(Math.pow(x,6)),F=this,B="";;){var $=ie(F,P).g,G=((0<(F=N(F,$.j(P))).g.length?F.g[0]:F.h)>>>0).toString(x);if(w(F=$))return G+B;for(;6>G.length;)G="0"+G;B=G+B}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h},n.l=function(x){return b(x=N(this,x))?-1:w(x)?0:1},n.abs=function(){return b(this)?A(this):this},n.add=function(x){for(var P=Math.max(this.g.length,x.g.length),F=[],B=0,$=0;$<=P;$++){var G=B+(65535&this.i($))+(65535&x.i($)),L=(G>>>16)+(this.i($)>>>16)+(x.i($)>>>16);B=L>>>16,F[$]=(L&=65535)<<16|(G&=65535)}return new s(F,-2147483648&F[F.length-1]?-1:0)},n.j=function(x){if(w(this)||w(x))return g;if(b(this))return b(x)?A(this).j(A(x)):A(A(this).j(x));if(b(x))return A(this.j(A(x)));if(0>this.l(v)&&0>x.l(v))return l(this.m()*x.m());for(var P=this.g.length+x.g.length,F=[],B=0;B<2*P;B++)F[B]=0;for(B=0;B<this.g.length;B++)for(var $=0;$<x.g.length;$++){var G=this.i(B)>>>16,L=65535&this.i(B),fs=x.i($)>>>16,iu=65535&x.i($);F[2*B+2*$]+=L*iu,R(F,2*B+2*$),F[2*B+2*$+1]+=G*iu,R(F,2*B+2*$+1),F[2*B+2*$+1]+=L*fs,R(F,2*B+2*$+1),F[2*B+2*$+2]+=G*fs,R(F,2*B+2*$+2)}for(B=0;B<P;B++)F[B]=F[2*B+1]<<16|F[2*B];for(B=P;B<2*P;B++)F[B]=0;return new s(F,0)},n.A=function(x){return ie(this,x).h},n.and=function(x){for(var P=Math.max(this.g.length,x.g.length),F=[],B=0;B<P;B++)F[B]=this.i(B)&x.i(B);return new s(F,this.h&x.h)},n.or=function(x){for(var P=Math.max(this.g.length,x.g.length),F=[],B=0;B<P;B++)F[B]=this.i(B)|x.i(B);return new s(F,this.h|x.h)},n.xor=function(x){for(var P=Math.max(this.g.length,x.g.length),F=[],B=0;B<P;B++)F[B]=this.i(B)^x.i(B);return new s(F,this.h^x.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,A4=T4.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=function h(x,P){if(0==x.length)throw Error("number format error: empty string");if(2>(P=P||10)||36<P)throw Error("radix out of range: "+P);if("-"==x.charAt(0))return A(h(x.substring(1),P));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=l(Math.pow(P,8)),B=g,$=0;$<x.length;$+=8){var G=Math.min(8,x.length-$),L=parseInt(x.substring($,$+G),P);8>G?(G=l(Math.pow(P,G)),B=B.j(G).add(l(L))):B=(B=B.j(F)).add(l(L))}return B},pd=T4.Integer=s}).apply(typeof b4<"u"?b4:typeof self<"u"?self:typeof window<"u"?window:{});var S4,P4,ny,D4,RI,PM,M4,O4,R4,OI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yc={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(f,y,C){return f==Array.prototype||f==Object.prototype||(f[y]=C.value),f},r=function t(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof OI&&OI];for(var y=0;y<f.length;++y){var C=f[y];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}(this);!function i(f,y){if(y)e:{var C=r;f=f.split(".");for(var T=0;T<f.length-1;T++){var z=f[T];if(!(z in C))break e;C=C[z]}(y=y(T=C[f=f[f.length-1]]))!=T&&null!=y&&e(C,f,{configurable:!0,writable:!0,value:y})}}("Array.prototype.values",function(f){return f||function(){return function o(f,y){f instanceof String&&(f+="");var C=0,T=!1,z={next:function(){if(!T&&C<f.length){var Z=C++;return{value:y(Z,f[Z]),done:!1}}return T=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}(this,function(y,C){return C})}});var s=s||{},a=this||self;function c(f){var y=typeof f;return"array"==(y="object"!=y?y:f?Array.isArray(f)?"array":y:"null")||"object"==y&&"number"==typeof f.length}function l(f){var y=typeof f;return"object"==y&&null!=f||"function"==y}function h(f,y,C){return f.call.apply(f.bind,arguments)}function g(f,y,C){if(!f)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,T),f.apply(y,z)}}return function(){return f.apply(y,arguments)}}function _(f,y,C){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:g).apply(null,arguments)}function v(f,y){var C=Array.prototype.slice.call(arguments,1);return function(){var T=C.slice();return T.push.apply(T,arguments),f.apply(this,T)}}function w(f,y){function C(){}C.prototype=y.prototype,f.aa=y.prototype,f.prototype=new C,f.prototype.constructor=f,f.Qb=function(T,z,Z){for(var De=Array(arguments.length-2),Tn=2;Tn<arguments.length;Tn++)De[Tn-2]=arguments[Tn];return y.prototype[z].apply(T,De)}}function b(f){const y=f.length;if(0<y){const C=Array(y);for(let T=0;T<y;T++)C[T]=f[T];return C}return[]}function A(f,y){for(let C=1;C<arguments.length;C++){const T=arguments[C];if(c(T)){const z=f.length||0,Z=T.length||0;f.length=z+Z;for(let De=0;De<Z;De++)f[z+De]=T[De]}else f.push(T)}}function R(f){return/^[\s\xa0]*$/.test(f)}function V(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function ie(f){return ie[" "](f),f}ie[" "]=function(){};var be=!(-1==V().indexOf("Gecko")||-1!=V().toLowerCase().indexOf("webkit")&&-1==V().indexOf("Edge")||-1!=V().indexOf("Trident")||-1!=V().indexOf("MSIE")||-1!=V().indexOf("Edge"));function Ae(f,y,C){for(const T in f)y.call(C,f[T],T,f)}function P(f){const y={};for(const C in f)y[C]=f[C];return y}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(f,y){let C,T;for(let z=1;z<arguments.length;z++){for(C in T=arguments[z],T)f[C]=T[C];for(let Z=0;Z<F.length;Z++)C=F[Z],Object.prototype.hasOwnProperty.call(T,C)&&(f[C]=T[C])}}function $(f){var y=1;f=f.split(":");const C=[];for(;0<y&&f.length;)C.push(f.shift()),y--;return f.length&&C.push(f.join(":")),C}function G(f){a.setTimeout(()=>{throw f},0)}function L(){var f=kt;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}var iu=new class N{constructor(y,C){this.i=y,this.j=C,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}(()=>new qe,f=>f.reset());class qe{constructor(){this.next=this.g=this.h=null}set(y,C){this.h=y,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let Ke,Xe=!1,kt=new class fs{constructor(){this.h=this.g=null}add(y,C){const T=iu.get();T.set(y,C),this.h?this.h.next=T:this.g=T,this.h=T}},Tr=()=>{const f=a.Promise.resolve(void 0);Ke=()=>{f.then(ps)}};var ps=()=>{for(var f;f=L();){try{f.h.call(f.g)}catch(C){G(C)}var y=iu;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}Xe=!1};function hr(){this.s=this.s,this.C=this.C}function Hn(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}hr.prototype.s=!1,hr.prototype.ma=function(){this.s||(this.s=!0,this.N())},hr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Hn.prototype.h=function(){this.defaultPrevented=!0};var zn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const C=()=>{};a.addEventListener("test",C,y),a.removeEventListener("test",C,y)}catch{}return f}();function ou(f,y){if(Hn.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var C=this.type=f.type,T=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(be){e:{try{ie(y.nodeName);var z=!0;break e}catch{}z=!1}z||(y=null)}}else"mouseover"==C?y=f.fromElement:"mouseout"==C&&(y=f.toElement);this.relatedTarget=y,T?(this.clientX=void 0!==T.clientX?T.clientX:T.pageX,this.clientY=void 0!==T.clientY?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=void 0!==f.clientX?f.clientX:f.pageX,this.clientY=void 0!==f.clientY?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType="string"==typeof f.pointerType?f.pointerType:Ux[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ou.aa.h.call(this)}}w(ou,Hn);var Ux={2:"touch",3:"pen",4:"mouse"};ou.prototype.h=function(){ou.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var fr="closure_listenable_"+(1e6*Math.random()|0),Oc=0;function So(f,y,C,T,z){this.listener=f,this.proxy=null,this.src=y,this.type=C,this.capture=!!T,this.ha=z,this.key=++Oc,this.da=this.fa=!1}function Rc(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function su(f){this.src=f,this.g={},this.h=0}function Bx(f,y){var C=y.type;if(C in f.g){var Z,T=f.g[C],z=Array.prototype.indexOf.call(T,y,void 0);(Z=0<=z)&&Array.prototype.splice.call(T,z,1),Z&&(Rc(y),0==f.g[C].length&&(delete f.g[C],f.h--))}}function jx(f,y,C,T){for(var z=0;z<f.length;++z){var Z=f[z];if(!Z.da&&Z.listener==y&&Z.capture==!!C&&Z.ha==T)return z}return-1}su.prototype.add=function(f,y,C,T,z){var Z=f.toString();(f=this.g[Z])||(f=this.g[Z]=[],this.h++);var De=jx(f,y,T,z);return-1<De?(y=f[De],C||(y.fa=!1)):((y=new So(y,this.src,Z,!!T,z)).fa=C,f.push(y)),y};var $x="closure_lm_"+(1e6*Math.random()|0),Hx={};function H5(f,y,C,T,z){if(T&&T.once)return q5(f,y,C,T,z);if(Array.isArray(y)){for(var Z=0;Z<y.length;Z++)H5(f,y[Z],C,T,z);return null}return C=Wx(C),f&&f[fr]?f.K(y,C,l(T)?!!T.capture:!!T,z):z5(f,y,C,!1,T,z)}function z5(f,y,C,T,z,Z){if(!y)throw Error("Invalid event type");var De=l(z)?!!z.capture:!!z,Tn=qx(f);if(Tn||(f[$x]=Tn=new su(f)),(C=Tn.add(y,C,T,De,Z)).proxy)return C;if(T=function wCe(){const y=ICe;return function f(C){return y.call(f.src,f.listener,C)}}(),C.proxy=T,T.src=f,T.listener=C,f.addEventListener)zn||(z=De),void 0===z&&(z=!1),f.addEventListener(y.toString(),T,z);else if(f.attachEvent)f.attachEvent(W5(y.toString()),T);else{if(!f.addListener||!f.removeListener)throw Error("addEventListener and attachEvent are unavailable.");f.addListener(T)}return C}function q5(f,y,C,T,z){if(Array.isArray(y)){for(var Z=0;Z<y.length;Z++)q5(f,y[Z],C,T,z);return null}return C=Wx(C),f&&f[fr]?f.L(y,C,l(T)?!!T.capture:!!T,z):z5(f,y,C,!0,T,z)}function G5(f,y,C,T,z){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)G5(f,y[Z],C,T,z);else T=l(T)?!!T.capture:!!T,C=Wx(C),f&&f[fr]?(f=f.i,(y=String(y).toString())in f.g&&-1<(C=jx(Z=f.g[y],C,T,z))&&(Rc(Z[C]),Array.prototype.splice.call(Z,C,1),0==Z.length&&(delete f.g[y],f.h--))):f&&(f=qx(f))&&(y=f.g[y.toString()],f=-1,y&&(f=jx(y,C,T,z)),(C=-1<f?y[f]:null)&&zx(C))}function zx(f){if("number"!=typeof f&&f&&!f.da){var y=f.src;if(y&&y[fr])Bx(y.i,f);else{var C=f.type,T=f.proxy;y.removeEventListener?y.removeEventListener(C,T,f.capture):y.detachEvent?y.detachEvent(W5(C),T):y.addListener&&y.removeListener&&y.removeListener(T),(C=qx(y))?(Bx(C,f),0==C.h&&(C.src=null,y[$x]=null)):Rc(f)}}}function W5(f){return f in Hx?Hx[f]:Hx[f]="on"+f}function ICe(f,y){if(f.da)f=!0;else{y=new ou(y,this);var C=f.listener,T=f.ha||f.src;f.fa&&zx(f),f=C.call(T,y)}return f}function qx(f){return(f=f[$x])instanceof su?f:null}var Gx="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wx(f){return"function"==typeof f?f:(f[Gx]||(f[Gx]=function(y){return f.handleEvent(y)}),f[Gx])}function Ui(){hr.call(this),this.i=new su(this),this.M=this,this.F=null}function oo(f,y){var C,T=f.F;if(T)for(C=[];T;T=T.F)C.push(T);if(f=f.M,T=y.type||y,"string"==typeof y)y=new Hn(y,f);else if(y instanceof Hn)y.target=y.target||f;else{var z=y;B(y=new Hn(T,f),z)}if(z=!0,C)for(var Z=C.length-1;0<=Z;Z--){var De=y.g=C[Z];z=OT(De,T,!0,y)&&z}if(z=OT(De=y.g=f,T,!0,y)&&z,z=OT(De,T,!1,y)&&z,C)for(Z=0;Z<C.length;Z++)z=OT(De=y.g=C[Z],T,!1,y)&&z}function OT(f,y,C,T){if(!(y=f.i.g[String(y)]))return!0;y=y.concat();for(var z=!0,Z=0;Z<y.length;++Z){var De=y[Z];if(De&&!De.da&&De.capture==C){var Tn=De.listener,_i=De.ha||De.src;De.fa&&Bx(f.i,De),z=!1!==Tn.call(_i,T)&&z}}return z&&!T.defaultPrevented}function K5(f,y,C){if("function"==typeof f)C&&(f=_(f,C));else{if(!f||"function"!=typeof f.handleEvent)throw Error("Invalid listener argument");f=_(f.handleEvent,f)}return 2147483647<Number(y)?-1:a.setTimeout(f,y||0)}function Q5(f){f.g=K5(()=>{f.g=null,f.i&&(f.i=!1,Q5(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}w(Ui,hr),Ui.prototype[fr]=!0,Ui.prototype.removeEventListener=function(f,y,C,T){G5(this,f,y,C,T)},Ui.prototype.N=function(){if(Ui.aa.N.call(this),this.i){var y,f=this.i;for(y in f.g){for(var C=f.g[y],T=0;T<C.length;T++)Rc(C[T]);delete f.g[y],f.h--}}this.F=null},Ui.prototype.K=function(f,y,C,T){return this.i.add(String(f),y,!1,C,T)},Ui.prototype.L=function(f,y,C,T){return this.i.add(String(f),y,!0,C,T)};class bCe extends hr{constructor(y,C){super(),this.m=y,this.l=C,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Q5(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Av(f){hr.call(this),this.h=f,this.g={}}w(Av,hr);var Y5=[];function J5(f){Ae(f.g,function(y,C){this.g.hasOwnProperty(C)&&zx(y)},f),f.g={}}Av.prototype.N=function(){Av.aa.N.call(this),J5(this)},Av.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kx=a.JSON.stringify,TCe=a.JSON.parse,ACe=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Qx(){}function X5(){}Qx.prototype.h=null;var Sv={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yx(){Hn.call(this,"d")}function Jx(){Hn.call(this,"c")}w(Yx,Hn),w(Jx,Hn);var Zd={},e8=null;function RT(){return e8=e8||new Ui}function t8(f){Hn.call(this,Zd.La,f)}function Pv(f){const y=RT();oo(y,new t8(y))}function n8(f,y){Hn.call(this,Zd.STAT_EVENT,f),this.stat=y}function so(f){const y=RT();oo(y,new n8(y,f))}function r8(f,y){Hn.call(this,Zd.Ma,f),this.size=y}function Dv(f,y){if("function"!=typeof f)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},y)}function Mv(){this.g=!0}function ig(f,y,C,T){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+function MCe(f,y){if(!f.g)return y;if(!y)return null;try{var C=JSON.parse(y);if(C)for(f=0;f<C.length;f++)if(Array.isArray(C[f])){var T=C[f];if(!(2>T.length)){var z=T[1];if(Array.isArray(z)&&!(1>z.length)){var Z=z[0];if("noop"!=Z&&"stop"!=Z&&"close"!=Z)for(var De=1;De<z.length;De++)z[De]=""}}}return Kx(C)}catch{return y}}(f,C)+(T?" "+T:"")})}Zd.La="serverreachability",w(t8,Hn),Zd.STAT_EVENT="statevent",w(n8,Hn),Zd.Ma="timingevent",w(r8,Hn),Mv.prototype.xa=function(){this.g=!1},Mv.prototype.info=function(){};var Zx,NT={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},i8={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function xT(){}function au(f,y,C,T){this.j=f,this.i=y,this.l=C,this.R=T||1,this.U=new Av(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new o8}function o8(){this.i=null,this.g="",this.h=!1}w(xT,Qx),xT.prototype.g=function(){return new XMLHttpRequest},xT.prototype.i=function(){return{}},Zx=new xT;var s8={},Xx={};function ek(f,y,C){f.L=1,f.v=VT(Nc(y)),f.m=C,f.P=!0,a8(f,null)}function a8(f,y){f.F=Date.now(),kT(f),f.A=Nc(f.v);var C=f.A,T=f.R;Array.isArray(T)||(T=[String(T)]),C8(C.i,"t",T),f.C=0,C=f.j.J,f.h=new o8,f.g=U8(f.j,C?y:null,!f.m),0<f.O&&(f.M=new bCe(_(f.Y,f,f.g),f.O)),y=f.U,C=f.g,T=f.ca;var z="readystatechange";Array.isArray(z)||(z&&(Y5[0]=z.toString()),z=Y5);for(var Z=0;Z<z.length;Z++){var De=H5(C,z[Z],T||y.handleEvent,!1,y.h||y);if(!De)break;y.g[De.key]=De}y=f.H?P(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),Pv(),function SCe(f,y,C,T,z,Z){f.info(function(){if(f.g)if(Z)for(var De="",Tn=Z.split("&"),_i=0;_i<Tn.length;_i++){var en=Tn[_i].split("=");if(1<en.length){var Bi=en[0];en=en[1];var ji=Bi.split("_");De=2<=ji.length&&"type"==ji[1]?De+(Bi+"=")+en+"&":De+(Bi+"=redacted&")}}else De=null;else De=Z;return"XMLHTTP REQ ("+T+") [attempt "+z+"]: "+y+"\n"+C+"\n"+De})}(f.i,f.u,f.A,f.l,f.R,f.m)}function c8(f){return!!f.g&&"GET"==f.u&&2!=f.L&&f.j.Ca}function OCe(f,y){var C=f.C,T=y.indexOf("\n",C);return-1==T?Xx:(C=Number(y.substring(C,T)),isNaN(C)?s8:(T+=1)+C>y.length?Xx:(y=y.slice(T,T+C),f.C=T+C,y))}function kT(f){f.S=Date.now()+f.I,l8(f,f.I)}function l8(f,y){if(null!=f.B)throw Error("WatchDog timer not null");f.B=Dv(_(f.ba,f),y)}function tk(f){f.B&&(a.clearTimeout(f.B),f.B=null)}function Ov(f){0==f.j.G||f.J||k8(f.j,f)}function Xd(f){tk(f);var y=f.M;y&&"function"==typeof y.ma&&y.ma(),f.M=null,J5(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function nk(f,y){try{var C=f.j;if(0!=C.G&&(C.g==f||rk(C.h,f)))if(!f.K&&rk(C.h,f)&&3==C.G){try{var T=C.Da.g.parse(y)}catch{T=null}if(Array.isArray(T)&&3==T.length){var z=T;if(0==z[0]){e:if(!C.u){if(C.g){if(!(C.g.F+3e3<f.F))break e;HT(C),jT(C)}ak(C),so(18)}}else C.za=z[1],0<C.za-C.T&&37500>z[2]&&C.F&&0==C.v&&!C.C&&(C.C=Dv(_(C.Za,C),6e3));if(1>=h8(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else th(C,11)}else if((f.K||C.g==f)&&HT(C),!R(y))for(z=C.Da.g.parse(y),y=0;y<z.length;y++){let en=z[y];if(C.T=en[0],en=en[1],2==C.G)if("c"==en[0]){C.K=en[1],C.ia=en[2];const Bi=en[3];null!=Bi&&(C.la=Bi,C.j.info("VER="+C.la));const ji=en[4];null!=ji&&(C.Aa=ji,C.j.info("SVER="+C.Aa));const ag=en[5];null!=ag&&"number"==typeof ag&&0<ag&&(C.L=T=1.5*ag,C.j.info("backChannelRequestTimeoutMs_="+T)),T=C;const Gs=f.g;if(Gs){const qT=Gs.g?Gs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qT){var Z=T.h;Z.g||-1==qT.indexOf("spdy")&&-1==qT.indexOf("quic")&&-1==qT.indexOf("h2")||(Z.j=Z.l,Z.g=new Set,Z.h&&(ik(Z,Z.h),Z.h=null))}if(T.D){const lk=Gs.g?Gs.g.getResponseHeader("X-HTTP-Session-Id"):null;lk&&(T.ya=lk,qn(T.I,T.D,lk))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-f.F,C.j.info("Handshake RTT: "+C.R+"ms"));var De=f;if((T=C).qa=V8(T,T.J?T.ia:null,T.W),De.K){f8(T.h,De);var Tn=De,_i=T.L;_i&&(Tn.I=_i),Tn.B&&(tk(Tn),kT(Tn)),T.g=De}else N8(T);0<C.i.length&&$T(C)}else"stop"!=en[0]&&"close"!=en[0]||th(C,7);else 3==C.G&&("stop"==en[0]||"close"==en[0]?"stop"==en[0]?th(C,7):sk(C):"noop"!=en[0]&&C.l&&C.l.ta(en),C.v=0)}Pv()}catch{}}au.prototype.ca=function(f){f=f.target;const y=this.M;y&&3==xc(f)?y.j():this.Y(f)},au.prototype.Y=function(f){try{if(f==this.g)e:{const ji=xc(this.g);var y=this.g.Ba();if(this.g.Z(),!(3>ji)&&(3!=ji||this.g&&(this.h.h||this.g.oa()||P8(this.g)))){this.J||4!=ji||7==y||Pv(),tk(this);var C=this.g.Z();this.X=C;t:if(c8(this)){var T=P8(this.g);f="";var z=T.length,Z=4==xc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Xd(this),Ov(this);var De="";break t}this.h.i=new a.TextDecoder}for(y=0;y<z;y++)this.h.h=!0,f+=this.h.i.decode(T[y],{stream:!(Z&&y==z-1)});T.length=0,this.h.g+=f,this.C=0,De=this.h.g}else De=this.g.oa();if(this.o=200==C,function PCe(f,y,C,T,z,Z,De){f.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+z+"]: "+y+"\n"+C+"\n"+Z+" "+De})}(this.i,this.u,this.A,this.l,this.R,ji,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Tn,_i=this.g;if((Tn=_i.g?_i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(Tn)){var en=Tn;break t}}en=null}if(!(C=en)){this.o=!1,this.s=3,so(12),Xd(this),Ov(this);break e}ig(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nk(this,C)}if(this.P){let Gs;for(C=!0;!this.J&&this.C<De.length;){if(Gs=OCe(this,De),Gs==Xx){4==ji&&(this.s=4,so(14),C=!1),ig(this.i,this.l,null,"[Incomplete Response]");break}if(Gs==s8){this.s=4,so(15),ig(this.i,this.l,De,"[Invalid Chunk]"),C=!1;break}ig(this.i,this.l,Gs,null),nk(this,Gs)}if(c8(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=ji||0!=De.length||this.h.h||(this.s=1,so(16),C=!1),this.o=this.o&&C,C){if(0<De.length&&!this.W){this.W=!0;var Bi=this.j;Bi.g==this&&Bi.ba&&!Bi.M&&(Bi.j.info("Great, no buffering proxy detected. Bytes received: "+De.length),ck(Bi),Bi.M=!0,so(11))}}else ig(this.i,this.l,De,"[Invalid Chunked Response]"),Xd(this),Ov(this)}else ig(this.i,this.l,De,null),nk(this,De);4==ji&&Xd(this),this.o&&!this.J&&(4==ji?k8(this.j,this):(this.o=!1,kT(this)))}else(function KCe(f){const y={};f=(f.g&&2<=xc(f)&&f.g.getAllResponseHeaders()||"").split("\r\n");for(let T=0;T<f.length;T++){if(R(f[T]))continue;var C=$(f[T]);const z=C[0];if("string"!=typeof(C=C[1]))continue;C=C.trim();const Z=y[z]||[];y[z]=Z,Z.push(C)}!function x(f,y){for(const C in f)y.call(void 0,f[C],C,f)}(y,function(T){return T.join(", ")})})(this.g),400==C&&0<De.indexOf("Unknown SID")?(this.s=3,so(12)):(this.s=0,so(13)),Xd(this),Ov(this)}}}catch{}},au.prototype.cancel=function(){this.J=!0,Xd(this)},au.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(function DCe(f,y){f.info(function(){return"TIMEOUT: "+y})}(this.i,this.A),2!=this.L&&(Pv(),so(17)),Xd(this),this.s=2,Ov(this)):l8(this,this.S-f)};var RCe=class{constructor(f,y){this.g=f,this.map=y}};function u8(f){this.l=f||10,f=a.PerformanceNavigationTiming?0<(f=a.performance.getEntriesByType("navigation")).length&&("hq"==f[0].nextHopProtocol||"h2"==f[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function d8(f){return!!f.h||!!f.g&&f.g.size>=f.j}function h8(f){return f.h?1:f.g?f.g.size:0}function rk(f,y){return f.h?f.h==y:!!f.g&&f.g.has(y)}function ik(f,y){f.g?f.g.add(y):f.h=y}function f8(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}function p8(f){if(null!=f.h)return f.i.concat(f.h.D);if(null!=f.g&&0!==f.g.size){let y=f.i;for(const C of f.g.values())y=y.concat(C.D);return y}return b(f.i)}function g8(f,y){if(f.forEach&&"function"==typeof f.forEach)f.forEach(y,void 0);else if(c(f)||"string"==typeof f)Array.prototype.forEach.call(f,y,void 0);else for(var C=function xCe(f){if(f.na&&"function"==typeof f.na)return f.na();if(!f.V||"function"!=typeof f.V){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||"string"==typeof f){var y=[];f=f.length;for(var C=0;C<f;C++)y.push(C);return y}y=[],C=0;for(const T in f)y[C++]=T;return y}}}(f),T=function NCe(f){if(f.V&&"function"==typeof f.V)return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if("string"==typeof f)return f.split("");if(c(f)){for(var y=[],C=f.length,T=0;T<C;T++)y.push(f[T]);return y}for(T in y=[],C=0,f)y[C++]=f[T];return y}(f),z=T.length,Z=0;Z<z;Z++)y.call(void 0,T[Z],C&&C[Z],f)}u8.prototype.cancel=function(){if(this.i=p8(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const f of this.g.values())f.cancel();this.g.clear()}};var m8=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eh(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof eh){this.h=f.h,FT(this,f.j),this.o=f.o,this.g=f.g,LT(this,f.s),this.l=f.l;var y=f.i,C=new xv;C.i=y.i,y.g&&(C.g=new Map(y.g),C.h=y.h),_8(this,C),this.m=f.m}else f&&(y=String(f).match(m8))?(this.h=!1,FT(this,y[1]||"",!0),this.o=Rv(y[2]||""),this.g=Rv(y[3]||"",!0),LT(this,y[4]),this.l=Rv(y[5]||"",!0),_8(this,y[6]||"",!0),this.m=Rv(y[7]||"")):(this.h=!1,this.i=new xv(null,this.h))}function Nc(f){return new eh(f)}function FT(f,y,C){f.j=C?Rv(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function LT(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function _8(f,y,C){y instanceof xv?(f.i=y,function jCe(f,y){y&&!f.j&&(cu(f),f.i=null,f.g.forEach(function(C,T){var z=T.toLowerCase();T!=z&&(v8(this,T),C8(this,z,C))},f)),f.j=y}(f.i,f.h)):(C||(y=Nv(y,UCe)),f.i=new xv(y,f.h))}function qn(f,y,C){f.i.set(y,C)}function VT(f){return qn(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Rv(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Nv(f,y,C){return"string"==typeof f?(f=encodeURI(f).replace(y,FCe),C&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function FCe(f){return"%"+((f=f.charCodeAt(0))>>4&15).toString(16)+(15&f).toString(16)}eh.prototype.toString=function(){var f=[],y=this.j;y&&f.push(Nv(y,y8,!0),":");var C=this.g;return(C||"file"==y)&&(f.push("//"),(y=this.o)&&f.push(Nv(y,y8,!0),"@"),f.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(C=this.s)&&f.push(":",String(C))),(C=this.l)&&(this.g&&"/"!=C.charAt(0)&&f.push("/"),f.push(Nv(C,"/"==C.charAt(0)?VCe:LCe,!0))),(C=this.i.toString())&&f.push("?",C),(C=this.m)&&f.push("#",Nv(C,BCe)),f.join("")};var y8=/[#\/\?@]/g,LCe=/[#\?:]/g,VCe=/[#\?]/g,UCe=/[#\?@]/g,BCe=/#/g;function xv(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function cu(f){f.g||(f.g=new Map,f.h=0,f.i&&function kCe(f,y){if(f){f=f.split("&");for(var C=0;C<f.length;C++){var T=f[C].indexOf("="),z=null;if(0<=T){var Z=f[C].substring(0,T);z=f[C].substring(T+1)}else Z=f[C];y(Z,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}(f.i,function(y,C){f.add(decodeURIComponent(y.replace(/\+/g," ")),C)}))}function v8(f,y){cu(f),y=og(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function E8(f,y){return cu(f),y=og(f,y),f.g.has(y)}function C8(f,y,C){v8(f,y),0<C.length&&(f.i=null,f.g.set(og(f,y),b(C)),f.h+=C.length)}function og(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function lu(f,y,C,T,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),T(C)}catch{}}function zCe(){this.g=new ACe}function qCe(f,y,C){const T=C||"";try{g8(f,function(z,Z){let De=z;l(z)&&(De=Kx(z)),y.push(T+Z+"="+encodeURIComponent(De))})}catch(z){throw y.push(T+"type="+encodeURIComponent("_badmap")),z}}function kv(f){this.l=f.Ub||null,this.j=f.eb||!1}function UT(f,y){Ui.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function w8(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}function Fv(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Lv(f)}function Lv(f){f.onreadystatechange&&f.onreadystatechange.call(f)}function I8(f){let y="";return Ae(f,function(C,T){y+=T,y+=":",y+=C,y+="\r\n"}),y}function ok(f,y,C){e:{for(T in C){var T=!1;break e}T=!0}T||(C=I8(C),"string"==typeof f?null!=C&&encodeURIComponent(String(C)):qn(f,y,C))}function pr(f){Ui.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=xv.prototype).add=function(f,y){cu(this),this.i=null,f=og(this,f);var C=this.g.get(f);return C||this.g.set(f,C=[]),C.push(y),this.h+=1,this},n.forEach=function(f,y){cu(this),this.g.forEach(function(C,T){C.forEach(function(z){f.call(y,z,T,this)},this)},this)},n.na=function(){cu(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),C=[];for(let T=0;T<y.length;T++){const z=f[T];for(let Z=0;Z<z.length;Z++)C.push(y[T])}return C},n.V=function(f){cu(this);let y=[];if("string"==typeof f)E8(this,f)&&(y=y.concat(this.g.get(og(this,f))));else{f=Array.from(this.g.values());for(let C=0;C<f.length;C++)y=y.concat(f[C])}return y},n.set=function(f,y){return cu(this),this.i=null,E8(this,f=og(this,f))&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f&&0<(f=this.V(f)).length?String(f[0]):y},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var C=0;C<y.length;C++){var T=y[C];const Z=encodeURIComponent(String(T)),De=this.V(T);for(T=0;T<De.length;T++){var z=Z;""!==De[T]&&(z+="="+encodeURIComponent(String(De[T]))),f.push(z)}}return this.i=f.join("&")},w(kv,Qx),kv.prototype.g=function(){return new UT(this.l,this.j)},kv.prototype.i=function(f){return function(){return f}}({}),w(UT,Ui),(n=UT.prototype).open=function(f,y){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,Lv(this)},n.send=function(f){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fv(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Lv(this)),this.g&&(this.readyState=3,Lv(this),this.g)))if("arraybuffer"===this.responseType)f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;w8(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?Fv(this):Lv(this),3==this.readyState&&w8(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Fv(this))},n.Qa=function(f){this.g&&(this.response=f,Fv(this))},n.ga=function(){this.g&&Fv(this)},n.setRequestHeader=function(f,y){this.u.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var C=y.next();!C.done;)f.push((C=C.value)[0]+": "+C[1]),C=y.next();return f.join("\r\n")},Object.defineProperty(UT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(f){this.m=f?"include":"same-origin"}}),w(pr,Ui);var GCe=/^https?$/i,WCe=["POST","PUT"];function b8(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,T8(f),BT(f)}function T8(f){f.A||(f.A=!0,oo(f,"complete"),oo(f,"error"))}function A8(f){if(f.h&&typeof s<"u"&&(!f.v[1]||4!=xc(f)||2!=f.Z()))if(f.u&&4==xc(f))K5(f.Ea,0,f);else if(oo(f,"readystatechange"),4==xc(f)){f.h=!1;try{const De=f.Z();e:switch(De){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var C;if(!(C=y)){var T;if(T=0===De){var z=String(f.D).match(m8)[1]||null;!z&&a.self&&a.self.location&&(z=a.self.location.protocol.slice(0,-1)),T=!GCe.test(z?z.toLowerCase():"")}C=T}if(C)oo(f,"complete"),oo(f,"success");else{f.m=6;try{var Z=2<xc(f)?f.g.statusText:""}catch{Z=""}f.l=Z+" ["+f.Z()+"]",T8(f)}}finally{BT(f)}}}function BT(f,y){if(f.g){S8(f);const C=f.g,T=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||oo(f,"ready");try{C.onreadystatechange=T}catch{}}}function S8(f){f.I&&(a.clearTimeout(f.I),f.I=null)}function xc(f){return f.g?f.g.readyState:0}function P8(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Vv(f,y,C){return C&&C.internalChannelParams&&C.internalChannelParams[f]||y}function D8(f){this.Aa=0,this.i=[],this.j=new Mv,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vv("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vv("baseRetryDelayMs",5e3,f),this.cb=Vv("retryDelaySeedMs",1e4,f),this.Wa=Vv("forwardChannelMaxRetries",2,f),this.wa=Vv("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new u8(f&&f.concurrentRequestLimit),this.Da=new zCe,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function sk(f){if(M8(f),3==f.G){var y=f.U++,C=Nc(f.I);if(qn(C,"SID",f.K),qn(C,"RID",y),qn(C,"TYPE","terminate"),Uv(f,C),(y=new au(f,f.j,y)).L=2,y.v=VT(Nc(C)),C=!1,a.navigator&&a.navigator.sendBeacon)try{C=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!C&&a.Image&&((new Image).src=y.v,C=!0),C||(y.g=U8(y.j,null),y.g.ea(y.v)),y.F=Date.now(),kT(y)}L8(f)}function jT(f){f.g&&(ck(f),f.g.cancel(),f.g=null)}function M8(f){jT(f),f.u&&(a.clearTimeout(f.u),f.u=null),HT(f),f.h.cancel(),f.s&&("number"==typeof f.s&&a.clearTimeout(f.s),f.s=null)}function $T(f){if(!d8(f.h)&&!f.s){f.s=!0;var y=f.Ga;Ke||Tr(),Xe||(Ke(),Xe=!0),kt.add(y,f),f.B=0}}function O8(f,y){var C;C=y?y.l:f.U++;const T=Nc(f.I);qn(T,"SID",f.K),qn(T,"RID",C),qn(T,"AID",f.T),Uv(f,T),f.m&&f.o&&ok(T,f.m,f.o),C=new au(f,f.j,C,f.B+1),null===f.m&&(C.H=f.o),y&&(f.i=y.D.concat(f.i)),y=R8(f,C,1e3),C.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),ik(f.h,C),ek(C,T,y)}function Uv(f,y){f.H&&Ae(f.H,function(C,T){qn(y,T,C)}),f.l&&g8({},function(C,T){qn(y,T,C)})}function R8(f,y,C){C=Math.min(f.i.length,C);var T=f.l?_(f.l.Na,f.l,f):null;e:{var z=f.i;let Z=-1;for(;;){const De=["count="+C];-1==Z?0<C?(Z=z[0].g,De.push("ofs="+Z)):Z=0:De.push("ofs="+Z);let Tn=!0;for(let _i=0;_i<C;_i++){let en=z[_i].g;const Bi=z[_i].map;if(en-=Z,0>en)Z=Math.max(0,z[_i].g-100),Tn=!1;else try{qCe(Bi,De,"req"+en+"_")}catch{T&&T(Bi)}}if(Tn){T=De.join("&");break e}}}return f=f.i.splice(0,C),y.D=f,T}function N8(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;Ke||Tr(),Xe||(Ke(),Xe=!0),kt.add(y,f),f.v=0}}function ak(f){return!(f.g||f.u||3<=f.v||(f.Y++,f.u=Dv(_(f.Fa,f),F8(f,f.v)),f.v++,0))}function ck(f){null!=f.A&&(a.clearTimeout(f.A),f.A=null)}function x8(f){f.g=new au(f,f.j,"rpc",f.Y),null===f.m&&(f.g.H=f.o),f.g.O=0;var y=Nc(f.qa);qn(y,"RID","rpc"),qn(y,"SID",f.K),qn(y,"AID",f.T),qn(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&qn(y,"TO",f.ja),qn(y,"TYPE","xmlhttp"),Uv(f,y),f.m&&f.o&&ok(y,f.m,f.o),f.L&&(f.g.I=f.L);var C=f.g;f=f.ia,C.L=1,C.v=VT(Nc(y)),C.m=null,C.P=!0,a8(C,f)}function HT(f){null!=f.C&&(a.clearTimeout(f.C),f.C=null)}function k8(f,y){var C=null;if(f.g==y){HT(f),ck(f),f.g=null;var T=2}else{if(!rk(f.h,y))return;C=y.D,f8(f.h,y),T=1}if(0!=f.G)if(y.o)if(1==T){C=y.m?y.m.length:0,y=Date.now()-y.F;var z=f.B;oo(T=RT(),new r8(T,C)),$T(f)}else N8(f);else if(3==(z=y.s)||0==z&&0<y.X||!(1==T&&function QCe(f,y){return!(h8(f.h)>=f.h.j-(f.s?1:0)||(f.s?(f.i=y.D.concat(f.i),0):1==f.G||2==f.G||f.B>=(f.Va?0:f.Wa)||(f.s=Dv(_(f.Ga,f,y),F8(f,f.B)),f.B++,0)))}(f,y)||2==T&&ak(f)))switch(C&&0<C.length&&(y=f.h,y.i=y.i.concat(C)),z){case 1:th(f,5);break;case 4:th(f,10);break;case 3:th(f,6);break;default:th(f,2)}}function F8(f,y){let C=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(C*=2),C*y}function th(f,y){if(f.j.info("Error code "+y),2==y){var C=_(f.fb,f),T=f.Xa;const z=!T;T=new eh(T||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||FT(T,"https"),VT(T),z?function $Ce(f,y){const C=new Mv;if(a.Image){const T=new Image;T.onload=v(lu,C,"TestLoadImage: loaded",!0,y,T),T.onerror=v(lu,C,"TestLoadImage: error",!1,y,T),T.onabort=v(lu,C,"TestLoadImage: abort",!1,y,T),T.ontimeout=v(lu,C,"TestLoadImage: timeout",!1,y,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=f}else y(!1)}(T.toString(),C):function HCe(f,y){new Mv;const T=new AbortController,z=setTimeout(()=>{T.abort(),lu(0,0,!1,y)},1e4);fetch(f,{signal:T.signal}).then(Z=>{clearTimeout(z),lu(0,0,!!Z.ok,y)}).catch(()=>{clearTimeout(z),lu(0,0,!1,y)})}(T.toString(),C)}else so(2);f.G=0,f.l&&f.l.sa(y),L8(f),M8(f)}function L8(f){if(f.G=0,f.ka=[],f.l){const y=p8(f.h);(0!=y.length||0!=f.i.length)&&(A(f.ka,y),A(f.ka,f.i),f.h.i.length=0,b(f.i),f.i.length=0),f.l.ra()}}function V8(f,y,C){var T=C instanceof eh?Nc(C):new eh(C);if(""!=T.g)y&&(T.g=y+"."+T.g),LT(T,T.s);else{var z=a.location;T=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;var Z=new eh(null);T&&FT(Z,T),y&&(Z.g=y),z&&LT(Z,z),C&&(Z.l=C),T=Z}return y=f.ya,(C=f.D)&&y&&qn(T,C,y),qn(T,"VER",f.la),Uv(f,T),T}function U8(f,y,C){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return(y=new pr(f.Ca&&!f.pa?new kv({eb:C}):f.pa)).Ha(f.J),y}function B8(){}function zT(){}function qo(f,y){Ui.call(this),this.g=new D8(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!R(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.D=y,null!==(f=this.h)&&y in f&&y in(f=this.h)&&delete f[y]),this.j=new sg(this)}function j8(f){Yx.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(const C in y){f=C;break e}f=void 0}(this.i=f)&&(f=this.i,y=null!==y&&f in y?y[f]:void 0),this.data=y}else this.data=f}function $8(){Jx.call(this),this.status=1}function sg(f){this.g=f}(n=pr.prototype).Ha=function(f){this.J=f},n.ea=function(f,y,C,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zx.g(),this.v=function Z5(f){return f.h||(f.h=f.i())}(this.o?this.o:Zx),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(Z){return void b8(this,Z)}if(f=C||"",C=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var z in T)C.set(z,T[z]);else{if("function"!=typeof T.keys||"function"!=typeof T.get)throw Error("Unknown input type for opt_headers: "+String(T));for(const Z of T.keys())C.set(Z,T.get(Z))}T=Array.from(C.keys()).find(Z=>"content-type"==Z.toLowerCase()),z=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(WCe,y,void 0))||T||z||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,De]of C)this.g.setRequestHeader(Z,De);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{S8(this),this.u=!0,this.g.send(f),this.u=!1}catch(Z){b8(this,Z)}},n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,oo(this,"complete"),oo(this,"abort"),BT(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),BT(this,!0)),pr.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?A8(this):this.bb())},n.bb=function(){A8(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<xc(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&0==y.indexOf(f)&&(y=y.substring(f.length)),TCe(y)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=D8.prototype).la=8,n.G=1,n.connect=function(f,y,C,T){so(0),this.W=f,this.H=y||{},C&&void 0!==T&&(this.H.OSID=C,this.H.OAID=T),this.F=this.X,this.I=V8(this,null,this.W),$T(this)},n.Ga=function(f){if(this.s)if(this.s=null,1==this.G){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const z=new au(this,this.j,f);let Z=this.o;if(this.S&&(Z?(Z=P(Z),B(Z,this.S)):Z=this.S),null!==this.m||this.O||(z.H=Z,Z=null),this.P)e:{for(var y=0,C=0;C<this.i.length;C++){var T=this.i[C];if(void 0===(T="__data__"in T.map&&"string"==typeof(T=T.map.__data__)?T.length:void 0))break;if(4096<(y+=T)){y=C;break e}if(4096===y||C===this.i.length-1){y=C+1;break e}}y=1e3}else y=1e3;y=R8(this,z,y),qn(C=Nc(this.I),"RID",f),qn(C,"CVER",22),this.D&&qn(C,"X-HTTP-Session-Id",this.D),Uv(this,C),Z&&(this.O?y="headers="+encodeURIComponent(String(I8(Z)))+"&"+y:this.m&&ok(C,this.m,Z)),ik(this.h,z),this.Ua&&qn(C,"TYPE","init"),this.P?(qn(C,"$req",y),qn(C,"SID","null"),z.T=!0,ek(z,C,null)):ek(z,C,y),this.G=2}}else 3==this.G&&(f?O8(this,f):0==this.i.length||d8(this.h)||O8(this))},n.Fa=function(){if(this.u=null,x8(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Dv(_(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,so(10),jT(this),x8(this))},n.Za=function(){null!=this.C&&(this.C=null,jT(this),ak(this),so(19))},n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),so(2)):(this.j.info("Failed to ping google.com"),so(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=B8.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},zT.prototype.g=function(f,y){return new qo(f,y)},w(qo,Ui),qo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qo.prototype.close=function(){sk(this.g)},qo.prototype.o=function(f){var y=this.g;if("string"==typeof f){var C={};C.__data__=f,f=C}else this.u&&((C={}).__data__=Kx(f),f=C);y.i.push(new RCe(y.Ya++,f)),3==y.G&&$T(y)},qo.prototype.N=function(){this.g.l=null,delete this.j,sk(this.g),delete this.g,qo.aa.N.call(this)},w(j8,Yx),w($8,Jx),w(sg,B8),sg.prototype.ua=function(){oo(this.g,"a")},sg.prototype.ta=function(f){oo(this.g,new j8(f))},sg.prototype.sa=function(f){oo(this.g,new $8)},sg.prototype.ra=function(){oo(this.g,"b")},zT.prototype.createWebChannel=zT.prototype.g,qo.prototype.send=qo.prototype.o,qo.prototype.open=qo.prototype.m,qo.prototype.close=qo.prototype.close,R4=yc.createWebChannelTransport=function(){return new zT},O4=yc.getStatEventTarget=function(){return RT()},M4=yc.Event=Zd,PM=yc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},NT.NO_ERROR=0,NT.TIMEOUT=8,NT.HTTP_ERROR=6,RI=yc.ErrorCode=NT,i8.COMPLETE="complete",D4=yc.EventType=i8,X5.EventType=Sv,Sv.OPEN="a",Sv.CLOSE="b",Sv.ERROR="c",Sv.MESSAGE="d",Ui.prototype.listen=Ui.prototype.K,ny=yc.WebChannel=X5,P4=yc.FetchXmlHttpFactory=kv,pr.prototype.listenOnce=pr.prototype.L,pr.prototype.getLastError=pr.prototype.Ka,pr.prototype.getLastErrorCode=pr.prototype.Ba,pr.prototype.getStatus=pr.prototype.Z,pr.prototype.getResponseJson=pr.prototype.Oa,pr.prototype.getResponseText=pr.prototype.oa,pr.prototype.send=pr.prototype.ea,pr.prototype.setWithCredentials=pr.prototype.Ha,S4=yc.XhrIo=pr}).apply(typeof OI<"u"?OI:typeof self<"u"?self:typeof window<"u"?window:{});const N4="@firebase/firestore";class ni{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ni.UNAUTHENTICATED=new ni(null),ni.GOOGLE_CREDENTIALS=new ni("google-credentials-uid"),ni.FIRST_PARTY=new ni("first-party-uid"),ni.MOCK_USER=new ni("mock-user");let sp="10.12.5";const bl=new Vo.Vy("@firebase/firestore");function ap(){return bl.logLevel}function ye(n,...e){if(bl.logLevel<=Vo.$b.DEBUG){const t=e.map(DM);bl.debug(`Firestore (${sp}): ${n}`,...t)}}function Ir(n,...e){if(bl.logLevel<=Vo.$b.ERROR){const t=e.map(DM);bl.error(`Firestore (${sp}): ${n}`,...t)}}function wo(n,...e){if(bl.logLevel<=Vo.$b.WARN){const t=e.map(DM);bl.warn(`Firestore (${sp}): ${n}`,...t)}}function DM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Be(n="Unexpected state"){const e=`FIRESTORE (${sp}) INTERNAL ASSERTION FAILED: `+n;throw Ir(e),new Error(e)}function Ge(n,e){n||Be()}function Pe(n,e){return n}const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends S.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Kr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class x4{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Lle{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ni.UNAUTHENTICATED))}shutdown(){}}class Vle{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ule{constructor(e){this.t=e,this.currentUser=ni.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let s=new Kr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Kr,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable((0,ae.A)(function*(){yield l.promise,yield o(r.currentUser)}))},c=l=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Kr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge("string"==typeof r.accessToken),new x4(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ge(null===e||"string"==typeof e),new ni(e)}}class Ble{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ni.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class jle{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Ble(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ni.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class k4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $le{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=o=>{null!=o.error&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,ye("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ge("string"==typeof t.token),this.R=t.token,new k4(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Hle(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class F4{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Hle(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function ut(n,e){return n<e?-1:n>e?1:0}function cp(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function L4(n){return n+"\0"}class Kn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ge(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kn.fromMillis(Date.now())}static fromDate(e){return Kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Kn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class We{constructor(e){this.timestamp=e}static fromTimestamp(e){return new We(e)}static min(){return new We(new Kn(0,0))}static max(){return new We(new Kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ry{constructor(e,t,r){void 0===t?t=0:t>e.length&&Be(),void 0===r?r=e.length-t:r>e.length-t&&Be(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ry.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ry?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Lt extends ry{construct(e,t,r){return new Lt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Lt(t)}static emptyPath(){return new Lt([])}}const zle=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends ry{construct(e,t,r){return new Bn(e,t,r)}static isValidIdentifier(e){return zle.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Bn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new ge(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ge(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new ge(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ge(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bn(t)}static emptyPath(){return new Bn([])}}class Me{constructor(e){this.path=e}static fromPath(e){return new Me(Lt.fromString(e))}static fromName(e){return new Me(Lt.fromString(e).popFirst(5))}static empty(){return new Me(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Lt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Me(new Lt(e.slice()))}}class lp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function MM(n){return n.fields.find(e=>2===e.kind)}function gd(n){return n.fields.filter(e=>2!==e.kind)}lp.UNKNOWN_ID=-1;class md{constructor(e,t){this.fieldPath=e,this.kind=t}}class up{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new up(0,Uo.min())}}function V4(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=We.fromTimestamp(1e9===r?new Kn(t+1,0):new Kn(t,r));return new Uo(i,Me.empty(),e)}function U4(n){return new Uo(n.readTime,n.key,-1)}class Uo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Uo(We.min(),Me.empty(),-1)}static max(){return new Uo(We.max(),Me.empty(),-1)}}function OM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Me.comparator(n.documentKey,e.documentKey),0!==t?t:ut(n.largestBatchId,e.largestBatchId))}const B4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class j4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Tl(n){return RM.apply(this,arguments)}function RM(){return(RM=(0,ae.A)(function*(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==B4)throw n;ye("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):q.reject(t)}static resolve(e){return new q((t,r)=>{t(e)})}static reject(e){return new q((t,r)=>{r(e)})}static waitFor(e){return new q((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=q.resolve(!1);for(const r of e)t=t.next(i=>i?q.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new q((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new q((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class NI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Kr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new iy(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=NM(r.target.error);this.V.reject(new iy(e,i))}}static open(e,t,r,i){try{return new NI(t,e.transaction(i,r))}catch(o){throw new iy(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ye("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Kle(t)}}class Ta{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Ta.S((0,S.ZQ)())&&Ir("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ye("SimpleDb","Removing database:",e),_d(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,S.zW)())return!1;if(Ta.C())return!0;const e=(0,S.ZQ)(),t=Ta.S(e),r=0<t&&t<10,i=$4(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,ae.A)(function*(){return t.db||(ye("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new iy(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new ge(Y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ge(Y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new iy(e,a))},o.onupgradeneeded=s=>{ye("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',s.oldVersion),t.p.O(s.target.result,o.transaction,s.oldVersion,t.version).next(()=>{ye("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,ae.A)(function*(){const s="readonly"===t;let a=0;for(;;){++a;try{o.db=yield o.M(e);const c=NI.open(o.db,e,s?"readonly":"readwrite",r),l=i(c).next(h=>(c.g(),h)).catch(h=>(c.abort(h),q.reject(h))).toPromise();return l.catch(()=>{}),yield c.m,l}catch(c){const l=c,h="FirebaseError"!==l.name&&a<3;if(ye("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),o.close(),!h)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function $4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Wle{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return _d(this.B.delete())}}class iy extends ge{constructor(e,t){super(Y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Al(n){return"IndexedDbTransactionError"===n.name}class Kle{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ye("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ye("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_d(r)}add(e){return ye("SimpleDb","ADD",this.store.name,e,e),_d(this.store.add(e))}get(e){return _d(this.store.get(e)).next(t=>(void 0===t&&(t=null),ye("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ye("SimpleDb","DELETE",this.store.name,e),_d(this.store.delete(e))}count(){return ye("SimpleDb","COUNT",this.store.name),_d(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const o=i.getAll(r.range);return new q((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{const o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new q((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){ye("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new q((r,i)=>{t.onerror=o=>{const s=NM(o.target.error);i(s)},t.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){const r=[];return new q((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const c=new Wle(a),l=t(a.primaryKey,a.value,c);if(l instanceof q){const h=l.catch(g=>(c.done(),q.reject(g)));r.push(h)}c.isDone?i():null===c.K?a.continue():a.continue(c.K)}}).next(()=>q.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _d(n){return new q((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=NM(r.target.error);t(i)}})}let H4=!1;function NM(n){const e=Ta.S((0,S.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return H4||(H4=!0,setTimeout(()=>{throw r},0)),r}}return n}class Qle{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;ye("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ae.A)(function*(){t.task=null;try{ye("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Al(r)?ye("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Tl(r)}yield t.X(6e4)}))}}class Yle{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,ae.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,o=!0;return q.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return ye("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(ye("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{const s=U4(o);OM(s,r)>0&&(r=s)}),new Uo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Bo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function oy(n){return null==n}function sy(n){return 0===n&&1/n==-1/0}function z4(n){return"number"==typeof n&&Number.isInteger(n)&&!sy(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function xi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=q4(e)),e=Jle(n.get(t),e);return q4(e)}function Jle(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function q4(n){return n+"\x01\x01"}function Aa(n){const e=n.length;if(Ge(e>=2),2===e)return Ge("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Lt.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const s=n.indexOf("\x01",o);switch((s<0||s>t)&&Be(),n.charAt(s+1)){case"\x01":const a=n.substring(o,s);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(o,s),i+="\0";break;case"\x11":i+=n.substring(o,s+1);break;default:Be()}o=s+2}return new Lt(r)}const G4=["userId","batchId"];function xI(n,e){return[n,xi(e)]}function W4(n,e,t){return[n,xi(e),t]}const Zle={},Xle=["prefixPath","collectionGroup","readTime","documentId"],eue=["prefixPath","collectionGroup","documentId"],tue=["collectionGroup","readTime","prefixPath","documentId"],nue=["canonicalId","targetId"],rue=["targetId","path"],iue=["path","targetId"],oue=["collectionId","parent"],sue=["indexId","uid"],aue=["uid","sequenceNumber"],cue=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lue=["indexId","uid","orderedDocumentKey"],uue=["userId","collectionPath","documentId"],due=["userId","collectionPath","largestBatchId"],hue=["userId","collectionGroup","largestBatchId"],K4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fue=[...K4,"documentOverlays"],Q4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Y4=Q4,xM=[...Y4,"indexConfiguration","indexState","indexEntries"],pue=xM,gue=[...xM,"globals"];class kM extends j4{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Qr(n,e){const t=Pe(n);return Ta.F(t._e,e)}function J4(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function X4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Fn{constructor(e,t){this.comparator=e,this.root=t||fi.EMPTY}insert(e,t){return new Fn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fi.BLACK,null,null))}remove(e){return new Fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kI(this.root,e,this.comparator,!1)}getReverseIterator(){return new kI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kI(this.root,e,this.comparator,!0)}}class kI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fi{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??fi.RED,this.left=i??fi.EMPTY,this.right=o??fi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new fi(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return fi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return fi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Be();const e=this.left.check();if(e!==this.right.check())throw Be();return e+(this.isRed()?0:1)}}fi.EMPTY=null,fi.RED=!0,fi.BLACK=!1,fi.EMPTY=new class{constructor(){this.size=0}get key(){throw Be()}get value(){throw Be()}get color(){throw Be()}get left(){throw Be()}get right(){throw Be()}copy(e,t,r,i,o){return this}insert(e,t,r){return new fi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new Fn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ez(this.data.getIterator())}getIteratorFrom(e){return new ez(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class ez{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function dp(n){return n.hasNext()?n.getNext():void 0}class Io{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new Io([])}unionWith(e){let t=new vn(Bn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Io(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cp(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class tz extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new tz("Invalid base64 string: "+o):o}}(e);return new ur(t)}static fromUint8Array(e){const t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new ur(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ur.EMPTY_BYTE_STRING=new ur("");const _ue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vc(n){if(Ge(!!n),"string"==typeof n){let e=0;const t=_ue.exec(n);if(Ge(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dr(n.seconds),nanos:dr(n.nanos)}}function dr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ec(n){return"string"==typeof n?ur.fromBase64String(n):ur.fromUint8Array(n)}function FI(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function LI(n){const e=n.mapValue.fields.__previous_value__;return FI(e)?LI(e):e}function ay(n){const e=vc(n.mapValue.fields.__local_write_time__.timestampValue);return new Kn(e.seconds,e.nanos)}class yue{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class Pl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Pl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Pl&&e.projectId===this.projectId&&e.database===this.database}}const Dl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},VI={nullValue:"NULL_VALUE"};function Ml(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?FI(n)?4:oz(n)?9007199254740991:10:Be()}function Sa(n,e){if(n===e)return!0;const t=Ml(n);if(t!==Ml(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ay(n).isEqual(ay(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=vc(i.timestampValue),a=vc(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Ec(n.bytesValue).isEqual(Ec(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return dr(i.geoPointValue.latitude)===dr(o.geoPointValue.latitude)&&dr(i.geoPointValue.longitude)===dr(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return dr(i.integerValue)===dr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=dr(i.doubleValue),a=dr(o.doubleValue);return s===a?sy(s)===sy(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return cp(n.arrayValue.values||[],e.arrayValue.values||[],Sa);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(J4(s)!==J4(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===a[c]||!Sa(s[c],a[c])))return!1;return!0}(n,e);default:return Be()}var o}function cy(n,e){return void 0!==(n.values||[]).find(t=>Sa(t,e))}function Ol(n,e){if(n===e)return 0;const t=Ml(n),r=Ml(e);if(t!==r)return ut(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ut(n.booleanValue,e.booleanValue);case 2:return function(o,s){const a=dr(o.integerValue||o.doubleValue),c=dr(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return nz(n.timestampValue,e.timestampValue);case 4:return nz(ay(n),ay(e));case 5:return ut(n.stringValue,e.stringValue);case 6:return function(o,s){const a=Ec(o),c=Ec(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){const h=ut(a[l],c[l]);if(0!==h)return h}return ut(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const a=ut(dr(o.latitude),dr(s.latitude));return 0!==a?a:ut(dr(o.longitude),dr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){const h=Ol(a[l],c[l]);if(h)return h}return ut(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Dl.mapValue&&s===Dl.mapValue)return 0;if(o===Dl.mapValue)return 1;if(s===Dl.mapValue)return-1;const a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let g=0;g<c.length&&g<h.length;++g){const _=ut(c[g],h[g]);if(0!==_)return _;const v=Ol(a[c[g]],l[h[g]]);if(0!==v)return v}return ut(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Be()}}function nz(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ut(n,e);const t=vc(n),r=vc(e),i=ut(t.seconds,r.seconds);return 0!==i?i:ut(t.nanos,r.nanos)}function hp(n){return FM(n)}function FM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=vc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ec(n.bytesValue).toBase64():"referenceValue"in n?Me.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=FM(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${FM(t.fields[s])}`;return i+"}"}(n.mapValue):Be()}function yd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function LM(n){return!!n&&"integerValue"in n}function ly(n){return!!n&&"arrayValue"in n}function rz(n){return!!n&&"nullValue"in n}function iz(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function BI(n){return!!n&&"mapValue"in n}function uy(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Sl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=uy(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uy(n.arrayValue.values[t]);return e}return Object.assign({},n)}function oz(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function vue(n){return"nullValue"in n?VI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?yd(Pl.empty(),Me.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Be()}function Eue(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?yd(Pl.empty(),Me.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Dl:Be()}function sz(n,e){const t=Ol(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function az(n,e){const t=Ol(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class pi{constructor(e){this.value=e}static empty(){return new pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!BI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uy(t)}setAll(e){let t=Bn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=uy(s):i.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());BI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];BI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Sl(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new pi(uy(this.value))}}function cz(n){const e=[];return Sl(n.fields,(t,r)=>{const i=new Bn([t]);if(BI(r)){const o=cz(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Io(e)}class jn{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new jn(e,0,We.min(),We.min(),We.min(),pi.empty(),0)}static newFoundDocument(e,t,r,i){return new jn(e,1,t,We.min(),r,i,0)}static newNoDocument(e,t){return new jn(e,2,t,We.min(),We.min(),pi.empty(),0)}static newUnknownDocument(e,t){return new jn(e,3,t,We.min(),We.min(),pi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(We.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Rl{constructor(e,t){this.position=e,this.inclusive=t}}function lz(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(r=o.field.isKeyField()?Me.comparator(Me.fromName(s.referenceValue),t.key):Ol(s,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function uz(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Sa(n.position[t],e.position[t]))return!1;return!0}class dy{constructor(e,t="asc"){this.field=e,this.dir=t}}function Cue(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class dz{}class Vt extends dz{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new wue(e,t,r):"array-contains"===t?new Tue(e,r):"in"===t?new _z(e,r):"not-in"===t?new Aue(e,r):"array-contains-any"===t?new Sue(e,r):new Vt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Iue(e,r):new bue(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ol(t,this.value)):null!==t&&Ml(this.value)===Ml(t)&&this.matchesComparison(Ol(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends dz{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new fn(e,t)}matches(e){return fp(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function fp(n){return"and"===n.op}function VM(n){return"or"===n.op}function UM(n){return hz(n)&&fp(n)}function hz(n){for(const e of n.filters)if(e instanceof fn)return!1;return!0}function BM(n){if(n instanceof Vt)return n.field.canonicalString()+n.op.toString()+hp(n.value);if(UM(n))return n.filters.map(e=>BM(e)).join(",");{const e=n.filters.map(t=>BM(t)).join(",");return`${n.op}(${e})`}}function fz(n,e){return n instanceof Vt?(r=n,(i=e)instanceof Vt&&r.op===i.op&&r.field.isEqual(i.field)&&Sa(r.value,i.value)):n instanceof fn?function(r,i){return i instanceof fn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&fz(s,i.filters[a]),!0)}(n,e):void Be();var r,i}function pz(n,e){const t=n.filters.concat(e);return fn.create(t,n.op)}function gz(n){return n instanceof Vt?`${(t=n).field.canonicalString()} ${t.op} ${hp(t.value)}`:n instanceof fn?function(t){return t.op.toString()+" {"+t.getFilters().map(gz).join(" ,")+"}"}(n):"Filter";var t}class wue extends Vt{constructor(e,t,r){super(e,t,r),this.key=Me.fromName(r.referenceValue)}matches(e){const t=Me.comparator(e.key,this.key);return this.matchesComparison(t)}}class Iue extends Vt{constructor(e,t){super(e,"in",t),this.keys=mz(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bue extends Vt{constructor(e,t){super(e,"not-in",t),this.keys=mz(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mz(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Me.fromName(r.referenceValue))}class Tue extends Vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ly(t)&&cy(t.arrayValue,this.value)}}class _z extends Vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&cy(this.value.arrayValue,t)}}class Aue extends Vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(cy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!cy(this.value.arrayValue,t)}}class Sue extends Vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ly(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>cy(this.value.arrayValue,r))}}class Pue{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function jM(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Pue(n,e,t,r,i,o,s)}function vd(n){const e=Pe(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>BM(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),oy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hp(r)).join(",")),e.ue=t}return e.ue}function hy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Cue(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!fz(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uz(n.startAt,e.startAt)&&uz(n.endAt,e.endAt)}function jI(n){return Me.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function $I(n,e){return n.filters.filter(t=>t instanceof Vt&&t.field.isEqual(e))}function yz(n,e,t){let r=VI,i=!0;for(const o of $I(n,e)){let s=VI,a=!0;switch(o.op){case"<":case"<=":s=vue(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=VI}sz({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];sz({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}function vz(n,e,t){let r=Dl,i=!0;for(const o of $I(n,e)){let s=Dl,a=!0;switch(o.op){case">=":case">":s=Eue(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Dl}az({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];az({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}class Cc{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function Ez(n,e,t,r,i,o,s,a){return new Cc(n,e,t,r,i,o,s,a)}function pp(n){return new Cc(n)}function Cz(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function $M(n){return null!==n.collectionGroup}function gp(n){const e=Pe(n);if(null===e.ce){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new vn(Bn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new dy(o,r))}),t.has(Bn.keyField().canonicalString())||e.ce.push(new dy(Bn.keyField(),r))}return e.ce}function ki(n){const e=Pe(n);return e.le||(e.le=function Iz(n,e){if("F"===n.limitType)return jM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new dy(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Rl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Rl(n.startAt.position,n.startAt.inclusive):null;return jM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,gp(n))),e.le}function HM(n,e){const t=n.filters.concat([e]);return new Cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function HI(n,e,t){return new Cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function fy(n,e){return hy(ki(n),ki(e))&&n.limitType===e.limitType}function bz(n){return`${vd(ki(n))}|lt:${n.limitType}`}function mp(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>gz(i)).join(", ")}]`),oy(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>hp(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>hp(i)).join(",")),`Target(${r})`}(ki(n))}; limitType=${n.limitType})`}function py(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Me.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of gp(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(s,a,c){const l=lz(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,gp(r),i)||r.endAt&&!function(s,a,c){const l=lz(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,gp(r),i)));var r,i}function Tz(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Az(n){return(e,t)=>{let r=!1;for(const i of gp(n)){const o=Due(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Due(n,e,t){const r=n.field.isKeyField()?Me.comparator(e.key,t.key):function(o,s,a){const c=s.data.field(o),l=a.data.field(o);return null!==c&&null!==l?Ol(c,l):Be()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Be()}}class wc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Sl(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return X4(this.inner)}size(){return this.innerSize}}const Mue=new Fn(Me.comparator);function bo(){return Mue}const Sz=new Fn(Me.comparator);function gy(...n){let e=Sz;for(const t of n)e=e.insert(t.key,t);return e}function Pz(n){let e=Sz;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Pa(){return my()}function Dz(){return my()}function my(){return new wc(n=>n.toString(),(n,e)=>n.isEqual(e))}const Oue=new Fn(Me.comparator),Rue=new vn(Me.comparator);function _t(...n){let e=Rue;for(const t of n)e=e.add(t);return e}const Nue=new vn(ut);function zM(){return Nue}function Mz(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sy(e)?"-0":e}}function Oz(n){return{integerValue:""+n}}function Rz(n,e){return z4(e)?Oz(e):Mz(n,e)}class zI{constructor(){this._=void 0}}function xue(n,e,t){return n instanceof _p?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&FI(o)&&(o=LI(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Ed?xz(n,e):n instanceof Cd?kz(n,e):function(i,o){const s=Nz(i,o),a=Fz(s)+Fz(i.Pe);return LM(s)&&LM(i.Pe)?Oz(a):Mz(i.serializer,a)}(n,e)}function kue(n,e,t){return n instanceof Ed?xz(n,e):n instanceof Cd?kz(n,e):t}function Nz(n,e){return n instanceof yp?LM(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class _p extends zI{}class Ed extends zI{constructor(e){super(),this.elements=e}}function xz(n,e){const t=Lz(e);for(const r of n.elements)t.some(i=>Sa(i,r))||t.push(r);return{arrayValue:{values:t}}}class Cd extends zI{constructor(e){super(),this.elements=e}}function kz(n,e){let t=Lz(e);for(const r of n.elements)t=t.filter(i=>!Sa(i,r));return{arrayValue:{values:t}}}class yp extends zI{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Fz(n){return dr(n.integerValue||n.doubleValue)}function Lz(n){return ly(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class _y{constructor(e,t){this.field=e,this.transform=t}}class Lue{constructor(e,t){this.version=e,this.transformResults=t}}class Qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class GI{}function Vz(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ep(n.key,Qn.none()):new vp(n.key,n.data,Qn.none());{const t=n.data,r=pi.empty();let i=new vn(Bn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);null===s&&o.length>1&&(o=o.popLast(),s=t.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new Ic(n.key,r,new Io(i.toArray()),Qn.none())}}function Vue(n,e,t){n instanceof vp?function(i,o,s){const a=i.value.clone(),c=jz(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ic?function(i,o,s){if(!qI(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=jz(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Bz(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function yy(n,e,t,r){return n instanceof vp?function(o,s,a,c){if(!qI(o.precondition,s))return a;const l=o.value.clone(),h=$z(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ic?function(o,s,a,c){if(!qI(o.precondition,s))return a;const l=$z(o.fieldTransforms,c,s),h=s.data;return h.setAll(Bz(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(g=>g.field))}(n,e,t,r):(a=t,qI(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function Uue(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=Nz(r.transform,i||null);null!=o&&(null===t&&(t=pi.empty()),t.set(r.field,o))}return t||null}function Uz(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&cp(r,i,(o,s)=>function Fue(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof Ed&&i instanceof Ed||r instanceof Cd&&i instanceof Cd?cp(r.elements,i.elements,Sa):r instanceof yp&&i instanceof yp?Sa(r.Pe,i.Pe):r instanceof _p&&i instanceof _p);var r,i}(o,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class vp extends GI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ic extends GI{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Bz(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function jz(n,e,t){const r=new Map;Ge(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,kue(s,a,t[i]))}return r}function $z(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,xue(o,s,e))}return r}class Ep extends GI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qM extends GI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class GM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Vue(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=yy(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=yy(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Dz();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const c=Vz(s,a);null!==c&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(We.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_t())}isEqual(e){return this.batchId===e.batchId&&cp(this.mutations,e.mutations,(t,r)=>Uz(t,r))&&cp(this.baseMutations,e.baseMutations,(t,r)=>Uz(t,r))}}class WM{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ge(e.mutations.length===r.length);let i=function(){return Oue}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new WM(e,t,r,i)}}class KM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Bue{constructor(e,t){this.count=e,this.unchangedNames=t}}var Vr,qt;function zz(n){switch(n){default:return Be();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function qz(n){if(void 0===n)return Ir("GRPC error has no .code"),Y.UNKNOWN;switch(n){case Vr.OK:return Y.OK;case Vr.CANCELLED:return Y.CANCELLED;case Vr.UNKNOWN:return Y.UNKNOWN;case Vr.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case Vr.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case Vr.INTERNAL:return Y.INTERNAL;case Vr.UNAVAILABLE:return Y.UNAVAILABLE;case Vr.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case Vr.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case Vr.NOT_FOUND:return Y.NOT_FOUND;case Vr.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case Vr.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case Vr.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case Vr.ABORTED:return Y.ABORTED;case Vr.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case Vr.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case Vr.DATA_LOSS:return Y.DATA_LOSS;default:return Be()}}(qt=Vr||(Vr={}))[qt.OK=0]="OK",qt[qt.CANCELLED=1]="CANCELLED",qt[qt.UNKNOWN=2]="UNKNOWN",qt[qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qt[qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qt[qt.NOT_FOUND=5]="NOT_FOUND",qt[qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",qt[qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",qt[qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",qt[qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qt[qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qt[qt.ABORTED=10]="ABORTED",qt[qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",qt[qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",qt[qt.INTERNAL=13]="INTERNAL",qt[qt.UNAVAILABLE=14]="UNAVAILABLE",qt[qt.DATA_LOSS=15]="DATA_LOSS";function Gz(){return new TextEncoder}const jue=new pd([4294967295,4294967295],0);function Wz(n){const e=Gz().encode(n),t=new A4;return t.update(e),new Uint8Array(t.digest())}function Kz(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new pd([t,r],0),new pd([i,o],0)]}class QM{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new vy(`Invalid padding: ${t}`);if(r<0)throw new vy(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new vy(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new vy(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=pd.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(pd.fromNumber(r)));return 1===i.compare(jue)&&(i=new pd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Wz(e),[r,i]=Kz(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new QM(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Ie)return;const t=Wz(e),[r,i]=Kz(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class vy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ey{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Cy.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ey(We.min(),i,new Fn(ut),bo(),_t())}}class Cy{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Cy(r,t,_t(),_t(),_t())}}class KI{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class Qz{constructor(e,t){this.targetId=e,this.me=t}}class Yz{constructor(e,t,r=ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Jz{constructor(){this.fe=0,this.ge=Xz(),this.pe=ur.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=_t(),t=_t(),r=_t();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Be()}}),new Cy(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=Xz()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $ue{constructor(e){this.Le=e,this.Be=new Map,this.ke=bo(),this.qe=Zz(),this.Qe=new Fn(ut)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Be()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const o=i.target;if(jI(o))if(0===r){const s=new Me(o.path);this.Ue(t,s,jn.newNoDocument(s,We.min()))}else Ge(1===r);else{const s=this.Ye(t);if(s!==r){const a=this.Ze(e),c=a?this.Xe(a,e,s):1;0!==c&&(this.je(t),this.Qe=this.Qe.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,a;try{s=Ec(r).toUint8Array()}catch(c){if(c instanceof tz)return wo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new QM(s,i,o)}catch(c){return wo(c instanceof vy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&jI(a.target)){const c=new Me(a.target.path);null!==this.ke.get(c)||this.it(s,c)||this.Ue(s,c,jn.newNoDocument(c,e))}o.be&&(t.set(s,o.Ce()),o.ve())}});let r=_t();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{const l=this.Je(c);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Ey(e,t,this.Qe,this.ke,r);return this.ke=bo(),this.qe=Zz(),this.Qe=new Fn(ut),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Jz,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new vn(ut),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||ye("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Jz),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Zz(){return new Fn(Me.comparator)}function Xz(){return new Fn(Me.comparator)}const Hue={asc:"ASCENDING",desc:"DESCENDING"},zue={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},que={and:"AND",or:"OR"};class Gue{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function YM(n,e){return n.useProto3Json||oy(e)?e:{value:e}}function Cp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function e3(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Wue(n,e){return Cp(n,e.toTimestamp())}function br(n){return Ge(!!n),We.fromTimestamp(function(t){const r=vc(t);return new Kn(r.seconds,r.nanos)}(n))}function JM(n,e){return ZM(n,e).canonicalString()}function ZM(n,e){const t=(i=n,new Lt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function t3(n){const e=Lt.fromString(n);return Ge(h3(e)),e}function wy(n,e){return JM(n.databaseId,e.path)}function Da(n,e){const t=t3(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Me(i3(t))}function n3(n,e){return JM(n.databaseId,e)}function r3(n){const e=t3(n);return 4===e.length?Lt.emptyPath():i3(e)}function XM(n){return new Lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function i3(n){return Ge(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function o3(n,e,t){return{name:wy(n,e),fields:t.value.mapValue.fields}}function s3(n,e,t){const r=Da(n,e.name),i=br(e.updateTime),o=e.createTime?br(e.createTime):We.min(),s=new pi({mapValue:{fields:e.fields}}),a=jn.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Iy(n,e){let t;if(e instanceof vp)t={update:o3(n,e.key,e.value)};else if(e instanceof Ep)t={delete:wy(n,e.key)};else if(e instanceof Ic)t={update:o3(n,e.key,e.data),updateMask:tde(e.fieldMask)};else{if(!(e instanceof qM))return Be();t={verify:wy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof _p)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ed)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Cd)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof yp)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Be()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Wue(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Be()),t;var o}function eO(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Qn.updateTime(br(o.updateTime)):void 0!==o.exists?Qn.exists(o.exists):Qn.none():Qn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;"setToServerValue"in a?(Ge("REQUEST_TIME"===a.setToServerValue),c=new _p):"appendMissingElements"in a?c=new Ed(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new Cd(a.removeAllFromArray.values||[]):"increment"in a?c=new yp(s,a.increment):Be();const l=Bn.fromServerFormat(a.fieldPath);return new _y(l,c)}(n,i)):[];var o;if(e.update){const i=Da(n,e.update.name),o=new pi({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new Io((e.updateMask.fieldPaths||[]).map(h=>Bn.fromServerFormat(h)));return new Ic(i,o,s,t,r)}return new vp(i,o,t,r)}if(e.delete){const i=Da(n,e.delete);return new Ep(i,t)}if(e.verify){const i=Da(n,e.verify);return new qM(i,t)}return Be()}function a3(n,e){return{documents:[n3(n,e.path)]}}function QI(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=n3(n,i);const o=function(l){if(0!==l.length)return d3(fn.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const s=function(l){if(0!==l.length)return l.map(h=>{return{field:Nl((_=h).field),direction:Zue(_.dir)};var _})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=YM(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i};var l}function l3(n){let e=r3(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ge(1===r);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(g){const _=u3(g);return _ instanceof fn&&UM(_)?_.getFilters():[_]}(t.where));let s=[];t.orderBy&&(s=t.orderBy.map(_=>{return new dy(wp((w=_).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction));var w}));let a=null;t.limit&&(a=function(g){let _;return _="object"==typeof g?g.value:g,oy(_)?null:_}(t.limit));let c=null;var g;t.startAt&&(c=new Rl((g=t.startAt).values||[],!!g.before));let l=null;return t.endAt&&(l=function(g){return new Rl(g.values||[],!g.before)}(t.endAt)),Ez(e,i,s,o,a,"F",c,l)}function u3(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=wp(t.unaryFilter.field);return Vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=wp(t.unaryFilter.field);return Vt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=wp(t.unaryFilter.field);return Vt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=wp(t.unaryFilter.field);return Vt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Be()}}(n):void 0!==n.fieldFilter?Vt.create(wp((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Be()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return fn.create(t.compositeFilter.filters.map(r=>u3(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Be()}}(t.compositeFilter.op))}(n):Be();var t}function Zue(n){return Hue[n]}function Xue(n){return zue[n]}function ede(n){return que[n]}function Nl(n){return{fieldPath:n.canonicalString()}}function wp(n){return Bn.fromServerFormat(n.fieldPath)}function d3(n){return n instanceof Vt?function(t){if("=="===t.op){if(iz(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NAN"}};if(rz(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(iz(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NOT_NAN"}};if(rz(t.value))return{unaryFilter:{field:Nl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nl(t.field),op:Xue(t.op),value:t.value}}}(n):n instanceof fn?function(t){const r=t.getFilters().map(i=>d3(i));return 1===r.length?r[0]:{compositeFilter:{op:ede(t.op),filters:r}}}(n):Be()}function tde(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function h3(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class bc{constructor(e,t,r,i,o=We.min(),s=We.min(),a=ur.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new bc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new bc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class f3{constructor(e){this.ct=e}}function p3(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:YI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:wy(o=n.ct,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Cp(o,s.version.toTimestamp()),createTime:Cp(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:wd(e.version)};else{if(!e.isUnknownDocument())return Be();r.unknownDocument={path:t.path.toArray(),version:wd(e.version)}}var o,s;return r}function YI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function wd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Id(n){const e=new Kn(n.seconds,n.nanoseconds);return We.fromTimestamp(e)}function bd(n,e){const t=(e.baseMutations||[]).map(o=>eO(n.ct,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>eO(n.ct,o)),i=Kn.fromMillis(e.localWriteTimeMs);return new GM(e.batchId,i,t,r)}function by(n){const e=Id(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Id(n.lastLimboFreeSnapshotVersion):We.min();let r;return r=void 0!==n.query.documents?(Ge(1===(o=n.query).documents.length),ki(pp(r3(o.documents[0])))):function(o){return ki(l3(o))}(n.query),new bc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ur.fromBase64String(n.resumeToken));var o}function g3(n,e){const t=wd(e.snapshotVersion),r=wd(e.lastLimboFreeSnapshotVersion);let i;i=jI(e.target)?a3(n.ct,e.target):QI(n.ct,e.target)._t;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:vd(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function tO(n){const e=l3({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?HI(e,e.limit,"L"):e}function nO(n,e){return new KM(e.largestBatchId,eO(n.ct,e.overlayMutation))}function m3(n,e){const t=e.path.lastSegment();return[n,xi(e.path.popLast()),t]}function _3(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:wd(r.readTime),documentKey:xi(r.documentKey.path),largestBatchId:r.largestBatchId}}class rde{getBundleMetadata(e,t){return y3(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Id(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return y3(e).put({bundleId:(i=t).id,createTime:wd(br(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return v3(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:tO(o.bundledQuery),readTime:Id(o.readTime)};var o})}saveNamedQuery(e,t){return v3(e).put({name:(i=t).name,readTime:wd(br(i.readTime)),bundledQuery:i.bundledQuery});var i}}function y3(n){return Qr(n,"bundles")}function v3(n){return Qr(n,"namedQueries")}class JI{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new JI(e,t.uid||"")}getOverlay(e,t){return Ty(e).get(m3(this.userId,t)).next(r=>r?nO(this.serializer,r):null)}getOverlays(e,t){const r=Pa();return q.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,s)=>{const a=new KM(t,s);i.push(this.ht(e,a))}),q.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(s=>i.add(xi(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Ty(e).j("collectionPathOverlayIndex",a))}),q.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Pa(),o=xi(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ty(e).U("collectionPathOverlayIndex",s).next(a=>{for(const c of a){const l=nO(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=Pa();let s;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ty(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{const g=nO(this.serializer,l);o.size()<i||g.largestBatchId===s?(o.set(g.getKey(),g),s=g.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return Ty(e).put(function(i,o,s){const[a,c,l]=m3(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Iy(i.ct,s.mutation)}}(this.serializer,this.userId,t))}}function Ty(n){return Qr(n,"documentOverlays")}class ide{Pt(e){return Qr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?ur.fromUint8Array(r):ur.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Td{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(dr(e.integerValue));else if("doubleValue"in e){const r=dr(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),sy(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=vc(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ec(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?oz(e)?this.dt(t,Number.MAX_SAFE_INTEGER):(this.wt(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.St(e.arrayValue,t),this.ft(t)):Be()}Vt(e,t){this.dt(t,25),this.bt(e,t)}bt(e,t){t.Rt(e)}wt(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}St(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Me.fromName(e).path.forEach(r=>{this.dt(t,60),this.bt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function ode(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function E3(n){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=ode(255&r[o]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}Td.Dt=new Td;class sde{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.vt(r.value),r=t.next();this.Ft()}Mt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.xt(r.value),r=t.next();this.Ot()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.vt(r);else if(r<2048)this.vt(960|r>>>6),this.vt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.vt(480|r>>>12),this.vt(128|63&r>>>6),this.vt(128|63&r);else{const i=t.codePointAt(0);this.vt(240|i>>>18),this.vt(128|63&i>>>12),this.vt(128|63&i>>>6),this.vt(128|63&i)}}this.Ft()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.xt(r);else if(r<2048)this.xt(960|r>>>6),this.xt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.xt(480|r>>>12),this.xt(128|63&r>>>6),this.xt(128|63&r);else{const i=t.codePointAt(0);this.xt(240|i>>>18),this.xt(128|63&i>>>12),this.xt(128|63&i>>>6),this.xt(128|63&i)}}this.Ot()}Bt(e){const t=this.kt(e),r=E3(t);this.qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Qt(e){const t=this.kt(e),r=E3(t);this.qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Kt(){this.$t(255),this.$t(255)}Ut(){this.Wt(255),this.Wt(255)}reset(){this.position=0}seed(e){this.qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Gt(){return this.buffer.slice(0,this.position)}kt(e){const t=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}vt(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(t)}xt(e){const t=255&e;0===t?(this.Wt(0),this.Wt(255)):255===t?(this.Wt(255),this.Wt(0)):this.Wt(e)}Ft(){this.$t(0),this.$t(1)}Ot(){this.Wt(0),this.Wt(1)}$t(e){this.qt(1),this.buffer[this.position++]=e}Wt(e){this.qt(1),this.buffer[this.position++]=~e}qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class ade{constructor(e){this.zt=e}gt(e){this.zt.Ct(e)}Rt(e){this.zt.Nt(e)}At(e){this.zt.Bt(e)}Et(){this.zt.Kt()}}class cde{constructor(e){this.zt=e}gt(e){this.zt.Mt(e)}Rt(e){this.zt.Lt(e)}At(e){this.zt.Qt(e)}Et(){this.zt.Ut()}}class Ay{constructor(){this.zt=new sde,this.jt=new ade(this.zt),this.Ht=new cde(this.zt)}seed(e){this.zt.seed(e)}Jt(e){return 0===e?this.jt:this.Ht}Gt(){return this.zt.Gt()}reset(){this.zt.reset()}}class Ad{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Yt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ad(this.indexId,this.documentKey,this.arrayValue,r)}}function xl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=C3(n.arrayValue,e.arrayValue),0!==t?t:(t=C3(n.directionalValue,e.directionalValue),0!==t?t:Me.comparator(n.documentKey,e.documentKey)))}function C3(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class w3{constructor(e){this.Zt=new vn((t,r)=>Bn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Xt=e.orderBy,this.en=[];for(const t of e.filters){const r=t;r.isInequality()?this.Zt=this.Zt.add(r):this.en.push(r)}}get tn(){return this.Zt.size>1}nn(e){if(Ge(e.collectionGroup===this.collectionId),this.tn)return!1;const t=MM(e);if(void 0!==t&&!this.rn(t))return!1;const r=gd(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.rn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Zt.size>0){const a=this.Zt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[o];if(!this.sn(a,c)||!this.on(this.Xt[s++],c))return!1}++o}for(;o<r.length;++o)if(s>=this.Xt.length||!this.on(this.Xt[s++],r[o]))return!1;return!0}_n(){if(this.tn)return null;let e=new vn(Bn.comparator);const t=[];for(const r of this.en)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new md(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new md(r.field,0))}for(const r of this.Xt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new md(r.field,"asc"===r.dir?0:1)));return new lp(lp.UNKNOWN_ID,this.collectionId,t,up.empty())}rn(e){for(const t of this.en)if(this.sn(t,e))return!0;return!1}sn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}on(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function I3(n){var e,t;if(Ge(n instanceof Vt||n instanceof fn),n instanceof Vt){if(n instanceof _z){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>Vt.create(n.field,"==",o)))||[];return fn.create(i,"or")}return n}const r=n.filters.map(i=>I3(i));return fn.create(r,n.op)}function lde(n){if(0===n.getFilters().length)return[];const e=oO(I3(n));return Ge(b3(e)),rO(e)||iO(e)?[e]:e.getFilters()}function rO(n){return n instanceof Vt}function iO(n){return n instanceof fn&&UM(n)}function b3(n){return rO(n)||iO(n)||function(t){if(t instanceof fn&&VM(t)){for(const r of t.getFilters())if(!rO(r)&&!iO(r))return!1;return!0}return!1}(n)}function oO(n){if(Ge(n instanceof Vt||n instanceof fn),n instanceof Vt)return n;if(1===n.filters.length)return oO(n.filters[0]);const e=n.filters.map(r=>oO(r));let t=fn.create(e,n.op);return t=ZI(t),b3(t)?t:(Ge(t instanceof fn),Ge(fp(t)),Ge(t.filters.length>1),t.filters.reduce((r,i)=>sO(r,i)))}function sO(n,e){let t;return Ge(n instanceof Vt||n instanceof fn),Ge(e instanceof Vt||e instanceof fn),t=n instanceof Vt?e instanceof Vt?fn.create([n,e],"and"):T3(n,e):e instanceof Vt?T3(e,n):function(i,o){if(Ge(i.filters.length>0&&o.filters.length>0),fp(i)&&fp(o))return pz(i,o.getFilters());const s=VM(i)?i:o,a=VM(i)?o:i,c=s.filters.map(l=>sO(l,a));return fn.create(c,"or")}(n,e),ZI(t)}function T3(n,e){if(fp(e))return pz(e,n.getFilters());{const t=e.filters.map(r=>sO(n,r));return fn.create(t,"or")}}function ZI(n){if(Ge(n instanceof Vt||n instanceof fn),n instanceof Vt)return n;const e=n.getFilters();if(1===e.length)return ZI(e[0]);if(hz(n))return n;const t=e.map(i=>ZI(i)),r=[];return t.forEach(i=>{i instanceof Vt?r.push(i):i instanceof fn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:fn.create(r,n.op)}class ude{constructor(){this.an=new aO}addToCollectionParentIndex(e,t){return this.an.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.an.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(Uo.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(Uo.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class aO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vn(Lt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vn(Lt.comparator)).toArray()}}const XI=new Uint8Array(0);class dde{constructor(e,t){this.databaseId=t,this.un=new aO,this.cn=new wc(r=>vd(r),(r,i)=>hy(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.un.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.un.add(t)});const o={collectionId:r,parent:xi(i)};return A3(e).put(o)}return q.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[L4(t),""],!1,!0);return A3(e).U(i).next(o=>{for(const s of o){if(s.collectionId!==t)break;r.push(Aa(s.parent))}return r})}addFieldIndex(e,t){const r=Sy(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const o=r.add(i);if(t.indexState){const s=bp(e);return o.next(a=>{s.put(_3(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=Sy(e),i=bp(e),o=Ip(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Sy(e),r=Ip(e),i=bp(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return q.forEach(this.ln(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new w3(r)._n();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=Ip(e);let i=!0;const o=new Map;return q.forEach(this.ln(t),s=>this.hn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=_t();const a=[];return q.forEach(o,(c,l)=>{var V;ye("IndexedDbIndexManager",`Using index ${V=c,`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(ie=>`${ie.fieldPath}:${ie.kind}`).join(",")}`} to execute ${vd(t)}`);const h=function(V,ie){const be=MM(ie);if(void 0===be)return null;for(const Ae of $I(V,be.fieldPath))switch(Ae.op){case"array-contains-any":return Ae.value.arrayValue.values||[];case"array-contains":return[Ae.value]}return null}(l,c),g=function(V,ie){const be=new Map;for(const Ae of gd(ie))for(const x of $I(V,Ae.fieldPath))switch(x.op){case"==":case"in":be.set(Ae.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return be.set(Ae.fieldPath.canonicalString(),x.value),Array.from(be.values())}return null}(l,c),_=function(V,ie){const be=[];let Ae=!0;for(const x of gd(ie)){const P=0===x.kind?yz(V,x.fieldPath,V.startAt):vz(V,x.fieldPath,V.startAt);be.push(P.value),Ae&&(Ae=P.inclusive)}return new Rl(be,Ae)}(l,c),v=function(V,ie){const be=[];let Ae=!0;for(const x of gd(ie)){const P=0===x.kind?vz(V,x.fieldPath,V.endAt):yz(V,x.fieldPath,V.endAt);be.push(P.value),Ae&&(Ae=P.inclusive)}return new Rl(be,Ae)}(l,c),w=this.Pn(c,l,_),b=this.Pn(c,l,v),A=this.In(c,l,g),N=this.Tn(c.indexId,h,w,_.inclusive,b,v.inclusive,A);return q.forEach(N,R=>r.G(R,t.limit).next(V=>{V.forEach(ie=>{const be=Me.fromSegments(ie.documentKey);s.has(be)||(s=s.add(be),a.push(be))})}))}).next(()=>a)}return q.resolve(null)})}ln(e){let t=this.cn.get(e);return t||(t=0===e.filters.length?[e]:lde(fn.create(e.filters,"and")).map(r=>jM(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.cn.set(e,t),t)}Tn(e,t,r,i,o,s,a){const c=(null!=t?t.length:1)*Math.max(r.length,o.length),l=c/(null!=t?t.length:1),h=[];for(let g=0;g<c;++g){const _=t?this.En(t[g/l]):XI,v=this.dn(e,_,r[g%l],i),w=this.An(e,_,o[g%l],s),b=a.map(A=>this.dn(e,_,A,!0));h.push(...this.createRange(v,w,b))}return h}dn(e,t,r,i){const o=new Ad(e,Me.empty(),t,r);return i?o:o.Yt()}An(e,t,r,i){const o=new Ad(e,Me.empty(),t,r);return i?o.Yt():o}hn(e,t){const r=new w3(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.nn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2;const i=this.ln(t);return q.forEach(i,o=>this.hn(e,o).next(s=>{s?0!==r&&s.fields.length<function(c){let l=new vn(Bn.comparator),h=!1;for(const g of c.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?h=!0:l=l.add(_.field));for(const g of c.orderBy)g.field.isKeyField()||(l=l.add(g.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Rn(e,t){const r=new Ay;for(const i of gd(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const s=r.Jt(i.kind);Td.Dt.It(o,s)}return r.Gt()}En(e){const t=new Ay;return Td.Dt.It(e,t.Jt(0)),t.Gt()}Vn(e,t){const r=new Ay;return Td.Dt.It(yd(this.databaseId,t),r.Jt(function(o){const s=gd(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.Gt()}In(e,t,r){if(null===r)return[];let i=[];i.push(new Ay);let o=0;for(const s of gd(e)){const a=r[o++];for(const c of i)if(this.mn(t,s.fieldPath)&&ly(a))i=this.fn(i,s,a);else{const l=c.Jt(s.kind);Td.Dt.It(a,l)}}return this.gn(i)}Pn(e,t,r){return this.In(e,t,r.position)}gn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Gt();return t}fn(e,t,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const c=new Ay;c.seed(a.Gt()),Td.Dt.It(s,c.Jt(t.kind)),o.push(c)}return o}mn(e,t){return!!e.filters.find(r=>r instanceof Vt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Sy(e),i=bp(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{const s=[];return q.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,g){const _=g?new up(g.sequenceNumber,new Uo(Id(g.readTime),new Me(Aa(g.documentKey)),g.largestBatchId)):up.empty(),v=h.fields.map(([w,b])=>new md(Bn.fromServerFormat(w),b));return new lp(h.indexId,h.collectionGroup,v,_)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:ut(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Sy(e),o=bp(e);return this.pn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>q.forEach(a,c=>o.put(_3(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){const r=new Map;return q.forEach(t,(i,o)=>{const s=r.get(i.collectionGroup);return(s?q.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),q.forEach(a,c=>this.yn(e,i,c).next(l=>{const h=this.wn(o,c);return l.isEqual(h)?q.resolve():this.Sn(e,o,c,l,h)}))))})}bn(e,t,r,i){return Ip(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Vn(r,t.key),documentKey:t.key.path.toArray()})}Dn(e,t,r,i){return Ip(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Vn(r,t.key),t.key.path.toArray()])}yn(e,t,r){const i=Ip(e);let o=new vn(xl);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Vn(r,t)])},(s,a)=>{o=o.add(new Ad(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}wn(e,t){let r=new vn(xl);const i=this.Rn(t,e);if(null==i)return r;const o=MM(t);if(null!=o){const s=e.data.field(o.fieldPath);if(ly(s))for(const a of s.arrayValue.values||[])r=r.add(new Ad(t.indexId,e.key,this.En(a),i))}else r=r.add(new Ad(t.indexId,e.key,XI,i));return r}Sn(e,t,r,i,o){ye("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(c,l,h,g,_){const v=c.getIterator(),w=l.getIterator();let b=dp(v),A=dp(w);for(;b||A;){let N=!1,R=!1;if(b&&A){const V=h(b,A);V<0?R=!0:V>0&&(N=!0)}else null!=b?R=!0:N=!0;N?(g(A),A=dp(w)):R?(_(b),b=dp(v)):(b=dp(v),A=dp(w))}}(i,o,xl,a=>{s.push(this.bn(e,t,r,a))},a=>{s.push(this.Dn(e,t,r,a))}),q.waitFor(s)}pn(e){let t=1;return bp(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>xl(s,a)).filter((s,a,c)=>!a||0!==xl(s,c[a-1]));const i=[];i.push(e);for(const s of r){const a=xl(s,e),c=xl(s,t);if(0===a)i[0]=e.Yt();else if(a>0&&c<0)i.push(s),i.push(s.Yt());else if(c>0)break}i.push(t);const o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,XI,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,XI,[]]))}return o}Cn(e,t){return xl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(S3)}getMinOffset(e,t){return q.mapArray(this.ln(t),r=>this.hn(e,r).next(i=>i||Be())).next(S3)}}function A3(n){return Qr(n,"collectionParents")}function Ip(n){return Qr(n,"indexEntries")}function Sy(n){return Qr(n,"indexConfiguration")}function bp(n){return Qr(n,"indexState")}function S3(n){Ge(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;OM(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Uo(e.readTime,e.documentKey,t)}const P3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Fi(e,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function D3(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId);let a=0;const c=r.J({range:s},(h,g,_)=>(a++,_.delete()));o.push(c.next(()=>{Ge(1===a)}));const l=[];for(const h of t.mutations){const g=W4(e,h.key.path,t.batchId);o.push(i.delete(g)),l.push(h.key)}return q.waitFor(o).next(()=>l)}function eb(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Be();e=n.noDocument}return JSON.stringify(e).length}Fi.DEFAULT_COLLECTION_PERCENTILE=10,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fi.DEFAULT=new Fi(41943040,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fi.DISABLED=new Fi(-1,0,0);class tb{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.vn={}}static lt(e,t,r,i){Ge(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new tb(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kl(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=Tp(e),s=kl(e);return s.add({}).next(a=>{Ge("number"==typeof a);const c=new GM(a,t,r,i),l=function(v,w,b){const A=b.baseMutations.map(R=>Iy(v.ct,R)),N=b.mutations.map(R=>Iy(v.ct,R));return{userId:w,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:A,mutations:N}}(this.serializer,this.userId,c),h=[];let g=new vn((_,v)=>ut(_.canonicalString(),v.canonicalString()));for(const _ of i){const v=W4(this.userId,_.key.path,a);g=g.add(_.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,Zle))}return g.forEach(_=>{h.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.vn[a]=c.keys()}),q.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return kl(e).get(t).next(r=>r?(Ge(r.userId===this.userId),bd(this.serializer,r)):null)}Fn(e,t){return this.vn[t]?q.resolve(this.vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return kl(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(Ge(a.batchId>=r),o=bd(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return kl(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kl(e).U("userMutationsIndex",t).next(r=>r.map(i=>bd(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=xI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Tp(e).J({range:i},(s,a,c)=>{const[l,h,g]=s,_=Aa(h);if(l===this.userId&&t.path.isEqual(_))return kl(e).get(g).next(v=>{if(!v)throw Be();Ge(v.userId===this.userId),o.push(bd(this.serializer,v))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(ut);const i=[];return t.forEach(o=>{const s=xI(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Tp(e).J({range:a},(l,h,g)=>{const[_,v,w]=l,b=Aa(v);_===this.userId&&o.path.isEqual(b)?r=r.add(w):g.done()});i.push(c)}),q.waitFor(i).next(()=>this.Mn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=xI(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new vn(ut);return Tp(e).J({range:s},(c,l,h)=>{const[g,_,v]=c,w=Aa(_);g===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(v)):h.done()}).next(()=>this.Mn(e,a))}Mn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(kl(e).get(o).next(s=>{if(null===s)throw Be();Ge(s.userId===this.userId),r.push(bd(this.serializer,s))}))}),q.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return D3(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.xn(t.batchId)}),q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}xn(e){delete this.vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return q.resolve();const r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Tp(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){const c=Aa(o[1]);i.push(c)}else a.done()}).next(()=>{Ge(0===i.length)})})}containsKey(e,t){return M3(e,this.userId,t)}On(e){return O3(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function M3(n,e,t){const r=xI(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Tp(n).J({range:o,H:!0},(a,c,l)=>{const[h,g,_]=a;h===e&&g===i&&(s=!0),l.done()}).next(()=>s)}function kl(n){return Qr(n,"mutations")}function Tp(n){return Qr(n,"documentMutations")}function O3(n){return Qr(n,"mutationQueues")}class Sd{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Ln(){return new Sd(0)}static Bn(){return new Sd(-1)}}class hde{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.kn(e).next(t=>{const r=new Sd(t.highestTargetId);return t.highestTargetId=r.next(),this.qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.kn(e).next(t=>We.fromTimestamp(new Kn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.kn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.kn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.qn(e,i)))}addTargetData(e,t){return this.Qn(e,t).next(()=>this.kn(e).next(r=>(r.targetCount+=1,this.Kn(t,r),this.qn(e,r))))}updateTargetData(e,t){return this.Qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ap(e).delete(t.targetId)).next(()=>this.kn(e)).next(r=>(Ge(r.targetCount>0),r.targetCount-=1,this.qn(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return Ap(e).J((s,a)=>{const c=by(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>q.waitFor(o)).next(()=>i)}forEachTarget(e,t){return Ap(e).J((r,i)=>{const o=by(i);t(o)})}kn(e){return R3(e).get("targetGlobalKey").next(t=>(Ge(null!==t),t))}qn(e,t){return R3(e).put("targetGlobalKey",t)}Qn(e,t){return Ap(e).put(g3(this.serializer,t))}Kn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.kn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=vd(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Ap(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{const l=by(a);hy(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=Fl(e);return t.forEach(s=>{const a=xi(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),q.waitFor(i)}removeMatchingKeys(e,t,r){const i=Fl(e);return q.forEach(t,o=>{const s=xi(o.path);return q.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Fl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Fl(e);let o=_t();return i.J({range:r,H:!0},(s,a,c)=>{const l=Aa(s[1]),h=new Me(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){const r=xi(t.path),i=IDBKeyRange.bound([r],[L4(r)],!1,!0);let o=0;return Fl(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{0!==s&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return Ap(e).get(t).next(r=>r?by(r):null)}}function Ap(n){return Qr(n,"targets")}function R3(n){return Qr(n,"targetGlobal")}function Fl(n){return Qr(n,"targetDocuments")}function N3([n,e],[t,r]){const i=ut(n,t);return 0===i?ut(e,r):i}class fde{constructor(e){this.$n=e,this.buffer=new vn(N3),this.Un=0}Wn(){return++this.Un}Gn(e){const t=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();N3(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class x3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.zn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.jn(6e4)}stop(){this.zn&&(this.zn.cancel(),this.zn=null)}get started(){return null!==this.zn}jn(e){var t=this;ye("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ae.A)(function*(){t.zn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Al(r)?ye("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Tl(r)}yield t.jn(3e5)}))}}class pde{constructor(e,t){this.Hn=e,this.params=t}calculateTargetCount(e,t){return this.Hn.Jn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return q.resolve(Bo.oe);const r=new fde(t);return this.Hn.forEachTarget(e,i=>r.Gn(i.sequenceNumber)).next(()=>this.Hn.Yn(e,i=>r.Gn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Hn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Hn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(P3)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),P3):this.Zn(e,t))}getCacheSize(e){return this.Hn.getCacheSize(e)}Zn(e,t){let r,i,o,s,a,c,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(o=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(l=Date.now(),ap()<=Vo.$b.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-h}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(c-a)+`ms\n\tRemoved ${g} documents in `+(l-c)+`ms\nTotal Duration: ${l-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g})))}}class gde{constructor(e,t){this.db=e,this.garbageCollector=function k3(n,e){return new pde(n,e)}(this,t)}Jn(e){const t=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Xn(e){let t=0;return this.Yn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Yn(e,t){return this.er(e,(r,i)=>t(i))}addReference(e,t,r){return nb(e,r)}removeReference(e,t,r){return nb(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return nb(e,t)}tr(e,t){return function(i,o){let s=!1;return O3(i).Y(a=>M3(i,a,o).next(c=>(c&&(s=!0),q.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.er(e,(s,a)=>{if(a<=t){const c=this.tr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,We.min()),Fl(e).delete([0,xi(s.path)])))});i.push(c)}}).next(()=>q.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return nb(e,t)}er(e,t){const r=Fl(e);let i,o=Bo.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{0===s?(o!==Bo.oe&&t(new Me(Aa(i)),o),o=l,i=c):o=Bo.oe}).next(()=>{o!==Bo.oe&&t(new Me(Aa(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nb(n,e){return Fl(n).put((i=n.currentSequenceNumber,{targetId:0,path:xi(e.path),sequenceNumber:i}));var i}class F3{constructor(){this.changes=new wc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mde{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Pd(e).put(r)}removeEntry(e,t,r){return Pd(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],YI(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.nr(e,r)))}getEntry(e,t){let r=jn.newInvalidDocument(t);return Pd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Py(t))},(i,o)=>{r=this.rr(t,o)}).next(()=>r)}ir(e,t){let r={size:0,document:jn.newInvalidDocument(t)};return Pd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Py(t))},(i,o)=>{r={document:this.rr(t,o),size:eb(o)}}).next(()=>r)}getEntries(e,t){let r=bo();return this.sr(e,t,(i,o)=>{const s=this.rr(i,o);r=r.insert(i,s)}).next(()=>r)}_r(e,t){let r=bo(),i=new Fn(Me.comparator);return this.sr(e,t,(o,s)=>{const a=this.rr(o,s);r=r.insert(o,a),i=i.insert(o,eb(s))}).next(()=>({documents:r,ar:i}))}sr(e,t,r){if(t.isEmpty())return q.resolve();let i=new vn(B3);t.forEach(c=>i=i.add(c));const o=IDBKeyRange.bound(Py(i.first()),Py(i.last())),s=i.getIterator();let a=s.getNext();return Pd(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{const g=Me.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&B3(a,g)<0;)r(a,null),a=s.getNext();a&&a.isEqual(g)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(Py(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),YI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pd(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=bo();for(const g of l){const _=this.rr(Me.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(py(t,_)||i.has(_.key))&&(h=h.insert(_.key,_))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=bo();const s=U3(t,r),a=U3(t,Uo.max());return Pd(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{const g=this.rr(Me.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(g.key,g),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new _de(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return V3(e).get("remoteDocumentGlobalKey").next(t=>(Ge(!!t),t))}nr(e,t){return V3(e).put("remoteDocumentGlobalKey",t)}rr(e,t){if(t){const r=function nde(n,e){let t;if(e.document)t=s3(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Me.fromSegments(e.noDocument.path),i=Id(e.noDocument.readTime);t=jn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Be();{const r=Me.fromSegments(e.unknownDocument.path),i=Id(e.unknownDocument.version);t=jn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const o=new Kn(i[0],i[1]);return We.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(We.min()))return r}return jn.newInvalidDocument(e)}}function L3(n){return new mde(n)}class _de extends F3{constructor(e,t){super(),this.ur=e,this.trackRemovals=t,this.cr=new wc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new vn((o,s)=>ut(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.cr.get(o);if(t.push(this.ur.removeEntry(e,o,a.readTime)),s.isValidDocument()){const c=p3(this.ur.serializer,s);i=i.add(o.path.popLast());const l=eb(c);r+=l-a.size,t.push(this.ur.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){const c=p3(this.ur.serializer,s.convertToNoDocument(We.min()));t.push(this.ur.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.ur.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.ur.updateMetadata(e,r)),q.waitFor(t)}getFromCache(e,t){return this.ur.ir(e,t).next(r=>(this.cr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ur._r(e,t).next(({documents:r,ar:i})=>(i.forEach((o,s)=>{this.cr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function V3(n){return Qr(n,"remoteDocumentGlobal")}function Pd(n){return Qr(n,"remoteDocumentsV14")}function Py(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function U3(n,e){const t=e.documentKey.path.toArray();return[n,YI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function B3(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ut(t[o],r[o]),i)return i;return i=ut(t.length,r.length),i||(i=ut(t[t.length-2],r[r.length-2]),i||ut(t[t.length-1],r[r.length-1]))}class yde{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class j3{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&yy(r.mutation,i,Io.empty(),Kn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,_t()).next(()=>r))}getLocalViewOfDocuments(e,t,r=_t()){const i=Pa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=gy();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=Pa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,_t()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=bo();const s=my(),a=my();return t.forEach((c,l)=>{const h=r.get(l.key);i.has(l.key)&&(void 0===h||h.mutation instanceof Ic)?o=o.insert(l.key,l):void 0!==h?(s.set(l.key,h.mutation.getFieldMask()),yy(h.mutation,l,h.mutation.getFieldMask(),Kn.now())):s.set(l.key,Io.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var g;return a.set(l,new yde(h,null!==(g=s.get(l))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,t){const r=my();let i=new Fn((s,a)=>s-a),o=_t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(c=>{const l=t.get(c);if(null===l)return;let h=r.get(c)||Io.empty();h=a.applyToLocalView(l,h),r.set(c,h);const g=(i.get(a.batchId)||_t()).add(c);i=i.insert(a.batchId,g)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,h=c.value,g=Dz();h.forEach(_=>{if(!o.has(_)){const v=Vz(t.get(_),r.get(_));null!==v&&g.set(_,v),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,g))}return q.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Me.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):$M(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var s}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):q.resolve(Pa());let a=-1,c=o;return s.next(l=>q.forEach(l,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),o.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(_=>{c=c.insert(h,_)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,_t())).next(h=>({batchId:a,changes:Pz(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Me(t)).next(r=>{let i=gy();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=gy();return this.indexManager.getCollectionParents(e,o).next(a=>q.forEach(a,c=>{const l=(g=t,_=c.child(o),new Cc(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((g,_)=>{s=s.insert(g,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{const h=l.getKey();null===s.get(h)&&(s=s.insert(h,jn.newInvalidDocument(h)))});let a=gy();return s.forEach((c,l)=>{const h=o.get(c);void 0!==h&&yy(h.mutation,l,Io.empty(),Kn.now()),py(t,l)&&(a=a.insert(c,l))}),a})}}class vde{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,t){return q.resolve(this.lr.get(t))}saveBundleMetadata(e,t){return this.lr.set(t.id,{id:(i=t).id,version:i.version,createTime:br(i.createTime)}),q.resolve();var i}getNamedQuery(e,t){return q.resolve(this.hr.get(t))}saveNamedQuery(e,t){return this.hr.set(t.name,{name:(i=t).name,query:tO(i.bundledQuery),readTime:br(i.readTime)}),q.resolve();var i}}class Ede{constructor(){this.overlays=new Fn(Me.comparator),this.Pr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Pa();return q.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),q.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Pr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Pr.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){const i=Pa(),o=t.length+1,s=new Me(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Fn((l,h)=>l-h);const s=this.overlays.getIterator();for(;s.hasNext();){const l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);null===h&&(h=Pa(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=Pa(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return q.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new KM(t,r));let o=this.Pr.get(t);void 0===o&&(o=_t(),this.Pr.set(t,o)),this.Pr.set(t,o.add(r.key))}}class Cde{constructor(){this.sessionToken=ur.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}class cO{constructor(){this.Ir=new vn(ri.Tr),this.Er=new vn(ri.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(e,t){const r=new ri(e,t);this.Ir=this.Ir.add(r),this.Er=this.Er.add(r)}Ar(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Rr(new ri(e,t))}Vr(e,t){e.forEach(r=>this.removeReference(r,t))}mr(e){const t=new Me(new Lt([])),r=new ri(t,e),i=new ri(t,e+1),o=[];return this.Er.forEachInRange([r,i],s=>{this.Rr(s),o.push(s.key)}),o}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Er=this.Er.delete(e)}pr(e){const t=new Me(new Lt([])),r=new ri(t,e),i=new ri(t,e+1);let o=_t();return this.Er.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new ri(e,0),r=this.Ir.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ri{constructor(e,t){this.key=e,this.yr=t}static Tr(e,t){return Me.comparator(e.key,t.key)||ut(e.yr,t.yr)}static dr(e,t){return ut(e.yr,t.yr)||Me.comparator(e.key,t.key)}}class wde{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.wr=1,this.Sr=new vn(ri.Tr)}checkEmpty(e){return q.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.wr;this.wr++;const s=new GM(o,t,r,i);this.mutationQueue.push(s);for(const a of i)this.Sr=this.Sr.add(new ri(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(s)}lookupMutationBatch(e,t){return q.resolve(this.br(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Dr(t+1),o=i<0?0:i;return q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(0===this.mutationQueue.length?-1:this.wr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ri(t,0),i=new ri(t,Number.POSITIVE_INFINITY),o=[];return this.Sr.forEachInRange([r,i],s=>{const a=this.br(s.yr);o.push(a)}),q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(ut);return t.forEach(i=>{const o=new ri(i,0),s=new ri(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([o,s],a=>{r=r.add(a.yr)})}),q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Me.isDocumentKey(o)||(o=o.child(""));const s=new ri(new Me(o),0);let a=new vn(ut);return this.Sr.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.yr)),!0)},s),q.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.br(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ge(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Sr;return q.forEach(t.mutations,i=>{const o=new ri(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,t){const r=new ri(t,0),i=this.Sr.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return q.resolve()}vr(e,t){return this.Dr(e)}Dr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}br(e){const t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ide{constructor(e){this.Fr=e,this.docs=new Fn(Me.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Fr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():jn.newInvalidDocument(t))}getEntries(e,t){let r=bo();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():jn.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=bo();const s=t.path,a=new Me(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||OM(U4(h),r)<=0||(i.has(h.key)||py(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return q.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Be()}Mr(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bde(this)}getSize(e){return q.resolve(this.size)}}class bde extends F3{constructor(e){super(),this.ur=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.ur.getEntry(e,t)}getAllFromCache(e,t){return this.ur.getEntries(e,t)}}class Tde{constructor(e){this.persistence=e,this.Or=new wc(t=>vd(t),hy),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new cO,this.targetCount=0,this.Br=Sd.Ln()}forEachTarget(e,t){return this.Or.forEach((r,i)=>t(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Nr&&(this.Nr=t),q.resolve()}Qn(e){this.Or.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Sd(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,t){return this.Qn(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Qn(t),q.resolve()}removeTargetData(e,t){return this.Or.delete(t.target),this.Lr.mr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Or.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Or.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(o).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const r=this.Or.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.Lr.Ar(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.Lr.Vr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),q.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Lr.mr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Lr.pr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.Lr.containsKey(t))}}class lO{constructor(e,t){this.kr={},this.overlays={},this.qr=new Bo(0),this.Qr=!1,this.Qr=!0,this.Kr=new Cde,this.referenceDelegate=e(this),this.$r=new Tde(this),this.indexManager=new ude,this.remoteDocumentCache=new Ide(r=>this.referenceDelegate.Ur(r)),this.serializer=new f3(t),this.Wr=new vde(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ede,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.kr[e.toKey()];return r||(r=new wde(t,this.referenceDelegate),this.kr[e.toKey()]=r),r}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(e,t,r){ye("MemoryPersistence","Starting transaction:",e);const i=new Ade(this.qr.next());return this.referenceDelegate.Gr(),r(i).next(o=>this.referenceDelegate.zr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}jr(e,t){return q.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,t)))}}class Ade extends j4{constructor(e){super(),this.currentSequenceNumber=e}}class rb{constructor(e){this.persistence=e,this.Hr=new cO,this.Jr=null}static Yr(e){return new rb(e)}get Zr(){if(this.Jr)return this.Jr;throw Be()}addReference(e,t,r){return this.Hr.addReference(r,t),this.Zr.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Hr.removeReference(r,t),this.Zr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.Zr.add(t.toString()),q.resolve()}removeTarget(e,t){this.Hr.mr(t.targetId).forEach(i=>this.Zr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Zr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Gr(){this.Jr=new Set}zr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Zr,r=>{const i=Me.fromPath(r);return this.Xr(e,i).next(o=>{o||t.removeEntry(i,We.min())})}).next(()=>(this.Jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Xr(e,t).next(r=>{r?this.Zr.delete(t.toString()):this.Zr.add(t.toString())})}Ur(e){return 0}Xr(e,t){return q.or([()=>q.resolve(this.Hr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.jr(e,t)])}}class Sde{constructor(e){this.serializer=e}O(e,t,r,i){const o=new NI("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",G4,{unique:!0}),c.createObjectStore("documentMutations"),$3(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=q.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),$3(e)),s=s.next(()=>function(c){const l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:We.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",G4,{unique:!0});const g=l.store("mutations"),_=h.map(v=>g.put(v));return q.waitFor(_)})}(e,o))),s=s.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.ti(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ni(o)))),r<7&&i>=7&&(s=s.next(()=>this.ri(o))),r<8&&i>=8&&(s=s.next(()=>this.ii(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.si(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(c){const l=c.createObjectStore("documentOverlays",{keyPath:uue});l.createIndex("collectionPathOverlayIndex",due,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",hue,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){const l=c.createObjectStore("remoteDocumentsV14",{keyPath:Xle});l.createIndex("documentKeyIndex",eue),l.createIndex("collectionGroupIndex",tue)}(e)).next(()=>this.oi(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this._i(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:sue}).createIndex("sequenceNumberIndex",aue,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:cue}).createIndex("documentKeyIndex",lue,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{!function(c){c.createObjectStore("globals",{keyPath:"name"})}(e)})),s}ni(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=eb(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ti(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>q.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>q.forEach(a,c=>{Ge(c.userId===o.userId);const l=bd(this.serializer,c);return D3(e,o.userId,l).next(()=>{})}))}))}ri(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.J((s,a)=>{const c=new Lt(s),l=[0,xi(c)];o.push(t.get(l).next(h=>h?q.resolve():t.put({targetId:0,path:xi(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>q.waitFor(o))})}ii(e,t){e.createObjectStore("collectionParents",{keyPath:oue});const r=t.store("collectionParents"),i=new aO,o=s=>{if(i.add(s)){const a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:xi(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{const c=new Lt(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{const h=Aa(a);return o(h.popLast())}))}si(e){const t=e.store("targets");return t.J((r,i)=>{const o=by(i),s=g3(this.serializer,o);return t.put(s)})}oi(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{const a=t.store("remoteDocumentsV14"),c=(g=s,g.document?new Me(Lt.fromString(g.document.name).popFirst(5)):g.noDocument?Me.fromSegments(g.noDocument.path):g.unknownDocument?Me.fromSegments(g.unknownDocument.path):Be()).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var g;i.push(a.put(l))}).next(()=>q.waitFor(i))}_i(e,t){const r=t.store("mutations"),i=L3(this.serializer),o=new lO(rb.Yr,this.serializer.ct);return r.U().next(s=>{const a=new Map;return s.forEach(c=>{var l;let h=null!==(l=a.get(c.userId))&&void 0!==l?l:_t();bd(this.serializer,c).keys().forEach(g=>h=h.add(g)),a.set(c.userId,h)}),q.forEach(a,(c,l)=>{const h=new ni(l),g=JI.lt(this.serializer,h),_=o.getIndexManager(h),v=tb.lt(h,this.serializer,_,o.referenceDelegate);return new j3(i,v,g,_).recalculateAndSaveOverlaysForDocumentKeys(new kM(t,Bo.oe),c).next()})})}}function $3(n){n.createObjectStore("targetDocuments",{keyPath:rue}).createIndex("documentTargetsIndex",iue,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nue,{unique:!0}),n.createObjectStore("targetGlobal")}const uO="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class dO{constructor(e,t,r,i,o,s,a,c,l,h,g=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ai=o,this.window=s,this.document=a,this.ui=l,this.ci=h,this.li=g,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.hi=null,this.inForeground=!1,this.Pi=null,this.Ii=null,this.Ti=Number.NEGATIVE_INFINITY,this.Ei=_=>Promise.resolve(),!dO.D())throw new ge(Y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gde(this,i),this.di=t+"main",this.serializer=new f3(c),this.Ai=new Ta(this.di,this.li,new Sde(this.serializer)),this.Kr=new ide,this.$r=new hde(this.referenceDelegate,this.serializer),this.remoteDocumentCache=L3(this.serializer),this.Wr=new rde,this.window&&this.window.localStorage?this.Ri=this.window.localStorage:(this.Ri=null,!1===h&&Ir("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Vi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(Y.FAILED_PRECONDITION,uO);return this.mi(),this.fi(),this.gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.$r.getHighestSequenceNumber(e))}).then(e=>{this.qr=new Bo(e,this.ui)}).then(()=>{this.Qr=!0}).catch(e=>(this.Ai&&this.Ai.close(),Promise.reject(e)))}pi(e){var t=this;return this.Ei=function(){var r=(0,ae.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ai.L(function(){var t=(0,ae.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ai.enqueueAndForget((0,ae.A)(function*(){t.started&&(yield t.Vi())})))}Vi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ob(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.yi(e).next(t=>{t||(this.isPrimary=!1,this.ai.enqueueRetryable(()=>this.Ei(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.Si(e).next(()=>!1):!!t&&this.bi(e).next(()=>!0))).catch(e=>{if(Al(e))return ye("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ye("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ai.enqueueRetryable(()=>this.Ei(e)),this.isPrimary=e})}yi(e){return Dy(e).get("owner").next(t=>q.resolve(this.Di(t)))}Ci(e){return ob(e).delete(this.clientId)}vi(){var e=this;return(0,ae.A)(function*(){if(e.isPrimary&&!e.Fi(e.Ti,18e5)){e.Ti=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Qr(r,"clientMetadata");return i.U().next(o=>{const s=e.Mi(o,18e5),a=o.filter(c=>-1===s.indexOf(c));return q.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ri)for(const r of t)e.Ri.removeItem(e.xi(r.clientId))}})()}gi(){this.Ii=this.ai.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Vi().then(()=>this.vi()).then(()=>this.gi()))}Di(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.ci?q.resolve(!0):Dy(e).get("owner").next(t=>{if(null!==t&&this.Fi(t.leaseTimestampMs,5e3)&&!this.Oi(t.ownerId)){if(this.Di(t)&&this.networkEnabled)return!0;if(!this.Di(t)){if(!t.allowTabSynchronization)throw new ge(Y.FAILED_PRECONDITION,uO);return!1}}return!(!this.networkEnabled||!this.inForeground)||ob(e).U().next(r=>void 0===this.Mi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ye("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ae.A)(function*(){e.Qr=!1,e.Ni(),e.Ii&&(e.Ii.cancel(),e.Ii=null),e.Li(),e.Bi(),yield e.Ai.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new kM(t,Bo.oe);return e.Si(r).next(()=>e.Ci(r))}),e.Ai.close(),e.ki()})()}Mi(e,t){return e.filter(r=>this.Fi(r.updateTimeMs,t)&&!this.Oi(r.clientId))}qi(){return this.runTransaction("getActiveClients","readonly",e=>ob(e).U().next(t=>this.Mi(t,18e5).map(r=>r.clientId)))}get started(){return this.Qr}getGlobalsCache(){return this.Kr}getMutationQueue(e,t){return tb.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dde(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return JI.lt(this.serializer,e)}getBundleCache(){return this.Wr}runTransaction(e,t,r){ye("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=17===(c=this.li)?gue:16===c?pue:15===c?xM:14===c?Y4:13===c?Q4:12===c?fue:11===c?K4:void Be();var c;let s;return this.Ai.runTransaction(e,i,o,a=>(s=new kM(a,this.qr?this.qr.next():Bo.oe),"readwrite-primary"===t?this.yi(s).next(c=>!!c||this.wi(s)).next(c=>{if(!c)throw Ir(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ai.enqueueRetryable(()=>this.Ei(!1)),new ge(Y.FAILED_PRECONDITION,B4);return r(s)}).next(c=>this.bi(s).next(()=>c)):this.Qi(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Qi(e){return Dy(e).get("owner").next(t=>{if(null!==t&&this.Fi(t.leaseTimestampMs,5e3)&&!this.Oi(t.ownerId)&&!this.Di(t)&&!(this.ci||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ge(Y.FAILED_PRECONDITION,uO)})}bi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dy(e).put("owner",t)}static D(){return Ta.D()}Si(e){const t=Dy(e);return t.get("owner").next(r=>this.Di(r)?(ye("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):q.resolve())}Fi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Ir(`Detected an update time that is in the future: ${e} > ${r}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Pi=()=>{this.ai.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Vi()))},this.document.addEventListener("visibilitychange",this.Pi),this.inForeground="visible"===this.document.visibilityState)}Li(){this.Pi&&(this.document.removeEventListener("visibilitychange",this.Pi),this.Pi=null)}fi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.hi=()=>{this.Ni();const t=/(?:Version|Mobile)\/1[456]/;(0,S.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ai.enterRestrictedMode(!0),this.ai.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.hi))}Bi(){this.hi&&(this.window.removeEventListener("pagehide",this.hi),this.hi=null)}Oi(e){var t;try{const r=null!==(null===(t=this.Ri)||void 0===t?void 0:t.getItem(this.xi(e)));return ye("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ir("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ni(){if(this.Ri)try{this.Ri.setItem(this.xi(this.clientId),String(Date.now()))}catch(e){Ir("Failed to set zombie client id.",e)}}ki(){if(this.Ri)try{this.Ri.removeItem(this.xi(this.clientId))}catch{}}xi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Dy(n){return Qr(n,"owner")}function ob(n){return Qr(n,"clientMetadata")}function hO(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class fO{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ki=r,this.$i=i}static Ui(e,t){let r=_t(),i=_t();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new fO(e,t.fromCache,r,i)}}class Pde{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class H3{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=(0,S.nr)()?8:$4((0,S.ZQ)())>0?6:4}initialize(e,t){this.Hi=e,this.indexManager=t,this.Wi=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.Ji(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Yi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new Pde;return this.Zi(e,t,s).next(a=>{if(o.result=a,this.Gi)return this.Xi(e,t,s,a.size)})}).next(()=>o.result)}Xi(e,t,r,i){return r.documentReadCount<this.zi?(ap()<=Vo.$b.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",mp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),q.resolve()):(ap()<=Vo.$b.DEBUG&&ye("QueryEngine","Query:",mp(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ji*i?(ap()<=Vo.$b.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",mp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ki(t))):q.resolve())}Ji(e,t){if(Cz(t))return q.resolve(null);let r=ki(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=HI(t,null,"F"),r=ki(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=_t(...o);return this.Hi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const l=this.es(t,a);return this.ts(t,l,s,c.readTime)?this.Ji(e,HI(t,null,"F")):this.ns(e,l,t,c)}))})))}Yi(e,t,r,i){return Cz(t)||i.isEqual(We.min())?q.resolve(null):this.Hi.getDocuments(e,r).next(o=>{const s=this.es(t,o);return this.ts(t,s,r,i)?q.resolve(null):(ap()<=Vo.$b.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mp(t)),this.ns(e,s,t,V4(i,-1)).next(a=>a))})}es(e,t){let r=new vn(Az(e));return t.forEach((i,o)=>{py(e,o)&&(r=r.add(o))}),r}ts(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Zi(e,t,r){return ap()<=Vo.$b.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",mp(t)),this.Hi.getDocumentsMatchingQuery(e,t,Uo.min(),r)}ns(e,t,r,i){return this.Hi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}class Dde{constructor(e,t,r,i){this.persistence=e,this.rs=t,this.serializer=i,this.ss=new Fn(ut),this.os=new wc(o=>vd(o),hy),this._s=new Map,this.us=e.getRemoteDocumentCache(),this.$r=e.getTargetCache(),this.Wr=e.getBundleCache(),this.cs(r)}cs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j3(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ss))}}function z3(n,e,t,r){return new Dde(n,e,t,r)}function q3(n,e){return pO.apply(this,arguments)}function pO(){return(pO=(0,ae.A)(function*(n,e){const t=Pe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.cs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let c=_t();for(const l of i){s.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}for(const l of o){a.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({ls:l,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function G3(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.$r.getLastRemoteSnapshotVersion(t))}function W3(n,e,t){let r=_t(),i=_t();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=bo();return t.forEach((a,c)=>{const l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(We.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):ye("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{hs:s,Ps:i}})}function Rde(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Sp(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.$r.getTargetData(r,e).next(o=>o?(i=o,q.resolve(i)):t.$r.allocateTargetId(r).next(s=>(i=new bc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.$r.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ss.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ss=t.ss.insert(r.targetId,r),t.os.set(e,r.targetId)),r})}function Pp(n,e,t){return gO.apply(this,arguments)}function gO(){return(gO=(0,ae.A)(function*(n,e,t){const r=Pe(n),i=r.ss.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Al(s))throw s;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ss=r.ss.remove(e),r.os.delete(i.target)})).apply(this,arguments)}function sb(n,e,t){const r=Pe(n);let i=We.min(),o=_t();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){const g=Pe(c),_=g.os.get(h);return void 0!==_?q.resolve(g.ss.get(_)):g.$r.getTargetData(l,h)}(r,s,ki(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.$r.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.rs.getDocumentsMatchingQuery(s,e,t?i:We.min(),t?o:_t())).next(a=>(Y3(r,Tz(e),a),{documents:a,Is:o})))}function K3(n,e){const t=Pe(n),r=Pe(t.$r),i=t.ss.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function Q3(n,e){const t=Pe(n),r=t._s.get(e)||We.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.us.getAllFromCollectionGroup(i,e,V4(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Y3(t,e,i),i))}function Y3(n,e,t){let r=n._s.get(e)||We.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n._s.set(e,r)}function mO(){return(mO=(0,ae.A)(function*(n,e,t,r){const i=Pe(n);let o=_t(),s=bo();for(const l of t){const h=e.Ts(l.metadata.name);l.document&&(o=o.add(h));const g=e.Es(l);g.setReadTime(e.ds(l.metadata.readTime)),s=s.insert(h,g)}const a=i.us.newChangeBuffer({trackRemovals:!0}),c=yield Sp(i,(h=r,ki(pp(Lt.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>W3(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.$r.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.$r.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.hs,h.Ps)).next(()=>h.hs)))})).apply(this,arguments)}function xde(n,e){return _O.apply(this,arguments)}function _O(){return(_O=(0,ae.A)(function*(n,e,t=_t()){const r=yield Sp(n,ki(tO(e.bundledQuery))),i=Pe(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=br(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Wr.saveNamedQuery(o,e);const a=r.withResumeToken(ur.EMPTY_BYTE_STRING,s);return i.ss=i.ss.insert(a.targetId,a),i.$r.updateTargetData(o,a).next(()=>i.$r.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.$r.addMatchingKeys(o,t,r.targetId)).next(()=>i.Wr.saveNamedQuery(o,e))})})).apply(this,arguments)}function J3(n,e){return`firestore_clients_${n}_${e}`}function Z3(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function yO(n,e){return`firestore_targets_${n}_${e}`}class ab{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static As(e,t,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new ge(i.error.code,i.error.message))),s?new ab(e,t,i.state,o):(Ir("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Rs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class My{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static As(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new ge(r.error.code,r.error.message))),o?new My(e,r.state,i):(Ir("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Rs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static As(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=zM();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=z4(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new cb(e,o):(Ir("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class vO{constructor(e,t){this.clientId=e,this.onlineState=t}static As(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new vO(t.clientId,t.onlineState):(Ir("SharedClientState",`Failed to parse online state: ${e}`),null)}}class EO{constructor(){this.activeTargetIds=zM()}Vs(e){this.activeTargetIds=this.activeTargetIds.add(e)}fs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Rs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CO{constructor(e,t,r,i,o){this.window=e,this.ai=t,this.persistenceKey=r,this.gs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ps=this.ys.bind(this),this.ws=new Fn(ut),this.started=!1,this.Ss=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.bs=J3(this.persistenceKey,this.gs),this.Ds=`firestore_sequence_number_${this.persistenceKey}`,this.ws=this.ws.insert(this.gs,new EO),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.vs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Fs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Ms=`firestore_online_state_${this.persistenceKey}`,this.xs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ps)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ae.A)(function*(){const t=yield e.syncEngine.qi();for(const i of t){if(i===e.gs)continue;const o=e.getItem(J3(e.persistenceKey,i));if(o){const s=cb.As(i,o);s&&(e.ws=e.ws.insert(s.clientId,s))}}e.Os();const r=e.storage.getItem(e.Ms);if(r){const i=e.Ns(r);i&&e.Ls(i)}for(const i of e.Ss)e.ys(i);e.Ss=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ds,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Bs(this.ws)}isActiveQueryTarget(e){let t=!1;return this.ws.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ks(e,"pending")}updateMutationState(e,t,r){this.ks(e,t,r),this.qs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(yO(this.persistenceKey,e));if(r){const i=My.As(e,r);i&&(t=i.state)}}return this.Qs.Vs(e),this.Os(),t}removeLocalQueryTarget(e){this.Qs.fs(e),this.Os()}isLocalQueryTarget(e){return this.Qs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(yO(this.persistenceKey,e))}updateQueryState(e,t,r){this.Ks(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.$s(e)}notifyBundleLoaded(e){this.Us(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ps),this.removeItem(this.bs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ye("SharedClientState","READ",e,t),t}setItem(e,t){ye("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ye("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ys(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ye("SharedClientState","EVENT",r.key,r.newValue),r.key===this.bs)return void Ir("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ai.enqueueRetryable((0,ae.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Ws(r.key);return t.Gs(i,null)}{const i=t.zs(r.key,r.newValue);if(i)return t.Gs(i.clientId,i)}}else if(t.vs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Js(r.key,r.newValue);if(i)return t.Ys(i)}}else if(r.key===t.Ms){if(null!==r.newValue){const i=t.Ns(r.newValue);if(i)return t.Ls(i)}}else if(r.key===t.Ds){const i=function(s){let a=Bo.oe;if(null!=s)try{const c=JSON.parse(s);Ge("number"==typeof c),a=c}catch(c){Ir("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==Bo.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.xs){const i=t.Zs(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Xs(o)))}}else t.Ss.push(r)}))}}get Qs(){return this.ws.get(this.gs)}Os(){this.setItem(this.bs,this.Qs.Rs())}ks(e,t,r){const i=new ab(this.currentUser,e,t,r),o=Z3(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Rs())}qs(e){const t=Z3(this.persistenceKey,this.currentUser,e);this.removeItem(t)}$s(e){this.storage.setItem(this.Ms,JSON.stringify({clientId:this.gs,onlineState:e}))}Ks(e,t,r){const i=yO(this.persistenceKey,e),o=new My(e,t,r);this.setItem(i,o.Rs())}Us(e){const t=JSON.stringify(Array.from(e));this.setItem(this.xs,t)}Ws(e){const t=this.Cs.exec(e);return t?t[1]:null}zs(e,t){const r=this.Ws(e);return cb.As(r,t)}js(e,t){const r=this.vs.exec(e),i=Number(r[1]);return ab.As(new ni(void 0!==r[2]?r[2]:null),i,t)}Js(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return My.As(i,t)}Ns(e){return vO.As(e)}Zs(e){return JSON.parse(e)}Hs(e){var t=this;return(0,ae.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.eo(e.batchId,e.state,e.error);ye("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ys(e){return this.syncEngine.no(e.targetId,e.state,e.error)}Gs(e,t){const r=t?this.ws.insert(e,t):this.ws.remove(e),i=this.Bs(this.ws),o=this.Bs(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.ro(s,a).then(()=>{this.ws=r})}Ls(e){this.ws.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Bs(e){let t=zM();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class X3{constructor(){this.io=new EO,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.io.Vs(e),this.so[e]||"not-current"}updateQueryState(e,t,r){this.so[e]=t}removeLocalQueryTarget(e){this.io.fs(e)}isLocalQueryTarget(e){return this.io.activeTargetIds.has(e)}clearQueryState(e){delete this.so[e]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(e){return this.io.activeTargetIds.has(e)}start(){return this.io=new EO,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class kde{oo(e){}shutdown(){}}class eq{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(e){this.lo.push(e)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.lo)e(0)}co(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.lo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let lb=null;function wO(){return null===lb?lb=268435456+Math.round(2147483648*Math.random()):lb++,"0x"+lb.toString(16)}const Fde={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Lde{constructor(e){this.Po=e.Po,this.Io=e.Io}To(e){this.Eo=e}Ao(e){this.Ro=e}Vo(e){this.mo=e}onMessage(e){this.fo=e}close(){this.Io()}send(e){this.Po(e)}po(){this.Eo()}yo(){this.Ro()}wo(e){this.mo(e)}So(e){this.fo(e)}}const Li="WebChannelConnection";class Vde extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.bo=r+"://"+t.host,this.Do=`projects/${i}/databases/${o}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get vo(){return!1}Fo(t,r,i,o,s){const a=wO(),c=this.Mo(t,r.toUriEncodedString());ye("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const l={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(l,o,s),this.Oo(t,c,l,i).then(h=>(ye("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw wo("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}No(t,r,i,o,s,a){return this.Fo(t,r,i,o,s)}xo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+sp,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}Mo(t,r){return`${this.bo}/v1/${r}:${Fde[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Oo(e,t,r,i){const o=wO();return new Promise((s,a)=>{const c=new S4;c.setWithCredentials(!0),c.listenOnce(D4.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case RI.NO_ERROR:const h=c.getResponseJson();ye(Li,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case RI.TIMEOUT:ye(Li,`RPC '${e}' ${o} timed out`),a(new ge(Y.DEADLINE_EXCEEDED,"Request time out"));break;case RI.HTTP_ERROR:const g=c.getStatus();if(ye(Li,`RPC '${e}' ${o} failed with status:`,g,"response text:",c.getResponseText()),g>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const v=_?.error;if(v&&v.status&&v.message){const w=function(A){const N=A.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(N)>=0?N:Y.UNKNOWN}(v.status);a(new ge(w,v.message))}else a(new ge(Y.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new ge(Y.UNAVAILABLE,"Connection failed."));break;default:Be()}}finally{ye(Li,`RPC '${e}' ${o} completed.`)}});const l=JSON.stringify(i);ye(Li,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Lo(e,t,r){const i=wO(),o=[this.bo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=R4(),a=O4(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new P4({})),this.xo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const h=o.join("");ye(Li,`Creating RPC '${e}' stream ${i}: ${h}`,c);const g=s.createWebChannel(h,c);let _=!1,v=!1;const w=new Lde({Po:A=>{v?ye(Li,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(_||(ye(Li,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),ye(Li,`RPC '${e}' stream ${i} sending:`,A),g.send(A))},Io:()=>g.close()}),b=(A,N,R)=>{A.listen(N,V=>{try{R(V)}catch(ie){setTimeout(()=>{throw ie},0)}})};return b(g,ny.EventType.OPEN,()=>{v||(ye(Li,`RPC '${e}' stream ${i} transport opened.`),w.po())}),b(g,ny.EventType.CLOSE,()=>{v||(v=!0,ye(Li,`RPC '${e}' stream ${i} transport closed`),w.wo())}),b(g,ny.EventType.ERROR,A=>{v||(v=!0,wo(Li,`RPC '${e}' stream ${i} transport errored:`,A),w.wo(new ge(Y.UNAVAILABLE,"The operation could not be completed")))}),b(g,ny.EventType.MESSAGE,A=>{var N;if(!v){const R=A.data[0];Ge(!!R);const ie=R.error||(null===(N=R[0])||void 0===N?void 0:N.error);if(ie){ye(Li,`RPC '${e}' stream ${i} received error:`,ie);const be=ie.status;let Ae=function(F){const B=Vr[F];if(void 0!==B)return qz(B)}(be),x=ie.message;void 0===Ae&&(Ae=Y.INTERNAL,x="Unknown error status: "+be+" with message "+ie.message),v=!0,w.wo(new ge(Ae,x)),g.close()}else ye(Li,`RPC '${e}' stream ${i} received:`,R),w.So(R)}}),b(a,M4.STAT_EVENT,A=>{A.stat===PM.PROXY?ye(Li,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===PM.NOPROXY&&ye(Li,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.yo()},0),w}}function tq(){return typeof window<"u"?window:null}function ub(){return typeof document<"u"?document:null}function Oy(n){return new Gue(n,!0)}class IO{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ai=e,this.timerId=t,this.Bo=r,this.ko=i,this.qo=o,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(e){this.cancel();const t=Math.floor(this.Qo+this.Go()),r=Math.max(0,Date.now()-this.$o),i=Math.max(0,t-r);i>0&&ye("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Qo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,i,()=>(this.$o=Date.now(),e())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){null!==this.Ko&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){null!==this.Ko&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}}class nq{constructor(e,t,r,i,o,s,a,c){this.ai=e,this.jo=r,this.Ho=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new IO(e,t)}t_(){return 1===this.state||5===this.state||this.n_()}n_(){return 2===this.state||3===this.state}start(){this.Xo=0,4!==this.state?this.auth():this.r_()}stop(){var e=this;return(0,ae.A)(function*(){e.t_()&&(yield e.close(0))})()}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&null===this.Yo&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(e){this.a_(),this.stream.send(e)}o_(){var e=this;return(0,ae.A)(function*(){if(e.n_())return e.close(0)})()}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}close(e,t){var r=this;return(0,ae.A)(function*(){r.a_(),r.u_(),r.e_.cancel(),r.Jo++,4!==e?r.e_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(Ir(t.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),r.e_.Uo()):t&&t.code===Y.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.c_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Vo(t)})()}c_(){}auth(){this.state=1;const e=this.l_(this.Jo),t=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Jo===t&&this.h_(r,i)},r=>{e(()=>{const i=new ge(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.P_(i)})})}h_(e,t){const r=this.l_(this.Jo);this.stream=this.I_(e,t),this.stream.To(()=>{r(()=>this.listener.To())}),this.stream.Ao(()=>{r(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(i=>{r(()=>this.P_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.Xo?this.T_(i):this.onNext(i))})}r_(){var e=this;this.state=5,this.e_.Wo((0,ae.A)(function*(){e.state=0,e.start()}))}P_(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}l_(e){return t=>{this.ai.enqueueAndForget(()=>this.Jo===e?t():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ude extends nq{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}I_(e,t){return this.connection.Lo("Listen",e,t)}T_(e){return this.onNext(e)}onNext(e){this.e_.reset();const t=function Que(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Be(),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Ge(void 0===h||"string"==typeof h),ur.fromBase64String(h||"")):(Ge(void 0===h||h instanceof Buffer||h instanceof Uint8Array),ur.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){const h=void 0===l.code?Y.UNKNOWN:qz(l.code);return new ge(h,l.message||"")}(s);t=new Yz(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Da(n,r.document.name),o=br(r.document.updateTime),s=r.document.createTime?br(r.document.createTime):We.min(),a=new pi({mapValue:{fields:r.document.fields}}),c=jn.newFoundDocument(i,o,s,a);t=new KI(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=Da(n,r.document),o=r.readTime?br(r.readTime):We.min(),s=jn.newNoDocument(i,o);t=new KI([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=Da(n,r.document);t=new KI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Be();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new Bue(i,o);t=new Qz(r.targetId,s)}}var l;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return We.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?We.min():s.readTime?br(s.readTime):We.min()}(e);return this.listener.E_(t,r)}d_(e){const t={};t.database=XM(this.serializer),t.addTarget=function(o,s){let a;const c=s.target;if(a=jI(c)?{documents:a3(o,c)}:{query:QI(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=e3(o,s.resumeToken);const l=YM(o,s.expectedCount);null!==l&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(We.min())>0){a.readTime=Cp(o,s.snapshotVersion.toTimestamp());const l=YM(o,s.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function Jue(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.__(t)}A_(e){const t={};t.database=XM(this.serializer),t.removeTarget=e,this.__(t)}}class Bde extends nq{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(e,t){return this.connection.Lo("Write",e,t)}T_(e){return Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||0===e.writeResults.length),this.listener.m_()}onNext(e){Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.e_.reset();const t=function Yue(n,e){return n&&n.length>0?(Ge(void 0!==e),n.map(t=>function(i,o){let s=br(i.updateTime?i.updateTime:o);return s.isEqual(We.min())&&(s=br(o)),new Lue(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=br(e.commitTime);return this.listener.f_(r,t)}g_(){const e={};e.database=XM(this.serializer),this.__(e)}V_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Iy(this.serializer,r))};this.__(t)}}class jde extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.p_=!1}y_(){if(this.p_)throw new ge(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(e,t,r,i){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Fo(e,ZM(t,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(Y.UNKNOWN,o.toString())})}No(e,t,r,i,o){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.No(e,ZM(t,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ge(Y.UNKNOWN,s.toString())})}terminate(){this.p_=!0,this.connection.terminate()}}class $de{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){0===this.w_&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(e){"Online"===this.state?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.M_(),this.w_=0,"Online"===e&&(this.b_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}v_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(Ir(t),this.b_=!1):ye("OnlineStateTracker",t)}M_(){null!==this.S_&&(this.S_.cancel(),this.S_=null)}}class Hde{constructor(e,t,r,i,o){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=o,this.B_.oo(a=>{r.enqueueAndForget((0,ae.A)(function*(){var c;Ll(s)&&(ye("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,ae.A)(function*(h){const g=Pe(h);g.N_.add(4),yield Dp(g),g.k_.set("Unknown"),g.N_.delete(4),yield Ry(g)}),function l(h){return c.apply(this,arguments)})(s))}))}),this.k_=new $de(r,i)}}function Ry(n){return bO.apply(this,arguments)}function bO(){return(bO=(0,ae.A)(function*(n){if(Ll(n))for(const e of n.L_)yield e(!0)})).apply(this,arguments)}function Dp(n){return TO.apply(this,arguments)}function TO(){return(TO=(0,ae.A)(function*(n){for(const e of n.L_)yield e(!1)})).apply(this,arguments)}function db(n,e){const t=Pe(n);t.O_.has(e.targetId)||(t.O_.set(e.targetId,e),PO(t)?SO(t):Rp(t).n_()&&AO(t,e))}function Mp(n,e){const t=Pe(n),r=Rp(t);t.O_.delete(e),r.n_()&&rq(t,e),0===t.O_.size&&(r.n_()?r.s_():Ll(t)&&t.k_.set("Unknown"))}function AO(n,e){if(n.q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(We.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rp(n).d_(e)}function rq(n,e){n.q_.xe(e),Rp(n).A_(e)}function SO(n){n.q_=new $ue({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.O_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Rp(n).start(),n.k_.D_()}function PO(n){return Ll(n)&&!Rp(n).t_()&&n.O_.size>0}function Ll(n){return 0===Pe(n).N_.size}function iq(n){n.q_=void 0}function zde(n){return DO.apply(this,arguments)}function DO(){return(DO=(0,ae.A)(function*(n){n.k_.set("Online")})).apply(this,arguments)}function qde(n){return MO.apply(this,arguments)}function MO(){return(MO=(0,ae.A)(function*(n){n.O_.forEach((e,t)=>{AO(n,e)})})).apply(this,arguments)}function Gde(n,e){return OO.apply(this,arguments)}function OO(){return(OO=(0,ae.A)(function*(n,e){iq(n),PO(n)?(n.k_.F_(e),SO(n)):n.k_.set("Unknown")})).apply(this,arguments)}function Wde(n,e,t){return RO.apply(this,arguments)}function RO(){return RO=(0,ae.A)(function*(n,e,t){if(n.k_.set("Online"),e instanceof Yz&&2===e.state&&e.cause)try{yield(r=(0,ae.A)(function*(o,s){const a=s.cause;for(const c of s.targetIds)o.O_.has(c)&&(yield o.remoteSyncer.rejectListen(c,a),o.O_.delete(c),o.q_.removeTarget(c))}),function i(o,s){return r.apply(this,arguments)})(n,e)}catch(r){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield hb(n,r)}else if(e instanceof KI?n.q_.Ke(e):e instanceof Qz?n.q_.He(e):n.q_.We(e),!t.isEqual(We.min()))try{const r=yield G3(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){const a=o.q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const h=o.O_.get(l);h&&o.O_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{const h=o.O_.get(c);if(!h)return;o.O_.set(c,h.withResumeToken(ur.EMPTY_BYTE_STRING,h.snapshotVersion)),rq(o,c);const g=new bc(h.target,c,l,h.sequenceNumber);AO(o,g)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ye("RemoteStore","Failed to raise snapshot:",r),yield hb(n,r)}var r}),RO.apply(this,arguments)}function hb(n,e,t){return NO.apply(this,arguments)}function NO(){return(NO=(0,ae.A)(function*(n,e,t){if(!Al(e))throw e;n.N_.add(1),yield Dp(n),n.k_.set("Offline"),t||(t=()=>G3(n.localStore)),n.asyncQueue.enqueueRetryable((0,ae.A)(function*(){ye("RemoteStore","Retrying IndexedDB access"),yield t(),n.N_.delete(1),yield Ry(n)}))})).apply(this,arguments)}function oq(n,e){return e().catch(t=>hb(n,t,e))}function Op(n){return xO.apply(this,arguments)}function xO(){return(xO=(0,ae.A)(function*(n){const e=Pe(n),t=Vl(e);let r=e.x_.length>0?e.x_[e.x_.length-1].batchId:-1;for(;Kde(e);)try{const i=yield Rde(e.localStore,r);if(null===i){0===e.x_.length&&t.s_();break}r=i.batchId,Qde(e,i)}catch(i){yield hb(e,i)}sq(e)&&aq(e)})).apply(this,arguments)}function Kde(n){return Ll(n)&&n.x_.length<10}function Qde(n,e){n.x_.push(e);const t=Vl(n);t.n_()&&t.R_&&t.V_(e.mutations)}function sq(n){return Ll(n)&&!Vl(n).t_()&&n.x_.length>0}function aq(n){Vl(n).start()}function Yde(n){return kO.apply(this,arguments)}function kO(){return(kO=(0,ae.A)(function*(n){Vl(n).g_()})).apply(this,arguments)}function Jde(n){return FO.apply(this,arguments)}function FO(){return(FO=(0,ae.A)(function*(n){const e=Vl(n);for(const t of n.x_)e.V_(t.mutations)})).apply(this,arguments)}function Zde(n,e,t){return LO.apply(this,arguments)}function LO(){return(LO=(0,ae.A)(function*(n,e,t){const r=n.x_.shift(),i=WM.from(r,e,t);yield oq(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Op(n)})).apply(this,arguments)}function Xde(n,e){return VO.apply(this,arguments)}function VO(){return VO=(0,ae.A)(function*(n,e){var t;e&&Vl(n).R_&&(yield(t=(0,ae.A)(function*(i,o){if(zz(a=o.code)&&a!==Y.ABORTED){const s=i.x_.shift();Vl(i).i_(),yield oq(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield Op(i)}var a}),function r(i,o){return t.apply(this,arguments)})(n,e)),sq(n)&&aq(n)}),VO.apply(this,arguments)}function cq(n,e){return UO.apply(this,arguments)}function UO(){return(UO=(0,ae.A)(function*(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");const r=Ll(t);t.N_.add(3),yield Dp(t),r&&t.k_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.N_.delete(3),yield Ry(t)})).apply(this,arguments)}function BO(n,e){return jO.apply(this,arguments)}function jO(){return(jO=(0,ae.A)(function*(n,e){const t=Pe(n);e?(t.N_.delete(2),yield Ry(t)):e||(t.N_.add(2),yield Dp(t),t.k_.set("Unknown"))})).apply(this,arguments)}function Rp(n){return n.Q_||(n.Q_=function(t,r,i){const o=Pe(t);return o.y_(),new Ude(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{To:zde.bind(null,n),Ao:qde.bind(null,n),Vo:Gde.bind(null,n),E_:Wde.bind(null,n)}),n.L_.push(function(){var e=(0,ae.A)(function*(t){t?(n.Q_.i_(),PO(n)?SO(n):n.k_.set("Unknown")):(yield n.Q_.stop(),iq(n))});return function(t){return e.apply(this,arguments)}}())),n.Q_}function Vl(n){return n.K_||(n.K_=function(t,r,i){const o=Pe(t);return o.y_(),new Bde(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{To:()=>Promise.resolve(),Ao:Yde.bind(null,n),Vo:Xde.bind(null,n),m_:Jde.bind(null,n),f_:Zde.bind(null,n)}),n.L_.push(function(){var e=(0,ae.A)(function*(t){t?(n.K_.i_(),yield Op(n)):(yield n.K_.stop(),n.x_.length>0&&(ye("RemoteStore",`Stopping write stream with ${n.x_.length} pending writes`),n.x_=[]))});return function(t){return e.apply(this,arguments)}}())),n.K_}class $O{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new $O(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ge(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Np(n,e){if(Ir("AsyncQueue",`${e}: ${n}`),Al(n))return new ge(Y.UNAVAILABLE,`${e}: ${n}`);throw n}class xp{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Me.comparator(t.key,r.key):(t,r)=>Me.comparator(t.key,r.key),this.keyedMap=gy(),this.sortedSet=new Fn(this.comparator)}static emptySet(e){return new xp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new xp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class lq{constructor(){this.U_=new Fn(Me.comparator)}track(e){const t=e.doc.key,r=this.U_.get(t);r?0!==e.type&&3===r.type?this.U_=this.U_.insert(t,e):3===e.type&&1!==r.type?this.U_=this.U_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.U_=this.U_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.U_=this.U_.remove(t):1===e.type&&2===r.type?this.U_=this.U_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):Be():this.U_=this.U_.insert(t,e)}W_(){const e=[];return this.U_.inorderTraversal((t,r)=>{e.push(r)}),e}}class kp{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new kp(e,t,xp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class ehe{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(e=>e.H_())}}class the{constructor(){this.queries=uq(),this.onlineState="Unknown",this.J_=new Set}terminate(){!function(t,r){const i=Pe(t),o=i.queries;i.queries=uq(),o.forEach((s,a)=>{for(const c of a.z_)c.onError(r)})}(this,new ge(Y.ABORTED,"Firestore shutting down"))}}function uq(){return new wc(n=>bz(n),fy)}function HO(n,e){return zO.apply(this,arguments)}function zO(){return(zO=(0,ae.A)(function*(n,e){const t=Pe(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.j_()&&e.H_()&&(r=2):(o=new ehe,r=e.H_()?0:1);try{switch(r){case 0:o.G_=yield t.onListen(i,!0);break;case 1:o.G_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){const a=Np(s,`Initialization of query '${mp(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.z_.push(e),e.Y_(t.onlineState),o.G_&&e.Z_(o.G_)&&WO(t)})).apply(this,arguments)}function qO(n,e){return GO.apply(this,arguments)}function GO(){return(GO=(0,ae.A)(function*(n,e){const t=Pe(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const s=o.z_.indexOf(e);s>=0&&(o.z_.splice(s,1),0===o.z_.length?i=e.H_()?0:1:!o.j_()&&e.H_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function nhe(n,e){const t=Pe(n);let r=!1;for(const i of e){const s=t.queries.get(i.query);if(s){for(const a of s.z_)a.Z_(i)&&(r=!0);s.G_=i}}r&&WO(t)}function rhe(n,e,t){const r=Pe(n),i=r.queries.get(e);if(i)for(const o of i.z_)o.onError(t);r.queries.delete(e)}function WO(n){n.J_.forEach(e=>{e.next()})}var KO,dq;(dq=KO||(KO={})).X_="default",dq.Cache="cache";class QO{constructor(e,t,r){this.query=e,this.ea=t,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=r||{}}Z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new kp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ta?this.ra(e)&&(this.ea.next(e),t=!0):this.ia(e,this.onlineState)&&(this.sa(e),t=!0),this.na=e,t}onError(e){this.ea.error(e)}Y_(e){this.onlineState=e;let t=!1;return this.na&&!this.ta&&this.ia(this.na,e)&&(this.sa(this.na),t=!0),t}ia(e,t){return!e.fromCache||!this.H_()||(!this.options.oa||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ra(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.na&&this.na.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}sa(e){e=kp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ta=!0,this.ea.next(e)}H_(){return this.options.source!==KO.Cache}}class ihe{constructor(e,t){this._a=e,this.byteLength=t}aa(){return"metadata"in this._a}}class hq{constructor(e){this.serializer=e}Ts(e){return Da(this.serializer,e)}Es(e){return e.metadata.exists?s3(this.serializer,e.document,!1):jn.newNoDocument(this.Ts(e.metadata.name),this.ds(e.metadata.readTime))}ds(e){return br(e)}}class ohe{constructor(e,t,r){this.ua=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fq(e)}ca(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e._a.namedQuery)this.queries.push(e._a.namedQuery);else if(e._a.documentMetadata){this.documents.push({metadata:e._a.documentMetadata}),e._a.documentMetadata.exists||++t;const r=Lt.fromString(e._a.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e._a.document&&(this.documents[this.documents.length-1].document=e._a.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}la(e){const t=new Map,r=new hq(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Ts(i.metadata.name);for(const s of i.metadata.queries){const a=(t.get(s)||_t()).add(o);t.set(s,a)}}return t}complete(){var e=this;return(0,ae.A)(function*(){const t=yield function Nde(n,e,t,r){return mO.apply(this,arguments)}(e.localStore,new hq(e.serializer),e.documents,e.ua.id),r=e.la(e.documents);for(const i of e.queries)yield xde(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ha:e.collectionGroups,Pa:t}})()}}function fq(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class pq{constructor(e){this.key=e}}class gq{constructor(e){this.key=e}}class mq{constructor(e,t){this.query=e,this.Ia=t,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=_t(),this.mutatedKeys=_t(),this.da=Az(e),this.Aa=new xp(this.da)}get Ra(){return this.Ia}Va(e,t){const r=t?t.ma:new lq,i=t?t.Aa:this.Aa;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const _=i.get(h),v=py(this.query,g)?g:null,w=!!_&&this.mutatedKeys.has(_.key),b=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let A=!1;_&&v?_.data.isEqual(v.data)?w!==b&&(r.track({type:3,doc:v}),A=!0):this.fa(_,v)||(r.track({type:2,doc:v}),A=!0,(c&&this.da(v,c)>0||l&&this.da(v,l)<0)&&(a=!0)):!_&&v?(r.track({type:0,doc:v}),A=!0):_&&!v&&(r.track({type:1,doc:_}),A=!0,(c||l)&&(a=!0)),A&&(v?(s=s.add(v),o=b?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const h="F"===this.query.limitType?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Aa:s,ma:r,ts:a,mutatedKeys:o}}fa(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.Aa;this.Aa=e.Aa,this.mutatedKeys=e.mutatedKeys;const s=e.ma.W_();s.sort((h,g)=>function(v,w){const b=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be()}};return b(v)-b(w)}(h.type,g.type)||this.da(h.doc,g.doc)),this.ga(r),i=null!=i&&i;const a=t&&!i?this.pa():[],c=0===this.Ea.size&&this.current&&!i?1:0,l=c!==this.Ta;return this.Ta=c,0!==s.length||l?{snapshot:new kp(this.query,e.Aa,o,s,e.mutatedKeys,0===c,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ya:a}:{ya:a}}Y_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new lq,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(e){return!this.Ia.has(e)&&!!this.Aa.has(e)&&!this.Aa.get(e).hasLocalMutations}ga(e){e&&(e.addedDocuments.forEach(t=>this.Ia=this.Ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ia=this.Ia.delete(t)),this.current=e.current)}pa(){if(!this.current)return[];const e=this.Ea;this.Ea=_t(),this.Aa.forEach(r=>{this.wa(r.key)&&(this.Ea=this.Ea.add(r.key))});const t=[];return e.forEach(r=>{this.Ea.has(r)||t.push(new gq(r))}),this.Ea.forEach(r=>{e.has(r)||t.push(new pq(r))}),t}Sa(e){this.Ia=e.Is,this.Ea=_t();const t=this.Va(e.documents);return this.applyChanges(t,!0)}ba(){return kp.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,0===this.Ta,this.hasCachedResults)}}class she{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ahe{constructor(e){this.key=e,this.Da=!1}}class che{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.va=new wc(a=>bz(a),fy),this.Fa=new Map,this.Ma=new Set,this.xa=new Fn(Me.comparator),this.Oa=new Map,this.Na=new cO,this.La={},this.Ba=new Map,this.ka=Sd.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return!0===this.qa}}function lhe(n,e){return YO.apply(this,arguments)}function YO(){return(YO=(0,ae.A)(function*(n,e,t=!0){const r=fb(n);let i;const o=r.va.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ba()):i=yield _q(r,e,t,!0),i})).apply(this,arguments)}function uhe(n,e){return JO.apply(this,arguments)}function JO(){return(JO=(0,ae.A)(function*(n,e){const t=fb(n);yield _q(t,e,!0,!1)})).apply(this,arguments)}function _q(n,e,t,r){return ZO.apply(this,arguments)}function ZO(){return(ZO=(0,ae.A)(function*(n,e,t,r){const i=yield Sp(n.localStore,ki(e)),o=i.targetId,s=t?n.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=yield XO(n,e,o,"current"===s,i.resumeToken)),n.isPrimaryClient&&t&&db(n.remoteStore,i),a})).apply(this,arguments)}function XO(n,e,t,r,i){return eR.apply(this,arguments)}function eR(){return eR=(0,ae.A)(function*(n,e,t,r,i){n.Qa=(g,_,v)=>{return(w=(0,ae.A)(function*(A,N,R,V){let ie=N.view.Va(R);ie.ts&&(ie=yield sb(A.localStore,N.query,!1).then(({documents:P})=>N.view.Va(P,ie)));const be=V&&V.targetChanges.get(N.targetId),Ae=V&&null!=V.targetMismatches.get(N.targetId),x=N.view.applyChanges(ie,A.isPrimaryClient,be,Ae);return dR(A,N.targetId,x.ya),x.snapshot}),function b(A,N,R,V){return w.apply(this,arguments)})(n,g,_,v);var w};const o=yield sb(n.localStore,e,!0),s=new mq(e,o.Is),a=s.Va(o.documents),c=Cy.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=s.applyChanges(a,n.isPrimaryClient,c);dR(n,t,l.ya);const h=new she(e,t,s);return n.va.set(e,h),n.Fa.has(t)?n.Fa.get(t).push(e):n.Fa.set(t,[e]),l.snapshot}),eR.apply(this,arguments)}function dhe(n,e,t){return tR.apply(this,arguments)}function tR(){return(tR=(0,ae.A)(function*(n,e,t){const r=Pe(n),i=r.va.get(e),o=r.Fa.get(i.targetId);if(o.length>1)return r.Fa.set(i.targetId,o.filter(s=>!fy(s,e))),void r.va.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Pp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Mp(r.remoteStore,i.targetId),Fp(r,i.targetId)}).catch(Tl))):(Fp(r,i.targetId),yield Pp(r.localStore,i.targetId,!0))})).apply(this,arguments)}function hhe(n,e){return nR.apply(this,arguments)}function nR(){return(nR=(0,ae.A)(function*(n,e){const t=Pe(n),r=t.va.get(e),i=t.Fa.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Mp(t.remoteStore,r.targetId))})).apply(this,arguments)}function rR(){return(rR=(0,ae.A)(function*(n,e,t){const r=wR(n);try{const i=yield function(s,a){const c=Pe(s),l=Kn.now(),h=a.reduce((v,w)=>v.add(w.key),_t());let g,_;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=bo(),b=_t();return c.us.getEntries(v,h).next(A=>{w=A,w.forEach((N,R)=>{R.isValidDocument()||(b=b.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,w)).next(A=>{g=A;const N=[];for(const R of a){const V=Uue(R,g.get(R.key).overlayedDocument);null!=V&&N.push(new Ic(R.key,V,cz(V.value.mapValue),Qn.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,N,a)}).next(A=>{_=A;const N=A.applyToLocalDocumentSet(g,b);return c.documentOverlayCache.saveOverlays(v,A.batchId,N)})}).then(()=>({batchId:_.batchId,changes:Pz(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.La[s.currentUser.toKey()];l||(l=new Fn(ut)),l=l.insert(a,c),s.La[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Tc(r,i.changes),yield Op(r.remoteStore)}catch(i){const o=Np(i,"Failed to persist write");t.reject(o)}})).apply(this,arguments)}function yq(n,e){return iR.apply(this,arguments)}function iR(){return(iR=(0,ae.A)(function*(n,e){const t=Pe(n);try{const r=yield function Ode(n,e){const t=Pe(n),r=e.snapshotVersion;let i=t.ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.us.newChangeBuffer({trackRemovals:!0});i=t.ss;const a=[];e.targetChanges.forEach((h,g)=>{const _=i.get(g);if(!_)return;a.push(t.$r.removeMatchingKeys(o,h.removedDocuments,g).next(()=>t.$r.addMatchingKeys(o,h.addedDocuments,g)));let v=_.withSequenceNumber(o.currentSequenceNumber);var b,A,N;null!==e.targetMismatches.get(g)?v=v.withResumeToken(ur.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(g,v),A=v,N=h,(0===(b=_).resumeToken.approximateByteSize()||A.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8||N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0)&&a.push(t.$r.updateTargetData(o,v))});let c=bo(),l=_t();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(W3(o,s,e.documentUpdates).next(h=>{c=h.hs,l=h.Ps})),!r.isEqual(We.min())){const h=t.$r.getLastRemoteSnapshotVersion(o).next(g=>t.$r.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return q.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.ss=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const s=t.Oa.get(o);s&&(Ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Da=!0:i.modifiedDocuments.size>0?Ge(s.Da):i.removedDocuments.size>0&&(Ge(s.Da),s.Da=!1))}),yield Tc(t,r,e)}catch(r){yield Tl(r)}})).apply(this,arguments)}function vq(n,e,t){const r=Pe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.va.forEach((o,s)=>{const a=s.view.Y_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const c=Pe(s);c.onlineState=a;let l=!1;c.queries.forEach((h,g)=>{for(const _ of g.z_)_.Y_(a)&&(l=!0)}),l&&WO(c)}(r.eventManager,e),i.length&&r.Ca.E_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function phe(n,e,t){return oR.apply(this,arguments)}function oR(){return(oR=(0,ae.A)(function*(n,e,t){const r=Pe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Oa.get(e),o=i&&i.key;if(o){let s=new Fn(Me.comparator);s=s.insert(o,jn.newNoDocument(o,We.min()));const a=_t().add(o),c=new Ey(We.min(),new Map,new Fn(ut),s,a);yield yq(r,c),r.xa=r.xa.remove(o),r.Oa.delete(e),hR(r)}else yield Pp(r.localStore,e,!1).then(()=>Fp(r,e,t)).catch(Tl)})).apply(this,arguments)}function ghe(n,e){return sR.apply(this,arguments)}function sR(){return(sR=(0,ae.A)(function*(n,e){const t=Pe(n),r=e.batch.batchId;try{const i=yield function Mde(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.us.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){const g=l.batch,_=g.keys();let v=q.resolve();return _.forEach(w=>{v=v.next(()=>h.getEntry(c,w)).next(b=>{const A=l.docVersions.get(w);Ge(null!==A),b.version.compareTo(A)<0&&(g.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),h.addEntry(b)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,g))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=_t();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);uR(t,r,null),lR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Tc(t,i)}catch(i){yield Tl(i)}})).apply(this,arguments)}function mhe(n,e,t){return aR.apply(this,arguments)}function aR(){return(aR=(0,ae.A)(function*(n,e,t){const r=Pe(n);try{const i=yield function(s,a){const c=Pe(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(g=>(Ge(null!==g),h=g.keys(),c.mutationQueue.removeMutationBatch(l,g))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);uR(r,e,t),lR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Tc(r,i)}catch(i){yield Tl(i)}})).apply(this,arguments)}function cR(){return(cR=(0,ae.A)(function*(n,e){const t=Pe(n);Ll(t.remoteStore)||ye("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=Pe(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ba.get(r)||[];i.push(e),t.Ba.set(r,i)}catch(r){const i=Np(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function lR(n,e){(n.Ba.get(e)||[]).forEach(t=>{t.resolve()}),n.Ba.delete(e)}function uR(n,e,t){const r=Pe(n);let i=r.La[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.La[r.currentUser.toKey()]=i}}function Fp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Fa.get(e))n.va.delete(r),t&&n.Ca.Ka(r,t);n.Fa.delete(e),n.isPrimaryClient&&n.Na.mr(e).forEach(r=>{n.Na.containsKey(r)||Eq(n,r)})}function Eq(n,e){n.Ma.delete(e.path.canonicalString());const t=n.xa.get(e);null!==t&&(Mp(n.remoteStore,t),n.xa=n.xa.remove(e),n.Oa.delete(t),hR(n))}function dR(n,e,t){for(const r of t)r instanceof pq?(n.Na.addReference(r.key,e),yhe(n,r)):r instanceof gq?(ye("SyncEngine","Document no longer in limbo: "+r.key),n.Na.removeReference(r.key,e),n.Na.containsKey(r.key)||Eq(n,r.key)):Be()}function yhe(n,e){const t=e.key,r=t.path.canonicalString();n.xa.get(t)||n.Ma.has(r)||(ye("SyncEngine","New document in limbo: "+t),n.Ma.add(r),hR(n))}function hR(n){for(;n.Ma.size>0&&n.xa.size<n.maxConcurrentLimboResolutions;){const e=n.Ma.values().next().value;n.Ma.delete(e);const t=new Me(Lt.fromString(e)),r=n.ka.next();n.Oa.set(r,new ahe(t)),n.xa=n.xa.insert(t,r),db(n.remoteStore,new bc(ki(pp(t.path)),r,"TargetPurposeLimboResolution",Bo.oe))}}function Tc(n,e,t){return fR.apply(this,arguments)}function fR(){return fR=(0,ae.A)(function*(n,e,t){const r=Pe(n),i=[],o=[],s=[];var a;r.va.isEmpty()||(r.va.forEach((a,c)=>{s.push(r.Qa(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){const g=l?!l.fromCache:null===(h=t?.targetChanges.get(c.targetId))||void 0===h?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(l){i.push(l);const g=fO.Ui(c.targetId,l);o.push(g)}}))}),yield Promise.all(s),r.Ca.E_(i),yield(a=(0,ae.A)(function*(l,h){const g=Pe(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>q.forEach(h,v=>q.forEach(v.Ki,w=>g.persistence.referenceDelegate.addReference(_,v.targetId,w)).next(()=>q.forEach(v.$i,w=>g.persistence.referenceDelegate.removeReference(_,v.targetId,w)))))}catch(_){if(!Al(_))throw _;ye("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of h){const v=_.targetId;if(!_.fromCache){const w=g.ss.get(v),A=w.withLastLimboFreeSnapshotVersion(w.snapshotVersion);g.ss=g.ss.insert(v,A)}}}),function c(l,h){return a.apply(this,arguments)})(r.localStore,o))}),fR.apply(this,arguments)}function vhe(n,e){return pR.apply(this,arguments)}function pR(){return(pR=(0,ae.A)(function*(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());const r=yield q3(t.localStore,e);t.currentUser=e,(o=t).Ba.forEach(a=>{a.forEach(c=>{c.reject(new ge(Y.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ba.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Tc(t,r.ls)}var o})).apply(this,arguments)}function Ehe(n,e){const t=Pe(n),r=t.Oa.get(e);if(r&&r.Da)return _t().add(r.key);{let i=_t();const o=t.Fa.get(e);if(!o)return i;for(const s of o){const a=t.va.get(s);i=i.unionWith(a.view.Ra)}return i}}function Che(n,e){return gR.apply(this,arguments)}function gR(){return(gR=(0,ae.A)(function*(n,e){const t=Pe(n),r=yield sb(t.localStore,e.query,!0),i=e.view.Sa(r);return t.isPrimaryClient&&dR(t,e.targetId,i.ya),i})).apply(this,arguments)}function whe(n,e){return mR.apply(this,arguments)}function mR(){return(mR=(0,ae.A)(function*(n,e){const t=Pe(n);return Q3(t.localStore,e).then(r=>Tc(t,r))})).apply(this,arguments)}function Ihe(n,e,t,r){return _R.apply(this,arguments)}function _R(){return(_R=(0,ae.A)(function*(n,e,t,r){const i=Pe(n),o=yield function(a,c){const l=Pe(a),h=Pe(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.Fn(g,c).next(_=>_?l.localDocuments.getDocuments(g,_):q.resolve(null)))}(i.localStore,e);var c;null!==o?("pending"===t?yield Op(i.remoteStore):"acknowledged"===t||"rejected"===t?(uR(i,e,r||null),lR(i,e),c=e,Pe(Pe(i.localStore).mutationQueue).xn(c)):Be(),yield Tc(i,o)):ye("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function yR(){return(yR=(0,ae.A)(function*(n,e){const t=Pe(n);if(fb(t),wR(t),!0===e&&!0!==t.qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Cq(t,r.toArray());t.qa=!0,yield BO(t.remoteStore,!0);for(const o of i)db(t.remoteStore,o)}else if(!1===e&&!1!==t.qa){const r=[];let i=Promise.resolve();t.Fa.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Fp(t,s),Pp(t.localStore,s,!0))),Mp(t.remoteStore,s)}),yield i,yield Cq(t,r),function(s){const a=Pe(s);a.Oa.forEach((c,l)=>{Mp(a.remoteStore,l)}),a.Na.gr(),a.Oa=new Map,a.xa=new Fn(Me.comparator)}(t),t.qa=!1,yield BO(t.remoteStore,!1)}})).apply(this,arguments)}function Cq(n,e,t){return vR.apply(this,arguments)}function vR(){return(vR=(0,ae.A)(function*(n,e,t){const r=Pe(n),i=[],o=[];for(const s of e){let a;const c=r.Fa.get(s);if(c&&0!==c.length){a=yield Sp(r.localStore,ki(c[0]));for(const l of c){const h=r.va.get(l),g=yield Che(r,h);g.snapshot&&o.push(g.snapshot)}}else{const l=yield K3(r.localStore,s);a=yield Sp(r.localStore,l),yield XO(r,wq(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.E_(o),i})).apply(this,arguments)}function wq(n){return Ez(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function The(n){return t=Pe(n).localStore,Pe(Pe(t).persistence).qi();var t}function Ahe(n,e,t,r){return ER.apply(this,arguments)}function ER(){return(ER=(0,ae.A)(function*(n,e,t,r){const i=Pe(n);if(i.qa)return void ye("SyncEngine","Ignoring unexpected query state notification.");const o=i.Fa.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const s=yield Q3(i.localStore,Tz(o[0])),a=Ey.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ur.EMPTY_BYTE_STRING);yield Tc(i,s,a);break}case"rejected":yield Pp(i.localStore,e,!0),Fp(i,e,r);break;default:Be()}})).apply(this,arguments)}function She(n,e,t){return CR.apply(this,arguments)}function CR(){return(CR=(0,ae.A)(function*(n,e,t){const r=fb(n);if(r.qa){for(const i of e){if(r.Fa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ye("SyncEngine","Adding an already active target "+i);continue}const o=yield K3(r.localStore,i),s=yield Sp(r.localStore,o);yield XO(r,wq(o),s.targetId,!1,s.resumeToken),db(r.remoteStore,s)}for(const i of t)r.Fa.has(i)&&(yield Pp(r.localStore,i,!1).then(()=>{Mp(r.remoteStore,i),Fp(r,i)}).catch(Tl))}})).apply(this,arguments)}function fb(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yq.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ehe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=phe.bind(null,e),e.Ca.E_=nhe.bind(null,e.eventManager),e.Ca.Ka=rhe.bind(null,e.eventManager),e}function wR(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ghe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mhe.bind(null,e),e}class Lp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ae.A)(function*(){t.serializer=Oy(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return z3(this.persistence,new H3,e.initialUser,this.serializer)}createPersistence(e){return new lO(rb.Yr,this.serializer)}createSharedClientState(e){return new X3}terminate(){var e=this;return(0,ae.A)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class IR extends Lp{constructor(e,t,r){super(),this.Ua=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.A)(function*(){yield t().call(r,e),yield r.Ua.initialize(r,e),yield wR(r.Ua.syncEngine),yield Op(r.Ua.remoteStore),yield r.persistence.pi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return z3(this.persistence,new H3,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new x3(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Yle(t,this.persistence);return new Qle(e.asyncQueue,r)}createPersistence(e){const t=hO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Fi.withCacheSize(this.cacheSizeBytes):Fi.DEFAULT;return new dO(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,tq(),ub(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new X3}}class Iq extends IR{constructor(e,t){super(e,t,!1),this.Ua=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.A)(function*(){yield t().call(r,e);const i=r.Ua.syncEngine;r.sharedClientState instanceof CO&&(r.sharedClientState.syncEngine={eo:Ihe.bind(null,i),no:Ahe.bind(null,i),ro:She.bind(null,i),qi:The.bind(null,i),Xs:whe.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.pi(function(){var o=(0,ae.A)(function*(s){yield function bhe(n,e){return yR.apply(this,arguments)}(r.Ua.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=tq();if(!CO.D(t))throw new ge(Y.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=hO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new CO(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Vp{initialize(e,t){var r=this;return(0,ae.A)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>vq(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=vhe.bind(null,r.syncEngine),yield BO(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new the}createDatastore(e){const t=Oy(e.databaseInfo.databaseId),r=new Vde(e.databaseInfo);return new jde(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=t=>vq(this.syncEngine,t,0),a=eq.D()?new eq:new kde,new Hde(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,t){return function(i,o,s,a,c,l,h){const g=new che(i,o,s,a,c,l);return h&&(g.qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,ae.A)(function*(){var t,r,i;yield(i=(0,ae.A)(function*(s){const a=Pe(s);ye("RemoteStore","RemoteStore shutting down."),a.N_.add(5),yield Dp(a),a.B_.shutdown(),a.k_.set("Unknown")}),function o(s){return i.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate(),null===(r=e.eventManager)||void 0===r||r.terminate()})()}}function bq(n,e=10240){let t=0;return{read:()=>(0,ae.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ae.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class pb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Wa(this.observer.next,e)}error(e){this.observer.error?this.Wa(this.observer.error,e):Ir("Uncaught Error in snapshot listener:",e.toString())}Ga(){this.muted=!0}Wa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Mhe{constructor(e,t){this.za=e,this.serializer=t,this.metadata=new Kr,this.buffer=new Uint8Array,this.ja=new TextDecoder("utf-8"),this.Ha().then(r=>{r&&r.aa()?this.metadata.resolve(r._a.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?._a)}`))},r=>this.metadata.reject(r))}close(){return this.za.cancel()}getMetadata(){var e=this;return(0,ae.A)(function*(){return e.metadata.promise})()}$a(){var e=this;return(0,ae.A)(function*(){return yield e.getMetadata(),e.Ha()})()}Ha(){var e=this;return(0,ae.A)(function*(){const t=yield e.Ja();if(null===t)return null;const r=e.ja.decode(t),i=Number(r);isNaN(i)&&e.Ya(`length string (${r}) is not valid number`);const o=yield e.Za(i);return new ihe(JSON.parse(o),t.length+i)})()}Xa(){return this.buffer.findIndex(e=>123===e)}Ja(){var e=this;return(0,ae.A)(function*(){for(;e.Xa()<0&&!(yield e.eu()););if(0===e.buffer.length)return null;const t=e.Xa();t<0&&e.Ya("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Za(e){var t=this;return(0,ae.A)(function*(){for(;t.buffer.length<e;)(yield t.eu())&&t.Ya("Reached the end of bundle when more is expected.");const r=t.ja.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ya(e){throw this.za.cancel(),new Error(`Invalid bundle format: ${e}`)}eu(){var e=this;return(0,ae.A)(function*(){const t=yield e.za.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Ohe{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ae.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new ge(Y.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,ae.A)(function*(s,a){const c=Pe(s),l={documents:a.map(v=>wy(c.serializer,v))},h=yield c.No("BatchGetDocuments",c.serializer.databaseId,Lt.emptyPath(),l,a.length),g=new Map;h.forEach(v=>{const w=function Kue(n,e){return"found"in e?function(r,i){Ge(!!i.found);const o=Da(r,i.found.name),s=br(i.found.updateTime),a=i.found.createTime?br(i.found.createTime):We.min(),c=new pi({mapValue:{fields:i.found.fields}});return jn.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){Ge(!!i.missing),Ge(!!i.readTime);const o=Da(r,i.missing),s=br(i.readTime);return jn.newNoDocument(o,s)}(n,e):Be()}(c.serializer,v);g.set(w.key.toString(),w)});const _=[];return a.forEach(v=>{const w=g.get(v.toString());Ge(!!w),_.push(w)}),_}),function o(s,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ep(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ae.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=Me.fromPath(i);e.mutations.push(new qM(o,e.precondition(o)))}),yield(r=(0,ae.A)(function*(o,s){const a=Pe(o),c={writes:s.map(l=>Iy(a.serializer,l))};yield a.Fo("Commit",a.serializer.databaseId,Lt.emptyPath(),c)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Be();t=We.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ge(Y.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(We.min())?Qn.exists(!1):Qn.updateTime(t):Qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(We.min()))throw new ge(Y.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qn.updateTime(t)}return Qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Rhe{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.tu=r.maxAttempts,this.e_=new IO(this.asyncQueue,"transaction_retry")}nu(){this.tu-=1,this.ru()}ru(){var e=this;this.e_.Wo((0,ae.A)(function*(){const t=new Ohe(e.datastore),r=e.iu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.su(o)}))}).catch(i=>{e.su(i)})}))}iu(e){try{const t=this.updateFunction(e);return!oy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}su(e){this.tu>0&&this.ou(e)?(this.tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ru(),Promise.resolve()))):this.deferred.reject(e)}ou(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!zz(t)}return!1}}class Nhe{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ni.UNAUTHENTICATED,this.clientId=F4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=(0,ae.A)(function*(a){ye("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(ye("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ge(Y.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Np(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function gb(n,e){return bR.apply(this,arguments)}function bR(){return bR=(0,ae.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ae.A)(function*(o){r.isEqual(o)||(yield q3(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),bR.apply(this,arguments)}function TR(n,e){return AR.apply(this,arguments)}function AR(){return(AR=(0,ae.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield SR(n);ye("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>cq(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>cq(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function Tq(n){return"FirebaseError"===n.name?n.code===Y.FAILED_PRECONDITION||n.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function SR(n){return PR.apply(this,arguments)}function PR(){return(PR=(0,ae.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{yield gb(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Tq(t))throw t;wo("Error using user provided cache. Falling back to memory cache: "+t),yield gb(n,new Lp)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),yield gb(n,new Lp);return n._offlineComponents})).apply(this,arguments)}function mb(n){return DR.apply(this,arguments)}function DR(){return(DR=(0,ae.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),yield TR(n,n._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),yield TR(n,new Vp))),n._onlineComponents})).apply(this,arguments)}function Aq(n){return SR(n).then(e=>e.persistence)}function Up(n){return SR(n).then(e=>e.localStore)}function Sq(n){return mb(n).then(e=>e.remoteStore)}function MR(n){return mb(n).then(e=>e.syncEngine)}function Bp(n){return OR.apply(this,arguments)}function OR(){return(OR=(0,ae.A)(function*(n){const e=yield mb(n),t=e.eventManager;return t.onListen=lhe.bind(null,e.syncEngine),t.onUnlisten=dhe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=uhe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=hhe.bind(null,e.syncEngine),t})).apply(this,arguments)}function Dq(n,e,t={}){const r=new Kr;return n.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return function(o,s,a,c,l){const h=new pb({next:_=>{s.enqueueAndForget(()=>qO(o,g));const v=_.docs.has(a);!v&&_.fromCache?l.reject(new ge(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&_.fromCache&&c&&"server"===c.source?l.reject(new ge(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(_)},error:_=>l.reject(_)}),g=new QO(pp(a.path),h,{includeMetadataChanges:!0,oa:!0});return HO(o,g)}(yield Bp(n),n.asyncQueue,e,t,r)})),r.promise}function Mq(n,e,t={}){const r=new Kr;return n.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return function(o,s,a,c,l){const h=new pb({next:_=>{s.enqueueAndForget(()=>qO(o,g)),_.fromCache&&"server"===c.source?l.reject(new ge(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(_)},error:_=>l.reject(_)}),g=new QO(a,h,{includeMetadataChanges:!0,oa:!0});return HO(o,g)}(yield Bp(n),n.asyncQueue,e,t,r)})),r.promise}function Oq(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const Rq=new Map;function RR(n,e,t){if(!t)throw new ge(Y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Nq(n,e,t,r){if(!0===e&&!0===r)throw new ge(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xq(n){if(!Me.isDocumentKey(n))throw new ge(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function kq(n){if(Me.isDocumentKey(n))throw new ge(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _b(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Be()}function St(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_b(n);throw new ge(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Fq(n,e){if(e<=0)throw new ge(Y.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Lq{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ge(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ge(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Nq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Oq(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ge(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ny{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lq({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ge(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ge(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lq(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Lle;switch(r.type){case"firstParty":return new jle(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Rq.get(t);r&&(ye("ComponentProvider","Removing Datastore"),Rq.delete(t),r.terminate())}(this),Promise.resolve()}}class gi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gi(this.firestore,e,this._query)}}class $n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ma(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $n(this.firestore,e,this._key)}}class Ma extends gi{constructor(e,t,r){super(e,t,pp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new Me(e))}withConverter(e){return new Ma(this.firestore,e,this._path)}}function Uq(n,e,...t){if(n=(0,S.Ku)(n),RR("collection","path",e),n instanceof Ny){const r=Lt.fromString(e,...t);return kq(r),new Ma(n,null,r)}{if(!(n instanceof $n||n instanceof Ma))throw new ge(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Lt.fromString(e,...t));return kq(r),new Ma(n.firestore,null,r)}}function yb(n,e,...t){if(n=(0,S.Ku)(n),1===arguments.length&&(e=F4.newId()),RR("doc","path",e),n instanceof Ny){const r=Lt.fromString(e,...t);return xq(r),new $n(n,null,new Me(r))}{if(!(n instanceof $n||n instanceof Ma))throw new ge(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Lt.fromString(e,...t));return xq(r),new $n(n.firestore,n instanceof Ma?n.converter:null,new Me(r))}}function Bq(n,e){return n=(0,S.Ku)(n),e=(0,S.Ku)(e),(n instanceof $n||n instanceof Ma)&&(e instanceof $n||e instanceof Ma)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function NR(n,e){return n=(0,S.Ku)(n),e=(0,S.Ku)(e),n instanceof gi&&e instanceof gi&&n.firestore===e.firestore&&fy(n._query,e._query)&&n.converter===e.converter}class Ghe{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new IO(this,"async_queue_retry"),this.Tu=()=>{const t=ub();t&&ye("AsyncQueue","Visibility state changed to "+t.visibilityState),this.e_.zo()};const e=ub();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Eu(),this.du(e)}enterRestrictedMode(e){if(!this.uu){this.uu=!0,this.Pu=e||!1;const t=ub();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tu)}}enqueue(e){if(this.Eu(),this.uu)return new Promise(()=>{});const t=new Kr;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.au.push(e),this.Au()))}Au(){var e=this;return(0,ae.A)(function*(){if(0!==e.au.length){try{yield e.au[0](),e.au.shift(),e.e_.reset()}catch(t){if(!Al(t))throw t;ye("AsyncQueue","Operation failed with retryable error: "+t)}e.au.length>0&&e.e_.Wo(()=>e.Au())}})()}du(e){const t=this._u.then(()=>(this.hu=!0,e().catch(r=>{throw this.lu=r,this.hu=!1,Ir("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.hu=!1,r))));return this._u=t,t}enqueueAfterDelay(e,t,r){this.Eu(),this.Iu.indexOf(e)>-1&&(t=0);const i=$O.createAndSchedule(this,e,t,r,o=>this.Ru(o));return this.cu.push(i),i}Eu(){this.lu&&Be()}verifyOperationInProgress(){}Vu(){var e=this;return(0,ae.A)(function*(){let t;do{t=e._u,yield t}while(t!==e._u)})()}mu(e){for(const t of this.cu)if(t.timerId===e)return!0;return!1}fu(e){return this.Vu().then(()=>{this.cu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.cu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Vu()})}gu(e){this.Iu.push(e)}Ru(e){const t=this.cu.indexOf(e);this.cu.splice(t,1)}}function xR(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(n)}class Whe{constructor(){this._progressObserver={},this._taskCompletionResolver=new Kr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class En extends Ny{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ghe,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||jq(this),this._firestoreClient.terminate()}}function Yn(n){return n._firestoreClient||jq(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function jq(n){var e,t,r;const i=n._freezeSettings(),o=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new yue(n._databaseId,c,n._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Oq(h.experimentalLongPollingOptions),h.useFetchStreams));var c,h;n._firestoreClient=new Nhe(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function $q(n,e,t){const r=new Kr;return n.asyncQueue.enqueue((0,ae.A)(function*(){try{yield gb(n,t),yield TR(n,e),r.resolve()}catch(i){const o=i;if(!Tq(o))throw o;wo("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function Hq(n){if(n._initialized||n._terminated)throw new ge(Y.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Oa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oa(ur.fromBase64String(e))}catch(t){throw new ge(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Oa(ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ac{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ge(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Dd{constructor(e){this._methodName=e}}class vb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}}const ife=/^__.*__$/;class ofe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ic(e,this.data,this.fieldMask,t,this.fieldTransforms):new vp(e,this.data,t,this.fieldTransforms)}}class zq{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ic(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qq(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be()}}class Eb{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(e){return new Eb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.wu({path:r,bu:!1});return i.Du(e),i}Cu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.wu({path:r,bu:!1});return i.pu(),i}vu(e){return this.wu({path:void 0,bu:!0})}Fu(e){return Ib(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Du(this.path.get(e))}Du(e){if(0===e.length)throw this.Fu("Document fields must not be empty");if(qq(this.yu)&&ife.test(e))throw this.Fu('Document fields cannot begin and end with "__"')}}class sfe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Oy(e)}Ou(e,t,r,i=!1){return new Eb({yu:e,methodName:t,xu:r,path:Bn.emptyPath(),bu:!1,Mu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Md(n){const e=n._freezeSettings(),t=Oy(n._databaseId);return new sfe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Cb(n,e,t,r,i,o={}){const s=n.Ou(o.merge||o.mergeFields?2:0,e,t,i);jR("Data must be an object, but it was:",s,r);const a=Kq(r,s);let c,l;if(o.merge)c=new Io(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const g of o.mergeFields){const _=Fy(e,g,t);if(!s.contains(_))throw new ge(Y.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);Yq(h,_)||h.push(_)}c=new Io(h),l=s.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,l=s.fieldTransforms;return new ofe(new pi(a),c,l)}class ky extends Dd{_toFieldTransform(e){if(2!==e.yu)throw e.Fu(1===e.yu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ky}}function Gq(n,e,t){return new Eb({yu:3,xu:e.settings.xu,methodName:n._methodName,bu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class kR extends Dd{_toFieldTransform(e){return new _y(e.path,new _p)}isEqual(e){return e instanceof kR}}class FR extends Dd{constructor(e,t){super(e),this.Nu=t}_toFieldTransform(e){const t=Gq(this,e,!0),r=this.Nu.map(o=>Od(o,t)),i=new Ed(r);return new _y(e.path,i)}isEqual(e){return e instanceof FR&&(0,S.bD)(this.Nu,e.Nu)}}class LR extends Dd{constructor(e,t){super(e),this.Nu=t}_toFieldTransform(e){const t=Gq(this,e,!0),r=this.Nu.map(o=>Od(o,t)),i=new Cd(r);return new _y(e.path,i)}isEqual(e){return e instanceof LR&&(0,S.bD)(this.Nu,e.Nu)}}class VR extends Dd{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new yp(e.serializer,Rz(e.serializer,this.Lu));return new _y(e.path,t)}isEqual(e){return e instanceof VR&&this.Lu===e.Lu}}function UR(n,e,t,r){const i=n.Ou(1,e,t);jR("Data must be an object, but it was:",i,r);const o=[],s=pi.empty();Sl(r,(c,l)=>{const h=wb(e,c,t);l=(0,S.Ku)(l);const g=i.Cu(h);if(l instanceof ky)o.push(h);else{const _=Od(l,g);null!=_&&(o.push(h),s.set(h,_))}});const a=new Io(o);return new zq(s,a,i.fieldTransforms)}function BR(n,e,t,r,i,o){const s=n.Ou(1,e,t),a=[Fy(e,r,t)],c=[i];if(o.length%2!=0)throw new ge(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)a.push(Fy(e,o[_])),c.push(o[_+1]);const l=[],h=pi.empty();for(let _=a.length-1;_>=0;--_)if(!Yq(l,a[_])){const v=a[_];let w=c[_];w=(0,S.Ku)(w);const b=s.Cu(v);if(w instanceof ky)l.push(v);else{const A=Od(w,b);null!=A&&(l.push(v),h.set(v,A))}}const g=new Io(l);return new zq(h,g,s.fieldTransforms)}function Wq(n,e,t,r=!1){return Od(t,n.Ou(r?4:3,e))}function Od(n,e){if(Qq(n=(0,S.Ku)(n)))return jR("Unsupported field value:",e,n),Kq(n,e);if(n instanceof Dd)return function(r,i){if(!qq(i.yu))throw i.Fu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Fu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.bu&&4!==e.yu)throw e.Fu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let c=Od(a,i.vu(s));null==c&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if(null===(r=(0,S.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return Rz(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Kn.fromDate(r);return{timestampValue:Cp(i.serializer,o)}}if(r instanceof Kn){const o=new Kn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cp(i.serializer,o)}}if(r instanceof vb)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Oa)return{bytesValue:e3(i.serializer,r._byteString)};if(r instanceof $n){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Fu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:JM(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Fu(`Unsupported field value: ${_b(r)}`)}(n,e)}function Kq(n,e){const t={};return X4(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sl(n,(r,i)=>{const o=Od(i,e.Su(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function Qq(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Kn||n instanceof vb||n instanceof Oa||n instanceof $n||n instanceof Dd)}function jR(n,e,t){if(!Qq(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=_b(t);throw e.Fu("an object"===r?n+" a custom object":n+" "+r)}var i}function Fy(n,e,t){if((e=(0,S.Ku)(e))instanceof Ac)return e._internalPath;if("string"==typeof e)return wb(n,e);throw Ib("Field path arguments must be of type string or ",n,!1,void 0,t)}const afe=new RegExp("[~\\*/\\[\\]]");function wb(n,e,t){if(e.search(afe)>=0)throw Ib(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ac(...e.split("."))._internalPath}catch{throw Ib(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ib(n,e,t,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new ge(Y.INVALID_ARGUMENT,a+n+c)}function Yq(n,e){return n.some(t=>t.isEqual(e))}class Ly{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cfe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class cfe extends Ly{data(){return super.data()}}function bb(n,e){return"string"==typeof e?wb(n,e):e instanceof Ac?e._internalPath:e._delegate._internalPath}function Jq(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ge(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $R{}class Vy extends $R{}function Ul(n,e,...t){let r=[];e instanceof $R&&r.push(e),r=r.concat(t),function(o){const s=o.filter(c=>c instanceof jp).length,a=o.filter(c=>c instanceof Uy).length;if(s>1||s>0&&a>0)throw new ge(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Uy extends Vy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Uy(e,t,r)}_apply(e){const t=this._parse(e);return tG(e._query,t),new gi(e.firestore,e.converter,HM(e._query,t))}_parse(e){const t=Md(e.firestore);return function(o,s,a,c,l,h,g){let _;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new ge(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){eG(g,h);const v=[];for(const w of g)v.push(Xq(c,o,w));_={arrayValue:{values:v}}}else _=Xq(c,o,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||eG(g,h),_=Wq(a,"where",g,"in"===h||"not-in"===h);return Vt.create(l,h,_)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class jp extends $R{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jp(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const c of a)tG(s,c),s=HM(s,c)}(e._query,t),new gi(e.firestore,e.converter,HM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class HR extends Vy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new HR(e,t)}_apply(e){const t=function(i,o,s){if(null!==i.startAt)throw new ge(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ge(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dy(o,s)}(e._query,this._field,this._direction);return new gi(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Cc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class Tb extends Vy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Tb(e,t,r)}_apply(e){return new gi(e.firestore,e.converter,HI(e._query,this._limit,this._limitType))}}class Ab extends Vy{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Ab(e,t,r)}_apply(e){const t=Zq(e,this.type,this._docOrFields,this._inclusive);return new gi(e.firestore,e.converter,(o=t,new Cc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class Sb extends Vy{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Sb(e,t,r)}_apply(e){const t=Zq(e,this.type,this._docOrFields,this._inclusive);return new gi(e.firestore,e.converter,(o=t,new Cc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function Zq(n,e,t,r){if(t[0]=(0,S.Ku)(t[0]),t[0]instanceof Ly)return function(o,s,a,c,l){if(!c)throw new ge(Y.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const g of gp(o))if(g.field.isKeyField())h.push(yd(s,c.key));else{const _=c.data.field(g.field);if(FI(_))throw new ge(Y.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const v=g.field.canonicalString();throw new ge(Y.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(_)}return new Rl(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Md(n.firestore);return function(s,a,c,l,h,g){const _=s.explicitOrderBy;if(h.length>_.length)throw new ge(Y.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let w=0;w<h.length;w++){const b=h[w];if(_[w].field.isKeyField()){if("string"!=typeof b)throw new ge(Y.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof b}`);if(!$M(s)&&-1!==b.indexOf("/"))throw new ge(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${b}' contains a slash.`);const A=s.path.child(Lt.fromString(b));if(!Me.isDocumentKey(A))throw new ge(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const N=new Me(A);v.push(yd(a,N))}else{const A=Wq(c,l,b);v.push(A)}}return new Rl(v,g)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Xq(n,e,t){if("string"==typeof(t=(0,S.Ku)(t))){if(""===t)throw new ge(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$M(e)&&-1!==t.indexOf("/"))throw new ge(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Lt.fromString(t));if(!Me.isDocumentKey(r))throw new ge(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yd(n,new Me(r))}if(t instanceof $n)return yd(n,t._key);throw new ge(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_b(t)}.`)}function eG(n,e){if(!Array.isArray(n)||0===n.length)throw new ge(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tG(n,e){const t=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ge(Y.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class zR{convertValue(e,t="none"){switch(Ml(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ec(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Be()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Sl(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new vb(dr(e.latitude),dr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=LI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ay(e));default:return null}}convertTimestamp(e){const t=vc(e);return new Kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Lt.fromString(e);Ge(h3(r));const i=new Pl(r.get(1),r.get(3)),o=new Me(r.popFirst(5));return i.isEqual(t)||Ir(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function Pb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class _fe extends zR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,t)}}class Rd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sc extends Ly{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new By(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(bb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class By extends Sc{data(e={}){return super.data(e)}}class Bl{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Rd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new By(this._firestore,this._userDataWriter,r.key,r,new Rd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new By(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Rd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const c=new By(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Rd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==a.type&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:vfe(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function vfe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be()}}function rG(n,e){return n instanceof Sc&&e instanceof Sc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Bl&&e instanceof Bl&&n._firestore===e._firestore&&NR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class jl extends zR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,t)}}function iG(n,e,t){n=St(n,$n);const r=St(n.firestore,En),i=Pb(n.converter,e,t);return $p(r,[Cb(Md(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Qn.none())])}function oG(n,e,t,...r){n=St(n,$n);const i=St(n.firestore,En),o=Md(i);let s;return s="string"==typeof(e=(0,S.Ku)(e))||e instanceof Ac?BR(o,"updateDoc",n._key,e,t,r):UR(o,"updateDoc",n._key,e),$p(i,[s.toMutation(n._key,Qn.exists(!0))])}function sG(n,...e){var t,r,i;n=(0,S.Ku)(n);let o={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof e[s]||xR(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(xR(e[s])){const g=e[s];e[s]=null===(t=g.next)||void 0===t?void 0:t.bind(g),e[s+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[s+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let c,l,h;if(n instanceof $n)l=St(n.firestore,En),h=pp(n._key.path),c={next:g=>{e[s]&&e[s](qR(l,n,g))},error:e[s+1],complete:e[s+2]};else{const g=St(n,gi);l=St(g.firestore,En),h=g._query;const _=new jl(l);c={next:v=>{e[s]&&e[s](new Bl(l,_,g,v))},error:e[s+1],complete:e[s+2]},Jq(n._query)}return function(_,v,w,b){const A=new pb(b),N=new QO(v,A,w);return _.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return HO(yield Bp(_),N)})),()=>{A.Ga(),_.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return qO(yield Bp(_),N)}))}}(Yn(l),h,a,c)}function $p(n,e){return function(r,i){const o=new Kr;return r.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return function fhe(n,e,t){return rR.apply(this,arguments)}(yield MR(r),i,o)})),o.promise}(Yn(n),e)}function qR(n,e,t){const r=t.docs.get(e._key),i=new jl(n);return new Sc(n,i,e._key,r,new Rd(t.hasPendingWrites,t.fromCache),e.converter)}const Lfe={maxAttempts:5};class aG{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Md(e)}set(e,t,r){this._verifyNotCommitted();const i=$l(e,this._firestore),o=Pb(i.converter,t,r),s=Cb(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,Qn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=$l(e,this._firestore);let s;return s="string"==typeof(t=(0,S.Ku)(t))||t instanceof Ac?BR(this._dataReader,"WriteBatch.update",o._key,t,r,i):UR(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=$l(e,this._firestore);return this._mutations=this._mutations.concat(new Ep(t._key,Qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(Y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $l(n,e){if((n=(0,S.Ku)(n)).firestore!==e)throw new ge(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Vfe extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Md(t)}get(t){const r=$l(t,this._firestore),i=new _fe(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return Be();const s=o[0];if(s.isFoundDocument())return new Ly(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Ly(this._firestore,i,r._key,null,r.converter);throw Be()})}set(t,r,i){const o=$l(t,this._firestore),s=Pb(o.converter,r,i),a=Cb(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){const s=$l(t,this._firestore);let a;return a="string"==typeof(r=(0,S.Ku)(r))||r instanceof Ac?BR(this._dataReader,"Transaction.update",s._key,r,i,o):UR(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){const r=$l(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=$l(e,this._firestore),r=new jl(this._firestore);return super.get(e).then(i=>new Sc(this._firestore,r,t._key,i._document,new Rd(!1,!1),t.converter))}}function WR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ge("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function dG(){if(typeof Uint8Array>"u")throw new ge("unimplemented","Uint8Arrays are not available in this environment.")}function hG(){if(!function mue(){return typeof atob<"u"}())throw new ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){sp=ba.SDK_VERSION,(0,ba._registerComponent)(new _c.uA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new En(new Ule(r.getProvider("auth-internal")),new $le(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ge(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pl(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,ba.registerVersion)(N4,"4.6.5",e),(0,ba.registerVersion)(N4,"4.6.5","esm2017")}();class jy{constructor(e){this._delegate=e}static fromBase64String(e){return hG(),new jy(Oa.fromBase64String(e))}static fromUint8Array(e){return dG(),new jy(Oa.fromUint8Array(e))}toBase64(){return hG(),this._delegate.toBase64()}toUint8Array(){return dG(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function KR(n){return function Kfe(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Qfe{enableIndexedDbPersistence(e,t){return function Qhe(n,e){Hq(n=St(n,En));const t=Yn(n);if(t._uninitializedComponentsProvider)throw new ge(Y.FAILED_PRECONDITION,"SDK cache is already specified.");wo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Vp;return $q(t,i,new IR(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Yhe(n){Hq(n=St(n,En));const e=Yn(n);if(e._uninitializedComponentsProvider)throw new ge(Y.FAILED_PRECONDITION,"SDK cache is already specified.");wo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Vp;return $q(e,r,new Iq(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Jhe(n){if(n._initialized&&!n._terminated)throw new ge(Y.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Kr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ae.A)(function*(){try{yield(t=(0,ae.A)(function*(i){if(!Ta.D())return Promise.resolve();const o=i+"main";yield Ta.delete(o)}),function r(i){return t.apply(this,arguments)})(hO(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class fG{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Pl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&wo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Vq(n,e,t,r={}){var i;const o=(n=St(n,Ny))._getSettings(),s=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=ni.MOCK_USER;else{a=(0,S.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new ge(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ni(l)}n._authCredentials=new Vle(new x4(a,c))}}(this._delegate,e,t,r)}enableNetwork(){return function Xhe(n){return function xhe(n){return n.asyncQueue.enqueue((0,ae.A)(function*(){const e=yield Aq(n),t=yield Sq(n);return e.setNetworkEnabled(!0),function(i){const o=Pe(i);return o.N_.delete(0),Ry(o)}(t)}))}(Yn(n=St(n,En)))}(this._delegate)}disableNetwork(){return function efe(n){return function khe(n){return n.asyncQueue.enqueue((0,ae.A)(function*(){const e=yield Aq(n),t=yield Sq(n);return e.setNetworkEnabled(!1),(r=(0,ae.A)(function*(o){const s=Pe(o);s.N_.add(0),yield Dp(s),s.k_.set("Offline")}),function i(o){return r.apply(this,arguments)})(t);var r}))}(Yn(n=St(n,En)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Nq("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Zhe(n){return function(t){const r=new Kr;return t.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return function _he(n,e){return cR.apply(this,arguments)}(yield MR(t),r)})),r.promise}(Yn(n=St(n,En)))}(this._delegate)}onSnapshotsInSync(e){return function Pfe(n,e){return function Uhe(n,e){const t=new pb(e);return n.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return i=yield Bp(n),o=t,Pe(i).J_.add(o),void o.next();var i,o})),()=>{t.Ga(),n.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return i=yield Bp(n),o=t,void Pe(i).J_.delete(o);var i,o}))}}(Yn(n=St(n,En)),xR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ge("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Hp(this,Uq(this._delegate,e))}catch(t){throw no(t,"collection()","Firestore.collection()")}}doc(e){try{return new as(this,yb(this._delegate,e))}catch(t){throw no(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ro(this,function qhe(n,e){if(n=St(n,Ny),RR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ge(Y.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gi(n,null,(r=e,new Cc(Lt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw no(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Ufe(n,e,t){n=St(n,En);const r=Object.assign(Object.assign({},Lfe),t);return function(o){if(o.maxAttempts<1)throw new ge(Y.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const c=new Kr;return o.asyncQueue.enqueueAndForget((0,ae.A)(function*(){const l=yield function Pq(n){return mb(n).then(e=>e.datastore)}(o);new Rhe(o.asyncQueue,l,a,s,c).nu()})),c.promise}(Yn(n),i=>e(new Vfe(n,i)),r)}(this._delegate,t=>e(new pG(this,t)))}batch(){return Yn(this._delegate),new gG(new aG(this._delegate,e=>$p(this._delegate,e)))}loadBundle(e){return function tfe(n,e){const t=Yn(n=St(n,En)),r=new Whe;return function Bhe(n,e,t,r){const i=function(s,a){let c;return c="string"==typeof s?Gz().encode(s):s,h=function(h,g){if(h instanceof Uint8Array)return bq(h,g);if(h instanceof ArrayBuffer)return bq(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new Mhe(h,a);var h}(t,Oy(e));n.asyncQueue.enqueueAndForget((0,ae.A)(function*(){!function Phe(n,e,t){const r=Pe(n);var i;(i=(0,ae.A)(function*(s,a,c){try{const l=yield a.getMetadata();if(yield function(w,b){const A=Pe(w),N=br(b.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",R=>A.Wr.getBundleMetadata(R,b.id)).then(R=>!!R&&R.createTime.compareTo(N)>=0)}(s.localStore,l))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(w=l).totalDocuments,bytesLoaded:w.totalBytes,totalDocuments:w.totalDocuments,totalBytes:w.totalBytes}),Promise.resolve(new Set);c._updateProgress(fq(l));const h=new ohe(l,s.localStore,a.serializer);let g=yield a.$a();for(;g;){const v=yield h.ca(g);v&&c._updateProgress(v),g=yield a.$a()}const _=yield h.complete();return yield Tc(s,_.Pa,void 0),yield function(w,b){const A=Pe(w);return A.persistence.runTransaction("Save bundle","readwrite",N=>A.Wr.saveBundleMetadata(N,b))}(s.localStore,l),c._completeWith(_.progress),Promise.resolve(_.ha)}catch(l){return wo("SyncEngine",`Loading bundle failed with ${l}`),c._failWith(l),Promise.resolve(new Set)}var w}),function o(s,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield MR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function nfe(n,e){return function jhe(n,e){return n.asyncQueue.enqueue((0,ae.A)(function*(){return function(r,i){const o=Pe(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Wr.getNamedQuery(s,i))}(yield Up(n),e)}))}(Yn(n=St(n,En)),e).then(t=>t?new gi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ro(this,t):null)}}class Mb extends zR{constructor(e){super(),this.firestore=e}convertBytes(e){return new jy(new Oa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return as.forKey(t,this.firestore,null)}}class pG{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Mb(e)}get(e){const t=xd(e);return this._delegate.get(t).then(r=>new $y(this._firestore,new Sc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=xd(e);return r?(WR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=xd(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=xd(e);return this._delegate.delete(t),this}}class gG{constructor(e){this._delegate=e}set(e,t,r){const i=xd(e);return r?(WR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=xd(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=xd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Nd{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new By(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hy(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Nd.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new Nd(e,new Mb(e),t),i.set(t,o)),o}}Nd.INSTANCES=new WeakMap;class as{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Mb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new as(t,new $n(t._delegate,r,new Me(e)))}static forKey(e,t,r){return new as(t,new $n(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Hp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Hp(this.firestore,Uq(this._delegate,e))}catch(t){throw no(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,S.Ku)(e))instanceof $n&&Bq(this._delegate,e)}set(e,t){t=WR("DocumentReference.set",t);try{return t?iG(this._delegate,e,t):iG(this._delegate,e)}catch(r){throw no(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?oG(this._delegate,e):oG(this._delegate,e,t,...r)}catch(i){throw no(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Afe(n){return $p(St(n.firestore,En),[new Ep(n._key,Qn.none())])}(this._delegate)}onSnapshot(...e){const t=mG(e),r=_G(e,i=>new $y(this.firestore,new Sc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return sG(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Cfe(n){n=St(n,$n);const e=St(n.firestore,En),t=Yn(e),r=new jl(e);return function Fhe(n,e){const t=new Kr;return n.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return(r=(0,ae.A)(function*(o,s,a){try{const c=yield function(h,g){const _=Pe(h);return _.persistence.runTransaction("read document","readonly",v=>_.localDocuments.getDocument(v,g))}(o,s);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new ge(Y.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const l=Np(c,`Failed to get document '${s} from cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield Up(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Sc(e,r,n._key,i,new Rd(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function wfe(n){n=St(n,$n);const e=St(n.firestore,En);return Dq(Yn(e),n._key,{source:"server"}).then(t=>qR(e,n,t))}(this._delegate):function Efe(n){n=St(n,$n);const e=St(n.firestore,En);return Dq(Yn(e),n._key).then(t=>qR(e,n,t))}(this._delegate),t.then(r=>new $y(this.firestore,new Sc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new as(this.firestore,this._delegate.withConverter(e?Nd.getInstance(this.firestore,e):null))}}function no(n,e,t){return n.message=n.message.replace(e,t),n}function mG(n){for(const e of n)if("object"==typeof e&&!KR(e))return e;return{}}function _G(n,e){var t,r;let i;return i=KR(n[0])?n[0]:KR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class $y{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new as(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return rG(this._delegate,e._delegate)}}class Hy extends $y{data(e){const t=this._delegate.data(e);return this._delegate._converter||function Fle(n,e){n||Be()}(void 0!==t),t}}class ro{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Mb(e)}where(e,t,r){try{return new ro(this.firestore,Ul(this._delegate,function lfe(n,e,t){const r=e,i=bb("where",n);return Uy._create(i,r,t)}(e,t,r)))}catch(i){throw no(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ro(this.firestore,Ul(this._delegate,function ufe(n,e="asc"){const t=e,r=bb("orderBy",n);return HR._create(r,t)}(e,t)))}catch(r){throw no(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ro(this.firestore,Ul(this._delegate,function dfe(n){return Fq("limit",n),Tb._create("limit",n,"F")}(e)))}catch(t){throw no(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ro(this.firestore,Ul(this._delegate,function hfe(n){return Fq("limitToLast",n),Tb._create("limitToLast",n,"L")}(e)))}catch(t){throw no(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ro(this.firestore,Ul(this._delegate,function ffe(...n){return Ab._create("startAt",n,!0)}(...e)))}catch(t){throw no(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ro(this.firestore,Ul(this._delegate,function pfe(...n){return Ab._create("startAfter",n,!1)}(...e)))}catch(t){throw no(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ro(this.firestore,Ul(this._delegate,function gfe(...n){return Sb._create("endBefore",n,!1)}(...e)))}catch(t){throw no(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ro(this.firestore,Ul(this._delegate,function mfe(...n){return Sb._create("endAt",n,!0)}(...e)))}catch(t){throw no(t,"endAt()","Query.endAt()")}}isEqual(e){return NR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function bfe(n){n=St(n,gi);const e=St(n.firestore,En),t=Yn(e),r=new jl(e);return function Lhe(n,e){const t=new Kr;return n.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return(r=(0,ae.A)(function*(o,s,a){try{const c=yield sb(o,s,!0),l=new mq(s,c.Is),h=l.Va(c.documents),g=l.applyChanges(h,!1);a.resolve(g.snapshot)}catch(c){const l=Np(c,`Failed to execute query '${s} against cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield Up(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Bl(e,r,n,i))}(this._delegate):"server"===e?.source?function Tfe(n){n=St(n,gi);const e=St(n.firestore,En),t=Yn(e),r=new jl(e);return Mq(t,n._query,{source:"server"}).then(i=>new Bl(e,r,n,i))}(this._delegate):function Ife(n){n=St(n,gi);const e=St(n.firestore,En),t=Yn(e),r=new jl(e);return Jq(n._query),Mq(t,n._query).then(i=>new Bl(e,r,n,i))}(this._delegate),t.then(r=>new QR(this.firestore,new Bl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=mG(e),r=_G(e,i=>new QR(this.firestore,new Bl(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return sG(this._delegate,t,r)}withConverter(e){return new ro(this.firestore,this._delegate.withConverter(e?Nd.getInstance(this.firestore,e):null))}}class Jfe{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Hy(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class QR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ro(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Hy(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Jfe(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Hy(this._firestore,r))})}isEqual(e){return rG(this._delegate,e._delegate)}}class Hp extends ro{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new as(this.firestore,e):null}doc(e){try{return new as(this.firestore,void 0===e?yb(this._delegate):yb(this._delegate,e))}catch(t){throw no(t,"doc()","CollectionReference.doc()")}}add(e){return function Sfe(n,e){const t=St(n.firestore,En),r=yb(n),i=Pb(n.converter,e);return $p(t,[Cb(Md(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Qn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new as(this.firestore,t))}isEqual(e){return Bq(this._delegate,e._delegate)}withConverter(e){return new Hp(this.firestore,this._delegate.withConverter(e?Nd.getInstance(this.firestore,e):null))}}function xd(n){return St(n,$n)}class YR{constructor(...e){this._delegate=new Ac(...e)}static documentId(){return new YR(Bn.keyField().canonicalString())}isEqual(e){return(e=(0,S.Ku)(e))instanceof Ac&&this._delegate._internalPath.isEqual(e._internalPath)}}class kd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function jfe(){return new kR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new kd(e)}static delete(){const e=function Bfe(){return new ky("deleteField")}();return e._methodName="FieldValue.delete",new kd(e)}static arrayUnion(...e){const t=function $fe(...n){return new FR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new kd(t)}static arrayRemove(...e){const t=function Hfe(...n){return new LR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new kd(t)}static increment(e){const t=function zfe(n){return new VR("increment",n)}(e);return t._methodName="FieldValue.increment",new kd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Zfe={Firestore:fG,GeoPoint:vb,Timestamp:Kn,Blob:jy,Transaction:pG,WriteBatch:gG,DocumentReference:as,DocumentSnapshot:$y,Query:ro,QueryDocumentSnapshot:Hy,QuerySnapshot:QR,CollectionReference:Hp,FieldPath:YR,FieldValue:kd,setLogLevel:function Yfe(n){!function kle(n){bl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function yG(n,e){return function tpe(n,e=fM){return new tn(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function JR(n,e){return yG(n,e).pipe($e(t=>({payload:t,type:"query"})))}!function epe(n){(function Xfe(n,e){n.INTERNAL.registerComponent(new _c.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Zfe)))})(n,(e,t)=>new fG(e,t,new Qfe)),n.registerVersion("@firebase/firestore-compat","0.3.34")}(Ia.A);class vG{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=IG(r,t);return new wG(i,o,this.afs)}snapshotChanges(){return function npe(n,e){return yG(n,e).pipe(Kw(void 0),SM(),$e(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Wr)}valueChanges(e={}){return this.snapshotChanges().pipe($e(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return kn(this.ref.get(e)).pipe(Wr)}}function Ob(n,e){return JR(n,e).pipe(Kw(void 0),SM(),$e(t=>{const[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const l=o.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function EG(n,e,t){return Ob(n,t).pipe(Bf((r,i)=>function rpe(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function ipe(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ZR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ZR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ZR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),I4(),$e(r=>r.map(i=>({type:i.type,payload:i}))))}function ZR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function CG(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class wG{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Ob(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe($e(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Kw(void 0),SM(),ss(([r,i])=>i.length>0||!r),$e(([,r])=>r),Wr)}auditTrail(e){return this.stateChanges(e).pipe(Bf((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=CG(e);return EG(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wr)}valueChanges(e={}){return JR(this.query,this.afs.schedulers.outsideAngular).pipe($e(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Wr)}get(e){return kn(this.query.get(e)).pipe(Wr)}add(e){return this.ref.add(e)}doc(e){return new vG(this.ref.doc(e),this.afs)}}class ope{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Ob(this.query,this.afs.schedulers.outsideAngular).pipe($e(t=>t.filter(r=>e.indexOf(r.type)>-1)),ss(t=>t.length>0),Wr):Ob(this.query,this.afs.schedulers.outsideAngular).pipe(Wr)}auditTrail(e){return this.stateChanges(e).pipe(Bf((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=CG(e);return EG(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wr)}valueChanges(e={}){return JR(this.query,this.afs.schedulers.outsideAngular).pipe($e(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Wr)}get(e){return kn(this.query.get(e)).pipe(Wr)}}const spe=new Ce("angularfire2.enableFirestorePersistence"),ape=new Ce("angularfire2.firestore.persistenceSettings"),cpe=new Ce("angularfire2.firestore.settings"),lpe=new Ce("angularfire2.firestore.use-emulator");function IG(n,e=(t=>t)){return{query:e(n),ref:n}}let upe=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,h,g,_,v,w,b,A,N,R){this.schedulers=c;const V=DI(t,a,r),ie=h;g&&AM(V,a,_,w,b,A,v,N),[this.firestore,this.persistenceEnabled$]=_M(`${V.name}.firestore`,"AngularFirestore",V.name,()=>{const be=a.runOutsideAngular(()=>V.firestore());if(o&&be.settings(o),ie&&be.useEmulator(...ie),i&&!$w(s)){const Ae=()=>{try{return kn(be.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(x){return typeof console<"u"&&console.warn(x),Ze(!1)}};return[be,a.runOutsideAngular(Ae)]}return[be,Ze(!1)]},[o,ie,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:s}=IG(i,r),a=this.schedulers.ngZone.run(()=>o);return new wG(a,s,this)}collectionGroup(t,r){const i=r||(s=>s),o=this.firestore.collectionGroup(t);return new ope(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new vG(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(fe(ey),fe(ty,8),fe(spe,8),fe(cpe,8),fe(ts),fe(Ot),fe(mM),fe(ape,8),fe(lpe,8),fe(MI,8),fe(EM,8),fe(CM,8),fe(wM,8),fe(IM,8),fe(bM,8),fe(TM,8),fe(gM,8))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),dpe=(()=>{class n{constructor(t){this.firestore=t}getPosts(){return this.firestore.collection("posts",t=>t.orderBy("timestamp","desc")).valueChanges({idField:"id"})}addPost(t){this.firestore.collection("posts").add(t).then(()=>console.log("Post added successfully")).catch(r=>console.error("Error adding post:",r))}deletePost(t){return this.firestore.collection("posts").doc(t).delete().then(()=>console.log("Post deleted")).catch(r=>console.error("Error deleting post:",r))}static#e=this.\u0275fac=function(r){return new(r||n)(fe(upe))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const bG_firebaseConfig={apiKey:"AIzaSyC9rn4K-vmkdd8KnJoEFpNolJu-oXO3GFY",authDomain:"boblovers2-815af.firebaseapp.com",projectId:"boblovers2-815af",storageBucket:"boblovers2-815af.firebasestorage.app",messagingSenderId:"281124227593",appId:"1:281124227593:web:13804a8453f5931f8806d8",measurementId:"G-WTYRTMW5H3"};class Rb{}class Nb{}class cs{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),s=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof cs?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new cs;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof cs?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class hpe{encodeKey(e){return TG(e)}encodeValue(e){return TG(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const ppe=/%(\d[a-f0-9])/gi,gpe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function TG(n){return encodeURIComponent(n).replace(ppe,(e,t)=>gpe[t]??e)}function xb(n){return`${n}`}class Hl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new hpe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function fpe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[s,a]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(xb):[xb(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Hl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(xb(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(xb(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class mpe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function AG(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function SG(n){return typeof Blob<"u"&&n instanceof Blob}function PG(n){return typeof FormData<"u"&&n instanceof FormData}class zy{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function _pe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new cs,this.context??=new mpe,this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new Hl,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||AG(this.body)||SG(this.body)||PG(this.body)||function ype(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Hl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||PG(this.body)?null:SG(this.body)?this.body.type||null:AG(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Hl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress;let l=e.headers||this.headers,h=e.params||this.params;const g=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((_,v)=>_.set(v,e.setHeaders[v]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((_,v)=>_.set(v,e.setParams[v]),h)),new zy(t,r,s,{params:h,headers:l,context:g,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}}var zl=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(zl||{});class XR{constructor(e,t=200,r="OK"){this.headers=e.headers||new cs,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class kb extends XR{constructor(e={}){super(e),this.type=zl.ResponseHeader}clone(e={}){return new kb({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Fd extends XR{constructor(e={}){super(e),this.type=zl.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Fd({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class zp extends XR{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function eN(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let MG=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof zy)o=t;else{let c,l;c=i.headers instanceof cs?i.headers:new cs(i.headers),i.params&&(l=i.params instanceof Hl?i.params:new Hl({fromObject:i.params})),o=new zy(t,r,void 0!==i.body?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const s=Ze(o).pipe(Uf(c=>this.handler.handle(c)));if(t instanceof zy||"events"===i.observe)return s;const a=s.pipe(ss(c=>c instanceof Fd));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe($e(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe($e(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe($e(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe($e(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Hl).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,eN(i,r))}post(t,r,i={}){return this.request("POST",t,eN(i,r))}put(t,r,i={}){return this.request("PUT",t,eN(i,r))}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Rb))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();const Cpe=/^\)\]\}',?\n/;function OG(n){if(n.url)return n.url;const e="X-Request-URL".toLocaleLowerCase();return n.headers.get(e)}let tN=(()=>{class n{constructor(){this.fetchImpl=le(Ipe,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=le(Ot)}handle(t){return new tn(r=>{const i=new AbortController;return this.doRequest(t,i.signal,r).then(nN,o=>r.error(new zp({error:o}))),()=>i.abort()})}doRequest(t,r,i){var o=this;return(0,ae.A)(function*(){const s=o.createRequestInit(t);let a;try{const w=o.fetchImpl(t.urlWithParams,{signal:r,...s});(function bpe(n){n.then(nN,nN)})(w),i.next({type:zl.Sent}),a=yield w}catch(w){return void i.error(new zp({error:w,status:w.status??0,statusText:w.statusText,url:t.urlWithParams,headers:w.headers}))}const c=new cs(a.headers),l=a.statusText,h=OG(a)??t.urlWithParams;let g=a.status,_=null;if(t.reportProgress&&i.next(new kb({headers:c,status:g,statusText:l,url:h})),a.body){const w=a.headers.get("content-length"),b=[],A=a.body.getReader();let R,V,N=0;const ie=typeof Zone<"u"&&Zone.current;yield o.ngZone.runOutsideAngular((0,ae.A)(function*(){for(;;){const{done:Ae,value:x}=yield A.read();if(Ae)break;if(b.push(x),N+=x.length,t.reportProgress){V="text"===t.responseType?(V??"")+(R??=new TextDecoder).decode(x,{stream:!0}):void 0;const P=()=>i.next({type:zl.DownloadProgress,total:w?+w:void 0,loaded:N,partialText:V});ie?ie.run(P):P()}}}));const be=o.concatChunks(b,N);try{const Ae=a.headers.get("Content-Type")??"";_=o.parseBody(t,be,Ae)}catch(Ae){return void i.error(new zp({error:Ae,headers:new cs(a.headers),status:a.status,statusText:a.statusText,url:OG(a)??t.urlWithParams}))}}0===g&&(g=_?200:0),g>=200&&g<300?(i.next(new Fd({body:_,headers:c,status:g,statusText:l,url:h})),i.complete()):i.error(new zp({error:_,headers:c,status:g,statusText:l,url:h}))})()}parseBody(t,r,i){switch(t.responseType){case"json":const o=(new TextDecoder).decode(r).replace(Cpe,"");return""===o?null:JSON.parse(o);case"text":return(new TextDecoder).decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(t){const r={},i=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>r[o]=s.join(",")),r.Accept??="application/json, text/plain, */*",!r["Content-Type"]){const o=t.detectContentTypeHeader();null!==o&&(r["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:i}}concatChunks(t,r){const i=new Uint8Array(r);let o=0;for(const s of t)i.set(s,o),o+=s.length;return i}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();class Ipe{}function nN(){}function RG(n,e){return e(n)}function Tpe(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const Spe=new Ce(""),qy=new Ce(""),NG=new Ce(""),xG=new Ce("",{providedIn:"root",factory:()=>!0});function Ppe(){let n=null;return(e,t)=>{null===n&&(n=(le(Spe,{optional:!0})??[]).reduceRight(Tpe,RG));const r=le(ac);if(le(xG)){const o=r.add();return n(e,t).pipe(O_(()=>r.remove(o)))}return n(e,t)}}let kG=(()=>{class n extends Rb{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=le(ac),this.contributeToStability=le(xG)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(qy),...this.injector.get(NG,[])]));this.chain=r.reduceRight((i,o)=>function Ape(n,e,t){return(r,i)=>Ai(t,()=>e(r,o=>n(o,i)))}(i,o,this.injector),RG)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(O_(()=>this.pendingTasks.remove(r)))}return this.chain(t,r=>this.backend.handle(r))}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Nb),fe($r))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();const Npe=/^\)\]\}',?\n/;let LG=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Q(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?kn(r.\u0275loadImpl()):Ze(null)).pipe(Lr(()=>new tn(o=>{const s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((b,A)=>s.setRequestHeader(b,A.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const b=t.detectContentTypeHeader();null!==b&&s.setRequestHeader("Content-Type",b)}if(t.responseType){const b=t.responseType.toLowerCase();s.responseType="json"!==b?b:"text"}const a=t.serializeBody();let c=null;const l=()=>{if(null!==c)return c;const b=s.statusText||"OK",A=new cs(s.getAllResponseHeaders()),N=function xpe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return c=new kb({headers:A,status:s.status,statusText:b,url:N}),c},h=()=>{let{headers:b,status:A,statusText:N,url:R}=l(),V=null;204!==A&&(V=typeof s.response>"u"?s.responseText:s.response),0===A&&(A=V?200:0);let ie=A>=200&&A<300;if("json"===t.responseType&&"string"==typeof V){const be=V;V=V.replace(Npe,"");try{V=""!==V?JSON.parse(V):null}catch(Ae){V=be,ie&&(ie=!1,V={error:Ae,text:V})}}ie?(o.next(new Fd({body:V,headers:b,status:A,statusText:N,url:R||void 0})),o.complete()):o.error(new zp({error:V,headers:b,status:A,statusText:N,url:R||void 0}))},g=b=>{const{url:A}=l(),N=new zp({error:b,status:s.status||0,statusText:s.statusText||"Unknown Error",url:A||void 0});o.error(N)};let _=!1;const v=b=>{_||(o.next(l()),_=!0);let A={type:zl.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(A.total=b.total),"text"===t.responseType&&s.responseText&&(A.partialText=s.responseText),o.next(A)},w=b=>{let A={type:zl.UploadProgress,loaded:b.loaded};b.lengthComputable&&(A.total=b.total),o.next(A)};return s.addEventListener("load",h),s.addEventListener("error",g),s.addEventListener("timeout",g),s.addEventListener("abort",g),t.reportProgress&&(s.addEventListener("progress",v),null!==a&&s.upload&&s.upload.addEventListener("progress",w)),s.send(a),o.next({type:zl.Sent}),()=>{s.removeEventListener("error",g),s.removeEventListener("abort",g),s.removeEventListener("load",h),s.removeEventListener("timeout",g),t.reportProgress&&(s.removeEventListener("progress",v),null!==a&&s.upload&&s.upload.removeEventListener("progress",w)),s.readyState!==s.DONE&&s.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Cj))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();const rN=new Ce(""),VG=new Ce("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),UG=new Ce("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class BG{}let Lpe=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=uj(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Eo),fe(ts),fe(VG))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();function Vpe(n,e){const t=n.url.toLowerCase();if(!le(rN)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=le(BG).getToken(),i=le(UG);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var ql=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(ql||{});function Upe(...n){const e=[MG,LG,kG,{provide:Rb,useExisting:kG},{provide:Nb,useFactory:()=>le(tN,{optional:!0})??le(LG)},{provide:qy,useValue:Vpe,multi:!0},{provide:rN,useValue:!0},{provide:BG,useClass:Lpe}];for(const t of n)e.push(...t.\u0275providers);return function Ya(n){return{\u0275providers:n}}(e)}const jG=new Ce("");function Bpe(){return function Ld(n,e){return{\u0275kind:n,\u0275providers:e}}(ql.LegacyInterceptors,[{provide:jG,useFactory:Ppe},{provide:qy,useExisting:jG,multi:!0}])}let jpe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Wi({type:n});static#n=this.\u0275inj=ui({providers:[Upe(Bpe())]})}return n})(),Lb=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.router=r,this.http=i,this.serverUrl="https://boblovers.ddns.net",this.loggedIn=new te(!1),this.afAuth.authState.subscribe(o=>{this.loggedIn.next(!!o)})}isLoggedIn(){return this.loggedIn.asObservable()}signup(t,r,i,o=""){return this.afAuth.createUserWithEmailAndPassword(t,r).then(s=>s.user?.updateProfile({displayName:i,photoURL:o}).then(()=>{alert("Signup successful!"),this.router.navigate(["/profile"])})).catch(s=>{alert(s.message)})}login(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(()=>{this.router.navigate(["/profile"])}).catch(i=>{alert(i.message)})}logout(){return this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}getUserProfile(){return this.afAuth.authState}uploadProfilePicture(t){const r=new FormData;return r.append("profilePic",t),this.http.post(`${this.serverUrl}/upload`,r,{withCredentials:!1,observe:"body",responseType:"json"}).pipe(ad(i=>(console.error("Error uploading image:",i),M_(()=>new Error("Image upload failed")))))}updateProfile(t,r){var i=this;return(0,ae.A)(function*(){const o=yield i.afAuth.currentUser;o&&(yield o.updateProfile({displayName:t,photoURL:r}))})()}getCurrentUserUid(){var t=this;return(0,ae.A)(function*(){const r=yield t.afAuth.currentUser;return r?r.uid:null})()}static#e=this.\u0275fac=function(r){return new(r||n)(fe(MI),fe(Bs),fe(MG))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ype(n,e){1&n&&_n(0,"img",9),2&n&&rt("src",It().userPhotoURL,ll)}function Jpe(n,e){if(1&n&&(se(0,"span"),_e(1),re()),2&n){const t=It();Oe(),qr(t.userName)}}function Zpe(n,e){1&n&&(se(0,"div",10)(1,"p"),_e(2,"No posts yet! Be the first to share a thought about Bob."),re()())}function Xpe(n,e){1&n&&_n(0,"img",9),2&n&&rt("src",It().$implicit.photoURL,ll)}function ege(n,e){if(1&n){const t=yo();se(0,"div",11)(1,"div",12),an(2,Xpe,1,1,"img",3),se(3,"span",13),_e(4),re(),se(5,"span",14),_e(6),nd(7,"date"),re()(),se(8,"p"),_e(9),re(),se(10,"button",15),At("click",function(){const i=Dn(t).$implicit;return Mn(It().deletePost(i.id))}),_e(11,"Delete"),re()()}if(2&n){const t=e.$implicit;rt("@fadeSlideIn",void 0),Oe(2),rt("ngIf",t.photoURL),Oe(2),qr(t.displayName||"Anonymous"),Oe(2),qr(_P(7,5,t.timestamp,"medium")),Oe(3),qr(t.content)}}let tge=(()=>{class n{constructor(t,r){this.firebaseService=t,this.authService=r,this.posts=[],this.newPost="",this.userPhotoURL=null,this.userName=null}ngOnInit(){this.authService.getUserProfile().subscribe(t=>{t&&(this.userPhotoURL=t.photoURL||"assets/default-profile.png",this.userName=t.displayName||"Anonymous")}),this.firebaseService.getPosts().subscribe(t=>{this.posts=t.map(r=>({...r,timestamp:r.timestamp instanceof Ia.A.firestore.Timestamp?r.timestamp.toDate():r.timestamp})),console.log("Posts retrieved on init:",this.posts)})}addPost(){this.newPost.trim()&&(this.firebaseService.addPost({content:this.newPost,displayName:this.userName,photoURL:this.userPhotoURL,timestamp:new Date}),this.newPost="")}deletePost(t){this.firebaseService.deletePost(t).then(()=>{this.posts=this.posts.filter(r=>r.id!==t)})}static#e=this.\u0275fac=function(r){return new(r||n)(ve(dpe),ve(Lb))};static#t=this.\u0275cmp=sr({type:n,selectors:[["app-blog"]],decls:12,vars:6,consts:[[1,"blog-container"],[1,"post-creator"],[1,"user-info"],["alt","User Profile","class","profile-pic",3,"src",4,"ngIf"],[4,"ngIf"],["placeholder","Write your thoughts here...",3,"ngModelChange","ngModel"],[3,"click","disabled"],["class","empty-state",4,"ngIf"],["class","post-card",4,"ngFor","ngForOf"],["alt","User Profile",1,"profile-pic",3,"src"],[1,"empty-state"],[1,"post-card"],[1,"post-header"],[1,"post-author"],[1,"post-date"],[1,"delete-button",3,"click"]],template:function(r,i){1&r&&(se(0,"div",0)(1,"h2"),_e(2,"Bob\u2019s Blog"),re(),se(3,"div",1)(4,"div",2),an(5,Ype,1,1,"img",3)(6,Jpe,2,1,"span",4),re(),se(7,"textarea",5),ya("ngModelChange",function(s){return cc(i.newPost,s)||(i.newPost=s),s}),re(),se(8,"button",6),At("click",function(){return i.addPost()}),_e(9,"Post"),re()(),an(10,Zpe,3,0,"div",7)(11,ege,12,8,"div",8),re()),2&r&&(Oe(5),rt("ngIf",i.userPhotoURL),Oe(),rt("ngIf",i.userName),Oe(),_a("ngModel",i.newPost),Oe(),rt("disabled",!i.newPost.trim()),Oe(2),rt("ngIf",0===i.posts.length),Oe(),rt("ngForOf",i.posts))},dependencies:[_l,fc,El,Xf,dd,_j],styles:[".highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}.blog-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;background-color:#f7f9fc;font-family:Roboto,sans-serif;border-radius:10px;box-shadow:0 4px 10px #0000001a}.blog-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#eb94bd;margin-bottom:1.5rem;font-size:2rem}.post-creator[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:20px;padding:20px;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a}.post-creator[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;margin-bottom:10px;box-shadow:0 2px 4px #0000001a;object-fit:cover;transition:transform .3s}.post-creator[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.post-creator[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:700;color:#eb94bd;margin-bottom:10px}.post-creator[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;max-width:750px;height:100px;padding:10px;font-size:1rem;border:1px solid #e2e8f0;border-radius:5px;margin-bottom:10px;resize:vertical;box-shadow:0 4px 8px #0000000d}.post-creator[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#eb94bd;color:#fff;padding:10px 20px;border:none;border-radius:5px;font-size:1rem;cursor:pointer;transition:background-color .3s,transform .2s;width:100%;max-width:200px}.post-creator[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#e369a2;transform:translateY(-2px)}.post-creator[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#fbeaf2;cursor:not-allowed}.empty-state[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem;color:#2e4057;margin-top:20px}.post-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#fff;padding:20px;border-radius:8px;box-shadow:0 4px 8px #0000001a;margin:15px 0;position:relative;transition:transform .3s}.post-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.post-card[_ngcontent-%COMP%]   .post-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.post-card[_ngcontent-%COMP%]   .post-header[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;margin-right:10px;box-shadow:0 2px 4px #0000001a}.post-card[_ngcontent-%COMP%]   .post-header[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:700;color:#eb94bd;font-size:1rem}.post-card[_ngcontent-%COMP%]   .post-content[_ngcontent-%COMP%]{padding:15px 0;font-size:1rem;color:#333;line-height:1.6;word-wrap:break-word}.post-card[_ngcontent-%COMP%]   .post-date[_ngcontent-%COMP%]{font-size:.8rem;color:#6c8bb2;position:absolute;bottom:10px;left:10px}.post-card[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{background:none;border:none;color:#51719a;cursor:pointer;font-size:.8rem;position:absolute;bottom:10px;right:10px;transition:color .3s}.post-card[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]:hover{color:#eb94bd}@media (max-width: 768px){.blog-container[_ngcontent-%COMP%]{padding:10px}.post-creator[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:.9rem;height:80px}.post-creator[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;font-size:.9rem}.post-card[_ngcontent-%COMP%]{padding:15px}.post-card[_ngcontent-%COMP%]   .profile-pic[_ngcontent-%COMP%]{width:40px;height:40px}.post-card[_ngcontent-%COMP%]   .post-content[_ngcontent-%COMP%]{font-size:1rem}.post-card[_ngcontent-%COMP%]   .post-date[_ngcontent-%COMP%]{font-size:.7rem}}"],data:{animation:[rle("fadeSlideIn",[f4(":enter",[h4("0.5s ease-out",ole([J_({opacity:0,transform:"translateY(20px)",offset:0}),J_({opacity:1,transform:"translateY(0)",offset:1})]))]),f4(":leave",[h4("0.3s ease-in",J_({opacity:0,transform:"translateY(-20px)"}))])])]}})}return n})();function nge(n,e){if(1&n&&(se(0,"h2"),_e(1),re()),2&n){const t=It();Oe(),qr(t.isLoginMode?"Welcome Back!":"Join Us!")}}function rge(n,e){1&n&&(se(0,"p"),_e(1,"Please enter your login details"),re())}function ige(n,e){1&n&&(se(0,"p"),_e(1,"Create an account to join our community!"),re())}function oge(n,e){if(1&n){const t=yo();se(0,"div",5)(1,"label",13),_e(2,"Display Name"),re(),se(3,"input",14),ya("ngModelChange",function(i){Dn(t);const o=It();return cc(o.displayName,i)||(o.displayName=i),Mn(i)}),re()()}if(2&n){const t=It();Oe(3),_a("ngModel",t.displayName)}}function sge(n,e){if(1&n){const t=yo();se(0,"div",5)(1,"label",15),_e(2,"Profile Photo URL"),re(),se(3,"input",16),ya("ngModelChange",function(i){Dn(t);const o=It();return cc(o.photoURL,i)||(o.photoURL=i),Mn(i)}),re()()}if(2&n){const t=It();Oe(3),_a("ngModel",t.photoURL)}}function cge(n,e){1&n&&_n(0,"img",16),2&n&&rt("src",It(2).photoURL,ll)}function lge(n,e){1&n&&_n(0,"img",17)}function uge(n,e){if(1&n&&(se(0,"div")(1,"div",14),an(2,cge,1,1,"img",15)(3,lge,1,0,"ng-template",null,1,yP),re(),se(5,"p")(6,"strong"),_e(7,"Email:"),re(),_e(8),re(),se(9,"p")(10,"strong"),_e(11,"Name:"),re(),_e(12),re()()),2&n){const t=e.ngIf,r=fw(4),i=It();Oe(2),rt("ngIf",i.photoURL)("ngIfElse",r),Oe(6),td(" ",t.email,""),Oe(4),td(" ",t.displayName||"No Name Provided","")}}function dge(n,e){if(1&n&&(se(0,"span"),_e(1),re()),2&n){const t=It();Oe(),qr(t.selectedFileName)}}function hge(n,e){if(1&n&&(se(0,"div",18),_n(1,"progress",19),se(2,"span"),_e(3),nd(4,"number"),re()()),2&n){const t=It();Oe(),rt("value",t.uploadPercent),Oe(2),td("",_P(4,2,t.uploadPercent,"1.0-0"),"%")}}const fge=[{path:"",component:wae},{path:"about",component:bae},{path:"login",component:(()=>{class n{constructor(t){this.authService=t,this.email="",this.password="",this.displayName="",this.photoURL="",this.isLoginMode=!0}toggleMode(){this.isLoginMode=!this.isLoginMode}onSubmit(){this.isLoginMode?this.authService.login(this.email,this.password):this.authService.signup(this.email,this.password,this.displayName,this.photoURL)}logout(){this.authService.logout()}static#e=this.\u0275fac=function(r){return new(r||n)(ve(Lb))};static#t=this.\u0275cmp=sr({type:n,selectors:[["app-login"]],decls:21,vars:9,consts:[["loginForm","ngForm"],[1,"login-wrapper"],[1,"form-container"],[4,"ngIf"],[3,"ngSubmit"],[1,"input-group"],["for","email"],["type","email","id","email","name","email","required","","placeholder","Enter your email",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","","placeholder","Enter your password",3,"ngModelChange","ngModel"],["class","input-group",4,"ngIf"],["type","submit",1,"submit-btn"],[1,"toggle-btn",3,"click"],["for","displayName"],["type","text","id","displayName","name","displayName","required","","placeholder","Enter your display name",3,"ngModelChange","ngModel"],["for","photoURL"],["type","text","id","photoURL","name","photoURL","placeholder","Optional: Enter a photo URL",3,"ngModelChange","ngModel"]],template:function(r,i){if(1&r){const o=yo();se(0,"div",1)(1,"div",2),an(2,nge,2,1,"h2",3)(3,rge,2,0,"p",3)(4,ige,2,0,"p",3),se(5,"form",4,0),At("ngSubmit",function(){return Dn(o),Mn(i.onSubmit())}),se(7,"div",5)(8,"label",6),_e(9,"Email"),re(),se(10,"input",7),ya("ngModelChange",function(a){return Dn(o),cc(i.email,a)||(i.email=a),Mn(a)}),re()(),se(11,"div",5)(12,"label",8),_e(13,"Password"),re(),se(14,"input",9),ya("ngModelChange",function(a){return Dn(o),cc(i.password,a)||(i.password=a),Mn(a)}),re()(),an(15,oge,4,1,"div",10)(16,sge,4,1,"div",10),se(17,"button",11),_e(18),re()(),se(19,"button",12),At("click",function(){return Dn(o),Mn(i.toggleMode())}),_e(20),re()()()}2&r&&(Oe(2),rt("ngIf",i.isLoginMode),Oe(),rt("ngIf",i.isLoginMode),Oe(),rt("ngIf",!i.isLoginMode),Oe(6),_a("ngModel",i.email),Oe(4),_a("ngModel",i.password),Oe(),rt("ngIf",!i.isLoginMode),Oe(),rt("ngIf",!i.isLoginMode),Oe(2),qr(i.isLoginMode?"Login":"Sign Up"),Oe(2),td(" ",i.isLoginMode?"New here? Sign Up!":"Already have an account? Login"," "))},dependencies:[fc,SI,El,Xf,_I,Y_,dd,rp],styles:[".highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}.login-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f7f9fc}.form-container[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:1rem;box-shadow:0 8px 16px #0000001a;text-align:center;max-width:400px;width:100%;transition:transform .3s ease-in-out;font-family:Roboto,sans-serif}.form-container[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 8px 16px #0003}h2[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;color:#2e4057;margin-bottom:.5rem;animation:_ngcontent-%COMP%_fadeIn 1s ease-in-out}p[_ngcontent-%COMP%]{font-size:.9rem;color:#333;margin-bottom:1rem}.input-group[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:left}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.8rem;color:#2e4057}.input-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;padding:.8rem;font-size:1rem;color:#333;background:#f7f9fc;border:1px solid #e2e8f0;border-radius:.5rem;transition:all .3s ease-in-out}.input-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .input-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus{outline:none;border-color:#eb94bd;box-shadow:0 0 5px #eb94bd80}.submit-btn[_ngcontent-%COMP%]{width:100%;padding:.8rem;background:#eb94bd;color:#fff;font-size:1rem;font-weight:700;border:none;border-radius:.5rem;cursor:pointer;transition:background .3s ease-in-out}.submit-btn[_ngcontent-%COMP%]:hover{background:#f3bfd8}.toggle-btn[_ngcontent-%COMP%]{background:transparent;color:#2e4057;border:none;cursor:pointer;margin-top:1rem;font-size:.9rem;transition:color .3s ease-in-out}.toggle-btn[_ngcontent-%COMP%]:hover{color:#e369a2}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}"]})}return n})()},{path:"gallery",component:Pae},{path:"bob-life",component:Dae},{path:"name-tree",component:Lae},{path:"anthem",component:Wce},{path:"quiz",component:Gce},{path:"faq",component:Jce},{path:"secret-blog",component:nle},{path:"blog",component:tge},{path:"profile",component:(()=>{class n{constructor(t){this.authService=t,this.displayName="",this.photoURL="",this.uploadPercent=null,this.selectedFileName=null,this.user=this.authService.getUserProfile()}ngOnInit(){this.user.subscribe(t=>{t&&(this.displayName=t.displayName||"",this.photoURL=t.photoURL||"")})}onFileSelected(t){const r=t.target.files?.[0];r&&(this.selectedFileName=r.name,this.authService.uploadProfilePicture(r).subscribe(i=>{this.photoURL=i.url,this.updateProfile()},i=>{console.error("Error uploading image:",i),alert("Failed to upload image")}))}updateProfile(){this.authService.updateProfile(this.displayName,this.photoURL).then(()=>{alert("Profile updated successfully!")}).catch(t=>{console.error("Error updating profile:",t),alert("Failed to update profile")})}static#e=this.\u0275fac=function(r){return new(r||n)(ve(Lb))};static#t=this.\u0275cmp=sr({type:n,selectors:[["app-profile"]],decls:21,vars:6,consts:[["photoUpload",""],["defaultPhoto",""],[1,"profile-wrapper"],[1,"profile-container"],[4,"ngIf"],[3,"ngSubmit"],["for","displayName"],["type","text","id","displayName","name","displayName","placeholder","Enter new display name",3,"ngModelChange","ngModel"],["for","photoUpload"],[1,"custom-file-upload"],["type","file","id","photoUpload","accept","image/*",2,"display","none",3,"change"],["type","button",1,"choose-file-btn",3,"click"],["type","submit"],["class","upload-progress",4,"ngIf"],[1,"profile-picture"],["class","profile-image","alt","Profile Photo",3,"src",4,"ngIf","ngIfElse"],["alt","Profile Photo",1,"profile-image",3,"src"],["src","assets/default-profile.png","alt","Default Profile Photo",1,"profile-image"],[1,"upload-progress"],["max","100",3,"value"]],template:function(r,i){if(1&r){const o=yo();se(0,"div",2)(1,"div",3)(2,"h2"),_e(3,"Your Profile"),re(),an(4,uge,13,4,"div",4),nd(5,"async"),se(6,"form",5),At("ngSubmit",function(){return Dn(o),Mn(i.updateProfile())}),se(7,"label",6),_e(8,"Update Display Name"),re(),se(9,"input",7),ya("ngModelChange",function(a){return Dn(o),cc(i.displayName,a)||(i.displayName=a),Mn(a)}),re(),se(10,"label",8),_e(11,"Upload Profile Picture"),re(),se(12,"div",9)(13,"input",10,0),At("change",function(a){return Dn(o),Mn(i.onFileSelected(a))}),re(),se(15,"button",11),At("click",function(){return Dn(o),Mn(fw(14).click())}),_e(16,"Choose File"),re(),an(17,dge,2,1,"span",4),re(),se(18,"button",12),_e(19,"Update Profile"),re(),an(20,hge,5,5,"div",13),re()()()}2&r&&(Oe(4),rt("ngIf",g_(5,4,i.user)),Oe(5),_a("ngModel",i.displayName),Oe(8),rt("ngIf",i.selectedFileName),Oe(3),rt("ngIf",null!==i.uploadPercent))},dependencies:[fc,SI,El,Xf,_I,dd,rp,tD,vj],styles:[".profile-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f7f9fc}.profile-container[_ngcontent-%COMP%]{max-width:500px;width:100%;padding:2rem;background:#fff;border-radius:1rem;box-shadow:0 4px 8px #00000026;text-align:center;font-family:Roboto,sans-serif}.profile-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2e4057;font-size:1.8rem;margin-bottom:1rem}.profile-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#333;margin:.5rem 0;line-height:1.4}.profile-picture[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:130px;height:130px;border-radius:50%;overflow:hidden;box-shadow:0 4px 8px #00000026;transition:transform .3s ease,box-shadow .3s ease;margin:1rem auto}.profile-picture[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 8px 16px #00000040}.profile-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:filter .3s ease}.profile-image[_ngcontent-%COMP%]:hover{filter:brightness(.9)}form[_ngcontent-%COMP%]{margin-top:1.5rem;text-align:left}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.95rem;color:#2e4057;margin-bottom:.5rem;font-weight:500}form[_ngcontent-%COMP%]   .custom-file-upload[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}form[_ngcontent-%COMP%]   .custom-file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}form[_ngcontent-%COMP%]   .custom-file-upload[_ngcontent-%COMP%]   .choose-file-btn[_ngcontent-%COMP%]{padding:.6rem 1.2rem;font-size:.95rem;font-weight:700;color:#fff;background:#eb94bd;border:none;border-radius:.5rem;cursor:pointer;transition:background .3s ease}form[_ngcontent-%COMP%]   .custom-file-upload[_ngcontent-%COMP%]   .choose-file-btn[_ngcontent-%COMP%]:hover{background:#e369a2}form[_ngcontent-%COMP%]   .custom-file-upload[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;color:#2e4057}form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;padding:.8rem;margin-bottom:1rem;border:1px solid #e2e8f0;border-radius:.5rem;font-size:1rem;color:#333;background:#f7f9fc;transition:border .3s ease}form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{border-color:#eb94bd;box-shadow:0 0 5px #eb94bd4d;outline:none}form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.8rem;font-size:1.1rem;font-weight:700;color:#fff;background:#eb94bd;border:none;border-radius:.5rem;cursor:pointer;transition:background .3s ease}form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:#e369a2}.upload-progress[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:1rem}.upload-progress[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]{width:80%;height:8px;border-radius:4px;overflow:hidden;appearance:none}.upload-progress[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-webkit-progress-bar{background-color:#e2e8f0}.upload-progress[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]::-webkit-progress-value{background-color:#eb94bd}.upload-progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;color:#2e4057}"]})}return n})()},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"**",component:Kce}];let pge=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Wi({type:n});static#n=this.\u0275inj=ui({imports:[uH.forRoot(fge),uH]})}return n})();function gge(n,e){if(1&n){const t=yo();se(0,"li")(1,"a",17),At("click",function(){return Dn(t),Mn(It().closeMenu())}),_e(2,"Login/Sign up"),re()()}}function mge(n,e){if(1&n){const t=yo();se(0,"li")(1,"a",18),At("click",function(){return Dn(t),Mn(It().closeMenu())}),_e(2,"Account"),re()()}}function _ge(n,e){if(1&n){const t=yo();se(0,"li")(1,"a",19),At("click",function(){return Dn(t),Mn(It().logout())})("click",function(){return Dn(t),Mn(It().closeMenu())}),_e(2,"Logout"),re()()}}let yge=(()=>{class n{constructor(t){this.authService=t,this.menuOpen=!1}ngOnInit(){this.isLoggedIn=this.authService.isLoggedIn()}logout(){this.authService.logout(),this.closeMenu()}toggleMenu(){this.menuOpen=!this.menuOpen}closeMenu(){this.menuOpen=!1}static#e=this.\u0275fac=function(r){return new(r||n)(ve(Lb))};static#t=this.\u0275cmp=sr({type:n,selectors:[["app-header"]],decls:44,vars:13,consts:[["role","banner",1,"site-header"],[1,"wrapper"],["rel","author","routerLink","/",1,"site-title"],[1,"site-nav"],["aria-label","Menu Toggle",1,"menu-toggle",3,"click"],[1,"hamburger"],["routerLink","/","routerLinkActive","active",1,"menu-item",3,"click"],[4,"ngIf"],["routerLink","/about","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/gallery","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/bob-life","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/name-tree","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/quiz","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/anthem","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/faq","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/blog","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/secret-blog","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/login","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/profile","routerLinkActive","active",1,"menu-item",3,"click"],[1,"menu-item",3,"click"]],template:function(r,i){1&r&&(se(0,"header",0)(1,"div",1)(2,"a",2),_e(3,"Bob the Cat"),re(),se(4,"nav",3)(5,"div",4),At("click",function(){return i.toggleMenu()}),_n(6,"span",5),re(),se(7,"ul")(8,"li")(9,"a",6),At("click",function(){return i.closeMenu()}),_e(10,"Home"),re()(),an(11,gge,3,0,"li",7),nd(12,"async"),an(13,mge,3,0,"li",7),nd(14,"async"),an(15,_ge,3,0,"li",7),nd(16,"async"),se(17,"li")(18,"a",8),At("click",function(){return i.closeMenu()}),_e(19,"About Bob"),re()(),se(20,"li")(21,"a",9),At("click",function(){return i.closeMenu()}),_e(22,"Gallery"),re()(),se(23,"li")(24,"a",10),At("click",function(){return i.closeMenu()}),_e(25,"A Day in Bob's Life"),re()(),se(26,"li")(27,"a",11),At("click",function(){return i.closeMenu()}),_e(28,"Bob's Names"),re()(),se(29,"li")(30,"a",12),At("click",function(){return i.closeMenu()}),_e(31,"Bob Quiz"),re()(),se(32,"li")(33,"a",13),At("click",function(){return i.closeMenu()}),_e(34,"Bob's Anthem"),re()(),se(35,"li")(36,"a",14),At("click",function(){return i.closeMenu()}),_e(37,"FAQ"),re()(),se(38,"li")(39,"a",15),At("click",function(){return i.closeMenu()}),_e(40,"Blog"),re()(),se(41,"li")(42,"a",16),At("click",function(){return i.closeMenu()}),_e(43,"Secret Momma Page"),re()()()()()()),2&r&&(Oe(5),Xu("active",i.menuOpen),Oe(2),Xu("active",i.menuOpen),Oe(4),rt("ngIf",!g_(12,7,i.isLoggedIn)),Oe(2),rt("ngIf",g_(14,9,i.isLoggedIn)),Oe(2),rt("ngIf",g_(16,11,i.isLoggedIn)))},dependencies:[fc,Zf,nH,tD],styles:['.highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}.site-header[_ngcontent-%COMP%]{background-color:#f7f9fc;border-bottom:1px solid #8ea5c3;position:sticky;top:0;width:100%;z-index:1000}.site-header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 20px}.site-header[_ngcontent-%COMP%]   .site-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#eb94bd;text-decoration:none;font-family:Roboto,sans-serif}.site-header[_ngcontent-%COMP%]   .site-title[_ngcontent-%COMP%]:hover{color:#e369a2}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]{position:relative}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]{display:none;cursor:pointer;width:30px;height:25px;flex-direction:column;justify-content:space-between}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%], .site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:before, .site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#2e4057;height:3px;border-radius:2px;transition:all .3s ease}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:before, .site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:after{position:absolute;width:100%}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:before{transform:translateY(-8px)}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:after{transform:translateY(8px)}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle.active[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]{background-color:transparent}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle.active[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle.active[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:flex;margin:0}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:20px}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{color:#2e4057;text-decoration:none;font-size:1rem;transition:color .3s ease;font-family:Roboto,sans-serif}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover, .site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu-item.active[_ngcontent-%COMP%]{color:#eb94bd}@media (max-width: 768px){.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]{display:flex}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background-color:#f7f9fc;flex-direction:column;width:250px;max-height:600px;overflow-y:auto;padding:10px 0;transition:max-height .3s ease;box-shadow:0 4px 6px #0000001a}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul.active[_ngcontent-%COMP%]{max-height:600px}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{display:block;padding:18px 20px;border-bottom:1px solid #8ea5c3}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background-color:#fff}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul.active[_ngcontent-%COMP%]{display:flex}.site-header[_ngcontent-%COMP%]   .site-title[_ngcontent-%COMP%]{font-size:1.5rem}}.menu-item.active[_ngcontent-%COMP%]{font-weight:700;color:#eb94bd}']})}return n})(),vge=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=sr({type:n,selectors:[["app-footer"]],decls:11,vars:0,consts:[[1,"site-footer"],[1,"wrapper"],[1,"footer-content"],["href","https://www.instagram.com/bobbatausa/","target","_blank",1,"footer-link"],[1,"footer-nav"]],template:function(r,i){1&r&&(se(0,"footer",0)(1,"div",1)(2,"div",2)(3,"h2"),_e(4,"Bob the Cat"),re(),se(5,"a",3),_e(6,"Follow Bob on Instagram"),re(),se(7,"p"),_e(8,"Follow along Bob on her daily adventures!"),re()(),se(9,"div",4),_n(10,"ul"),re()()())},styles:[".highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}.site-footer[_ngcontent-%COMP%]{background-color:#f7f9fc;color:#333;padding:3rem 0;font-family:Roboto,sans-serif;border-top:1px solid #cccccc}.site-footer[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:2rem}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]{flex:1;min-width:250px;text-align:left}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:2rem;color:#eb94bd}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5rem;font-size:1.1rem}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]{display:flex;gap:1rem}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{color:#333;font-size:1.8rem;transition:color .3s}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]:hover{color:#eb94bd}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]{flex:1;min-width:200px}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.75rem}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .footer-nav-item[_ngcontent-%COMP%]{color:#333;text-decoration:none;font-size:1.1rem;transition:color .3s}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .footer-nav-item[_ngcontent-%COMP%]:hover{color:#eb94bd}@media (max-width: 768px){.site-footer[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%], .site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]{min-width:unset}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]{margin-top:2rem}}"]})}return n})(),Ege=(()=>{class n{constructor(){this.title="my-angular-website"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=sr({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[["aria-label","Content",1,"page-content"],[1,"wrapper"]],template:function(r,i){1&r&&(_n(0,"app-header"),se(1,"main",0)(2,"div",1),_n(3,"router-outlet"),re()(),_n(4,"app-footer"))},dependencies:[OD,yge,vge]})}return n})();function QG(n){return new Q(3e3,!1)}function Gl(n){switch(n.length){case 0:return new Z_;case 1:return n[0];default:return new p4(n)}}function YG(n,e,t=new Map,r=new Map){const i=[],o=[];let s=-1,a=null;if(e.forEach(c=>{const l=c.get("offset"),h=l==s,g=h&&a||new Map;c.forEach((_,v)=>{let w=v,b=_;if("offset"!==v)switch(w=n.normalizePropertyName(w,i),b){case"!":b=t.get(v);break;case mc:b=r.get(v);break;default:b=n.normalizeStyleValue(v,w,b,i)}g.set(w,b)}),h||o.push(g),a=g,s=l}),i.length)throw function Hge(n){return new Q(3502,!1)}();return o}function iN(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&oN(t,"start",n)));break;case"done":n.onDone(()=>r(t&&oN(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&oN(t,"destroy",n)))}}function oN(n,e,t){const o=sN(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),s=n._data;return null!=s&&(o._data=s),o}function sN(n,e,t,r,i="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function jo(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function JG(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const tme=typeof document>"u"?null:document.documentElement;function aN(n){const e=n.parentNode||n.host||null;return e===tme?null:e}let Vd=null,ZG=!1;function XG(n,e){for(;e;){if(e===n)return!0;e=aN(e)}return!1}function e9(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let cN=(()=>{class n{validateStyleProperty(t){return function rme(n){Vd||(Vd=function ime(){return typeof document<"u"?document.body:null}()||{},ZG=!!Vd.style&&"WebkitAppearance"in Vd.style);let e=!0;return Vd.style&&!function nme(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Vd.style,!e&&ZG&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Vd.style)),e}(t)}containsElement(t,r){return XG(t,r)}getParentElement(t){return aN(t)}query(t,r,i){return e9(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,s,a=[],c){return new Z_(i,o)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})();class lN{static#e=this.NOOP=new cN}class uN{}const sme=1e3,dN="ng-enter",Vb="ng-leave",Ub="ng-trigger",Bb=".ng-trigger",n9="ng-animating",hN=".ng-animating";function Pc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:fN(parseFloat(e[1]),e[2])}function fN(n,e){return"s"===e?n*sme:n}function jb(n,e,t){return n.hasOwnProperty("duration")?n:function cme(n,e,t){let i,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(QG()),{duration:0,delay:0,easing:""};i=fN(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(o=fN(parseFloat(c),a[4]));const l=a[5];l&&(s=l)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(function Cge(){return new Q(3100,!1)}()),a=!0),o<0&&(e.push(function wge(){return new Q(3101,!1)}()),a=!0),a&&e.splice(c,0,QG())}return{duration:i,delay:o,easing:s}}(n,e,t)}function Ra(n,e,t){e.forEach((r,i)=>{const o=gN(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r})}function Ud(n,e){e.forEach((t,r)=>{const i=gN(r);n.style[i]=""})}function Gy(n){return Array.isArray(n)?1==n.length?n[0]:function ile(n,e=null){return{type:at.Sequence,steps:n,options:e}}(n):n}const pN=new RegExp("{{\\s*(.+?)\\s*}}","g");function i9(n){let e=[];if("string"==typeof n){let t;for(;t=pN.exec(n);)e.push(t[1]);pN.lastIndex=0}return e}function Wy(n,e,t){const r=`${n}`,i=r.replace(pN,(o,s)=>{let a=e[s];return null==a&&(t.push(function bge(n){return new Q(3003,!1)}()),a=""),a.toString()});return i==r?n:i}const dme=/-+([a-z0-9])/g;function gN(n){return n.replace(dme,(...e)=>e[1].toUpperCase())}function $o(n,e,t){switch(e.type){case at.Trigger:return n.visitTrigger(e,t);case at.State:return n.visitState(e,t);case at.Transition:return n.visitTransition(e,t);case at.Sequence:return n.visitSequence(e,t);case at.Group:return n.visitGroup(e,t);case at.Animate:return n.visitAnimate(e,t);case at.Keyframes:return n.visitKeyframes(e,t);case at.Style:return n.visitStyle(e,t);case at.Reference:return n.visitReference(e,t);case at.AnimateChild:return n.visitAnimateChild(e,t);case at.AnimateRef:return n.visitAnimateRef(e,t);case at.Query:return n.visitQuery(e,t);case at.Stagger:return n.visitStagger(e,t);default:throw function Tge(n){return new Q(3004,!1)}()}}function mN(n,e){return window.getComputedStyle(n)[e]}const pme=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class o9 extends uN{normalizePropertyName(e,t){return gN(e)}normalizeStyleValue(e,t,r,i){let o="";const s=r.toString().trim();if(pme.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function Age(n,e){return new Q(3005,!1)}())}return s+o}}const $b="*";const Hb=new Set(["true","1"]),zb=new Set(["false","0"]);function s9(n,e){const t=Hb.has(n)||zb.has(n),r=Hb.has(e)||zb.has(e);return(i,o)=>{let s=n==$b||n==i,a=e==$b||e==o;return!s&&t&&"boolean"==typeof i&&(s=i?Hb.has(n):zb.has(n)),!a&&r&&"boolean"==typeof o&&(a=o?Hb.has(e):zb.has(e)),s&&a}}const yme=new RegExp("s*:selfs*,?","g");function _N(n,e,t,r){return new vme(n).build(e,t,r)}class vme{constructor(e){this._driver=e}build(e,t,r){const i=new wme(t);return this._resetContextStyleTimingState(i),$o(this,Gy(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push(function Sge(){return new Q(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==at.State){const c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(h=>{c.name=h,o.push(this.visitState(c,t))}),c.name=l}else if(a.type==at.Transition){const c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,s.push(c)}else t.errors.push(function Pge(){return new Q(3007,!1)}())}),{type:at.Trigger,name:e.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{i9(c).forEach(l=>{s.hasOwnProperty(l)||o.add(l)})})}),o.size&&t.errors.push(function Dge(n,e){return new Q(3008,!1)}(0,o.values()))}return{type:at.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=$o(this,Gy(e.animation),t),i=function gme(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function mme(n,e,t){if(":"==n[0]){const c=function _me(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Uge(n){return new Q(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Vge(n){return new Q(3015,!1)}()),e;const i=r[1],o=r[2],s=r[3];e.push(s9(i,s)),"<"==o[0]&&(i!=$b||s!=$b)&&e.push(s9(s,i))}(r,t,e)):t.push(n),t}(e.expr,t.errors);return{type:at.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Bd(e.options)}}visitSequence(e,t){return{type:at.Sequence,steps:e.steps.map(r=>$o(this,r,t)),options:Bd(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(s=>{t.currentTime=r;const a=$o(this,s,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:at.Group,steps:o,options:Bd(e.options)}}visitAnimate(e,t){const r=function bme(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return yN(jb(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=yN(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=jb(t,e);return yN(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:J_({});if(o.type==at.Keyframes)i=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;const l={};r.easing&&(l.easing=r.easing),s=J_(l)}t.currentTime+=r.duration+r.delay;const c=this.visitStyle(s,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:at.Animate,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===mc?r.push(a):t.errors.push(new Q(3002,!1)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let c of a.values())if(c.toString().indexOf("{{")>=0){o=!0;break}}),{type:at.Style,styles:r,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,c)=>{const l=t.collectedStyles.get(t.currentQuerySelector),h=l.get(c);let g=!0;h&&(o!=i&&o>=h.startTime&&i<=h.endTime&&(t.errors.push(function Oge(n,e,t,r,i){return new Q(3010,!1)}()),g=!1),o=h.startTime),g&&l.set(c,{startTime:o,endTime:i}),t.options&&function ume(n,e,t){const r=e.params||{},i=i9(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function Ige(n){return new Q(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:at.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Rge(){return new Q(3011,!1)}()),r;let o=0;const s=[];let a=!1,c=!1,l=0;const h=e.steps.map(N=>{const R=this._makeStyleAst(N,t);let V=null!=R.offset?R.offset:function Ime(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(R.styles),ie=0;return null!=V&&(o++,ie=R.offset=V),c=c||ie<0||ie>1,a=a||ie<l,l=ie,s.push(ie),R});c&&t.errors.push(function Nge(){return new Q(3012,!1)}()),a&&t.errors.push(function xge(){return new Q(3200,!1)}());const g=e.steps.length;let _=0;o>0&&o<g?t.errors.push(function kge(){return new Q(3202,!1)}()):0==o&&(_=1/(g-1));const v=g-1,w=t.currentTime,b=t.currentAnimateTimings,A=b.duration;return h.forEach((N,R)=>{const V=_>0?R==v?1:_*R:s[R],ie=V*A;t.currentTime=w+b.delay+ie,b.duration=ie,this._validateStyleAst(N,t),N.offset=V,r.styles.push(N)}),r}visitReference(e,t){return{type:at.Reference,animation:$o(this,Gy(e.animation),t),options:Bd(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:at.AnimateChild,options:Bd(e.options)}}visitAnimateRef(e,t){return{type:at.AnimateRef,animation:this.visitReference(e.animation,t),options:Bd(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,s]=function Eme(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(yme,"")),n=n.replace(/@\*/g,Bb).replace(/@\w+/g,t=>Bb+"-"+t.slice(1)).replace(/:animating/g,hN),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,jo(t.collectedStyles,t.currentQuerySelector,new Map);const a=$o(this,Gy(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:at.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Bd(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Fge(){return new Q(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:jb(e.timings,t.errors,!0);return{type:at.Stagger,animation:$o(this,Gy(e.animation),t),timings:r,options:null}}}class wme{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Bd(n){return n?(n={...n}).params&&(n.params=function Cme(n){return n?{...n}:null}(n.params)):n={},n}function yN(n,e,t){return{duration:n,delay:e,easing:t}}function vN(n,e,t,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class qb{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Sme=new RegExp(":enter","g"),Dme=new RegExp(":leave","g");function EN(n,e,t,r,i,o=new Map,s=new Map,a,c,l=[]){return(new Mme).buildKeyframes(n,e,t,r,i,o,s,a,c,l)}class Mme{buildKeyframes(e,t,r,i,o,s,a,c,l,h=[]){l=l||new qb;const g=new CN(e,t,l,i,o,h,[]);g.options=c;const _=c.delay?Pc(c.delay):0;g.currentTimeline.delayNextStep(_),g.currentTimeline.setStyles([s],null,g.errors,c),$o(this,r,g);const v=g.timelines.filter(w=>w.containsAnimation());if(v.length&&a.size){let w;for(let b=v.length-1;b>=0;b--){const A=v[b];if(A.element===t){w=A;break}}w&&!w.allowOnlyTimelineStyles()&&w.setStyles([a],null,g.errors,c)}return v.length?v.map(w=>w.buildKeyframes()):[vN(t,[],[],[],0,_,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const o=i?.delay;if(o){const s="number"==typeof o?o:Pc(Wy(o,i?.params??{},t.errors));r.delayNextStep(s)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const s=null!=r.duration?Pc(r.duration):null,a=null!=r.delay?Pc(r.delay):null;return 0!==s&&e.forEach(c=>{const l=t.appendInstructionToTimeline(c,s,a);o=Math.max(o,l.duration+l.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),$o(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){i.previousNode.type==at.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Gb);const s=Pc(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>$o(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?Pc(e.options.delay):0;e.steps.forEach(s=>{const a=t.createSubContext(e.options);o&&a.delayNextStep(o),$o(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return jb(t.params?Wy(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;o.type==at.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*o),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?Pc(i.delay):0;o&&(t.previousNode.type===at.Style||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Gb);let s=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,h)=>{t.currentQueryIndex=h;const g=t.createSubContext(e.options,l);o&&g.delayNextStep(o),l===t.element&&(c=g.currentTimeline),$o(this,e.animation,g),g.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,g.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1);let c=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const h=t.currentTimeline;c&&h.delayNextStep(c);const g=h.currentTime;$o(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-g+(i.startTime-r.currentTimeline.startTime)}}const Gb={};class CN{constructor(e,t,r,i,o,s,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Gb,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new Wb(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Pc(r.duration)),null!=r.delay&&(i.delay=Pc(r.delay));const o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Wy(o[a],s,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new CN(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Gb,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new Ome(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,s){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(Sme,"."+this._enterClassName)).replace(Dme,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=r);0!==r&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!o&&0==a.length&&s.push(function Lge(n){return new Q(3014,!1)}()),a}}class Wb{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Wb(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||mc),this._currentKeyframe.set(t,mc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},s=function Rme(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r??=e.keys();for(let o of r)t.set(o,mc)}else for(let[o,s]of i)t.set(o,s)}),t}(e,this._globalTimelineStyles);for(let[a,c]of s){const l=Wy(c,o,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??mc),this._updateStyle(a,l)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,c)=>{const l=new Map([...this._backFill,...a]);l.forEach((h,g)=>{"!"===h?e.add(g):h===mc&&t.add(g)}),r||l.set("offset",c/this.duration),i.push(l)});const o=[...e.values()],s=[...t.values()];if(r){const a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return vN(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}}class Ome extends Wb{constructor(e,t,r,i,o,s,a=!1){super(e,t,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],s=r+t,a=t/s,c=new Map(e[0]);c.set("offset",0),o.push(c);const l=new Map(e[0]);l.set("offset",l9(a)),o.push(l);const h=e.length-1;for(let g=1;g<=h;g++){let _=new Map(e[g]);const v=_.get("offset");_.set("offset",l9((t+v*r)/s)),o.push(_)}r=s,t=0,i="",e=o}return vN(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function l9(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}function u9(n,e,t,r,i,o,s,a,c,l,h,g,_){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:h,totalTime:g,errors:_}}const wN={};class d9{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Nme(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,s,a,c,l,h){const g=[],_=this.ast.options&&this.ast.options.params||wN,w=this.buildStyles(r,a&&a.params||wN,g),b=c&&c.params||wN,A=this.buildStyles(i,b,g),N=new Set,R=new Map,V=new Map,ie="void"===i,be={params:h9(b,_),delay:this.ast.options?.delay},Ae=h?[]:EN(e,t,this.ast.animation,o,s,w,A,be,l,g);let x=0;return Ae.forEach(P=>{x=Math.max(P.duration+P.delay,x)}),g.length?u9(t,this._triggerName,r,i,ie,w,A,[],[],R,V,x,g):(Ae.forEach(P=>{const F=P.element,B=jo(R,F,new Set);P.preStyleProps.forEach(G=>B.add(G));const $=jo(V,F,new Set);P.postStyleProps.forEach(G=>$.add(G)),F!==t&&N.add(F)}),u9(t,this._triggerName,r,i,ie,w,A,Ae,[...N.values()],R,V,x))}}function h9(n,e){const t={...e};return Object.entries(n).forEach(([r,i])=>{null!=i&&(t[r]=i)}),t}class xme{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=h9(e,this.defaultParams);return this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=Wy(s,i,t));const c=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,c,s,t),r.set(a,s)})}),r}}class Fme{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new xme(i.style,i.options&&i.options.params||{},r))}),f9(this.states,"true","1"),f9(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new d9(e,i,this.states))}),this.fallbackTransition=function Lme(n,e,t){return new d9(n,{type:at.Transition,animation:{type:at.Sequence,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(s=>s.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function f9(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Vme=new qb;class Ume{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],o=_N(this._driver,t,r,[]);if(r.length)throw function zge(n){return new Q(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=YG(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let s;const a=new Map;if(o?(s=EN(this._driver,t,o,dN,Vb,new Map,new Map,r,Vme,i),s.forEach(h=>{const g=jo(a,h.element,new Map);h.postStyleProps.forEach(_=>g.set(_,null))})):(i.push(function qge(){return new Q(3300,!1)}()),s=[]),i.length)throw function Gge(n){return new Q(3504,!1)}();a.forEach((h,g)=>{h.forEach((_,v)=>{h.set(v,this._driver.computeStyle(g,v,mc))})});const l=Gl(s.map(h=>{const g=a.get(h.element);return this._buildPlayer(h,new Map,g)}));return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Wge(n){return new Q(3301,!1)}();return t}listen(e,t,r,i){const o=sN(t,"","","");return iN(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const p9="ng-animate-queued",IN="ng-animate-disabled",zme=[],g9={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},qme={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},js="__ng_removed";class bN{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Qme(n){return n??null}(r?e.value:e),r){const{value:o,...s}=e;this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Ky="void",TN=new bN(Ky);class Gme{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ls(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Kge(n,e){return new Q(3302,!1)}();if(null==r||0==r.length)throw function Qge(n){return new Q(3303,!1)}();if(!function Yme(n){return"start"==n||"done"==n}(r))throw function Yge(n,e){return new Q(3400,!1)}();const o=jo(this._elementListeners,e,[]),s={name:t,phase:r,callback:i};o.push(s);const a=jo(this._engine.statesByElement,e,new Map);return a.has(t)||(ls(e,Ub),ls(e,Ub+"-"+t),a.set(t,TN)),()=>{this._engine.afterFlush(()=>{const c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Jge(n){return new Q(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),s=new AN(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(ls(e,Ub),ls(e,Ub+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const l=new bN(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=TN),l.value!==Ky&&c.value===l.value){if(!function Xme(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(c.params,l.params)){const b=[],A=o.matchStyles(c.value,c.params,b),N=o.matchStyles(l.value,l.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{Ud(e,A),Ra(e,N)})}return}const _=jo(this._engine.playersByElement,e,[]);_.forEach(b=>{b.namespaceId==this.id&&b.triggerName==t&&b.queued&&b.destroy()});let v=o.matchTransition(c.value,l.value,e,l.params),w=!1;if(!v){if(!i)return;v=o.fallbackTransition,w=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:v,fromState:c,toState:l,player:s,isFallbackTransition:w}),w||(ls(e,p9),s.onStart(()=>{qp(e,p9)})),s.onDone(()=>{let b=this.players.indexOf(s);b>=0&&this.players.splice(b,1);const A=this._engine.playersByElement.get(e);if(A){let N=A.indexOf(s);N>=0&&A.splice(N,1)}}),this.players.push(s),_.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Bb,!0);r.forEach(i=>{if(i[js])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),s=new Map;if(o){const a=[];if(o.forEach((c,l)=>{if(s.set(l,c.value),this._triggers.has(l)){const h=this.trigger(e,l,Ky,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),r&&Gl(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const s=o.name;if(i.has(s))return;i.add(s);const c=this._triggers.get(s).fallbackTransition,l=r.get(s)||TN,h=new bN(Ky),g=new AN(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:l,toState:h,player:g,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[js];(!o||o===g9)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ls(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){const c=sN(o,r.triggerName,r.fromState.value,r.toState.value);c._data=e,iN(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,s=i.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class Wme{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Gme(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){const c=i.get(a);if(c){const l=r.indexOf(c);r.splice(l+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(Kb(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Kb(t))return;const o=t[js];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){const s=this._fetchNamespace(e);s&&s.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ls(e,IN)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),qp(e,IN))}removeNode(e,t,r){if(Kb(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[js]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return Kb(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Bb,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,hN,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Gl(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[js];if(t&&t.setForRemoval){if(e[js]=g9,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(IN)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ls(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Gl(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Zge(n){return new Q(3402,!1)}()}_flushAnimations(e,t){const r=new qb,i=[],o=new Map,s=[],a=new Map,c=new Map,l=new Map,h=new Set;this.disabledNodes.forEach(qe=>{h.add(qe);const Ke=this.driver.query(qe,".ng-animate-queued",!0);for(let Xe=0;Xe<Ke.length;Xe++)h.add(Ke[Xe])});const g=this.bodyNode,_=Array.from(this.statesByElement.keys()),v=y9(_,this.collectedEnterElements),w=new Map;let b=0;v.forEach((qe,Ke)=>{const Xe=dN+b++;w.set(Ke,Xe),qe.forEach(kt=>ls(kt,Xe))});const A=[],N=new Set,R=new Set;for(let qe=0;qe<this.collectedLeaveElements.length;qe++){const Ke=this.collectedLeaveElements[qe],Xe=Ke[js];Xe&&Xe.setForRemoval&&(A.push(Ke),N.add(Ke),Xe.hasAnimation?this.driver.query(Ke,".ng-star-inserted",!0).forEach(kt=>N.add(kt)):R.add(Ke))}const V=new Map,ie=y9(_,Array.from(N));ie.forEach((qe,Ke)=>{const Xe=Vb+b++;V.set(Ke,Xe),qe.forEach(kt=>ls(kt,Xe))}),e.push(()=>{v.forEach((qe,Ke)=>{const Xe=w.get(Ke);qe.forEach(kt=>qp(kt,Xe))}),ie.forEach((qe,Ke)=>{const Xe=V.get(Ke);qe.forEach(kt=>qp(kt,Xe))}),A.forEach(qe=>{this.processLeaveNode(qe)})});const be=[],Ae=[];for(let qe=this._namespaceList.length-1;qe>=0;qe--)this._namespaceList[qe].drainQueuedTransitions(t).forEach(Xe=>{const kt=Xe.player,Tr=Xe.element;if(be.push(kt),this.collectedEnterElements.length){const fr=Tr[js];if(fr&&fr.setForMove){if(fr.previousTriggersValues&&fr.previousTriggersValues.has(Xe.triggerName)){const Oc=fr.previousTriggersValues.get(Xe.triggerName),So=this.statesByElement.get(Xe.element);if(So&&So.has(Xe.triggerName)){const Rc=So.get(Xe.triggerName);Rc.value=Oc,So.set(Xe.triggerName,Rc)}}return void kt.destroy()}}const ps=!g||!this.driver.containsElement(g,Tr),hr=V.get(Tr),Hn=w.get(Tr),zn=this._buildInstruction(Xe,r,Hn,hr,ps);if(zn.errors&&zn.errors.length)return void Ae.push(zn);if(ps)return kt.onStart(()=>Ud(Tr,zn.fromStyles)),kt.onDestroy(()=>Ra(Tr,zn.toStyles)),void i.push(kt);if(Xe.isFallbackTransition)return kt.onStart(()=>Ud(Tr,zn.fromStyles)),kt.onDestroy(()=>Ra(Tr,zn.toStyles)),void i.push(kt);const ou=[];zn.timelines.forEach(fr=>{fr.stretchStartingKeyframe=!0,this.disabledNodes.has(fr.element)||ou.push(fr)}),zn.timelines=ou,r.append(Tr,zn.timelines),s.push({instruction:zn,player:kt,element:Tr}),zn.queriedElements.forEach(fr=>jo(a,fr,[]).push(kt)),zn.preStyleProps.forEach((fr,Oc)=>{if(fr.size){let So=c.get(Oc);So||c.set(Oc,So=new Set),fr.forEach((Rc,su)=>So.add(su))}}),zn.postStyleProps.forEach((fr,Oc)=>{let So=l.get(Oc);So||l.set(Oc,So=new Set),fr.forEach((Rc,su)=>So.add(su))})});if(Ae.length){const qe=[];Ae.forEach(Ke=>{qe.push(function Xge(n,e){return new Q(3505,!1)}())}),be.forEach(Ke=>Ke.destroy()),this.reportError(qe)}const x=new Map,P=new Map;s.forEach(qe=>{const Ke=qe.element;r.has(Ke)&&(P.set(Ke,Ke),this._beforeAnimationBuild(qe.player.namespaceId,qe.instruction,x))}),i.forEach(qe=>{const Ke=qe.element;this._getPreviousPlayers(Ke,!1,qe.namespaceId,qe.triggerName,null).forEach(kt=>{jo(x,Ke,[]).push(kt),kt.destroy()})});const F=A.filter(qe=>E9(qe,c,l)),B=new Map;_9(B,this.driver,R,l,mc).forEach(qe=>{E9(qe,c,l)&&F.push(qe)});const G=new Map;v.forEach((qe,Ke)=>{_9(G,this.driver,new Set(qe),c,"!")}),F.forEach(qe=>{const Ke=B.get(qe),Xe=G.get(qe);B.set(qe,new Map([...Ke?.entries()??[],...Xe?.entries()??[]]))});const L=[],fs=[],iu={};s.forEach(qe=>{const{element:Ke,player:Xe,instruction:kt}=qe;if(r.has(Ke)){if(h.has(Ke))return Xe.onDestroy(()=>Ra(Ke,kt.toStyles)),Xe.disabled=!0,Xe.overrideTotalTime(kt.totalTime),void i.push(Xe);let Tr=iu;if(P.size>1){let hr=Ke;const Hn=[];for(;hr=hr.parentNode;){const zn=P.get(hr);if(zn){Tr=zn;break}Hn.push(hr)}Hn.forEach(zn=>P.set(zn,Tr))}const ps=this._buildAnimation(Xe.namespaceId,kt,x,o,G,B);if(Xe.setRealPlayer(ps),Tr===iu)L.push(Xe);else{const hr=this.playersByElement.get(Tr);hr&&hr.length&&(Xe.parentPlayer=Gl(hr)),i.push(Xe)}}else Ud(Ke,kt.fromStyles),Xe.onDestroy(()=>Ra(Ke,kt.toStyles)),fs.push(Xe),h.has(Ke)&&i.push(Xe)}),fs.forEach(qe=>{const Ke=o.get(qe.element);if(Ke&&Ke.length){const Xe=Gl(Ke);qe.setRealPlayer(Xe)}}),i.forEach(qe=>{qe.parentPlayer?qe.syncPlayerEvents(qe.parentPlayer):qe.destroy()});for(let qe=0;qe<A.length;qe++){const Ke=A[qe],Xe=Ke[js];if(qp(Ke,Vb),Xe&&Xe.hasAnimation)continue;let kt=[];if(a.size){let ps=a.get(Ke);ps&&ps.length&&kt.push(...ps);let hr=this.driver.query(Ke,hN,!0);for(let Hn=0;Hn<hr.length;Hn++){let zn=a.get(hr[Hn]);zn&&zn.length&&kt.push(...zn)}}const Tr=kt.filter(ps=>!ps.destroyed);Tr.length?Jme(this,Ke,Tr):this.processLeaveNode(Ke)}return A.length=0,L.forEach(qe=>{this.players.push(qe),qe.onDone(()=>{qe.destroy();const Ke=this.players.indexOf(qe);this.players.splice(Ke,1)}),qe.play()}),L}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let s=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(s=a)}else{const a=this.playersByElement.get(e);if(a){const c=!o||o==Ky;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||s.push(l)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(e,t,r){const o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const l=c.element,h=l!==o,g=jo(r,l,[]);this._getPreviousPlayers(l,h,s,a,t.toState).forEach(v=>{const w=v.getRealPlayer();w.beforeDestroy&&w.beforeDestroy(),v.destroy(),g.push(v)})}Ud(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,s){const a=t.triggerName,c=t.element,l=[],h=new Set,g=new Set,_=t.timelines.map(w=>{const b=w.element;h.add(b);const A=b[js];if(A&&A.removedBeforeQueried)return new Z_(w.duration,w.delay);const N=b!==c,R=function Zme(n){const e=[];return v9(n,e),e}((r.get(b)||zme).map(x=>x.getRealPlayer())).filter(x=>!!x.element&&x.element===b),V=o.get(b),ie=s.get(b),be=YG(this._normalizer,w.keyframes,V,ie),Ae=this._buildPlayer(w,be,R);if(w.subTimeline&&i&&g.add(b),N){const x=new AN(e,a,b);x.setRealPlayer(Ae),l.push(x)}return Ae});l.forEach(w=>{jo(this.playersByQueriedElement,w.element,[]).push(w),w.onDone(()=>function Kme(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,w.element,w))}),h.forEach(w=>ls(w,n9));const v=Gl(_);return v.onDestroy(()=>{h.forEach(w=>qp(w,n9)),Ra(c,t.toStyles)}),g.forEach(w=>{jo(i,w,[]).push(v)}),v}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Z_(e.duration,e.delay)}}class AN{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Z_,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>iN(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){jo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Kb(n){return n&&1===n.nodeType}function m9(n,e){const t=n.style.display;return n.style.display=e??"none",t}function _9(n,e,t,r,i){const o=[];t.forEach(c=>o.push(m9(c)));const s=[];r.forEach((c,l)=>{const h=new Map;c.forEach(g=>{const _=e.computeStyle(l,g,i);h.set(g,_),(!_||0==_.length)&&(l[js]=qme,s.push(l))}),n.set(l,h)});let a=0;return t.forEach(c=>m9(c,o[a++])),s}function y9(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),o=new Map;function s(a){if(!a)return 1;let c=o.get(a);if(c)return c;const l=a.parentNode;return c=t.has(l)?l:i.has(l)?1:s(l),o.set(a,c),c}return e.forEach(a=>{const c=s(a);1!==c&&t.get(c).push(a)}),t}function ls(n,e){n.classList?.add(e)}function qp(n,e){n.classList?.remove(e)}function Jme(n,e,t){Gl(t).onDone(()=>n.processLeaveNode(e))}function v9(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof p4?v9(r.players,e):e.push(r)}}function E9(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class Qy{constructor(e,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new Wme(e.body,t,r),this._timelineEngine=new Ume(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const s=e+"-"+i;let a=this._triggerCache[s];if(!a){const c=[],h=_N(this._driver,o,c,[]);if(c.length)throw function $ge(n,e){return new Q(3404,!1)}();a=function kme(n,e,t){return new Fme(n,e,t)}(i,h,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,s]=JG(r);this._timelineEngine.command(o,t,s,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[s,a]=JG(r);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}class Yy{static#e=this.initialStylesByElement=new WeakMap;constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=Yy.initialStylesByElement.get(e);i||Yy.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Ra(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ra(this._element,this._initialStyles),this._endStyles&&(Ra(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Yy.initialStylesByElement.delete(this._element),this._startStyles&&(Ud(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ud(this._element,this._endStyles),this._endStyles=null),Ra(this._element,this._initialStyles),this._state=3)}}function SN(n){let e=null;return n.forEach((t,r)=>{(function t_e(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class C9{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:mN(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class w9{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return XG(e,t)}getParentElement(e){return aN(e)}query(e,t,r){return e9(e,t,r)}computeStyle(e,t,r){return mN(e,t)}animate(e,t,r,i,o,s=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(c.easing=o);const l=new Map,h=s.filter(v=>v instanceof C9);(function hme(n,e){return 0===n||0===e})(r,i)&&h.forEach(v=>{v.currentSnapshot.forEach((w,b)=>l.set(b,w))});let g=function lme(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}(t).map(v=>new Map(v));g=function fme(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(a=>s.set(a,mN(n,a)))}}return e}(e,g,l);const _=function e_e(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=SN(e[0]),e.length>1&&(r=SN(e[e.length-1]))):e instanceof Map&&(t=SN(e)),t||r?new Yy(n,t,r):null}(e,g);return new C9(e,g,c,_)}}const I9="@.disabled";class b9{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==I9?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class n_e extends b9{constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==I9?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function r_e(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function i_e(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}class o_e{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,o)=>{const s=o?.parentNode(i);s&&o.removeChild(s,i)}}createRenderer(e,t){const i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){const l=this._rendererCache;let h=l.get(i);return h||(h=new b9("",i,this.engine,()=>l.delete(i)),l.set(i,h)),h}const o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);const a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(o,s,e,l.name,l)};return t.data.animation.forEach(a),new n_e(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId)return void this._zone.run(()=>t(r));const i=this._animationCallbacksBuffer;0==i.length&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const T9=[{provide:uN,useFactory:function a_e(){return new o9}},{provide:Qy,useClass:(()=>{class n extends Qy{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(fe(Eo),fe(lN),fe(uN))};static#t=this.\u0275prov=xe({token:n,factory:n.\u0275fac})}return n})()},{provide:GC,useFactory:function c_e(n,e,t){return new o_e(n,e,t)},deps:[uD,Qy,Ot]}],PN=[{provide:lN,useFactory:()=>new w9},{provide:H1,useValue:"BrowserAnimations"},...T9],A9=[{provide:lN,useClass:cN},{provide:H1,useValue:"NoopAnimations"},...T9];let l_e=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?A9:PN}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Wi({type:n});static#n=this.\u0275inj=ui({providers:PN,imports:[$j]})}return n})();const S9="@firebase/database";let DN="";function MN(n){DN=n}class h_e{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,S.As)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,S.$L)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class f_e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,S.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const D9=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h_e(e)}}catch{}return new f_e},jd=D9("localStorage"),ON=D9("sessionStorage"),Gp=new Vo.Vy("@firebase/database"),M9=function(){let n=1;return function(){return n++}}(),O9=function(n){const e=(0,S.kj)(n),t=new S.gz;t.update(e);const r=t.digest();return S.K3.encodeByteArray(r)},Jy=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Jy.apply(null,r):e+="object"==typeof r?(0,S.As)(r):r,e+=" "}return e};let $d=null,R9=!0;const N9=function(n,e){(0,S.vA)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Gp.logLevel=Vo.$b.VERBOSE,$d=Gp.log.bind(Gp),e&&ON.set("logging_enabled",!0)):"function"==typeof n?$d=n:($d=null,ON.remove("logging_enabled"))},ii=function(...n){if(!0===R9&&(R9=!1,null===$d&&!0===ON.get("logging_enabled")&&N9(!0)),$d){const e=Jy.apply(null,n);$d(e)}},Zy=function(n){return function(...e){ii(n,...e)}},RN=function(...n){const e="FIREBASE INTERNAL ERROR: "+Jy(...n);Gp.error(e)},Na=function(...n){const e=`FIREBASE FATAL ERROR: ${Jy(...n)}`;throw Gp.error(e),new Error(e)},Vi=function(...n){const e="FIREBASE WARNING: "+Jy(...n);Gp.warn(e)},Yb=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Wl="[MIN_NAME]",Dc="[MAX_NAME]",Hd=function(n,e){if(n===e)return 0;if(n===Wl||e===Dc)return-1;if(e===Wl||n===Dc)return 1;{const t=F9(n),r=F9(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},m_e=function(n,e){return n===e?0:n<e?-1:1},Xy=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,S.As)(e))},NN=function(n){if("object"!=typeof n||null===n)return(0,S.As)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,S.As)(e[r]),t+=":",t+=NN(n[e[r]]);return t+="}",t},x9=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function oi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const k9=function(n){(0,S.vA)(!Yb(n),"Invalid JSON number");const r=1023;let i,o,s,a,c;0===n?(o=0,s=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=a+r,s=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(o=0,s=Math.round(n/Math.pow(2,-1074))));const l=[];for(c=52;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=11;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();const h=l.join("");let g="";for(c=0;c<64;c+=8){let _=parseInt(h.substr(c,8),2).toString(16);1===_.length&&(_="0"+_),g+=_}return g.toLowerCase()},E_e=new RegExp("^-?(0*)\\d{1,10}$"),F9=function(n){if(E_e.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Wp=function(n){try{n()}catch(e){setTimeout(()=>{throw Vi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},ev=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class b_e{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Vi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class T_e{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ii("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Vi(e)}}let tv=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const j9=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,z9="websocket",q9="long_polling";class kN{constructor(e,t,r,i,o=!1,s="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jd.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&jd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function G9(n,e,t){let r;if((0,S.vA)("string"==typeof e,"typeof type must == string"),(0,S.vA)("object"==typeof t,"typeof params must == object"),e===z9)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==q9)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function A_e(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return oi(t,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}class S_e{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,S.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,S.A4)(this.counters_)}}const FN={},LN={};function VN(n){const e=n.toString();return FN[e]||(FN[e]=new S_e),FN[e]}class D_e{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Wp(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Kl{constructor(e,t,r,i,o,s,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Zy(e),this.stats_=VN(t),this.urlFn=c=>(this.appCheckToken&&(c.ac=this.appCheckToken),G9(t,q9,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new D_e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,S.$g)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new UN((...o)=>{const[s,a,c,l,h]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===s)this.id=a,this.password=c;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&j9.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Kl.forceAllow_=!0}static forceDisallow(){Kl.forceDisallow_=!0}static isAvailable(){return!((0,S.$g)()||!Kl.forceAllow_&&(Kl.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,S.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,S.KA)(t),i=x9(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,S.$g)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,S.As)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class UN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,S.$g)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=M9(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=UN.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){ii("frame writing exception"),a.stack&&ii(a.stack),ii(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ii("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const s=this.pendingSegs.shift();r=r+"&seg"+i+"="+s.seg+"&ts"+i+"="+s.ts+"&d"+i+"="+s.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,S.$g)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ii("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Zb=null;typeof MozWebSocket<"u"?Zb=MozWebSocket:typeof WebSocket<"u"&&(Zb=WebSocket);let Kp=(()=>{class n{constructor(t,r,i,o,s,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Zy(this.connId),this.stats_=VN(r),this.connURL=n.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,s){const a={v:"5"};return!(0,S.$g)()&&typeof location<"u"&&location.hostname&&j9.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),o&&(a.ac=o),s&&(a.p=s),G9(t,z9,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jd.set("previous_websocket_failure",!0);try{let i;if((0,S.$g)()){i={headers:{"User-Agent":`Firebase/5/${DN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const s=process.env,a=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Zb(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Zb&&!n.forceDisallow_}static previouslyFailed(){return jd.isInMemoryStorage||!0===jd.get("previous_websocket_failure")}markConnectionHealthy(){jd.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,S.$L)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,S.vA)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,S.As)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=x9(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),X9=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Kl,Kp]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Kp&&Kp.isAvailable();let i=r&&!Kp.previouslyFailed();if(t.webSocketOnly&&(r||Vi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Kp];else{const o=this.transports_=[];for(const s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class sW{constructor(e,t,r,i,o,s,a,c,l,h){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Zy("c:"+this.id+":"),this.transportManager_=new X9(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ev(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Xy("t",e),r=Xy("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Xy("t",e),r=Xy("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Xy("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?RN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):RN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Vi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),ev(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ev(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class aW{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class cW{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,S.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,S.vA)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Xb extends cW{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,S.jZ)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Xb}getInitialEvent(e){return(0,S.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class cn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Xt(){return new cn("")}function Pt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ql(n){return n.pieces_.length-n.pieceNum_}function bn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new cn(n.pieces_,e)}function jN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function nv(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function dW(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new cn(e,0)}function Jn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof cn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new cn(t,0)}function Dt(n){return n.pieceNum_>=n.pieces_.length}function io(n,e){const t=Pt(n),r=Pt(e);if(null===t)return e;if(t===r)return io(bn(n),bn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function J_e(n,e){const t=nv(n,0),r=nv(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=Hd(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function $N(n,e){if(Ql(n)!==Ql(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function us(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ql(n)>Ql(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Z_e{constructor(e,t){this.errorPrefix_=t,this.parts_=nv(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,S.OE)(this.parts_[r]);hW(this)}}function hW(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+zd(n))}function zd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class HN extends cW{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new HN}getInitialEvent(e){return(0,S.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const rv=1e3;let tT,qd=(()=>{class n extends aW{constructor(t,r,i,o,s,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=Zy("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=rv,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!(0,S.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");HN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Xb.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,s={r:o,a:t,b:r};this.log_((0,S.As)(s)),(0,S.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new S.cY,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const c=a.d;"ok"===a.s?r.resolve(c):r.reject(c)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),(0,S.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,S.vA)(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const c={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,c=>{const l=c.d,h=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",c),"ok"!==h&&this.removeListen_(i,o),t.onComplete&&t.onComplete(h,l))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,S.gR)(t,"w")){const i=(0,S.yw)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Vi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,S.qc)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,S.Cv)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const s=o.s,a=o.d||"error";this.authToken_===t&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,S.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const s={p:t};o&&(s.q=i,s.t=o),this.sendRequest("n",s)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const s={p:r,d:i};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,s){this.initConnection_();const a={p:r,d:i};void 0!==s&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,S.As)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):RN("Unrecognized action received from server: "+(0,S.As)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,S.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rv,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=rv,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=rv),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ae.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),s=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let c=!1,l=null;const h=function(){l?l.close():(c=!0,o())};t.realtime_={close:h,sendRequest:function(v){(0,S.vA)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(v)}};const _=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[v,w]=yield Promise.all([t.authTokenProvider_.getToken(_),t.appCheckTokenProvider_.getToken(_)]);c?ii("getToken() completed but was canceled"):(ii("getToken() completed. Creating connection."),t.authToken_=v&&v.accessToken,t.appCheckToken_=w&&w.token,l=new sW(s,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,b=>{Vi(b+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(v){t.log_("Failed to get token: "+v),c||(t.repoInfo_.nodeAdmin&&Vi(v),h())}}})()}interrupt(t){ii("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ii("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,S.Im)(this.interruptReasons_)&&(this.reconnectDelay_=rv,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(s=>NN(s)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new cn(t).toString();let o;if(this.listens.has(i)){const s=this.listens.get(i);o=s.get(r),s.delete(r),0===s.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){ii("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ii("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,S.$g)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+DN.replace(/\./g,"-")]=1,(0,S.jZ)()?t["framework.cordova"]=1:(0,S.lV)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Xb.getInstance().currentlyOnline();return(0,S.Im)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Rt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Rt(e,t)}}class eT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Rt(Wl,e),i=new Rt(Wl,t);return 0!==this.compare(r,i)}minPost(){return Rt.MIN}}class gW extends eT{static get __EMPTY_NODE(){return tT}static set __EMPTY_NODE(e){tT=e}compare(e,t){return Hd(e.name,t.name)}isDefinedOn(e){throw(0,S.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Rt.MIN}maxPost(){return new Rt(Dc,tT)}makePost(e,t){return(0,S.vA)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Rt(e,tT)}toString(){return".key"}}const xa=new gW;class nT{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let qN,$s=(()=>{class n{constructor(t,r,i,o,s){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??To.EMPTY_NODE,this.right=s??To.EMPTY_NODE}copy(t,r,i,o,s){return new n(t??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const s=i(t,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===s?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return To.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return To.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class To{constructor(e,t=To.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new To(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,$s.BLACK,null,null))}remove(e){return new To(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,$s.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new nT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new nT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new nT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new nT(this.root_,null,this.comparator_,!0,e)}}function sye(n,e){return Hd(n.name,e.name)}function zN(n,e){return Hd(n,e)}To.EMPTY_NODE=new class oye{copy(e,t,r,i,o){return this}insert(e,t,r){return new $s(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const mW=function(n){return"number"==typeof n?"number:"+k9(n):"string:"+n},_W=function(n){if(n.isLeafNode()){const e=n.val();(0,S.vA)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,S.gR)(e,".sv"),"Priority must be a string or number.")}else(0,S.vA)(n===qN||n.isEmpty(),"priority of unexpected type.");(0,S.vA)(n===qN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let yW,vW,EW,Qp=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,S.vA)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),_W(this.priorityNode_)}static set __childrenNodeConstructor(t){yW=t}static get __childrenNodeConstructor(){return yW}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Dt(t)?this:".priority"===Pt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Pt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,S.vA)(".priority"!==i||1===Ql(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(bn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+mW(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?k9(this.value_):this.value_,this.lazyHash_=O9(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,S.vA)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),s=n.VALUE_TYPE_ORDER.indexOf(i);return(0,S.vA)(o>=0,"Unknown leaf type: "+r),(0,S.vA)(s>=0,"Unknown leaf type: "+i),o===s?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Ln=new class uye extends eT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?Hd(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Rt.MIN}maxPost(){return new Rt(Dc,new Qp("[PRIORITY-POST]",EW))}makePost(e,t){const r=vW(e);return new Rt(t,new Qp("[PRIORITY-POST]",r))}toString(){return".priority"}},dye=Math.log(2);class hye{constructor(e){this.count=parseInt(Math.log(e+1)/dye,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const rT=function(n,e,t,r){n.sort(e);const i=function(c,l){const h=l-c;let g,_;if(0===h)return null;if(1===h)return g=n[c],_=t?t(g):g,new $s(_,g.node,$s.BLACK,null,null);{const v=parseInt(h/2,10)+c,w=i(c,v),b=i(v+1,l);return g=n[v],_=t?t(g):g,new $s(_,g.node,$s.BLACK,w,b)}},a=function(c){let l=null,h=null,g=n.length;const _=function(w,b){const A=g-w,N=g;g-=w;const R=i(A+1,N),V=n[A],ie=t?t(V):V;v(new $s(ie,V.node,b,null,R))},v=function(w){l?(l.left=w,l=w):(h=w,l=w)};for(let w=0;w<c.count;++w){const b=c.nextBitIsOne(),A=Math.pow(2,c.count-(w+1));b?_(A,$s.BLACK):(_(A,$s.BLACK),_(A,$s.RED))}return h}(new hye(n.length));return new To(r||e,a)};let GN;const Yp={};class Mc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,S.vA)(Yp&&Ln,"ChildrenNode.ts has not been loaded"),GN=GN||new Mc({".priority":Yp},{".priority":Ln}),GN}get(e){const t=(0,S.yw)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof To?t:null}hasIndex(e){return(0,S.gR)(this.indexSet_,e.toString())}addIndex(e,t){(0,S.vA)(e!==xa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(Rt.Wrap);let a,s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();a=i?rT(r,e.getCompare()):Yp;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const h=Object.assign({},this.indexes_);return h[c]=a,new Mc(h,l)}addToIndexes(e,t){const r=(0,S.kH)(this.indexes_,(i,o)=>{const s=(0,S.yw)(this.indexSet_,o);if((0,S.vA)(s,"Missing index implementation for "+o),i===Yp){if(s.isDefinedOn(e.node)){const a=[],c=t.getIterator(Rt.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),rT(a,s.getCompare())}return Yp}{const a=t.get(e.name);let c=i;return a&&(c=c.remove(new Rt(e.name,a))),c.insert(e,e.node)}});return new Mc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,S.kH)(this.indexes_,i=>{if(i===Yp)return i;{const o=t.get(e.name);return o?i.remove(new Rt(e.name,o)):i}});return new Mc(r,this.indexSet_)}}let iv,pt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&_W(this.priorityNode_),this.children_.isEmpty()&&(0,S.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return iv||(iv=new n(new To(zN),null,Mc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||iv}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?iv:r}}getChild(t){const r=Pt(t);return null===r?this:this.getImmediateChild(r).getChild(bn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,S.vA)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Rt(t,r);let o,s;r.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),s=this.indexMap_.addToIndexes(i,this.children_));const a=o.isEmpty()?iv:this.priorityNode_;return new n(o,a,s)}}updateChild(t,r){const i=Pt(t);if(null===i)return r;{(0,S.vA)(".priority"!==Pt(t)||1===Ql(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(bn(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,s=!0;if(this.forEachChild(Ln,(a,c)=>{r[a]=c.val(t),i++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!t&&s&&o<2*i){const a=[];for(const c in r)a[c]=r[c];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+mW(this.getPriority().val())+":"),this.forEachChild(Ln,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":O9(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const s=o.getPredecessorKey(new Rt(t,r));return s?s.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Rt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Rt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,Rt.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,t)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,Rt.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,t)>0;)o.getNext(),s=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ov?-1:0}withIndex(t){if(t===xa||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===xa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Ln),o=r.getIterator(Ln);let s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return null===s&&null===a}return!1}return!1}}resolveIndex_(t){return t===xa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const ov=new class fye extends pt{constructor(){super(new To(zN),pt.EMPTY_NODE,Mc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return pt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Rt,{MIN:{value:new Rt(Wl,pt.EMPTY_NODE)},MAX:{value:new Rt(Dc,ov)}}),gW.__EMPTY_NODE=pt.EMPTY_NODE,Qp.__childrenNodeConstructor=pt,function aye(n){qN=n}(ov),function lye(n){EW=n}(ov);const pye=!0;function ir(n,e=null){if(null===n)return pt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,S.vA)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Qp(n,ir(e));if(n instanceof Array||!pye){let t=pt.EMPTY_NODE;return oi(n,(r,i)=>{if((0,S.gR)(n,r)&&"."!==r.substring(0,1)){const o=ir(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(ir(e))}{const t=[];let r=!1;if(oi(n,(s,a)=>{if("."!==s.substring(0,1)){const c=ir(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Rt(s,c)))}}),0===t.length)return pt.EMPTY_NODE;const o=rT(t,sye,s=>s.name,zN);if(r){const s=rT(t,Ln.getCompare());return new pt(o,ir(e),new Mc({".priority":s},{".priority":Ln}))}return new pt(o,ir(e),Mc.Default)}}!function cye(n){vW=n}(ir);class WN extends eT{constructor(e){super(),this.indexPath_=e,(0,S.vA)(!Dt(e)&&".priority"!==Pt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?Hd(e.name,t.name):o}makePost(e,t){const r=ir(e),i=pt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Rt(t,i)}maxPost(){const e=pt.EMPTY_NODE.updateChild(this.indexPath_,ov);return new Rt(Dc,e)}toString(){return nv(this.indexPath_,0).join("/")}}const KN=new class gye extends eT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Hd(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Rt.MIN}maxPost(){return Rt.MAX}makePost(e,t){const r=ir(e);return new Rt(t,r)}toString(){return".value"}};function CW(n){return{type:"value",snapshotNode:n}}function Jp(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function sv(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function av(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class QN{constructor(e){this.index_=e}updateChild(e,t,r,i,o,s){(0,S.vA)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=s&&(r.isEmpty()?e.hasChild(t)?s.trackChildChange(sv(t,a)):(0,S.vA)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Jp(t,r)):s.trackChildChange(av(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Ln,(i,o)=>{t.hasChild(i)||r.trackChildChange(sv(i,o))}),t.isLeafNode()||t.forEachChild(Ln,(i,o)=>{if(e.hasChild(i)){const s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(av(i,o,s))}else r.trackChildChange(Jp(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?pt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class cv{constructor(e){this.indexedFilter_=new QN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=cv.getStartPost_(e),this.endPost_=cv.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,o,s){return this.matches(new Rt(t,r))||(r=pt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,s)}updateFullNode(e,t,r){t.isLeafNode()&&(t=pt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(pt.EMPTY_NODE);const o=this;return t.forEachChild(Ln,(s,a)=>{o.matches(new Rt(s,a))||(i=i.updateImmediateChild(s,pt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class _ye{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new cv(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,o,s){return this.rangedFilter_.matches(new Rt(t,r))||(r=pt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,s):this.fullLimitUpdateChild_(e,t,r,o,s)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=pt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=pt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const a=o.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),s++}}}else{let o;i=t.withIndex(this.index_),i=i.updatePriority(pt.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let s=0;for(;o.hasNext();){const a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,pt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let s;if(this.reverse_){const g=this.index_.getCompare();s=(_,v)=>g(v,_)}else s=this.index_.getCompare();const a=e;(0,S.vA)(a.numChildren()===this.limit_,"");const c=new Rt(t,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(a.hasChild(t)){const g=a.getImmediateChild(t);let _=i.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=_&&(_.name===t||a.hasChild(_.name));)_=i.getChildAfterChild(this.index_,_,this.reverse_);const v=null==_?1:s(_,c);if(h&&!r.isEmpty()&&v>=0)return o?.trackChildChange(av(t,r,g)),a.updateImmediateChild(t,r);{o?.trackChildChange(sv(t,g));const b=a.updateImmediateChild(t,pt.EMPTY_NODE);return null!=_&&this.rangedFilter_.matches(_)?(o?.trackChildChange(Jp(_.name,_.node)),b.updateImmediateChild(_.name,_.node)):b}}return r.isEmpty()?e:h&&s(l,c)>=0?(null!=o&&(o.trackChildChange(sv(l.name,l.node)),o.trackChildChange(Jp(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(l.name,pt.EMPTY_NODE)):e}}class iT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ln}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,S.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,S.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wl}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,S.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,S.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Dc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,S.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ln}copy(){const e=new iT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function YN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function JN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function oT(n,e){const t=n.copy();return t.index_=e,t}function wW(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Ln?t="$priority":n.index_===KN?t="$value":n.index_===xa?t="$key":((0,S.vA)(n.index_ instanceof WN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,S.As)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,S.As)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,S.As)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,S.As)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,S.As)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function IW(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Ln&&(e.i=n.index_.toString()),e}class sT extends aW{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Zy("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,S.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=sT.getListenId_(e,r),a={};this.listens_[s]=a;const c=wW(e._queryParams);this.restRequest_(o+".json",c,(l,h)=>{let g=h;if(404===l&&(g=null,l=null),null===l&&this.onDataUpdate_(o,g,!1,r),(0,S.yw)(this.listens_,s)===a){let _;_=l?401===l?"permission_denied":"rest_error:"+l:"ok",i(_,null)}})}unlisten(e,t){const r=sT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=wW(e._queryParams),r=e._path.toString(),i=new S.cY;return this.restRequest_(r+".json",t,(o,s)=>{let a=s;404===o&&(a=null,o=null),null===o?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,S.Am)(t);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=(0,S.$L)(a.responseText)}catch{Vi("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else 401!==a.status&&404!==a.status&&Vi("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}}class Iye{constructor(){this.rootNode_=pt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function aT(){return{value:null,children:new Map}}function Zp(n,e,t){if(Dt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Pt(e);n.children.has(r)||n.children.set(r,aT()),Zp(n.children.get(r),e=bn(e),t)}}function ZN(n,e){if(Dt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Ln,(r,i)=>{Zp(n,new cn(r),i)}),ZN(n,e)}}if(n.children.size>0){const t=Pt(e);return e=bn(e),n.children.has(t)&&ZN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function XN(n,e,t){null!==n.value?t(e,n.value):function bye(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{XN(i,new cn(e.toString()+"/"+r),t)})}class Tye{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&oi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Pye{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Tye(e);const r=1e4+2e4*Math.random();ev(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;oi(e,(i,o)=>{o>0&&(0,S.gR)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),ev(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ka=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(ka||{});function nx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class cT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=ka.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Dt(this.path)){if(null!=this.affectedTree.value)return(0,S.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new cn(e));return new cT(Xt(),t,this.revert)}}return(0,S.vA)(Pt(this.path)===e,"operationForChild called for unrelated child."),new cT(bn(this.path),this.affectedTree,this.revert)}}class lv{constructor(e,t){this.source=e,this.path=t,this.type=ka.LISTEN_COMPLETE}operationForChild(e){return Dt(this.path)?new lv(this.source,Xt()):new lv(this.source,bn(this.path))}}class Gd{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=ka.OVERWRITE}operationForChild(e){return Dt(this.path)?new Gd(this.source,Xt(),this.snap.getImmediateChild(e)):new Gd(this.source,bn(this.path),this.snap)}}class Xp{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=ka.MERGE}operationForChild(e){if(Dt(this.path)){const t=this.children.subtree(new cn(e));return t.isEmpty()?null:t.value?new Gd(this.source,Xt(),t.value):new Xp(this.source,Xt(),t)}return(0,S.vA)(Pt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Xp(this.source,bn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Yl{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Dt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Pt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Dye{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function uv(n,e,t,r,i,o){const s=r.filter(a=>a.type===t);s.sort((a,c)=>function Rye(n,e,t){if(null==e.childName||null==t.childName)throw(0,S.Hk)("Should only compare child_ events.");const r=new Rt(e.childName,e.snapshotNode),i=new Rt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,c)),s.forEach(a=>{const c=function Oye(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function lT(n,e){return{eventCache:n,serverCache:e}}function dv(n,e,t,r){return lT(new Yl(e,t,r),n.serverCache)}function TW(n,e,t,r){return lT(n.eventCache,new Yl(e,t,r))}function uT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Wd(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let rx;class Vn{constructor(e,t=(()=>(rx||(rx=new To(m_e)),rx))()){this.value=e,this.children=t}static fromObject(e){let t=new Vn(null);return oi(e,(r,i)=>{t=t.set(new cn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Xt(),value:this.value};if(Dt(e))return null;{const r=Pt(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(bn(e),t);return null!=o?{path:Jn(new cn(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Dt(e))return this;{const t=Pt(e),r=this.children.get(t);return null!==r?r.subtree(bn(e)):new Vn(null)}}set(e,t){if(Dt(e))return new Vn(t,this.children);{const r=Pt(e),o=(this.children.get(r)||new Vn(null)).set(bn(e),t),s=this.children.insert(r,o);return new Vn(this.value,s)}}remove(e){if(Dt(e))return this.children.isEmpty()?new Vn(null):new Vn(null,this.children);{const t=Pt(e),r=this.children.get(t);if(r){const i=r.remove(bn(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new Vn(null):new Vn(this.value,o)}return this}}get(e){if(Dt(e))return this.value;{const t=Pt(e),r=this.children.get(t);return r?r.get(bn(e)):null}}setTree(e,t){if(Dt(e))return t;{const r=Pt(e),o=(this.children.get(r)||new Vn(null)).setTree(bn(e),t);let s;return s=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new Vn(this.value,s)}}fold(e){return this.fold_(Xt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Jn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Xt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Dt(e))return null;{const o=Pt(e),s=this.children.get(o);return s?s.findOnPath_(bn(e),Jn(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Xt(),t)}foreachOnPath_(e,t,r){if(Dt(e))return this;{this.value&&r(t,this.value);const i=Pt(e),o=this.children.get(i);return o?o.foreachOnPath_(bn(e),Jn(t,i),r):new Vn(null)}}foreach(e){this.foreach_(Xt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Jn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Hs{constructor(e){this.writeTree_=e}static empty(){return new Hs(new Vn(null))}}function hv(n,e,t){if(Dt(e))return new Hs(new Vn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const s=io(i,e);return o=o.updateChild(s,t),new Hs(n.writeTree_.set(i,o))}{const i=new Vn(t),o=n.writeTree_.setTree(e,i);return new Hs(o)}}}function ix(n,e,t){let r=n;return oi(t,(i,o)=>{r=hv(r,Jn(e,i),o)}),r}function AW(n,e){if(Dt(e))return Hs.empty();{const t=n.writeTree_.setTree(e,new Vn(null));return new Hs(t)}}function ox(n,e){return null!=Kd(n,e)}function Kd(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(io(t.path,e)):null}function SW(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Ln,(r,i)=>{e.push(new Rt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Rt(r,i.value))}),e}function Jl(n,e){if(Dt(e))return n;{const t=Kd(n,e);return new Hs(null!=t?new Vn(t):n.writeTree_.subtree(e))}}function sx(n){return n.writeTree_.isEmpty()}function eg(n,e){return PW(Xt(),n.writeTree_,e)}function PW(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,S.vA)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=PW(Jn(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Jn(n,".priority"),r)),t}}function dT(n,e){return NW(e,n)}function Vye(n,e){if(n.snap)return us(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&us(Jn(n.path,t),e))return!0;return!1}function Bye(n){return n.visible}function DW(n,e,t){let r=Hs.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const s=o.path;let a;if(o.snap)us(t,s)?(a=io(t,s),r=hv(r,a,o.snap)):us(s,t)&&(a=io(s,t),r=hv(r,Xt(),o.snap.getChild(a)));else{if(!o.children)throw(0,S.Hk)("WriteRecord should have .snap or .children");if(us(t,s))a=io(t,s),r=ix(r,a,o.children);else if(us(s,t))if(a=io(s,t),Dt(a))r=ix(r,Xt(),o.children);else{const c=(0,S.yw)(o.children,Pt(a));if(c){const l=c.getChild(bn(a));r=hv(r,Xt(),l)}}}}}return r}function MW(n,e,t,r,i){if(r||i){const o=Jl(n.visibleWrites,e);return!i&&sx(o)?t:i||null!=t||ox(o,Xt())?eg(DW(n.allWrites,function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(us(l.path,e)||us(e,l.path))},e),t||pt.EMPTY_NODE):null}{const o=Kd(n.visibleWrites,e);if(null!=o)return o;{const s=Jl(n.visibleWrites,e);return sx(s)?t:null!=t||ox(s,Xt())?eg(s,t||pt.EMPTY_NODE):null}}}function hT(n,e,t,r){return MW(n.writeTree,n.treePath,e,t,r)}function ax(n,e){return function jye(n,e,t){let r=pt.EMPTY_NODE;const i=Kd(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ln,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(t){const o=Jl(n.visibleWrites,e);return t.forEachChild(Ln,(s,a)=>{const c=eg(Jl(o,new cn(s)),a);r=r.updateImmediateChild(s,c)}),SW(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}return SW(Jl(n.visibleWrites,e)).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}(n.writeTree,n.treePath,e)}function OW(n,e,t,r){return function $ye(n,e,t,r,i){(0,S.vA)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Jn(e,t);if(ox(n.visibleWrites,o))return null;{const s=Jl(n.visibleWrites,o);return sx(s)?i.getChild(t):eg(s,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function fT(n,e){return function zye(n,e){return Kd(n.visibleWrites,e)}(n.writeTree,Jn(n.treePath,e))}function cx(n,e,t){return function Hye(n,e,t,r){const i=Jn(e,t),o=Kd(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?eg(Jl(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function RW(n,e){return NW(Jn(n.treePath,e),n.writeTree)}function NW(n,e){return{treePath:n,writeTree:e}}class Kye{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,S.vA)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,S.vA)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,av(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,sv(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,Jp(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,S.Hk)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,av(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const xW=new class Qye{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class lx{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Yl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cx(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Wd(this.viewCache_),o=function Wye(n,e,t,r,i,o){return function qye(n,e,t,r,i,o,s){let a;const c=Jl(n.visibleWrites,e),l=Kd(c,Xt());if(null!=l)a=l;else{if(null==t)return[];a=eg(c,t)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const h=[],g=s.getCompare(),_=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let v=_.getNext();for(;v&&h.length<i;)0!==g(v,r)&&h.push(v),v=_.getNext();return h}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function kW(n,e,t,r,i,o){const s=e.eventCache;if(null!=fT(r,t))return e;{let a,c;if(Dt(t))if((0,S.vA)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Wd(e),g=ax(r,l instanceof pt?l:pt.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),g,o)}else{const l=hT(r,Wd(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{const l=Pt(t);if(".priority"===l){(0,S.vA)(1===Ql(t),"Can't have a priority with additional path components");const h=s.getNode();c=e.serverCache.getNode();const g=OW(r,t,h,c);a=null!=g?n.filter.updatePriority(h,g):s.getNode()}else{const h=bn(t);let g;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();const _=OW(r,t,s.getNode(),c);g=null!=_?s.getNode().getImmediateChild(l).updateChild(h,_):s.getNode().getImmediateChild(l)}else g=cx(r,l,e.serverCache);a=null!=g?n.filter.updateChild(s.getNode(),l,g,h,i,o):s.getNode()}}return dv(e,a,s.isFullyInitialized()||Dt(t),n.filter.filtersNodes())}}function pT(n,e,t,r,i,o,s,a){const c=e.serverCache;let l;const h=s?n.filter:n.filter.getIndexedFilter();if(Dt(t))l=h.updateFullNode(c.getNode(),r,null);else if(h.filtersNodes()&&!c.isFiltered()){const v=c.getNode().updateChild(t,r);l=h.updateFullNode(c.getNode(),v,null)}else{const v=Pt(t);if(!c.isCompleteForPath(t)&&Ql(t)>1)return e;const w=bn(t),A=c.getNode().getImmediateChild(v).updateChild(w,r);l=".priority"===v?h.updatePriority(c.getNode(),A):h.updateChild(c.getNode(),v,A,w,xW,null)}const g=TW(e,l,c.isFullyInitialized()||Dt(t),h.filtersNodes());return kW(n,g,t,i,new lx(i,g,o),a)}function ux(n,e,t,r,i,o,s){const a=e.eventCache;let c,l;const h=new lx(i,e,o);if(Dt(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,s),c=dv(e,l,!0,n.filter.filtersNodes());else{const g=Pt(t);if(".priority"===g)l=n.filter.updatePriority(e.eventCache.getNode(),r),c=dv(e,l,a.isFullyInitialized(),a.isFiltered());else{const _=bn(t),v=a.getNode().getImmediateChild(g);let w;if(Dt(_))w=r;else{const b=h.getCompleteChild(g);w=null!=b?".priority"===jN(_)&&b.getChild(dW(_)).isEmpty()?b:b.updateChild(_,r):pt.EMPTY_NODE}c=v.equals(w)?e:dv(e,n.filter.updateChild(a.getNode(),g,w,_,h,s),a.isFullyInitialized(),n.filter.filtersNodes())}}return c}function FW(n,e){return n.eventCache.isCompleteForChild(e)}function LW(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function dx(n,e,t,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l,c=e;l=Dt(t)?r:new Vn(null).setTree(t,r);const h=e.serverCache.getNode();return l.children.inorderTraversal((g,_)=>{if(h.hasChild(g)){const w=LW(0,e.serverCache.getNode().getImmediateChild(g),_);c=pT(n,c,new cn(g),w,i,o,s,a)}}),l.children.inorderTraversal((g,_)=>{const v=!e.serverCache.isCompleteForChild(g)&&null===_.value;if(!h.hasChild(g)&&!v){const b=LW(0,e.serverCache.getNode().getImmediateChild(g),_);c=pT(n,c,new cn(g),b,i,o,s,a)}}),c}class ive{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new QN(r.getIndex()),o=function yye(n){return n.loadsAllData()?new QN(n.getIndex()):n.hasLimit()?new _ye(n):new cv(n)}(r);this.processor_=function Yye(n){return{filter:n}}(o);const s=t.serverCache,a=t.eventCache,c=i.updateFullNode(pt.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(pt.EMPTY_NODE,a.getNode(),null),h=new Yl(c,s.isFullyInitialized(),i.filtersNodes()),g=new Yl(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=lT(g,h),this.eventGenerator_=new Dye(this.query_)}get query(){return this.query_}}function ave(n,e){const t=Wd(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Dt(e)&&!t.getImmediateChild(Pt(e)).isEmpty())?t.getChild(e):null}function VW(n){return 0===n.eventRegistrations_.length}function UW(n,e,t){const r=[];if(t){(0,S.vA)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(t,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const s=n.eventRegistrations_[o];if(s.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(s)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function BW(n,e,t,r){e.type===ka.MERGE&&null!==e.source.queryId&&((0,S.vA)(Wd(n.viewCache_),"We should always have a full cache before handling merges"),(0,S.vA)(uT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function Zye(n,e,t,r,i){const o=new Kye;let s,a;if(t.type===ka.OVERWRITE){const l=t;l.source.fromUser?s=ux(n,e,l.path,l.snap,r,i,o):((0,S.vA)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Dt(l.path),s=pT(n,e,l.path,l.snap,r,i,a,o))}else if(t.type===ka.MERGE){const l=t;l.source.fromUser?s=function eve(n,e,t,r,i,o,s){let a=e;return r.foreach((c,l)=>{const h=Jn(t,c);FW(e,Pt(h))&&(a=ux(n,a,h,l,i,o,s))}),r.foreach((c,l)=>{const h=Jn(t,c);FW(e,Pt(h))||(a=ux(n,a,h,l,i,o,s))}),a}(n,e,l.path,l.children,r,i,o):((0,S.vA)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=dx(n,e,l.path,l.children,r,i,a,o))}else if(t.type===ka.ACK_USER_WRITE){const l=t;s=l.revert?function rve(n,e,t,r,i,o){let s;if(null!=fT(r,t))return e;{const a=new lx(r,e,i),c=e.eventCache.getNode();let l;if(Dt(t)||".priority"===Pt(t)){let h;if(e.serverCache.isFullyInitialized())h=hT(r,Wd(e));else{const g=e.serverCache.getNode();(0,S.vA)(g instanceof pt,"serverChildren would be complete if leaf node"),h=ax(r,g)}l=n.filter.updateFullNode(c,h,o)}else{const h=Pt(t);let g=cx(r,h,e.serverCache);null==g&&e.serverCache.isCompleteForChild(h)&&(g=c.getImmediateChild(h)),l=null!=g?n.filter.updateChild(c,h,g,bn(t),a,o):e.eventCache.getNode().hasChild(h)?n.filter.updateChild(c,h,pt.EMPTY_NODE,bn(t),a,o):c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=hT(r,Wd(e)),s.isLeafNode()&&(l=n.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||null!=fT(r,Xt()),dv(e,l,s,n.filter.filtersNodes())}}(n,e,l.path,r,i,o):function tve(n,e,t,r,i,o,s){if(null!=fT(i,t))return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(null!=r.value){if(Dt(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return pT(n,e,t,c.getNode().getChild(t),i,o,a,s);if(Dt(t)){let l=new Vn(null);return c.getNode().forEachChild(xa,(h,g)=>{l=l.set(new cn(h),g)}),dx(n,e,t,l,i,o,a,s)}return e}{let l=new Vn(null);return r.foreach((h,g)=>{const _=Jn(t,h);c.isCompleteForPath(_)&&(l=l.set(h,c.getNode().getChild(_)))}),dx(n,e,t,l,i,o,a,s)}}(n,e,l.path,l.affectedTree,r,i,o)}else{if(t.type!==ka.LISTEN_COMPLETE)throw(0,S.Hk)("Unknown operation type: "+t.type);s=function nve(n,e,t,r,i){const o=e.serverCache;return kW(n,TW(e,o.getNode(),o.isFullyInitialized()||Dt(t),o.isFiltered()),t,r,xW,i)}(n,e,t.path,r,o)}const c=o.getChanges();return function Xye(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=uT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(CW(uT(e)))}}(e,s,c),{viewCache:s,changes:c}}(n.processor_,i,e,t,r);return function Jye(n,e){(0,S.vA)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,S.vA)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,S.vA)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,jW(n,o.changes,o.viewCache.eventCache.getNode(),null)}function jW(n,e,t,r){return function Mye(n,e,t,r){const i=[],o=[];return e.forEach(s=>{"child_changed"===s.type&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(function mye(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(s.childName,s.snapshotNode))}),uv(n,i,"child_removed",e,r,t),uv(n,i,"child_added",e,r,t),uv(n,i,"child_moved",o,r,t),uv(n,i,"child_changed",e,r,t),uv(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let gT,_T;class $W{constructor(){this.views=new Map}}function hx(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,S.vA)(null!=o,"SyncTree gave us an op for an invalid query."),BW(o,e,t,r)}{let o=[];for(const s of n.views.values())o=o.concat(BW(s,e,t,r));return o}}function HW(n,e,t,r,i){const s=n.views.get(e._queryIdentifier);if(!s){let a=hT(t,i?r:null),c=!1;a?c=!0:r instanceof pt?(a=ax(t,r),c=!1):(a=pt.EMPTY_NODE,c=!1);const l=lT(new Yl(a,c,!1),new Yl(r,i,!1));return new ive(e,l)}return s}function zW(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Zl(n,e){let t=null;for(const r of n.views.values())t=t||ave(r,e);return t}function qW(n,e){return e._queryParams.loadsAllData()?mT(n):n.views.get(e._queryIdentifier)}function GW(n,e){return null!=qW(n,e)}function Xl(n){return null!=mT(n)}function mT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let _ve=1;class WW{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Vn(null),this.pendingWriteTree_=function Gye(){return{visibleWrites:Hs.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fx(n,e,t,r,i){return function xye(n,e,t,r,i){(0,S.vA)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=hv(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?tg(n,new Gd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function eu(n,e,t=!1){const r=function Fye(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Lye(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);(0,S.vA)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,s=n.allWrites.length-1;for(;i&&s>=0;){const a=n.allWrites[s];a.visible&&(s>=t&&Vye(a,r.path)?i=!1:us(r.path,a.path)&&(o=!0)),s--}return!!i&&(o?(function Uye(n){n.visibleWrites=DW(n.allWrites,Bye,Xt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=AW(n.visibleWrites,r.path):oi(r.children,c=>{n.visibleWrites=AW(n.visibleWrites,Jn(r.path,c))}),!0))}(n.pendingWriteTree_,e)){let o=new Vn(null);return null!=r.snap?o=o.set(Xt(),!0):oi(r.children,s=>{o=o.set(new cn(s),!0)}),tg(n,new cT(r.path,o,t))}return[]}function fv(n,e,t){return tg(n,new Gd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function yT(n,e,t,r,i=!1){const o=e._path,s=n.syncPointTree_.get(o);let a=[];if(s&&("default"===e._queryIdentifier||GW(s,e))){const c=function pve(n,e,t,r){const i=e._queryIdentifier,o=[];let s=[];const a=Xl(n);if("default"===i)for(const[c,l]of n.views.entries())s=s.concat(UW(l,t,r)),VW(l)&&(n.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{const c=n.views.get(i);c&&(s=s.concat(UW(c,t,r)),VW(c)&&(n.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Xl(n)&&o.push(new(function dve(){return(0,S.vA)(gT,"Reference.ts has not been loaded"),gT}())(e._repo,e._path)),{removed:o,events:s}}(s,e,t,r);(function hve(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const l=c.removed;if(a=c.events,!i){const h=-1!==l.findIndex(_=>_._queryParams.loadsAllData()),g=n.syncPointTree_.findOnPath(o,(_,v)=>Xl(v));if(h&&!g){const _=n.syncPointTree_.subtree(o);if(!_.isEmpty()){const v=function bve(n){return n.fold((e,t,r)=>{if(t&&Xl(t))return[mT(t)];{let i=[];return t&&(i=zW(t)),oi(r,(o,s)=>{i=i.concat(s)}),i}})}(_);for(let w=0;w<v.length;++w){const b=v[w],A=b.query,N=JW(n,b);n.listenProvider_.startListening(gv(A),pv(n,A),N.hashFn,N.onComplete)}}}!g&&l.length>0&&!r&&(h?n.listenProvider_.stopListening(gv(e),null):l.forEach(_=>{const v=n.queryToTagMap.get(ET(_));n.listenProvider_.stopListening(gv(_),v)}))}!function Tve(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=ET(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,l)}return a}function KW(n,e,t,r){const i=gx(n,r);if(null!=i){const o=mx(i),s=o.path,a=o.queryId,c=io(s,e);return _x(n,s,new Gd(nx(a),c,t))}return[]}function px(n,e,t,r=!1){const i=e._path;let o=null,s=!1;n.syncPointTree_.foreachOnPath(i,(_,v)=>{const w=io(_,i);o=o||Zl(v,w),s=s||Xl(v)});let c,a=n.syncPointTree_.get(i);a?(s=s||Xl(a),o=o||Zl(a,Xt())):(a=new $W,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=o?c=!0:(c=!1,o=pt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((v,w)=>{const b=Zl(w,Xt());b&&(o=o.updateImmediateChild(v,b))}));const l=GW(a,e);if(!l&&!e._queryParams.loadsAllData()){const _=ET(e);(0,S.vA)(!n.queryToTagMap.has(_),"View does not exist, but we have a tag");const v=function Ave(){return _ve++}();n.queryToTagMap.set(_,v),n.tagToQueryMap.set(v,_)}let g=function fve(n,e,t,r,i,o){const s=HW(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,s),function cve(n,e){n.eventRegistrations_.push(e)}(s,t),function lve(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ln,(o,s)=>{r.push(Jp(o,s))}),t.isFullyInitialized()&&r.push(CW(t.getNode())),jW(n,r,t.getNode(),e)}(s,t)}(a,e,t,dT(n.pendingWriteTree_,i),o,c);if(!l&&!s&&!r){const _=qW(a,e);g=g.concat(function Sve(n,e,t){const r=e._path,i=pv(n,e),o=JW(n,t),s=n.listenProvider_.startListening(gv(e),i,o.hashFn,o.onComplete),a=n.syncPointTree_.subtree(r);if(i)(0,S.vA)(!Xl(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,h,g)=>{if(!Dt(l)&&h&&Xl(h))return[mT(h).query];{let _=[];return h&&(_=_.concat(zW(h).map(v=>v.query))),oi(g,(v,w)=>{_=_.concat(w)}),_}});for(let l=0;l<c.length;++l){const h=c[l];n.listenProvider_.stopListening(gv(h),pv(n,h))}}return s}(n,e,_))}return g}function vT(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(s,a)=>{const l=Zl(a,io(s,e));if(l)return l});return MW(i,e,o,t,!0)}function tg(n,e){return QW(e,n.syncPointTree_,null,dT(n.pendingWriteTree_,Xt()))}function QW(n,e,t,r){if(Dt(n.path))return YW(n,e,t,r);{const i=e.get(Xt());null==t&&null!=i&&(t=Zl(i,Xt()));let o=[];const s=Pt(n.path),a=n.operationForChild(s),c=e.children.get(s);if(c&&a){const l=t?t.getImmediateChild(s):null,h=RW(r,s);o=o.concat(QW(a,c,l,h))}return i&&(o=o.concat(hx(i,n,r,t))),o}}function YW(n,e,t,r){const i=e.get(Xt());null==t&&null!=i&&(t=Zl(i,Xt()));let o=[];return e.children.inorderTraversal((s,a)=>{const c=t?t.getImmediateChild(s):null,l=RW(r,s),h=n.operationForChild(s);h&&(o=o.concat(YW(h,a,c,l)))}),i&&(o=o.concat(hx(i,n,r,t))),o}function JW(n,e){const t=e.query,r=pv(n,t);return{hashFn:()=>(function ove(n){return n.viewCache_.serverCache.getNode()}(e)||pt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Cve(n,e,t){const r=gx(n,t);if(r){const i=mx(r),o=i.path,s=i.queryId,a=io(o,e);return _x(n,o,new lv(nx(s),a))}return[]}(n,t._path,r):function Eve(n,e){return tg(n,new lv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function v_e(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return yT(n,t,null,o)}}}}function pv(n,e){const t=ET(e);return n.queryToTagMap.get(t)}function ET(n){return n._path.toString()+"$"+n._queryIdentifier}function gx(n,e){return n.tagToQueryMap.get(e)}function mx(n){const e=n.indexOf("$");return(0,S.vA)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new cn(n.substr(0,e))}}function _x(n,e,t){const r=n.syncPointTree_.get(e);return(0,S.vA)(r,"Missing sync point for query tag that we're tracking"),hx(r,t,dT(n.pendingWriteTree_,e),null)}function gv(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function mve(){return(0,S.vA)(_T,"Reference.ts has not been loaded"),_T}())(n._repo,n._path):n}class yx{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new yx(t)}node(){return this.node_}}class vx{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Jn(this.path_,e);return new vx(this.syncTree_,t)}node(){return vT(this.syncTree_,this.path_)}}const Pve=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},ZW=function(n,e,t){return n&&"object"==typeof n?((0,S.vA)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Dve(n[".sv"],e,t):"object"==typeof n[".sv"]?Mve(n[".sv"],e):void(0,S.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Dve=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,S.vA)(!1,"Unexpected server value: "+n)},Mve=function(n,e,t){n.hasOwnProperty("increment")||(0,S.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,S.vA)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,S.vA)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},XW=function(n,e,t,r){return Cx(e,new vx(t,n),r)},Ex=function(n,e,t){return Cx(n,new yx(e),t)};function Cx(n,e,t){const r=n.getPriority().val(),i=ZW(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const s=n,a=ZW(s.getValue(),e,t);return a!==s.getValue()||i!==s.getPriority().val()?new Qp(a,ir(i)):n}{const s=n;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Qp(i))),s.forEachChild(Ln,(a,c)=>{const l=Cx(c,e.getImmediateChild(a),t);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}class wx{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function CT(n,e){let t=e instanceof cn?e:new cn(e),r=n,i=Pt(t);for(;null!==i;){const o=(0,S.yw)(r.node.children,i)||{children:{},childCount:0};r=new wx(i,r,o),t=bn(t),i=Pt(t)}return r}function Qd(n){return n.node.value}function Ix(n,e){n.node.value=e,bx(n)}function e5(n){return n.node.childCount>0}function wT(n,e){oi(n.node.children,(t,r)=>{e(new wx(t,n,r))})}function t5(n,e,t,r){t&&!r&&e(n),wT(n,i=>{t5(i,e,!0,r)}),t&&r&&e(n)}function mv(n){return new cn(null===n.parent?n.name:mv(n.parent)+"/"+n.name)}function bx(n){null!==n.parent&&function Nve(n,e,t){const r=function Ove(n){return void 0===Qd(n)&&!e5(n)}(t),i=(0,S.gR)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,bx(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,bx(n))}(n.parent,n.name,n)}const xve=/[\[\].#$\/\u0000-\u001F\u007F]/,kve=/[\[\].#$\u0000-\u001F\u007F]/,Tx=10485760,IT=function(n){return"string"==typeof n&&0!==n.length&&!xve.test(n)},n5=function(n){return"string"==typeof n&&0!==n.length&&!kve.test(n)},_v=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Yb(n)||n&&"object"==typeof n&&(0,S.gR)(n,".sv")},Fa=function(n,e,t,r){r&&void 0===e||yv((0,S.dI)(n,"value"),e,t)},yv=function(n,e,t){const r=t instanceof cn?new Z_e(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+zd(r));if("function"==typeof e)throw new Error(n+"contains a function "+zd(r)+" with contents = "+e.toString());if(Yb(e))throw new Error(n+"contains "+e.toString()+" "+zd(r));if("string"==typeof e&&e.length>Tx/3&&(0,S.OE)(e)>Tx)throw new Error(n+"contains a string greater than "+Tx+" utf8 bytes "+zd(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(oi(e,(s,a)=>{if(".value"===s)i=!0;else if(".priority"!==s&&".sv"!==s&&(o=!0,!IT(s)))throw new Error(n+" contains an invalid key ("+s+") "+zd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function X_e(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,S.OE)(e),hW(n)})(r,s),yv(n,a,r),function eye(n){const e=n.parts_.pop();n.byteLength_-=(0,S.OE)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+zd(r)+" in addition to actual children.")}},r5=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,S.dI)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];oi(e,(s,a)=>{const c=new cn(s);if(yv(i,a,Jn(t,c)),".priority"===jN(c)&&!_v(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=nv(r);for(let s=0;s<o.length;s++)if((".priority"!==o[s]||s!==o.length-1)&&!IT(o[s]))throw new Error(n+"contains an invalid key ("+o[s]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(J_e);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&us(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},Ax=function(n,e,t){if(!t||void 0!==e){if(Yb(e))throw new Error((0,S.dI)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!_v(e))throw new Error((0,S.dI)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},vv=function(n,e,t,r){if(!(r&&void 0===t||IT(t)))throw new Error((0,S.dI)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ev=function(n,e,t,r){if(!(r&&void 0===t||n5(t)))throw new Error((0,S.dI)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Vve=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Ev(n,e,t,r)},ds=function(n,e){if(".info"===Pt(e))throw new Error(n+" failed = Can't modify data under /.info/")},i5=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!IT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),n5(n)}(t))throw new Error((0,S.dI)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Uve{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function bT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!$N(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function o5(n,e,t){bT(n,t),s5(n,r=>$N(r,e))}function Ho(n,e,t){bT(n,t),s5(n,r=>us(r,e)||us(e,r))}function s5(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Bve(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Bve(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();$d&&ii("event: "+t.toString()),Wp(r)}}}const a5="repo_interrupt",jve=25;class $ve{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Uve,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=aT(),this.transactionQueueTree_=new wx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function c5(n){const t=n.infoData_.getNode(new cn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Cv(n){return Pve({timestamp:c5(n)})}function l5(n,e,t,r,i){n.dataUpdateCount++;const o=new cn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let s=[];if(i)if(r){const c=(0,S.kH)(t,l=>ir(l));s=function wve(n,e,t,r){const i=gx(n,r);if(i){const o=mx(i),s=o.path,a=o.queryId,c=io(s,e),l=Vn.fromObject(t);return _x(n,s,new Xp(nx(a),c,l))}return[]}(n.serverSyncTree_,o,c,i)}else{const c=ir(t);s=KW(n.serverSyncTree_,o,c,i)}else if(r){const c=(0,S.kH)(t,l=>ir(l));s=function vve(n,e,t){const r=Vn.fromObject(t);return tg(n,new Xp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,c)}else{const c=ir(t);s=fv(n.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=rg(n,o)),Ho(n.eventQueue_,a,s)}function u5(n,e){Sx(n,"connected",e),!1===e&&function Wve(n){ng(n,"onDisconnectEvents");const e=Cv(n),t=aT();XN(n.onDisconnect_,Xt(),(i,o)=>{const s=XW(i,o,n.serverSyncTree_,e);Zp(t,i,s)});let r=[];XN(t,Xt(),(i,o)=>{r=r.concat(fv(n.serverSyncTree_,i,o));const s=Ox(n,i);rg(n,s)}),n.onDisconnect_=aT(),Ho(n.eventQueue_,Xt(),r)}(n)}function Sx(n,e,t){const r=new cn("/.info/"+e),i=ir(t);n.infoData_.updateSnapshot(r,i);const o=fv(n.infoSyncTree_,r,i);Ho(n.eventQueue_,r,o)}function TT(n){return n.nextWriteId_++}function Px(n,e,t,r,i){ng(n,"set",{path:e.toString(),value:t,priority:r});const o=Cv(n),s=ir(t,r),a=vT(n.serverSyncTree_,e),c=Ex(s,a,o),l=TT(n),h=fx(n.serverSyncTree_,e,c,l,!0);bT(n.eventQueue_,h),n.server_.put(e.toString(),s.val(!0),(_,v)=>{const w="ok"===_;w||Vi("set at "+e+" failed: "+_);const b=eu(n.serverSyncTree_,l,!w);Ho(n.eventQueue_,e,b),tu(0,i,_,v)});const g=Ox(n,e);rg(n,g),Ho(n.eventQueue_,g,[])}function Kve(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&ZN(n.onDisconnect_,e),tu(0,t,r,i)})}function d5(n,e,t,r){const i=ir(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,s)=>{"ok"===o&&Zp(n.onDisconnect_,e,i),tu(0,r,o,s)})}function Dx(n,e,t){let r;r=".info"===Pt(e._path)?yT(n.infoSyncTree_,e,t):yT(n.serverSyncTree_,e,t),o5(n.eventQueue_,e._path,r)}function h5(n){n.persistentConnection_&&n.persistentConnection_.interrupt(a5)}function ng(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ii(t,...e)}function tu(n,e,t,r){e&&Wp(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const s=new Error(o);s.code=i,e(s)}})}function Mx(n,e,t){return vT(n.serverSyncTree_,e,t)||pt.EMPTY_NODE}function AT(n,e=n.transactionQueueTree_){if(e||ST(n,e),Qd(e)){const t=p5(n,e);(0,S.vA)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function eEe(n,e,t){const r=t.map(l=>l.currentWriteId),i=Mx(n,e,r);let o=i;const s=i.hash();for(let l=0;l<t.length;l++){const h=t[l];(0,S.vA)(0===h.status,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const g=io(e,h.path);o=o.updateChild(g,h.currentOutputSnapshotRaw)}const a=o.val(!0),c=e;n.server_.put(c.toString(),a,l=>{ng(n,"transaction put response",{path:c.toString(),status:l});let h=[];if("ok"===l){const g=[];for(let _=0;_<t.length;_++)t[_].status=2,h=h.concat(eu(n.serverSyncTree_,t[_].currentWriteId)),t[_].onComplete&&g.push(()=>t[_].onComplete(null,!0,t[_].currentOutputSnapshotResolved)),t[_].unwatcher();ST(n,CT(n.transactionQueueTree_,e)),AT(n,n.transactionQueueTree_),Ho(n.eventQueue_,e,h);for(let _=0;_<g.length;_++)Wp(g[_])}else{if("datastale"===l)for(let g=0;g<t.length;g++)t[g].status=3===t[g].status?4:0;else{Vi("transaction at "+c.toString()+" failed: "+l);for(let g=0;g<t.length;g++)t[g].status=4,t[g].abortReason=l}rg(n,e)}},s)}(n,mv(e),t)}else e5(e)&&wT(e,t=>{AT(n,t)})}function rg(n,e){const t=f5(n,e),r=mv(t);return function tEe(n,e,t){if(0===e.length)return;const r=[];let i=[];const s=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=io(t,c.path);let g,h=!1;if((0,S.vA)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,g=c.abortReason,i=i.concat(eu(n.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=jve)h=!0,g="maxretry",i=i.concat(eu(n.serverSyncTree_,c.currentWriteId,!0));else{const _=Mx(n,c.path,s);c.currentInputSnapshot=_;const v=e[a].update(_.val());if(void 0!==v){yv("transaction failed: Data returned ",v,c.path);let w=ir(v);"object"==typeof v&&null!=v&&(0,S.gR)(v,".priority")||(w=w.updatePriority(_.getPriority()));const A=c.currentWriteId,N=Cv(n),R=Ex(w,_,N);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=R,c.currentWriteId=TT(n),s.splice(s.indexOf(A),1),i=i.concat(fx(n.serverSyncTree_,c.path,R,c.currentWriteId,c.applyLocally)),i=i.concat(eu(n.serverSyncTree_,A,!0))}else h=!0,g="nodata",i=i.concat(eu(n.serverSyncTree_,c.currentWriteId,!0))}Ho(n.eventQueue_,t,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===g?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(g),!1,null)))}ST(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Wp(r[a]);AT(n,n.transactionQueueTree_)}(n,p5(n,t),r),r}function f5(n,e){let t,r=n.transactionQueueTree_;for(t=Pt(e);null!==t&&void 0===Qd(r);)r=CT(r,t),t=Pt(e=bn(e));return r}function p5(n,e){const t=[];return g5(n,e,t),t.sort((r,i)=>r.order-i.order),t}function g5(n,e,t){const r=Qd(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);wT(e,i=>{g5(n,i,t)})}function ST(n,e){const t=Qd(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Ix(e,t.length>0?t:void 0)}wT(e,r=>{ST(n,r)})}function Ox(n,e){const t=mv(f5(n,e)),r=CT(n.transactionQueueTree_,e);return function Rve(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Rx(n,i)}),Rx(n,r),t5(r,i=>{Rx(n,i)}),t}function Rx(n,e){const t=Qd(e);if(t){const r=[];let i=[],o=-1;for(let s=0;s<t.length;s++)3===t[s].status||(1===t[s].status?((0,S.vA)(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):((0,S.vA)(0===t[s].status,"Unexpected transaction status in abort"),t[s].unwatcher(),i=i.concat(eu(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&r.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Ix(e,void 0):t.length=o+1,Ho(n.eventQueue_,mv(e),i);for(let s=0;s<r.length;s++)Wp(r[s])}}const Nx=function(n,e){const t=iEe(n),r=t.namespace;return"firebase.com"===t.domain&&Na(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Na("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Vi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new kN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new cn(t.pathString)}},iEe=function(n){let e="",t="",r="",i="",o="",s=!0,a="https",c=443;if("string"==typeof n){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let h=n.indexOf("/");-1===h&&(h=n.length);let g=n.indexOf("?");-1===g&&(g=n.length),e=n.substring(0,Math.min(h,g)),h<g&&(i=function nEe(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(h,g)));const _=function rEe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Vi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,g)));l=e.indexOf(":"),l>=0?(s="https"===a||"wss"===a,c=parseInt(e.substring(l+1),10)):l=e.length;const v=e.slice(0,l);if("localhost"===v.toLowerCase())t="localhost";else if(v.split(".").length<=2)t=v;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),t=e.substring(w+1),o=r}"ns"in _&&(o=_.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},m5="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",oEe=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=m5.charAt(t%64),t=Math.floor(t/64);(0,S.vA)(0===t,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)s+=m5.charAt(e[i]);return(0,S.vA)(20===s.length,"nextPushId: Length should be 20."),s}}();class _5{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,S.As)(this.snapshot.exportVal())}}class y5{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class xx{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,S.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class v5{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new S.cY;return Kve(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ds("OnDisconnect.remove",this._path);const e=new S.cY;return d5(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ds("OnDisconnect.set",this._path),Fa("OnDisconnect.set",e,this._path,!1);const t=new S.cY;return d5(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ds("OnDisconnect.setWithPriority",this._path),Fa("OnDisconnect.setWithPriority",e,this._path,!1),Ax("OnDisconnect.setWithPriority",t,!1);const r=new S.cY;return function Qve(n,e,t,r,i){const o=ir(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(s,a)=>{"ok"===s&&Zp(n.onDisconnect_,e,o),tu(0,i,s,a)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ds("OnDisconnect.update",this._path),r5("OnDisconnect.update",e,this._path,!1);const t=new S.cY;return function Yve(n,e,t,r){if((0,S.Im)(t))return ii("onDisconnect().update() called with empty data.  Don't do anything."),void tu(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&oi(t,(s,a)=>{const c=ir(a);Zp(n.onDisconnect_,Jn(e,s),c)}),tu(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Ao{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Dt(this._path)?null:jN(this._path)}get ref(){return new hs(this._repo,this._path)}get _queryIdentifier(){const e=IW(this._queryParams),t=NN(e);return"{}"===t?"default":t}get _queryObject(){return IW(this._queryParams)}isEqual(e){if(!((e=(0,S.Ku)(e))instanceof Ao))return!1;const t=this._repo===e._repo,r=$N(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Y_e(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function PT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function nu(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===xa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Wl)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Dc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Ln){if(null!=e&&!_v(e)||null!=t&&!_v(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,S.vA)(n.getIndex()instanceof WN||n.getIndex()===KN,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function DT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class hs extends Ao{constructor(e,t){super(e,t,new iT,!1)}get parent(){const e=dW(this._path);return null===e?null:new hs(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Yd{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new cn(e),r=Jd(this.ref,e);return new Yd(this._node.getChild(t),r,Ln)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Yd(i,Jd(this.ref,r),Ln)))}hasChild(e){const t=new cn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function E5(n,e){return(n=(0,S.Ku)(n))._checkNotDeleted("ref"),void 0!==e?Jd(n._root,e):n._root}function C5(n,e){(n=(0,S.Ku)(n))._checkNotDeleted("refFromURL");const t=Nx(e,n._repo.repoInfo_.nodeAdmin);i5("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Na("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),E5(n,t.path.toString())}function Jd(n,e){return null===Pt((n=(0,S.Ku)(n))._path)?Vve("child","path",e,!1):Ev("child","path",e,!1),new hs(n._repo,Jn(n._path,e))}function kx(n,e){n=(0,S.Ku)(n),ds("set",n._path),Fa("set",e,n._path,!1);const t=new S.cY;return Px(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function uEe(n,e){r5("update",e,n._path,!1);const t=new S.cY;return function Gve(n,e,t,r){ng(n,"update",{path:e.toString(),value:t});let i=!0;const o=Cv(n),s={};if(oi(t,(a,c)=>{i=!1,s[a]=XW(Jn(e,a),ir(c),n.serverSyncTree_,o)}),i)ii("update() called with empty data.  Don't do anything."),tu(0,r,"ok",void 0);else{const a=TT(n),c=function yve(n,e,t,r){!function kye(n,e,t,r){(0,S.vA)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=ix(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Vn.fromObject(t);return tg(n,new Xp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,s,a);bT(n.eventQueue_,c),n.server_.merge(e.toString(),t,(l,h)=>{const g="ok"===l;g||Vi("update at "+e+" failed: "+l);const _=eu(n.serverSyncTree_,a,!g),v=_.length>0?rg(n,e):e;Ho(n.eventQueue_,v,_),tu(0,r,l,h)}),oi(t,l=>{const h=Ox(n,Jn(e,l));rg(n,h)}),Ho(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function dEe(n){n=(0,S.Ku)(n);const e=new xx(()=>{}),t=new wv(e);return function qve(n,e,t){const r=function Ive(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(l,h)=>{const g=io(l,t);r=r||Zl(h,g)});let i=n.syncPointTree_.get(t);i?r=r||Zl(i,Xt()):(i=new $W,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,s=o?new Yl(r,!0,!1):null;return function sve(n){return uT(n.viewCache_)}(HW(i,e,dT(n.pendingWriteTree_,e._path),o?s.getNode():pt.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const o=ir(i).withIndex(e._queryParams.getIndex());let s;if(px(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())s=fv(n.serverSyncTree_,e._path,o);else{const a=pv(n.serverSyncTree_,e);s=KW(n.serverSyncTree_,e._path,o,a)}return Ho(n.eventQueue_,e._path,s),yT(n.serverSyncTree_,e,t,null,!0),o},i=>(ng(n,"get for query "+(0,S.As)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Yd(r,new hs(n._repo,n._path),n._queryParams.getIndex()))}class wv{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new _5("value",this,new Yd(e.snapshotNode,new hs(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new y5(this,e,t):null}matches(e){return e instanceof wv&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class MT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new y5(this,e,t):null}createEvent(e,t){(0,S.vA)(null!=e.childName,"Child events should have a childName.");const r=Jd(new hs(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new _5(e.type,this,new Yd(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof MT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Iv(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const c=t,l=(h,g)=>{Dx(n._repo,n,a),c(h,g)};l.userCallback=t.userCallback,l.context=t.context,t=l}const s=new xx(t,o||void 0),a="value"===e?new wv(s):new MT(e,s);return function Jve(n,e,t){let r;r=".info"===Pt(e._path)?px(n.infoSyncTree_,e,t):px(n.serverSyncTree_,e,t),o5(n.eventQueue_,e._path,r)}(n._repo,n,a),()=>Dx(n._repo,n,a)}function Fx(n,e,t,r){return Iv(n,"value",e,t,r)}function w5(n,e,t,r){return Iv(n,"child_added",e,t,r)}function I5(n,e,t,r){return Iv(n,"child_changed",e,t,r)}function b5(n,e,t,r){return Iv(n,"child_moved",e,t,r)}function T5(n,e,t,r){return Iv(n,"child_removed",e,t,r)}function A5(n,e,t){let r=null;const i=t?new xx(t):null;"value"===e?r=new wv(i):e&&(r=new MT(e,i)),Dx(n._repo,n,r)}class zs{}class S5 extends zs{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){Fa("endAt",this._value,e._path,!0);const t=JN(e._queryParams,this._value,this._key);if(DT(t),nu(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class fEe extends zs{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){Fa("endBefore",this._value,e._path,!1);const t=function wye(n,e,t){let r;return r=JN(n,e,n.index_===xa||t?t:Wl),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(DT(t),nu(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class P5 extends zs{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){Fa("startAt",this._value,e._path,!0);const t=YN(e._queryParams,this._value,this._key);if(DT(t),nu(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class mEe extends zs{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){Fa("startAfter",this._value,e._path,!1);const t=function Cye(n,e,t){let r;return r=YN(n,e,n.index_===xa||t?t:Dc),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(DT(t),nu(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ao(e._repo,e._path,t,e._orderByCalled)}}class yEe extends zs{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ao(e._repo,e._path,function vye(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class EEe extends zs{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ao(e._repo,e._path,function Eye(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class wEe extends zs{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){PT(e,"orderByChild");const t=new cn(this._path);if(Dt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new WN(t),i=oT(e._queryParams,r);return nu(i),new Ao(e._repo,e._path,i,!0)}}class bEe extends zs{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){PT(e,"orderByKey");const t=oT(e._queryParams,xa);return nu(t),new Ao(e._repo,e._path,t,!0)}}class AEe extends zs{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){PT(e,"orderByPriority");const t=oT(e._queryParams,Ln);return nu(t),new Ao(e._repo,e._path,t,!0)}}class PEe extends zs{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){PT(e,"orderByValue");const t=oT(e._queryParams,KN);return nu(t),new Ao(e._repo,e._path,t,!0)}}class MEe extends zs{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(Fa("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new S5(this._value,this._key)._apply(new P5(this._value,this._key)._apply(e))}}function qs(n,...e){let t=(0,S.Ku)(n);for(const r of e)t=r._apply(t);return t}(function uve(n){(0,S.vA)(!gT,"__referenceConstructor has already been defined"),gT=n})(hs),function gve(n){(0,S.vA)(!_T,"__referenceConstructor has already been defined"),_T=n}(hs);const Lx={};function Vx(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||Na("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ii("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c,l,s=Nx(o,i),a=s.repoInfo;typeof process<"u"&&process.env&&(l=process.env.FIREBASE_DATABASE_EMULATOR_HOST),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=Nx(o,i),a=s.repoInfo):c=!s.repoInfo.secure;const h=i&&c?new tv(tv.OWNER):new T_e(n.name,n.options,e);i5("Invalid Firebase Database URL",s),Dt(s.path)||Na("Database URL must point to the root of a Firebase Database (not including a child path).");const g=function kEe(n,e,t,r){let i=Lx[e.name];i||(i={},Lx[e.name]=i);let o=i[n.toURLString()];return o&&Na("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new $ve(n,false,t,r),i[n.toURLString()]=o,o}(a,n,h,new b_e(n.name,t));return new LEe(g,n)}class LEe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Hve(n,e,t){if(n.stats_=VN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new sT(n.repoInfo_,(r,i,o,s)=>{l5(n,r,i,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>u5(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,S.As)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new qd(n.repoInfo_,e,(r,i,o,s)=>{l5(n,r,i,o,s)},r=>{u5(n,r)},r=>{!function zve(n,e){oi(e,(t,r)=>{Sx(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function P_e(n,e){const t=n.toString();return LN[t]||(LN[t]=e()),LN[t]}(n.repoInfo_,()=>new Pye(n.stats_,n.server_)),n.infoData_=new Iye,n.infoSyncTree_=new WW({startListening:(r,i,o,s)=>{let a=[];const c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=fv(n.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Sx(n,"connected",!1),n.serverSyncTree_=new WW({startListening:(r,i,o,s)=>(n.server_.listen(r,o,i,(a,c)=>{const l=s(a,c);Ho(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new hs(this._repo,Xt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function xEe(n,e){const t=Lx[e];(!t||t[n.key]!==n)&&Na(`Database ${e}(${n.repoInfo_}) has already been deleted.`),h5(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Na("Cannot call "+e+" on a deleted database.")}}function M5(){X9.IS_TRANSPORT_INITIALIZED&&Vi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function VEe(){M5(),Kl.forceDisallow()}function UEe(){M5(),Kp.forceDisallow(),Kl.forceAllow()}function $Ee(n,e){N9(n,e)}const zEe={".sv":"timestamp"};class WEe{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}qd.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},qd.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function HEe(n){MN(ba.SDK_VERSION),(0,ba._registerComponent)(new _c.uA("database",(e,{instanceIdentifier:t})=>Vx(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ba.registerVersion)(S9,"1.0.7",n),(0,ba.registerVersion)(S9,"1.0.7","esm2017")}();const JEe=new Vo.Vy("@firebase/database-compat"),R5=function(n){JEe.warn("FIREBASE WARNING: "+n)};class eCe{constructor(e){this._delegate=e}cancel(e){(0,S.od)("OnDisconnect.cancel",0,1,arguments.length),(0,S.oD)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,S.od)("OnDisconnect.remove",0,1,arguments.length),(0,S.oD)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,S.od)("OnDisconnect.set",1,2,arguments.length),(0,S.oD)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,S.od)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,S.oD)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,S.od)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,R5("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,S.oD)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class tCe{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,S.od)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ru{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,S.od)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,S.od)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,S.od)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,S.od)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,S.od)("DataSnapshot.child",0,1,arguments.length),e=String(e),Ev("DataSnapshot.child","path",e,!1),new ru(this._database,this._delegate.child(e))}hasChild(e){return(0,S.od)("DataSnapshot.hasChild",1,1,arguments.length),Ev("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,S.od)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,S.od)("DataSnapshot.forEach",1,1,arguments.length),(0,S.oD)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new ru(this._database,t)))}hasChildren(){return(0,S.od)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,S.od)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,S.od)("DataSnapshot.ref",0,0,arguments.length),new zo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class mi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,S.od)("Query.on",2,4,arguments.length),(0,S.oD)("Query.on","callback",t,!1);const s=mi.getCancelAndContextArgs_("Query.on",r,i),a=(l,h)=>{t.call(s.context,new ru(this.database,l),h)};a.userCallback=t,a.context=s.context;const c=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(e){case"value":return Fx(this._delegate,a,c),t;case"child_added":return w5(this._delegate,a,c),t;case"child_removed":return T5(this._delegate,a,c),t;case"child_changed":return I5(this._delegate,a,c),t;case"child_moved":return b5(this._delegate,a,c),t;default:throw new Error((0,S.dI)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,S.od)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,S.dI)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,S.oD)("Query.off","callback",t,!0),(0,S.HN)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,A5(this._delegate,e,i)}else A5(this._delegate,e)}get(){return dEe(this._delegate).then(e=>new ru(this.database,e))}once(e,t,r,i){(0,S.od)("Query.once",1,4,arguments.length),(0,S.oD)("Query.once","callback",t,!0);const o=mi.getCancelAndContextArgs_("Query.once",r,i),s=new S.cY,a=(l,h)=>{const g=new ru(this.database,l);t&&t.call(o.context,g,h),s.resolve(g)};a.userCallback=t,a.context=o.context;const c=l=>{o.cancel&&o.cancel.call(o.context,l),s.reject(l)};switch(e){case"value":Fx(this._delegate,a,c,{onlyOnce:!0});break;case"child_added":w5(this._delegate,a,c,{onlyOnce:!0});break;case"child_removed":T5(this._delegate,a,c,{onlyOnce:!0});break;case"child_changed":I5(this._delegate,a,c,{onlyOnce:!0});break;case"child_moved":b5(this._delegate,a,c,{onlyOnce:!0});break;default:throw new Error((0,S.dI)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return(0,S.od)("Query.limitToFirst",1,1,arguments.length),new mi(this.database,qs(this._delegate,function vEe(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new yEe(n)}(e)))}limitToLast(e){return(0,S.od)("Query.limitToLast",1,1,arguments.length),new mi(this.database,qs(this._delegate,function CEe(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new EEe(n)}(e)))}orderByChild(e){return(0,S.od)("Query.orderByChild",1,1,arguments.length),new mi(this.database,qs(this._delegate,function IEe(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ev("orderByChild","path",n,!1),new wEe(n)}(e)))}orderByKey(){return(0,S.od)("Query.orderByKey",0,0,arguments.length),new mi(this.database,qs(this._delegate,function TEe(){return new bEe}()))}orderByPriority(){return(0,S.od)("Query.orderByPriority",0,0,arguments.length),new mi(this.database,qs(this._delegate,function SEe(){return new AEe}()))}orderByValue(){return(0,S.od)("Query.orderByValue",0,0,arguments.length),new mi(this.database,qs(this._delegate,function DEe(){return new PEe}()))}startAt(e=null,t){return(0,S.od)("Query.startAt",0,2,arguments.length),new mi(this.database,qs(this._delegate,function gEe(n=null,e){return vv("startAt","key",e,!0),new P5(n,e)}(e,t)))}startAfter(e=null,t){return(0,S.od)("Query.startAfter",0,2,arguments.length),new mi(this.database,qs(this._delegate,function _Ee(n,e){return vv("startAfter","key",e,!0),new mEe(n,e)}(e,t)))}endAt(e=null,t){return(0,S.od)("Query.endAt",0,2,arguments.length),new mi(this.database,qs(this._delegate,function hEe(n,e){return vv("endAt","key",e,!0),new S5(n,e)}(e,t)))}endBefore(e=null,t){return(0,S.od)("Query.endBefore",0,2,arguments.length),new mi(this.database,qs(this._delegate,function pEe(n,e){return vv("endBefore","key",e,!0),new fEe(n,e)}(e,t)))}equalTo(e,t){return(0,S.od)("Query.equalTo",1,2,arguments.length),new mi(this.database,qs(this._delegate,function OEe(n,e){return vv("equalTo","key",e,!0),new MEe(n,e)}(e,t)))}toString(){return(0,S.od)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,S.od)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,S.od)("Query.isEqual",1,1,arguments.length),!(e instanceof mi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,S.oD)(e,"cancel",i.cancel,!0),i.context=r,(0,S.HN)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,S.dI)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new zo(this.database,new hs(this._delegate._repo,this._delegate._path))}}class zo extends mi{constructor(e,t){super(e,new Ao(t._repo,t._path,new iT,!1)),this.database=e,this._delegate=t}getKey(){return(0,S.od)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,S.od)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new zo(this.database,Jd(this._delegate,e))}getParent(){(0,S.od)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new zo(this.database,e):null}getRoot(){return(0,S.od)("Reference.root",0,0,arguments.length),new zo(this.database,this._delegate.root)}set(e,t){(0,S.od)("Reference.set",1,2,arguments.length),(0,S.oD)("Reference.set","onComplete",t,!0);const r=kx(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,S.od)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,R5("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ds("Reference.update",this._delegate._path),(0,S.oD)("Reference.update","onComplete",t,!0);const r=uEe(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,S.od)("Reference.setWithPriority",2,3,arguments.length),(0,S.oD)("Reference.setWithPriority","onComplete",r,!0);const i=function lEe(n,e,t){if(ds("setWithPriority",n._path),Fa("setWithPriority",e,n._path,!1),Ax("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new S.cY;return Px(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,S.od)("Reference.remove",0,1,arguments.length),(0,S.oD)("Reference.remove","onComplete",e,!0);const t=function aEe(n){return ds("remove",n._path),kx(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,S.od)("Reference.transaction",1,3,arguments.length),(0,S.oD)("Reference.transaction","transactionUpdate",e,!1),(0,S.oD)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,S.dI)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function KEe(n,e,t){var r;if(n=(0,S.Ku)(n),ds("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,o=new S.cY,a=Fx(n,()=>{});return function Xve(n,e,t,r,i,o){ng(n,"transaction on "+e);const s={path:e,update:t,onComplete:r,status:null,order:M9(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Mx(n,e,void 0);s.currentInputSnapshot=a;const c=s.update(a.val());if(void 0===c)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{yv("transaction failed: Data returned ",c,s.path),s.status=0;const l=CT(n.transactionQueueTree_,e),h=Qd(l)||[];let g;h.push(s),Ix(l,h),"object"==typeof c&&null!==c&&(0,S.gR)(c,".priority")?(g=(0,S.yw)(c,".priority"),(0,S.vA)(_v(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):g=(vT(n.serverSyncTree_,e)||pt.EMPTY_NODE).getPriority().val();const _=Cv(n),v=ir(c,g),w=Ex(v,a,_);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=w,s.currentWriteId=TT(n);const b=fx(n.serverSyncTree_,e,w,s.currentWriteId,s.applyLocally);Ho(n.eventQueue_,e,b),AT(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(c,l,h)=>{let g=null;c?o.reject(c):(g=new Yd(h,new hs(n._repo,n._path),Ln),o.resolve(new WEe(l,g)))},a,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new tCe(o.committed,new ru(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,S.od)("Reference.setPriority",1,2,arguments.length),(0,S.oD)("Reference.setPriority","onComplete",t,!0);const r=function cEe(n,e){n=(0,S.Ku)(n),ds("setPriority",n._path),Ax("setPriority",e,!1);const t=new S.cY;return Px(n._repo,Jn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,S.od)("Reference.push",0,2,arguments.length),(0,S.oD)("Reference.push","onComplete",t,!0);const r=function sEe(n,e){n=(0,S.Ku)(n),ds("push",n._path),Fa("push",e,n._path,!0);const t=c5(n._repo),r=oEe(t),i=Jd(n,r),o=Jd(n,r);let s;return s=null!=e?kx(o,e).then(()=>o):Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}(this._delegate,e),i=r.then(s=>new zo(this.database,s));t&&i.then(()=>t(null),s=>t(s));const o=new zo(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return ds("Reference.onDisconnect",this._delegate._path),new eCe(new v5(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class bv{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:VEe,forceLongPolling:UEe}}useEmulator(e,t,r={}){!function O5(n,e,t,r={}){(n=(0,S.Ku)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Na("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Na('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new tv(tv.OWNER);else if(r.mockUserToken){const s="string"==typeof r.mockUserToken?r.mockUserToken:(0,S.Fy)(r.mockUserToken,n.app.options.projectId);o=new tv(s)}!function NEe(n,e,t,r){n.repoInfo_=new kN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,S.od)("database.ref",0,1,arguments.length),e instanceof zo){const t=C5(this._delegate,e.toString());return new zo(this,t)}{const t=E5(this._delegate,e);return new zo(this,t)}}refFromURL(e){(0,S.od)("database.refFromURL",1,1,arguments.length);const r=C5(this._delegate,e);return new zo(this,r)}goOffline(){return(0,S.od)("database.goOffline",0,0,arguments.length),function BEe(n){(n=(0,S.Ku)(n))._checkNotDeleted("goOffline"),h5(n._repo)}(this._delegate)}goOnline(){return(0,S.od)("database.goOnline",0,0,arguments.length),function jEe(n){(n=(0,S.Ku)(n))._checkNotDeleted("goOnline"),function Zve(n){n.persistentConnection_&&n.persistentConnection_.resume(a5)}(n._repo)}(this._delegate)}}bv.ServerValue={TIMESTAMP:function qEe(){return zEe}(),increment:n=>function GEe(n){return{".sv":{increment:n}}}(n)};var rCe=Object.freeze({__proto__:null,initStandalone:function nCe({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:i,namespace:o,nodeAdmin:s=!1}){MN(t);const a=new _c.h1("database-standalone"),c=new _c.Kq("auth-internal",a);let l;return c.setComponent(new _c.uA("auth-internal",()=>r,"PRIVATE")),i&&(l=new _c.Kq("app-check-internal",a),l.setComponent(new _c.uA("app-check-internal",()=>i,"PRIVATE"))),{instance:new bv(Vx(n,c,l,e,s),n),namespace:o}}});const iCe=bv.ServerValue;function Tv(n,e,t="on",r=fM){return new tn(i=>{let o=null;return o=n[t](e,(s,a)=>{r.schedule(()=>{i.next({snapshot:s,prevKey:a})}),"once"===t&&r.schedule(()=>i.complete())},s=>{r.schedule(()=>i.error(s))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe($e(i=>{const{snapshot:o,prevKey:s}=i;let a=null;return o.exists()&&(a=o.key),{type:e,payload:o,prevKey:s,key:a}}),E4())}function N5(n){return null==n}function x5(n){return"function"==typeof n.set}function k5(n,e){return x5(e)?e:n.ref(e)}function F5(n,e){if(function sCe(n){return"string"==typeof n}(n))return e.stringCase();if(x5(n))return e.firebaseCase();if(function aCe(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function L5(n){return(N5(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function V5(n,e,t){return yM(...(e=L5(e)).map(i=>Tv(n,i,"on",t)))}function U5(n,e){return function(r,i){return F5(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function dCe(n){return function(t){return t?F5(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function B5(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function pCe(n,e){const{payload:t,prevKey:r,key:i}=e,o=B5(n,i),s=function fCe(n,e){if(N5(e))return 0;{const t=B5(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(c=>{const l={payload:c,type:"value",prevKey:a,key:c.key};return a=c.key,n=[...n,l],!1})}return n;case"child_added":if(o>-1)(n[o-1]?.key||null)!==r&&(n=n.filter(c=>c.payload.key!==t.key)).splice(s,0,e);else{if(null==r)return[e,...n];(n=n.slice()).splice(s,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===i?e:a);case"child_moved":if(o>-1){const a=n.splice(o,1)[0];return(n=n.slice()).splice(s,0,a),n}return n;default:return n}}function j5(n,e,t){return function hCe(n,e,t){return Tv(n,"value","once",t).pipe(Lr(r=>{const i=[Ze(r)];return e.forEach(o=>i.push(Tv(n,o,"on",t))),yM(...i).pipe(Bf(pCe,[]))}),I4())}(n,e=L5(e),t)}function $5(n,e){return function(){return Tv(n,"value","on",e)}}!function oCe(n){n.INTERNAL.registerComponent(new _c.uA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new bv(i,r)},"PUBLIC").setServiceProps({Reference:zo,Query:mi,Database:bv,DataSnapshot:ru,enableLogging:$Ee,INTERNAL:rCe,ServerValue:iCe}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.7")}(Ia.A);const _Ce=new Ce("angularfire2.realtimeDatabaseURL"),yCe=new Ce("angularfire2.database.use-emulator");let vCe=(()=>{class n{schedulers;database;constructor(t,r,i,o,s,a,c,l,h,g,_,v,w,b,A){this.schedulers=a;const N=c,R=DI(t,s,r);l&&AM(R,s,h,_,v,w,g,b),this.database=_M(`${R.name}.database.${i}`,"AngularFireDatabase",R.name,()=>{const V=s.runOutsideAngular(()=>R.database(i||void 0));return N&&V.useEmulator(...N),V},[N])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>k5(this.database,t));let o=i;return r&&(o=r(i)),function gCe(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:U5(r,"update"),set:U5(r,"set"),push:i=>r.push(i),remove:dCe(r),snapshotChanges:i=>j5(n,i,t).pipe(Wr),stateChanges:i=>V5(n,i,t).pipe(Wr),auditTrail:i=>function cCe(n,e,t){return function uCe(n,e,t){return function lCe(n,e){return Tv(n,"value","on",e).pipe($e(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function u_e(...n){const e=pD(n);return we((t,r)=>{const i=n.length,o=new Array(i);let s=n.map(()=>!1),a=!1;for(let c=0;c<i;c++)Co(n[c]).subscribe(Ve(r,l=>{o[c]=l,!a&&!s[c]&&(s[c]=!0,(a=s.every(jr))&&(s=null))},Ws));t.subscribe(Ve(r,c=>{if(a){const l=[c,...o];r.next(e?e(...l):l)}}))})}(e),$e(([i,o])=>{const s=i.lastKeyToLoad,a=o.map(c=>c.key);return{actions:o,lastKeyToLoad:s,loadedKeys:a}}),function d_e(n){return we((e,t)=>{let r=!1,i=0;e.subscribe(Ve(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),$e(i=>i.actions))}(n,V5(n,e).pipe(Bf((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(Wr),valueChanges:(i,o)=>j5(n,i,t).pipe($e(a=>a.map(c=>o&&o.idField?{...c.payload.val(),[o.idField]:c.key}:c.payload.val())),Wr)}}(o,this)}object(t){return function mCe(n,e){return{query:n,snapshotChanges:()=>$5(n,e.schedulers.outsideAngular)().pipe(Wr),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>$5(n,e.schedulers.outsideAngular)().pipe(Wr,$e(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>k5(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(fe(ey),fe(ty,8),fe(_Ce,8),fe(ts),fe(Ot),fe(mM),fe(yCe,8),fe(MI,8),fe(EM,8),fe(CM,8),fe(wM,8),fe(IM,8),fe(bM,8),fe(TM,8),fe(gM,8))};static \u0275prov=xe({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),ECe=(()=>{class n{constructor(){Ia.A.registerVersion("angularfire",pM.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Wi({type:n});static \u0275inj=ui({providers:[vCe]})}return n})(),CCe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=Wi({type:n,bootstrap:[Ege]});static#n=this.\u0275inj=ui({imports:[$j,pge,l_e,Lce,Dle.initializeApp(bG_firebaseConfig),jpe,ECe]})}return n})();Cie().bootstrapModule(CCe).catch(n=>console.error(n))},3345:(gs,Ur,dt)=>{dt.d(Ur,{A:()=>Ar});var D=dt(1076),je=dt(1362),ke=dt(7852),ee=dt(8041);class pn{constructor(ft,Ct){this._delegate=ft,this.firebase=Ct,(0,ke._addComponent)(ft,new je.uA("app-compat",()=>this,"PUBLIC")),this.container=ft.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ft){this._delegate.automaticDataCollectionEnabled=ft}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ft=>{this._delegate.checkDestroyed(),ft()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ke.deleteApp)(this._delegate)))}_getService(ft,Ct=ke._DEFAULT_ENTRY_NAME){var gr;this._delegate.checkDestroyed();const Yr=this._delegate.container.getProvider(ft);return!Yr.isInitialized()&&"EXPLICIT"===(null===(gr=Yr.getComponent())||void 0===gr?void 0:gr.instantiationMode)&&Yr.initialize(),Yr.getImmediate({identifier:Ct})}_removeServiceInstance(ft,Ct=ke._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ft).clearInstance(Ct)}_addComponent(ft){(0,ke._addComponent)(this._delegate,ft)}_addOrOverwriteComponent(ft){(0,ke._addOrOverwriteComponent)(this._delegate,ft)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Zn=new D.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),pe=function Jt(){const Zt=function Br(Zt){const ft={},Ct={__esModule:!0,initializeApp:function Cn(tt,Gn={}){const Un=ke.initializeApp(tt,Gn);if((0,D.gR)(ft,Un.name))return ft[Un.name];const me=new Zt(Un,Ct);return ft[Un.name]=me,me},app:Yr,registerVersion:ke.registerVersion,setLogLevel:ke.setLogLevel,onLog:ke.onLog,apps:null,SDK_VERSION:ke.SDK_VERSION,INTERNAL:{registerComponent:function zt(tt){const Gn=tt.name,Un=Gn.replace("-compat","");if(ke._registerComponent(tt)&&"PUBLIC"===tt.type){const me=(Xn=Yr())=>{if("function"!=typeof Xn[Un])throw Zn.create("invalid-app-argument",{appName:Gn});return Xn[Un]()};void 0!==tt.serviceProps&&(0,D.zw)(me,tt.serviceProps),Ct[Un]=me,Zt.prototype[Un]=function(...Xn){return this._getService.bind(this,Gn).apply(this,tt.multipleInstances?Xn:[])}}return"PUBLIC"===tt.type?Ct[Un]:null},removeApp:function gr(tt){delete ft[tt]},useAsService:function yi(tt,Gn){return"serverAuth"===Gn?null:Gn},modularAPIs:ke}};function Yr(tt){if(!(0,D.gR)(ft,tt=tt||ke._DEFAULT_ENTRY_NAME))throw Zn.create("no-app",{appName:tt});return ft[tt]}return Ct.default=Ct,Object.defineProperty(Ct,"apps",{get:function Ht(){return Object.keys(ft).map(tt=>ft[tt])}}),Yr.App=Zt,Ct}(pn);return Zt.INTERNAL=Object.assign(Object.assign({},Zt.INTERNAL),{createFirebaseNamespace:Jt,extendNamespace:function ft(Ct){(0,D.zw)(Zt,Ct)},createSubscribe:D.tD,ErrorFactory:D.FA,deepExtend:D.zw}),Zt}(),Ee=new ee.Vy("@firebase/app-compat");if((0,D.Bd)()&&void 0!==window.firebase){Ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Zt=window.firebase.SDK_VERSION;Zt&&Zt.indexOf("LITE")>=0&&Ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ar=pe;!function Ut(Zt){(0,ke.registerVersion)("@firebase/app-compat","0.2.38",Zt)}()},7852:(gs,Ur,dt)=>{dt.r(Ur),dt.d(Ur,{FirebaseError:()=>ee.g,SDK_VERSION:()=>jr,_DEFAULT_ENTRY_NAME:()=>Po,_addComponent:()=>Hi,_addOrOverwriteComponent:()=>nh,_apps:()=>Ci,_clearComponents:()=>Jr,_components:()=>Pr,_getProvider:()=>Ks,_isFirebaseApp:()=>Qs,_isFirebaseServerApp:()=>Wo,_registerComponent:()=>ao,_removeServiceInstance:()=>co,_serverApps:()=>$i,deleteApp:()=>ja,getApp:()=>tn,getApps:()=>hu,initializeApp:()=>Ys,initializeServerApp:()=>Lc,onLog:()=>M,registerVersion:()=>k,setLogLevel:()=>U});var D=dt(467),je=dt(1362),ke=dt(8041),ee=dt(1076);const pn=(J,H)=>H.some(ce=>J instanceof ce);let He,Zn;const pe=new WeakMap,Ee=new WeakMap,ze=new WeakMap,yt=new WeakMap,Ut=new WeakMap;let ft={get(J,H,ce){if(J instanceof IDBTransaction){if("done"===H)return Ee.get(J);if("objectStoreNames"===H)return J.objectStoreNames||ze.get(J);if("store"===H)return ce.objectStoreNames[1]?void 0:ce.objectStore(ce.objectStoreNames[0])}return Cn(J[H])},set:(J,H,ce)=>(J[H]=ce,!0),has:(J,H)=>J instanceof IDBTransaction&&("done"===H||"store"===H)||H in J};function Yr(J){return"function"==typeof J?function gr(J){return J!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Jt(){return Zn||(Zn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(J)?function(...H){return J.apply(Ht(this),H),Cn(pe.get(this))}:function(...H){return Cn(J.apply(Ht(this),H))}:function(H,...ce){const Re=J.call(Ht(this),H,...ce);return ze.set(Re,H.sort?H.sort():[H]),Cn(Re)}}(J):(J instanceof IDBTransaction&&function Zt(J){if(Ee.has(J))return;const H=new Promise((ce,Re)=>{const st=()=>{J.removeEventListener("complete",lt),J.removeEventListener("error",gt),J.removeEventListener("abort",gt)},lt=()=>{ce(),st()},gt=()=>{Re(J.error||new DOMException("AbortError","AbortError")),st()};J.addEventListener("complete",lt),J.addEventListener("error",gt),J.addEventListener("abort",gt)});Ee.set(J,H)}(J),pn(J,function Br(){return He||(He=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(J,ft):J)}function Cn(J){if(J instanceof IDBRequest)return function Ar(J){const H=new Promise((ce,Re)=>{const st=()=>{J.removeEventListener("success",lt),J.removeEventListener("error",gt)},lt=()=>{ce(Cn(J.result)),st()},gt=()=>{Re(J.error),st()};J.addEventListener("success",lt),J.addEventListener("error",gt)});return H.then(ce=>{ce instanceof IDBCursor&&pe.set(ce,J)}).catch(()=>{}),Ut.set(H,J),H}(J);if(yt.has(J))return yt.get(J);const H=Yr(J);return H!==J&&(yt.set(J,H),Ut.set(H,J)),H}const Ht=J=>Ut.get(J),tt=["get","getKey","getAll","getAllKeys","count"],Gn=["put","add","delete","clear"],Un=new Map;function me(J,H){if(!(J instanceof IDBDatabase)||H in J||"string"!=typeof H)return;if(Un.get(H))return Un.get(H);const ce=H.replace(/FromIndex$/,""),Re=H!==ce,st=Gn.includes(ce);if(!(ce in(Re?IDBIndex:IDBObjectStore).prototype)||!st&&!tt.includes(ce))return;const lt=function(){var gt=(0,D.A)(function*(Sn,...ln){const zi=this.transaction(Sn,st?"readwrite":"readonly");let Ha=zi.store;return Re&&(Ha=Ha.index(ln.shift())),(yield Promise.all([Ha[ce](...ln),st&&zi.done]))[0]});return function(ln){return gt.apply(this,arguments)}}();return Un.set(H,lt),lt}!function Ct(J){ft=J(ft)}(J=>({...J,get:(H,ce,Re)=>me(H,ce)||J.get(H,ce,Re),has:(H,ce)=>!!me(H,ce)||J.has(H,ce)}));class Xn{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(ce=>{if(function Sr(J){const H=J.getComponent();return"VERSION"===H?.type}(ce)){const Re=ce.getImmediate();return`${Re.library}/${Re.version}`}return null}).filter(ce=>ce).join(" ")}}const vi="@firebase/app",ms="0.10.8",si=new ke.Vy("@firebase/app"),La="@firebase/app-compat",kc="@firebase/analytics-compat",K="@firebase/analytics",X="@firebase/app-check-compat",ue="@firebase/app-check",de="@firebase/auth",Te="@firebase/auth-compat",he="@firebase/database",Ne="@firebase/database-compat",Nt="@firebase/functions",er="@firebase/functions-compat",Je="@firebase/installations",xt="@firebase/installations-compat",gn="@firebase/messaging",Mt="@firebase/messaging-compat",Gt="@firebase/performance",tr="@firebase/performance-compat",An="@firebase/remote-config",Wt="@firebase/remote-config-compat",ai="@firebase/storage",Va="@firebase/storage-compat",Fc="@firebase/firestore",Ei="@firebase/vertexai-preview",Go="@firebase/firestore-compat",Ua="firebase",Po="[DEFAULT]",uu={[vi]:"fire-core",[La]:"fire-core-compat",[K]:"fire-analytics",[kc]:"fire-analytics-compat",[ue]:"fire-app-check",[X]:"fire-app-check-compat",[de]:"fire-auth",[Te]:"fire-auth-compat",[he]:"fire-rtdb",[Ne]:"fire-rtdb-compat",[Nt]:"fire-fn",[er]:"fire-fn-compat",[Je]:"fire-iid",[xt]:"fire-iid-compat",[gn]:"fire-fcm",[Mt]:"fire-fcm-compat",[Gt]:"fire-perf",[tr]:"fire-perf-compat",[An]:"fire-rc",[Wt]:"fire-rc-compat",[ai]:"fire-gcs",[Va]:"fire-gcs-compat",[Fc]:"fire-fst",[Go]:"fire-fst-compat",[Ei]:"fire-vertex","fire-js":"fire-js",[Ua]:"fire-js-all"},Ci=new Map,$i=new Map,Pr=new Map;function Hi(J,H){try{J.container.addComponent(H)}catch(ce){si.debug(`Component ${H.name} failed to register with FirebaseApp ${J.name}`,ce)}}function nh(J,H){J.container.addOrOverwriteComponent(H)}function ao(J){const H=J.name;if(Pr.has(H))return si.debug(`There were multiple attempts to register component ${H}.`),!1;Pr.set(H,J);for(const ce of Ci.values())Hi(ce,J);for(const ce of $i.values())Hi(ce,J);return!0}function Ks(J,H){const ce=J.container.getProvider("heartbeat").getImmediate({optional:!0});return ce&&ce.triggerHeartbeat(),J.container.getProvider(H)}function co(J,H,ce=Po){Ks(J,H).clearInstance(ce)}function Qs(J){return void 0!==J.options}function Wo(J){return void 0!==J.settings}function Jr(){Pr.clear()}const Dr=new ee.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class du{constructor(H,ce,Re){this._isDeleted=!1,this._options=Object.assign({},H),this._config=Object.assign({},ce),this._name=ce.name,this._automaticDataCollectionEnabled=ce.automaticDataCollectionEnabled,this._container=Re,this.container.addComponent(new je.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(H){this.checkDestroyed(),this._automaticDataCollectionEnabled=H}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(H){this._isDeleted=H}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}}class _s extends du{constructor(H,ce,Re,st){const lt=void 0!==ce.automaticDataCollectionEnabled&&ce.automaticDataCollectionEnabled,gt={name:Re,automaticDataCollectionEnabled:lt};super(void 0!==H.apiKey?H:H.options,gt,st),this._serverConfig=Object.assign({automaticDataCollectionEnabled:lt},ce),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,ce.releaseOnDeref=void 0,k(vi,ms,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(H){this.isDeleted||(this._refCount++,void 0!==H&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(H,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ja(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Dr.create("server-app-deleted")}}const jr="10.12.5";function Ys(J,H={}){let ce=J;"object"!=typeof H&&(H={name:H});const Re=Object.assign({name:Po,automaticDataCollectionEnabled:!1},H),st=Re.name;if("string"!=typeof st||!st)throw Dr.create("bad-app-name",{appName:String(st)});if(ce||(ce=(0,ee.T9)()),!ce)throw Dr.create("no-options");const lt=Ci.get(st);if(lt){if((0,ee.bD)(ce,lt.options)&&(0,ee.bD)(Re,lt.config))return lt;throw Dr.create("duplicate-app",{appName:st})}const gt=new je.h1(st);for(const ln of Pr.values())gt.addComponent(ln);const Sn=new du(ce,Re,gt);return Ci.set(st,Sn),Sn}function Lc(J,H){if((0,ee.Bd)()&&!(0,ee.p7)())throw Dr.create("invalid-server-app-environment");let ce;void 0===H.automaticDataCollectionEnabled&&(H.automaticDataCollectionEnabled=!1),ce=Qs(J)?J.options:J;const Re=Object.assign(Object.assign({},H),ce);if(void 0!==Re.releaseOnDeref&&delete Re.releaseOnDeref,void 0!==H.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Dr.create("finalization-registry-not-supported",{});const lt=""+(zi=JSON.stringify(Re),[...zi].reduce((Ha,Bv)=>Math.imul(31,Ha)+Bv.charCodeAt(0)|0,0)),gt=$i.get(lt);var zi;if(gt)return gt.incRefCount(H.releaseOnDeref),gt;const Sn=new je.h1(lt);for(const zi of Pr.values())Sn.addComponent(zi);const ln=new _s(ce,H,lt,Sn);return $i.set(lt,ln),ln}function tn(J=Po){const H=Ci.get(J);if(!H&&J===Po&&(0,ee.T9)())return Ys();if(!H)throw Dr.create("no-app",{appName:J});return H}function hu(){return Array.from(Ci.values())}function ja(J){return $a.apply(this,arguments)}function $a(){return($a=(0,D.A)(function*(J){let H=!1;const ce=J.name;Ci.has(ce)?(H=!0,Ci.delete(ce)):$i.has(ce)&&J.decRefCount()<=0&&($i.delete(ce),H=!0),H&&(yield Promise.all(J.container.getProviders().map(Re=>Re.delete())),J.isDeleted=!0)})).apply(this,arguments)}function k(J,H,ce){var Re;let st=null!==(Re=uu[J])&&void 0!==Re?Re:J;ce&&(st+=`-${ce}`);const lt=st.match(/\s|\//),gt=H.match(/\s|\//);if(lt||gt){const Sn=[`Unable to register library "${st}" with version "${H}":`];return lt&&Sn.push(`library name "${st}" contains illegal characters (whitespace or "/")`),lt&&gt&&Sn.push("and"),gt&&Sn.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void si.warn(Sn.join(" "))}ao(new je.uA(`${st}-version`,()=>({library:st,version:H}),"VERSION"))}function M(J,H){if(null!==J&&"function"!=typeof J)throw Dr.create("invalid-log-argument");(0,ke.Ey)(J,H)}function U(J){(0,ke.He)(J)}const te="firebase-heartbeat-database",W=1,we="firebase-heartbeat-store";let Ve=null;function bt(){return Ve||(Ve=function zt(J,H,{blocked:ce,upgrade:Re,blocking:st,terminated:lt}={}){const gt=indexedDB.open(J,H),Sn=Cn(gt);return Re&&gt.addEventListener("upgradeneeded",ln=>{Re(Cn(gt.result),ln.oldVersion,ln.newVersion,Cn(gt.transaction),ln)}),ce&&gt.addEventListener("blocked",ln=>ce(ln.oldVersion,ln.newVersion,ln)),Sn.then(ln=>{lt&&ln.addEventListener("close",()=>lt()),st&&ln.addEventListener("versionchange",zi=>st(zi.oldVersion,zi.newVersion,zi))}).catch(()=>{}),Sn}(te,W,{upgrade:(J,H)=>{if(0===H)try{J.createObjectStore(we)}catch(ce){console.warn(ce)}}}).catch(J=>{throw Dr.create("idb-open",{originalErrorMessage:J.message})})),Ve}function mn(){return(mn=(0,D.A)(function*(J){try{const ce=(yield bt()).transaction(we),Re=yield ce.objectStore(we).get(wi(J));return yield ce.done,Re}catch(H){if(H instanceof ee.g)si.warn(H.message);else{const ce=Dr.create("idb-get",{originalErrorMessage:H?.message});si.warn(ce.message)}}})).apply(this,arguments)}function Mr(J,H){return wt.apply(this,arguments)}function wt(){return(wt=(0,D.A)(function*(J,H){try{const Re=(yield bt()).transaction(we,"readwrite");yield Re.objectStore(we).put(H,wi(J)),yield Re.done}catch(ce){if(ce instanceof ee.g)si.warn(ce.message);else{const Re=Dr.create("idb-set",{originalErrorMessage:ce?.message});si.warn(Re.message)}}})).apply(this,arguments)}function wi(J){return`${J.name}!${J.options.appId}`}class rh{constructor(H){this.container=H,this._heartbeatsCache=null;const ce=this.container.getProvider("app").getImmediate();this._storage=new cg(ce),this._heartbeatsCachePromise=this._storage.read().then(Re=>(this._heartbeatsCache=Re,Re))}triggerHeartbeat(){var H=this;return(0,D.A)(function*(){var ce,Re;const lt=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),gt=fu();if((null!=(null===(ce=H._heartbeatsCache)||void 0===ce?void 0:ce.heartbeats)||(H._heartbeatsCache=yield H._heartbeatsCachePromise,null!=(null===(Re=H._heartbeatsCache)||void 0===Re?void 0:Re.heartbeats)))&&H._heartbeatsCache.lastSentHeartbeatDate!==gt&&!H._heartbeatsCache.heartbeats.some(Sn=>Sn.date===gt))return H._heartbeatsCache.heartbeats.push({date:gt,agent:lt}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(Sn=>{const ln=new Date(Sn.date).valueOf();return Date.now()-ln<=2592e6}),H._storage.overwrite(H._heartbeatsCache)})()}getHeartbeatsHeader(){var H=this;return(0,D.A)(function*(){var ce;if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null==(null===(ce=H._heartbeatsCache)||void 0===ce?void 0:ce.heartbeats)||0===H._heartbeatsCache.heartbeats.length)return"";const Re=fu(),{heartbeatsToSend:st,unsentEntries:lt}=function Fe(J,H=1024){const ce=[];let Re=J.slice();for(const st of J){const lt=ce.find(gt=>gt.agent===st.agent);if(lt){if(lt.dates.push(st.date),ih(ce)>H){lt.dates.pop();break}}else if(ce.push({agent:st.agent,dates:[st.date]}),ih(ce)>H){ce.pop();break}Re=Re.slice(1)}return{heartbeatsToSend:ce,unsentEntries:Re}}(H._heartbeatsCache.heartbeats),gt=(0,ee.Uj)(JSON.stringify({version:2,heartbeats:st}));return H._heartbeatsCache.lastSentHeartbeatDate=Re,lt.length>0?(H._heartbeatsCache.heartbeats=lt,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),gt})()}}function fu(){return(new Date).toISOString().substring(0,10)}class cg{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.A)(function*(){return!!(0,ee.zW)()&&(0,ee.eX)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,D.A)(function*(){if(yield H._canUseIndexedDBPromise){const Re=yield function $e(J){return mn.apply(this,arguments)}(H.app);return Re?.heartbeats?Re:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(H){var ce=this;return(0,D.A)(function*(){var Re;if(yield ce._canUseIndexedDBPromise){const lt=yield ce.read();return Mr(ce.app,{lastSentHeartbeatDate:null!==(Re=H.lastSentHeartbeatDate)&&void 0!==Re?Re:lt.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var ce=this;return(0,D.A)(function*(){var Re;if(yield ce._canUseIndexedDBPromise){const lt=yield ce.read();return Mr(ce.app,{lastSentHeartbeatDate:null!==(Re=H.lastSentHeartbeatDate)&&void 0!==Re?Re:lt.lastSentHeartbeatDate,heartbeats:[...lt.heartbeats,...H.heartbeats]})}})()}}function ih(J){return(0,ee.Uj)(JSON.stringify({version:2,heartbeats:J})).length}!function Zs(J){ao(new je.uA("platform-logger",H=>new Xn(H),"PRIVATE")),ao(new je.uA("heartbeat",H=>new rh(H),"PRIVATE")),k(vi,ms,J),k(vi,ms,"esm2017"),k("fire-js","")}("")},1362:(gs,Ur,dt)=>{dt.d(Ur,{Kq:()=>pn,h1:()=>Br,uA:()=>ke});var D=dt(467),je=dt(1076);class ke{constructor(pe,Ee,ze){this.name=pe,this.instanceFactory=Ee,this.type=ze,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(pe){return this.instantiationMode=pe,this}setMultipleInstances(pe){return this.multipleInstances=pe,this}setServiceProps(pe){return this.serviceProps=pe,this}setInstanceCreatedCallback(pe){return this.onInstanceCreated=pe,this}}const ee="[DEFAULT]";class pn{constructor(pe,Ee){this.name=pe,this.container=Ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(pe){const Ee=this.normalizeInstanceIdentifier(pe);if(!this.instancesDeferred.has(Ee)){const ze=new je.cY;if(this.instancesDeferred.set(Ee,ze),this.isInitialized(Ee)||this.shouldAutoInitialize())try{const yt=this.getOrInitializeService({instanceIdentifier:Ee});yt&&ze.resolve(yt)}catch{}}return this.instancesDeferred.get(Ee).promise}getImmediate(pe){var Ee;const ze=this.normalizeInstanceIdentifier(pe?.identifier),yt=null!==(Ee=pe?.optional)&&void 0!==Ee&&Ee;if(!this.isInitialized(ze)&&!this.shouldAutoInitialize()){if(yt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ze})}catch(Ut){if(yt)return null;throw Ut}}getComponent(){return this.component}setComponent(pe){if(pe.name!==this.name)throw Error(`Mismatching Component ${pe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=pe,this.shouldAutoInitialize()){if(function Zn(Jt){return"EAGER"===Jt.instantiationMode}(pe))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[Ee,ze]of this.instancesDeferred.entries()){const yt=this.normalizeInstanceIdentifier(Ee);try{const Ut=this.getOrInitializeService({instanceIdentifier:yt});ze.resolve(Ut)}catch{}}}}clearInstance(pe=ee){this.instancesDeferred.delete(pe),this.instancesOptions.delete(pe),this.instances.delete(pe)}delete(){var pe=this;return(0,D.A)(function*(){const Ee=Array.from(pe.instances.values());yield Promise.all([...Ee.filter(ze=>"INTERNAL"in ze).map(ze=>ze.INTERNAL.delete()),...Ee.filter(ze=>"_delete"in ze).map(ze=>ze._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(pe=ee){return this.instances.has(pe)}getOptions(pe=ee){return this.instancesOptions.get(pe)||{}}initialize(pe={}){const{options:Ee={}}=pe,ze=this.normalizeInstanceIdentifier(pe.instanceIdentifier);if(this.isInitialized(ze))throw Error(`${this.name}(${ze}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const yt=this.getOrInitializeService({instanceIdentifier:ze,options:Ee});for(const[Ut,Ar]of this.instancesDeferred.entries())ze===this.normalizeInstanceIdentifier(Ut)&&Ar.resolve(yt);return yt}onInit(pe,Ee){var ze;const yt=this.normalizeInstanceIdentifier(Ee),Ut=null!==(ze=this.onInitCallbacks.get(yt))&&void 0!==ze?ze:new Set;Ut.add(pe),this.onInitCallbacks.set(yt,Ut);const Ar=this.instances.get(yt);return Ar&&pe(Ar,yt),()=>{Ut.delete(pe)}}invokeOnInitCallbacks(pe,Ee){const ze=this.onInitCallbacks.get(Ee);if(ze)for(const yt of ze)try{yt(pe,Ee)}catch{}}getOrInitializeService({instanceIdentifier:pe,options:Ee={}}){let ze=this.instances.get(pe);if(!ze&&this.component&&(ze=this.component.instanceFactory(this.container,{instanceIdentifier:(Jt=pe,Jt===ee?void 0:Jt),options:Ee}),this.instances.set(pe,ze),this.instancesOptions.set(pe,Ee),this.invokeOnInitCallbacks(ze,pe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,pe,ze)}catch{}var Jt;return ze||null}normalizeInstanceIdentifier(pe=ee){return this.component?this.component.multipleInstances?pe:ee:pe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Br{constructor(pe){this.name=pe,this.providers=new Map}addComponent(pe){const Ee=this.getProvider(pe.name);if(Ee.isComponentSet())throw new Error(`Component ${pe.name} has already been registered with ${this.name}`);Ee.setComponent(pe)}addOrOverwriteComponent(pe){this.getProvider(pe.name).isComponentSet()&&this.providers.delete(pe.name),this.addComponent(pe)}getProvider(pe){if(this.providers.has(pe))return this.providers.get(pe);const Ee=new pn(pe,this);return this.providers.set(pe,Ee),Ee}getProviders(){return Array.from(this.providers.values())}}},8041:(gs,Ur,dt)=>{dt.d(Ur,{$b:()=>je,Ey:()=>Jt,He:()=>Br,Vy:()=>Zn});const D=[];var je=function(pe){return pe[pe.DEBUG=0]="DEBUG",pe[pe.VERBOSE=1]="VERBOSE",pe[pe.INFO=2]="INFO",pe[pe.WARN=3]="WARN",pe[pe.ERROR=4]="ERROR",pe[pe.SILENT=5]="SILENT",pe}(je||{});const ke={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},ee=je.INFO,pn={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},He=(pe,Ee,...ze)=>{if(Ee<pe.logLevel)return;const yt=(new Date).toISOString(),Ut=pn[Ee];if(!Ut)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ee})`);console[Ut](`[${yt}]  ${pe.name}:`,...ze)};class Zn{constructor(Ee){this.name=Ee,this._logLevel=ee,this._logHandler=He,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(Ee){if(!(Ee in je))throw new TypeError(`Invalid value "${Ee}" assigned to \`logLevel\``);this._logLevel=Ee}setLogLevel(Ee){this._logLevel="string"==typeof Ee?ke[Ee]:Ee}get logHandler(){return this._logHandler}set logHandler(Ee){if("function"!=typeof Ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ee}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ee){this._userLogHandler=Ee}debug(...Ee){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...Ee),this._logHandler(this,je.DEBUG,...Ee)}log(...Ee){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...Ee),this._logHandler(this,je.VERBOSE,...Ee)}info(...Ee){this._userLogHandler&&this._userLogHandler(this,je.INFO,...Ee),this._logHandler(this,je.INFO,...Ee)}warn(...Ee){this._userLogHandler&&this._userLogHandler(this,je.WARN,...Ee),this._logHandler(this,je.WARN,...Ee)}error(...Ee){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...Ee),this._logHandler(this,je.ERROR,...Ee)}}function Br(pe){D.forEach(Ee=>{Ee.setLogLevel(pe)})}function Jt(pe,Ee){for(const ze of D){let yt=null;Ee&&Ee.level&&(yt=ke[Ee.level]),ze.userLogHandler=null===pe?null:(Ut,Ar,...Zt)=>{const ft=Zt.map(Ct=>{if(null==Ct)return null;if("string"==typeof Ct)return Ct;if("number"==typeof Ct||"boolean"==typeof Ct)return Ct.toString();if(Ct instanceof Error)return Ct.message;try{return JSON.stringify(Ct)}catch{return null}}).filter(Ct=>Ct).join(" ");Ar>=(yt??Ut.logLevel)&&pe({level:je[Ar].toLowerCase(),message:ft,args:Zt,type:Ut.name})}}}},9254:(gs,Ur,dt)=>{dt.r(Ur);var D=dt(467),je=dt(3345),ke=dt(7852),ee=dt(1076),pn=dt(8041),He=dt(1635),Zn=dt(1362);const Jt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Ar=function yt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Zt=function Ut(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ft=new ee.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),gr=new pn.Vy("@firebase/auth");function Cn(p,...u){gr.logLevel<=pn.$b.ERROR&&gr.error(`Auth (${ke.SDK_VERSION}): ${p}`,...u)}function Ht(p,...u){throw Un(p,...u)}function zt(p,...u){return Un(p,...u)}function yi(p,u,d){const m=Object.assign(Object.assign({},Zt()),{[u]:d});return new ee.FA("auth","Firebase",m).create(u,{appName:p.name})}function tt(p){return yi(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gn(p,u,d){if(!(u instanceof d))throw d.name!==u.constructor.name&&Ht(p,"argument-error"),yi(p,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Un(p,...u){if("string"!=typeof p){const d=u[0],m=[...u.slice(1)];return m[0]&&(m[0].appName=p.name),p._errorFactory.create(d,...m)}return ft.create(p,...u)}function me(p,u,...d){if(!p)throw Un(u,...d)}function Xn(p){const u="INTERNAL ASSERTION FAILED: "+p;throw Cn(u),new Error(u)}function Sr(p,u){p||Xn(u)}function vi(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function ms(){return"http:"===si()||"https:"===si()}function si(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class K{constructor(u,d){this.shortDelay=u,this.longDelay=d,Sr(d>u,"Short delay should be less than long delay!"),this.isMobile=(0,ee.jZ)()||(0,ee.lV)()}get(){return function La(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ms()||(0,ee.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function X(p,u){Sr(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return u?`${d}${u.startsWith("/")?u.slice(1):u}`:d}class ue{static initialize(u,d,m){this.fetchImpl=u,d&&(this.headersImpl=d),m&&(this.responseImpl=m)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const de={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Te=new K(3e4,6e4);function he(p,u){return p.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:p.tenantId}):u}function Ne(p,u,d,m){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,D.A)(function*(p,u,d,m,E={}){return er(p,E,(0,D.A)(function*(){let I={},O={};m&&("GET"===u?O=m:I={body:JSON.stringify(m)});const j=(0,ee.Am)(Object.assign({key:p.config.apiKey},O)).slice(1),oe=yield p._getAdditionalHeaders();return oe["Content-Type"]="application/json",p.languageCode&&(oe["X-Firebase-Locale"]=p.languageCode),ue.fetch()(Mt(p,p.config.apiHost,d,j),Object.assign({method:u,headers:oe,referrerPolicy:"no-referrer"},I))}))})).apply(this,arguments)}function er(p,u,d){return Je.apply(this,arguments)}function Je(){return(Je=(0,D.A)(function*(p,u,d){p._canInitEmulator=!1;const m=Object.assign(Object.assign({},de),u);try{const E=new tr(p),I=yield Promise.race([d(),E.promise]);E.clearNetworkTimeout();const O=yield I.json();if("needConfirmation"in O)throw An(p,"account-exists-with-different-credential",O);if(I.ok&&!("errorMessage"in O))return O;{const j=I.ok?O.errorMessage:O.error.message,[oe,Se]=j.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===oe)throw An(p,"credential-already-in-use",O);if("EMAIL_EXISTS"===oe)throw An(p,"email-already-in-use",O);if("USER_DISABLED"===oe)throw An(p,"user-disabled",O);const Ue=m[oe]||oe.toLowerCase().replace(/[_\s]+/g,"-");if(Se)throw yi(p,Ue,Se);Ht(p,Ue)}}catch(E){if(E instanceof ee.g)throw E;Ht(p,"network-request-failed",{message:String(E)})}})).apply(this,arguments)}function xt(p,u,d,m){return gn.apply(this,arguments)}function gn(){return(gn=(0,D.A)(function*(p,u,d,m,E={}){const I=yield Ne(p,u,d,m,E);return"mfaPendingCredential"in I&&Ht(p,"multi-factor-auth-required",{_serverResponse:I}),I})).apply(this,arguments)}function Mt(p,u,d,m){const E=`${u}${d}?${m}`;return p.config.emulator?X(p.config,E):`${p.config.apiScheme}://${E}`}function Gt(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tr{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((d,m)=>{this.timer=setTimeout(()=>m(zt(this.auth,"network-request-failed")),Te.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function An(p,u,d){const m={appName:p.name};d.email&&(m.email=d.email),d.phoneNumber&&(m.phoneNumber=d.phoneNumber);const E=zt(p,u,m);return E.customData._tokenResponse=d,E}function Wt(p){return void 0!==p&&void 0!==p.getResponse}function ai(p){return void 0!==p&&void 0!==p.enterprise}class Va{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===u)return Gt(d.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function Ei(){return(Ei=(0,D.A)(function*(p){return(yield Ne(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Go(p,u){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,D.A)(function*(p,u){return Ne(p,"GET","/v2/recaptchaConfig",he(p,u))})).apply(this,arguments)}function Po(){return(Po=(0,D.A)(function*(p,u){return Ne(p,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function Ci(){return(Ci=(0,D.A)(function*(p,u){return Ne(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function $i(p,u){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,D.A)(function*(p,u){return Ne(p,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function Hi(p){if(p)try{const u=new Date(Number(p));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function Ks(){return(Ks=(0,D.A)(function*(p,u=!1){const d=(0,ee.Ku)(p),m=yield d.getIdToken(u),E=Qs(m);me(E&&E.exp&&E.auth_time&&E.iat,d.auth,"internal-error");const I="object"==typeof E.firebase?E.firebase:void 0,O=I?.sign_in_provider;return{claims:E,token:m,authTime:Hi(co(E.auth_time)),issuedAtTime:Hi(co(E.iat)),expirationTime:Hi(co(E.exp)),signInProvider:O||null,signInSecondFactor:I?.sign_in_second_factor||null}})).apply(this,arguments)}function co(p){return 1e3*Number(p)}function Qs(p){const[u,d,m]=p.split(".");if(void 0===u||void 0===d||void 0===m)return Cn("JWT malformed, contained fewer than 3 sections"),null;try{const E=(0,ee.u)(d);return E?JSON.parse(E):(Cn("Failed to decode base64 JWT payload"),null)}catch(E){return Cn("Caught error parsing JWT payload as JSON",E?.toString()),null}}function Wo(p){const u=Qs(p);return me(u,"internal-error"),me(typeof u.exp<"u","internal-error"),me(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}function Jr(p,u){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,D.A)(function*(p,u,d=!1){if(d)return u;try{return yield u}catch(m){throw m instanceof ee.g&&function Dr({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(m)&&p.auth.currentUser===p&&(yield p.auth.signOut()),m}})).apply(this,arguments)}class du{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var d;if(u){const m=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),m}{this.errorBackoff=3e4;const E=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,E)}}schedule(u=!1){var d=this;if(!this.isRunning)return;const m=this.getInterval(u);this.timerId=setTimeout((0,D.A)(function*(){yield d.iteration()}),m)}iteration(){var u=this;return(0,D.A)(function*(){try{yield u.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&u.schedule(!0))}u.schedule()})()}}class _s{constructor(u,d){this.createdAt=u,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hi(this.lastLoginAt),this.creationTime=Hi(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jr(p){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,D.A)(function*(p){var u;const d=p.auth,m=yield p.getIdToken(),E=yield Jr(p,$i(d,{idToken:m}));me(E?.users.length,d,"internal-error");const I=E.users[0];p._notifyReloadListener(I);const O=null!==(u=I.providerUserInfo)&&void 0!==u&&u.length?ja(I.providerUserInfo):[],j=function hu(p,u){return[...p.filter(m=>!u.some(E=>E.providerId===m.providerId)),...u]}(p.providerData,O),Ue=!!p.isAnonymous&&!(p.email&&I.passwordHash||j?.length),Le={uid:I.localId,displayName:I.displayName||null,photoURL:I.photoUrl||null,email:I.email||null,emailVerified:I.emailVerified||!1,phoneNumber:I.phoneNumber||null,tenantId:I.tenantId||null,providerData:j,metadata:new _s(I.createdAt,I.lastLoginAt),isAnonymous:Ue};Object.assign(p,Le)})).apply(this,arguments)}function tn(){return(tn=(0,D.A)(function*(p){const u=(0,ee.Ku)(p);yield jr(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function ja(p){return p.map(u=>{var{providerId:d}=u,m=(0,He.Tt)(u,["providerId"]);return{providerId:d,uid:m.rawId||"",displayName:m.displayName||null,email:m.email||null,phoneNumber:m.phoneNumber||null,photoURL:m.photoUrl||null}})}function k(){return(k=(0,D.A)(function*(p,u){const d=yield er(p,{},(0,D.A)(function*(){const m=(0,ee.Am)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:E,apiKey:I}=p.config,O=Mt(p,E,"/v1/token",`key=${I}`),j=yield p._getAdditionalHeaders();return j["Content-Type"]="application/x-www-form-urlencoded",ue.fetch()(O,{method:"POST",headers:j,body:m})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function U(){return(U=(0,D.A)(function*(p,u){return Ne(p,"POST","/v2/accounts:revokeToken",he(p,u))})).apply(this,arguments)}class te{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){me(u.idToken,"internal-error"),me(typeof u.idToken<"u","internal-error"),me(typeof u.refreshToken<"u","internal-error");const d="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):Wo(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,d)}updateFromIdToken(u){me(0!==u.length,"internal-error");const d=Wo(u);this.updateTokensAndExpiration(u,null,d)}getToken(u,d=!1){var m=this;return(0,D.A)(function*(){return d||!m.accessToken||m.isExpired?(me(m.refreshToken,u,"user-token-expired"),m.refreshToken?(yield m.refresh(u,m.refreshToken),m.accessToken):null):m.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,d){var m=this;return(0,D.A)(function*(){const{accessToken:E,refreshToken:I,expiresIn:O}=yield function $a(p,u){return k.apply(this,arguments)}(u,d);m.updateTokensAndExpiration(E,I,Number(O))})()}updateTokensAndExpiration(u,d,m){this.refreshToken=d||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*m}static fromJSON(u,d){const{refreshToken:m,accessToken:E,expirationTime:I}=d,O=new te;return m&&(me("string"==typeof m,"internal-error",{appName:u}),O.refreshToken=m),E&&(me("string"==typeof E,"internal-error",{appName:u}),O.accessToken=E),I&&(me("number"==typeof I,"internal-error",{appName:u}),O.expirationTime=I),O}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new te,this.toJSON())}_performRefresh(){return Xn("not implemented")}}function W(p,u){me("string"==typeof p||typeof p>"u","internal-error",{appName:u})}class we{constructor(u){var{uid:d,auth:m,stsTokenManager:E}=u,I=(0,He.Tt)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new du(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=m,this.stsTokenManager=E,this.accessToken=E.accessToken,this.displayName=I.displayName||null,this.email=I.email||null,this.emailVerified=I.emailVerified||!1,this.phoneNumber=I.phoneNumber||null,this.photoURL=I.photoURL||null,this.isAnonymous=I.isAnonymous||!1,this.tenantId=I.tenantId||null,this.providerData=I.providerData?[...I.providerData]:[],this.metadata=new _s(I.createdAt||void 0,I.lastLoginAt||void 0)}getIdToken(u){var d=this;return(0,D.A)(function*(){const m=yield Jr(d,d.stsTokenManager.getToken(d.auth,u));return me(m,d.auth,"internal-error"),d.accessToken!==m&&(d.accessToken=m,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),m})()}getIdTokenResult(u){return function ao(p){return Ks.apply(this,arguments)}(this,u)}reload(){return function Lc(p){return tn.apply(this,arguments)}(this)}_assign(u){this!==u&&(me(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(d=>Object.assign({},d)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const d=new we(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(u){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,d=!1){var m=this;return(0,D.A)(function*(){let E=!1;u.idToken&&u.idToken!==m.stsTokenManager.accessToken&&(m.stsTokenManager.updateFromServerResponse(u),E=!0),d&&(yield jr(m)),yield m.auth._persistUserIfCurrent(m),E&&m.auth._notifyListenersIfCurrent(m)})()}delete(){var u=this;return(0,D.A)(function*(){if((0,ke._isFirebaseServerApp)(u.auth.app))return Promise.reject(tt(u.auth));const d=yield u.getIdToken();return yield Jr(u,function Ws(p,u){return Po.apply(this,arguments)}(u.auth,{idToken:d})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,d){var m,E,I,O,j,oe,Se,Ue;const Le=null!==(m=d.displayName)&&void 0!==m?m:void 0,nn=null!==(E=d.email)&&void 0!==E?E:void 0,Oo=null!==(I=d.phoneNumber)&&void 0!==I?I:void 0,zh=null!==(O=d.photoURL)&&void 0!==O?O:void 0,oC=null!==(j=d.tenantId)&&void 0!==j?j:void 0,mm=null!==(oe=d._redirectEventId)&&void 0!==oe?oe:void 0,sC=null!==(Se=d.createdAt)&&void 0!==Se?Se:void 0,ne=null!==(Ue=d.lastLoginAt)&&void 0!==Ue?Ue:void 0,{uid:mt,emailVerified:Dn,isAnonymous:Mn,providerData:Yt,stsTokenManager:_m}=d;me(mt&&_m,u,"internal-error");const ju=te.fromJSON(this.name,_m);me("string"==typeof mt,u,"internal-error"),W(Le,u.name),W(nn,u.name),me("boolean"==typeof Dn,u,"internal-error"),me("boolean"==typeof Mn,u,"internal-error"),W(Oo,u.name),W(zh,u.name),W(oC,u.name),W(mm,u.name),W(sC,u.name),W(ne,u.name);const go=new we({uid:mt,auth:u,email:nn,emailVerified:Dn,displayName:Le,isAnonymous:Mn,photoURL:zh,phoneNumber:Oo,tenantId:oC,stsTokenManager:ju,createdAt:sC,lastLoginAt:ne});return Yt&&Array.isArray(Yt)&&(go.providerData=Yt.map(ym=>Object.assign({},ym))),mm&&(go._redirectEventId=mm),go}static _fromIdTokenResponse(u,d,m=!1){return(0,D.A)(function*(){const E=new te;E.updateFromServerResponse(d);const I=new we({uid:d.localId,auth:u,stsTokenManager:E,isAnonymous:m});return yield jr(I),I})()}static _fromGetAccountInfoResponse(u,d,m){return(0,D.A)(function*(){const E=d.users[0];me(void 0!==E.localId,"internal-error");const I=void 0!==E.providerUserInfo?ja(E.providerUserInfo):[],O=!(E.email&&E.passwordHash||I?.length),j=new te;j.updateFromIdToken(m);const oe=new we({uid:E.localId,auth:u,stsTokenManager:j,isAnonymous:O}),Se={uid:E.localId,displayName:E.displayName||null,photoURL:E.photoUrl||null,email:E.email||null,emailVerified:E.emailVerified||!1,phoneNumber:E.phoneNumber||null,tenantId:E.tenantId||null,providerData:I,metadata:new _s(E.createdAt,E.lastLoginAt),isAnonymous:!(E.email&&E.passwordHash||I?.length)};return Object.assign(oe,Se),oe})()}}const Ve=new Map;function bt(p){Sr(p instanceof Function,"Expected a class definition");let u=Ve.get(p);return u?(Sr(u instanceof p,"Instance stored in cache mismatched with class"),u):(u=new p,Ve.set(p,u),u)}const mn=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.A)(function*(){return!0})()}_set(d,m){var E=this;return(0,D.A)(function*(){E.storage[d]=m})()}_get(d){var m=this;return(0,D.A)(function*(){const E=m.storage[d];return void 0===E?null:E})()}_remove(d){var m=this;return(0,D.A)(function*(){delete m.storage[d]})()}_addListener(d,m){}_removeListener(d,m){}}return p.type="NONE",p})();function Mr(p,u,d){return`firebase:${p}:${u}:${d}`}class wt{constructor(u,d,m){this.persistence=u,this.auth=d,this.userKey=m;const{config:E,name:I}=this.auth;this.fullUserKey=Mr(this.userKey,E.apiKey,I),this.fullPersistenceKey=Mr("persistence",E.apiKey,I),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,D.A)(function*(){const d=yield u.persistence._get(u.fullUserKey);return d?we._fromJSON(u.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var d=this;return(0,D.A)(function*(){if(d.persistence===u)return;const m=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=u,m?d.setCurrentUser(m):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,d,m="authUser"){return(0,D.A)(function*(){if(!d.length)return new wt(bt(mn),u,m);const E=(yield Promise.all(d.map(function(){var Se=(0,D.A)(function*(Ue){if(yield Ue._isAvailable())return Ue});return function(Ue){return Se.apply(this,arguments)}}()))).filter(Se=>Se);let I=E[0]||bt(mn);const O=Mr(m,u.config.apiKey,u.name);let j=null;for(const Se of d)try{const Ue=yield Se._get(O);if(Ue){const Le=we._fromJSON(u,Ue);Se!==I&&(j=Le),I=Se;break}}catch{}const oe=E.filter(Se=>Se._shouldAllowMigration);return I._shouldAllowMigration&&oe.length?(I=oe[0],j&&(yield I._set(O,j.toJSON())),yield Promise.all(d.map(function(){var Se=(0,D.A)(function*(Ue){if(Ue!==I)try{yield Ue._remove(O)}catch{}});return function(Ue){return Se.apply(this,arguments)}}())),new wt(I,u,m)):new wt(I,u,m)})()}}function wi(p){const u=p.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(fu(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(Js(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(cg(u))return"Blackberry";if(ih(u))return"Webos";if(Vc(u))return"Safari";if((u.includes("chrome/")||rh(u))&&!u.includes("edge/"))return"Chrome";if(Fe(u))return"Android";{const m=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===m?.length)return m[1]}return"Other"}function Js(p=(0,ee.ZQ)()){return/firefox\//i.test(p)}function Vc(p=(0,ee.ZQ)()){const u=p.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function rh(p=(0,ee.ZQ)()){return/crios\//i.test(p)}function fu(p=(0,ee.ZQ)()){return/iemobile/i.test(p)}function Fe(p=(0,ee.ZQ)()){return/android/i.test(p)}function cg(p=(0,ee.ZQ)()){return/blackberry/i.test(p)}function ih(p=(0,ee.ZQ)()){return/webos/i.test(p)}function Zs(p=(0,ee.ZQ)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function Re(p=(0,ee.ZQ)()){return Zs(p)||Fe(p)||ih(p)||cg(p)||/windows phone/i.test(p)||fu(p)}function lt(p,u=[]){let d;switch(p){case"Browser":d=wi((0,ee.ZQ)());break;case"Worker":d=`${wi((0,ee.ZQ)())}-${p}`;break;default:d=p}const m=u.length?u.join(","):"FirebaseCore-web";return`${d}/JsCore/${ke.SDK_VERSION}/${m}`}class gt{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,d){const m=I=>new Promise((O,j)=>{try{O(u(I))}catch(oe){j(oe)}});m.onAbort=d,this.queue.push(m);const E=this.queue.length-1;return()=>{this.queue[E]=()=>Promise.resolve()}}runMiddleware(u){var d=this;return(0,D.A)(function*(){if(d.auth.currentUser===u)return;const m=[];try{for(const E of d.queue)yield E(u),E.onAbort&&m.push(E.onAbort)}catch(E){m.reverse();for(const I of m)try{I()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:E?.message})}})()}}function ln(){return(ln=(0,D.A)(function*(p,u={}){return Ne(p,"GET","/v2/passwordPolicy",he(p,u))})).apply(this,arguments)}class Ha{constructor(u){var d,m,E,I;const O=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=O.minPasswordLength)&&void 0!==d?d:6,O.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=O.maxPasswordLength),void 0!==O.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=O.containsLowercaseCharacter),void 0!==O.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=O.containsUppercaseCharacter),void 0!==O.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=O.containsNumericCharacter),void 0!==O.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=O.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(E=null===(m=u.allowedNonAlphanumericCharacters)||void 0===m?void 0:m.join(""))&&void 0!==E?E:"",this.forceUpgradeOnSignin=null!==(I=u.forceUpgradeOnSignin)&&void 0!==I&&I,this.schemaVersion=u.schemaVersion}validatePassword(u){var d,m,E,I,O,j;const oe={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,oe),this.validatePasswordCharacterOptions(u,oe),oe.isValid&&(oe.isValid=null===(d=oe.meetsMinPasswordLength)||void 0===d||d),oe.isValid&&(oe.isValid=null===(m=oe.meetsMaxPasswordLength)||void 0===m||m),oe.isValid&&(oe.isValid=null===(E=oe.containsLowercaseLetter)||void 0===E||E),oe.isValid&&(oe.isValid=null===(I=oe.containsUppercaseLetter)||void 0===I||I),oe.isValid&&(oe.isValid=null===(O=oe.containsNumericCharacter)||void 0===O||O),oe.isValid&&(oe.isValid=null===(j=oe.containsNonAlphanumericCharacter)||void 0===j||j),oe}validatePasswordLengthOptions(u,d){const m=this.customStrengthOptions.minPasswordLength,E=this.customStrengthOptions.maxPasswordLength;m&&(d.meetsMinPasswordLength=u.length>=m),E&&(d.meetsMaxPasswordLength=u.length<=E)}validatePasswordCharacterOptions(u,d){let m;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let E=0;E<u.length;E++)m=u.charAt(E),this.updatePasswordCharacterOptionsStatuses(d,m>="a"&&m<="z",m>="A"&&m<="Z",m>="0"&&m<="9",this.allowedNonAlphanumericCharacters.includes(m))}updatePasswordCharacterOptionsStatuses(u,d,m,E,I){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=m)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=E)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=I))}}class Bv{constructor(u,d,m,E){this.app=u,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pu(this),this.idTokenSubscription=new pu(this),this.beforeStateQueue=new gt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ft,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(u,d){var m=this;return d&&(this._popupRedirectResolver=bt(d)),this._initializationPromise=this.queue((0,D.A)(function*(){var E,I;if(!m._deleted&&(m.persistenceManager=yield wt.create(m,u),!m._deleted)){if(null!==(E=m._popupRedirectResolver)&&void 0!==E&&E._shouldInitProactively)try{yield m._popupRedirectResolver._initialize(m)}catch{}yield m.initializeCurrentUser(d),m.lastNotifiedUid=(null===(I=m.currentUser)||void 0===I?void 0:I.uid)||null,!m._deleted&&(m._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,D.A)(function*(){if(u._deleted)return;const d=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||d){if(u.currentUser&&d&&u.currentUser.uid===d.uid)return u._currentUser._assign(d),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(u){var d=this;return(0,D.A)(function*(){try{const m=yield $i(d,{idToken:u}),E=yield we._fromGetAccountInfoResponse(d,m,u);yield d.directlySetCurrentUser(E)}catch(m){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",m),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(u){var d=this;return(0,D.A)(function*(){var m;if((0,ke._isFirebaseServerApp)(d.app)){const j=d.app.settings.authIdToken;return j?new Promise(oe=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(j).then(oe,oe))}):d.directlySetCurrentUser(null)}const E=yield d.assertedPersistence.getCurrentUser();let I=E,O=!1;if(u&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const j=null===(m=d.redirectUser)||void 0===m?void 0:m._redirectEventId,oe=I?._redirectEventId,Se=yield d.tryRedirectSignIn(u);(!j||j===oe)&&Se?.user&&(I=Se.user,O=!0)}if(!I)return d.directlySetCurrentUser(null);if(!I._redirectEventId){if(O)try{yield d.beforeStateQueue.runMiddleware(I)}catch(j){I=E,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(j))}return I?d.reloadAndSetCurrentUserOrClear(I):d.directlySetCurrentUser(null)}return me(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===I._redirectEventId?d.directlySetCurrentUser(I):d.reloadAndSetCurrentUserOrClear(I)})()}tryRedirectSignIn(u){var d=this;return(0,D.A)(function*(){let m=null;try{m=yield d._popupRedirectResolver._completeRedirectFn(d,u,!0)}catch{yield d._setRedirectUser(null)}return m})()}reloadAndSetCurrentUserOrClear(u){var d=this;return(0,D.A)(function*(){try{yield jr(u)}catch(m){if("auth/network-request-failed"!==m?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function kc(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var u=this;return(0,D.A)(function*(){u._deleted=!0})()}updateCurrentUser(u){var d=this;return(0,D.A)(function*(){if((0,ke._isFirebaseServerApp)(d.app))return Promise.reject(tt(d));const m=u?(0,ee.Ku)(u):null;return m&&me(m.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(m&&m._clone(d))})()}_updateCurrentUser(u,d=!1){var m=this;return(0,D.A)(function*(){if(!m._deleted)return u&&me(m.tenantId===u.tenantId,m,"tenant-id-mismatch"),d||(yield m.beforeStateQueue.runMiddleware(u)),m.queue((0,D.A)(function*(){yield m.directlySetCurrentUser(u),m.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,D.A)(function*(){return(0,ke._isFirebaseServerApp)(u.app)?Promise.reject(tt(u)):(yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0))})()}setPersistence(u){var d=this;return(0,ke._isFirebaseServerApp)(this.app)?Promise.reject(tt(this)):this.queue((0,D.A)(function*(){yield d.assertedPersistence.setPersistence(bt(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var d=this;return(0,D.A)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const m=d._getPasswordPolicyInternal();return m.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):m.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,D.A)(function*(){const d=yield function Sn(p){return ln.apply(this,arguments)}(u),m=new Ha(d);null===u.tenantId?u._projectPasswordPolicy=m:u._tenantPasswordPolicies[u.tenantId]=m})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new ee.FA("auth","Firebase",u())}onAuthStateChanged(u,d,m){return this.registerStateListener(this.authStateSubscription,u,d,m)}beforeAuthStateChanged(u,d){return this.beforeStateQueue.pushCallback(u,d)}onIdTokenChanged(u,d,m){return this.registerStateListener(this.idTokenSubscription,u,d,m)}authStateReady(){return new Promise((u,d)=>{if(this.currentUser)u();else{const m=this.onAuthStateChanged(()=>{m(),u()},d)}})}revokeAccessToken(u){var d=this;return(0,D.A)(function*(){if(d.currentUser){const m=yield d.currentUser.getIdToken(),E={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:m};null!=d.tenantId&&(E.tenantId=d.tenantId),yield function M(p,u){return U.apply(this,arguments)}(d,E)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,d){var m=this;return(0,D.A)(function*(){const E=yield m.getOrInitRedirectPersistenceManager(d);return null===u?E.removeCurrentUser():E.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var d=this;return(0,D.A)(function*(){if(!d.redirectPersistenceManager){const m=u&&bt(u)||d._popupRedirectResolver;me(m,d,"argument-error"),d.redirectPersistenceManager=yield wt.create(d,[bt(m._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(u){var d=this;return(0,D.A)(function*(){var m,E;return d._isInitialized&&(yield d.queue((0,D.A)(function*(){}))),(null===(m=d._currentUser)||void 0===m?void 0:m._redirectEventId)===u?d._currentUser:(null===(E=d.redirectUser)||void 0===E?void 0:E._redirectEventId)===u?d.redirectUser:null})()}_persistUserIfCurrent(u){var d=this;return(0,D.A)(function*(){if(u===d.currentUser)return d.queue((0,D.A)(function*(){return d.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const m=null!==(d=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==m&&(this.lastNotifiedUid=m,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,d,m,E){if(this._deleted)return()=>{};const I="function"==typeof d?d:d.next.bind(d);let O=!1;const j=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(j,this,"internal-error"),j.then(()=>{O||I(this.currentUser)}),"function"==typeof d){const oe=u.addObserver(d,m,E);return()=>{O=!0,oe()}}{const oe=u.addObserver(d);return()=>{O=!0,oe()}}}directlySetCurrentUser(u){var d=this;return(0,D.A)(function*(){d.currentUser&&d.currentUser!==u&&d._currentUser._stopProactiveRefresh(),u&&d.isProactiveRefreshEnabled&&u._startProactiveRefresh(),d.currentUser=u,u?yield d.assertedPersistence.setCurrentUser(u):yield d.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=lt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,D.A)(function*(){var d;const m={"X-Client-Version":u.clientVersion};u.app.options.appId&&(m["X-Firebase-gmpid"]=u.app.options.appId);const E=yield null===(d=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();E&&(m["X-Firebase-Client"]=E);const I=yield u._getAppCheckToken();return I&&(m["X-Firebase-AppCheck"]=I),m})()}_getAppCheckToken(){var u=this;return(0,D.A)(function*(){var d;const m=yield null===(d=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return m?.error&&function Yr(p,...u){gr.logLevel<=pn.$b.WARN&&gr.warn(`Auth (${ke.SDK_VERSION}): ${p}`,...u)}(`Error while retrieving App Check token: ${m.error}`),m?.token})()}}function Bt(p){return(0,ee.Ku)(p)}class pu{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,ee.tD)(d=>this.observer=d)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let lo={loadJS:()=>(0,D.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oh(p){return lo.loadJS(p)}function zv(p){return`__${p}${Math.floor(1e6*Math.random())}`}class sh{constructor(u){this.type="recaptcha-enterprise",this.auth=Bt(u)}verify(u="verify",d=!1){var m=this;return(0,D.A)(function*(){function I(){return I=(0,D.A)(function*(j){if(!d){if(null==j.tenantId&&null!=j._agentRecaptchaConfig)return j._agentRecaptchaConfig.siteKey;if(null!=j.tenantId&&void 0!==j._tenantRecaptchaConfigs[j.tenantId])return j._tenantRecaptchaConfigs[j.tenantId].siteKey}return new Promise(function(){var oe=(0,D.A)(function*(Se,Ue){Go(j,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Le=>{if(void 0!==Le.recaptchaKey){const nn=new Va(Le);return null==j.tenantId?j._agentRecaptchaConfig=nn:j._tenantRecaptchaConfigs[j.tenantId]=nn,Se(nn.siteKey)}Ue(new Error("recaptcha Enterprise site key undefined"))}).catch(Le=>{Ue(Le)})});return function(Se,Ue){return oe.apply(this,arguments)}}())}),I.apply(this,arguments)}function O(j,oe,Se){const Ue=window.grecaptcha;ai(Ue)?Ue.enterprise.ready(()=>{Ue.enterprise.execute(j,{action:u}).then(Le=>{oe(Le)}).catch(()=>{oe("NO_RECAPTCHA")})}):Se(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((j,oe)=>{(function E(j){return I.apply(this,arguments)})(m.auth).then(Se=>{if(!d&&ai(window.grecaptcha))O(Se,j,oe);else{if(typeof window>"u")return void oe(new Error("RecaptchaVerifier is only supported in browser"));let Ue=function Hv(){return lo.recaptchaEnterpriseScript}();0!==Ue.length&&(Ue+=Se),oh(Ue).then(()=>{O(Se,j,oe)}).catch(Le=>{oe(Le)})}}).catch(Se=>{oe(Se)})})})()}}function ah(p,u,d){return qv.apply(this,arguments)}function qv(){return(qv=(0,D.A)(function*(p,u,d,m=!1){const E=new sh(p);let I;try{I=yield E.verify(d)}catch{I=yield E.verify(d,!0)}const O=Object.assign({},u);return Object.assign(O,m?{captchaResp:I}:{captchaResponse:I}),Object.assign(O,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(O,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),O})).apply(this,arguments)}function Xs(p,u,d,m){return lg.apply(this,arguments)}function lg(){return lg=(0,D.A)(function*(p,u,d,m){var E;if(null!==(E=p._getRecaptchaConfig())&&void 0!==E&&E.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const I=yield ah(p,u,d,"getOobCode"===d);return m(p,I)}return m(p,u).catch(function(){var I=(0,D.A)(function*(O){if("auth/missing-recaptcha-token"===O.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const j=yield ah(p,u,d,"getOobCode"===d);return m(p,j)}return Promise.reject(O)});return function(O){return I.apply(this,arguments)}}())}),lg.apply(this,arguments)}function Wv(p){const u=p.indexOf(":");return u<0?"":p.substr(0,u+1)}function JT(p){if(!p)return null;const u=Number(p);return isNaN(u)?null:u}class za{constructor(u,d){this.providerId=u,this.signInMethod=d}toJSON(){return Xn("not implemented")}_getIdTokenResponse(u){return Xn("not implemented")}_linkToIdToken(u,d){return Xn("not implemented")}_getReauthenticationResolver(u){return Xn("not implemented")}}function ZT(p,u){return Kv.apply(this,arguments)}function Kv(){return(Kv=(0,D.A)(function*(p,u){return Ne(p,"POST","/v1/accounts:resetPassword",he(p,u))})).apply(this,arguments)}function Qv(){return(Qv=(0,D.A)(function*(p,u){return Ne(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function or(p,u){return Yv.apply(this,arguments)}function Yv(){return(Yv=(0,D.A)(function*(p,u){return Ne(p,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function hg(){return(hg=(0,D.A)(function*(p,u){return Ne(p,"POST","/v1/accounts:update",he(p,u))})).apply(this,arguments)}function dk(p,u){return lh.apply(this,arguments)}function lh(){return(lh=(0,D.A)(function*(p,u){return xt(p,"POST","/v1/accounts:signInWithPassword",he(p,u))})).apply(this,arguments)}function Uc(p,u){return mu.apply(this,arguments)}function mu(){return(mu=(0,D.A)(function*(p,u){return Ne(p,"POST","/v1/accounts:sendOobCode",he(p,u))})).apply(this,arguments)}function fg(){return(fg=(0,D.A)(function*(p,u){return Uc(p,u)})).apply(this,arguments)}function t0(p,u){return Jv.apply(this,arguments)}function Jv(){return(Jv=(0,D.A)(function*(p,u){return Uc(p,u)})).apply(this,arguments)}function hk(p,u){return pg.apply(this,arguments)}function pg(){return(pg=(0,D.A)(function*(p,u){return Uc(p,u)})).apply(this,arguments)}function gg(){return(gg=(0,D.A)(function*(p,u){return Uc(p,u)})).apply(this,arguments)}function mg(){return(mg=(0,D.A)(function*(p,u){return xt(p,"POST","/v1/accounts:signInWithEmailLink",he(p,u))})).apply(this,arguments)}function _g(){return(_g=(0,D.A)(function*(p,u){return xt(p,"POST","/v1/accounts:signInWithEmailLink",he(p,u))})).apply(this,arguments)}class _u extends za{constructor(u,d,m,E=null){super("password",m),this._email=u,this._password=d,this._tenantId=E}static _fromEmailAndPassword(u,d){return new _u(u,d,"password")}static _fromEmailAndCode(u,d,m=null){return new _u(u,d,"emailLink",m)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(u){var d=this;return(0,D.A)(function*(){switch(d.signInMethod){case"password":return Xs(u,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",dk);case"emailLink":return function r0(p,u){return mg.apply(this,arguments)}(u,{email:d._email,oobCode:d._password});default:Ht(u,"internal-error")}})()}_linkToIdToken(u,d){var m=this;return(0,D.A)(function*(){switch(m.signInMethod){case"password":return Xs(u,{idToken:d,returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",or);case"emailLink":return function o0(p,u){return _g.apply(this,arguments)}(u,{idToken:d,email:m._email,oobCode:m._password});default:Ht(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function ys(p,u){return yg.apply(this,arguments)}function yg(){return(yg=(0,D.A)(function*(p,u){return xt(p,"POST","/v1/accounts:signInWithIdp",he(p,u))})).apply(this,arguments)}class vs extends za{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const d=new vs(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(d.idToken=u.idToken),u.accessToken&&(d.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(d.nonce=u.nonce),u.pendingToken&&(d.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(d.accessToken=u.oauthToken,d.secret=u.oauthTokenSecret):Ht("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:E}=d,I=(0,He.Tt)(d,["providerId","signInMethod"]);if(!m||!E)return null;const O=new vs(m,E);return O.idToken=I.idToken||void 0,O.accessToken=I.accessToken||void 0,O.secret=I.secret,O.nonce=I.nonce,O.pendingToken=I.pendingToken||null,O}_getIdTokenResponse(u){return ys(u,this.buildRequest())}_linkToIdToken(u,d){const m=this.buildRequest();return m.idToken=d,ys(u,m)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,ys(u,d)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),u.postBody=(0,ee.Am)(d)}return u}}function vg(){return(vg=(0,D.A)(function*(p,u){return Ne(p,"POST","/v1/accounts:sendVerificationCode",he(p,u))})).apply(this,arguments)}function uh(){return(uh=(0,D.A)(function*(p,u){return xt(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,u))})).apply(this,arguments)}function dh(){return(dh=(0,D.A)(function*(p,u){const d=yield xt(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,u));if(d.temporaryProof)throw An(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const l0={USER_NOT_FOUND:"user-not-found"};function Eg(){return(Eg=(0,D.A)(function*(p,u){return xt(p,"POST","/v1/accounts:signInWithPhoneNumber",he(p,Object.assign(Object.assign({},u),{operation:"REAUTH"})),l0)})).apply(this,arguments)}class qa extends za{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,d){return new qa({verificationId:u,verificationCode:d})}static _fromTokenResponse(u,d){return new qa({phoneNumber:u,temporaryProof:d})}_getIdTokenResponse(u){return function c0(p,u){return uh.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,d){return function Zv(p,u){return dh.apply(this,arguments)}(u,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function u0(p,u){return Eg.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:d,verificationId:m,verificationCode:E}=this.params;return u&&d?{temporaryProof:u,phoneNumber:d}:{sessionInfo:m,code:E}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:d,verificationCode:m,phoneNumber:E,temporaryProof:I}=u;return m||d||E||I?new qa({verificationId:d,verificationCode:m,phoneNumber:E,temporaryProof:I}):null}}class yu{constructor(u){var d,m,E,I,O,j;const oe=(0,ee.I9)((0,ee.hp)(u)),Se=null!==(d=oe.apiKey)&&void 0!==d?d:null,Ue=null!==(m=oe.oobCode)&&void 0!==m?m:null,Le=function d0(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(E=oe.mode)&&void 0!==E?E:null);me(Se&&Ue&&Le,"argument-error"),this.apiKey=Se,this.operation=Le,this.code=Ue,this.continueUrl=null!==(I=oe.continueUrl)&&void 0!==I?I:null,this.languageCode=null!==(O=oe.languageCode)&&void 0!==O?O:null,this.tenantId=null!==(j=oe.tenantId)&&void 0!==j?j:null}static parseLink(u){const d=function fk(p){const u=(0,ee.I9)((0,ee.hp)(p)).link,d=u?(0,ee.I9)((0,ee.hp)(u)).deep_link_id:null,m=(0,ee.I9)((0,ee.hp)(p)).deep_link_id;return(m?(0,ee.I9)((0,ee.hp)(m)).link:null)||m||d||u||p}(u);try{return new yu(d)}catch{return null}}}let Cg=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,m){return _u._fromEmailAndPassword(d,m)}static credentialWithLink(d,m){const E=yu.parseLink(m);return me(E,"argument-error"),_u._fromEmailAndCode(d,E.code,E.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class Es{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class ea extends Es{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class Bc extends ea{static credentialFromJSON(u){const d="string"==typeof u?JSON.parse(u):u;return me("providerId"in d&&"signInMethod"in d,"argument-error"),vs._fromParams(d)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return me(u.idToken||u.accessToken,"argument-error"),vs._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return Bc.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return Bc.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:d,oauthAccessToken:m,oauthTokenSecret:E,pendingToken:I,nonce:O,providerId:j}=u;if(!m&&!E&&!d&&!I||!j)return null;try{return new Bc(j)._credential({idToken:d,accessToken:m,nonce:O,pendingToken:I})}catch{return null}}}let h0=(()=>{class p extends ea{constructor(){super("facebook.com")}static credential(d){return vs._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),Xv=(()=>{class p extends ea{constructor(){super("google.com"),this.addScope("profile")}static credential(d,m){return vs._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:m})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:m,oauthAccessToken:E}=d;if(!m&&!E)return null;try{return p.credential(m,E)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),f0=(()=>{class p extends ea{constructor(){super("github.com")}static credential(d){return vs._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class jc extends za{constructor(u,d){super(u,u),this.pendingToken=d}_getIdTokenResponse(u){return ys(u,this.buildRequest())}_linkToIdToken(u,d){const m=this.buildRequest();return m.idToken=d,ys(u,m)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,ys(u,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:E,pendingToken:I}=d;return m&&E&&I&&m===E?new jc(m,I):null}static _create(u,d){return new jc(u,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class hh extends Es{constructor(u){me(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return hh.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return hh.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const d=jc.fromJSON(u);return me(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:d,providerId:m}=u;if(!d||!m)return null;try{return jc._create(m,d)}catch{return null}}}let p0=(()=>{class p extends ea{constructor(){super("twitter.com")}static credential(d,m){return vs._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:m})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:m,oauthTokenSecret:E}=d;if(!m||!E)return null;try{return p.credential(m,E)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function tE(p,u){return nE.apply(this,arguments)}function nE(){return(nE=(0,D.A)(function*(p,u){return xt(p,"POST","/v1/accounts:signUp",he(p,u))})).apply(this,arguments)}class uo{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,d,m,E=!1){return(0,D.A)(function*(){const I=yield we._fromIdTokenResponse(u,m,E),O=rE(m);return new uo({user:I,providerId:O,_tokenResponse:m,operationType:d})})()}static _forOperation(u,d,m){return(0,D.A)(function*(){yield u._updateTokensIfNecessary(m,!0);const E=rE(m);return new uo({user:u,providerId:E,_tokenResponse:m,operationType:d})})()}}function rE(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function wg(){return(wg=(0,D.A)(function*(p){var u;if((0,ke._isFirebaseServerApp)(p.app))return Promise.reject(tt(p));const d=Bt(p);if(yield d._initializationPromise,null!==(u=d.currentUser)&&void 0!==u&&u.isAnonymous)return new uo({user:d.currentUser,providerId:null,operationType:"signIn"});const m=yield tE(d,{returnSecureToken:!0}),E=yield uo._fromIdTokenResponse(d,"signIn",m,!0);return yield d._updateCurrentUser(E.user),E})).apply(this,arguments)}class Ko extends ee.g{constructor(u,d,m,E){var I;super(d.code,d.message),this.operationType=m,this.user=E,Object.setPrototypeOf(this,Ko.prototype),this.customData={appName:u.name,tenantId:null!==(I=u.tenantId)&&void 0!==I?I:void 0,_serverResponse:d.customData._serverResponse,operationType:m}}static _fromErrorAndOperation(u,d,m,E){return new Ko(u,d,m,E)}}function m0(p,u,d,m){return("reauthenticate"===u?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(I=>{throw"auth/multi-factor-auth-required"===I.code?Ko._fromErrorAndOperation(p,I,u,m):I})}function iE(p){return new Set(p.map(({providerId:u})=>u).filter(u=>!!u))}function Ig(){return Ig=(0,D.A)(function*(p,u){const d=(0,ee.Ku)(p);yield Ag(!0,d,u);const{providerUserInfo:m}=yield function uu(p,u){return Ci.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[u]}),E=iE(m||[]);return d.providerData=d.providerData.filter(I=>E.has(I.providerId)),E.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Ig.apply(this,arguments)}function bg(p,u){return Tg.apply(this,arguments)}function Tg(){return(Tg=(0,D.A)(function*(p,u,d=!1){const m=yield Jr(p,u._linkToIdToken(p.auth,yield p.getIdToken()),d);return uo._forOperation(p,"link",m)})).apply(this,arguments)}function Ag(p,u,d){return oE.apply(this,arguments)}function oE(){return(oE=(0,D.A)(function*(p,u,d){yield jr(u);const E=!1===p?"provider-already-linked":"no-such-provider";me(iE(u.providerData).has(d)===p,u.auth,E)})).apply(this,arguments)}function _0(p,u){return sE.apply(this,arguments)}function sE(){return(sE=(0,D.A)(function*(p,u,d=!1){const{auth:m}=p;if((0,ke._isFirebaseServerApp)(m.app))return Promise.reject(tt(m));const E="reauthenticate";try{const I=yield Jr(p,m0(m,E,u,p),d);me(I.idToken,m,"internal-error");const O=Qs(I.idToken);me(O,m,"internal-error");const{sub:j}=O;return me(p.uid===j,m,"user-mismatch"),uo._forOperation(p,E,I)}catch(I){throw"auth/user-not-found"===I?.code&&Ht(m,"user-mismatch"),I}})).apply(this,arguments)}function y0(p,u){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,D.A)(function*(p,u,d=!1){if((0,ke._isFirebaseServerApp)(p.app))return Promise.reject(tt(p));const m="signIn",E=yield m0(p,m,u),I=yield uo._fromIdTokenResponse(p,m,E);return d||(yield p._updateCurrentUser(I.user)),I})).apply(this,arguments)}function Pg(p,u){return aE.apply(this,arguments)}function aE(){return(aE=(0,D.A)(function*(p,u){return y0(Bt(p),u)})).apply(this,arguments)}function Dg(p,u){return Q.apply(this,arguments)}function Q(){return(Q=(0,D.A)(function*(p,u){const d=(0,ee.Ku)(p);return yield Ag(!1,d,u.providerId),bg(d,u)})).apply(this,arguments)}function Ga(p,u){return $c.apply(this,arguments)}function $c(){return($c=(0,D.A)(function*(p,u){return _0((0,ee.Ku)(p),u)})).apply(this,arguments)}function lE(){return(lE=(0,D.A)(function*(p,u){return xt(p,"POST","/v1/accounts:signInWithCustomToken",he(p,u))})).apply(this,arguments)}function fh(){return fh=(0,D.A)(function*(p,u){if((0,ke._isFirebaseServerApp)(p.app))return Promise.reject(tt(p));const d=Bt(p),m=yield function cE(p,u){return lE.apply(this,arguments)}(d,{token:u,returnSecureToken:!0}),E=yield uo._fromIdTokenResponse(d,"signIn",m);return yield d._updateCurrentUser(E.user),E}),fh.apply(this,arguments)}class qi{constructor(u,d){this.factorId=u,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(u,d){return"phoneInfo"in d?ta._fromServerResponse(u,d):"totpInfo"in d?na._fromServerResponse(u,d):Ht(u,"internal-error")}}class ta extends qi{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,d){return new ta(d)}}class na extends qi{constructor(u){super("totp",u)}static _fromServerResponse(u,d){return new na(d)}}function Cs(p,u,d){var m;me((null===(m=d.url)||void 0===m?void 0:m.length)>0,p,"invalid-continue-uri"),me(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),u.continueUrl=d.url,u.dynamicLinkDomain=d.dynamicLinkDomain,u.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(me(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),u.iOSBundleId=d.iOS.bundleId),d.android&&(me(d.android.packageName.length>0,p,"missing-android-pkg-name"),u.androidInstallApp=d.android.installApp,u.androidMinimumVersionCode=d.android.minimumVersion,u.androidPackageName=d.android.packageName)}function ph(p){return vu.apply(this,arguments)}function vu(){return(vu=(0,D.A)(function*(p){const u=Bt(p);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function uE(){return(uE=(0,D.A)(function*(p,u,d){const m=Bt(p),E={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};d&&Cs(m,E,d),yield Xs(m,E,"getOobCode",t0)})).apply(this,arguments)}function dE(){return dE=(0,D.A)(function*(p,u,d){yield ZT((0,ee.Ku)(p),{oobCode:u,newPassword:d}).catch(function(){var m=(0,D.A)(function*(E){throw"auth/password-does-not-meet-requirements"===E.code&&ph(p),E});return function(E){return m.apply(this,arguments)}}())}),dE.apply(this,arguments)}function Kt(){return Kt=(0,D.A)(function*(p,u){yield function XT(p,u){return hg.apply(this,arguments)}((0,ee.Ku)(p),{oobCode:u})}),Kt.apply(this,arguments)}function hE(p,u){return nr.apply(this,arguments)}function nr(){return(nr=(0,D.A)(function*(p,u){const d=(0,ee.Ku)(p),m=yield ZT(d,{oobCode:u}),E=m.requestType;switch(me(E,d,"internal-error"),E){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":me(m.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":me(m.mfaInfo,d,"internal-error");default:me(m.email,d,"internal-error")}let I=null;return m.mfaInfo&&(I=qi._fromServerResponse(Bt(d),m.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.newEmail:m.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.email:m.newEmail)||null,multiFactorInfo:I},operation:E}})).apply(this,arguments)}function fE(){return(fE=(0,D.A)(function*(p,u){const{data:d}=yield hE((0,ee.Ku)(p),u);return d.email})).apply(this,arguments)}function sn(){return(sn=(0,D.A)(function*(p,u,d){if((0,ke._isFirebaseServerApp)(p.app))return Promise.reject(tt(p));const m=Bt(p),O=yield Xs(m,{returnSecureToken:!0,email:u,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tE).catch(oe=>{throw"auth/password-does-not-meet-requirements"===oe.code&&ph(p),oe}),j=yield uo._fromIdTokenResponse(m,"signIn",O);return yield m._updateCurrentUser(j.user),j})).apply(this,arguments)}function ci(){return(ci=(0,D.A)(function*(p,u,d){const m=Bt(p),E={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function I(O,j){me(j.handleCodeInApp,m,"argument-error"),j&&Cs(m,O,j)})(E,d),yield Xs(m,E,"getOobCode",hk)})).apply(this,arguments)}function pE(){return(pE=(0,D.A)(function*(p,u,d){if((0,ke._isFirebaseServerApp)(p.app))return Promise.reject(tt(p));const m=(0,ee.Ku)(p),E=Cg.credentialWithLink(u,d||vi());return me(E._tenantId===(m.tenantId||null),m,"tenant-id-mismatch"),Pg(m,E)})).apply(this,arguments)}function gE(){return(gE=(0,D.A)(function*(p,u){return Ne(p,"POST","/v1/accounts:createAuthUri",he(p,u))})).apply(this,arguments)}function mE(){return mE=(0,D.A)(function*(p,u){const m={identifier:u,continueUri:ms()?vi():"http://localhost"},{signinMethods:E}=yield function ra(p,u){return gE.apply(this,arguments)}((0,ee.Ku)(p),m);return E||[]}),mE.apply(this,arguments)}function Og(){return Og=(0,D.A)(function*(p,u){const d=(0,ee.Ku)(p),E={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};u&&Cs(d.auth,E,u);const{email:I}=yield function e0(p,u){return fg.apply(this,arguments)}(d.auth,E);I!==p.email&&(yield p.reload())}),Og.apply(this,arguments)}function Rg(){return Rg=(0,D.A)(function*(p,u,d){const m=(0,ee.Ku)(p),I={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:u};d&&Cs(m.auth,I,d);const{email:O}=yield function n0(p,u){return gg.apply(this,arguments)}(m.auth,I);O!==p.email&&(yield p.reload())}),Rg.apply(this,arguments)}function li(){return(li=(0,D.A)(function*(p,u){return Ne(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function _E(){return _E=(0,D.A)(function*(p,{displayName:u,photoURL:d}){if(void 0===u&&void 0===d)return;const m=(0,ee.Ku)(p),I={idToken:yield m.getIdToken(),displayName:u,photoUrl:d,returnSecureToken:!0},O=yield Jr(m,function Ik(p,u){return li.apply(this,arguments)}(m.auth,I));m.displayName=O.displayName||null,m.photoURL=O.photoUrl||null;const j=m.providerData.find(({providerId:oe})=>"password"===oe);j&&(j.displayName=m.displayName,j.photoURL=m.photoURL),yield m._updateTokensIfNecessary(O)}),_E.apply(this,arguments)}function C0(p,u,d){return yE.apply(this,arguments)}function yE(){return yE=(0,D.A)(function*(p,u,d){const{auth:m}=p,I={idToken:yield p.getIdToken(),returnSecureToken:!0};u&&(I.email=u),d&&(I.password=d);const O=yield Jr(p,function uk(p,u){return Qv.apply(this,arguments)}(m,I));yield p._updateTokensIfNecessary(O,!0)}),yE.apply(this,arguments)}class Eu{constructor(u,d,m={}){this.isNewUser=u,this.providerId=d,this.profile=m}}class ui extends Eu{constructor(u,d,m,E){super(u,d,m),this.username=E}}class mh extends Eu{constructor(u,d){super(u,"facebook.com",d)}}class w0 extends ui{constructor(u,d){super(u,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class vE extends Eu{constructor(u,d){super(u,"google.com",d)}}class I0 extends ui{constructor(u,d,m){super(u,"twitter.com",d,m)}}function _h(p){const{user:u,_tokenResponse:d}=p;return u.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function xe(p){var u,d;if(!p)return null;const{providerId:m}=p,E=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},I=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!m&&p?.idToken){const O=null===(d=null===(u=Qs(p.idToken))||void 0===u?void 0:u.firebase)||void 0===d?void 0:d.sign_in_provider;if(O)return new Eu(I,"anonymous"!==O&&"custom"!==O?O:null)}if(!m)return null;switch(m){case"facebook.com":return new mh(I,E);case"github.com":return new w0(I,E);case"google.com":return new vE(I,E);case"twitter.com":return new I0(I,E,p.screenName||null);case"custom":case"anonymous":return new Eu(I,null);default:return new Eu(I,m,E)}}(d)}class zc{constructor(u,d,m){this.type=u,this.credential=d,this.user=m}static _fromIdtoken(u,d){return new zc("enroll",u,d)}static _fromMfaPendingCredential(u){return new zc("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var d,m;if(u?.multiFactorSession){if(null!==(d=u.multiFactorSession)&&void 0!==d&&d.pendingCredential)return zc._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(m=u.multiFactorSession)&&void 0!==m&&m.idToken)return zc._fromIdtoken(u.multiFactorSession.idToken)}return null}}class TE{constructor(u,d,m){this.session=u,this.hints=d,this.signInResolver=m}static _fromError(u,d){const m=Bt(u),E=d.customData._serverResponse,I=(E.mfaInfo||[]).map(j=>qi._fromServerResponse(m,j));me(E.mfaPendingCredential,m,"internal-error");const O=zc._fromMfaPendingCredential(E.mfaPendingCredential);return new TE(O,I,function(){var j=(0,D.A)(function*(oe){const Se=yield oe._process(m,O);delete E.mfaInfo,delete E.mfaPendingCredential;const Ue=Object.assign(Object.assign({},E),{idToken:Se.idToken,refreshToken:Se.refreshToken});switch(d.operationType){case"signIn":const Le=yield uo._fromIdTokenResponse(m,d.operationType,Ue);return yield m._updateCurrentUser(Le.user),Le;case"reauthenticate":return me(d.user,m,"internal-error"),uo._forOperation(d.user,d.operationType,Ue);default:Ht(m,"internal-error")}});return function(oe){return j.apply(this,arguments)}}())}resolveSignIn(u){var d=this;return(0,D.A)(function*(){return d.signInResolver(u)})()}}class Wa{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(m=>qi._fromServerResponse(u.auth,m)))})}static _fromUser(u){return new Wa(u)}getSession(){var u=this;return(0,D.A)(function*(){return zc._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,d){var m=this;return(0,D.A)(function*(){const E=u,I=yield m.getSession(),O=yield Jr(m.user,E._process(m.user.auth,I,d));return yield m.user._updateTokensIfNecessary(O),m.user.reload()})()}unenroll(u){var d=this;return(0,D.A)(function*(){const m="string"==typeof u?u:u.uid,E=yield d.user.getIdToken();try{const I=yield Jr(d.user,function ws(p,u){return Ne(p,"POST","/v2/accounts/mfaEnrollment:withdraw",he(p,u))}(d.user.auth,{idToken:E,mfaEnrollmentId:m}));d.enrolledFactors=d.enrolledFactors.filter(({uid:O})=>O!==m),yield d.user._updateTokensIfNecessary(I),yield d.user.reload()}catch(I){throw I}})()}}const yh=new WeakMap,Ft="__sak";class A0{constructor(u,d){this.storageRetriever=u,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Ft,"1"),this.storage.removeItem(Ft),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,d){return this.storage.setItem(u,JSON.stringify(d)),Promise.resolve()}_get(u){const d=this.storage.getItem(u);return Promise.resolve(d?JSON.parse(d):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const qc=(()=>{class p extends A0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,m)=>this.onStorageEvent(d,m),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function S0(){const p=(0,ee.ZQ)();return Vc(p)||Zs(p)}()&&function st(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Re(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const m of Object.keys(this.listeners)){const E=this.storage.getItem(m),I=this.localCache[m];E!==I&&d(m,I,E)}}onStorageEvent(d,m=!1){if(!d.key)return void this.forAllChangedKeys((j,oe,Se)=>{this.notifyListeners(j,Se)});const E=d.key;if(m?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const j=this.storage.getItem(E);if(d.newValue!==j)null!==d.newValue?this.storage.setItem(E,d.newValue):this.storage.removeItem(E);else if(this.localCache[E]===d.newValue&&!m)return}const I=()=>{const j=this.storage.getItem(E);!m&&this.localCache[E]===j||this.notifyListeners(E,j)},O=this.storage.getItem(E);!function ce(){return(0,ee.lT)()&&10===document.documentMode}()||O===d.newValue||d.newValue===d.oldValue?I():setTimeout(I,10)}notifyListeners(d,m){this.localCache[d]=m;const E=this.listeners[d];if(E)for(const I of Array.from(E))I(m&&JSON.parse(m))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,m,E)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:m,newValue:E}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,m){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(m)}_removeListener(d,m){this.listeners[d]&&(this.listeners[d].delete(m),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,m){var E=()=>super._set,I=this;return(0,D.A)(function*(){yield E().call(I,d,m),I.localCache[d]=JSON.stringify(m)})()}_get(d){var m=()=>super._get,E=this;return(0,D.A)(function*(){const I=yield m().call(E,d);return E.localCache[d]=JSON.stringify(I),I})()}_remove(d){var m=()=>super._remove,E=this;return(0,D.A)(function*(){yield m().call(E,d),delete E.localCache[d]})()}}return p.type="LOCAL",p})(),Qo=(()=>{class p extends A0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,m){}_removeListener(d,m){}}return p.type="SESSION",p})();let Ii=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const m=this.receivers.find(I=>I.isListeningto(d));if(m)return m;const E=new p(d);return this.receivers.push(E),E}isListeningto(d){return this.eventTarget===d}handleEvent(d){var m=this;return(0,D.A)(function*(){const E=d,{eventId:I,eventType:O,data:j}=E.data,oe=m.handlersMap[O];if(!oe?.size)return;E.ports[0].postMessage({status:"ack",eventId:I,eventType:O});const Se=Array.from(oe).map(function(){var Le=(0,D.A)(function*(nn){return nn(E.origin,j)});return function(nn){return Le.apply(this,arguments)}}()),Ue=yield function PE(p){return Promise.all(p.map(function(){var u=(0,D.A)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(m){return{fulfilled:!1,reason:m}}});return function(d){return u.apply(this,arguments)}}()))}(Se);E.ports[0].postMessage({status:"done",eventId:I,eventType:O,response:Ue})})()}_subscribe(d,m){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(m)}_unsubscribe(d,m){this.handlersMap[d]&&m&&this.handlersMap[d].delete(m),(!m||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Gc(p="",u=10){let d="";for(let m=0;m<u;m++)d+=Math.floor(10*Math.random());return p+d}class Dk{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,d,m=50){var E=this;return(0,D.A)(function*(){const I=typeof MessageChannel<"u"?new MessageChannel:null;if(!I)throw new Error("connection_unavailable");let O,j;return new Promise((oe,Se)=>{const Ue=Gc("",20);I.port1.start();const Le=setTimeout(()=>{Se(new Error("unsupported_event"))},m);j={messageChannel:I,onMessage(nn){const Oo=nn;if(Oo.data.eventId===Ue)switch(Oo.data.status){case"ack":clearTimeout(Le),O=setTimeout(()=>{Se(new Error("timeout"))},3e3);break;case"done":clearTimeout(O),oe(Oo.data.response);break;default:clearTimeout(Le),clearTimeout(O),Se(new Error("invalid_response"))}}},E.handlers.add(j),I.port1.addEventListener("message",j.onMessage),E.target.postMessage({eventType:u,eventId:Ue,data:d},[I.port2])}).finally(()=>{j&&E.removeMessageHandler(j)})})()}}function mr(){return window}function Iu(){return typeof mr().WorkerGlobalScope<"u"&&"function"==typeof mr().importScripts}function Vg(){return(Vg=(0,D.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ug="firebaseLocalStorageDb",Eh="firebaseLocalStorage",Is="fbase_key";class bu{constructor(u){this.request=u}toPromise(){return new Promise((u,d)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function fe(p,u){return p.transaction([Eh],u?"readwrite":"readonly").objectStore(Eh)}function le(){const p=indexedDB.open(Ug,1);return new Promise((u,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const m=p.result;try{m.createObjectStore(Eh,{keyPath:Is})}catch(E){d(E)}}),p.addEventListener("success",(0,D.A)(function*(){const m=p.result;m.objectStoreNames.contains(Eh)?u(m):(m.close(),yield function DE(){const p=indexedDB.deleteDatabase(Ug);return new bu(p).toPromise()}(),u(yield le()))}))})}function Tu(p,u,d){return Au.apply(this,arguments)}function Au(){return(Au=(0,D.A)(function*(p,u,d){const m=fe(p,!0).put({[Is]:u,value:d});return new bu(m).toPromise()})).apply(this,arguments)}function Bg(){return(Bg=(0,D.A)(function*(p,u){const d=fe(p,!1).get(u),m=yield new bu(d).toPromise();return void 0===m?null:m.value})).apply(this,arguments)}function ME(p,u){const d=fe(p,!0).delete(u);return new bu(d).toPromise()}const Kc=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,D.A)(function*(){return d.db||(d.db=yield le()),d.db})()}_withRetries(d){var m=this;return(0,D.A)(function*(){let E=0;for(;;)try{const I=yield m._openDb();return yield d(I)}catch(I){if(E++>3)throw I;m.db&&(m.db.close(),m.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,D.A)(function*(){return Iu()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,D.A)(function*(){d.receiver=Ii._getInstance(function M0(){return Iu()?self:null}()),d.receiver._subscribe("keyChanged",function(){var m=(0,D.A)(function*(E,I){return{keyProcessed:(yield d._poll()).includes(I.key)}});return function(E,I){return m.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var m=(0,D.A)(function*(E,I){return["keyChanged"]});return function(E,I){return m.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,D.A)(function*(){var m,E;if(d.activeServiceWorker=yield function vh(){return Vg.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new Dk(d.activeServiceWorker);const I=yield d.sender._send("ping",{},800);I&&null!==(m=I[0])&&void 0!==m&&m.fulfilled&&null!==(E=I[0])&&void 0!==E&&E.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var m=this;return(0,D.A)(function*(){if(m.sender&&m.activeServiceWorker&&function D0(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===m.activeServiceWorker)try{yield m.sender._send("keyChanged",{key:d},m.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.A)(function*(){try{if(!indexedDB)return!1;const d=yield le();return yield Tu(d,Ft,"1"),yield ME(d,Ft),!0}catch{}return!1})()}_withPendingWrite(d){var m=this;return(0,D.A)(function*(){m.pendingWrites++;try{yield d()}finally{m.pendingWrites--}})()}_set(d,m){var E=this;return(0,D.A)(function*(){return E._withPendingWrite((0,D.A)(function*(){return yield E._withRetries(I=>Tu(I,d,m)),E.localCache[d]=m,E.notifyServiceWorker(d)}))})()}_get(d){var m=this;return(0,D.A)(function*(){const E=yield m._withRetries(I=>function Su(p,u){return Bg.apply(this,arguments)}(I,d));return m.localCache[d]=E,E})()}_remove(d){var m=this;return(0,D.A)(function*(){return m._withPendingWrite((0,D.A)(function*(){return yield m._withRetries(E=>ME(E,d)),delete m.localCache[d],m.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,D.A)(function*(){const m=yield d._withRetries(O=>{const j=fe(O,!1).getAll();return new bu(j).toPromise()});if(!m)return[];if(0!==d.pendingWrites)return[];const E=[],I=new Set;if(0!==m.length)for(const{fbase_key:O,value:j}of m)I.add(O),JSON.stringify(d.localCache[O])!==JSON.stringify(j)&&(d.notifyListeners(O,j),E.push(O));for(const O of Object.keys(d.localCache))d.localCache[O]&&!I.has(O)&&(d.notifyListeners(O,null),E.push(O));return E})()}notifyListeners(d,m){this.localCache[d]=m;const E=this.listeners[d];if(E)for(const I of Array.from(E))I(m)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,D.A)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,m){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(m)}_removeListener(d,m){this.listeners[d]&&(this.listeners[d].delete(m),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),bs=1e12;class OE{constructor(u){this.auth=u,this.counter=bs,this._widgets=new Map}render(u,d){const m=this.counter;return this._widgets.set(m,new Ih(u,this.auth.name,d||{})),this.counter++,m}reset(u){var d;const m=u||bs;null===(d=this._widgets.get(m))||void 0===d||d.delete(),this._widgets.delete(m)}getResponse(u){var d;return(null===(d=this._widgets.get(u||bs))||void 0===d?void 0:d.getResponse())||""}execute(u){var d=this;return(0,D.A)(function*(){var m;return null===(m=d._widgets.get(u||bs))||void 0===m||m.execute(),""})()}}class Ih{constructor(u,d,m){this.params=m,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const E="string"==typeof u?document.getElementById(u):u;me(E,"argument-error",{appName:d}),this.container=E,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function bh(p){const u=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<p;m++)u.push(d.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":d}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Pu=zv("rcb"),Mk=new K(3e4,6e4);class RE{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=mr().grecaptcha)||void 0===u||!u.render)}load(u,d=""){return me(function Ok(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),u,"argument-error"),this.shouldResolveImmediately(d)&&Wt(mr().grecaptcha)?Promise.resolve(mr().grecaptcha):new Promise((m,E)=>{const I=mr().setTimeout(()=>{E(zt(u,"network-request-failed"))},Mk.get());mr()[Pu]=()=>{mr().clearTimeout(I),delete mr()[Pu];const j=mr().grecaptcha;if(!j||!Wt(j))return void E(zt(u,"internal-error"));const oe=j.render;j.render=(Se,Ue)=>{const Le=oe(Se,Ue);return this.counter++,Le},this.hostLanguage=d,m(j)},oh(`${function $v(){return lo.recaptchaV2Script}()}?${(0,ee.Am)({onload:Pu,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(I),E(zt(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var d;return!(null===(d=mr().grecaptcha)||void 0===d||!d.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Gi{load(u){return(0,D.A)(function*(){return new OE(u)})()}clearedOneInstance(){}}const Th="recaptcha",Qc={theme:"light",type:"image"};class Rk{constructor(u,d,m=Object.assign({},Qc)){this.parameters=m,this.type=Th,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Bt(u),this.isInvisible="invisible"===this.parameters.size,me(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const E="string"==typeof d?document.getElementById(d):d;me(E,this.auth,"argument-error"),this.container=E,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Gi:new RE,this.validateStartingState()}verify(){var u=this;return(0,D.A)(function*(){u.assertNotDestroyed();const d=yield u.render(),m=u.getAssertedRecaptcha();return m.getResponse(d)||new Promise(I=>{const O=j=>{j&&(u.tokenChangeListeners.delete(O),I(j))};u.tokenChangeListeners.add(O),u.isInvisible&&m.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){me(!this.parameters.sitekey,this.auth,"argument-error"),me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),me(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return d=>{if(this.tokenChangeListeners.forEach(m=>m(d)),"function"==typeof u)u(d);else if("string"==typeof u){const m=mr()[u];"function"==typeof m&&m(d)}}}assertNotDestroyed(){me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,D.A)(function*(){if(yield u.init(),!u.widgetId){let d=u.container;if(!u.isInvisible){const m=document.createElement("div");d.appendChild(m),d=m}u.widgetId=u.getAssertedRecaptcha().render(d,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,D.A)(function*(){me(ms()&&!Iu(),u.auth,"internal-error"),yield function NE(){let p=null;return new Promise(u=>{"complete"!==document.readyState?(p=()=>u(),window.addEventListener("load",p)):u()}).catch(u=>{throw p&&window.removeEventListener("load",p),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const d=yield function Fc(p){return Ei.apply(this,arguments)}(u.auth);me(d,u.auth,"internal-error"),u.parameters.sitekey=d})()}getAssertedRecaptcha(){return me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ho{constructor(u,d){this.verificationId=u,this.onConfirmation=d}confirm(u){const d=qa._fromVerification(this.verificationId,u);return this.onConfirmation(d)}}function fo(){return(fo=(0,D.A)(function*(p,u,d){if((0,ke._isFirebaseServerApp)(p.app))return Promise.reject(tt(p));const m=Bt(p),E=yield Ti(m,u,(0,ee.Ku)(d));return new ho(E,I=>Pg(m,I))})).apply(this,arguments)}function Du(){return(Du=(0,D.A)(function*(p,u,d){const m=(0,ee.Ku)(p);yield Ag(!1,m,"phone");const E=yield Ti(m.auth,u,(0,ee.Ku)(d));return new ho(E,I=>Dg(m,I))})).apply(this,arguments)}function Yc(){return(Yc=(0,D.A)(function*(p,u,d){const m=(0,ee.Ku)(p);if((0,ke._isFirebaseServerApp)(m.auth.app))return Promise.reject(tt(m.auth));const E=yield Ti(m.auth,u,(0,ee.Ku)(d));return new ho(E,I=>Ga(m,I))})).apply(this,arguments)}function Ti(p,u,d){return ia.apply(this,arguments)}function ia(){return ia=(0,D.A)(function*(p,u,d){var m;const E=yield d.verify();try{let I;if(me("string"==typeof E,p,"argument-error"),me(d.type===Th,p,"argument-error"),I="string"==typeof u?{phoneNumber:u}:u,"session"in I){const O=I.session;if("phoneNumber"in I)return me("enroll"===O.type,p,"internal-error"),(yield function Cu(p,u){return Ne(p,"POST","/v2/accounts/mfaEnrollment:start",he(p,u))}(p,{idToken:O.credential,phoneEnrollmentInfo:{phoneNumber:I.phoneNumber,recaptchaToken:E}})).phoneSessionInfo.sessionInfo;{me("signin"===O.type,p,"internal-error");const j=(null===(m=I.multiFactorHint)||void 0===m?void 0:m.uid)||I.multiFactorUid;return me(j,p,"missing-multi-factor-info"),(yield function wh(p,u){return Ne(p,"POST","/v2/accounts/mfaSignIn:start",he(p,u))}(p,{mfaPendingCredential:O.credential,mfaEnrollmentId:j,phoneSignInInfo:{recaptchaToken:E}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:O}=yield function a0(p,u){return vg.apply(this,arguments)}(p,{phoneNumber:I.phoneNumber,recaptchaToken:E});return O}}finally{d._reset()}}),ia.apply(this,arguments)}function Mu(){return(Mu=(0,D.A)(function*(p,u){const d=(0,ee.Ku)(p);if((0,ke._isFirebaseServerApp)(d.auth.app))return Promise.reject(tt(d.auth));yield bg(d,u)})).apply(this,arguments)}let Jc=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=Bt(d)}verifyPhoneNumber(d,m){return Ti(this.auth,d,(0,ee.Ku)(m))}static credential(d,m){return qa._fromVerification(d,m)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:m,temporaryProof:E}=d;return m&&E?qa._fromTokenResponse(m,E):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function oa(p,u){return u?bt(u):(me(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class Qa extends za{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return ys(u,this._buildIdpRequest())}_linkToIdToken(u,d){return ys(u,this._buildIdpRequest(d))}_getReauthenticationResolver(u){return ys(u,this._buildIdpRequest())}_buildIdpRequest(u){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(d.idToken=u),d}}function kE(p){return y0(p.auth,new Qa(p),p.bypassAuthState)}function FE(p){const{auth:u,user:d}=p;return me(d,u,"internal-error"),_0(d,new Qa(p),p.bypassAuthState)}function F0(p){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,D.A)(function*(p){const{auth:u,user:d}=p;return me(d,u,"internal-error"),bg(d,new Qa(p),p.bypassAuthState)})).apply(this,arguments)}class LE{constructor(u,d,m,E,I=!1){this.auth=u,this.resolver=m,this.user=E,this.bypassAuthState=I,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var u=this;return new Promise(function(){var d=(0,D.A)(function*(m,E){u.pendingPromise={resolve:m,reject:E};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(I){u.reject(I)}});return function(m,E){return d.apply(this,arguments)}}())}onAuthEvent(u){var d=this;return(0,D.A)(function*(){const{urlResponse:m,sessionId:E,postBody:I,tenantId:O,error:j,type:oe}=u;if(j)return void d.reject(j);const Se={auth:d.auth,requestUri:m,sessionId:E,tenantId:O||void 0,postBody:I||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(oe)(Se))}catch(Ue){d.reject(Ue)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return kE;case"linkViaPopup":case"linkViaRedirect":return F0;case"reauthViaPopup":case"reauthViaRedirect":return FE;default:Ht(this.auth,"internal-error")}}resolve(u){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const L0=new K(2e3,1e4);function jg(){return(jg=(0,D.A)(function*(p,u,d){if((0,ke._isFirebaseServerApp)(p.app))return Promise.reject(zt(p,"operation-not-supported-in-this-environment"));const m=Bt(p);Gn(p,u,Es);const E=oa(m,d);return new zg(m,"signInViaPopup",u,E).executeNotNull()})).apply(this,arguments)}function $g(){return($g=(0,D.A)(function*(p,u,d){const m=(0,ee.Ku)(p);if((0,ke._isFirebaseServerApp)(m.auth.app))return Promise.reject(zt(m.auth,"operation-not-supported-in-this-environment"));Gn(m.auth,u,Es);const E=oa(m.auth,d);return new zg(m.auth,"reauthViaPopup",u,E,m).executeNotNull()})).apply(this,arguments)}function Hg(){return(Hg=(0,D.A)(function*(p,u,d){const m=(0,ee.Ku)(p);Gn(m.auth,u,Es);const E=oa(m.auth,d);return new zg(m.auth,"linkViaPopup",u,E,m).executeNotNull()})).apply(this,arguments)}let zg=(()=>{class p extends LE{constructor(d,m,E,I,O){super(d,m,I,O),this.provider=E,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,D.A)(function*(){const m=yield d.execute();return me(m,d.auth,"internal-error"),m})()}onExecution(){var d=this;return(0,D.A)(function*(){Sr(1===d.filter.length,"Popup operations only handle one event");const m=Gc();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],m),d.authWindow.associatedEvent=m,d.resolver._originValidation(d.auth).catch(E=>{d.reject(E)}),d.resolver._isIframeWebStorageSupported(d.auth,E=>{E||d.reject(zt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(zt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var m,E;this.pollId=null!==(E=null===(m=this.authWindow)||void 0===m?void 0:m.window)&&void 0!==E&&E.closed?window.setTimeout(()=>{this.pollId=null,this.reject(zt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,L0.get())};d()}}return p.currentPopupAction=null,p})();const UE="pendingRedirect",Ru=new Map;class U0 extends LE{constructor(u,d,m=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,m),this.eventId=null}execute(){var u=()=>super.execute,d=this;return(0,D.A)(function*(){let m=Ru.get(d.auth._key());if(!m){try{const I=(yield function B0(p,u){return sr.apply(this,arguments)}(d.resolver,d.auth))?yield u().call(d):null;m=()=>Promise.resolve(I)}catch(E){m=()=>Promise.reject(E)}Ru.set(d.auth._key(),m)}return d.bypassAuthState||Ru.set(d.auth._key(),()=>Promise.resolve(null)),m()})()}onAuthEvent(u){var d=()=>super.onAuthEvent,m=this;return(0,D.A)(function*(){if("signInViaRedirect"===u.type)return d().call(m,u);if("unknown"!==u.type){if(u.eventId){const E=yield m.auth._redirectUserForId(u.eventId);if(E)return m.user=E,d().call(m,u);m.resolve(null)}}else m.resolve(null)})()}onExecution(){return(0,D.A)(function*(){})()}cleanUp(){}}function sr(){return(sr=(0,D.A)(function*(p,u){const d=di(u),m=it(p);if(!(yield m._isAvailable()))return!1;const E="true"===(yield m._get(d));return yield m._remove(d),E})).apply(this,arguments)}function qg(p,u){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,D.A)(function*(p,u){return it(p)._set(di(u),"true")})).apply(this,arguments)}function Sh(p,u){Ru.set(p._key(),u)}function it(p){return bt(p._redirectPersistence)}function di(p){return Mr(UE,p.config.apiKey,p.name)}function vt(p,u,d){return function _r(p,u,d){return yr.apply(this,arguments)}(p,u,d)}function yr(){return(yr=(0,D.A)(function*(p,u,d){if((0,ke._isFirebaseServerApp)(p.app))return Promise.reject(tt(p));const m=Bt(p);Gn(p,u,Es),yield m._initializationPromise;const E=oa(m,d);return yield qg(E,m),E._openRedirect(m,u,"signInViaRedirect")})).apply(this,arguments)}function sa(p,u,d){return function Zr(p,u,d){return Ph.apply(this,arguments)}(p,u,d)}function Ph(){return(Ph=(0,D.A)(function*(p,u,d){const m=(0,ee.Ku)(p);if(Gn(m.auth,u,Es),(0,ke._isFirebaseServerApp)(m.auth.app))return Promise.reject(tt(m.auth));yield m.auth._initializationPromise;const E=oa(m.auth,d);yield qg(E,m.auth);const I=yield Kg(m);return E._openRedirect(m.auth,u,"reauthViaRedirect",I)})).apply(this,arguments)}function BE(p,u,d){return function Dh(p,u,d){return Wg.apply(this,arguments)}(p,u,d)}function Wg(){return(Wg=(0,D.A)(function*(p,u,d){const m=(0,ee.Ku)(p);Gn(m.auth,u,Es),yield m.auth._initializationPromise;const E=oa(m.auth,d);yield Ag(!1,m,u.providerId),yield qg(E,m.auth);const I=yield Kg(m);return E._openRedirect(m.auth,u,"linkViaRedirect",I)})).apply(this,arguments)}function Ya(){return(Ya=(0,D.A)(function*(p,u){return yield Bt(p)._initializationPromise,Mh(p,u,!1)})).apply(this,arguments)}function Mh(p,u){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,D.A)(function*(p,u,d=!1){if((0,ke._isFirebaseServerApp)(p.app))return Promise.reject(tt(p));const m=Bt(p),E=oa(m,u),O=yield new U0(m,E,d).execute();return O&&!d&&(delete O.user._redirectEventId,yield m._persistUserIfCurrent(O.user),yield m._setRedirectUser(null,u)),O})).apply(this,arguments)}function Kg(p){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,D.A)(function*(p){const u=Gc(`${p.uid}:::`);return p._redirectEventId=u,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),u})).apply(this,arguments)}class Oh{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let d=!1;return this.consumers.forEach(m=>{this.isEventForConsumer(u,m)&&(d=!0,this.sendToConsumer(u,m),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function $E(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rh(p);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=u,d=!0)),d}sendToConsumer(u,d){var m;if(u.error&&!Rh(u)){const E=(null===(m=u.error.code)||void 0===m?void 0:m.split("auth/")[1])||"internal-error";d.onError(zt(this.auth,E))}else d.onAuthEvent(u)}isEventForConsumer(u,d){const m=null===d.eventId||!!u.eventId&&u.eventId===d.eventId;return d.filter.includes(u.type)&&m}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(jE(u))}saveEventToCache(u){this.cachedEventUids.add(jE(u)),this.lastProcessedEventTime=Date.now()}}function jE(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(u=>u).join("-")}function Rh({type:p,error:u}){return"unknown"===p&&"auth/no-auth-event"===u?.code}function Qg(p){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,D.A)(function*(p,u={}){return Ne(p,"GET","/v1/projects",u)})).apply(this,arguments)}const $0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yg=/^https?/;function Jg(){return(Jg=(0,D.A)(function*(p){if(p.config.emulator)return;const{authorizedDomains:u}=yield Qg(p);for(const d of u)try{if(Zg(d))return}catch{}Ht(p,"unauthorized-domain")})).apply(this,arguments)}function Zg(p){const u=vi(),{protocol:d,hostname:m}=new URL(u);if(p.startsWith("chrome-extension://")){const O=new URL(p);return""===O.hostname&&""===m?"chrome-extension:"===d&&p.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===d&&O.hostname===m}if(!Yg.test(d))return!1;if($0.test(p))return m===p;const E=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+E+"|"+E+")$","i").test(m)}const xh=new K(3e4,6e4);function $r(){const p=mr().___jsl;if(p?.H)for(const u of Object.keys(p.H))if(p.H[u].r=p.H[u].r||[],p.H[u].L=p.H[u].L||[],p.H[u].r=[...p.H[u].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let el=null;const z0=new K(5e3,15e3),HE="__/auth/iframe",tl="emulator/auth/iframe",q0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},G0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function W0(p){const u=p.config;me(u.authDomain,p,"auth-domain-config-required");const d=u.emulator?X(u,tl):`https://${p.config.authDomain}/${HE}`,m={apiKey:u.apiKey,appName:p.name,v:ke.SDK_VERSION},E=G0.get(p.config.apiHost);E&&(m.eid=E);const I=p._getFrameworks();return I.length&&(m.fw=I.join(",")),`${d}?${(0,ee.Am)(m).slice(1)}`}function Ai(){return Ai=(0,D.A)(function*(p){const u=yield function H0(p){return el=el||function Xc(p){return new Promise((u,d)=>{var m,E,I;function O(){$r(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{$r(),d(zt(p,"network-request-failed"))},timeout:xh.get()})}if(null!==(E=null===(m=mr().gapi)||void 0===m?void 0:m.iframes)&&void 0!==E&&E.Iframe)u(gapi.iframes.getContext());else{if(null===(I=mr().gapi)||void 0===I||!I.load){const j=zv("iframefcb");return mr()[j]=()=>{gapi.load?O():d(zt(p,"network-request-failed"))},oh(`${function GT(){return lo.gapiScript}()}?onload=${j}`).catch(oe=>d(oe))}O()}}).catch(u=>{throw el=null,u})}(p),el}(p),d=mr().gapi;return me(d,p,"internal-error"),u.open({where:document.body,url:W0(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:q0,dontclear:!0},m=>new Promise(function(){var E=(0,D.A)(function*(I,O){yield m.restyle({setHideOnLeave:!1});const j=zt(p,"network-request-failed"),oe=mr().setTimeout(()=>{O(j)},z0.get());function Se(){mr().clearTimeout(oe),I(m)}m.ping(Se).then(Se,()=>{O(j)})});return function(I,O){return E.apply(this,arguments)}}()))}),Ai.apply(this,arguments)}const zE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ar{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const xu="__/auth/handler",J0="emulator/auth/handler",Z0=encodeURIComponent("fac");function em(p,u,d,m,E,I){return tm.apply(this,arguments)}function tm(){return(tm=(0,D.A)(function*(p,u,d,m,E,I){me(p.config.authDomain,p,"auth-domain-config-required"),me(p.config.apiKey,p,"invalid-api-key");const O={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:m,v:ke.SDK_VERSION,eventId:E};if(u instanceof Es){u.setDefaultLanguage(p.languageCode),O.providerId=u.providerId||"",(0,ee.Im)(u.getCustomParameters())||(O.customParameters=JSON.stringify(u.getCustomParameters()));for(const[Ue,Le]of Object.entries(I||{}))O[Ue]=Le}if(u instanceof ea){const Ue=u.getScopes().filter(Le=>""!==Le);Ue.length>0&&(O.scopes=Ue.join(","))}p.tenantId&&(O.tid=p.tenantId);const j=O;for(const Ue of Object.keys(j))void 0===j[Ue]&&delete j[Ue];const oe=yield p._getAppCheckToken(),Se=oe?`#${Z0}=${encodeURIComponent(oe)}`:"";return`${function X0({config:p}){return p.emulator?X(p,J0):`https://${p.authDomain}/${xu}`}(p)}?${(0,ee.Am)(j).slice(1)}${Se}`})).apply(this,arguments)}const nm="webStorageSupport",ku=class rm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qo,this._completeRedirectFn=Mh,this._overrideRedirectResult=Sh}_openPopup(u,d,m,E){var I=this;return(0,D.A)(function*(){var O;Sr(null===(O=I.eventManagers[u._key()])||void 0===O?void 0:O.manager,"_initialize() not called before _openPopup()");const j=yield em(u,d,m,vi(),E);return function qE(p,u,d,m=500,E=600){const I=Math.max((window.screen.availHeight-E)/2,0).toString(),O=Math.max((window.screen.availWidth-m)/2,0).toString();let j="";const oe=Object.assign(Object.assign({},zE),{width:m.toString(),height:E.toString(),top:I,left:O}),Se=(0,ee.ZQ)().toLowerCase();d&&(j=rh(Se)?"_blank":d),Js(Se)&&(u=u||"http://localhost",oe.scrollbars="yes");const Ue=Object.entries(oe).reduce((nn,[Oo,zh])=>`${nn}${Oo}=${zh},`,"");if(function H(p=(0,ee.ZQ)()){var u;return Zs(p)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(Se)&&"_self"!==j)return function Y0(p,u){const d=document.createElement("a");d.href=p,d.target=u;const m=document.createEvent("MouseEvent");m.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(m)}(u||"",j),new ar(null);const Le=window.open(u||"",j,Ue);me(Le,p,"popup-blocked");try{Le.focus()}catch{}return new ar(Le)}(u,j,Gc())})()}_openRedirect(u,d,m,E){var I=this;return(0,D.A)(function*(){return yield I._originValidation(u),function wu(p){mr().location.href=p}(yield em(u,d,m,vi(),E)),new Promise(()=>{})})()}_initialize(u){const d=u._key();if(this.eventManagers[d]){const{manager:E,promise:I}=this.eventManagers[d];return E?Promise.resolve(E):(Sr(I,"If manager is not set, promise should be"),I)}const m=this.initAndGetManager(u);return this.eventManagers[d]={promise:m},m.catch(()=>{delete this.eventManagers[d]}),m}initAndGetManager(u){var d=this;return(0,D.A)(function*(){const m=yield function Xg(p){return Ai.apply(this,arguments)}(u),E=new Oh(u);return m.register("authEvent",I=>(me(I?.authEvent,u,"invalid-auth-event"),{status:E.onEvent(I.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[u._key()]={manager:E},d.iframes[u._key()]=m,E})()}_isIframeWebStorageSupported(u,d){this.iframes[u._key()].send(nm,{type:nm},E=>{var I;const O=null===(I=E?.[0])||void 0===I?void 0:I[nm];void 0!==O&&d(!!O),Ht(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Nh(p){return Jg.apply(this,arguments)}(u)),this.originValidationPromises[d]}get _shouldInitProactively(){return Re()||Vc()||Zs()}};class wn{constructor(u){this.factorId=u}_process(u,d,m){switch(d.type){case"enroll":return this._finalizeEnroll(u,d.credential,m);case"signin":return this._finalizeSignIn(u,d.credential);default:return Xn("unexpected MultiFactorSessionType")}}}class Ie extends wn{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new Ie(u)}_finalizeEnroll(u,d,m){return function Lg(p,u){return Ne(p,"POST","/v2/accounts/mfaEnrollment:finalize",he(p,u))}(u,{idToken:d,displayName:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,d){return function N0(p,u){return Ne(p,"POST","/v2/accounts/mfaSignIn:finalize",he(p,u))}(u,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qe=(()=>{class p{constructor(){}static assertion(d){return Ie._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var Ja="@firebase/auth";class cr{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var d=this;return(0,D.A)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const d=this.auth.onIdTokenChanged(m=>{u(m?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,d),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const d=this.internalListeners.get(u);d&&(this.internalListeners.delete(u),d(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hi(){return window}(0,ee.XA)("authIdTokenMaxAge"),function jv(p){lo=p}({loadJS:p=>new Promise((u,d)=>{const m=document.createElement("script");m.setAttribute("src",p),m.onload=u,m.onerror=E=>{const I=zt("internal-error");I.customData=E,d(I)},m.type="text/javascript",m.charset="UTF-8",function il(){var p,u;return null!==(u=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==u?u:document}().appendChild(m)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function ot(p){(0,ke._registerComponent)(new Zn.uA("auth",(u,{options:d})=>{const m=u.getProvider("app").getImmediate(),E=u.getProvider("heartbeat"),I=u.getProvider("app-check-internal"),{apiKey:O,authDomain:j}=m.options;me(O&&!O.includes(":"),"invalid-api-key",{appName:m.name});const oe={apiKey:O,authDomain:j,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lt(p)},Se=new Bv(m,E,I,oe);return function Gv(p,u){const d=u?.persistence||[],m=(Array.isArray(d)?d:[d]).map(bt);u?.errorMap&&p._updateErrorMap(u.errorMap),p._initializeWithPersistence(m,u?.popupRedirectResolver)}(Se,d),Se},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,d,m)=>{u.getProvider("auth-internal").initialize()})),(0,ke._registerComponent)(new Zn.uA("auth-internal",u=>{const d=Bt(u.getProvider("auth").getImmediate());return new cr(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ke.registerVersion)(Ja,"1.7.6",function Yo(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,ke.registerVersion)(Ja,"1.7.6","esm2017")}("Browser");function Jo(){return Jo=(0,D.A)(function*(p,u,d){var m;const{BuildInfo:E}=hi();Sr(u.sessionId,"AuthEvent did not contain a session ID");const I=yield function Lh(p){return aa.apply(this,arguments)}(u.sessionId),O={};return Zs()?O.ibi=E.packageName:Fe()?O.apn=E.packageName:Ht(p,"operation-not-supported-in-this-environment"),E.displayName&&(O.appDisplayName=E.displayName),O.sessionId=I,em(p,d,u.type,void 0,null!==(m=u.eventId)&&void 0!==m?m:void 0,O)}),Jo.apply(this,arguments)}function As(){return(As=(0,D.A)(function*(p){const{BuildInfo:u}=hi(),d={};Zs()?d.iosBundleId=u.packageName:Fe()?d.androidPackageName=u.packageName:Ht(p,"operation-not-supported-in-this-environment"),yield Qg(p,d)})).apply(this,arguments)}function Xa(){return(Xa=(0,D.A)(function*(p,u,d){const{cordova:m}=hi();let E=()=>{};try{yield new Promise((I,O)=>{let j=null;function oe(){var Le;I();const nn=null===(Le=m.plugins.browsertab)||void 0===Le?void 0:Le.close;"function"==typeof nn&&nn(),"function"==typeof d?.close&&d.close()}function Se(){j||(j=window.setTimeout(()=>{O(zt(p,"redirect-cancelled-by-user"))},2e3))}function Ue(){"visible"===document?.visibilityState&&Se()}u.addPassiveListener(oe),document.addEventListener("resume",Se,!1),Fe()&&document.addEventListener("visibilitychange",Ue,!1),E=()=>{u.removePassiveListener(oe),document.removeEventListener("resume",Se,!1),document.removeEventListener("visibilitychange",Ue,!1),j&&window.clearTimeout(j)}})}finally{E()}})).apply(this,arguments)}function aa(){return(aa=(0,D.A)(function*(p){const u=function rr(p){if(Sr(/[0-9a-zA-Z]+/.test(p),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(p);const u=new ArrayBuffer(p.length),d=new Uint8Array(u);for(let m=0;m<p.length;m++)d[m]=p.charCodeAt(m);return d}(p),d=yield crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(d)).map(E=>E.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Nr extends Oh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(u=>{this.resolveInitialized=u})}addPassiveListener(u){this.passiveListeners.add(u)}removePassiveListener(u){this.passiveListeners.delete(u)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(u){return this.resolveInitialized(),this.passiveListeners.forEach(d=>d(u)),super.onEvent(u)}initialized(){var u=this;return(0,D.A)(function*(){yield u.initPromise})()}}function ca(p){return sl.apply(this,arguments)}function sl(){return(sl=(0,D.A)(function*(p){const u=yield sm()._get(am(p));return u&&(yield sm()._remove(am(p))),u})).apply(this,arguments)}function Lu(){const p=[];for(let d=0;d<20;d++){const m=Math.floor(62*Math.random());p.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(m))}return p.join("")}function sm(){return bt(qc)}function am(p){return Mr("authEvent",p.config.apiKey,p.name)}function Uh(p){if(!p?.includes("?"))return{};const[u,...d]=p.split("?");return(0,ee.I9)(d.join("?"))}const kk=class xk{constructor(){this._redirectPersistence=Qo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Mh,this._overrideRedirectResult=Sh}_initialize(u){var d=this;return(0,D.A)(function*(){const m=u._key();let E=d.eventManagers.get(m);return E||(E=new Nr(u),d.eventManagers.set(m,E),d.attachCallbackListeners(u,E)),E})()}_openPopup(u){Ht(u,"operation-not-supported-in-this-environment")}_openRedirect(u,d,m,E){var I=this;return(0,D.A)(function*(){!function Zo(p){var u,d,m,E,I,O,j,oe,Se,Ue;const Le=hi();me("function"==typeof(null===(u=Le?.universalLinks)||void 0===u?void 0:u.subscribe),p,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),me(typeof(null===(d=Le?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),me("function"==typeof(null===(I=null===(E=null===(m=Le?.cordova)||void 0===m?void 0:m.plugins)||void 0===E?void 0:E.browsertab)||void 0===I?void 0:I.openUrl),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),me("function"==typeof(null===(oe=null===(j=null===(O=Le?.cordova)||void 0===O?void 0:O.plugins)||void 0===j?void 0:j.browsertab)||void 0===oe?void 0:oe.isAvailable),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),me("function"==typeof(null===(Ue=null===(Se=Le?.cordova)||void 0===Se?void 0:Se.InAppBrowser)||void 0===Ue?void 0:Ue.open),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(u);const O=yield I._initialize(u);yield O.initialized(),O.resetRedirect(),function Wi(){Ru.clear()}(),yield I._originValidation(u);const j=function Xr(p,u,d=null){return{type:u,eventId:d,urlResponse:null,sessionId:Lu(),postBody:null,tenantId:p.tenantId,error:zt(p,"no-auth-event")}}(u,m,E);yield function om(p,u){return sm()._set(am(p),u)}(u,j);const oe=yield function WE(p,u,d){return Jo.apply(this,arguments)}(u,j,d),Se=yield function Ye(p){const{cordova:u}=hi();return new Promise(d=>{u.plugins.browsertab.isAvailable(m=>{let E=null;m?u.plugins.browsertab.openUrl(p):E=u.InAppBrowser.open(p,function J(p=(0,ee.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}()?"_blank":"_system","location=yes"),d(E)})})}(oe);return function im(p,u,d){return Xa.apply(this,arguments)}(u,O,Se)})()}_isIframeWebStorageSupported(u,d){throw new Error("Method not implemented.")}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Fh(p){return As.apply(this,arguments)}(u)),this.originValidationPromises[d]}attachCallbackListeners(u,d){const{universalLinks:m,handleOpenURL:E,BuildInfo:I}=hi(),O=setTimeout((0,D.A)(function*(){yield ca(u),d.onEvent(eA())}),500),j=function(){var Ue=(0,D.A)(function*(Le){clearTimeout(O);const nn=yield ca(u);let Oo=null;nn&&Le?.url&&(Oo=function Mo(p,u){var d,m;const E=function KE(p){const u=Uh(p),d=u.link?decodeURIComponent(u.link):void 0,m=Uh(d).link,E=u.deep_link_id?decodeURIComponent(u.deep_link_id):void 0;return Uh(E).link||E||m||d||p}(u);if(E.includes("/__/auth/callback")){const I=Uh(E),O=I.firebaseError?function cm(p){try{return JSON.parse(p)}catch{return null}}(decodeURIComponent(I.firebaseError)):null,j=null===(m=null===(d=O?.code)||void 0===d?void 0:d.split("auth/"))||void 0===m?void 0:m[1],oe=j?zt(j):null;return oe?{type:p.type,eventId:p.eventId,tenantId:p.tenantId,error:oe,urlResponse:null,sessionId:null,postBody:null}:{type:p.type,eventId:p.eventId,tenantId:p.tenantId,sessionId:p.sessionId,urlResponse:E,postBody:null}}return null}(nn,Le.url)),d.onEvent(Oo||eA())});return function(nn){return Ue.apply(this,arguments)}}();typeof m<"u"&&"function"==typeof m.subscribe&&m.subscribe(null,j);const oe=E,Se=`${I.packageName.toLowerCase()}://`;hi().handleOpenURL=function(){var Ue=(0,D.A)(function*(Le){if(Le.toLowerCase().startsWith(Se)&&j({url:Le}),"function"==typeof oe)try{oe(Le)}catch(nn){console.error(nn)}});return function(Le){return Ue.apply(this,arguments)}}()}};function eA(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:zt("no-auth-event")}}function Bh(){var p;return(null===(p=self?.location)||void 0===p?void 0:p.protocol)||null}function tA(p=(0,ee.ZQ)()){return!("file:"!==Bh()&&"ionic:"!==Bh()&&"capacitor:"!==Bh()||!p.toLowerCase().match(/iphone|ipad|ipod|android/))}function nA(){try{const p=self.localStorage,u=Gc();if(p)return p.setItem(u,"1"),p.removeItem(u),!function YE(p=(0,ee.ZQ)()){return function $k(){return(0,ee.lT)()&&11===document?.documentMode}()||function QE(p=(0,ee.ZQ)()){return/Edge\/\d+/.test(p)}(p)}()||(0,ee.zW)()}catch{return JE()&&(0,ee.zW)()}return!1}function JE(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ZE(){return(function Bk(){return"http:"===Bh()||"https:"===Bh()}()||(0,ee.sr)()||tA())&&!function jk(){return(0,ee.lV)()||(0,ee.Ll)()}()&&nA()&&!JE()}function rA(){return tA()&&typeof document<"u"}function jh(){return(jh=(0,D.A)(function*(){return!!rA()&&new Promise(p=>{const u=setTimeout(()=>{p(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(u),p(!0)})})})).apply(this,arguments)}const Si={LOCAL:"local",NONE:"none",SESSION:"session"},Vu=me,XE="persistence";function $h(p){return um.apply(this,arguments)}function um(){return(um=(0,D.A)(function*(p){yield p._initializationPromise;const u=tC(),d=Mr(XE,p.config.apiKey,p.name);u&&u.setItem(d,p._getPersistence())})).apply(this,arguments)}function tC(){var p;try{return(null===(p=function po(){return typeof window<"u"?window:null}())||void 0===p?void 0:p.sessionStorage)||null}catch{return null}}const Xo=me;class Ss{constructor(){this.browserResolver=bt(ku),this.cordovaResolver=bt(kk),this.underlyingResolver=null,this._redirectPersistence=Qo,this._completeRedirectFn=Mh,this._overrideRedirectResult=Sh}_initialize(u){var d=this;return(0,D.A)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(u)})()}_openPopup(u,d,m,E){var I=this;return(0,D.A)(function*(){return yield I.selectUnderlyingResolver(),I.assertedUnderlyingResolver._openPopup(u,d,m,E)})()}_openRedirect(u,d,m,E){var I=this;return(0,D.A)(function*(){return yield I.selectUnderlyingResolver(),I.assertedUnderlyingResolver._openRedirect(u,d,m,E)})()}_isIframeWebStorageSupported(u,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(u,d)}_originValidation(u){return this.assertedUnderlyingResolver._originValidation(u)}get _shouldInitProactively(){return rA()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Xo(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var u=this;return(0,D.A)(function*(){if(u.underlyingResolver)return;const d=yield function iA(){return jh.apply(this,arguments)}();u.underlyingResolver=d?u.cordovaResolver:u.browserResolver})()}}function hm(p){return p.unwrap()}function fm(p){return ei(p)}function ei(p){const{_tokenResponse:u}=p instanceof ee.g?p.customData:p;if(!u)return null;if(!(p instanceof ee.g)&&"temporaryProof"in u&&"phoneNumber"in u)return Jc.credentialFromResult(p);const d=u.providerId;if(!d||d===Jt.PASSWORD)return null;let m;switch(d){case Jt.GOOGLE:m=Xv;break;case Jt.FACEBOOK:m=h0;break;case Jt.GITHUB:m=f0;break;case Jt.TWITTER:m=p0;break;default:const{oauthIdToken:E,oauthAccessToken:I,oauthTokenSecret:O,pendingToken:j,nonce:oe}=u;return I||O||E||j?j?d.startsWith("saml.")?jc._create(d,j):vs._fromParams({providerId:d,signInMethod:d,pendingToken:j,idToken:E,accessToken:I}):new Bc(d).credential({idToken:E,accessToken:I,rawNonce:oe}):null}return p instanceof ee.g?m.credentialFromError(p):m.credentialFromResult(p)}function Pi(p,u){return u.catch(d=>{throw d instanceof ee.g&&function Uu(p,u){var d;const m=null===(d=u.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===u?.code)u.resolver=new Qi(p,function Fg(p,u){var d;const m=(0,ee.Ku)(p),E=u;return me(u.customData.operationType,m,"argument-error"),me(null===(d=E.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,m,"argument-error"),TE._fromError(m,E)}(p,u));else if(m){const E=ei(u),I=u;E&&(I.credential=E,I.tenantId=m.tenantId||void 0,I.email=m.email||void 0,I.phoneNumber=m.phoneNumber||void 0)}}(p,d),d}).then(d=>{const E=d.user;return{operationType:d.operationType,credential:fm(d),additionalUserInfo:_h(d),user:Ps.getOrCreate(E)}})}function ec(p,u){return la.apply(this,arguments)}function la(){return(la=(0,D.A)(function*(p,u){const d=yield u;return{verificationId:d.verificationId,confirm:m=>Pi(p,d.confirm(m))}})).apply(this,arguments)}class Qi{constructor(u,d){this.resolver=d,this.auth=function Qt(p){return p.wrapped()}(u)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(u){return Pi(hm(this.auth),this.resolver.resolveSignIn(u))}}class Ps{constructor(u){this._delegate=u,this.multiFactor=function ct(p){const u=(0,ee.Ku)(p);return yh.has(u)||yh.set(u,Wa._fromUser(u)),yh.get(u)}(u)}static getOrCreate(u){return Ps.USER_MAP.has(u)||Ps.USER_MAP.set(u,new Ps(u)),Ps.USER_MAP.get(u)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(u){return this._delegate.getIdTokenResult(u)}getIdToken(u){return this._delegate.getIdToken(u)}linkAndRetrieveDataWithCredential(u){return this.linkWithCredential(u)}linkWithCredential(u){var d=this;return(0,D.A)(function*(){return Pi(d.auth,Dg(d._delegate,u))})()}linkWithPhoneNumber(u,d){var m=this;return(0,D.A)(function*(){return ec(m.auth,function xE(p,u,d){return Du.apply(this,arguments)}(m._delegate,u,d))})()}linkWithPopup(u){var d=this;return(0,D.A)(function*(){return Pi(d.auth,function V0(p,u,d){return Hg.apply(this,arguments)}(d._delegate,u,Ss))})()}linkWithRedirect(u){var d=this;return(0,D.A)(function*(){return yield $h(Bt(d.auth)),BE(d._delegate,u,Ss)})()}reauthenticateAndRetrieveDataWithCredential(u){return this.reauthenticateWithCredential(u)}reauthenticateWithCredential(u){var d=this;return(0,D.A)(function*(){return Pi(d.auth,Ga(d._delegate,u))})()}reauthenticateWithPhoneNumber(u,d){return ec(this.auth,function Ah(p,u,d){return Yc.apply(this,arguments)}(this._delegate,u,d))}reauthenticateWithPopup(u){return Pi(this.auth,function VE(p,u,d){return $g.apply(this,arguments)}(this._delegate,u,Ss))}reauthenticateWithRedirect(u){var d=this;return(0,D.A)(function*(){return yield $h(Bt(d.auth)),sa(d._delegate,u,Ss)})()}sendEmailVerification(u){return function Ck(p,u){return Og.apply(this,arguments)}(this._delegate,u)}unlink(u){var d=this;return(0,D.A)(function*(){return yield function mk(p,u){return Ig.apply(this,arguments)}(d._delegate,u),d})()}updateEmail(u){return function bk(p,u){const d=(0,ee.Ku)(p);return(0,ke._isFirebaseServerApp)(d.auth.app)?Promise.reject(tt(d.auth)):C0(d,u,null)}(this._delegate,u)}updatePassword(u){return function Tk(p,u){return C0((0,ee.Ku)(p),null,u)}(this._delegate,u)}updatePhoneNumber(u){return function k0(p,u){return Mu.apply(this,arguments)}(this._delegate,u)}updateProfile(u){return function et(p,u){return _E.apply(this,arguments)}(this._delegate,u)}verifyBeforeUpdateEmail(u,d){return function wk(p,u,d){return Rg.apply(this,arguments)}(this._delegate,u,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ps.USER_MAP=new WeakMap;const tc=me;let nC=(()=>{class p{constructor(d,m){if(this.app=d,m.isInitialized())return this._delegate=m.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:E}=d.options;tc(E,"invalid-api-key",{appName:d.name}),tc(E,"invalid-api-key",{appName:d.name});const I=typeof window<"u"?Ss:void 0;this._delegate=m.initialize({options:{persistence:rC(E,d.name),popupRedirectResolver:I}}),this._delegate._updateErrorMap(Ar),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ps.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,m){!function ug(p,u,d){const m=Bt(p);me(m._canInitEmulator,m,"emulator-config-failed"),me(/^https?:\/\//.test(u),m,"invalid-emulator-scheme");const E=!!d?.disableWarnings,I=Wv(u),{host:O,port:j}=function YT(p){const u=Wv(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(u.length));if(!d)return{host:"",port:null};const m=d[2].split("@").pop()||"",E=/^(\[[^\]]+\])(:|$)/.exec(m);if(E){const I=E[1];return{host:I,port:JT(m.substr(I.length+1))}}{const[I,O]=m.split(":");return{host:I,port:JT(O)}}}(u);m.config.emulator={url:`${I}//${O}${null===j?"":`:${j}`}/`},m.settings.appVerificationDisabledForTesting=!0,m.emulatorConfig=Object.freeze({host:O,port:j,protocol:I.replace(":",""),options:Object.freeze({disableWarnings:E})}),E||function dg(){function p(){const u=document.createElement("p"),d=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}(this._delegate,d,m)}applyActionCode(d){return function yk(p,u){return Kt.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return hE(this._delegate,d)}confirmPasswordReset(d,m){return function un(p,u,d){return dE.apply(this,arguments)}(this._delegate,d,m)}createUserWithEmailAndPassword(d,m){var E=this;return(0,D.A)(function*(){return Pi(E._delegate,function v0(p,u,d){return sn.apply(this,arguments)}(E._delegate,d,m))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function Ek(p,u){return mE.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function vk(p,u){const d=yu.parseLink(u);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,D.A)(function*(){tc(ZE(),d._delegate,"operation-not-supported-in-this-environment");const m=yield function j0(p,u){return Ya.apply(this,arguments)}(d._delegate,Ss);return m?Pi(d._delegate,Promise.resolve(m)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function Fk(p,u){Bt(p)._logFramework(u)}(this._delegate,d)}onAuthStateChanged(d,m,E){const{next:I,error:O,complete:j}=Yi(d,m,E);return this._delegate.onAuthStateChanged(I,O,j)}onIdTokenChanged(d,m,E){const{next:I,error:O,complete:j}=Yi(d,m,E);return this._delegate.onIdTokenChanged(I,O,j)}sendSignInLinkToEmail(d,m){return function gh(p,u,d){return ci.apply(this,arguments)}(this._delegate,d,m)}sendPasswordResetEmail(d,m){return function Hc(p,u,d){return uE.apply(this,arguments)}(this._delegate,d,m||void 0)}setPersistence(d){var m=this;return(0,D.A)(function*(){let E;switch(function eC(p,u){Vu(Object.values(Si).includes(u),p,"invalid-persistence-type"),(0,ee.lV)()?Vu(u!==Si.SESSION,p,"unsupported-persistence-type"):(0,ee.Ll)()?Vu(u===Si.NONE,p,"unsupported-persistence-type"):JE()?Vu(u===Si.NONE||u===Si.LOCAL&&(0,ee.zW)(),p,"unsupported-persistence-type"):Vu(u===Si.NONE||nA(),p,"unsupported-persistence-type")}(m._delegate,d),d){case Si.SESSION:E=Qo;break;case Si.LOCAL:E=(yield bt(Kc)._isAvailable())?Kc:qc;break;case Si.NONE:E=mn;break;default:return Ht("argument-error",{appName:m._delegate.name})}return m._delegate.setPersistence(E)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return Pi(this._delegate,function g0(p){return wg.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return Pi(this._delegate,Pg(this._delegate,d))}signInWithCustomToken(d){return Pi(this._delegate,function _k(p,u){return fh.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,m){return Pi(this._delegate,function nt(p,u,d){return(0,ke._isFirebaseServerApp)(p.app)?Promise.reject(tt(p)):Pg((0,ee.Ku)(p),Cg.credential(u,d)).catch(function(){var m=(0,D.A)(function*(E){throw"auth/password-does-not-meet-requirements"===E.code&&ph(p),E});return function(E){return m.apply(this,arguments)}}())}(this._delegate,d,m))}signInWithEmailLink(d,m){return Pi(this._delegate,function E0(p,u,d){return pE.apply(this,arguments)}(this._delegate,d,m))}signInWithPhoneNumber(d,m){return ec(this._delegate,function jt(p,u,d){return fo.apply(this,arguments)}(this._delegate,d,m))}signInWithPopup(d){var m=this;return(0,D.A)(function*(){return tc(ZE(),m._delegate,"operation-not-supported-in-this-environment"),Pi(m._delegate,function Do(p,u,d){return jg.apply(this,arguments)}(m._delegate,d,Ss))})()}signInWithRedirect(d){var m=this;return(0,D.A)(function*(){return tc(ZE(),m._delegate,"operation-not-supported-in-this-environment"),yield $h(m._delegate),vt(m._delegate,d,Ss)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function Mg(p,u){return fE.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return p.Persistence=Si,p})();function Yi(p,u,d){let m=p;"function"!=typeof p&&({next:m,error:u,complete:d}=p);const E=m;return{next:O=>E(O&&Ps.getOrCreate(O)),error:u,complete:d}}function rC(p,u){const d=function dm(p,u){const d=tC();if(!d)return[];const m=Mr(XE,p,u);switch(d.getItem(m)){case Si.NONE:return[mn];case Si.LOCAL:return[Kc,Qo];case Si.SESSION:return[Qo];default:return[]}}(p,u);if(typeof self<"u"&&!d.includes(Kc)&&d.push(Kc),typeof window<"u")for(const m of[qc,Qo])d.includes(m)||d.push(m);return d.includes(mn)||d.push(mn),d}class pm{constructor(){this.providerId="phone",this._delegate=new Jc(hm(je.A.auth()))}static credential(u,d){return Jc.credential(u,d)}verifyPhoneNumber(u,d){return this._delegate.verifyPhoneNumber(u,d)}unwrap(){return this._delegate}}pm.PHONE_SIGN_IN_METHOD=Jc.PHONE_SIGN_IN_METHOD,pm.PROVIDER_ID=Jc.PROVIDER_ID;const iC=me;class Bu{constructor(u,d,m=je.A.app()){var E;iC(null===(E=m.options)||void 0===E?void 0:E.apiKey,"invalid-api-key",{appName:m.name}),this._delegate=new Rk(m.auth(),u,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Hh(p){p.INTERNAL.registerComponent(new Zn.uA("auth-compat",u=>{const d=u.getProvider("app-compat").getImmediate(),m=u.getProvider("auth");return new nC(d,m)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Cg,FacebookAuthProvider:h0,GithubAuthProvider:f0,GoogleAuthProvider:Xv,OAuthProvider:Bc,SAMLAuthProvider:hh,PhoneAuthProvider:pm,PhoneMultiFactorGenerator:Qe,RecaptchaVerifier:Bu,TwitterAuthProvider:p0,Auth:nC,AuthCredential:za,Error:ee.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),p.registerVersion("@firebase/auth-compat","0.5.11")}(je.A)},467:(gs,Ur,dt)=>{function D(ke,ee,pn,He,Zn,Br,Jt){try{var pe=ke[Br](Jt),Ee=pe.value}catch(ze){return void pn(ze)}pe.done?ee(Ee):Promise.resolve(Ee).then(He,Zn)}function je(ke){return function(){var ee=this,pn=arguments;return new Promise(function(He,Zn){var Br=ke.apply(ee,pn);function Jt(Ee){D(Br,He,Zn,Jt,pe,"next",Ee)}function pe(Ee){D(Br,He,Zn,Jt,pe,"throw",Ee)}Jt(void 0)})}}dt.d(Ur,{A:()=>je})},1635:(gs,Ur,dt)=>{function ee(K,X){var ue={};for(var de in K)Object.prototype.hasOwnProperty.call(K,de)&&X.indexOf(de)<0&&(ue[de]=K[de]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var Te=0;for(de=Object.getOwnPropertySymbols(K);Te<de.length;Te++)X.indexOf(de[Te])<0&&Object.prototype.propertyIsEnumerable.call(K,de[Te])&&(ue[de[Te]]=K[de[Te]])}return ue}function ze(K,X,ue,de){return new(ue||(ue=Promise))(function(he,Ne){function Nt(xt){try{Je(de.next(xt))}catch(gn){Ne(gn)}}function er(xt){try{Je(de.throw(xt))}catch(gn){Ne(gn)}}function Je(xt){xt.done?he(xt.value):function Te(he){return he instanceof ue?he:new ue(function(Ne){Ne(he)})}(xt.value).then(Nt,er)}Je((de=de.apply(K,X||[])).next())})}function Cn(K){return this instanceof Cn?(this.v=K,this):new Cn(K)}function Ht(K,X,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te,de=ue.apply(K,X||[]),he=[];return Te={},Nt("next"),Nt("throw"),Nt("return",function Ne(Gt){return function(tr){return Promise.resolve(tr).then(Gt,gn)}}),Te[Symbol.asyncIterator]=function(){return this},Te;function Nt(Gt,tr){de[Gt]&&(Te[Gt]=function(An){return new Promise(function(Wt,ai){he.push([Gt,An,Wt,ai])>1||er(Gt,An)})},tr&&(Te[Gt]=tr(Te[Gt])))}function er(Gt,tr){try{!function Je(Gt){Gt.value instanceof Cn?Promise.resolve(Gt.value.v).then(xt,gn):Mt(he[0][2],Gt)}(de[Gt](tr))}catch(An){Mt(he[0][3],An)}}function xt(Gt){er("next",Gt)}function gn(Gt){er("throw",Gt)}function Mt(Gt,tr){Gt(tr),he.shift(),he.length&&er(he[0][0],he[0][1])}}function yi(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,X=K[Symbol.asyncIterator];return X?X.call(K):(K=function Zt(K){var X="function"==typeof Symbol&&Symbol.iterator,ue=X&&K[X],de=0;if(ue)return ue.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&de>=K.length&&(K=void 0),{value:K&&K[de++],done:!K}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),ue={},de("next"),de("throw"),de("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function de(he){ue[he]=K[he]&&function(Ne){return new Promise(function(Nt,er){!function Te(he,Ne,Nt,er){Promise.resolve(er).then(function(Je){he({value:Je,done:Nt})},Ne)}(Nt,er,(Ne=K[he](Ne)).done,Ne.value)})}}}dt.d(Ur,{AQ:()=>Ht,N3:()=>Cn,Tt:()=>ee,sH:()=>ze,xN:()=>yi}),"function"==typeof SuppressedError&&SuppressedError}},gs=>{gs(gs.s=3912)}]);