"use strict";(self.webpackChunkmy_angular_website=self.webpackChunkmy_angular_website||[]).push([[792],{1076:(uo,kr,ut)=>{ut.d(kr,{$L:()=>Ye,$g:()=>Sl,A4:()=>me,Am:()=>zo,As:()=>Mt,Bd:()=>fe,Cv:()=>Zn,FA:()=>Oe,Fy:()=>pi,HN:()=>Wr,Hk:()=>Ne,I9:()=>ws,Im:()=>Na,K3:()=>je,KA:()=>Fr,Ku:()=>La,Ll:()=>Nn,OE:()=>br,T9:()=>yn,Uj:()=>Kt,XA:()=>Bt,ZQ:()=>et,bD:()=>mi,cY:()=>jt,dI:()=>is,eX:()=>ae,g:()=>ce,gR:()=>zt,gz:()=>_i,hp:()=>Jc,jZ:()=>jn,kH:()=>Dl,kj:()=>ka,lT:()=>ri,lV:()=>gi,nr:()=>K,oD:()=>Hs,od:()=>qo,p7:()=>Qn,qc:()=>wn,sr:()=>wr,tD:()=>Vi,u:()=>de,vA:()=>Be,yw:()=>ii,zW:()=>X,zw:()=>$e});const D={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Be=function(N,M){if(!N)throw Ne(M)},Ne=function(N){return new Error("Firebase Database ("+D.SDK_VERSION+") INTERNAL ASSERT FAILED: "+N)},ee=function(N){const M=[];let V=0;for(let te=0;te<N.length;te++){let W=N.charCodeAt(te);W<128?M[V++]=W:W<2048?(M[V++]=W>>6|192,M[V++]=63&W|128):55296==(64512&W)&&te+1<N.length&&56320==(64512&N.charCodeAt(te+1))?(W=65536+((1023&W)<<10)+(1023&N.charCodeAt(++te)),M[V++]=W>>18|240,M[V++]=W>>12&63|128,M[V++]=W>>6&63|128,M[V++]=63&W|128):(M[V++]=W>>12|224,M[V++]=W>>6&63|128,M[V++]=63&W|128)}return M},je={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(N,M){if(!Array.isArray(N))throw Error("encodeByteArray takes an array as a parameter");this.init_();const V=M?this.byteToCharMapWebSafe_:this.byteToCharMap_,te=[];for(let W=0;W<N.length;W+=3){const _e=N[W],Fe=W+1<N.length,It=Fe?N[W+1]:0,He=W+2<N.length,pn=He?N[W+2]:0;let yi=(15&It)<<2|pn>>6,Ko=63&pn;He||(Ko=64,Fe||(yi=64)),te.push(V[_e>>2],V[(3&_e)<<4|It>>4],V[yi],V[Ko])}return te.join("")},encodeString(N,M){return this.HAS_NATIVE_SUPPORT&&!M?btoa(N):this.encodeByteArray(ee(N),M)},decodeString(N,M){return this.HAS_NATIVE_SUPPORT&&!M?atob(N):function(N){const M=[];let V=0,te=0;for(;V<N.length;){const W=N[V++];if(W<128)M[te++]=String.fromCharCode(W);else if(W>191&&W<224){const _e=N[V++];M[te++]=String.fromCharCode((31&W)<<6|63&_e)}else if(W>239&&W<365){const He=((7&W)<<18|(63&N[V++])<<12|(63&N[V++])<<6|63&N[V++])-65536;M[te++]=String.fromCharCode(55296+(He>>10)),M[te++]=String.fromCharCode(56320+(1023&He))}else{const _e=N[V++],Fe=N[V++];M[te++]=String.fromCharCode((15&W)<<12|(63&_e)<<6|63&Fe)}}return M.join("")}(this.decodeStringToByteArray(N,M))},decodeStringToByteArray(N,M){this.init_();const V=M?this.charToByteMapWebSafe_:this.charToByteMap_,te=[];for(let W=0;W<N.length;){const _e=V[N.charAt(W++)],It=W<N.length?V[N.charAt(W)]:0;++W;const pn=W<N.length?V[N.charAt(W)]:64;++W;const Ct=W<N.length?V[N.charAt(W)]:64;if(++W,null==_e||null==It||null==pn||null==Ct)throw new Kn;te.push(_e<<2|It>>4),64!==pn&&(te.push(It<<4&240|pn>>2),64!==Ct&&te.push(pn<<6&192|Ct))}return te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let N=0;N<this.ENCODED_VALS.length;N++)this.byteToCharMap_[N]=this.ENCODED_VALS.charAt(N),this.charToByteMap_[this.byteToCharMap_[N]]=N,this.byteToCharMapWebSafe_[N]=this.ENCODED_VALS_WEBSAFE.charAt(N),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[N]]=N,N>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(N)]=N,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(N)]=N)}}};class Kn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fr=function(N){const M=ee(N);return je.encodeByteArray(M,!0)},Kt=function(N){return Fr(N).replace(/\./g,"")},de=function(N){try{return je.decodeString(N,!0)}catch(M){console.error("base64Decode failed: ",M)}return null};function me(N){return $e(void 0,N)}function $e(N,M){if(!(M instanceof Object))return M;switch(M.constructor){case Date:return new Date(M.getTime());case Object:void 0===N&&(N={});break;case Array:N=[];break;default:return M}for(const V in M)!M.hasOwnProperty(V)||!_t(V)||(N[V]=$e(N[V],M[V]));return N}function _t(N){return"__proto__"!==N}const Et=()=>{try{return function Ft(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const N=process.env.__FIREBASE_DEFAULTS__;return N?JSON.parse(N):void 0})()||(()=>{if(typeof document>"u")return;let N;try{N=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const M=N&&de(N[1]);return M&&JSON.parse(M)})()}catch(N){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${N}`)}},yn=()=>{var N;return null===(N=Et())||void 0===N?void 0:N.config},Bt=N=>{var M;return null===(M=Et())||void 0===M?void 0:M[`_${N}`]};class jt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((M,V)=>{this.resolve=M,this.reject=V})}wrapCallback(M){return(V,te)=>{V?this.reject(V):this.resolve(te),"function"==typeof M&&(this.promise.catch(()=>{}),1===M.length?M(V):M(V,te))}}}function pi(N,M){if(N.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const te=M||"demo-project",W=N.iat||0,_e=N.sub||N.user_id;if(!_e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Fe=Object.assign({iss:`https://securetoken.google.com/${te}`,aud:te,iat:W,exp:W+3600,auth_time:W,sub:_e,user_id:_e,firebase:{sign_in_provider:"custom",identities:{}}},N);return[Kt(JSON.stringify({alg:"none",type:"JWT"})),Kt(JSON.stringify(Fe)),""].join(".")}function et(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function jn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())}function Nn(){var N;const M=null===(N=Et())||void 0===N?void 0:N.forceEnvironment;if("node"===M)return!0;if("browser"===M)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function fe(){return typeof window<"u"||Qn()}function Qn(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function wr(){const N="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof N&&void 0!==N.id}function gi(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ri(){const N=et();return N.indexOf("MSIE ")>=0||N.indexOf("Trident/")>=0}function Sl(){return!0===D.NODE_CLIENT||!0===D.NODE_ADMIN}function K(){return!Nn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X(){try{return"object"==typeof indexedDB}catch{return!1}}function ae(){return new Promise((N,M)=>{try{let V=!0;const te="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open(te);W.onsuccess=()=>{W.result.close(),V||self.indexedDB.deleteDatabase(te),N(!0)},W.onupgradeneeded=()=>{V=!1},W.onerror=()=>{var _e;M((null===(_e=W.error)||void 0===_e?void 0:_e.message)||"")}}catch(V){M(V)}})}class ce extends Error{constructor(M,V,te){super(V),this.code=M,this.customData=te,this.name="FirebaseError",Object.setPrototypeOf(this,ce.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oe.prototype.create)}}class Oe{constructor(M,V,te){this.service=M,this.serviceName=V,this.errors=te}create(M,...V){const te=V[0]||{},W=`${this.service}/${M}`,_e=this.errors[M],Fe=_e?function Pt(N,M){return N.replace(Yn,(V,te)=>{const W=M[te];return null!=W?String(W):`<${te}?>`})}(_e,te):"Error";return new ce(W,`${this.serviceName}: ${Fe} (${W}).`,te)}}const Yn=/\{\$([^}]+)}/g;function Ye(N){return JSON.parse(N)}function Mt(N){return JSON.stringify(N)}const fn=function(N){let M={},V={},te={},W="";try{const _e=N.split(".");M=Ye(de(_e[0])||""),V=Ye(de(_e[1])||""),W=_e[2],te=V.d||{},delete V.d}catch{}return{header:M,claims:V,data:te,signature:W}},Zn=function(N){const V=fn(N).claims;return!!V&&"object"==typeof V&&V.hasOwnProperty("iat")},wn=function(N){const M=fn(N).claims;return"object"==typeof M&&!0===M.admin};function zt(N,M){return Object.prototype.hasOwnProperty.call(N,M)}function ii(N,M){if(Object.prototype.hasOwnProperty.call(N,M))return N[M]}function Na(N){for(const M in N)if(Object.prototype.hasOwnProperty.call(N,M))return!1;return!0}function Dl(N,M,V){const te={};for(const W in N)Object.prototype.hasOwnProperty.call(N,W)&&(te[W]=M.call(V,N[W],W,N));return te}function mi(N,M){if(N===M)return!0;const V=Object.keys(N),te=Object.keys(M);for(const W of V){if(!te.includes(W))return!1;const _e=N[W],Fe=M[W];if($s(_e)&&$s(Fe)){if(!mi(_e,Fe))return!1}else if(_e!==Fe)return!1}for(const W of te)if(!V.includes(W))return!1;return!0}function $s(N){return null!==N&&"object"==typeof N}function zo(N){const M=[];for(const[V,te]of Object.entries(N))Array.isArray(te)?te.forEach(W=>{M.push(encodeURIComponent(V)+"="+encodeURIComponent(W))}):M.push(encodeURIComponent(V)+"="+encodeURIComponent(te));return M.length?"&"+M.join("&"):""}function ws(N){const M={};return N.replace(/^\?/,"").split("&").forEach(te=>{if(te){const[W,_e]=te.split("=");M[decodeURIComponent(W)]=decodeURIComponent(_e)}}),M}function Jc(N){const M=N.indexOf("?");if(!M)return"";const V=N.indexOf("#",M);return N.substring(M,V>0?V:void 0)}class _i{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let M=1;M<this.blockSize;++M)this.pad_[M]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(M,V){V||(V=0);const te=this.W_;if("string"==typeof M)for(let Ct=0;Ct<16;Ct++)te[Ct]=M.charCodeAt(V)<<24|M.charCodeAt(V+1)<<16|M.charCodeAt(V+2)<<8|M.charCodeAt(V+3),V+=4;else for(let Ct=0;Ct<16;Ct++)te[Ct]=M[V]<<24|M[V+1]<<16|M[V+2]<<8|M[V+3],V+=4;for(let Ct=16;Ct<80;Ct++){const yi=te[Ct-3]^te[Ct-8]^te[Ct-14]^te[Ct-16];te[Ct]=4294967295&(yi<<1|yi>>>31)}let pn,Ar,W=this.chain_[0],_e=this.chain_[1],Fe=this.chain_[2],It=this.chain_[3],He=this.chain_[4];for(let Ct=0;Ct<80;Ct++){Ct<40?Ct<20?(pn=It^_e&(Fe^It),Ar=1518500249):(pn=_e^Fe^It,Ar=1859775393):Ct<60?(pn=_e&Fe|It&(_e|Fe),Ar=2400959708):(pn=_e^Fe^It,Ar=3395469782);const yi=(W<<5|W>>>27)+pn+He+Ar+te[Ct]&4294967295;He=It,It=Fe,Fe=4294967295&(_e<<30|_e>>>2),_e=W,W=yi}this.chain_[0]=this.chain_[0]+W&4294967295,this.chain_[1]=this.chain_[1]+_e&4294967295,this.chain_[2]=this.chain_[2]+Fe&4294967295,this.chain_[3]=this.chain_[3]+It&4294967295,this.chain_[4]=this.chain_[4]+He&4294967295}update(M,V){if(null==M)return;void 0===V&&(V=M.length);const te=V-this.blockSize;let W=0;const _e=this.buf_;let Fe=this.inbuf_;for(;W<V;){if(0===Fe)for(;W<=te;)this.compress_(M,W),W+=this.blockSize;if("string"==typeof M){for(;W<V;)if(_e[Fe]=M.charCodeAt(W),++Fe,++W,Fe===this.blockSize){this.compress_(_e),Fe=0;break}}else for(;W<V;)if(_e[Fe]=M[W],++Fe,++W,Fe===this.blockSize){this.compress_(_e),Fe=0;break}}this.inbuf_=Fe,this.total_+=V}digest(){const M=[];let V=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let W=this.blockSize-1;W>=56;W--)this.buf_[W]=255&V,V/=256;this.compress_(this.buf_);let te=0;for(let W=0;W<5;W++)for(let _e=24;_e>=0;_e-=8)M[te]=this.chain_[W]>>_e&255,++te;return M}}function Vi(N,M){const V=new Tr(N,M);return V.subscribe.bind(V)}class Tr{constructor(M,V){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=V,this.task.then(()=>{M(this)}).catch(te=>{this.error(te)})}next(M){this.forEachObserver(V=>{V.next(M)})}error(M){this.forEachObserver(V=>{V.error(M)}),this.close(M)}complete(){this.forEachObserver(M=>{M.complete()}),this.close()}subscribe(M,V,te){let W;if(void 0===M&&void 0===V&&void 0===te)throw new Error("Missing Observer.");W=function Bd(N,M){if("object"!=typeof N||null===N)return!1;for(const V of M)if(V in N&&"function"==typeof N[V])return!0;return!1}(M,["next","error","complete"])?M:{next:M,error:V,complete:te},void 0===W.next&&(W.next=rs),void 0===W.error&&(W.error=rs),void 0===W.complete&&(W.complete=rs);const _e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch{}}),this.observers.push(W),_e}unsubscribeOne(M){void 0===this.observers||void 0===this.observers[M]||(delete this.observers[M],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(M){if(!this.finalized)for(let V=0;V<this.observers.length;V++)this.sendOne(V,M)}sendOne(M,V){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[M])try{V(this.observers[M])}catch(te){typeof console<"u"&&console.error&&console.error(te)}})}close(M){this.finalized||(this.finalized=!0,void 0!==M&&(this.finalError=M),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rs(){}const qo=function(N,M,V,te){let W;if(te<M?W="at least "+M:te>V&&(W=0===V?"none":"no more than "+V),W)throw new Error(N+" failed: Was called with "+te+(1===te?" argument.":" arguments.")+" Expects "+W+".")};function is(N,M){return`${N} failed: ${M} argument `}function Hs(N,M,V,te){if((!te||V)&&"function"!=typeof V)throw new Error(is(N,M)+"must be a valid function.")}function Wr(N,M,V,te){if((!te||V)&&("object"!=typeof V||null===V))throw new Error(is(N,M)+"must be a valid context object.")}const ka=function(N){const M=[];let V=0;for(let te=0;te<N.length;te++){let W=N.charCodeAt(te);if(W>=55296&&W<=56319){const _e=W-55296;te++,Be(te<N.length,"Surrogate pair missing trail surrogate."),W=65536+(_e<<10)+(N.charCodeAt(te)-56320)}W<128?M[V++]=W:W<2048?(M[V++]=W>>6|192,M[V++]=63&W|128):W<65536?(M[V++]=W>>12|224,M[V++]=W>>6&63|128,M[V++]=63&W|128):(M[V++]=W>>18|240,M[V++]=W>>12&63|128,M[V++]=W>>6&63|128,M[V++]=63&W|128)}return M},br=function(N){let M=0;for(let V=0;V<N.length;V++){const te=N.charCodeAt(V);te<128?M++:te<2048?M+=2:te>=55296&&te<=56319?(M+=4,V++):M+=3}return M};function La(N){return N&&N._delegate?N._delegate:N}},739:(uo,kr,ut)=>{let Be=null,ee=1;const hn=Symbol("SIGNAL");function je(n){const e=Be;return Be=n,e}function _t(n){if((!jt(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==ee)){if(!n.producerMustRecompute(n)&&!dr(n))return n.dirty=!1,void(n.lastCleanEpoch=ee);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ee}}function dr(n){pi(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(_t(t),r!==t.version))return!0}return!1}function Bt(n,e){if(function et(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),1===n.liveConsumerNode.length&&function jn(n){return void 0!==n.producerNode}(n))for(let r=0;r<n.producerNode.length;r++)Bt(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];pi(i),i.producerIndexOfThis[r]=e}}function jt(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function pi(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let ri=null;function St(n){return"function"==typeof n}function Ht(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Zn=Ht(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function wn(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class zt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(St(r))try{r()}catch(s){e=s instanceof Zn?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Dl(s)}catch(o){e=e??[],o instanceof Zn?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Zn(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Dl(e);else{if(e instanceof zt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&wn(t,e)}remove(e){const{_finalizers:t}=this;t&&wn(t,e),e instanceof zt&&e._removeParent(this)}}zt.EMPTY=(()=>{const n=new zt;return n.closed=!0,n})();const ii=zt.EMPTY;function Na(n){return n instanceof zt||n&&"closed"in n&&St(n.remove)&&St(n.add)&&St(n.unsubscribe)}function Dl(n){St(n)?n():n.unsubscribe()}const mi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},$s={setTimeout(n,e,...t){const{delegate:r}=$s;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=$s;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function xa(n){$s.setTimeout(()=>{const{onUnhandledError:e}=mi;if(!e)throw n;e(n)})}function zo(){}const ws=Vi("C",void 0,void 0);function Vi(n,e,t){return{kind:n,value:e,error:t}}let Tr=null;function Ui(n){if(mi.useDeprecatedSynchronousErrorHandling){const e=!Tr;if(e&&(Tr={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Tr;if(Tr=null,t)throw r}}else n()}class rs extends zt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Na(e)&&e.add(this)):this.destination=Xc}static create(e,t,r){return new Hs(e,t,r)}next(e){this.isStopped?br(function _i(n){return Vi("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?br(function Jc(n){return Vi("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?br(ws,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qo=Function.prototype.bind;function is(n,e){return qo.call(n,e)}class Go{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Wr(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Wr(r)}else Wr(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Wr(t)}}}class Hs extends rs{constructor(e,t,r){let i;if(super(),St(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&mi.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&is(e.next,s),error:e.error&&is(e.error,s),complete:e.complete&&is(e.complete,s)}):i=e}this.destination=new Go(i)}}function Wr(n){mi.useDeprecatedSynchronousErrorHandling?function Bd(n){mi.useDeprecatedSynchronousErrorHandling&&Tr&&(Tr.errorThrown=!0,Tr.error=n)}(n):xa(n)}function br(n,e){const{onStoppedNotification:t}=mi;t&&$s.setTimeout(()=>t(n,e))}const Xc={closed:!0,next:zo,error:function ka(n){throw n},complete:zo},fo="function"==typeof Symbol&&Symbol.observable||"@@observable";function Lr(n){return n}function Pl(n){return 0===n.length?Lr:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let on=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function La(n){return n&&n instanceof rs||function Fa(n){return n&&St(n.next)&&St(n.error)&&St(n.complete)}(n)&&Na(n)}(t)?t:new Hs(t,r,i);return Ui(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=eu(r))((i,s)=>{const o=new Hs({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[fo](){return this}pipe(...t){return Pl(t)(this)}toPromise(t){return new(t=eu(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function eu(n){var e;return null!==(e=n??mi.Promise)&&void 0!==e?e:Promise}const N=Ht(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let M=(()=>{class n extends on{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new V(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new N}next(t){Ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?ii:(this.currentObservers=null,s.push(t),new zt(()=>{this.currentObservers=null,wn(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new on;return t.source=this,t}}return n.create=(e,t)=>new V(e,t),n})();class V extends M{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:ii}}class te extends M{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function W(n){return St(n?.lift)}function _e(n){return e=>{if(W(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fe(n,e,t,r,i){return new It(n,e,t,r,i)}class It extends rs{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function He(n,e){return _e((t,r)=>{let i=0;t.subscribe(Fe(r,s=>{r.next(n.call(e,s,i++))}))})}typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const hg="https://g.co/ng/security#xss";class Q extends Error{constructor(e,t){super(function ja(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function ji(n){return{toString:n}.toString()}const Xo="__parameters__";function kl(n,e,t){return ji(()=>{const r=function au(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,h){const g=l.hasOwnProperty(Xo)?l[Xo]:Object.defineProperty(l,Xo,{value:[]})[Xo];for(;g.length<=h;)g.push(null);return(g[h]=g[h]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const ln=globalThis;function qt(n){for(let e in n)if(n[e]===qt)return e;throw Error("Could not find renamed property on target object.")}function Kv(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Jn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Jn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function fg(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Qb=qt({__forward_ref__:qt});function rn(n){return n.__forward_ref__=rn,n.toString=function(){return Jn(this())},n}function tt(n){return Xd(n)?n():n}function Xd(n){return"function"==typeof n&&n.hasOwnProperty(Qb)&&n.__forward_ref__===rn}function Ve(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function vi(n){return{providers:n.providers||[],imports:n.imports||[]}}function eh(n){return tE(n,mg)||tE(n,eA)}function tE(n,e){return n.hasOwnProperty(e)?n[e]:null}function th(n){return n&&(n.hasOwnProperty(nE)||n.hasOwnProperty(_g))?n[nE]:null}const mg=qt({\u0275prov:qt}),nE=qt({\u0275inj:qt}),eA=qt({ngInjectableDef:qt}),_g=qt({ngInjectorDef:qt});class we{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ve({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function vg(n){return n&&!!n.\u0275providers}const cu=qt({\u0275cmp:qt}),Eg=qt({\u0275dir:qt}),lE=qt({\u0275pipe:qt}),cE=qt({\u0275mod:qt}),yo=qt({\u0275fac:qt}),$a=qt({__NG_ELEMENT_ID__:qt}),nh=qt({__NG_ENV_ID__:qt});function at(n){return"string"==typeof n?n:null==n?"":String(n)}function Ll(n,e){throw new Q(-201,!1)}var wt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(wt||{});let qs;function uE(){return qs}function Ei(n){const e=qs;return qs=n,e}function Vl(n,e,t){const r=eh(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&wt.Optional?null:void 0!==e?e:void Ll()}const uu={},du="__NG_DI_FLAG__",rh="ngTempTokenPath",sA=/\n/gm,Ig="__source";let Ul;function vo(n){const e=Ul;return Ul=n,e}function hu(n,e=wt.Default){if(void 0===Ul)throw new Q(-203,!1);return null===Ul?Vl(n,void 0,e):Ul.get(n,e&wt.Optional?null:void 0,e)}function ge(n,e=wt.Default){return(uE()||hu)(tt(n),e)}function ue(n,e=wt.Default){return ge(n,fu(e))}function fu(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function pu(n){const e=[];for(let t=0;t<n.length;t++){const r=tt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Q(900,!1);let i,s=wt.Default;for(let o=0;o<r.length;o++){const a=r[o],l=wg(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(ge(i,s))}else e.push(ge(r))}return e}function gu(n,e){return n[du]=e,n.prototype[du]=e,n}function wg(n){return n[du]}const sh=gu(kl("Optional"),8),oh=gu(kl("SkipSelf"),4);function Ha(n,e){return n.hasOwnProperty(yo)?n[yo]:null}function Eo(n,e){n.forEach(t=>Array.isArray(t)?Eo(t,e):e(t))}function fE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ah(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function $i(n,e,t){let r=jl(n,e);return r>=0?n[1|r]=t:(r=~r,function pE(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function ch(n,e){const t=jl(n,e);if(t>=0)return n[1|t]}function jl(n,e){return function gE(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const as={},Vt=[],ls=new we(""),mE=new we("",-1),_u=new we("");class uh{get(e,t=uu){if(t===uu){const r=new Error(`NullInjectorError: No provider for ${Jn(e)}!`);throw r.name="NullInjectorError",r}return t}}var $l=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}($l||{}),Ii=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ii||{}),ta=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ta||{});function dA(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function yu(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];na(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Hl(n){return 3===n||4===n||6===n}function na(n){return 64===n.charCodeAt(0)}function za(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||_E(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function _E(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const yE="ng-template";function hA(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==dA(e[i+1].toLowerCase(),t,0))return!0}else if(vu(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&"string"==typeof(s=e[i]);)if(s.toLowerCase()===t)return!0}return!1}function vu(n){return 4===n.type&&n.value!==yE}function vE(n,e,t){return e===(4!==n.type||t?n.value:yE)}function fA(n,e,t){let r=4;const i=n.attrs,s=null!==i?function pA(n){for(let e=0;e<n.length;e++)if(Hl(n[e]))return e;return n.length}(i):0;let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!vE(n,l,t)||""===l&&1===e.length){if(Ts(r))return!1;o=!0}}else if(8&r){if(null===i||!hA(n,i,l,t)){if(Ts(r))return!1;o=!0}}else{const c=e[++a],h=Tg(l,i,vu(n),t);if(-1===h){if(Ts(r))return!1;o=!0;continue}if(""!==c){let g;if(g=h>s?"":i[h+1].toLowerCase(),2&r&&c!==g){if(Ts(r))return!1;o=!0}}}}else{if(!o&&!Ts(r)&&!Ts(l))return!1;if(o&&Ts(l))continue;o=!1,r=l|1&r}}return Ts(r)||o}function Ts(n){return!(1&n)}function Tg(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Ag(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function EE(n,e,t=!1){for(let r=0;r<e.length;r++)if(fA(n,e[r],t))return!0;return!1}function CE(n,e){return n?":not("+e.trim()+")":e}function Eu(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Ts(o)&&(e+=CE(s,i),i=""),r=o,s=s||!Ts(r);t++}return""!==i&&(e+=CE(s,i)),e}function Sr(n){return ji(()=>{const e=hh(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===$l.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ii.Emulated,styles:n.styles||Vt,_:null,schemas:n.schemas||null,tView:null,id:""};IE(t);const r=n.dependencies;return t.directiveDefs=fh(r,!1),t.pipeDefs=fh(r,!0),t.id=function _A(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function Dg(n){return yt(n)||fr(n)}function Pg(n){return null!==n}function cs(n){return ji(()=>({type:n.type,bootstrap:n.bootstrap||Vt,declarations:n.declarations||Vt,imports:n.imports||Vt,exports:n.exports||Vt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function dh(n,e){if(null==n)return as;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let s,o,a=ta.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==ta.None?[r,a]:r,e[s]=o):t[s]=r}return t}function nt(n){return ji(()=>{const e=hh(n);return IE(e),e})}function ai(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function yt(n){return n[cu]||null}function fr(n){return n[Eg]||null}function pr(n){return n[lE]||null}function Kr(n,e){const t=n[cE]||null;if(!t&&!0===e)throw new Error(`Type ${Jn(n)} does not have '\u0275mod' property.`);return t}function hh(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||as,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Vt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:dh(n.inputs,e),outputs:dh(n.outputs),debugInfo:null}}function IE(n){n.features?.forEach(e=>e(n))}function fh(n,e){if(!n)return null;const t=e?pr:Dg;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(Pg)}function ph(...n){return{\u0275providers:Cu(0,n),\u0275fromNgModule:!0}}function Cu(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return Eo(e,o=>{const a=o;ql(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&Rg(i,s),t}function Rg(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];gh(i,s=>{e(s,r)})}}function ql(n,e,t,r){if(!(n=tt(n)))return!1;let i=null,s=th(n);const o=!s&&yt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=th(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)ql(c,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{Eo(s.imports,h=>{ql(h,e,t,r)&&(c||=[],c.push(h))})}finally{}void 0!==c&&Rg(c,e)}if(!a){const c=Ha(i)||(()=>new i);e({provide:i,useFactory:c,deps:Vt},i),e({provide:_u,useValue:i,multi:!0},i),e({provide:ls,useValue:()=>ge(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const c=n;gh(l,h=>{e(h,c)})}}}return i!==n&&void 0!==n.providers}function gh(n,e){for(let t of n)vg(t)&&(t=t.\u0275providers),Array.isArray(t)?gh(t,e):e(t)}const wE=qt({provide:String,useValue:qt});function mh(n){return null!==n&&"object"==typeof n&&wE in n}function Co(n){return"function"==typeof n}const Ng=new we(""),_h={},xg={};let kg;function yh(){return void 0===kg&&(kg=new uh),kg}class Qr{}class Gl extends Qr{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fg(e,o=>this.processProvider(o)),this.records.set(mE,Kl(void 0,this)),i.has("environment")&&this.records.set(Qr,Kl(void 0,this));const s=this.records.get(Ng);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(_u,Vt,wt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=je(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),je(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=vo(this),r=Ei(void 0);try{return e()}finally{vo(t),Ei(r)}}get(e,t=uu,r=wt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(nh))return e[nh](this);r=fu(r);const s=vo(this),o=Ei(void 0);try{if(!(r&wt.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function wA(n){return"function"==typeof n||"object"==typeof n&&n instanceof we}(e)&&eh(e);l=c&&this.injectableDefInScope(c)?Kl(Wl(e),_h):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&wt.Self?yh():this.parent).get(e,t=r&wt.Optional&&t===uu?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[rh]=a[rh]||[]).unshift(Jn(e)),s)throw a;return function hE(n,e,t,r){const i=n[rh];throw e[Ig]&&i.unshift(e[Ig]),n.message=function aA(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Jn(e);if(Array.isArray(e))i=e.map(Jn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Jn(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(sA,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[rh]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Ei(o),vo(s)}}resolveInjectorInitializers(){const e=je(null),t=vo(this),r=Ei(void 0);try{const s=this.get(ls,Vt,wt.Self);for(const o of s)o()}finally{vo(t),Ei(r),je(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Jn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){let t=Co(e=tt(e))?e:tt(e&&e.provide);const r=function EA(n){return mh(n)?Kl(void 0,n.useValue):Kl(bE(n),_h)}(e);if(!Co(e)&&!0===e.multi){let i=this.records.get(t);i||(i=Kl(void 0,_h,!0),i.factory=()=>pu(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){const r=je(null);try{return t.value===_h&&(t.value=xg,t.value=t.factory()),"object"==typeof t.value&&t.value&&function IA(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{je(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=tt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Wl(n){const e=eh(n),t=null!==e?e.factory:Ha(n);if(null!==t)return t;if(n instanceof we)throw new Q(204,!1);if(n instanceof Function)return function vA(n){if(n.length>0)throw new Q(204,!1);const t=function Xb(n){return n&&(n[mg]||n[eA])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Q(204,!1)}function bE(n,e,t){let r;if(Co(n)){const i=tt(n);return Ha(i)||Wl(i)}if(mh(n))r=()=>tt(n.useValue);else if(function Og(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...pu(n.deps||[]));else if(function TE(n){return!(!n||!n.useExisting)}(n))r=()=>ge(tt(n.useExisting));else{const i=tt(n&&(n.useClass||n.provide));if(!function CA(n){return!!n.deps}(n))return Ha(i)||Wl(i);r=()=>new i(...pu(n.deps))}return r}function Kl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Fg(n,e){for(const t of n)Array.isArray(t)?Fg(t,e):t&&vg(t)?Fg(t.\u0275providers,e):e(t)}function Hi(n,e){n instanceof Gl&&n.assertNotDestroyed();const r=vo(n),i=Ei(void 0);try{return e()}finally{vo(r),Ei(i)}}function AE(){return void 0!==uE()||null!=function ih(){return Ul}()}const vn=0,Ee=1,Ke=2,gr=3,zi=4,Dr=5,Pr=6,qa=7,cn=8,ir=9,Gs=10,rt=11,Tu=12,DE=13,Ga=14,bn=15,Yl=16,Zl=17,li=18,Jl=19,PE=20,Ws=21,Eh=22,Io=23,Qe=25,jg=1,Ks=7,ia=9,Xn=10;var Ih=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Ih||{});function Mr(n){return Array.isArray(n)&&"object"==typeof n[jg]}function Yr(n){return Array.isArray(n)&&!0===n[jg]}function $g(n){return!!(4&n.flags)}function sa(n){return n.componentOffset>-1}function Xl(n){return!(1&~n.flags)}function bs(n){return!!n.template}function bu(n){return!!(512&n[Ke])}class xA{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function bh(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}function us(){return wi}function wi(n){return n.type.prototype.ngOnChanges&&(n.setInput=kE),Au}function Au(){const n=Ah(this),e=n?.current;if(e){const t=n.previous;if(t===as)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function kE(n,e,t,r,i){const s=this.declaredInputs[r],o=Ah(n)||function Wg(n,e){return n[FE]=e}(n,{previous:as,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new xA(c&&c.currentValue,t,l===as),bh(n,e,i,t)}us.ngInherit=!0;const FE="__ngSimpleChanges__";function Ah(n){return n[FE]||null}const Qs=function(n,e,t){};function Gt(n){for(;Array.isArray(n);)n=n[vn];return n}function Su(n,e){return Gt(e[n])}function Zr(n,e){return Gt(e[n.index])}function Ka(n,e){return n.data[e]}function oa(n,e){return n[e]}function qi(n,e){const t=e[n];return Mr(t)?t:t[vn]}function Qa(n){return!(128&~n[Ke])}function Gi(n,e){return null==e?null:n[e]}function UE(n){n[Zl]=0}function Zg(n){1024&n[Ke]||(n[Ke]|=1024,Qa(n)&&Sh(n))}function Du(n){return!!(9216&n[Ke]||n[Io]?.dirty)}function Jg(n){n[Gs].changeDetectionScheduler?.notify(7),64&n[Ke]&&(n[Ke]|=1024),Du(n)&&Sh(n)}function Sh(n){n[Gs].changeDetectionScheduler?.notify(0);let e=d(n);for(;null!==e&&!(8192&e[Ke])&&(e[Ke]|=8192,Qa(e));)e=d(e)}function p(n,e){if(!(256&~n[Ke]))throw new Q(911,!1);null===n[Ws]&&(n[Ws]=[]),n[Ws].push(e)}function d(n){const e=n[gr];return Yr(e)?e[gr]:e}const m={lFrame:Ik(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let R=!1;function ke(){return m.bindingsEnabled}function ne(){return m.lFrame.lView}function gt(){return m.lFrame.tView}function Ys(n){return m.lFrame.contextLView=n,n[cn]}function Zs(n){return m.lFrame.contextLView=null,n}function Wt(){let n=em();for(;null!==n&&64===n.type;)n=n.parent;return n}function em(){return m.lFrame.currentTNode}function ds(n,e){const t=m.lFrame;t.currentTNode=n,t.isParent=e}function tm(){return m.lFrame.isParent}function kA(){m.lFrame.isParent=!1}function mk(){return R}function _k(n){R=n}function Wi(){const n=m.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function bo(){return m.lFrame.bindingIndex++}function Za(n){const e=m.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Y5(n,e){const t=m.lFrame;t.bindingIndex=t.bindingRootIndex=n,FA(e)}function FA(n){m.lFrame.currentDirectiveIndex=n}function VA(){return m.lFrame.currentQueryIndex}function HE(n){m.lFrame.currentQueryIndex=n}function J5(n){const e=n[Ee];return 2===e.type?e.declTNode:1===e.type?n[Dr]:null}function Ek(n,e,t){if(t&wt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&wt.Host||(i=J5(s),null===i||(s=s[Ga],10&i.type))););if(null===i)return!1;e=i,n=s}const r=m.lFrame=Ck();return r.currentTNode=e,r.lView=n,!0}function UA(n){const e=Ck(),t=n[Ee];m.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Ck(){const n=m.lFrame,e=null===n?null:n.child;return null===e?Ik(n):e}function Ik(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function wk(){const n=m.lFrame;return m.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Tk=wk;function BA(){const n=wk();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function bi(){return m.lFrame.selectedIndex}function Mu(n){m.lFrame.selectedIndex=n}function An(){const n=m.lFrame;return Ka(n.tView,n.selectedIndex)}let Ak=!0;function nm(){return Ak}function aa(n){Ak=n}function zE(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function qE(n,e,t){Sk(n,e,3,t)}function GE(n,e,t,r){(3&n[Ke])===t&&Sk(n,e,t,r)}function jA(n,e){let t=n[Ke];(3&t)===e&&(t&=16383,t+=1,n[Ke]=t)}function Sk(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[Zl]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[Zl]+=65536),(a<s||-1==s)&&(s8(n,t,e,l),n[Zl]=(4294901760&n[Zl])+l+2),l++}function Dk(n,e){Qs(4,n,e);const t=je(null);try{e.call(n)}finally{je(t),Qs(5,n,e)}}function s8(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[Ke]>>14<n[Zl]>>16&&(3&n[Ke])===e&&(n[Ke]+=16384,Dk(a,s)):Dk(a,s)}const Ph=-1;class rm{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function HA(n){return n!==Ph}function im(n){return 32767&n}function sm(n,e){let t=function u8(n){return n>>16}(n),r=e;for(;t>0;)r=r[Ga],t--;return r}let zA=!0;function WE(n){const e=zA;return zA=n,e}const Pk=255,Mk=5;let d8=0;const la={};function KE(n,e){const t=Rk(n,e);if(-1!==t)return t;const r=e[Ee];r.firstCreatePass&&(n.injectorIndex=e.length,qA(r.data,n),qA(e,null),qA(r.blueprint,null));const i=QE(n,e),s=n.injectorIndex;if(HA(i)){const o=im(i),a=sm(i,e),l=a[Ee].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function qA(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Rk(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function QE(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Vk(i),null===r)return Ph;if(t++,i=i[Ga],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Ph}function GA(n,e,t){!function h8(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty($a)&&(r=t[$a]),null==r&&(r=t[$a]=d8++);const i=r&Pk;e.data[n+(i>>Mk)]|=1<<i}(n,e,t)}function Ok(n,e,t){if(t&wt.Optional||void 0!==n)return n;Ll()}function Nk(n,e,t,r){if(t&wt.Optional&&void 0===r&&(r=null),!(t&(wt.Self|wt.Host))){const i=n[ir],s=Ei(void 0);try{return i?i.get(e,r,t&wt.Optional):Vl(e,r,t&wt.Optional)}finally{Ei(s)}}return Ok(r,0,t)}function xk(n,e,t,r=wt.Default,i){if(null!==n){if(2048&e[Ke]&&!(r&wt.Self)){const o=function _8(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Ke]&&!(512&o[Ke]);){const a=kk(s,o,t,r|wt.Self,la);if(a!==la)return a;let l=s.parent;if(!l){const c=o[PE];if(c){const h=c.get(t,la,r);if(h!==la)return h}l=Vk(o),o=o[Ga]}s=l}return i}(n,e,t,r,la);if(o!==la)return o}const s=kk(n,e,t,r,la);if(s!==la)return s}return Nk(e,t,r,i)}function kk(n,e,t,r,i){const s=function g8(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty($a)?n[$a]:void 0;return"number"==typeof e?e>=0?e&Pk:m8:e}(t);if("function"==typeof s){if(!Ek(e,n,r))return r&wt.Host?Ok(i,0,r):Nk(e,t,r,i);try{let o;if(o=s(r),null!=o||r&wt.Optional)return o;Ll()}finally{Tk()}}else if("number"==typeof s){let o=null,a=Rk(n,e),l=Ph,c=r&wt.Host?e[bn][Dr]:null;for((-1===a||r&wt.SkipSelf)&&(l=-1===a?QE(n,e):e[a+8],l!==Ph&&Lk(r,!1)?(o=e[Ee],a=im(l),e=sm(l,e)):a=-1);-1!==a;){const h=e[Ee];if(Fk(s,a,h.data)){const g=p8(a,e,t,o,r,c);if(g!==la)return g}l=e[a+8],l!==Ph&&Lk(r,e[Ee].data[a+8]===c)&&Fk(s,a,e)?(o=h,a=im(l),e=sm(l,e)):a=-1}}return i}function p8(n,e,t,r,i,s){const o=e[Ee],a=o.data[n+8],h=YE(a,o,t,null==r?sa(a)&&zA:r!=o&&!!(3&a.type),i&wt.Host&&s===a);return null!==h?Ru(e,o,h,a):la}function YE(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,h=s>>20,_=i?a+h:n.directiveEnd;for(let E=r?a:a+h;E<_;E++){const I=o[E];if(E<l&&t===I||E>=l&&I.type===t)return E}if(i){const E=o[l];if(E&&bs(E)&&E.type===t)return l}return null}function Ru(n,e,t,r){let i=n[t];const s=e.data;if(function o8(n){return n instanceof rm}(i)){const o=i;o.resolving&&function iA(n,e){throw e&&e.join(" > "),new Q(-200,n)}(function Nt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():at(n)}(s[t]));const a=WE(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Ei(o.injectImpl):null;Ek(n,r,wt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function i8(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=wi(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==c&&Ei(c),WE(a),o.resolving=!1,Tk()}}return i}function Fk(n,e,t){return!!(t[e+(n>>Mk)]&1<<n)}function Lk(n,e){return!(n&wt.Self||n&wt.Host&&e)}class Vr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return xk(this._tNode,this._lView,e,fu(r),t)}}function m8(){return new Vr(Wt(),ne())}function Jr(n){return ji(()=>{const e=n.prototype.constructor,t=e[yo]||WA(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[yo]||WA(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function WA(n){return Xd(n)?()=>{const e=WA(tt(n));return e&&e()}:Ha(n)}function Vk(n){const e=n[Ee],t=e.type;return 2===t?e.declTNode:1===t?n[Dr]:null}function Hk(n,e=null,t=null,r){const i=zk(n,e,t,r);return i.resolveInjectorInitializers(),i}function zk(n,e=null,t=null,r,i=new Set){const s=[t||Vt,ph(n)];return r=r||("object"==typeof n?void 0:Jn(n)),new Gl(s,e||yh(),r||null,i)}class Rr{static#e=this.THROW_IF_NOT_FOUND=uu;static#t=this.NULL=new uh;static create(e,t){if(Array.isArray(e))return Hk({name:""},t,e,"");{const r=e.name??"";return Hk({name:r},e.parent,e.providers,r)}}static#n=this.\u0275prov=Ve({token:Rr,providedIn:"any",factory:()=>ge(mE)});static#r=this.__NG_ELEMENT_ID__=-1}new we("").__NG_ELEMENT_ID__=n=>{const e=Wt();if(null===e)throw new Q(204,!1);if(2&e.type)return e.value;if(n&wt.Optional)return null;throw new Q(204,!1)};function QA(n){return n.ngOriginalError}class Js{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&QA(e);for(;t&&QA(t);)t=QA(t);return t||null}}const Gk=new we("",{providedIn:"root",factory:()=>ue(Js).handleError.bind(void 0)});let Oh=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=S8;static#t=this.__NG_ENV_ID__=t=>t}return n})();class A8 extends Oh{constructor(e){super(),this._lView=e}onDestroy(e){return p(this._lView,e),()=>function u(n,e){if(null===n[Ws])return;const t=n[Ws].indexOf(e);-1!==t&&n[Ws].splice(t,1)}(this._lView,e)}}function S8(){return new A8(ne())}function D8(){return Nh(Wt(),ne())}function Nh(n,e){return new Ss(Zr(n,e))}let Ss=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=D8}return n})();function Kk(n){return n instanceof Ss?n.nativeElement:n}function YA(n){return e=>{setTimeout(n,void 0,e)}}const sr=class P8 extends M{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,AE()&&(this.destroyRef=ue(Oh,{optional:!0})??void 0)}emit(e){const t=je(null);try{super.next(e)}finally{je(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=YA(s),i&&(i=YA(i)),o&&(o=YA(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof zt&&e.add(a),a}};function M8(){return this._results[Symbol.iterator]()}class ZA{static#e=Symbol.iterator;get changes(){return this._changes??=new sr}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=ZA.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=M8)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const r=function Ci(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function uA(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function JE(n){return!(128&~n.flags)}const JA=new Map;let O8=0;const eC="__ngContext__";function Ai(n,e){Mr(e)?(n[eC]=e[Jl],function x8(n){JA.set(n[Jl],n)}(e)):n[eC]=e}function i1(n){return o1(n[Tu])}function s1(n){return o1(n[zi])}function o1(n){for(;null!==n&&!Yr(n);)n=n[zi];return n}let e0;const lm=new we("",{providedIn:"root",factory:()=>J8}),J8="ng",p1=new we(""),Ao=new we("",{providedIn:"platform",factory:()=>"unknown"}),g1=new we(""),m1=new we("",{providedIn:"root",factory:()=>function ec(){if(void 0!==e0)return e0;if(typeof document<"u")return document;throw new Q(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let _1=()=>null;function l0(n,e,t=!1){return _1(n,e,t)}const b1=new we("",{providedIn:"root",factory:()=>!1});let cC;function M1(n){return function p0(){if(void 0===cC&&(cC=null,ln.trustedTypes))try{cC=ln.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return cC}()?.createScriptURL(n)||n}class R1{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hg})`}}function tc(n){return n instanceof R1?n.changingThisBreaksApplicationSecurity:n}function gm(n,e){const t=function y6(n){return n instanceof R1&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${hg})`)}return t===e}const I6=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Vh=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Vh||{});function _m(n){const e=ym();return e?e.sanitize(Vh.URL,n)||"":gm(n,"URL")?tc(n):function g0(n){return(n=String(n)).match(I6)?n:"unsafe:"+n}(at(n))}function B1(n){const e=ym();if(e)return M1(e.sanitize(Vh.RESOURCE_URL,n)||"");if(gm(n,"ResourceURL"))return M1(tc(n));throw new Q(904,!1)}function ym(){const n=ne();return n&&n[Gs].sanitizer}const V6=/^>|^->|<!--|-->|--!>|<!-$/g,U6=/(<|>)/g,B6="\u200b$1\u200b";function q1(n){return n.ownerDocument.defaultView}function Ds(n){return n instanceof Function?n():n}var nc=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(nc||{});let I0;function w0(n,e){return I0(n,e)}function Bh(n,e,t,r,i){if(null!=r){let s,o=!1;Yr(r)?s=r:Mr(r)&&(o=!0,r=r[vn]);const a=Gt(r);0===n&&null!==t?null==i?eF(e,t,a):Ou(e,t,a,i||null,!0):1===n&&null!==t?Ou(e,t,a,i||null,!0):2===n?function Cm(n,e,t){const r=gC(n,e);r&&function rK(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function oK(n,e,t,r,i){const s=t[Ks];s!==Gt(t)&&Bh(e,n,r,s,i);for(let a=Xn;a<t.length;a++){const l=t[a];_C(l[Ee],l,n,e,r,s)}}(e,n,s,t,i)}}function b0(n,e){return n.createComment(function $1(n){return n.replace(V6,e=>e.replace(U6,B6))}(e))}function fC(n,e,t){return n.createElement(e,t)}function Z1(n,e){e[Gs].changeDetectionScheduler?.notify(8),_C(n,e,e[rt],2,null,null)}function J1(n,e){const t=n[ia],r=e[gr];(Mr(r)||e[bn]!==r[gr][bn])&&(n[Ke]|=Ih.HasTransplantedViews),null===t?n[ia]=[e]:t.push(e)}function A0(n,e){const t=n[ia],r=t.indexOf(e);t.splice(r,1)}function vm(n,e){if(n.length<=Xn)return;const t=Xn+e,r=n[t];if(r){const i=r[Yl];null!==i&&i!==n&&A0(i,r),e>0&&(n[t-1][zi]=r[zi]);const s=ah(n,Xn+e);!function Z6(n,e){Z1(n,e),e[vn]=null,e[Dr]=null}(r[Ee],r);const o=s[li];null!==o&&o.detachView(s[Ee]),r[gr]=null,r[zi]=null,r[Ke]&=-129}return r}function pC(n,e){if(!(256&e[Ke])){const t=e[rt];t.destroyNode&&_C(n,e,t,3,null,null),function X6(n){let e=n[Tu];if(!e)return S0(n[Ee],n);for(;e;){let t=null;if(Mr(e))t=e[Tu];else{const r=e[Xn];r&&(t=r)}if(!t){for(;e&&!e[zi]&&e!==n;)Mr(e)&&S0(e[Ee],e),e=e[gr];null===e&&(e=n),Mr(e)&&S0(e[Ee],e),t=e&&e[zi]}e=t}}(e)}}function S0(n,e){if(256&e[Ke])return;const t=je(null);try{e[Ke]&=-129,e[Ke]|=256,e[Io]&&function Gr(n){if(pi(n),jt(n))for(let e=0;e<n.producerNode.length;e++)Bt(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}(e[Io]),function nK(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof rm)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];Qs(4,a,l);try{l.call(a)}finally{Qs(5,a,l)}}else{Qs(4,i,s);try{s.call(i)}finally{Qs(5,i,s)}}}}}(n,e),function tK(n,e){const t=n.cleanup,r=e[qa];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[qa]=null);const i=e[Ws];if(null!==i){e[Ws]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Ee].type&&e[rt].destroy();const r=e[Yl];if(null!==r&&Yr(e[gr])){r!==e[gr]&&A0(r,e);const i=e[li];null!==i&&i.detachView(n)}!function k8(n){JA.delete(n[Jl])}(e)}finally{je(t)}}function D0(n,e,t){return function X1(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[vn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Ii.None||s===Ii.Emulated)return null}return Zr(r,t)}}(n,e.parent,t)}function Ou(n,e,t,r,i){n.insertBefore(e,t,r,i)}function eF(n,e,t){n.appendChild(e,t)}function tF(n,e,t,r,i){null!==r?Ou(n,e,t,r,i):eF(n,e,t)}function gC(n,e){return n.parentNode(e)}let P0,iF=function rF(n,e,t){return 40&n.type?Zr(n,t):null};function mC(n,e,t,r){const i=D0(n,r,e),s=e[rt],a=function nF(n,e,t){return iF(n,e,t)}(r.parent||e[Dr],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)tF(s,i,t[l],a,!1);else tF(s,i,t,a,!1);void 0!==P0&&P0(s,r,e,t,i)}function Em(n,e){if(null!==e){const t=e.type;if(3&t)return Zr(e,n);if(4&t)return M0(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Em(n,r);{const i=n[e.index];return Yr(i)?M0(-1,i):Gt(i)}}if(32&t)return w0(e,n)()||Gt(n[e.index]);{const r=oF(n,e);return null!==r?Array.isArray(r)?r[0]:Em(d(n[bn]),r):Em(n,e.next)}}return null}function oF(n,e){return null!==e?n[bn][Dr].projection[e.projection]:null}function M0(n,e){const t=Xn+n+1;if(t<e.length){const r=e[t],i=r[Ee].firstChild;if(null!==i)return Em(r,i)}return e[Ks]}function R0(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&Ai(Gt(a),r),t.flags|=2),32&~t.flags)if(8&l)R0(n,e,t.child,r,i,s,!1),Bh(e,n,i,a,s);else if(32&l){const c=w0(t,r);let h;for(;h=c();)Bh(e,n,i,h,s);Bh(e,n,i,a,s)}else 16&l?lF(n,e,r,t,i,s):Bh(e,n,i,a,s);t=o?t.projectionNext:t.next}}function _C(n,e,t,r,i,s){R0(t,r,n.firstChild,e,i,s,!1)}function lF(n,e,t,r,i,s){const o=t[bn],l=o[Dr].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Bh(e,n,i,l[c],s);else{let c=l;const h=o[gr];JE(r)&&(c.flags|=128),R0(n,e,c,h,i,s,!0)}}function cF(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function uF(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&yu(n,e,r),null!==i&&cF(n,e,i),null!==s&&function lK(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}const dt={};function st(n=1){dF(gt(),ne(),bi()+n,!1)}function dF(n,e,t,r){if(!r)if(3&~e[Ke]){const s=n.preOrderHooks;null!==s&&GE(e,s,0,t)}else{const s=n.preOrderCheckHooks;null!==s&&qE(e,s,t)}Mu(t)}function ye(n,e=wt.Default){const t=ne();return null===t?ge(n,e):xk(Wt(),t,tt(n),e)}function fF(n,e,t,r,i,s){const o=je(null);try{let a=null;i&ta.SignalBased&&(a=e[r][hn]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),i&ta.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),null!==n.setInput?n.setInput(e,a,s,t,r):bh(e,a,r,s)}finally{je(o)}}function yC(n,e,t,r,i,s,o,a,l,c,h){const g=e.blueprint.slice();return g[vn]=i,g[Ke]=204|r,(null!==c||n&&2048&n[Ke])&&(g[Ke]|=2048),UE(g),g[gr]=g[Ga]=n,g[cn]=t,g[Gs]=o||n&&n[Gs],g[rt]=a||n&&n[rt],g[ir]=l||n&&n[ir]||null,g[Dr]=s,g[Jl]=function N8(){return O8++}(),g[Pr]=h,g[PE]=c,g[bn]=2==e.type?n[bn]:g,g}function jh(n,e,t,r,i){let s=n.data[e];if(null===s)s=function O0(n,e,t,r,i){const s=em(),o=tm(),l=n.data[e]=function mK(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Xt(){return null!==m.skipHydrationRootTNode}()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,r,i),function Q5(){return m.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Pu(){const n=m.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ds(s,!0),s}function Im(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function pF(n,e,t,r,i){const s=bi(),o=2&r;try{Mu(-1),o&&e.length>Qe&&dF(n,e,Qe,!1),Qs(o?2:0,i),t(r,i)}finally{Mu(s),Qs(o?3:1,i)}}function N0(n,e,t){if($g(e)){const r=je(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{je(r)}}}function x0(n,e,t){ke()&&(function wK(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;sa(t)&&function MK(n,e,t){const r=Zr(e,n),i=gF(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=vC(n,yC(n,i,null,o,r,e,null,n[Gs].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||KE(t,e),Ai(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=Ru(e,n,a,t);Ai(c,e),null!==o&&RK(0,a-i,c,l,0,o),bs(l)&&(qi(t.index,e)[cn]=Ru(e,n,a,t))}}(n,e,t,Zr(t,e)),!(64&~t.flags)&&EF(n,e,t))}function k0(n,e,t=Zr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function gF(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=F0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function F0(n,e,t,r,i,s,o,a,l,c,h){const g=Qe+r,_=g+i,E=function uK(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:dt);return t}(g,_),I="function"==typeof c?c():c;return E[Ee]={type:n,blueprint:E,template:t,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,g),bindingStartIndex:g,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:I,incompleteFirstPass:!1,ssrId:h}}let mF=()=>null;function _F(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;r??={};let a,l=ta.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=s;if(null!==i){if(!i.hasOwnProperty(s))continue;c=i[s]}0===n?yF(r,t,c,a,l):yF(r,t,c,a)}return r}function yF(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],void 0!==i&&s.push(i)}function fs(n,e,t,r,i,s,o,a){const l=Zr(e,t);let h,c=e.inputs;!a&&null!=c&&(h=c[r])?(j0(n,t,h,r,i),sa(e)&&function vK(n,e){const t=qi(e,n);16&t[Ke]||(t[Ke]|=64)}(t,e.index)):3&e.type&&(r=function yK(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(l,r,i))}function L0(n,e,t,r){if(ke()){const i=null===r?null:{"":-1},s=function bK(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(EE(e,o.selectors,!1))if(r||(r=[]),bs(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),V0(n,e,a.length)}else r.unshift(o),V0(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&vF(n,e,t,o,i,a),i&&function AK(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new Q(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=za(t.mergedAttrs,t.attrs)}function vF(n,e,t,r,i,s){for(let c=0;c<r.length;c++)GA(KE(t,e),n,r[c].type);!function DK(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const h=r[c];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,l=Im(n,e,r.length,null);for(let c=0;c<r.length;c++){const h=r[c];t.mergedAttrs=za(t.mergedAttrs,h.hostAttrs),PK(n,t,e,l,h),SK(l,h,i),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const g=h.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function _K(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let h=e.directiveStart;h<i;h++){const g=s[h],_=t?t.get(g):null,I=_?_.outputs:null;l=_F(0,g.inputs,h,l,_?_.inputs:null),c=_F(1,g.outputs,h,c,I);const T=null===l||null===o||vu(e)?null:OK(l,h,o);a.push(T)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function EF(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function Z5(){return m.lFrame.currentDirectiveIndex}();try{Mu(s);for(let a=r;a<i;a++){const l=n.data[a],c=e[a];FA(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&TK(l,c)}}finally{Mu(-1),FA(o)}}function TK(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function V0(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function SK(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;bs(e)&&(t[""]=n)}}function PK(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Ha(i.type)),o=new rm(s,bs(i),ye);n.blueprint[r]=o,t[r]=o,function CK(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function IK(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Im(n,t,i.hostVars,dt),i)}function ca(n,e,t,r,i,s){const o=Zr(n,e);!function U0(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?at(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[rt],o,s,n.value,t,r,i)}function RK(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)fF(r,t,o[a++],o[a++],o[a++],o[a++])}function OK(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function CF(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function IF(n,e){const t=n.contentQueries;if(null!==t){const r=je(null);try{for(let i=0;i<t.length;i+=2){const o=t[i+1];if(-1!==o){const a=n.data[o];HE(t[i]),a.contentQueries(2,e[o],o)}}}finally{je(r)}}}function vC(n,e){return n[Tu]?n[DE][zi]=e:n[Tu]=e,n[DE]=e,e}function B0(n,e,t){HE(0);const r=je(null);try{e(n,t)}finally{je(r)}}function wF(n){return n[qa]??=[]}function TF(n){return n.cleanup??=[]}function EC(n,e){const t=n[ir],r=t?t.get(Js,null):null;r&&r.handleError(e)}function j0(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=t[s++];fF(n.data[o],e[o],r,a,l,i)}}function Xa(n,e,t){const r=Su(e,n);!function Y1(n,e,t){n.setValue(e,t)}(n[rt],r,t)}function NK(n,e){const t=qi(e,n),r=t[Ee];!function xK(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[vn];null!==i&&null===t[Pr]&&(t[Pr]=l0(i,t[ir])),$0(r,t,t[cn])}function $0(n,e,t){UA(e);try{const r=n.viewQuery;null!==r&&B0(1,r,t);const i=n.template;null!==i&&pF(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[li]?.finishViewCreation(n),n.staticContentQueries&&IF(n,e),n.staticViewQueries&&B0(2,n.viewQuery,t);const s=n.components;null!==s&&function kK(n,e){for(let t=0;t<e.length;t++)NK(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ke]&=-5,BA()}}function Nu(n,e){return!e||null===e.firstChild||JE(n)}function wm(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Gt(s)),Yr(s)&&SF(s,r);const o=t.type;if(8&o)wm(n,e,t.child,r);else if(32&o){const a=w0(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=oF(e,t);if(Array.isArray(a))r.push(...a);else{const l=d(e[bn]);wm(l[Ee],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function SF(n,e){for(let t=Xn;t<n.length;t++){const r=n[t],i=r[Ee].firstChild;null!==i&&wm(r[Ee],r,i,e)}n[Ks]!==n[vn]&&e.push(n[Ks])}let DF=[];const UK={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Sh(n.lView)},consumerOnSignalRead(){this.lView[Io]=this}},BK=100;function CC(n,e=!0,t=0){const r=n[Gs],i=r.rendererFactory;i.begin?.();try{!function jK(n,e){const t=mk();try{_k(!0),z0(n,e);let r=0;for(;Du(n);){if(r===BK)throw new Q(103,!1);r++,z0(n,1)}}finally{_k(t)}}(n,t)}catch(o){throw e&&EC(n,o),o}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function $K(n,e,t,r){const i=e[Ke];if(!(256&~i))return;e[Gs].inlineEffectRunner?.flush(),UA(e);let a=null,l=null;(function HK(n){return 2!==n.type})(n)&&(l=function FK(n){return n[Io]??function LK(n){const e=DF.pop()??Object.create(UK);return e.lView=n,e}(n)}(e),a=function ht(n){return n&&(n.nextProducerIndex=0),je(n)}(l));try{UE(e),function yk(n){return m.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&pF(n,e,t,2,r);const c=!(3&~i);if(c){const _=n.preOrderCheckHooks;null!==_&&qE(e,_,null)}else{const _=n.preOrderHooks;null!==_&&GE(e,_,0,null),jA(e,0)}if(function zK(n){for(let e=i1(n);null!==e;e=s1(e)){if(!(e[Ke]&Ih.HasTransplantedViews))continue;const t=e[ia];for(let r=0;r<t.length;r++)Zg(t[r])}}(e),MF(e,0),null!==n.contentQueries&&IF(n,e),c){const _=n.contentCheckHooks;null!==_&&qE(e,_)}else{const _=n.contentHooks;null!==_&&GE(e,_,1),jA(e,1)}!function cK(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Mu(~i);else{const s=i,o=t[++r],a=t[++r];Y5(o,s),a(2,e[s])}}}finally{Mu(-1)}}(n,e);const h=n.components;null!==h&&OF(e,h,0);const g=n.viewQuery;if(null!==g&&B0(2,g,r),c){const _=n.viewCheckHooks;null!==_&&qE(e,_)}else{const _=n.viewHooks;null!==_&&GE(e,_,2),jA(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Eh]){for(const _ of e[Eh])_();e[Eh]=null}e[Ke]&=-73}catch(c){throw Sh(e),c}finally{null!==l&&(function Et(n,e){if(je(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(jt(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Bt(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}(l,a),function VK(n){n.lView[Io]!==n&&(n.lView=null,DF.push(n))}(l)),BA()}}function MF(n,e){for(let t=i1(n);null!==t;t=s1(t))for(let r=Xn;r<t.length;r++)RF(t[r],e)}function qK(n,e,t){RF(qi(e,n),t)}function RF(n,e){Qa(n)&&z0(n,e)}function z0(n,e){const r=n[Ee],i=n[Ke],s=n[Io];let o=!!(0===e&&16&i);if(o||=!!(64&i&&0===e),o||=!!(1024&i),o||=!(!s?.dirty||!dr(s)),o||=!1,s&&(s.dirty=!1),n[Ke]&=-9217,o)$K(r,n,r.template,n[cn]);else if(8192&i){MF(n,1);const a=r.components;null!==a&&OF(n,a,1)}}function OF(n,e,t){for(let r=0;r<e.length;r++)qK(n,e[r],t)}function Tm(n,e){const t=mk()?64:1088;for(n[Gs].changeDetectionScheduler?.notify(e);n;){n[Ke]|=t;const r=d(n);if(bu(n)&&!r)return n;n=r}return null}class bm{get rootNodes(){const e=this._lView,t=e[Ee];return wm(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[cn]}set context(e){this._lView[cn]=e}get destroyed(){return!(256&~this._lView[Ke])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[gr];if(Yr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(vm(e,r),ah(t,r))}this._attachedToViewContainer=!1}pC(this._lView[Ee],this._lView)}onDestroy(e){p(this._lView,e)}markForCheck(){Tm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ke]&=-129}reattach(){Jg(this._lView),this._lView[Ke]|=128}detectChanges(){this._lView[Ke]|=1024,CC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=bu(this._lView),t=this._lView[Yl];null!==t&&!e&&A0(t,this._lView),Z1(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e;const t=bu(this._lView),r=this._lView[Yl];null!==r&&!t&&J1(r,this._lView),Jg(this._lView)}}let el=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=KK}return n})();const GK=el,WK=class extends GK{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function $h(n,e,t,r){const i=je(null);try{const s=e.tView,l=yC(n,s,t,4096&n[Ke]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);l[Yl]=n[e.index];const h=n[li];return null!==h&&(l[li]=h.createEmbeddedView(s)),$0(s,l,t),l}finally{je(i)}}(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new bm(i)}};function KK(){return IC(Wt(),ne())}function IC(n,e){return 4&n.type?new WK(e,n,Nh(n,e)):null}class qh{}const Nm=new we("",{providedIn:"root",factory:()=>!1}),XF=new we("");class k7{}class eL{}class L7{resolveComponentFactory(e){throw function F7(n){const e=Error(`No component factory found for ${Jn(n)}.`);return e.ngComponent=n,e}(e)}}class SC{static#e=this.NULL=new L7}class DC{}let ua=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function V7(){const n=ne(),t=qi(Wt().index,n);return(Mr(t)?t:n)[rt]}()}return n})(),U7=(()=>{class n{static#e=this.\u0275prov=Ve({token:n,providedIn:"root",factory:()=>null})}return n})();const eS={},nL=new Set;function Ps(n){nL.has(n)||(nL.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function rL(n){let e=!0;return setTimeout(()=>{e&&(e=!1,n())}),"function"==typeof ln.requestAnimationFrame&&ln.requestAnimationFrame(()=>{e&&(e=!1,n())}),()=>{e=!1}}function iL(n){let e=!0;return queueMicrotask(()=>{e&&n()}),()=>{e=!1}}function sL(...n){}class Rt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new sr(!1),this.onMicrotaskEmpty=new sr(!1),this.onStable=new sr(!1),this.onError=new sr(!1),typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,function $7(n){const e=()=>{!function j7(n){n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,Zone.root.run(()=>{rL(()=>{n.callbackScheduled=!1,nS(n),n.isCheckStableRunning=!0,tS(n),n.isCheckStableRunning=!1})}),nS(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function H7(n){return lL(n,"__ignore_ng_zone__")}(a))return t.invokeTask(i,s,o,a);try{return oL(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),aL(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return oL(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function z7(n){return lL(n,"__scheduler_tick__")}(a)&&e(),aL(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,nS(n),tS(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Rt.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(Rt.isInAngularZone())throw new Q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,B7,sL,sL);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const B7={};function tS(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function nS(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function oL(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function aL(n){n._nesting--,tS(n)}class rS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new sr,this.onMicrotaskEmpty=new sr,this.onStable=new sr,this.onError=new sr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}function lL(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}var Fu=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Fu||{});const cL={destroy(){}};function sS(n,e){!e&&function vh(n){if(!AE())throw new Q(-203,!1)}();const t=e?.injector??ue(Rr);if(!function Xs(n){return"browser"===(n??ue(Rr)).get(Ao)}(t))return cL;Ps("NgAfterNextRender");const r=t.get(xm),i=r.handler??=new dL,s=e?.phase??Fu.MixedReadWrite,o=()=>{i.unregister(l),a()},a=t.get(Oh).onDestroy(o),l=Hi(t,()=>new uL(s,()=>{o(),n()}));return i.register(l),{destroy:o}}class uL{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=ue(Rt),this.errorHandler=ue(Js,{optional:!0}),ue(qh,{optional:!0})?.notify(6)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}}class dL{constructor(){this.executingCallbacks=!1,this.buckets={[Fu.EarlyRead]:new Set,[Fu.Write]:new Set,[Fu.MixedReadWrite]:new Set,[Fu.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const t of e)t.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let xm=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Ve({token:n,providedIn:"root",factory:()=>new n})}return n})();function MC(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=fg(i,a):2==s&&(r=fg(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}class pL extends SC{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=yt(e);return new Lm(t,this.ngModule)}}function gL(n){const e=[];for(const t in n){if(!n.hasOwnProperty(t))continue;const r=n[t];void 0!==r&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}class RC{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=fu(r);const i=this.injector.get(e,eS,r);return i!==eS||t===eS?i:this.parentInjector.get(e,t,r)}}class Lm extends eL{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=gL(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return gL(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function gA(n){return n.map(Eu).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){const s=je(null);try{let o=(i=i||this.ngModule)instanceof Qr?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new RC(e,o):e,l=a.get(DC,null);if(null===l)throw new Q(407,!1);const c=a.get(U7,null),_={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:a.get(xm,null),changeDetectionScheduler:a.get(qh,null)},E=l.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",T=r?function dK(n,e,t,r){const s=r.get(b1,!1)||t===Ii.ShadowDom,o=n.selectRootElement(e,s);return function hK(n){mF(n)}(o),o}(E,r,this.componentDef.encapsulation,a):fC(E,I,function Q7(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(I));let S=512;this.componentDef.signals?S|=4096:this.componentDef.onPush||(S|=16);let L=null;null!==T&&(L=l0(T,a,!0));const O=F0(0,null,null,1,0,null,null,null,null,null,null),H=yC(null,O,null,S,null,null,_,E,a,null,L);let oe,Te;UA(H);try{const Re=this.componentDef;let k,P=null;Re.findHostDirectiveDefs?(k=[],P=new Map,Re.findHostDirectiveDefs(Re,k,P),k.push(Re)):k=[Re];const x=function Z7(n,e){const t=n[Ee],r=Qe;return n[r]=e,jh(t,r,2,"#host",null)}(H,T),U=function J7(n,e,t,r,i,s,o){const a=i[Ee];!function X7(n,e,t,r){for(const i of n)e.mergedAttrs=za(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(MC(e,e.mergedAttrs,!0),null!==t&&uF(r,t,e))}(r,n,e,o);let l=null;null!==e&&(l=l0(e,i[ir]));const c=s.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const g=yC(i,gF(t),null,h,i[n.index],n,s,c,null,null,l);return a.firstCreatePass&&V0(a,n,r.length-1),vC(i,g),i[n.index]=g}(x,T,Re,k,H,_,E);Te=Ka(O,Qe),T&&function tQ(n,e,t,r){if(r)yu(n,t,["ng-version","18.0.2"]);else{const{attrs:i,classes:s}=function mA(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Ts(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&yu(n,t,i),s&&s.length>0&&cF(n,t,s.join(" "))}}(E,Re,T,r),void 0!==t&&function nQ(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(Te,this.ngContentSelectors,t),oe=function eQ(n,e,t,r,i,s){const o=Wt(),a=i[Ee],l=Zr(o,i);vF(a,i,o,t,null,r);for(let h=0;h<t.length;h++)Ai(Ru(i,a,o.directiveStart+h,o),i);EF(a,i,o),l&&Ai(l,i);const c=Ru(i,a,o.directiveStart+o.componentOffset,o);if(n[cn]=i[cn]=c,null!==s)for(const h of s)h(c,e);return N0(a,o,i),c}(U,Re,k,P,H,[rQ]),$0(O,H,null)}finally{BA()}return new Y7(this.componentType,oe,Nh(Te,H),H,Te)}finally{je(s)}}}class Y7 extends k7{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new bm(i,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;j0(s[Ee],s,i,e,t),this.previousInputValues.set(e,t),Tm(qi(this._tNode.index,s),1)}}get injector(){return new Vr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function rQ(){const n=Wt();zE(ne()[Ee],n)}let So=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=iQ}return n})();function iQ(){return yL(Wt(),ne())}const sQ=So,mL=class extends sQ{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Nh(this._hostTNode,this._hostLView)}get injector(){return new Vr(this._hostTNode,this._hostLView)}get parentInjector(){const e=QE(this._hostTNode,this._hostLView);if(HA(e)){const t=sm(e,this._hostLView),r=im(e);return new Vr(t[Ee].data[r+8],t)}return new Vr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=_L(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Xn}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,Nu(this._hostTNode,null)),a}createComponent(e,t,r,i,s){const o=e&&!function Iu(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const I=t||{};a=I.index,r=I.injector,i=I.projectableNodes,s=I.environmentInjector||I.ngModuleRef}const l=o?e:new Lm(yt(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const T=(o?c:this.parentInjector).get(Qr,null);T&&(s=T)}yt(l.componentType??{});const E=l.create(c,i,null,s);return this.insertImpl(E.hostView,a,Nu(this._hostTNode,null)),E}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function VE(n){return Yr(n[gr])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const l=i[gr],c=new mL(l,l[Dr],l[gr]);c.detach(c.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return function Hh(n,e,t,r=!0){const i=e[Ee];if(function eK(n,e,t,r){const i=Xn+r,s=t.length;r>0&&(t[i-1][zi]=e),r<s-Xn?(e[zi]=t[i],fE(t,Xn+r,e)):(t.push(e),e[zi]=null),e[gr]=t;const o=e[Yl];null!==o&&t!==o&&J1(o,e);const a=e[li];null!==a&&a.insertView(n),Jg(e),e[Ke]|=128}(i,e,n,t),r){const o=M0(t,n),a=e[rt],l=gC(a,n[Ks]);null!==l&&function J6(n,e,t,r,i,s){r[vn]=i,r[Dr]=e,_C(n,r,t,1,i,s)}(i,n[Dr],a,e,l,o)}const s=e[Pr];null!==s&&null!==s.firstChild&&(s.firstChild=null)}(o,i,s,r),e.attachToViewContainerRef(),fE(lS(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=_L(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=vm(this._lContainer,t);r&&(ah(lS(this._lContainer),t),pC(r[Ee],r))}detach(e){const t=this._adjustIndex(e,-1),r=vm(this._lContainer,t);return r&&null!=ah(lS(this._lContainer),t)?new bm(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function _L(n){return n[8]}function lS(n){return n[8]||(n[8]=[])}function yL(n,e){let t;const r=e[n.index];return Yr(r)?t=r:(t=CF(r,e,null,n),e[n.index]=t,vC(e,t)),vL(t,e,n,r),new mL(t,n,e)}let vL=function CL(n,e,t,r){if(n[Ks])return;let i;i=8&t.type?Gt(r):function oQ(n,e){const t=n[rt],r=t.createComment(""),i=Zr(e,n);return Ou(t,gC(t,i),r,function iK(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[Ks]=i},cS=()=>!1;class uS{constructor(e){this.queryList=e,this.matches=null}clone(){return new uS(this.queryList)}setDirty(){this.queryList.setDirty()}}class dS{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new dS(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==mS(e,t).matches&&this.queries[t].setDirty()}}class IL{constructor(e,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof e?function pQ(n){return n.split(",").map(e=>e.trim())}(e):e}}class hS{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new hS(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class fS{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new fS(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,uQ(t,s)),this.matchTNodeWithReadOption(e,t,YE(t,e,s,!1,!1))}else r===el?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,YE(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Ss||i===So||i===el&&4&t.type)this.addMatch(t.index,-2);else{const s=YE(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function uQ(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function hQ(n,e,t,r){return-1===t?function dQ(n,e){return 11&n.type?Nh(n,e):4&n.type?IC(n,e):null}(e,n):-2===t?function fQ(n,e,t){return t===Ss?Nh(e,n):t===el?IC(e,n):t===So?yL(e,n):void 0}(n,e,r):Ru(n,n[Ee],t,e)}function wL(n,e,t,r){const i=e[li].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;null!==o&&l<o.length;l+=2){const c=o[l];a.push(c<0?null:hQ(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function pS(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=wL(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],h=e[-l];for(let g=Xn;g<h.length;g++){const _=h[g];_[Yl]===_[gr]&&pS(_[Ee],_,c,r)}if(null!==h[ia]){const g=h[ia];for(let _=0;_<g.length;_++){const E=g[_];pS(E[Ee],E,c,r)}}}}}return r}function AL(n,e,t,r){const i=gt();if(i.firstCreatePass){const s=Wt();(function SL(n,e,t){null===n.queries&&(n.queries=new hS),n.queries.track(new fS(e,t))})(i,new IL(e,t,r),s.index),function gQ(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),!(2&~t)&&(i.staticContentQueries=!0)}return function TL(n,e,t){const r=new ZA(!(4&~t));return function gK(n,e,t,r){const i=wF(e);i.push(t),n.firstCreatePass&&TF(n).push(r,i.length-1)}(n,e,r,r.destroy),(e[li]??=new dS).queries.push(new uS(r))-1}(i,ne(),t)}function mS(n,e){return n.queries.getByIndex(e)}function DL(n,e){const t=n[Ee],r=mS(t,e);return r.crossesNgTemplate?pS(t,n,e,[]):wL(t,n,r,e)}function RL(n){return function PL(n){return"function"==typeof n&&void 0!==n[hn]}(n)&&"function"==typeof n.set}function un(n){let e=function $L(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(bs(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=NC(n.inputs),o.inputTransforms=NC(n.inputTransforms),o.declaredInputs=NC(n.declaredInputs),o.outputs=NC(n.outputs);const a=i.hostBindings;a&&MQ(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&DQ(n,l),c&&PQ(n,c),AQ(n,i),Kv(n.outputs,i.outputs),bs(i)&&i.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===un&&(t=!1)}}e=Object.getPrototypeOf(e)}!function SQ(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=za(i.hostAttrs,t=za(t,i.hostAttrs))}}(r)}function AQ(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];if(void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function NC(n){return n===as?{}:n===Vt?[]:n}function DQ(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function PQ(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function MQ(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function GL(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}class Lu{}class WL{}class yS extends Lu{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pL(this);const i=Kr(e);this._bootstrapComponents=Ds(i.bootstrap),this._r3Injector=zk(e,t,[{provide:Lu,useValue:this},{provide:SC,useValue:this.componentFactoryResolver},...r],Jn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class vS extends WL{constructor(e){super(),this.moduleType=e}create(e){return new yS(this.moduleType,e,[])}}class KL extends Lu{constructor(e){super(),this.componentFactoryResolver=new pL(this),this.instance=null;const t=new Gl([...e.providers,{provide:Lu,useValue:this},{provide:SC,useValue:this.componentFactoryResolver}],e.parent||yh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function xC(n,e,t=null){return new KL({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let Vu=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new te(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function FC(n){return!!function ES(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function da(n,e,t){return n[e]=t}function mr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Uu(n,e,t,r){const i=mr(n,e,t);return mr(n,e+1,r)||i}function Bm(n,e,t,r,i,s,o,a,l,c){const h=t+Qe,g=e.firstCreatePass?function HQ(n,e,t,r,i,s,o,a,l){const c=e.consts,h=jh(e,n,4,o||null,a||null);L0(e,t,h,Gi(c,l)),zE(e,h);const g=h.tView=F0(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,h),g.queries=e.queries.embeddedTView(h)),h}(h,e,n,r,i,s,o,a,l):e.data[h];ds(g,!1);const _=YL(e,n,g,t);nm()&&mC(e,n,_,g),Ai(_,n);const E=CF(_,n,_,g);return n[h]=E,vC(n,E),function EL(n,e,t){return cS(n,e,t)}(E,g,n),Xl(g)&&x0(e,n,g),null!=l&&k0(n,g,c),g}function Ur(n,e,t,r,i,s,o,a){const l=ne(),c=gt();return Bm(l,c,n,e,t,r,i,Gi(c.consts,s),o,a),Ur}let YL=function ZL(n,e,t,r){return aa(!0),e[rt].createComment("")};function Do(n,e,t,r){const i=ne();return mr(i,bo(),e)&&(gt(),ca(An(),i,n,e,t,r)),Do}function nf(n,e,t,r,i,s){const a=Uu(n,function Ya(){return m.lFrame.bindingIndex}(),t,i);return Za(2),a?e+at(t)+r+at(i)+s:dt}function HC(n,e){return n<<17|e<<2}function oc(n){return n>>17&32767}function MS(n){return 2|n}function ju(n){return(131068&n)>>2}function RS(n,e){return-131069&n|e<<2}function OS(n){return 1|n}function DV(n,e,t,r){const i=n[t+1],s=null===e;let o=r?oc(i):ju(i),a=!1;for(;0!==o&&(!1===a||s);){const c=n[o+1];PY(n[o],e)&&(a=!0,n[o+1]=r?OS(c):MS(c)),o=r?oc(c):ju(c)}a&&(n[t+1]=r?MS(i):OS(i))}function PY(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&jl(n,e)>=0}function Yt(n,e,t){const r=ne();return mr(r,bo(),e)&&fs(gt(),An(),r,n,e,r[rt],t,!1),Yt}function NS(n,e,t,r,i){const o=i?"class":"style";j0(n,t,e.inputs[o],o,r)}function xS(n,e,t){return Po(n,e,t,!1),xS}function $u(n,e){return Po(n,e,null,!0),$u}function Po(n,e,t,r){const i=ne(),s=gt(),o=Za(2);s.firstUpdatePass&&function FV(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[bi()],o=function kV(n,e){return e>=n.expandoStartIndex}(n,t);(function BV(n,e){return!!(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function VY(n,e,t,r){const i=function LA(n){const e=m.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=zm(t=kS(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=kS(i,n,e,t,r),null===s){let l=function UY(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==ju(r))return n[oc(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=kS(null,n,e,l[1],r),l=zm(l,e.attrs,r),function BY(n,e,t,r){n[oc(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function jY(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=zm(r,n[s].hostAttrs,t);return zm(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function SY(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=oc(o),l=ju(o);n[r]=t;let h,c=!1;if(Array.isArray(t)?(h=t[1],(null===h||jl(t,h)>0)&&(c=!0)):h=t,i)if(0!==l){const _=oc(n[a+1]);n[r+1]=HC(_,a),0!==_&&(n[_+1]=RS(n[_+1],r)),n[a+1]=function bY(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=HC(a,0),0!==a&&(n[a+1]=RS(n[a+1],r)),a=r;else n[r+1]=HC(l,0),0===a?a=r:n[l+1]=RS(n[l+1],r),l=r;c&&(n[r+1]=MS(n[r+1])),DV(n,h,r,!0),DV(n,h,r,!1),function DY(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&jl(s,e)>=0&&(t[r+1]=OS(t[r+1]))}(e,h,n,r,s),o=HC(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==dt&&mr(i,o,e)&&function VV(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],h=function AY(n){return!(1&~n)}(c)?UV(l,e,t,i,ju(c),o):void 0;zC(h)||(zC(s)||function TY(n){return!(2&~n)}(c)&&(s=UV(l,null,t,i,a,o)),function aK(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:nc.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=nc.Important),n.setStyle(t,r,i,s))}}(r,o,Su(bi(),t),i,s))}(s,s.data[bi()],i,i[rt],n,i[o+1]=function qY(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Jn(tc(n)))),n}(e,t),r,o)}function kS(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=zm(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function zm(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),$i(n,o,!!t||e[++s]))}return void 0===n?null:n}function UV(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),h=c?l[1]:l,g=null===h;let _=t[i+1];_===dt&&(_=g?Vt:void 0);let E=g?ch(_,r):h===r?_:void 0;if(c&&!zC(E)&&(E=ch(l,r)),zC(E)&&(a=E,o))return a;const I=n[i+1];i=o?oc(I):ju(I)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=ch(l,r))}return a}function zC(n){return void 0!==n}function Ce(n,e,t,r){const i=ne(),s=gt(),o=Qe+n,a=i[rt],l=s.firstCreatePass?function pZ(n,e,t,r,i,s){const o=e.consts,l=jh(e,n,2,r,Gi(o,i));return L0(e,t,l,Gi(o,s)),null!==l.attrs&&MC(l,l.attrs,!1),null!==l.mergedAttrs&&MC(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,e,t,r):s.data[o],c=zV(s,i,l,a,e,n);i[o]=c;const h=Xl(l);return ds(l,!0),uF(a,c,l),!function Wh(n){return!(32&~n.flags)}(l)&&nm()&&mC(s,i,c,l),0===function re(){return m.lFrame.elementDepthCount}()&&Ai(c,i),function Ae(){m.lFrame.elementDepthCount++}(),h&&(x0(s,i,l),N0(s,l,i)),null!==r&&k0(i,l),Ce}function ve(){let n=Wt();tm()?kA():(n=n.parent,ds(n,!1));const e=n;(function As(n){return m.skipHydrationRootTNode===n})(e)&&function $E(){m.skipHydrationRootTNode=null}(),function Le(){m.lFrame.elementDepthCount--}();const t=gt();return t.firstCreatePass&&(zE(t,n),$g(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function l8(n){return!!(8&n.flags)}(e)&&NS(t,e,ne(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function c8(n){return!!(16&n.flags)}(e)&&NS(t,e,ne(),e.stylesWithoutHost,!1),ve}function er(n,e,t,r){return Ce(n,e,t,r),ve(),er}let zV=(n,e,t,r,i,s)=>(aa(!0),fC(r,i,function bk(){return m.lFrame.currentNamespace}()));function qm(n,e,t){const r=ne(),i=gt(),s=n+Qe,o=i.firstCreatePass?function _Z(n,e,t,r,i){const s=e.consts,o=Gi(s,r),a=jh(e,n,8,"ng-container",o);return null!==o&&MC(a,o,!0),L0(e,t,a,Gi(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];ds(o,!0);const a=qV(i,r,o,n);return r[s]=a,nm()&&mC(i,r,a,o),Ai(a,r),Xl(o)&&(x0(i,r,o),N0(i,o,r)),null!=t&&k0(r,o),qm}function Gm(){let n=Wt();const e=gt();return tm()?kA():(n=n.parent,ds(n,!1)),e.firstCreatePass&&(zE(e,n),$g(n)&&e.queries.elementEnd(n)),Gm}function US(n,e,t){return qm(n,e,t),Gm(),US}let qV=(n,e,t,r)=>(aa(!0),b0(e[rt],""));function Hu(){return ne()}const zu=void 0;var CZ=["en",[["a","p"],["AM","PM"],zu],[["AM","PM"],zu,zu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],zu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],zu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",zu,"{1} 'at' {0}",zu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function EZ(n){const t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===r?1:5}];let hf={};function Ki(n){const e=function IZ(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=QV(e);if(t)return t;const r=e.split("-")[0];if(t=QV(r),t)return t;if("en"===r)return CZ;throw new Q(701,!1)}function QV(n){return n in hf||(hf[n]=ln.ng&&ln.ng.common&&ln.ng.common.locales&&ln.ng.common.locales[n]),hf[n]}var Sn=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Sn||{});const ff="en-US";let YV=ff;let g2=(n,e,t)=>{};function en(n,e,t,r){const i=ne(),s=gt(),o=Wt();return $S(s,i,i[rt],o,n,e,r),en}function $S(n,e,t,r,i,s,o){const a=Xl(r),c=n.firstCreatePass&&TF(n),h=e[cn],g=wF(e);let _=!0;if(3&r.type||o){const T=Zr(r,e),S=o?o(T):T,L=g.length,O=o?oe=>o(Gt(oe[r.index])):r.index;let H=null;if(!o&&a&&(H=function uJ(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[qa],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==H)(H.__ngLastListenerFn__||H).__ngNextListenerFn__=s,H.__ngLastListenerFn__=s,_=!1;else{s=v2(r,e,h,s),g2(T,i,s);const oe=t.listen(S,i,s);g.push(s,oe),c&&c.push(i,O,L,L+1)}}else s=v2(r,e,h,s);const E=r.outputs;let I;if(_&&null!==E&&(I=E[i])){const T=I.length;if(T)for(let S=0;S<T;S+=2){const Te=e[I[S]][I[S+1]].subscribe(s),Re=g.length;g.push(s,Te),c&&c.push(i,r.index,Re,-(Re+1))}}}function y2(n,e,t,r){const i=je(null);try{return Qs(6,e,t),!1!==t(r)}catch(s){return EC(n,s),!1}finally{Qs(7,e,t),je(i)}}function v2(n,e,t,r){return function i(s){if(s===Function)return r;Tm(n.componentOffset>-1?qi(n.index,e):e,5);let a=y2(e,t,r,s),l=i.__ngNextListenerFn__;for(;l;)a=y2(e,t,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function $n(n=1){return function X5(n){return(m.lFrame.contextLView=function BE(n,e){for(;n>0;)e=e[Ga],n--;return e}(n,m.lFrame.contextLView))[cn]}(n)}function R2(){return function gS(n,e){return n[li].queries[e].queryList}(ne(),VA())}function be(n,e=""){const t=ne(),r=gt(),i=n+Qe,s=r.firstCreatePass?jh(r,i,1,e,null):r.data[i],o=$2(r,t,s,e,n);t[i]=o,nm()&&mC(r,t,o,s),ds(s,!1)}let $2=(n,e,t,r,i)=>(aa(!0),function T0(n,e){return n.createText(e)}(e[rt],r));function gs(n){return zS("",n,""),gs}function zS(n,e,t){const r=ne(),i=function tf(n,e,t,r){return mr(n,bo(),t)?e+at(t)+r:dt}(r,n,e,t);return i!==dt&&Xa(r,bi(),i),zS}function QC(n,e,t,r,i){const s=ne(),o=nf(s,n,e,t,r,i);return o!==dt&&Xa(s,bi(),o),QC}function Jm(n,e,t){RL(e)&&(e=e());const r=ne();return mr(r,bo(),e)&&fs(gt(),An(),r,n,e,r[rt],t,!1),Jm}function YC(n,e){const t=RL(n);return t&&n.set(e),t}function Xm(n,e){const t=ne(),r=gt(),i=Wt();return $S(r,t,t[rt],i,n,e),Xm}function qS(n,e,t,r,i){if(n=tt(n),Array.isArray(n))for(let s=0;s<n.length;s++)qS(n[s],e,t,r,i);else{const s=gt(),o=ne(),a=Wt();let l=Co(n)?n:tt(n.provide);const c=bE(n),h=1048575&a.providerIndexes,g=a.directiveStart,_=a.providerIndexes>>20;if(Co(n)||!n.multi){const E=new rm(c,i,ye),I=WS(l,e,i?h:h+_,g);-1===I?(GA(KE(a,o),s,l),GS(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(E),o.push(E)):(t[I]=E,o[I]=E)}else{const E=WS(l,e,h+_,g),I=WS(l,e,h,h+_),S=I>=0&&t[I];if(i&&!S||!i&&!(E>=0&&t[E])){GA(KE(a,o),s,l);const L=function xJ(n,e,t,r,i){const s=new rm(n,t,ye);return s.multi=[],s.index=e,s.componentProviders=0,Y2(s,i,r&&!t),s}(i?NJ:OJ,t.length,i,r,c);!i&&S&&(t[I].providerFactory=L),GS(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(L),o.push(L)}else GS(s,n,E>-1?E:I,Y2(t[i?I:E],c,!i&&r));!i&&r&&S&&t[I].componentProviders++}}}function GS(n,e,t,r){const i=Co(e),s=function yA(n){return!!n.useClass}(e);if(i||s){const l=(s?tt(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const h=c.indexOf(t);-1===h?c.push(t,[r,l]):c[h+1].push(r,l)}else c.push(t,l)}}}function Y2(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function WS(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function OJ(n,e,t,r){return KS(this.multi,[])}function NJ(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ru(t,t[Ee],this.providerFactory.index,r);s=a.slice(0,o),KS(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],KS(i,s);return s}function KS(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Hn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function RJ(n,e,t){const r=gt();if(r.firstCreatePass){const i=bs(n);qS(t,r.data,r.blueprint,i,!0),qS(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}let kJ=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=Cu(0,t.type),i=r.length>0?xC([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ve({token:n,providedIn:"environment",factory:()=>new n(ge(Qr))})}return n})();function Z2(n){Ps("NgStandalone"),n.getStandaloneInjector=e=>e.get(kJ).getOrCreateStandaloneInjector(n)}function X2(n,e,t,r){return function eU(n,e,t,r,i,s){const o=e+t;return mr(n,o,i)?da(n,o+1,s?r.call(s,i):r(i)):e_(n,o+1)}(ne(),Wi(),n,e,t,r)}function e_(n,e){const t=n[e];return t===dt?void 0:t}function oU(n,e,t,r){const i=n+Qe,s=ne(),o=oa(s,i);return function t_(n,e){return n[Ee].data[e].pure}(s,i)?function tU(n,e,t,r,i,s,o){const a=e+t;return Uu(n,a,i,s)?da(n,a+2,o?r.call(o,i,s):r(i,s)):e_(n,a+2)}(s,Wi(),e,o.transform,t,r,o):o.transform(t,r)}function aU(n,e){return IC(n,e)}class mf{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const vX=new mf("18.0.2");let wU=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const DU=new we(""),eI=new we("");let nD,eD=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,nD||(function qX(n){nD=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Rt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(ge(Rt),ge(tD),ge(eI))};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})(),tD=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return nD?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function i_(n){return!!n&&"function"==typeof n.then}function PU(n){return!!n&&"function"==typeof n.subscribe}const rD=new we("");let iD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=ue(rD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(i_(s))t.push(s);else if(PU(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const tI=new we("");function OU(n,e){return Array.isArray(e)?e.reduce(OU,n):{...n,...e}}let Ro=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ue(Gk),this.afterRenderEffectManager=ue(xm),this.zonelessEnabled=ue(Nm),this.externalTestViews=new Set,this.beforeRender=new M,this.afterTick=new M,this.componentTypes=[],this.components=[],this.isStable=ue(Vu).hasPendingTasks.pipe(He(t=>!t)),this._injector=ue(Qr)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof eL;if(!this._injector.get(iD).done)throw!i&&function ra(n){const e=yt(n)||fr(n)||pr(n);return null!==e&&e.standalone}(t),new Q(405,!1);let o;o=i?t:this._injector.get(SC).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function GX(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Lu),c=o.create(Rr.NULL,[],r||o.selector,a),h=c.location.nativeElement,g=c.injector.get(DU,null);return g?.registerApplication(h),c.onDestroy(()=>{this.detachView(c.hostView),nI(this.components,c),g?.unregisterApplication(h)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new Q(101,!1);const r=je(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,je(r),this.afterTick.next()}}detectChangesInAttachedViews(t){let r=null;this._injector.destroyed||(r=this._injector.get(DC,null,{optional:!0}));let i=0;const s=this.afterRenderEffectManager;for(;i<10;){const o=0===i;if(t||!o){this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:l}of this._views)KX(a,l,o,this.zonelessEnabled)}else r?.begin?.(),r?.end?.();if(i++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:a})=>Du(a))&&(s.execute(),!this.allViews.some(({_lView:a})=>Du(a))))break}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;nI(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(tI,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>nI(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Q(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function KX(n,e,t,r){(t||Du(n))&&CC(n,e,t&&!r?0:1)}class QX{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let xU=(()=>{class n{compileModuleSync(t){return new vS(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Ds(Kr(t).declarations).reduce((o,a)=>{const l=yt(a);return l&&o.push(new Lm(l)),o},[]);return new QX(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),JX=(()=>{class n{constructor(){this.zone=ue(Rt),this.changeDetectionScheduler=ue(qh),this.applicationRef=ue(Ro)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sD({ngZoneFactory:n,ignoreChangesOutsideZone:e}){return n??=()=>new Rt(oD()),[{provide:Rt,useFactory:n},{provide:ls,multi:!0,useFactory:()=>{const t=ue(JX,{optional:!0});return()=>t.initialize()}},{provide:ls,multi:!0,useFactory:()=>{const t=ue(tee);return()=>{t.initialize()}}},{provide:Gk,useFactory:eee},!0===e?{provide:XF,useValue:!0}:[]]}function eee(){const n=ue(Rt),e=ue(Js);return t=>n.runOutsideAngular(()=>e.handleError(t))}function oD(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let tee=(()=>{class n{constructor(){this.subscription=new zt,this.initialized=!1,this.zone=ue(Rt),this.pendingTasks=ue(Vu)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Rt.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Rt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),s_=(()=>{class n{constructor(){this.appRef=ue(Ro),this.taskService=ue(Vu),this.ngZone=ue(Rt),this.zonelessEnabled=ue(Nm),this.disableScheduling=ue(XF,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new zt,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof rS||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?iL:rL;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Rt.isInAngularZone())}tick(t){if(this.runningTick||this.appRef.destroyed)return;const r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(t)},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,iL(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const tl=new we("",{providedIn:"root",factory:()=>ue(tl,wt.Optional|wt.SkipSelf)||function nee(){return typeof $localize<"u"&&$localize.locale||ff}()}),lD=new we("");let VU=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function q7(n="zone.js",e){return"noop"===n?new rS:"zone.js"===n?new Rt(e):n}(r?.ngZone,oD({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=r?.ignoreChangesOutsideZone,o=function LQ(n,e,t){return new yS(n,e,t)}(t.moduleType,this.injector,[...sD({ngZoneFactory:()=>i,ignoreChangesOutsideZone:s}),{provide:qh,useExisting:s_}]),a=o.injector.get(Js,null);return i.runOutsideAngular(()=>{const l=i.onError.subscribe({next:c=>{a.handleError(c)}});o.onDestroy(()=>{nI(this._modules,o),l.unsubscribe()})}),function RU(n,e,t){try{const r=t();return i_(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(a,i,()=>{const l=o.injector.get(iD);return l.runInitializers(),l.donePromise.then(()=>(function ZV(n){"string"==typeof n&&(YV=n.toLowerCase().replace(/_/g,"-"))}(o.injector.get(tl,ff)||ff),this._moduleDoBootstrap(o),o))})})}bootstrapModule(t,r=[]){const i=OU({},r);return function ZX(n,e,t){const r=new vS(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Ro);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new Q(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Q(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(lD,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(ge(Rr))};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),ac=null;const UU=new we("");function BU(n,e,t=[]){const r=`Platform: ${e}`,i=new we(r);return(s=[])=>{let o=cD();if(!o||o.injector.get(UU,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function see(n){if(ac&&!ac.get(UU,!1))throw new Q(400,!1);(function MU(){!function Sl(n){ri=n}(()=>{throw new Q(600,!1)})})(),ac=n;const e=n.get(VU);(function $U(n){n.get(p1,null)?.forEach(t=>t())})(n)}(function jU(n=[],e){return Rr.create({name:e,providers:[{provide:Ng,useValue:"platform"},{provide:lD,useValue:new Set([()=>ac=null])},...n]})}(a,r))}return function oee(n){const e=cD();if(!e)throw new Q(401,!1);return e}()}}function cD(){return ac?.get(VU)??null}let o_=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=lee}return n})();function lee(n){return function cee(n,e,t){if(sa(n)&&!t){const r=qi(n.index,e);return new bm(r,r)}return 47&n.type?new bm(e[bn],e):null}(Wt(),ne(),!(16&~n))}class KU{constructor(){}supports(e){return FC(e)}create(e){return new pee(e)}}const fee=(n,e)=>e;class pee{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||fee}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<YU(r,i,s)?t:r,a=YU(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,h=l-i;if(c!=h){for(let _=0;_<c;_++){const E=_<s.length?s[_]:s[_]=0,I=E+_;h<=I&&I<c&&(s[_]=E+1)}s[o.previousIndex]=h-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!FC(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function jQ(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new gee(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new QU),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new QU),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class gee{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class mee{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class QU{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new mee,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function YU(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function JU(){return new pD([new KU])}let pD=(()=>{class n{static#e=this.\u0275prov=Ve({token:n,providedIn:"root",factory:JU});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||JU()),deps:[[n,new oh,new sh]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new Q(901,!1)}}return n})();const Cee=BU(null,"core",[]);let Iee=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(ge(Ro))};static#t=this.\u0275mod=cs({type:n});static#n=this.\u0275inj=vi({})}return n})();function _f(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let SB=null;function lc(){return SB}class dte{}const Rs=new we("");let _D=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:()=>ue(fte),providedIn:"platform"})}return n})();const hte=new we("");let fte=(()=>{class n extends _D{constructor(){super(),this._doc=ue(Rs),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return lc().getBaseHref(this._doc)}onPopState(t){const r=lc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=lc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function yD(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function DB(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function nl(n){return n&&"?"!==n[0]?"?"+n:n}let Gu=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:()=>ue(MB),providedIn:"root"})}return n})();const PB=new we("");let MB=(()=>{class n extends Gu{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ue(Rs).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return yD(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+nl(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+nl(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+nl(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ge(_D),ge(PB,8))};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pte=(()=>{class n extends Gu{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=yD(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+nl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+nl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ge(_D),ge(PB,8))};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})(),c_=(()=>{class n{constructor(t){this._subject=new sr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function _te(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(DB(RB(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+nl(r))}normalize(t){return n.stripTrailingSlash(function mte(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,RB(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nl(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nl(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=nl;static#t=this.joinWithSlash=yD;static#n=this.stripTrailingSlash=DB;static#r=this.\u0275fac=function(r){return new(r||n)(ge(Gu))};static#i=this.\u0275prov=Ve({token:n,factory:()=>function gte(){return new c_(ge(Gu))}(),providedIn:"root"})}return n})();function RB(n){return n.replace(/\/index.html$/,"")}var Yi=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Yi||{}),En=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(En||{}),Os=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Os||{});const Or={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function pI(n,e){return no(Ki(n)[Sn.DateFormat],e)}function gI(n,e){return no(Ki(n)[Sn.TimeFormat],e)}function mI(n,e){return no(Ki(n)[Sn.DateTimeFormat],e)}function to(n,e){const t=Ki(n),r=t[Sn.NumberSymbols][e];if(typeof r>"u"){if(e===Or.CurrencyDecimal)return t[Sn.NumberSymbols][Or.Decimal];if(e===Or.CurrencyGroup)return t[Sn.NumberSymbols][Or.Group]}return r}function NB(n){if(!n[Sn.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Sn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function no(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function ED(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Rte=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,_I={},Ote=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var rl=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(rl||{}),tn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(tn||{}),nn=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(nn||{});function Nte(n,e,t,r){let i=function $te(n){if(FB(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,o=1]=n.split("-").map(a=>+a);return yI(i,s-1,o)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Rte))return function Hte(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,l=Number(n[6]||0),c=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,o,a,l,c),e}(r)}const e=new Date(n);if(!FB(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=il(t,e)||e;let a,o=[];for(;e;){if(a=Ote.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const h=o.pop();if(!h)break;e=h}}let l=i.getTimezoneOffset();r&&(l=kB(r,l),i=function jte(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function Bte(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(kB(e,i)-i))}(i,r,!0));let c="";return o.forEach(h=>{const g=function Ute(n){if(ID[n])return ID[n];let e;switch(n){case"G":case"GG":case"GGG":e=Dn(nn.Eras,En.Abbreviated);break;case"GGGG":e=Dn(nn.Eras,En.Wide);break;case"GGGGG":e=Dn(nn.Eras,En.Narrow);break;case"y":e=Nr(tn.FullYear,1,0,!1,!0);break;case"yy":e=Nr(tn.FullYear,2,0,!0,!0);break;case"yyy":e=Nr(tn.FullYear,3,0,!1,!0);break;case"yyyy":e=Nr(tn.FullYear,4,0,!1,!0);break;case"Y":e=II(1);break;case"YY":e=II(2,!0);break;case"YYY":e=II(3);break;case"YYYY":e=II(4);break;case"M":case"L":e=Nr(tn.Month,1,1);break;case"MM":case"LL":e=Nr(tn.Month,2,1);break;case"MMM":e=Dn(nn.Months,En.Abbreviated);break;case"MMMM":e=Dn(nn.Months,En.Wide);break;case"MMMMM":e=Dn(nn.Months,En.Narrow);break;case"LLL":e=Dn(nn.Months,En.Abbreviated,Yi.Standalone);break;case"LLLL":e=Dn(nn.Months,En.Wide,Yi.Standalone);break;case"LLLLL":e=Dn(nn.Months,En.Narrow,Yi.Standalone);break;case"w":e=CD(1);break;case"ww":e=CD(2);break;case"W":e=CD(1,!0);break;case"d":e=Nr(tn.Date,1);break;case"dd":e=Nr(tn.Date,2);break;case"c":case"cc":e=Nr(tn.Day,1);break;case"ccc":e=Dn(nn.Days,En.Abbreviated,Yi.Standalone);break;case"cccc":e=Dn(nn.Days,En.Wide,Yi.Standalone);break;case"ccccc":e=Dn(nn.Days,En.Narrow,Yi.Standalone);break;case"cccccc":e=Dn(nn.Days,En.Short,Yi.Standalone);break;case"E":case"EE":case"EEE":e=Dn(nn.Days,En.Abbreviated);break;case"EEEE":e=Dn(nn.Days,En.Wide);break;case"EEEEE":e=Dn(nn.Days,En.Narrow);break;case"EEEEEE":e=Dn(nn.Days,En.Short);break;case"a":case"aa":case"aaa":e=Dn(nn.DayPeriods,En.Abbreviated);break;case"aaaa":e=Dn(nn.DayPeriods,En.Wide);break;case"aaaaa":e=Dn(nn.DayPeriods,En.Narrow);break;case"b":case"bb":case"bbb":e=Dn(nn.DayPeriods,En.Abbreviated,Yi.Standalone,!0);break;case"bbbb":e=Dn(nn.DayPeriods,En.Wide,Yi.Standalone,!0);break;case"bbbbb":e=Dn(nn.DayPeriods,En.Narrow,Yi.Standalone,!0);break;case"B":case"BB":case"BBB":e=Dn(nn.DayPeriods,En.Abbreviated,Yi.Format,!0);break;case"BBBB":e=Dn(nn.DayPeriods,En.Wide,Yi.Format,!0);break;case"BBBBB":e=Dn(nn.DayPeriods,En.Narrow,Yi.Format,!0);break;case"h":e=Nr(tn.Hours,1,-12);break;case"hh":e=Nr(tn.Hours,2,-12);break;case"H":e=Nr(tn.Hours,1);break;case"HH":e=Nr(tn.Hours,2);break;case"m":e=Nr(tn.Minutes,1);break;case"mm":e=Nr(tn.Minutes,2);break;case"s":e=Nr(tn.Seconds,1);break;case"ss":e=Nr(tn.Seconds,2);break;case"S":e=Nr(tn.FractionalSeconds,1);break;case"SS":e=Nr(tn.FractionalSeconds,2);break;case"SSS":e=Nr(tn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=EI(rl.Short);break;case"ZZZZZ":e=EI(rl.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=EI(rl.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=EI(rl.Long);break;default:return null}return ID[n]=e,e}(h);c+=g?g(i,t,l):"''"===h?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function yI(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function il(n,e){const t=function vte(n){return Ki(n)[Sn.LocaleId]}(n);if(_I[t]??={},_I[t][e])return _I[t][e];let r="";switch(e){case"shortDate":r=pI(n,Os.Short);break;case"mediumDate":r=pI(n,Os.Medium);break;case"longDate":r=pI(n,Os.Long);break;case"fullDate":r=pI(n,Os.Full);break;case"shortTime":r=gI(n,Os.Short);break;case"mediumTime":r=gI(n,Os.Medium);break;case"longTime":r=gI(n,Os.Long);break;case"fullTime":r=gI(n,Os.Full);break;case"short":const i=il(n,"shortTime"),s=il(n,"shortDate");r=vI(mI(n,Os.Short),[i,s]);break;case"medium":const o=il(n,"mediumTime"),a=il(n,"mediumDate");r=vI(mI(n,Os.Medium),[o,a]);break;case"long":const l=il(n,"longTime"),c=il(n,"longDate");r=vI(mI(n,Os.Long),[l,c]);break;case"full":const h=il(n,"fullTime"),g=il(n,"fullDate");r=vI(mI(n,Os.Full),[h,g])}return r&&(_I[t][e]=r),r}function vI(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Oo(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function Nr(n,e,t=0,r=!1,i=!1){return function(s,o){let a=function kte(n,e){switch(n){case tn.FullYear:return e.getFullYear();case tn.Month:return e.getMonth();case tn.Date:return e.getDate();case tn.Hours:return e.getHours();case tn.Minutes:return e.getMinutes();case tn.Seconds:return e.getSeconds();case tn.FractionalSeconds:return e.getMilliseconds();case tn.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||a>-t)&&(a+=t),n===tn.Hours)0===a&&-12===t&&(a=12);else if(n===tn.FractionalSeconds)return function xte(n,e){return Oo(n,3).substring(0,e)}(a,e);const l=to(o,Or.MinusSign);return Oo(a,e,l,r,i)}}function Dn(n,e,t=Yi.Format,r=!1){return function(i,s){return function Fte(n,e,t,r,i,s){switch(t){case nn.Months:return function Ite(n,e,t){const r=Ki(n),s=no([r[Sn.MonthsFormat],r[Sn.MonthsStandalone]],e);return no(s,t)}(e,i,r)[n.getMonth()];case nn.Days:return function Cte(n,e,t){const r=Ki(n),s=no([r[Sn.DaysFormat],r[Sn.DaysStandalone]],e);return no(s,t)}(e,i,r)[n.getDay()];case nn.DayPeriods:const o=n.getHours(),a=n.getMinutes();if(s){const c=function Ate(n){const e=Ki(n);return NB(e),(e[Sn.ExtraData][2]||[]).map(r=>"string"==typeof r?ED(r):[ED(r[0]),ED(r[1])])}(e),h=function Ste(n,e,t){const r=Ki(n);NB(r);const s=no([r[Sn.ExtraData][0],r[Sn.ExtraData][1]],e)||[];return no(s,t)||[]}(e,i,r),g=c.findIndex(_=>{if(Array.isArray(_)){const[E,I]=_,T=o>=E.hours&&a>=E.minutes,S=o<I.hours||o===I.hours&&a<I.minutes;if(E.hours<I.hours){if(T&&S)return!0}else if(T||S)return!0}else if(_.hours===o&&_.minutes===a)return!0;return!1});if(-1!==g)return h[g]}return function Ete(n,e,t){const r=Ki(n),s=no([r[Sn.DayPeriodsFormat],r[Sn.DayPeriodsStandalone]],e);return no(s,t)}(e,i,r)[o<12?0:1];case nn.Eras:return function wte(n,e){return no(Ki(n)[Sn.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function EI(n){return function(e,t,r){const i=-1*r,s=to(t,Or.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case rl.Short:return(i>=0?"+":"")+Oo(o,2,s)+Oo(Math.abs(i%60),2,s);case rl.ShortGMT:return"GMT"+(i>=0?"+":"")+Oo(o,1,s);case rl.Long:return"GMT"+(i>=0?"+":"")+Oo(o,2,s)+":"+Oo(Math.abs(i%60),2,s);case rl.Extended:return 0===r?"Z":(i>=0?"+":"")+Oo(o,2,s)+":"+Oo(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const Lte=0,CI=4;function xB(n){const e=n.getDay(),t=0===e?-3:CI-e;return yI(n.getFullYear(),n.getMonth(),n.getDate()+t)}function CD(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{const s=xB(t),o=function Vte(n){const e=yI(n,Lte,1).getDay();return yI(n,0,1+(e<=CI?CI:CI+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Oo(i,n,to(r,Or.MinusSign))}}function II(n,e=!1){return function(t,r){return Oo(xB(t).getFullYear(),n,to(r,Or.MinusSign),e)}}const ID={};function kB(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function FB(n){return n instanceof Date&&!isNaN(n.valueOf())}const DD=/\s+/,BB=[];let jB=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=BB,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(DD):BB}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(DD):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(DD).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||n)(ye(Ss),ye(ua))};static#t=this.\u0275dir=nt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class rne{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cc=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new rne(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),HB(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{HB(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(ye(So),ye(el),ye(pD))};static#t=this.\u0275dir=nt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function HB(n,e){n.context.$implicit=e.item}let vf=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ine,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){zB("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){zB("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(ye(So),ye(el))};static#t=this.\u0275dir=nt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class ine{constructor(){this.$implicit=null,this.ngIf=null}}function zB(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Jn(e)}'.`)}const yne=new we(""),vne=new we("");let GB=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(null==t||""===t||t!=t)return null;try{return Nte(t,r??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw function No(n,e){return new Q(2100,!1)}()}}static#e=this.\u0275fac=function(r){return new(r||n)(ye(tl,16),ye(yne,24),ye(vne,24))};static#t=this.\u0275pipe=ai({name:"date",type:n,pure:!0,standalone:!0})}return n})(),Pne=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=cs({type:n});static#n=this.\u0275inj=vi({})}return n})();const KB="browser";function TI(n){return"server"===n}let One=(()=>{class n{static#e=this.\u0275prov=Ve({token:n,providedIn:"root",factory:()=>function Rne(n){return n===KB}(ue(Ao))?new Nne(ue(Rs),window):new kne})}return n})();class Nne{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function xne(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}}class kne{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class ure extends dte{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class xD extends ure{static makeCurrent(){!function ute(n){SB??=n}(new xD)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function dre(){return f_=f_||document.querySelector("base"),f_?f_.getAttribute("href"):null}();return null==t?null:function hre(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){f_=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function tne(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let f_=null,pre=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();const kD=new we("");let rj=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new Q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(ge(kD),ge(Rt))};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();class ij{constructor(e){this._doc=e}}const FD="ng-app-id";let sj=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=TI(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${FD}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(FD),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(FD,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(ge(Rs),ge(lm),ge(m1,8),ge(Ao))};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();const LD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},VD=/%COMP%/g,yre=new we("",{providedIn:"root",factory:()=>!0});function aj(n,e){return e.map(t=>t.replace(VD,n))}let UD=(()=>{class n{constructor(t,r,i,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=TI(a),this.defaultRenderer=new BD(t,o,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ii.ShadowDom&&(r={...r,encapsulation:Ii.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof cj?i.applyToHost(t):i instanceof jD&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Ii.Emulated:s=new cj(l,c,r,this.appId,h,o,a,g);break;case Ii.ShadowDom:return new Ire(l,c,t,r,o,a,this.nonce,g);default:s=new jD(l,c,r,h,o,a,g)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(ge(rj),ge(sj),ge(lm),ge(yre),ge(Rs),ge(Ao),ge(Rt),ge(m1))};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();class BD{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(LD[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(lj(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(lj(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=LD[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=LD[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(nc.DashCase|nc.Important)?e.style.setProperty(t,r,i&nc.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&nc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=lc().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function lj(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ire extends BD{constructor(e,t,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=aj(i.id,i.styles);for(const h of c){const g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=h,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class jD extends BD{constructor(e,t,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?aj(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class cj extends jD{constructor(e,t,r,i,s,o,a,l){const c=i+"-"+r.id;super(e,t,r,s,o,a,l,c),this.contentAttr=function vre(n){return"_ngcontent-%COMP%".replace(VD,n)}(c),this.hostAttr=function Ere(n){return"_nghost-%COMP%".replace(VD,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let wre=(()=>{class n extends ij{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(ge(Rs))};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();const uj=["alt","control","meta","shift"],Tre={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bre={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Are=(()=>{class n extends ij{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>lc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),uj.forEach(c=>{const h=r.indexOf(c);h>-1&&(r.splice(h,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=Tre[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),uj.forEach(o=>{o!==i&&(0,bre[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(ge(Rs))};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();const Mre=BU(Cee,"browser",[{provide:Ao,useValue:KB},{provide:p1,useValue:function Sre(){xD.makeCurrent()},multi:!0},{provide:Rs,useFactory:function Pre(){return function Z8(n){e0=n}(document),document},deps:[]}]),Rre=new we(""),fj=[{provide:eI,useClass:class fre{addToWindow(e){ln.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Q(5103,!1);return s},ln.getAllAngularTestabilities=()=>e.getAllTestabilities(),ln.getAllAngularRootElements=()=>e.getAllRootElements(),ln.frameworkStabilizers||(ln.frameworkStabilizers=[]),ln.frameworkStabilizers.push(r=>{const i=ln.getAllAngularTestabilities();let s=i.length;const o=function(){s--,0==s&&r()};i.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?lc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:DU,useClass:eD,deps:[Rt,tD,eI]},{provide:eD,useClass:eD,deps:[Rt,tD,eI]}],pj=[{provide:Ng,useValue:"root"},{provide:Js,useFactory:function Dre(){return new Js},deps:[]},{provide:kD,useClass:wre,multi:!0,deps:[Rs,Rt,Ao]},{provide:kD,useClass:Are,multi:!0,deps:[Rs]},UD,sj,rj,{provide:DC,useExisting:UD},{provide:class Fne{},useClass:pre,deps:[]},[]];let gj=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:lm,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(ge(Rre,12))};static#t=this.\u0275mod=cs({type:n});static#n=this.\u0275inj=vi({providers:[...pj,...fj],imports:[Pne,Iee]})}return n})(),Ore=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(ge(Rs))};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var se=ut(467),Ef=ut(1635);const yj=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function vj(n){return St(n?.then)}function Ej(n){return St(n[fo])}function Cj(n){return Symbol.asyncIterator&&St(n?.[Symbol.asyncIterator])}function Ij(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const wj=function Lre(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Tj(n){return St(n?.[wj])}function bj(n){return(0,Ef.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Ef.N3)(t.read());if(i)return yield(0,Ef.N3)(void 0);yield yield(0,Ef.N3)(r)}}finally{t.releaseLock()}})}function Aj(n){return St(n?.getReader)}function ms(n){if(n instanceof on)return n;if(null!=n){if(Ej(n))return function Vre(n){return new on(e=>{const t=n[fo]();if(St(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(yj(n))return function Ure(n){return new on(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(vj(n))return function Bre(n){return new on(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,xa)})}(n);if(Cj(n))return Sj(n);if(Tj(n))return function jre(n){return new on(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Aj(n))return function $re(n){return Sj(bj(n))}(n)}throw Ij(n)}function Sj(n){return new on(e=>{(function Hre(n,e){var t,r,i,s;return(0,Ef.sH)(this,void 0,void 0,function*(){try{for(t=(0,Ef.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function sl(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Ku(n,e=0){return _e((t,r)=>{t.subscribe(Fe(r,i=>sl(r,n,()=>r.next(i),e),()=>sl(r,n,()=>r.complete(),e),i=>sl(r,n,()=>r.error(i),e)))})}function Cf(n,e=0){return _e((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Dj(n,e){if(!n)throw new Error("Iterable cannot be null");return new on(t=>{sl(t,e,()=>{const r=n[Symbol.asyncIterator]();sl(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function xn(n,e){return e?function Qre(n,e){if(null!=n){if(Ej(n))return function zre(n,e){return ms(n).pipe(Cf(e),Ku(e))}(n,e);if(yj(n))return function Gre(n,e){return new on(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(vj(n))return function qre(n,e){return ms(n).pipe(Cf(e),Ku(e))}(n,e);if(Cj(n))return Dj(n,e);if(Tj(n))return function Wre(n,e){return new on(t=>{let r;return sl(t,e,()=>{r=n[wj](),sl(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>St(r?.return)&&r.return()})}(n,e);if(Aj(n))return function Kre(n,e){return Dj(bj(n),e)}(n,e)}throw Ij(n)}(n,e):ms(n)}function $D(n){return n[n.length-1]}function HD(n){return St($D(n))?n.pop():void 0}function p_(n){return function Yre(n){return n&&St(n.schedule)}($D(n))?n.pop():void 0}function Xe(...n){return xn(n,p_(n))}const{isArray:Jre}=Array,{getPrototypeOf:Xre,prototype:eie,keys:tie}=Object;function Pj(n){if(1===n.length){const e=n[0];if(Jre(e))return{args:e,keys:null};if(function nie(n){return n&&"object"==typeof n&&Xre(n)===eie}(e)){const t=tie(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:rie}=Array;function Mj(n){return He(e=>function iie(n,e){return rie(e)?n(...e):n(e)}(n,e))}function Rj(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function zD(...n){const e=p_(n),t=HD(n),{args:r,keys:i}=Pj(n);if(0===r.length)return xn([],e);const s=new on(function sie(n,e,t=Lr){return r=>{Oj(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)Oj(e,()=>{const c=xn(n[l],e);let h=!1;c.subscribe(Fe(r,g=>{s[l]=g,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>Rj(i,o):Lr));return t?s.pipe(Mj(t)):s}function Oj(n,e,t){n?sl(t,n,e):e()}const PI=Ht(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Si(n,e,t=1/0){return St(e)?Si((r,i)=>He((s,o)=>e(r,s,i,o))(ms(n(r,i))),t):("number"==typeof e&&(t=e),_e((r,i)=>function oie(n,e,t,r,i,s,o,a){const l=[];let c=0,h=0,g=!1;const _=()=>{g&&!l.length&&!c&&e.complete()},E=T=>c<r?I(T):l.push(T),I=T=>{s&&e.next(T),c++;let S=!1;ms(t(T,h++)).subscribe(Fe(e,L=>{i?.(L),s?E(L):e.next(L)},()=>{S=!0},void 0,()=>{if(S)try{for(c--;l.length&&c<r;){const L=l.shift();o?sl(e,o,()=>I(L)):I(L)}_()}catch(L){e.error(L)}}))};return n.subscribe(Fe(e,E,()=>{g=!0,_()})),()=>{a?.()}}(r,i,n,t)))}function If(n=1/0){return Si(Lr,n)}function qD(...n){return function aie(){return If(1)}()(xn(n,p_(n)))}function Nj(n){return new on(e=>{ms(n()).subscribe(e)})}function MI(n,e){const t=St(n)?n:()=>n,r=i=>i.error(t());return new on(e?i=>e.schedule(r,0,i):r)}const xo=new on(n=>n.complete());function GD(){return _e((n,e)=>{let t=null;n._refCount++;const r=Fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class xj extends on{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,W(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zt;const t=this.getSubject();e.add(this.source.subscribe(Fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zt.EMPTY)}return e}refCount(){return GD()(this)}}function $r(n,e){return _e((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Fe(r,l=>{i?.unsubscribe();let c=0;const h=s++;ms(n(l,h)).subscribe(i=Fe(r,g=>r.next(e?e(l,g,h,c++):g),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function wf(n){return n<=0?()=>xo:_e((e,t)=>{let r=0;e.subscribe(Fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function RI(...n){const e=p_(n);return _e((t,r)=>{(e?qD(n,t,e):qD(n,t)).subscribe(r)})}function ko(n,e){return _e((t,r)=>{let i=0;t.subscribe(Fe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function OI(n){return _e((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function kj(n=cie){return _e((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function cie(){return new PI}function uc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ko((i,s)=>n(i,s,r)):Lr,wf(1),t?OI(e):kj(()=>new PI))}function g_(n,e){return St(e)?Si(n,e,1):Si(n,1)}function Di(n,e,t){const r=St(n)||e||t?{next:n,error:e,complete:t}:n;return r?_e((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Fe(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Lr}function Tf(n){return _e((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Fe(t,void 0,void 0,o=>{s=ms(n(o,Tf(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function bf(n,e){return _e(function uie(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(Fe(o,h=>{const g=c++;l=a?n(l,h,g):(a=!0,h),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}function WD(n){return n<=0?()=>xo:_e((e,t)=>{let r=[];e.subscribe(Fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function KD(n){return _e((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const vt="primary",m_=Symbol("RouteTitle");class pie{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Af(n){return new pie(n)}function gie(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(":"===o[0])i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function pa(n,e){const t=n?QD(n):void 0,r=e?QD(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Fj(n[i],e[i]))return!1;return!0}function QD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Fj(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Lj(n){return n.length>0?n[n.length-1]:null}function dc(n){return function Fre(n){return!!n&&(n instanceof on||St(n.lift)&&St(n.subscribe))}(n)?n:i_(n)?xn(Promise.resolve(n)):Xe(n)}const _ie={exact:function Bj(n,e,t){if(!Qu(n.segments,e.segments)||!NI(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Bj(n.children[r],e.children[r],t))return!1;return!0},subset:jj},Vj={exact:function yie(n,e){return pa(n,e)},subset:function vie(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Fj(n[t],e[t]))},ignored:()=>!0};function Uj(n,e,t){return _ie[t.paths](n.root,e.root,t.matrixParams)&&Vj[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function jj(n,e,t){return $j(n,e,e.segments,t)}function $j(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Qu(i,t)||e.hasChildren()||!NI(i,t,r))}if(n.segments.length===t.length){if(!Qu(n.segments,t)||!NI(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!jj(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Qu(n.segments,i)&&NI(n.segments,i,r)&&n.children[vt])&&$j(n.children[vt],e,s,r)}}function NI(n,e,t){return e.every((r,i)=>Vj[t](n[i].parameters,r.parameters))}class Sf{constructor(e=new gn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Af(this.queryParams),this._queryParamMap}toString(){return Iie.serialize(this)}}class gn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kI(this)}}class __{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Af(this.parameters),this._parameterMap}toString(){return qj(this)}}function Qu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Df=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:()=>new xI,providedIn:"root"})}return n})();class xI{parse(e){const t=new Nie(e);return new Sf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${y_(e.root,!0)}`,r=function bie(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${FI(t)}=${FI(i)}`).join("&"):`${FI(t)}=${FI(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function wie(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Iie=new xI;function kI(n){return n.segments.map(e=>qj(e)).join("/")}function y_(n,e){if(!n.hasChildren())return kI(n);if(e){const t=n.children[vt]?y_(n.children[vt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==vt&&r.push(`${i}:${y_(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Cie(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===vt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==vt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===vt?[y_(n.children[vt],!1)]:[`${i}:${y_(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[vt]?`${kI(n)}/${t[0]}`:`${kI(n)}/(${t.join("//")})`}}function Hj(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function FI(n){return Hj(n).replace(/%3B/gi,";")}function YD(n){return Hj(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function LI(n){return decodeURIComponent(n)}function zj(n){return LI(n.replace(/\+/g,"%20"))}function qj(n){return`${YD(n.path)}${function Tie(n){return Object.entries(n).map(([e,t])=>`;${YD(e)}=${YD(t)}`).join("")}(n.parameters)}`}const Aie=/^[^\/()?;#]+/;function ZD(n){const e=n.match(Aie);return e?e[0]:""}const Sie=/^[^\/()?;=#]+/,Pie=/^[^=?&#]+/,Rie=/^[^&#]+/;class Nie{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new gn([],{}):new gn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[vt]=new gn(e,t)),r}parseSegment(){const e=ZD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new __(LI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Die(n){const e=n.match(Sie);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=ZD(this.remaining);i&&(r=i,this.capture(r))}e[LI(t)]=LI(r)}parseQueryParam(e){const t=function Mie(n){const e=n.match(Pie);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function Oie(n){const e=n.match(Rie);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=zj(t),s=zj(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ZD(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Q(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=vt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[vt]:new gn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}}function Gj(n){return n.segments.length>0?new gn([],{[vt]:n}):n}function Wj(n){const e={};for(const[r,i]of Object.entries(n.children)){const s=Wj(i);if(r===vt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function xie(n){if(1===n.numberOfChildren&&n.children[vt]){const e=n.children[vt];return new gn(n.segments.concat(e.segments),e.children)}return n}(new gn(n.segments,e))}function v_(n){return n instanceof Sf}function Kj(n){let e;const i=Gj(function t(s){const o={};for(const l of s.children){const c=t(l);o[l.outlet]=c}const a=new gn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function Qj(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return JD(i,i,i,t,r);const s=function Fie(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Zj(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new Zj(t,e,r)}(e);if(s.toRoot())return JD(i,i,new gn([],{}),t,r);const o=function Lie(n,e,t){if(n.isAbsolute)return new UI(e,!0,0);if(!t)return new UI(e,!1,NaN);if(null===t.parent)return new UI(t,!0,0);const r=VI(n.commands[0])?0:1;return function Vie(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new UI(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?C_(o.segmentGroup,o.index,s.commands):Jj(o.segmentGroup,o.index,s.commands);return JD(i,o.segmentGroup,a,t,r)}function VI(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function E_(n){return"object"==typeof n&&null!=n&&n.outlets}function JD(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(h=>`${h}`):`${c}`}),o=n===e?t:Yj(n,e,t);const a=Gj(Wj(o));return new Sf(a,s,i)}function Yj(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:Yj(s,e,t)}),new gn(n.segments,r)}class Zj{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&VI(r[0]))throw new Q(4003,!1);const i=r.find(E_);if(i&&i!==Lj(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class UI{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Jj(n,e,t){if(n??=new gn([],{}),0===n.segments.length&&n.hasChildren())return C_(n,e,t);const r=function Bie(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(E_(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!e$(l,c,o))return s;r+=2}else{if(!e$(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new gn(n.segments.slice(0,r.pathIndex),{});return s.children[vt]=new gn(n.segments.slice(r.pathIndex),n.children),C_(s,0,i)}return r.match&&0===i.length?new gn(n.segments,{}):r.match&&!n.hasChildren()?XD(n,e,t):r.match?C_(n,0,i):XD(n,e,t)}function C_(n,e,t){if(0===t.length)return new gn(n.segments,{});{const r=function Uie(n){return E_(n[0])?n[0].outlets:{[vt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==vt)&&n.children[vt]&&1===n.numberOfChildren&&0===n.children[vt].segments.length){const s=C_(n.children[vt],e,t);return new gn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=Jj(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new gn(n.segments,i)}}function XD(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(E_(s)){const l=jie(s.outlets);return new gn(r,l)}if(0===i&&VI(t[0])){r.push(new __(n.segments[e].path,Xj(t[0]))),i++;continue}const o=E_(s)?s.outlets[vt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&VI(a)?(r.push(new __(o,Xj(a))),i+=2):(r.push(new __(o,{})),i++)}return new gn(r,{})}function jie(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=XD(new gn([],{}),0,r))}),e}function Xj(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function e$(n,e,t){return n==t.path&&pa(e,t.parameters)}const I_="imperative";var Ut=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ut||{});class ga{constructor(e,t){this.id=e,this.url=t}}class BI extends ga{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ut.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ol extends ga{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ut.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Ns=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ns||{}),jI=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(jI||{});class Yu extends ga{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ut.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pf extends ga{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ut.NavigationSkipped}}class eP extends ga{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ut.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class t$ extends ga{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ut.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $ie extends ga{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ut.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hie extends ga{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ut.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zie extends ga{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ut.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qie extends ga{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ut.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gie{constructor(e){this.route=e,this.type=Ut.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Wie{constructor(e){this.route=e,this.type=Ut.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Kie{constructor(e){this.snapshot=e,this.type=Ut.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qie{constructor(e){this.snapshot=e,this.type=Ut.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yie{constructor(e){this.snapshot=e,this.type=Ut.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zie{constructor(e){this.snapshot=e,this.type=Ut.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class n${constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Ut.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class tP{}class $I{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}class Jie{constructor(e){this.injector=e,this.outlet=null,this.route=null,this.children=new w_(this.injector),this.attachRef=null}}let w_=(()=>{class n{constructor(t){this.parentInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Jie(this.parentInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)(ge(Qr))};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class r${constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=nP(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=nP(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=rP(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return rP(e,this._root).map(t=>t.value)}}function nP(n,e){if(n===e.value)return e;for(const t of e.children){const r=nP(n,t);if(r)return r}return null}function rP(n,e){if(n===e.value)return[e];for(const t of e.children){const r=rP(n,t);if(r.length)return r.unshift(e),r}return[]}class Fo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Mf(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class i$ extends r${constructor(e,t){super(e),this.snapshot=t,iP(this,e)}toString(){return this.snapshot.toString()}}function s$(n){const e=function Xie(n){const s=new zI([],{},{},"",{},vt,n,null,{});return new o$("",new Fo(s,[]))}(n),t=new te([new __("",{})]),r=new te({}),i=new te({}),s=new te({}),o=new te(""),a=new Rf(t,r,s,o,i,vt,n,e.root);return a.snapshot=e.root,new i$(new Fo(a,[]),e)}class Rf{constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(He(c=>c[m_]))??Xe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(He(e=>Af(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(He(e=>Af(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function HI(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&l$(i)&&(r.resolve[m_]=i.title),r}class zI{get title(){return this.data?.[m_]}constructor(e,t,r,i,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Af(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Af(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class o$ extends r${constructor(e,t){super(t),this.url=e,iP(this,t)}toString(){return a$(this._root)}}function iP(n,e){e.value._routerState=n,e.children.forEach(t=>iP(n,t))}function a$(n){const e=n.children.length>0?` { ${n.children.map(a$).join(", ")} } `:"";return`${n.value}${e}`}function sP(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,pa(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),pa(e.params,t.params)||n.paramsSubject.next(t.params),function mie(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!pa(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),pa(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function oP(n,e){const t=pa(n.params,e.params)&&function Eie(n,e){return Qu(n,e)&&n.every((t,r)=>pa(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||oP(n.parent,e.parent))}function l$(n){return"string"==typeof n.title||null===n.title}let aP=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=vt,this.activateEvents=new sr,this.deactivateEvents=new sr,this.attachEvents=new sr,this.detachEvents=new sr,this.parentContexts=ue(w_),this.location=ue(So),this.changeDetector=ue(o_),this.inputBinder=ue(qI,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new lP(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=nt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[us]})}return n})();class lP{__ngOutletInjector(e){return new lP(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Rf?this.route:e===w_?this.childContexts:this.parent.get(e,t)}}const qI=new we("");let c$=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=zD([r.queryParams,r.params,r.data]).pipe($r(([s,o,a],l)=>(a={...s,...o,...a},0===l?Xe(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function cte(n){const e=yt(n);if(!e)return null;const t=new Lm(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();function T_(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function tse(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return T_(n,r,i);return T_(n,r)})}(n,e,t);return new Fo(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>T_(n,a)),o}}const r=function nse(n){return new Rf(new te(n.url),new te(n.params),new te(n.queryParams),new te(n.fragment),new te(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>T_(n,s));return new Fo(r,i)}}class cP{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const u$="ngNavigationCancelingError";function GI(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=v_(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=d$(!1,Ns.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function d$(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[u$]=!0,t.cancellationCode=e,t}function h$(n){return!!n&&n[u$]}let f$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Sr({type:n,selectors:[["ng-component"]],standalone:!0,features:[Z2],decls:1,vars:0,template:function(r,i){1&r&&er(0,"router-outlet")},dependencies:[aP],encapsulation:2})}return n})();function uP(n){const e=n.children&&n.children.map(uP),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==vt&&(t.component=f$),t}function Lo(n){return n.outlet||vt}function b_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class use{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),sP(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Mf(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Mf(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Mf(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Mf(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Zie(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Qie(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(sP(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),sP(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=b_(i.snapshot);o.attachRef=null,o.route=i,o.injector=a??o.injector,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class p${constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class WI{constructor(e,t){this.component=e,this.route=t}}function dse(n,e,t){const r=n._root;return A_(r,e?e._root:null,t,[r.value])}function Of(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function Jb(n){return null!==eh(n)}(n)?e.get(n):n:r}function A_(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Mf(e);return n.children.forEach(o=>{(function fse(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function pse(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Qu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Qu(n.url,e.url)||!pa(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oP(n,e)||!pa(n.queryParams,e.queryParams);default:return!oP(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new p$(r)):(s.data=o.data,s._resolvedData=o._resolvedData),A_(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new WI(a.outlet.component,o))}else o&&S_(e,a,i),i.canActivateChecks.push(new p$(r)),A_(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>S_(a,t.getContext(o),i)),i}function S_(n,e,t){const r=Mf(n),i=n.value;Object.entries(r).forEach(([s,o])=>{S_(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new WI(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function D_(n){return"function"==typeof n}function g$(n){return n instanceof PI||"EmptyError"===n?.name}const KI=Symbol("INITIAL_VALUE");function Nf(){return $r(n=>zD(n.map(e=>e.pipe(wf(1),RI(KI)))).pipe(He(e=>{for(const t of e)if(!0!==t){if(t===KI)return KI;if(!1===t||Cse(t))return t}return!0}),ko(e=>e!==KI),wf(1)))}function Cse(n){return v_(n)||n instanceof cP}function m$(n){return function Wo(...n){return Pl(n)}(Di(e=>{if("boolean"!=typeof e)throw GI(0,e)}),He(e=>!0===e))}class dP{constructor(e){this.segmentGroup=e||null}}class QI extends Error{constructor(e){super(),this.urlTree=e}}function xf(n){return MI(new dP(n))}class xse{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Xe(r);if(i.numberOfChildren>1||!i.children[vt])return MI(new Q(4e3,!1));i=i.children[vt]}}applyRedirectCommands(e,t,r,i,s){if("string"!=typeof t){const a=t,{queryParams:l,fragment:c,routeConfig:h,url:g,outlet:_,params:E,data:I,title:T}=i,S=Hi(s,()=>a({params:E,data:I,queryParams:l,fragment:c,routeConfig:h,url:g,outlet:_,title:T}));if(S instanceof Sf)throw new QI(S);t=S}const o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if("/"===t[0])throw new QI(o);return o}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Sf(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&":"===s[0]){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new gn(s,o)}createSegments(e,t,r,i){return t.map(s=>":"===s.path[0]?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const hP={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function kse(n,e,t,r,i){const s=fP(n,e,t);return s.matched?(r=function ise(n,e){return n.providers&&!n._injector&&(n._injector=xC(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Rse(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Xe(i.map(o=>{const a=Of(o,n);return dc(function Ese(n){return n&&D_(n.canMatch)}(a)?a.canMatch(e,t):Hi(n,()=>a(e,t)))})).pipe(Nf(),m$()):Xe(!0)}(r,e,t).pipe(He(o=>!0===o?s:{...hP}))):Xe(s)}function fP(n,e,t){if("**"===e.path)return function Fse(n){return{matched:!0,parameters:n.length>0?Lj(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...hP}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||gie)(t,n,e);if(!i)return{...hP};const s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function _$(n,e,t,r){return t.length>0&&function Use(n,e,t){return t.some(r=>YI(n,e,r)&&Lo(r)!==vt)}(n,t,r)?{segmentGroup:new gn(e,Vse(r,new gn(t,n.children))),slicedSegments:[]}:0===t.length&&function Bse(n,e,t){return t.some(r=>YI(n,e,r))}(n,t,r)?{segmentGroup:new gn(n.segments,Lse(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new gn(n.segments,n.children),slicedSegments:t}}function Lse(n,e,t,r){const i={};for(const s of t)if(YI(n,e,s)&&!r[Lo(s)]){const o=new gn([],{});i[Lo(s)]=o}return{...r,...i}}function Vse(n,e){const t={};t[vt]=e;for(const r of n)if(""===r.path&&Lo(r)!==vt){const i=new gn([],{});t[Lo(r)]=i}return t}function YI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Hse{}class Gse{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new xse(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){const e=_$(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(He(({children:t,rootSnapshot:r})=>{const i=new Fo(r,t),s=new o$("",i),o=function kie(n,e,t=null,r=null){return Qj(Kj(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){const t=new zI([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),vt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,vt,t).pipe(He(r=>({children:r,rootSnapshot:t})),Tf(r=>{if(r instanceof QI)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof dP?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(He(o=>o instanceof Fo?[o]:[]))}processChildren(e,t,r,i){const s=[];for(const o of Object.keys(r.children))"primary"===o?s.unshift(o):s.push(o);return xn(s).pipe(g_(o=>{const a=r.children[o],l=function lse(n,e){const t=n.filter(r=>Lo(r)===e);return t.push(...n.filter(r=>Lo(r)!==e)),t}(t,o);return this.processSegmentGroup(e,l,a,o,i)}),bf((o,a)=>(o.push(...a),o)),OI(null),function die(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ko((i,s)=>n(i,s,r)):Lr,WD(1),t?OI(e):kj(()=>new PI))}(),Si(o=>{if(null===o)return xf(r);const a=y$(o);return function Wse(n){n.sort((e,t)=>e.value.outlet===vt?-1:t.value.outlet===vt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),Xe(a)}))}processSegment(e,t,r,i,s,o,a){return xn(t).pipe(g_(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,s,o,a).pipe(Tf(c=>{if(c instanceof dP)return Xe(null);throw c}))),uc(l=>!!l),Tf(l=>{if(g$(l))return function $se(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?Xe(new Hse):xf(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,l){return function jse(n,e,t,r){return!!(Lo(n)===r||r!==vt&&YI(e,t,n))&&fP(e,n,t).matched}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,l):xf(i):xf(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){const{matched:l,parameters:c,consumedSegments:h,positionalParamSegments:g,remainingSegments:_}=fP(t,i,s);if(!l)return xf(t);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const E=new zI(s,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,v$(i),Lo(i),i.component??i._loadedComponent??null,i,E$(i)),I=HI(E,a,this.paramsInheritanceStrategy);E.params=Object.freeze(I.params),E.data=Object.freeze(I.data);const T=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,g,E,e);return this.applyRedirects.lineralizeSegments(i,T).pipe(Si(S=>this.processSegment(e,r,t,S.concat(_),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){const a=kse(t,r,i,e);return"**"===r.path&&(t.children={}),a.pipe($r(l=>l.matched?this.getChildConfig(e=r._injector??e,r,i).pipe($r(({routes:c})=>{const h=r._loadedInjector??e,{parameters:g,consumedSegments:_,remainingSegments:E}=l,I=new zI(_,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,v$(r),Lo(r),r.component??r._loadedComponent??null,r,E$(r)),T=HI(I,o,this.paramsInheritanceStrategy);I.params=Object.freeze(T.params),I.data=Object.freeze(T.data);const{segmentGroup:S,slicedSegments:L}=_$(t,_,E,c);if(0===L.length&&S.hasChildren())return this.processChildren(h,c,S,I).pipe(He(H=>new Fo(I,H)));if(0===c.length&&0===L.length)return Xe(new Fo(I,[]));const O=Lo(r)===s;return this.processSegment(h,c,S,L,O?vt:s,!0,I).pipe(He(H=>new Fo(I,H instanceof Fo?[H]:[])))})):xf(t)))}getChildConfig(e,t,r){return t.children?Xe({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Xe({routes:t._loadedRoutes,injector:t._loadedInjector}):function Mse(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Xe(!0):Xe(i.map(o=>{const a=Of(o,n);return dc(function mse(n){return n&&D_(n.canLoad)}(a)?a.canLoad(e,t):Hi(n,()=>a(e,t)))})).pipe(Nf(),m$())}(e,t,r).pipe(Si(i=>i?this.configLoader.loadChildren(e,t).pipe(Di(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Nse(n){return MI(d$(!1,Ns.GuardRejected))}())):Xe({routes:[],injector:e})}}function Kse(n){const e=n.value.routeConfig;return e&&""===e.path}function y$(n){const e=[],t=new Set;for(const r of n){if(!Kse(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=y$(r.children);e.push(new Fo(r.value,i))}return e.filter(r=>!t.has(r))}function v$(n){return n.data||{}}function E$(n){return n.resolve||{}}function C$(n){const e=n.children.map(t=>C$(t)).flat();return[n,...e]}function pP(n){return $r(e=>{const t=n(e);return t?xn(t).pipe(He(()=>e)):Xe(e)})}let I$=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===vt);return r}getResolvedTitleForRoute(t){return t.data[m_]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:()=>ue(eoe),providedIn:"root"})}return n})(),eoe=(()=>{class n extends I${constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(ge(Ore))};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const kf=new we("",{providedIn:"root",factory:()=>({})}),Ff=new we("");let gP=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ue(xU)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Xe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=dc(t.loadComponent()).pipe(He(w$),Di(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),KD(()=>{this.componentLoaders.delete(t)})),i=new xj(r,()=>new M).pipe(GD());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Xe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function toe(n,e,t,r){return dc(n.loadChildren()).pipe(He(w$),Si(i=>i instanceof WL||Array.isArray(i)?Xe(i):xn(e.compileModuleAsync(i))),He(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(Ff,[],{optional:!0,self:!0}).flat()),{routes:o.map(uP),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(KD(()=>{this.childrenLoaders.delete(r)})),o=new xj(s,()=>new M).pipe(GD());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function w$(n){return function noe(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let mP=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:()=>ue(roe),providedIn:"root"})}return n})(),roe=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const T$=new we(""),b$=new we("");function ioe(n,e,t){const r=n.get(b$),i=n.get(Rs);return n.get(Rt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s;const o=new Promise(c=>{s=c}),a=i.startViewTransition(()=>(s(),function soe(n){return new Promise(e=>{sS(e,{injector:n})})}(n))),{onViewTransitionCreated:l}=r;return l&&Hi(n,()=>l({transition:a,from:e,to:t})),o})}const A$=new we("");let ZI=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new M,this.transitionAbortSubject=new M,this.configLoader=ue(gP),this.environmentInjector=ue(Qr),this.urlSerializer=ue(Df),this.rootContexts=ue(w_),this.location=ue(c_),this.inputBindingEnabled=null!==ue(qI,{optional:!0}),this.titleStrategy=ue(I$),this.options=ue(kf,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ue(mP),this.createViewTransition=ue(T$,{optional:!0}),this.navigationErrorHandler=ue(A$,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Xe(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Wie(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Gie(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new te({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:I_,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ko(s=>0!==s.id),He(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),$r(s=>{let o=!1,a=!1;return Xe(s).pipe($r(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ns.SupersededByNewNavigation),xo;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!c&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const g="";return this.events.next(new Pf(l.id,this.urlSerializer.serialize(l.rawUrl),g,jI.IgnoredSameUrlNavigation)),l.resolve(!1),xo}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Xe(l).pipe($r(g=>{const _=this.transitions?.getValue();return this.events.next(new BI(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),_!==this.transitions?.getValue()?xo:Promise.resolve(g)}),function Qse(n,e,t,r,i,s){return Si(o=>function zse(n,e,t,r,i,s,o="emptyOnly"){return new Gse(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(He(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Di(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:g.urlAfterRedirects};const _=new t$(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:g,extractedUrl:_,source:E,restoredState:I,extras:T}=l,S=new BI(g,this.urlSerializer.serialize(_),E,I);this.events.next(S);const L=s$(this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:L,urlAfterRedirects:_,extras:{...T,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=_,Xe(s)}{const g="";return this.events.next(new Pf(l.id,this.urlSerializer.serialize(l.extractedUrl),g,jI.IgnoredByUrlHandlingStrategy)),l.resolve(!1),xo}}),Di(l=>{const c=new $ie(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),He(l=>(this.currentTransition=s={...l,guards:dse(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function Ise(n,e){return Si(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Xe({...t,guardsResult:!0}):function wse(n,e,t,r){return xn(n).pipe(Si(i=>function Pse(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Xe(s.map(a=>{const l=b_(e)??i,c=Of(a,l);return dc(function vse(n){return n&&D_(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):Hi(l,()=>c(n,e,t,r))).pipe(uc())})).pipe(Nf()):Xe(!0)}(i.component,i.route,t,e,r)),uc(i=>!0!==i,!0))}(o,r,i,n).pipe(Si(a=>a&&function gse(n){return"boolean"==typeof n}(a)?function Tse(n,e,t,r){return xn(e).pipe(g_(i=>qD(function Ase(n,e){return null!==n&&e&&e(new Kie(n)),Xe(!0)}(i.route.parent,r),function bse(n,e){return null!==n&&e&&e(new Yie(n)),Xe(!0)}(i.route,r),function Dse(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function hse(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Nj(()=>Xe(o.guards.map(l=>{const c=b_(o.node)??t,h=Of(l,c);return dc(function yse(n){return n&&D_(n.canActivateChild)}(h)?h.canActivateChild(r,n):Hi(c,()=>h(r,n))).pipe(uc())})).pipe(Nf())));return Xe(s).pipe(Nf())}(n,i.path,t),function Sse(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Xe(!0);const i=r.map(s=>Nj(()=>{const o=b_(e)??t,a=Of(s,o);return dc(function _se(n){return n&&D_(n.canActivate)}(a)?a.canActivate(e,n):Hi(o,()=>a(e,n))).pipe(uc())}));return Xe(i).pipe(Nf())}(n,i.route,t))),uc(i=>!0!==i,!0))}(r,s,n,e):Xe(a)),He(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),Di(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&"boolean"!=typeof l.guardsResult)throw GI(0,l.guardsResult);const c=new Hie(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),ko(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",Ns.GuardRejected),!1)),pP(l=>{if(l.guards.canActivateChecks.length)return Xe(l).pipe(Di(c=>{const h=new zie(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),$r(c=>{let h=!1;return Xe(c).pipe(function Yse(n,e){return Si(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Xe(t);const s=new Set(i.map(l=>l.route)),o=new Set;for(const l of s)if(!o.has(l))for(const c of C$(l))o.add(c);let a=0;return xn(o).pipe(g_(l=>s.has(l)?function Zse(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!l$(i)&&(s[m_]=i.title),function Jse(n,e,t,r){const i=QD(n);if(0===i.length)return Xe({});const s={};return xn(i).pipe(Si(o=>function Xse(n,e,t,r){const i=b_(e)??r,s=Of(n,i);return dc(s.resolve?s.resolve(e,t):Hi(i,()=>s(e,t)))}(n[o],e,t,r).pipe(uc(),Di(a=>{if(a instanceof cP)throw GI(new xI,a);s[o]=a}))),WD(1),function hie(n){return He(()=>n)}(s),Tf(o=>g$(o)?xo:MI(o)))}(s,n,e,r).pipe(He(o=>(n._resolvedData=o,n.data=HI(n,n.parent,t).resolve,null)))}(l,r,n,e):(l.data=HI(l,l.parent,n).resolve,Xe(void 0))),Di(()=>a++),WD(1),Si(l=>a===o.size?Xe(t):xo))})}(this.paramsInheritanceStrategy,this.environmentInjector),Di({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(c,"",Ns.NoDataFromResolver)}}))}),Di(c=>{const h=new qie(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}))}),pP(l=>{const c=h=>{const g=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(h.routeConfig).pipe(Di(_=>{h.component=_}),He(()=>{})));for(const _ of h.children)g.push(...c(_));return g};return zD(c(l.targetSnapshot.root)).pipe(OI(null),wf(1))}),pP(()=>this.afterPreactivation()),$r(()=>{const{currentSnapshot:l,targetSnapshot:c}=s,h=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return h?xn(h).pipe(He(()=>s)):Xe(s)}),He(l=>{const c=function ese(n,e,t){const r=T_(n,e._root,t?t._root:void 0);return new i$(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},this.currentNavigation.targetRouterState=c,s}),Di(()=>{this.events.next(new tP)}),((n,e,t,r)=>He(i=>(new use(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),wf(1),Di({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ol(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),function fie(n){return _e((e,t)=>{ms(n).subscribe(Fe(t,()=>t.complete(),zo)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(Di(l=>{throw l}))),KD(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Ns.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Tf(l=>{if(a=!0,h$(l))this.events.next(new Yu(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function rse(n){return h$(n)&&v_(n.url)}(l)?this.events.next(new $I(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{const c=new eP(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{const h=Hi(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(h instanceof cP){const{message:g,cancellationCode:_}=GI(0,h);this.events.next(new Yu(s.id,this.urlSerializer.serialize(s.extractedUrl),g,_)),this.events.next(new $I(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(c);const g=t.errorHandler(l);s.resolve(!!g)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return xo}))}))}cancelNavigationTransition(t,r,i){const s=new Yu(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ooe(n){return n!==I_}let aoe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:()=>ue(coe),providedIn:"root"})}return n})();class loe{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let coe=(()=>{class n extends loe{static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Jr(n)))(i||n)}})();static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),S$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:()=>ue(uoe),providedIn:"root"})}return n})(),uoe=(()=>{class n extends S${constructor(){super(...arguments),this.location=ue(c_),this.urlSerializer=ue(Df),this.options=ue(kf,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ue(mP),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Sf,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=s$(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof BI)this.stateMemento=this.createStateMemento();else if(t instanceof Pf)this.rawUrlTree=r.initialUrl;else if(t instanceof t$){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(i,r)}}else t instanceof tP?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):t instanceof Yu&&(t.code===Ns.GuardRejected||t.code===Ns.NoDataFromResolver)?this.restoreHistory(r):t instanceof eP?this.restoreHistory(r,!0):t instanceof ol&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&0===s&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Jr(n)))(i||n)}})();static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var P_=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(P_||{});function D$(n,e){n.events.pipe(ko(t=>t instanceof ol||t instanceof Yu||t instanceof eP||t instanceof Pf),He(t=>t instanceof ol||t instanceof Pf?P_.COMPLETE:t instanceof Yu&&(t.code===Ns.Redirect||t.code===Ns.SupersededByNewNavigation)?P_.REDIRECTING:P_.FAILED),ko(t=>t!==P_.REDIRECTING),wf(1)).subscribe(()=>{e()})}function doe(n){throw n}const hoe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},foe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ma=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=ue(wU),this.stateManager=ue(S$),this.options=ue(kf,{optional:!0})||{},this.pendingTasks=ue(Vu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ue(ZI),this.urlSerializer=ue(Df),this.location=ue(c_),this.urlHandlingStrategy=ue(mP),this._events=new M,this.errorHandler=this.options.errorHandler||doe,this.navigated=!1,this.routeReuseStrategy=ue(aoe),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ue(Ff,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ue(qI,{optional:!0}),this.eventsSubscription=new zt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==i&&null!==s)if(this.stateManager.handleRouterEvent(r,s),r instanceof Yu&&r.code!==Ns.Redirect&&r.code!==Ns.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ol)this.navigated=!0;else if(r instanceof $I){const o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||ooe(i.source),...o};this.scheduleNavigation(a,I_,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function goe(n){return!(n instanceof tP||n instanceof $I)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),I_,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(uP),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:o;let g,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{g=Kj(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),g=this.currentUrlTree.root}return Qj(g,t,h,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=v_(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,I_,null,r)}navigate(t,r={skipLocationChange:!1}){return function poe(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new Q(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...hoe}:!1===r?{...foe}:r,v_(t))return Uj(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Uj(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(null!=s&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((g,_)=>{a=g,l=_});const h=this.pendingTasks.add();return D$(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(g=>Promise.reject(g))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lf=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new M,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof ol&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const r=null===this.href?null:function j1(n,e,t){return function L6(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?B1:_m}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(ye(ma),ye(Rf),function om(n){return function f8(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Hl(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Wt(),n)}("tabindex"),ye(ua),ye(Ss),ye(Gu))};static#t=this.\u0275dir=nt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&en("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&Do("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",_f],skipLocationChange:[2,"skipLocationChange","skipLocationChange",_f],replaceUrl:[2,"replaceUrl","replaceUrl",_f],routerLink:"routerLink"},standalone:!0,features:[GL,us]})}return n})(),P$=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,s,o){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new sr,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof ol&&this.update()})}ngAfterContentInit(){Xe(this.links.changes,Xe(null)).pipe(If()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=xn(t).pipe(If()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function moe(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{const s=i.urlTree;return!!s&&t.isActive(s,r)}}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ye(ma),ye(Ss),ye(ua),ye(o_),ye(Lf,8))};static#t=this.\u0275dir=nt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(1&r&&function P2(n,e,t,r){AL(n,e,t,r)}(s,Lf,5),2&r){let o;(function M2(n){const e=ne(),t=gt(),r=VA();HE(r+1);const i=mS(t,r);if(n.dirty&&function To(n){return!(4&~n[Ke])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)n.reset([]);else{const s=DL(e,r);n.reset(s,Kk),n.notifyOnChanges()}return!0}return!1})(o=R2())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[us]})}return n})();class M${}let _oe=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ko(t=>t instanceof ol),g_(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=xC(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return xn(i).pipe(If())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Xe(null);const s=i.pipe(Si(o=>null===o?Xe(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?xn([s,this.loader.loadComponent(r)]).pipe(If()):s})}static#e=this.\u0275fac=function(r){return new(r||n)(ge(ma),ge(xU),ge(Qr),ge(M$),ge(gP))};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const _P=new we("");let R$=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=ue(Qr),o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof BI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ol?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Pf&&t.code===jI.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof n$&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){var i=this;this.zone.runOutsideAngular((0,se.A)(function*(){yield new Promise(s=>{setTimeout(()=>{s()}),sS(()=>{s()},{injector:i.environmentInjector})}),i.zone.run(()=>{i.transitions.events.next(new n$(t,"popstate"===i.lastSource?i.store[i.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function hF(){throw new Error("invalid")}()};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();function _a(n,e){return{\u0275kind:n,\u0275providers:e}}function N$(){const n=ue(Rr);return e=>{const t=n.get(Ro);if(e!==t.components[0])return;const r=n.get(ma),i=n.get(x$);1===n.get(yP)&&r.initialNavigation(),n.get(k$,null,wt.Optional)?.setUpPreloading(),n.get(_P,null,wt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const x$=new we("",{factory:()=>new M}),yP=new we("",{providedIn:"root",factory:()=>1}),k$=new we("");function Coe(n){return _a(0,[{provide:k$,useExisting:_oe},{provide:M$,useExisting:n}])}function woe(n){return _a(9,[{provide:T$,useValue:ioe},{provide:b$,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const F$=new we("ROUTER_FORROOT_GUARD"),Toe=[c_,{provide:Df,useClass:xI},ma,w_,{provide:Rf,useFactory:function O$(n){return n.routerState.root},deps:[ma]},gP,[]];let L$=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Toe,[],{provide:Ff,multi:!0,useValue:t},{provide:F$,useFactory:Doe,deps:[[ma,new sh,new oh]]},{provide:kf,useValue:r||{}},r?.useHash?{provide:Gu,useClass:pte}:{provide:Gu,useClass:MB},{provide:_P,useFactory:()=>{const n=ue(One),e=ue(Rt),t=ue(kf),r=ue(ZI),i=ue(Df);return t.scrollOffset&&n.setOffset(t.scrollOffset),new R$(i,r,n,e,t)}},r?.preloadingStrategy?Coe(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Poe(r):[],r?.bindToComponentInputs?_a(8,[c$,{provide:qI,useExisting:c$}]).\u0275providers:[],r?.enableViewTransitions?woe().\u0275providers:[],[{provide:V$,useFactory:N$},{provide:tI,multi:!0,useExisting:V$}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ff,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(ge(F$,8))};static#t=this.\u0275mod=cs({type:n});static#n=this.\u0275inj=vi({})}return n})();function Doe(n){return"guarded"}function Poe(n){return["disabled"===n.initialNavigation?_a(3,[{provide:rD,multi:!0,useFactory:()=>{const e=ue(ma);return()=>{e.setUpLocationChangeListener()}}},{provide:yP,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?_a(2,[{provide:yP,useValue:0},{provide:rD,multi:!0,deps:[Rr],useFactory:e=>{const t=e.get(hte,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(ma),s=e.get(x$);D$(i,()=>{r(!0)}),e.get(ZI).afterPreactivation=()=>(r(!0),s.closed?Xe(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const V$=new we("");let Roe=(()=>{class n{ngOnInit(){this.setupVideoLoop()}setupVideoLoop(){const t=document.getElementById("background-video"),r=["assets/videos/IMG_4171.mp4","assets/videos/IMG_4242.mp4","assets/videos/IMG_4437.mp4"];let i=0;t.addEventListener("ended",()=>{i=(i+1)%r.length,t.src=r[i],t.play()})}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Sr({type:n,selectors:[["app-home"]],decls:20,vars:0,consts:[["aria-label","Content",1,"page-content"],[1,"video-container"],["id","background-video","autoplay","","muted","","playsinline",""],["src","assets/videos/IMG_4171.mp4","type","video/mp4"],[1,"wrapper"],["id","meet-bob-"],[1,"welcome-text"],[1,"image-container"],["src","/assets/bob.jpg","alt","Bob's Picture",1,"intro-image"],[1,"info-text"],["routerLink","/about",1,"page-link"],[1,"fas","fa-paw"],[1,"cta-container"],["routerLink","/about",1,"cta-button"]],template:function(r,i){1&r&&(Ce(0,"main",0)(1,"div",1)(2,"video",2),er(3,"source",3),ve()(),Ce(4,"div",4)(5,"h1",5),be(6,"Meet Bob \u{1f431}"),ve(),Ce(7,"p",6),be(8," Welcome to the official site of Bob, the most charming cat you\u2019ll ever meet. "),ve(),Ce(9,"div",7),er(10,"img",8),ve(),Ce(11,"p",9),be(12," Looking to learn more about our fluffy friend? Check out "),Ce(13,"a",10),er(14,"i",11),be(15," About Bob "),ve(),be(16,". "),ve(),Ce(17,"div",12)(18,"a",13),be(19,"Learn More About Bob"),ve()()()())},dependencies:[Lf],styles:['.highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}.page-content[_ngcontent-%COMP%]{position:relative;overflow:hidden;color:#333;font-family:Roboto,sans-serif;padding:20px}.video-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;z-index:-1}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;min-width:100%;min-height:100%;width:auto;height:auto;transform:translate(-50%,-50%);opacity:.4;object-fit:cover;filter:brightness(70%)}.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;max-width:800px;margin:0 auto;background:#f7f9fc;box-shadow:0 4px 8px #0000001a;border-radius:8px;padding:40px;position:relative;z-index:1}#meet-bob-[_ngcontent-%COMP%]{color:#eb94bd;text-align:center;font-size:2.5rem;margin-bottom:20px;position:relative}#meet-bob-[_ngcontent-%COMP%]:after{content:"";width:60px;height:4px;background-color:#2e4057;display:block;margin:10px auto 0;border-radius:2px}.welcome-text[_ngcontent-%COMP%], .info-text[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.8;margin-bottom:20px;text-align:center}.page-link[_ngcontent-%COMP%]{position:relative;color:#2e4057;text-decoration:none;transition:color .3s}.page-link[_ngcontent-%COMP%]:hover{color:#eb94bd}.page-link[_ngcontent-%COMP%]:after{content:"";position:absolute;width:0;height:2px;background-color:#eb94bd;left:0;bottom:-5px;transition:width .3s}.page-link[_ngcontent-%COMP%]:hover:after{width:100%}.page-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}.image-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:600px;margin:20px 0}.image-container[_ngcontent-%COMP%]   .intro-image[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:10px;transition:transform .3s,box-shadow .3s}.image-container[_ngcontent-%COMP%]   .intro-image[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 8px 16px #0003}.image-container[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;border:0px solid rgba(235,148,189,.5);border-radius:10px;pointer-events:none}.cta-container[_ngcontent-%COMP%]{text-align:center;margin:40px 0}.cta-button[_ngcontent-%COMP%]{background-color:#eb94bd;color:#fff;padding:15px 30px;border-radius:50px;text-decoration:none;font-size:1.2rem;transition:background-color .3s}.cta-button[_ngcontent-%COMP%]:hover{background-color:#e369a2}@media (max-width: 768px){#meet-bob-[_ngcontent-%COMP%]{font-size:2rem}.wrapper[_ngcontent-%COMP%]{padding:20px}.cta-button[_ngcontent-%COMP%]{font-size:1rem;padding:10px 20px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{display:none}}']})}return n})();function Ooe(n,e){if(1&n&&(qm(0),Ce(1,"section",2),er(2,"img",3),Ce(3,"p",4),be(4),ve()(),Gm()),2&n){const t=e.$implicit;st(),xS("background-color",t.bgColor)("color",t.fgColor),st(),Yt("src",t.image,_m)("alt",t.alt),st(2),gs(t.text)}}let Noe=(()=>{class n{constructor(){this.sections=[{image:"/assets/about_me/initial.png",alt:"Bob being mysterious",bgColor:"#FFEBEE",fgColor:"#004D40",text:"Hey there, I\u2019m Bob, but I\u2019ve gone by a few names in my time. You see, I\u2019m quite the mysterious kitty.\n             My original name was \u201cMiming,\u201d but somewhere along the way, I decided \u201cBob\u201d suited me better."},{image:"/assets/about_me/bday.jpg",alt:"Bob birthday celebration",bgColor:"#FFF3E0",fgColor:"#5D4037",text:"I celebrate my birthday on February 25th, but nobody really knows when I was born.\n             I just wandered into a hospital and that day, February 25th, was where my incredible journey began.\n             Luckily, my owner\u2019s dad found me and brought me to my forever home."},{image:"/assets/about_me/pretty.jpg",alt:"Bob looking majestic",bgColor:"#E8F5E9",fgColor:"#1B5E20",text:"I may look majestic with my regal demeanor and majestic whiskers, but don\u2019t let that fool you\u2014I\u2019m a playful and talkative kitty as well!\n             I love playtime with my humans.\n             Sometimes, I even have a play fights with another cat in the house, Adoba, who we also call \u201cPoopy.\u201d\n             We keep things interesting around here!"},{image:"/assets/about_me/fighting.jpg",alt:"Bob fighting Poopy",bgColor:"#E3F2FD",fgColor:"#0D47A1",text:"One thing you should know about me\u2014I may be declawed (thanks to a previous owner), but I can still hold my own in a fight!\n             I\u2019m also quite the chatterbox and always have something to say."},{image:"/assets/about_me/eating.jpg",alt:"Bob enjoying wet food",bgColor:"#F3E5F5",fgColor:"#4A148C",text:"When it comes to food, I\u2019m a bit of a connoisseur. I\u2019m extremely picky, and my absolute favorite is wet food, especially the kind with plenty of gravy. Yum!"},{image:"/assets/about_me/window.jpg",alt:"Bob sunbathing",bgColor:"#FFFDE7",fgColor:"#F57F17",text:"On sunny days, you\u2019ll often find me perched on a windowsill, basking in the sunlight. Sunbathing is one of my guilty pleasures."},{image:"/assets/about_me/drinking.jpg",alt:"Bob drinking from a human cup",bgColor:"#E0F7FA",fgColor:"#006064",text:"Oh, and let\u2019s talk about my favorite place to drink water from\u2014the human cups. I like to take a sip from them when I\u2019m feeling fancy."},{image:"/assets/about_me/attitude.jpg",alt:"Bob with an attitude",bgColor:"#FCE4EC",fgColor:"#880E4F",text:"But here\u2019s the thing\u2014don\u2019t be late getting home to me.\n             I might have a bit of an attitude when you arrive home late.\n             I just like to keep my humans on their toes, you know?"},{image:"/assets/about_me/magestic.jpg",alt:"Bob the Majestic Feline",bgColor:"#F1F8E9",fgColor:"#33691E",text:"So there you have it, a glimpse into the life of yours truly, Bob the Majestic Feline.\n             Thanks for visiting my page, and feel free to follow along with my adventures! \u{1f638}\u{1f43e}"}]}ngOnInit(){}onWindowScroll(){document.querySelectorAll(".about-section").forEach(r=>{r.getBoundingClientRect().top<window.innerHeight-100&&r.classList.add("visible")})}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Sr({type:n,selectors:[["app-about"]],hostBindings:function(r,i){1&r&&en("scroll",function(){return i.onWindowScroll()},0,q1)},decls:4,vars:1,consts:[[1,"about-bob"],[4,"ngFor","ngForOf"],[1,"about-section"],[1,"about-image",3,"src","alt"],[1,"about-text"]],template:function(r,i){1&r&&(Ce(0,"section",0)(1,"h1"),be(2,"Scroll down to meet Bob!"),ve()(),Ur(3,Ooe,5,7,"ng-container",1)),2&r&&(st(3),Yt("ngForOf",i.sections))},dependencies:[cc],styles:[".highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}.about-bob[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;color:#eb94bd;text-align:center;font-size:2.5rem;padding:2rem 0}.about-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;padding:3rem 1.5rem;background-color:#f7f9fc;color:#333;text-align:center;transition:background-color .5s ease,color .5s ease;opacity:0;transform:translateY(20px);transition:opacity .6s ease,transform .6s ease}.about-section.visible[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.about-section[_ngcontent-%COMP%]   .about-image[_ngcontent-%COMP%]{width:100%;max-width:300px;border-radius:15px;margin-bottom:1.5rem;transition:transform .3s ease,box-shadow .3s ease}.about-section[_ngcontent-%COMP%]   .about-image[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 8px 16px #0003}.about-section[_ngcontent-%COMP%]   .about-text[_ngcontent-%COMP%]{max-width:600px;font-size:1.2rem;line-height:1.6;font-family:Roboto,sans-serif}@media (prefers-reduced-motion: no-preference){.about-section[_ngcontent-%COMP%]{opacity:0;transform:translateY(20px)}.about-section.visible[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.about-section[_ngcontent-%COMP%]{padding:2rem 1rem;text-align:center}.about-section[_ngcontent-%COMP%]   .about-image[_ngcontent-%COMP%]{max-width:250px}.about-bob[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}"]})}return n})();const xoe=[{filename:"IMG_4482.png",caption:"Denzel Washington Bob",isZoomed:!1},{filename:"IMG_4509.JPG",caption:"Bob's Casual Adventure Day",isZoomed:!1},{filename:"IMG_4553.png",caption:"Grandma Bob",isZoomed:!1},{filename:"IMG_4558.png",caption:"Bob Takes a Sip From Mama's Water Cup",isZoomed:!1},{filename:"IMG_4575.png",caption:"Wow, She Can Yawn!",isZoomed:!1},{filename:"IMG_4669.png",caption:"Bob and the Cardboard Box Retreat",isZoomed:!1},{filename:"IMG_1606.jpg",caption:"Window world\u{1fa9f}\u{1f30f}",isZoomed:!1},{filename:"IMG_4676.png",caption:"Guess Which One is Bob",isZoomed:!1},{filename:"IMG_4688.png",caption:"Bob's Unconventional Nap Position",isZoomed:!1},{filename:"IMG_9980.jpg",caption:"Box cat\u{1f4e6}",isZoomed:!1},{filename:"IMG_4654.jpg",caption:"Bob & Poopy",isZoomed:!1},{filename:"IMG_7030.jpeg",caption:"Christmas Bob\u{1f385}\u{1f3fc}\u{1f384}",isZoomed:!1},{filename:"IMG_2590.jpg",caption:"Majestic outdoors Bob\u{1f3d5}\ufe0f",isZoomed:!1},{filename:"IMG_0536.jpg",caption:"2 legged on laptop Bob\u{1f996}",isZoomed:!1},{filename:"IMG_1071.jpg",caption:"Black\u{1f5a4} & Pink\u{1fa77}feeties Bob",isZoomed:!1},{filename:"IMG_2799.jpg",caption:"Laundry World\u{1f457}\u{1f45a}",isZoomed:!1},{filename:"IMG_3215.png",caption:"Stalking/Lurking Bob\u{1f3c3}\u{1f3fb}\u200d\u2640\ufe0f\u{1f977}\u{1f3fb}",isZoomed:!1},{filename:"IMG_9782.png",caption:"Vegetarian Bob\u{1f966}",isZoomed:!1}],koe=n=>({hovered:n});function Foe(n,e){if(1&n){const t=Hu();Ce(0,"div",2),en("mouseenter",function(){const i=Ys(t).index;return Zs($n().hoveredIndex=i)})("mouseleave",function(){return Ys(t),Zs($n().hoveredIndex=-1)}),Ce(1,"a",3),er(2,"img",4),ve(),Ce(3,"div",5),be(4),ve()()}if(2&n){const t=e.$implicit,r=e.index,i=$n();Yt("ngClass",X2(5,koe,r===i.hoveredIndex)),st(),Do("href","assets/photos/"+t.filename,_m)("data-title",t.caption),st(),Yt("src","assets/photos/"+t.filename,_m),st(2),gs(t.caption)}}let Loe=(()=>{class n{constructor(t){this.renderer=t,this.imagesList=xoe,this.hoveredIndex=-1}ngOnInit(){this.loadLightbox2()}loadLightbox2(){const t=this.renderer.createElement("link");t.rel="stylesheet",t.href="assets/css/lightbox.min.css",this.renderer.appendChild(document.head,t);const r=this.renderer.createElement("script");r.src="assets/js/lightbox.min.js",r.onload=()=>{window.lightbox.option({resizeDuration:200,wrapAround:!0})},this.renderer.appendChild(document.body,r)}static#e=this.\u0275fac=function(r){return new(r||n)(ye(ua))};static#t=this.\u0275cmp=Sr({type:n,selectors:[["app-gallery"]],decls:2,vars:1,consts:[[1,"image-gallery"],["class","image-item",3,"ngClass","mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"image-item",3,"mouseenter","mouseleave","ngClass"],["data-lightbox","gallery"],["alt","Image",3,"src"],[1,"image-caption"]],template:function(r,i){1&r&&(Ce(0,"div",0),Ur(1,Foe,5,7,"div",1),ve()),2&r&&(st(),Yt("ngForOf",i.imagesList))},dependencies:[jB,cc],styles:[".image-gallery-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.image-gallery[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.image-item[_ngcontent-%COMP%]{position:relative;overflow:hidden;border-radius:10px;box-shadow:0 4px 6px #0000001a;width:200px;height:200px}.image-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:10px}.image-caption[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;background-color:#00000080;color:#fff;padding:5px;text-align:center;font-size:14px}.image-item[_ngcontent-%COMP%]:hover{transform:scale(1.1);transition:transform .2s ease-in-out}"]})}return n})(),Voe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Sr({type:n,selectors:[["app-bob-life"]],decls:40,vars:0,consts:[["aria-label","Content",1,"page-content"],[1,"wrapper"]],template:function(r,i){1&r&&(Ce(0,"main",0)(1,"div",1)(2,"h1"),be(3,"A Day in My Life \u{1f43e}"),ve(),Ce(4,"section")(5,"h2"),be(6,"Morning Adventures"),ve(),Ce(7,"ul")(8,"li"),be(9,"In the morning, I meow for food because breakfast is the most important meal of the day."),ve(),Ce(10,"li"),be(11,"If my human takes too long to wake up, I meow near the door to remind them I'm hungry."),ve(),Ce(12,"li"),be(13,"I pretend to walk on them and meow even more for food once they finally wake up."),ve(),Ce(14,"li"),be(15,"After eating, I follow my human downstairs, meowing like I haven't eaten in years! (even though it's probably only been 4 hours...)."),ve()()(),Ce(16,"section")(17,"h2"),be(18,"Post-Breakfast Rituals"),ve(),Ce(19,"ul")(20,"li"),be(21,"After breakfast, it's time for my favorite activity: sunbathing!"),ve(),Ce(22,"li"),be(23,"I like to freeze and pretend to be a statue, ready to pounce on any unsuspecting toy or piece of string."),ve(),Ce(24,"li"),be(25,"I occasionally munch on some grass \u2013 don't judge me; it's a cat thing!"),ve(),Ce(26,"li"),be(27,"Bothering my owner is a must. I meow and drag my favorite toy around for some playtime."),ve(),Ce(28,"li"),be(29,"For extra attention, I like to step on my owner's neck while they're trying to relax. I think she likes it!"),ve()()(),Ce(30,"section")(31,"h2"),be(32,"Bedtime Antics"),ve(),Ce(33,"ul")(34,"li"),be(35,"When my human comes home, I'm always happy to see her. But if she take too long to get in bed, I will give her an attitude."),ve(),Ce(36,"li"),be(37,"I bite my owners ankles and playfully chase them like they're my prey until they finally get into bed."),ve(),Ce(38,"li"),be(39,"The moment they get into bed, I snuggle up close \u2013 because nighttime is cuddle time!"),ve()()()()())},styles:["main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{padding:20px;text-align:left}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{margin-bottom:20px}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:disc;padding-left:20px}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:16px;margin-bottom:8px}main.page-content[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}"]})}return n})();function Uoe(n,e){1&n&&US(0)}function Boe(n,e){if(1&n&&(Ce(0,"span"),be(1),ve()),2&n){const t=$n().$implicit;st(),gs(t)}}function joe(n,e){if(1&n&&(Ce(0,"li"),Ur(1,Uoe,1,0,"ng-container",5)(2,Boe,2,1,"span",5),ve()),2&n){const t=e.$implicit,r=$n(4);st(),Yt("ngIf",r.isNameCategory(t)),st(),Yt("ngIf",!r.isNameCategory(t))}}function $oe(n,e){if(1&n&&(Ce(0,"ul"),Ur(1,joe,3,2,"li",2),ve()),2&n){const t=$n(2).$implicit;st(),Yt("ngForOf",t.children)}}function Hoe(n,e){if(1&n){const t=Hu();qm(0),Ce(1,"h2",4),en("click",function(){Ys(t);const i=$n().$implicit;return Zs($n().toggleCategory(i))}),be(2),ve(),Ur(3,$oe,2,1,"ul",5),Gm()}if(2&n){const t=$n().$implicit;st(),$u("is-open",t.isOpen),st(),gs(t.name),st(),Yt("ngIf",t.isOpen)}}function zoe(n,e){1&n&&be(0),2&n&&gs($n().$implicit)}function qoe(n,e){if(1&n&&(Ce(0,"li"),Ur(1,Hoe,4,4,"ng-container",3)(2,zoe,1,1,"ng-template",null,0,aU),ve()),2&n){const t=e.$implicit,r=function O2(n){return oa(function K5(){return m.lFrame.contextLView}(),Qe+n)}(3),i=$n();st(),Yt("ngIf",i.isNameCategory(t))("ngIfElse",r)}}let Goe=(()=>{class n{constructor(){this.data={name:"Bob's Names",isOpen:!0,children:[{name:"Bob",isOpen:!1,children:["Bob","Bobby","Bobby girl","Bobs","Bob-ob","Bobsicle","Bob Popsicle","Bobatha","Bob Bibby","Bob house"]},{name:"Buba",isOpen:!1,children:["Buba","Bubbas"]},{name:"Mom/Momma",isOpen:!1,children:["Mom","Mom-om","Mom Mimmy","Mommy","Mommy pie","Momma","Mommas world","Mommas mama","Momma cat","Mamma girl","Mommy pie","Mommas bubbas","Mommy girl","Mommy cat","Big momma"]},{name:"Baby",isOpen:!1,children:["Baby girl","Baby world","Baby","Baby boy","Baby mommy","Baby cat","Baby pie","Baby, my sweet maymie maymie maymie","Baby, my sweet lady lady lady"]},{name:"Maymie",isOpen:!1,children:["Maymie","Maymie baby","Maymie, my sweet baby baby baby"]},{name:"World",isOpen:!1,children:["World","Worldy","Worldy baby girl","Worley baby girly","Window world","Big world"]},{name:"Sweet",isOpen:!1,children:["Sweet baby","Sweet maymie","Sweet girl","Sweet boy","Sweetie","Sweetie weetie","Sweet heart baby fart","Sweet heart","Sweet pie","Sweet world","Sweetness","Sweetness girl","Sweetness girl in a baby world"]},{name:"Girly/Cutie",isOpen:!1,children:["Cutie pie","Girly pie","Girly cat","Pretty","Pretty baby","Pretty lady","Pretty Mimmy"]},{name:"Mim/Bib",isOpen:!1,children:["Mim","Mimmy","Bibby","Bib"]},{name:"Yum-Themed",isOpen:!1,children:["Yummy","Yummy Mommy","Yum yums","Yum yum girl","Yum yum","Yum yum cat","Yum yum mommy num num(s)","Yum yum baby num num(s)","Num nums"]},{name:"Miscellaneous",isOpen:!1,children:["Madness","Boy","Oisee mommy","Doy doy doy mommy boy","Fat girl","Big girl","Shamamma","Chamamma","Ptza ptza ptza ptza *ptza","Ruey baby rue","Waybie","Lady","Waymie baby","Mommy Origami","Quantic Bobby Girl"]}]}}toggleCategory(t){this.isNameCategory(t)&&(t.isOpen=!t.isOpen)}isNameCategory(t){return"object"==typeof t&&"name"in t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Sr({type:n,selectors:[["app-names-list"]],decls:5,vars:2,consts:[["plainText",""],[1,"name-tree"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[3,"click"],[4,"ngIf"]],template:function(r,i){1&r&&(Ce(0,"div",1)(1,"h1"),be(2),ve(),Ce(3,"ul"),Ur(4,qoe,4,2,"li",2),ve()()),2&r&&(st(2),gs(i.data.name),st(2),Yt("ngForOf",i.data.children))},dependencies:[cc,vf],styles:['@charset "UTF-8";.highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}.name-tree[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;max-width:600px;margin:20px auto;padding:20px;background-color:#f7f9fc;border-radius:8px;box-shadow:0 2px 4px #0000001a}.name-tree[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;text-align:center}.name-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.name-tree[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.name-tree[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{cursor:pointer;color:#2e4057;margin:10px 0}.name-tree[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{color:#eb94bd}.name-tree[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;padding-left:20px;color:#0b0f14;font-weight:500;font-size:1.1rem}.name-tree[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:before{content:"\\25b8";display:inline-block;margin-right:5px;transition:transform .3s ease}.name-tree[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:5px;margin-left:20px}.name-tree[_ngcontent-%COMP%]   .is-open[_ngcontent-%COMP%]:before{transform:rotate(90deg)}']})}return n})(),U$=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(ye(ua),ye(Ss))};static#t=this.\u0275dir=nt({type:n})}return n})(),Zu=(()=>{class n extends U${static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Jr(n)))(i||n)}})();static#t=this.\u0275dir=nt({type:n,features:[un]})}return n})();const ya=new we(""),Qoe={provide:ya,useExisting:rn(()=>Vf),multi:!0},Zoe=new we("");let Vf=(()=>{class n extends U${constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Yoe(){const n=lc()?lc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ye(ua),ye(Ss),ye(Zoe,8))};static#t=this.\u0275dir=nt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&en("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Hn([Qoe]),un]})}return n})();const Pi=new we(""),fc=new we("");function z$(n){return function hc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}(n.value)?{required:!0}:null}function JI(n){return null}function Y$(n){return null!=n}function Z$(n){return i_(n)?xn(n):n}function J$(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function X$(n,e){return e.map(t=>t(n))}function eH(n){return n.map(e=>function Xoe(n){return!n.validate}(e)?e:t=>e.validate(t))}function vP(n){return null!=n?function tH(n){if(!n)return null;const e=n.filter(Y$);return 0==e.length?null:function(t){return J$(X$(t,e))}}(eH(n)):null}function EP(n){return null!=n?function nH(n){if(!n)return null;const e=n.filter(Y$);return 0==e.length?null:function(t){return function Woe(...n){const e=HD(n),{args:t,keys:r}=Pj(n),i=new on(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let h=0;h<o;h++){let g=!1;ms(t[h]).subscribe(Fe(s,_=>{g||(g=!0,c--),a[h]=_},()=>l--,void 0,()=>{(!l||!g)&&(c||s.next(r?Rj(r,a):a),s.complete())}))}});return e?i.pipe(Mj(e)):i}(X$(t,e).map(Z$)).pipe(He(J$))}}(eH(n)):null}function rH(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function CP(n){return n?Array.isArray(n)?n:[n]:[]}function XI(n,e){return Array.isArray(n)?n.includes(e):n===e}function oH(n,e){const t=CP(e);return CP(n).forEach(i=>{XI(t,i)||t.push(i)}),t}function aH(n,e){return CP(e).filter(t=>!XI(n,t))}class lH{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=vP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=EP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Zi extends lH{get formDirective(){return null}get path(){return null}}class pc extends lH{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class cH{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ew=(()=>{class n extends cH{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ye(pc,2))};static#t=this.\u0275dir=nt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&$u("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[un]})}return n})(),uH=(()=>{class n extends cH{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ye(Zi,10))};static#t=this.\u0275dir=nt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&$u("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[un]})}return n})();const M_="VALID",nw="INVALID",Uf="PENDING",R_="DISABLED";class Bf{}class hH extends Bf{constructor(e,t){super(),this.value=e,this.source=t}}class TP extends Bf{constructor(e,t){super(),this.pristine=e,this.source=t}}class bP extends Bf{constructor(e,t){super(),this.touched=e,this.source=t}}class rw extends Bf{constructor(e,t){super(),this.status=e,this.source=t}}function AP(n){return(iw(n)?n.validators:n)||null}function SP(n,e){return(iw(e)?e.asyncValidators:n)||null}function iw(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class DP{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._events=new M,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===M_}get invalid(){return this.status===nw}get pending(){return this.status==Uf}get disabled(){return this.status===R_}get enabled(){return this.status!==R_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(oH(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(oH(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(aH(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(aH(e,this._rawAsyncValidators))}hasValidator(e){return XI(this._rawValidators,e)}hasAsyncValidator(e){return XI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new bP(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&!1!==e.emitEvent&&this._events.next(new bP(!1,r))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new TP(!1,r))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&!1!==e.emitEvent&&this._events.next(new TP(!0,r))}markAsPending(e={}){this.status=Uf;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new rw(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=R_,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new hH(this.value,r)),this._events.next(new rw(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=M_,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===M_||this.status===Uf)&&this._runAsyncValidator(r,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new hH(this.value,t)),this._events.next(new rw(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?R_:M_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Uf,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const r=Z$(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new rw(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new sr,this.statusChanges=new sr}_calculateStatus(){return this._allControlsDisabled()?R_:this.errors?nw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Uf)?Uf:this._anyControlsHaveStatus(nw)?nw:M_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new TP(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new bP(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){iw(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function oae(n){return Array.isArray(n)?vP(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function aae(n){return Array.isArray(n)?EP(n):n||null}(this._rawAsyncValidators)}}class PP extends DP{constructor(e,t,r){super(AP(t),SP(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function pH(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new Q(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function fH(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new Q(1e3,"");if(!r[t])throw new Q(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const jf=new we("CallSetDisabledState",{providedIn:"root",factory:()=>sw}),sw="always";function O_(n,e,t=sw){MP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function uae(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&gH(n,e)})}(n,e),function hae(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function dae(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&gH(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function cae(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function lw(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function MP(n,e){const t=function iH(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(rH(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function sH(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(rH(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();lw(e._rawValidators,i),lw(e._rawAsyncValidators,i)}function gH(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const _ae={provide:Zi,useExisting:rn(()=>uw)},N_=Promise.resolve();let uw=(()=>{class n extends Zi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new sr,this.form=new PP({},vP(t),EP(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){N_.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),O_(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){N_.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){N_.then(()=>{const r=this._findContainer(t.path),i=new PP({});(function mH(n,e){MP(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){N_.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){N_.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function _H(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(ye(Pi,10),ye(fc,10),ye(jf,8))};static#t=this.\u0275dir=nt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&en("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Hn([_ae]),un]})}return n})();function yH(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function vH(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const EH=class extends DP{constructor(e=null,t,r){super(AP(t),SP(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),iw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=vH(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){yH(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){yH(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){vH(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Eae={provide:pc,useExisting:rn(()=>x_)},wH=Promise.resolve();let x_=(()=>{class n extends pc{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new EH,this._registered=!1,this.name="",this.update=new sr,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function NP(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===Vf?t=s:function gae(n){return Object.getPrototypeOf(n.constructor)===Zu}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function OP(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){O_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){wH.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&_f(r);wH.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function ow(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(ye(Zi,9),ye(Pi,10),ye(fc,10),ye(ya,10),ye(o_,8),ye(jf,8))};static#t=this.\u0275dir=nt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Hn([Eae]),un,us]})}return n})(),TH=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=nt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})();const Iae={provide:ya,useExisting:rn(()=>xP),multi:!0};let wae=(()=>{class n{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t)return void this._accessors.splice(r,1)}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return!!t[0].control&&t[0]._parent===r._control._parent&&t[1].name===r.name}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xP=(()=>{class n extends Zu{constructor(t,r,i,s){super(t,r),this._registry=i,this._injector=s,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=ue(jf,{optional:!0})??sw}ngOnInit(){this._control=this._injector.get(pc),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static#e=this.\u0275fac=function(r){return new(r||n)(ye(ua),ye(Ss),ye(wae),ye(Rr))};static#t=this.\u0275dir=nt({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){1&r&&en("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Hn([Iae]),un]})}return n})();let Ju=(()=>{class n{constructor(){this._validator=JI}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):JI,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=nt({type:n,features:[us]})}return n})();const Vae={provide:Pi,useExisting:rn(()=>dw),multi:!0};let dw=(()=>{class n extends Ju{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=_f,this.createValidator=t=>z$}enabled(t){return t}static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Jr(n)))(i||n)}})();static#t=this.\u0275dir=nt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&Do("required",i._enabled?"":null)},inputs:{required:"required"},features:[Hn([Vae]),un]})}return n})();const $ae={provide:Pi,useExisting:rn(()=>BP),multi:!0};let BP=(()=>{class n extends Ju{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function NH(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>function K$(n){return e=>function j$(n){return null!=n&&"number"==typeof n.length}(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(t)}static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Jr(n)))(i||n)}})();static#t=this.\u0275dir=nt({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){2&r&&Do("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Hn([$ae]),un]})}return n})(),zae=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=cs({type:n});static#n=this.\u0275inj=vi({})}return n})(),Gae=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:jf,useValue:t.callSetDisabledState??sw}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=cs({type:n});static#n=this.\u0275inj=vi({imports:[zae]})}return n})();function Wae(n,e){if(1&n){const t=Hu();Ce(0,"div",6)(1,"input",7),Xm("ngModelChange",function(i){Ys(t);const s=$n().index,o=$n();return YC(o.userAnswers[s],i)||(o.userAnswers[s]=i),Zs(i)}),ve(),Ce(2,"label"),be(3),ve()()}if(2&n){const t=e.$implicit,r=$n().index,i=$n();st(),Yt("name","question"+r)("value",t),Jm("ngModel",i.userAnswers[r]),st(2),gs(t)}}function Kae(n,e){if(1&n&&(Ce(0,"div",4)(1,"p"),be(2),ve(),Ur(3,Wae,4,4,"div",5),ve()),2&n){const t=e.$implicit,r=e.index;st(2),QC("",r+1,". ",t.question,""),st(),Yt("ngForOf",t.answers)}}function Qae(n,e){1&n&&(Ce(0,"p"),be(1,"Perfect! You know Bob very well!"),ve())}function Yae(n,e){1&n&&(Ce(0,"p"),be(1,"So close! You're almost a Bob expert!"),ve())}function Zae(n,e){1&n&&(Ce(0,"p"),be(1," Keep it up! You're on your way to becoming a Bob expert. "),ve())}function Jae(n,e){1&n&&(Ce(0,"p"),be(1," Not bad! You know some things about Bob, but there's more to learn. "),ve())}function Xae(n,e){1&n&&(Ce(0,"p"),be(1,"You've got some Bobology to catch up on!"),ve())}function ele(n,e){if(1&n&&(Ce(0,"div",8)(1,"h2"),be(2),ve(),Ur(3,Qae,2,0,"p",9)(4,Yae,2,0,"p",9)(5,Zae,2,0,"p",9)(6,Jae,2,0,"p",9)(7,Xae,2,0,"p",9),ve()),2&n){const t=$n();st(2),QC("Your Score: ",t.score,"/",t.questions.length,""),st(),Yt("ngIf",t.score===t.questions.length),st(),Yt("ngIf",t.score===t.questions.length-1),st(),Yt("ngIf",t.score>=5&&t.score<t.questions.length-1),st(),Yt("ngIf",t.score>0&&t.score<5),st(),Yt("ngIf",0===t.score)}}let tle=(()=>{class n{constructor(){this.questions=[{question:"Where is Bob's favorite place to lay down on her owner?",answers:["Lap","Neck","Shoulder","Feet"],correctAnswer:"Neck"},{question:"What is Bob's favorite flavor of tube treat?",answers:["Salmon","Chicken","Tuna","Beef"],correctAnswer:"Tuna"},{question:"When is Bob's birthday?",answers:["February 14th","February 25th","March 3rd","January 1st"],correctAnswer:"February 25th"},{question:"What gender is Bob?",answers:["Lady","Gentleman","",""],correctAnswer:"Lady"},{question:"Who would beat Bob in a fight?",answers:["Godzilla","A T-Rex","King Kong","None of the above"],correctAnswer:"None of the above"},{question:"Which paw on Bob is pink?",answers:["Front right","Back left","Front left","Back right"],correctAnswer:"Back left"},{question:"Who is Bob's arch-nemesis?",answers:["Adoba","Neighbor's dog","Bird outside","The vacuum"],correctAnswer:"Adoba"},{question:"What\u2019s Bob\u2019s favorite time of day?",answers:["Early morning","Nap time","Dinner time","Late night"],correctAnswer:"Nap time"},{question:"What is Bob's superpower?",answers:["Invisibility","Teleportation","Mind control","Cuteness overload"],correctAnswer:"Cuteness overload"}],this.userAnswers=new Array(this.questions.length).fill(""),this.quizSubmitted=!1,this.score=0}submitQuiz(){this.score=0;for(let t=0;t<this.questions.length;t++)this.userAnswers[t]===this.questions[t].correctAnswer&&this.score++;this.quizSubmitted=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Sr({type:n,selectors:[["app-quiz"]],decls:7,vars:2,consts:[[1,"quiz-container"],["class","question-block",4,"ngFor","ngForOf"],[3,"click"],["class","results",4,"ngIf"],[1,"question-block"],["class","answer-option",4,"ngFor","ngForOf"],[1,"answer-option"],["type","radio",3,"ngModelChange","name","value","ngModel"],[1,"results"],[4,"ngIf"]],template:function(r,i){1&r&&(Ce(0,"div",0)(1,"h1"),be(2,"Test Your Knowledge of Bob \u{1f431}"),ve(),Ur(3,Kae,4,3,"div",1),Ce(4,"button",2),en("click",function(){return i.submitQuiz()}),be(5,"Submit Answers"),ve(),Ur(6,ele,8,7,"div",3),ve()),2&r&&(st(3),Yt("ngForOf",i.questions),st(3),Yt("ngIf",i.quizSubmitted))},dependencies:[cc,vf,Vf,xP,ew,x_],styles:[".highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}.quiz-container[_ngcontent-%COMP%]{max-width:600px;margin:20px auto;padding:20px;background-color:#f7f9fc;border-radius:8px;box-shadow:0 4px 8px #0000001a;font-family:Roboto,sans-serif}h1[_ngcontent-%COMP%]{color:#eb94bd;text-align:center}.question-block[_ngcontent-%COMP%]{margin-bottom:20px}.question-block[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;color:#333}.question-block[_ngcontent-%COMP%]   .answer-option[_ngcontent-%COMP%]{margin-left:20px;display:flex;align-items:center;font-size:1rem;color:#2e4057}.question-block[_ngcontent-%COMP%]   .answer-option[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:10px}button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;background-color:#eb94bd;color:#fff;border:none;border-radius:5px;font-size:1.1rem;cursor:pointer;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#e369a2}.results[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.results[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#eb94bd;font-size:1.8rem}.results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#333}"]})}return n})(),nle=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Sr({type:n,selectors:[["app-anthem"]],decls:25,vars:0,consts:[["aria-label","Content",1,"page-content"],[1,"wrapper"],["id","anthem-title"],[1,"decorative-elements"],[1,"fireworks",2,"background-image","url('/assets/bob.jpg')"],[1,"stars",2,"background-image","url('/assets/bob.jpg')"],[1,"welcome-text"]],template:function(r,i){1&r&&(Ce(0,"main",0)(1,"div",1)(2,"h1",2),be(3,"Star Spangled Bobby Girl"),ve(),Ce(4,"div",3),er(5,"div",4)(6,"div",5),ve(),Ce(7,"p",6),be(8," O say can you see, by the Yum yum's early light,"),er(9,"br"),be(10," What so Sweet heart we hailed, at the Maymie's last meow,"),er(11,"br"),be(12," Whose broad Bobsicles and bright stars, through the perilous Mommy pie fight,"),er(13,"br"),be(14," O'er the ramparts Bobitha watched, were so gallantly streaming?"),er(15,"br"),be(16," And the baby fart's red glare, Bob pops bursting in Big world air,"),er(17,"br"),be(18," Gave proof through the Momom, that our Baby boy was still there;"),er(19,"br"),be(20," O, say, does that bobby girl maymie, yet wave,"),er(21,"br"),be(22," O'er the land of the Window world,"),er(23,"br"),be(24," and the home of the Worldey baby girly. "),ve()()())},styles:['.page-content[_ngcontent-%COMP%]{background-color:#fff;padding:20px;display:flex;justify-content:center;align-items:center}.wrapper[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;background:linear-gradient(to bottom,#f8c0c0,#f1f1f1);border:2px solid #000;padding:20px;box-shadow:0 4px 6px #0000001a}.wrapper[_ngcontent-%COMP%]   h1#anthem-title[_ngcontent-%COMP%]{font-size:2.5rem;color:#0033a0;text-align:center;padding-bottom:20px;border-bottom:2px solid #BD202E;margin-bottom:20px}.wrapper[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]{font-size:1rem;line-height:1.6;margin:20px 0;text-align:left;padding:0 10px}.wrapper[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]   br[_ngcontent-%COMP%]{content:"";display:block;margin:1em 0}@media (max-width: 600px){.wrapper[_ngcontent-%COMP%]   .welcome-text[_ngcontent-%COMP%]{font-size:.9rem;padding:0 15px}}@media screen and (max-width: 768px){.wrapper[_ngcontent-%COMP%]{padding:15px}.wrapper[_ngcontent-%COMP%]   h1#anthem-title[_ngcontent-%COMP%]{font-size:2rem}}']})}return n})(),rle=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Sr({type:n,selectors:[["app-page-not-found"]],decls:11,vars:0,consts:[[1,"page-not-found"],["src","assets/bob404.png","alt","Bob the cat as a construction worker",1,"not-found-image"],["routerLink","/"]],template:function(r,i){1&r&&(Ce(0,"div",0)(1,"h1"),be(2,"Oops!"),ve(),Ce(3,"p"),be(4,"It looks like Bob is still building this page."),ve(),er(5,"img",1),Ce(6,"p"),be(7,"Let's get you back "),Ce(8,"a",2),be(9,"home"),ve(),be(10,"."),ve()())},dependencies:[Lf],styles:[".page-not-found[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#333}.page-not-found[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:tomato}.page-not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}.page-not-found[_ngcontent-%COMP%]   .not-found-image[_ngcontent-%COMP%]{max-width:100%;height:auto;margin:20px 0}.page-not-found[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.page-not-found[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return n})();function ile(n,e){if(1&n&&(Ce(0,"div",5)(1,"p"),be(2),ve()()),2&n){const t=$n().$implicit;st(2),gs(t.answer)}}function sle(n,e){if(1&n){const t=Hu();Ce(0,"div",2)(1,"div",3),en("click",function(){const i=Ys(t).$implicit;return Zs($n().toggleAnswer(i))}),Ce(2,"h3"),be(3),ve()(),Ur(4,ile,3,1,"div",4),ve()}if(2&n){const t=e.$implicit;st(3),gs(t.question),st(),Yt("ngIf",t.show)}}let ole=(()=>{class n{constructor(){this.faqs=[{question:"Is she a maymie?",answer:"Absolutely! She is a maymie lady.",show:!1},{question:"Is she a baby?",answer:"Yes, her name is Baby World.",show:!1},{question:"Can you air fry her?",answer:"No, she is too pretty.",show:!1},{question:"Does she love to play?",answer:"Oh yes, especially when its late at night and her owner wants to go to bed!",show:!1},{question:"What's her favorite snack?",answer:"She loves tube treats!",show:!1},{question:"What is your return policy?",answer:"We dont have a return polcicy, she is not for sale...",show:!1},{question:"How do I track my order?",answer:"She cant be ordered... but she likes to go outside and wander around the house!",show:!1},{question:"Do you ship internationally?",answer:"Hey! Who made this webiste...",show:!1}]}toggleAnswer(t){t.show=!t.show}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Sr({type:n,selectors:[["app-faq"]],decls:4,vars:1,consts:[[1,"faq-container"],["class","faq-item",4,"ngFor","ngForOf"],[1,"faq-item"],[1,"question",3,"click"],["class","answer",4,"ngIf"],[1,"answer"]],template:function(r,i){1&r&&(Ce(0,"div",0)(1,"h2"),be(2,"Frequently Asked Questions About Bob"),ve(),Ur(3,sle,5,2,"div",1),ve()),2&r&&(st(3),Yt("ngForOf",i.faqs))},dependencies:[cc,vf],styles:[".faq-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.faq-item[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;margin-bottom:10px;padding-bottom:10px}.faq-item[_ngcontent-%COMP%]   .question[_ngcontent-%COMP%]{cursor:pointer}.faq-item[_ngcontent-%COMP%]   .question[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.faq-item[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]{margin-top:10px}.faq-item[_ngcontent-%COMP%]   .answer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]})}return n})();function ale(n,e){1&n&&(Ce(0,"p"),be(1,"Incorrect PIN. Please try again."),ve())}function lle(n,e){if(1&n){const t=Hu();Ce(0,"div")(1,"h2"),be(2,"Enter PIN to Access"),ve(),Ce(3,"form",1),en("ngSubmit",function(){return Ys(t),Zs($n().checkPin())}),Ce(4,"input",2),Xm("ngModelChange",function(i){Ys(t);const s=$n();return YC(s.pin,i)||(s.pin=i),Zs(i)}),ve(),Ce(5,"button",3),be(6,"Enter"),ve()(),Ur(7,ale,2,0,"p",0),ve()}if(2&n){const t=$n();st(4),Jm("ngModel",t.pin),st(3),Yt("ngIf",t.invalidPin)}}function cle(n,e){if(1&n&&(Ce(0,"div")(1,"p"),be(2),ve()()),2&n){const t=e.$implicit;st(2),gs(t)}}function ule(n,e){if(1&n&&(Ce(0,"div")(1,"h2"),be(2,"Secret Blog"),ve(),Ur(3,cle,3,1,"div",4),ve()),2&n){const t=$n();st(3),Yt("ngForOf",t.posts)}}let dle=(()=>{class n{constructor(){this.pin="",this.isAuthenticated=!1,this.invalidPin=!1,this.posts=["This is the first secret post.","Here is another hidden message.","More secret thoughts.","PREEY GIRL"],this.correctPin="1127"}checkPin(){this.pin===this.correctPin?(this.isAuthenticated=!0,this.invalidPin=!1):this.invalidPin=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Sr({type:n,selectors:[["app-secret-blog"]],decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngSubmit"],["type","password","name","pin","maxlength","4","required","",3,"ngModelChange","ngModel"],["type","submit"],[4,"ngFor","ngForOf"]],template:function(r,i){1&r&&Ur(0,lle,8,2,"div",0)(1,ule,4,1,"div",0),2&r&&(Yt("ngIf",!i.isAuthenticated),st(),Yt("ngIf",i.isAuthenticated))},dependencies:[cc,vf,TH,Vf,ew,uH,dw,BP,x_,uw],styles:["h2[_ngcontent-%COMP%]{color:#333}div[_ngcontent-%COMP%]{margin-bottom:20px}button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:10px 20px;border:none;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#45a049}input[type=password][_ngcontent-%COMP%]{width:80px;padding:5px}"]})}return n})();var ot=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(ot||{});const al="*";function hle(n,e){return{type:ot.Trigger,name:n,definitions:e,options:{}}}function jH(n,e=null){return{type:ot.Animate,styles:e,timings:n}}function k_(n){return{type:ot.Style,styles:n,offset:null}}function ple(n){return{type:ot.Keyframes,steps:n}}function $H(n,e,t=null){return{type:ot.Transition,expr:n,animation:e,options:t}}class F_{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class HH{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}var va=ut(7852);(0,va.registerVersion)("firebase","10.12.5","app");class Cle extends zt{constructor(e,t){super()}schedule(e,t=0){return this}}const hw={setInterval(n,e,...t){const{delegate:r}=hw;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=hw;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class zH extends Cle{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return hw.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&hw.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,wn(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const $P={now:()=>($P.delegate||Date).now(),delegate:void 0};class L_{constructor(e,t=L_.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}L_.now=$P.now;class qH extends L_{constructor(e,t=L_.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Tle=new class wle extends qH{}(class Ile extends zH{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),HP=new qH(zH),zP=new mf("ANGULARFIRE2_VERSION");class qP{constructor(){return((n,e)=>{const t=(0,va.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(Ale)}}const Ale="app-check";function $f(){}class GH{zone;delegate;constructor(e,t=Tle){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class Sle{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",$f,{},$f,$f)),t.pipe(Di({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let GP=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new GH(Zone.current)),this.insideAngular=t.run(()=>new GH(Zone.current,HP)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ge(Rt))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hr(n){return function Ple(n){return function(t){return(t=t.lift(new Sle(n.ngZone))).pipe(Cf(n.outsideAngular),Ku(n.insideAngular))}}(function Hf(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var ll=ut(3345);ll.A.registerVersion("firebase","10.12.5","app-compat");const Nle=["ngOnDestroy"];class WH{constructor(e){return e}}const V_=new we("angularfire2.app.options"),U_=new we("angularfire2.app.name");function fw(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=ll.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>ll.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;Fle("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new WH(o)}const Fle=(n,...e)=>{},Lle={provide:WH,useFactory:fw,deps:[V_,Rt,[new sh,U_]]};let Vle=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:V_,useValue:t},{provide:U_,useValue:r}]}}constructor(t){ll.A.registerVersion("angularfire",zP.full,"core"),ll.A.registerVersion("angularfire",zP.full,"app-compat"),ll.A.registerVersion("angular",vX.full,t.toString())}static \u0275fac=function(r){return new(r||n)(ge(Ao))};static \u0275mod=cs({type:n});static \u0275inj=vi({providers:[Lle]})}return n})();function WP(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function Ule(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(KH("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Ble?" You may need to reload as Firebase is not HMR aware.":""}`),KH("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const Ble=typeof module<"u"&&!!module.hot,KH=(n,...e)=>{};function KP(...n){const e=p_(n),t=function Zre(n,e){return"number"==typeof $D(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?ms(r[0]):If(t)(xn(r,e)):xo}globalThis.\u0275AngularfireInstanceCache||=[],ut(9254);class jle extends M{constructor(e=1/0,t=1/0,r=$P){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}function QH(n={}){const{connector:e=(()=>new M),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,h=!1,g=!1;const _=()=>{a?.unsubscribe(),a=void 0},E=()=>{_(),o=l=void 0,h=g=!1},I=()=>{const T=o;E(),T?.unsubscribe()};return _e((T,S)=>{c++,!g&&!h&&_();const L=l=l??e();S.add(()=>{c--,0===c&&!g&&!h&&(a=QP(I,i))}),L.subscribe(S),!o&&c>0&&(o=new Hs({next:O=>L.next(O),error:O=>{g=!0,_(),a=QP(E,t,O),L.error(O)},complete:()=>{h=!0,_(),a=QP(E,r),L.complete()}}),ms(T).subscribe(o))})(s)}}function QP(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Hs({next:()=>{r.unsubscribe(),n()}});return ms(e(...t)).subscribe(r)}function YH(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,QH({connector:()=>new jle(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ZH(n,e){return St(e)?$r(()=>n,e):$r(()=>n)}const YP=new we("angularfire2.auth.use-emulator"),ZP=new we("angularfire2.auth.settings"),JP=new we("angularfire2.auth.tenant-id"),XP=new we("angularfire2.auth.langugage-code"),eM=new we("angularfire2.auth.use-device-language"),tM=new we("angularfire.auth.persistence"),nM=(n,e,t,r,i,s,o,a)=>WP(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(const[c,h]of Object.entries(o))l.settings[c]=h;return a&&l.setPersistence(a),l},[t,r,i,s,o,a]);let rM=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,l,c,h,g,_,E){const I=new M,T=Xe(void 0).pipe(Ku(o.outsideAngular),$r(()=>s.runOutsideAngular(()=>Promise.resolve().then(ut.bind(ut,9254)))),He(()=>fw(t,s,r)),He(S=>nM(S,s,a,c,h,g,l,_)),YH({bufferSize:1,refCount:!1}));if(TI(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Xe(null);else{T.pipe(uc()).subscribe();const S=T.pipe($r(H=>H.getRedirectResult().then(oe=>oe,()=>null)),Hr,YH({bufferSize:1,refCount:!1})),L=T.pipe($r(H=>new on(oe=>({unsubscribe:s.runOutsideAngular(()=>H.onAuthStateChanged(Te=>oe.next(Te),Te=>oe.error(Te),()=>oe.complete()))})))),O=T.pipe($r(H=>new on(oe=>({unsubscribe:s.runOutsideAngular(()=>H.onIdTokenChanged(Te=>oe.next(Te),Te=>oe.error(Te),()=>oe.complete()))}))));this.authState=S.pipe(ZH(L),Cf(o.outsideAngular),Ku(o.insideAngular)),this.user=S.pipe(ZH(O),Cf(o.outsideAngular),Ku(o.insideAngular)),this.idToken=this.user.pipe($r(H=>H?xn(H.getIdToken()):Xe(null))),this.idTokenResult=this.user.pipe($r(H=>H?xn(H.getIdTokenResult()):Xe(null))),this.credential=KP(S,I,this.authState.pipe(ko(H=>!H))).pipe(He(H=>H?.user?H:null),Cf(o.outsideAngular),Ku(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(Nle.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(h=>{const g=h?.(...c);return r?.spy?.apply&&r.spy.apply(s,c,g),g})})})}))(this,T,s,{spy:{apply:(S,L,O)=>{(S.startsWith("signIn")||S.startsWith("createUser"))&&O.then(H=>I.next(H))}}})}static \u0275fac=function(r){return new(r||n)(ge(V_),ge(U_,8),ge(Ao),ge(Rt),ge(GP),ge(YP,8),ge(ZP,8),ge(JP,8),ge(XP,8),ge(eM,8),ge(tM,8),ge(qP,8))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function iM(){return _e((n,e)=>{let t,r=!1;n.subscribe(Fe(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function JH(n,e=Lr){return n=n??Hle,_e((t,r)=>{let i,s=!0;t.subscribe(Fe(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Hle(n,e){return n===e}var ed,tz,cl=ut(1362),xs=ut(8041),A=ut(1076),XH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ez={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(k,P,x){x||(x=0);var U=Array(16);if("string"==typeof P)for(var j=0;16>j;++j)U[j]=P.charCodeAt(x++)|P.charCodeAt(x++)<<8|P.charCodeAt(x++)<<16|P.charCodeAt(x++)<<24;else for(j=0;16>j;++j)U[j]=P[x++]|P[x++]<<8|P[x++]<<16|P[x++]<<24;var G=k.g[3],F=(P=k.g[0])+(G^(x=k.g[1])&((j=k.g[2])^G))+U[0]+3614090360&4294967295;F=(x=(j=(G=(P=(x=(j=(G=(P=(x=(j=(G=(P=(x=(j=(G=(P=(x=(j=(G=(P=(x=(j=(G=(P=(x=(j=(G=(P=(x=(j=(G=(P=(x=(j=(G=(P=(x=(j=(G=(P=(x=(j=(G=(P=(x=(j=(G=(P=(x=(j=(G=(P=(x=(j=(G=(P=(x=(j=(G=(P=x+(F<<7&4294967295|F>>>25))+((F=G+(j^P&(x^j))+U[1]+3905402710&4294967295)<<12&4294967295|F>>>20))+((F=j+(x^G&(P^x))+U[2]+606105819&4294967295)<<17&4294967295|F>>>15))+((F=x+(P^j&(G^P))+U[3]+3250441966&4294967295)<<22&4294967295|F>>>10))+((F=P+(G^x&(j^G))+U[4]+4118548399&4294967295)<<7&4294967295|F>>>25))+((F=G+(j^P&(x^j))+U[5]+1200080426&4294967295)<<12&4294967295|F>>>20))+((F=j+(x^G&(P^x))+U[6]+2821735955&4294967295)<<17&4294967295|F>>>15))+((F=x+(P^j&(G^P))+U[7]+4249261313&4294967295)<<22&4294967295|F>>>10))+((F=P+(G^x&(j^G))+U[8]+1770035416&4294967295)<<7&4294967295|F>>>25))+((F=G+(j^P&(x^j))+U[9]+2336552879&4294967295)<<12&4294967295|F>>>20))+((F=j+(x^G&(P^x))+U[10]+4294925233&4294967295)<<17&4294967295|F>>>15))+((F=x+(P^j&(G^P))+U[11]+2304563134&4294967295)<<22&4294967295|F>>>10))+((F=P+(G^x&(j^G))+U[12]+1804603682&4294967295)<<7&4294967295|F>>>25))+((F=G+(j^P&(x^j))+U[13]+4254626195&4294967295)<<12&4294967295|F>>>20))+((F=j+(x^G&(P^x))+U[14]+2792965006&4294967295)<<17&4294967295|F>>>15))+((F=x+(P^j&(G^P))+U[15]+1236535329&4294967295)<<22&4294967295|F>>>10))+((F=P+(j^G&(x^j))+U[1]+4129170786&4294967295)<<5&4294967295|F>>>27))+((F=G+(x^j&(P^x))+U[6]+3225465664&4294967295)<<9&4294967295|F>>>23))+((F=j+(P^x&(G^P))+U[11]+643717713&4294967295)<<14&4294967295|F>>>18))+((F=x+(G^P&(j^G))+U[0]+3921069994&4294967295)<<20&4294967295|F>>>12))+((F=P+(j^G&(x^j))+U[5]+3593408605&4294967295)<<5&4294967295|F>>>27))+((F=G+(x^j&(P^x))+U[10]+38016083&4294967295)<<9&4294967295|F>>>23))+((F=j+(P^x&(G^P))+U[15]+3634488961&4294967295)<<14&4294967295|F>>>18))+((F=x+(G^P&(j^G))+U[4]+3889429448&4294967295)<<20&4294967295|F>>>12))+((F=P+(j^G&(x^j))+U[9]+568446438&4294967295)<<5&4294967295|F>>>27))+((F=G+(x^j&(P^x))+U[14]+3275163606&4294967295)<<9&4294967295|F>>>23))+((F=j+(P^x&(G^P))+U[3]+4107603335&4294967295)<<14&4294967295|F>>>18))+((F=x+(G^P&(j^G))+U[8]+1163531501&4294967295)<<20&4294967295|F>>>12))+((F=P+(j^G&(x^j))+U[13]+2850285829&4294967295)<<5&4294967295|F>>>27))+((F=G+(x^j&(P^x))+U[2]+4243563512&4294967295)<<9&4294967295|F>>>23))+((F=j+(P^x&(G^P))+U[7]+1735328473&4294967295)<<14&4294967295|F>>>18))+((F=x+(G^P&(j^G))+U[12]+2368359562&4294967295)<<20&4294967295|F>>>12))+((F=P+(x^j^G)+U[5]+4294588738&4294967295)<<4&4294967295|F>>>28))+((F=G+(P^x^j)+U[8]+2272392833&4294967295)<<11&4294967295|F>>>21))+((F=j+(G^P^x)+U[11]+1839030562&4294967295)<<16&4294967295|F>>>16))+((F=x+(j^G^P)+U[14]+4259657740&4294967295)<<23&4294967295|F>>>9))+((F=P+(x^j^G)+U[1]+2763975236&4294967295)<<4&4294967295|F>>>28))+((F=G+(P^x^j)+U[4]+1272893353&4294967295)<<11&4294967295|F>>>21))+((F=j+(G^P^x)+U[7]+4139469664&4294967295)<<16&4294967295|F>>>16))+((F=x+(j^G^P)+U[10]+3200236656&4294967295)<<23&4294967295|F>>>9))+((F=P+(x^j^G)+U[13]+681279174&4294967295)<<4&4294967295|F>>>28))+((F=G+(P^x^j)+U[0]+3936430074&4294967295)<<11&4294967295|F>>>21))+((F=j+(G^P^x)+U[3]+3572445317&4294967295)<<16&4294967295|F>>>16))+((F=x+(j^G^P)+U[6]+76029189&4294967295)<<23&4294967295|F>>>9))+((F=P+(x^j^G)+U[9]+3654602809&4294967295)<<4&4294967295|F>>>28))+((F=G+(P^x^j)+U[12]+3873151461&4294967295)<<11&4294967295|F>>>21))+((F=j+(G^P^x)+U[15]+530742520&4294967295)<<16&4294967295|F>>>16))+((F=x+(j^G^P)+U[2]+3299628645&4294967295)<<23&4294967295|F>>>9))+((F=P+(j^(x|~G))+U[0]+4096336452&4294967295)<<6&4294967295|F>>>26))+((F=G+(x^(P|~j))+U[7]+1126891415&4294967295)<<10&4294967295|F>>>22))+((F=j+(P^(G|~x))+U[14]+2878612391&4294967295)<<15&4294967295|F>>>17))+((F=x+(G^(j|~P))+U[5]+4237533241&4294967295)<<21&4294967295|F>>>11))+((F=P+(j^(x|~G))+U[12]+1700485571&4294967295)<<6&4294967295|F>>>26))+((F=G+(x^(P|~j))+U[3]+2399980690&4294967295)<<10&4294967295|F>>>22))+((F=j+(P^(G|~x))+U[10]+4293915773&4294967295)<<15&4294967295|F>>>17))+((F=x+(G^(j|~P))+U[1]+2240044497&4294967295)<<21&4294967295|F>>>11))+((F=P+(j^(x|~G))+U[8]+1873313359&4294967295)<<6&4294967295|F>>>26))+((F=G+(x^(P|~j))+U[15]+4264355552&4294967295)<<10&4294967295|F>>>22))+((F=j+(P^(G|~x))+U[6]+2734768916&4294967295)<<15&4294967295|F>>>17))+((F=x+(G^(j|~P))+U[13]+1309151649&4294967295)<<21&4294967295|F>>>11))+((G=(P=x+((F=P+(j^(x|~G))+U[4]+4149444226&4294967295)<<6&4294967295|F>>>26))+((F=G+(x^(P|~j))+U[11]+3174756917&4294967295)<<10&4294967295|F>>>22))^((j=G+((F=j+(P^(G|~x))+U[2]+718787259&4294967295)<<15&4294967295|F>>>17))|~P))+U[9]+3951481745&4294967295,k.g[0]=k.g[0]+P&4294967295,k.g[1]=k.g[1]+(j+(F<<21&4294967295|F>>>11))&4294967295,k.g[2]=k.g[2]+j&4294967295,k.g[3]=k.g[3]+G&4294967295}function o(k,P){this.h=P;for(var x=[],U=!0,j=k.length-1;0<=j;j--){var G=0|k[j];U&&G==P||(x[j]=G,U=!1)}this.g=x}(function e(k,P){function x(){}x.prototype=P.prototype,k.D=P.prototype,k.prototype=new x,k.prototype.constructor=k,k.C=function(U,j,G){for(var F=Array(arguments.length-2),lo=2;lo<arguments.length;lo++)F[lo-2]=arguments[lo];return P.prototype[j].apply(U,F)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(k,P){void 0===P&&(P=k.length);for(var x=P-this.blockSize,U=this.B,j=this.h,G=0;G<P;){if(0==j)for(;G<=x;)i(this,k,G),G+=this.blockSize;if("string"==typeof k){for(;G<P;)if(U[j++]=k.charCodeAt(G++),j==this.blockSize){i(this,U),j=0;break}}else for(;G<P;)if(U[j++]=k[G++],j==this.blockSize){i(this,U),j=0;break}}this.h=j,this.o+=P},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var P=1;P<k.length-8;++P)k[P]=0;var x=8*this.o;for(P=k.length-8;P<k.length;++P)k[P]=255&x,x/=256;for(this.u(k),k=Array(16),P=x=0;4>P;++P)for(var U=0;32>U;U+=8)k[x++]=this.g[P]>>>U&255;return k};var a={};function l(k){return-128<=k&&128>k?function s(k,P){var x=a;return Object.prototype.hasOwnProperty.call(x,k)?x[k]:x[k]=P(k)}(k,function(P){return new o([0|P],0>P?-1:0)}):new o([0|k],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return g;if(0>k)return S(c(-k));for(var P=[],x=1,U=0;k>=x;U++)P[U]=k/x|0,x*=4294967296;return new o(P,0)}var g=l(0),_=l(1),E=l(16777216);function I(k){if(0!=k.h)return!1;for(var P=0;P<k.g.length;P++)if(0!=k.g[P])return!1;return!0}function T(k){return-1==k.h}function S(k){for(var P=k.g.length,x=[],U=0;U<P;U++)x[U]=~k.g[U];return new o(x,~k.h).add(_)}function L(k,P){return k.add(S(P))}function O(k,P){for(;(65535&k[P])!=k[P];)k[P+1]+=k[P]>>>16,k[P]&=65535,P++}function H(k,P){this.g=k,this.h=P}function oe(k,P){if(I(P))throw Error("division by zero");if(I(k))return new H(g,g);if(T(k))return P=oe(S(k),P),new H(S(P.g),S(P.h));if(T(P))return P=oe(k,S(P)),new H(S(P.g),P.h);if(30<k.g.length){if(T(k)||T(P))throw Error("slowDivide_ only works with positive integers.");for(var x=_,U=P;0>=U.l(k);)x=Te(x),U=Te(U);var j=Re(x,1),G=Re(U,1);for(U=Re(U,2),x=Re(x,2);!I(U);){var F=G.add(U);0>=F.l(k)&&(j=j.add(x),G=F),U=Re(U,1),x=Re(x,1)}return P=L(k,j.j(P)),new H(j,P)}for(j=g;0<=k.l(P);){for(x=Math.max(1,Math.floor(k.m()/P.m())),U=48>=(U=Math.ceil(Math.log(x)/Math.LN2))?1:Math.pow(2,U-48),F=(G=c(x)).j(P);T(F)||0<F.l(k);)F=(G=c(x-=U)).j(P);I(G)&&(G=_),j=j.add(G),k=L(k,F)}return new H(j,k)}function Te(k){for(var P=k.g.length+1,x=[],U=0;U<P;U++)x[U]=k.i(U)<<1|k.i(U-1)>>>31;return new o(x,k.h)}function Re(k,P){var x=P>>5;P%=32;for(var U=k.g.length-x,j=[],G=0;G<U;G++)j[G]=0<P?k.i(G+x)>>>P|k.i(G+x+1)<<32-P:k.i(G+x);return new o(j,k.h)}(n=o.prototype).m=function(){if(T(this))return-S(this).m();for(var k=0,P=1,x=0;x<this.g.length;x++){var U=this.i(x);k+=(0<=U?U:4294967296+U)*P,P*=4294967296}return k},n.toString=function(k){if(2>(k=k||10)||36<k)throw Error("radix out of range: "+k);if(I(this))return"0";if(T(this))return"-"+S(this).toString(k);for(var P=c(Math.pow(k,6)),x=this,U="";;){var j=oe(x,P).g,G=((0<(x=L(x,j.j(P))).g.length?x.g[0]:x.h)>>>0).toString(k);if(I(x=j))return G+U;for(;6>G.length;)G="0"+G;U=G+U}},n.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h},n.l=function(k){return T(k=L(this,k))?-1:I(k)?0:1},n.abs=function(){return T(this)?S(this):this},n.add=function(k){for(var P=Math.max(this.g.length,k.g.length),x=[],U=0,j=0;j<=P;j++){var G=U+(65535&this.i(j))+(65535&k.i(j)),F=(G>>>16)+(this.i(j)>>>16)+(k.i(j)>>>16);U=F>>>16,x[j]=(F&=65535)<<16|(G&=65535)}return new o(x,-2147483648&x[x.length-1]?-1:0)},n.j=function(k){if(I(this)||I(k))return g;if(T(this))return T(k)?S(this).j(S(k)):S(S(this).j(k));if(T(k))return S(this.j(S(k)));if(0>this.l(E)&&0>k.l(E))return c(this.m()*k.m());for(var P=this.g.length+k.g.length,x=[],U=0;U<2*P;U++)x[U]=0;for(U=0;U<this.g.length;U++)for(var j=0;j<k.g.length;j++){var G=this.i(U)>>>16,F=65535&this.i(U),lo=k.i(j)>>>16,Gc=65535&k.i(j);x[2*U+2*j]+=F*Gc,O(x,2*U+2*j),x[2*U+2*j+1]+=G*Gc,O(x,2*U+2*j+1),x[2*U+2*j+1]+=F*lo,O(x,2*U+2*j+1),x[2*U+2*j+2]+=G*lo,O(x,2*U+2*j+2)}for(U=0;U<P;U++)x[U]=x[2*U+1]<<16|x[2*U];for(U=P;U<2*P;U++)x[U]=0;return new o(x,0)},n.A=function(k){return oe(this,k).h},n.and=function(k){for(var P=Math.max(this.g.length,k.g.length),x=[],U=0;U<P;U++)x[U]=this.i(U)&k.i(U);return new o(x,this.h&k.h)},n.or=function(k){for(var P=Math.max(this.g.length,k.g.length),x=[],U=0;U<P;U++)x[U]=this.i(U)|k.i(U);return new o(x,this.h|k.h)},n.xor=function(k){for(var P=Math.max(this.g.length,k.g.length),x=[],U=0;U<P;U++)x[U]=this.i(U)^k.i(U);return new o(x,this.h^k.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tz=ez.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=function h(k,P){if(0==k.length)throw Error("number format error: empty string");if(2>(P=P||10)||36<P)throw Error("radix out of range: "+P);if("-"==k.charAt(0))return S(h(k.substring(1),P));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=c(Math.pow(P,8)),U=g,j=0;j<k.length;j+=8){var G=Math.min(8,k.length-j),F=parseInt(k.substring(j,j+G),P);8>G?(G=c(Math.pow(P,G)),U=U.j(G).add(c(F))):U=(U=U.j(x)).add(c(F))}return U},ed=ez.Integer=o}).apply(typeof XH<"u"?XH:typeof self<"u"?self:typeof window<"u"?window:{});var nz,rz,B_,iz,gw,sM,sz,oz,az,pw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ul={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(f,y,C){return f==Array.prototype||f==Object.prototype||(f[y]=C.value),f},r=function t(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof pw&&pw];for(var y=0;y<f.length;++y){var C=f[y];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}(this);!function i(f,y){if(y)e:{var C=r;f=f.split(".");for(var b=0;b<f.length-1;b++){var z=f[b];if(!(z in C))break e;C=C[z]}(y=y(b=C[f=f[f.length-1]]))!=b&&null!=y&&e(C,f,{configurable:!0,writable:!0,value:y})}}("Array.prototype.values",function(f){return f||function(){return function s(f,y){f instanceof String&&(f+="");var C=0,b=!1,z={next:function(){if(!b&&C<f.length){var J=C++;return{value:y(J,f[J]),done:!1}}return b=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}(this,function(y,C){return C})}});var o=o||{},a=this||self;function l(f){var y=typeof f;return"array"==(y="object"!=y?y:f?Array.isArray(f)?"array":y:"null")||"object"==y&&"number"==typeof f.length}function c(f){var y=typeof f;return"object"==y&&null!=f||"function"==y}function h(f,y,C){return f.call.apply(f.bind,arguments)}function g(f,y,C){if(!f)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,b),f.apply(y,z)}}return function(){return f.apply(y,arguments)}}function _(f,y,C){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:g).apply(null,arguments)}function E(f,y){var C=Array.prototype.slice.call(arguments,1);return function(){var b=C.slice();return b.push.apply(b,arguments),f.apply(this,b)}}function I(f,y){function C(){}C.prototype=y.prototype,f.aa=y.prototype,f.prototype=new C,f.prototype.constructor=f,f.Qb=function(b,z,J){for(var De=Array(arguments.length-2),In=2;In<arguments.length;In++)De[In-2]=arguments[In];return y.prototype[z].apply(b,De)}}function T(f){const y=f.length;if(0<y){const C=Array(y);for(let b=0;b<y;b++)C[b]=f[b];return C}return[]}function S(f,y){for(let C=1;C<arguments.length;C++){const b=arguments[C];if(l(b)){const z=f.length||0,J=b.length||0;f.length=z+J;for(let De=0;De<J;De++)f[z+De]=b[De]}else f.push(b)}}function O(f){return/^[\s\xa0]*$/.test(f)}function H(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function oe(f){return oe[" "](f),f}oe[" "]=function(){};var Te=!(-1==H().indexOf("Gecko")||-1!=H().toLowerCase().indexOf("webkit")&&-1==H().indexOf("Edge")||-1!=H().indexOf("Trident")||-1!=H().indexOf("MSIE")||-1!=H().indexOf("Edge"));function Re(f,y,C){for(const b in f)y.call(C,f[b],b,f)}function P(f){const y={};for(const C in f)y[C]=f[C];return y}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(f,y){let C,b;for(let z=1;z<arguments.length;z++){for(C in b=arguments[z],b)f[C]=b[C];for(let J=0;J<x.length;J++)C=x[J],Object.prototype.hasOwnProperty.call(b,C)&&(f[C]=b[C])}}function j(f){var y=1;f=f.split(":");const C=[];for(;0<y&&f.length;)C.push(f.shift()),y--;return f.length&&C.push(f.join(":")),C}function G(f){a.setTimeout(()=>{throw f},0)}function F(){var f=Ot;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}var Gc=new class L{constructor(y,C){this.i=y,this.j=C,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}(()=>new ze,f=>f.reset());class ze{constructor(){this.next=this.g=this.h=null}set(y,C){this.h=y,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let We,Ze=!1,Ot=new class lo{constructor(){this.h=this.g=null}add(y,C){const b=Gc.get();b.set(y,C),this.h?this.h.next=b:this.g=b,this.h=b}},Cr=()=>{const f=a.Promise.resolve(void 0);We=()=>{f.then(co)}};var co=()=>{for(var f;f=F();){try{f.h.call(f.g)}catch(C){G(C)}var y=Gc;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}Ze=!1};function lr(){this.s=this.s,this.C=this.C}function Vn(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}lr.prototype.s=!1,lr.prototype.ma=function(){this.s||(this.s=!0,this.N())},lr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Vn.prototype.h=function(){this.defaultPrevented=!0};var Un=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const C=()=>{};a.addEventListener("test",C,y),a.removeEventListener("test",C,y)}catch{}return f}();function Wc(f,y){if(Vn.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var C=this.type=f.type,b=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(Te){e:{try{oe(y.nodeName);var z=!0;break e}catch{}z=!1}z||(y=null)}}else"mouseover"==C?y=f.fromElement:"mouseout"==C&&(y=f.toElement);this.relatedTarget=y,b?(this.clientX=void 0!==b.clientX?b.clientX:b.pageX,this.clientY=void 0!==b.clientY?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=void 0!==f.clientX?f.clientX:f.pageX,this.clientY=void 0!==f.clientY?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType="string"==typeof f.pointerType?f.pointerType:dx[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Wc.aa.h.call(this)}}I(Wc,Vn);var dx={2:"touch",3:"pen",4:"mouse"};Wc.prototype.h=function(){Wc.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var cr="closure_listenable_"+(1e6*Math.random()|0),wl=0;function Is(f,y,C,b,z){this.listener=f,this.proxy=null,this.src=y,this.type=C,this.capture=!!b,this.ha=z,this.key=++wl,this.da=this.fa=!1}function Tl(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Kc(f){this.src=f,this.g={},this.h=0}function hx(f,y){var C=y.type;if(C in f.g){var J,b=f.g[C],z=Array.prototype.indexOf.call(b,y,void 0);(J=0<=z)&&Array.prototype.splice.call(b,z,1),J&&(Tl(y),0==f.g[C].length&&(delete f.g[C],f.h--))}}function fx(f,y,C,b){for(var z=0;z<f.length;++z){var J=f[z];if(!J.da&&J.listener==y&&J.capture==!!C&&J.ha==b)return z}return-1}Kc.prototype.add=function(f,y,C,b,z){var J=f.toString();(f=this.g[J])||(f=this.g[J]=[],this.h++);var De=fx(f,y,b,z);return-1<De?(y=f[De],C||(y.fa=!1)):((y=new Is(y,this.src,J,!!b,z)).fa=C,f.push(y)),y};var px="closure_lm_"+(1e6*Math.random()|0),gx={};function WW(f,y,C,b,z){if(b&&b.once)return QW(f,y,C,b,z);if(Array.isArray(y)){for(var J=0;J<y.length;J++)WW(f,y[J],C,b,z);return null}return C=vx(C),f&&f[cr]?f.K(y,C,c(b)?!!b.capture:!!b,z):KW(f,y,C,!1,b,z)}function KW(f,y,C,b,z,J){if(!y)throw Error("Invalid event type");var De=c(z)?!!z.capture:!!z,In=_x(f);if(In||(f[px]=In=new Kc(f)),(C=In.add(y,C,b,De,J)).proxy)return C;if(b=function Mve(){const y=Rve;return function f(C){return y.call(f.src,f.listener,C)}}(),C.proxy=b,b.src=f,b.listener=C,f.addEventListener)Un||(z=De),void 0===z&&(z=!1),f.addEventListener(y.toString(),b,z);else if(f.attachEvent)f.attachEvent(ZW(y.toString()),b);else{if(!f.addListener||!f.removeListener)throw Error("addEventListener and attachEvent are unavailable.");f.addListener(b)}return C}function QW(f,y,C,b,z){if(Array.isArray(y)){for(var J=0;J<y.length;J++)QW(f,y[J],C,b,z);return null}return C=vx(C),f&&f[cr]?f.L(y,C,c(b)?!!b.capture:!!b,z):KW(f,y,C,!0,b,z)}function YW(f,y,C,b,z){if(Array.isArray(y))for(var J=0;J<y.length;J++)YW(f,y[J],C,b,z);else b=c(b)?!!b.capture:!!b,C=vx(C),f&&f[cr]?(f=f.i,(y=String(y).toString())in f.g&&-1<(C=fx(J=f.g[y],C,b,z))&&(Tl(J[C]),Array.prototype.splice.call(J,C,1),0==J.length&&(delete f.g[y],f.h--))):f&&(f=_x(f))&&(y=f.g[y.toString()],f=-1,y&&(f=fx(y,C,b,z)),(C=-1<f?y[f]:null)&&mx(C))}function mx(f){if("number"!=typeof f&&f&&!f.da){var y=f.src;if(y&&y[cr])hx(y.i,f);else{var C=f.type,b=f.proxy;y.removeEventListener?y.removeEventListener(C,b,f.capture):y.detachEvent?y.detachEvent(ZW(C),b):y.addListener&&y.removeListener&&y.removeListener(b),(C=_x(y))?(hx(C,f),0==C.h&&(C.src=null,y[px]=null)):Tl(f)}}}function ZW(f){return f in gx?gx[f]:gx[f]="on"+f}function Rve(f,y){if(f.da)f=!0;else{y=new Wc(y,this);var C=f.listener,b=f.ha||f.src;f.fa&&mx(f),f=C.call(b,y)}return f}function _x(f){return(f=f[px])instanceof Kc?f:null}var yx="__closure_events_fn_"+(1e9*Math.random()>>>0);function vx(f){return"function"==typeof f?f:(f[yx]||(f[yx]=function(y){return f.handleEvent(y)}),f[yx])}function ki(){lr.call(this),this.i=new Kc(this),this.M=this,this.F=null}function ts(f,y){var C,b=f.F;if(b)for(C=[];b;b=b.F)C.push(b);if(f=f.M,b=y.type||y,"string"==typeof y)y=new Vn(y,f);else if(y instanceof Vn)y.target=y.target||f;else{var z=y;U(y=new Vn(b,f),z)}if(z=!0,C)for(var J=C.length-1;0<=J;J--){var De=y.g=C[J];z=lb(De,b,!0,y)&&z}if(z=lb(De=y.g=f,b,!0,y)&&z,z=lb(De,b,!1,y)&&z,C)for(J=0;J<C.length;J++)z=lb(De=y.g=C[J],b,!1,y)&&z}function lb(f,y,C,b){if(!(y=f.i.g[String(y)]))return!0;y=y.concat();for(var z=!0,J=0;J<y.length;++J){var De=y[J];if(De&&!De.da&&De.capture==C){var In=De.listener,fi=De.ha||De.src;De.fa&&hx(f.i,De),z=!1!==In.call(fi,b)&&z}}return z&&!b.defaultPrevented}function JW(f,y,C){if("function"==typeof f)C&&(f=_(f,C));else{if(!f||"function"!=typeof f.handleEvent)throw Error("Invalid listener argument");f=_(f.handleEvent,f)}return 2147483647<Number(y)?-1:a.setTimeout(f,y||0)}function XW(f){f.g=JW(()=>{f.g=null,f.i&&(f.i=!1,XW(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}I(ki,lr),ki.prototype[cr]=!0,ki.prototype.removeEventListener=function(f,y,C,b){YW(this,f,y,C,b)},ki.prototype.N=function(){if(ki.aa.N.call(this),this.i){var y,f=this.i;for(y in f.g){for(var C=f.g[y],b=0;b<C.length;b++)Tl(C[b]);delete f.g[y],f.h--}}this.F=null},ki.prototype.K=function(f,y,C,b){return this.i.add(String(f),y,!1,C,b)},ki.prototype.L=function(f,y,C,b){return this.i.add(String(f),y,!0,C,b)};class Ove extends lr{constructor(y,C){super(),this.m=y,this.l=C,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:XW(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lv(f){lr.call(this),this.h=f,this.g={}}I(lv,lr);var e5=[];function t5(f){Re(f.g,function(y,C){this.g.hasOwnProperty(C)&&mx(y)},f),f.g={}}lv.prototype.N=function(){lv.aa.N.call(this),t5(this)},lv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ex=a.JSON.stringify,Nve=a.JSON.parse,xve=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Cx(){}function r5(){}Cx.prototype.h=null;var cv={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ix(){Vn.call(this,"d")}function wx(){Vn.call(this,"c")}I(Ix,Vn),I(wx,Vn);var Fd={},i5=null;function cb(){return i5=i5||new ki}function s5(f){Vn.call(this,Fd.La,f)}function uv(f){const y=cb();ts(y,new s5(y))}function o5(f,y){Vn.call(this,Fd.STAT_EVENT,f),this.stat=y}function ns(f){const y=cb();ts(y,new o5(y,f))}function a5(f,y){Vn.call(this,Fd.Ma,f),this.size=y}function dv(f,y){if("function"!=typeof f)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},y)}function hv(){this.g=!0}function jp(f,y,C,b){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+function Vve(f,y){if(!f.g)return y;if(!y)return null;try{var C=JSON.parse(y);if(C)for(f=0;f<C.length;f++)if(Array.isArray(C[f])){var b=C[f];if(!(2>b.length)){var z=b[1];if(Array.isArray(z)&&!(1>z.length)){var J=z[0];if("noop"!=J&&"stop"!=J&&"close"!=J)for(var De=1;De<z.length;De++)z[De]=""}}}return Ex(C)}catch{return y}}(f,C)+(b?" "+b:"")})}Fd.La="serverreachability",I(s5,Vn),Fd.STAT_EVENT="statevent",I(o5,Vn),Fd.Ma="timingevent",I(a5,Vn),hv.prototype.xa=function(){this.g=!1},hv.prototype.info=function(){};var Tx,ub={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},l5={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function db(){}function Qc(f,y,C,b){this.j=f,this.i=y,this.l=C,this.R=b||1,this.U=new lv(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new c5}function c5(){this.i=null,this.g="",this.h=!1}I(db,Cx),db.prototype.g=function(){return new XMLHttpRequest},db.prototype.i=function(){return{}},Tx=new db;var u5={},bx={};function Ax(f,y,C){f.L=1,f.v=gb(bl(y)),f.m=C,f.P=!0,d5(f,null)}function d5(f,y){f.F=Date.now(),hb(f),f.A=bl(f.v);var C=f.A,b=f.R;Array.isArray(b)||(b=[String(b)]),b5(C.i,"t",b),f.C=0,C=f.j.J,f.h=new c5,f.g=H5(f.j,C?y:null,!f.m),0<f.O&&(f.M=new Ove(_(f.Y,f,f.g),f.O)),y=f.U,C=f.g,b=f.ca;var z="readystatechange";Array.isArray(z)||(z&&(e5[0]=z.toString()),z=e5);for(var J=0;J<z.length;J++){var De=WW(C,z[J],b||y.handleEvent,!1,y.h||y);if(!De)break;y.g[De.key]=De}y=f.H?P(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),uv(),function kve(f,y,C,b,z,J){f.info(function(){if(f.g)if(J)for(var De="",In=J.split("&"),fi=0;fi<In.length;fi++){var Jt=In[fi].split("=");if(1<Jt.length){var Fi=Jt[0];Jt=Jt[1];var Li=Fi.split("_");De=2<=Li.length&&"type"==Li[1]?De+(Fi+"=")+Jt+"&":De+(Fi+"=redacted&")}}else De=null;else De=J;return"XMLHTTP REQ ("+b+") [attempt "+z+"]: "+y+"\n"+C+"\n"+De})}(f.i,f.u,f.A,f.l,f.R,f.m)}function h5(f){return!!f.g&&"GET"==f.u&&2!=f.L&&f.j.Ca}function Uve(f,y){var C=f.C,b=y.indexOf("\n",C);return-1==b?bx:(C=Number(y.substring(C,b)),isNaN(C)?u5:(b+=1)+C>y.length?bx:(y=y.slice(b,b+C),f.C=b+C,y))}function hb(f){f.S=Date.now()+f.I,f5(f,f.I)}function f5(f,y){if(null!=f.B)throw Error("WatchDog timer not null");f.B=dv(_(f.ba,f),y)}function Sx(f){f.B&&(a.clearTimeout(f.B),f.B=null)}function fv(f){0==f.j.G||f.J||U5(f.j,f)}function Ld(f){Sx(f);var y=f.M;y&&"function"==typeof y.ma&&y.ma(),f.M=null,t5(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function Dx(f,y){try{var C=f.j;if(0!=C.G&&(C.g==f||Px(C.h,f)))if(!f.K&&Px(C.h,f)&&3==C.G){try{var b=C.Da.g.parse(y)}catch{b=null}if(Array.isArray(b)&&3==b.length){var z=b;if(0==z[0]){e:if(!C.u){if(C.g){if(!(C.g.F+3e3<f.F))break e;Eb(C),yb(C)}Nx(C),ns(18)}}else C.za=z[1],0<C.za-C.T&&37500>z[2]&&C.F&&0==C.v&&!C.C&&(C.C=dv(_(C.Za,C),6e3));if(1>=m5(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Ud(C,11)}else if((f.K||C.g==f)&&Eb(C),!O(y))for(z=C.Da.g.parse(y),y=0;y<z.length;y++){let Jt=z[y];if(C.T=Jt[0],Jt=Jt[1],2==C.G)if("c"==Jt[0]){C.K=Jt[1],C.ia=Jt[2];const Fi=Jt[3];null!=Fi&&(C.la=Fi,C.j.info("VER="+C.la));const Li=Jt[4];null!=Li&&(C.Aa=Li,C.j.info("SVER="+C.Aa));const zp=Jt[5];null!=zp&&"number"==typeof zp&&0<zp&&(C.L=b=1.5*zp,C.j.info("backChannelRequestTimeoutMs_="+b)),b=C;const Ho=f.g;if(Ho){const Ib=Ho.g?Ho.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ib){var J=b.h;J.g||-1==Ib.indexOf("spdy")&&-1==Ib.indexOf("quic")&&-1==Ib.indexOf("h2")||(J.j=J.l,J.g=new Set,J.h&&(Mx(J,J.h),J.h=null))}if(b.D){const kx=Ho.g?Ho.g.getResponseHeader("X-HTTP-Session-Id"):null;kx&&(b.ya=kx,Bn(b.I,b.D,kx))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-f.F,C.j.info("Handshake RTT: "+C.R+"ms"));var De=f;if((b=C).qa=$5(b,b.J?b.ia:null,b.W),De.K){_5(b.h,De);var In=De,fi=b.L;fi&&(In.I=fi),In.B&&(Sx(In),hb(In)),b.g=De}else L5(b);0<C.i.length&&vb(C)}else"stop"!=Jt[0]&&"close"!=Jt[0]||Ud(C,7);else 3==C.G&&("stop"==Jt[0]||"close"==Jt[0]?"stop"==Jt[0]?Ud(C,7):Ox(C):"noop"!=Jt[0]&&C.l&&C.l.ta(Jt),C.v=0)}uv()}catch{}}Qc.prototype.ca=function(f){f=f.target;const y=this.M;y&&3==Al(f)?y.j():this.Y(f)},Qc.prototype.Y=function(f){try{if(f==this.g)e:{const Li=Al(this.g);var y=this.g.Ba();if(this.g.Z(),!(3>Li)&&(3!=Li||this.g&&(this.h.h||this.g.oa()||O5(this.g)))){this.J||4!=Li||7==y||uv(),Sx(this);var C=this.g.Z();this.X=C;t:if(h5(this)){var b=O5(this.g);f="";var z=b.length,J=4==Al(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ld(this),fv(this);var De="";break t}this.h.i=new a.TextDecoder}for(y=0;y<z;y++)this.h.h=!0,f+=this.h.i.decode(b[y],{stream:!(J&&y==z-1)});b.length=0,this.h.g+=f,this.C=0,De=this.h.g}else De=this.g.oa();if(this.o=200==C,function Fve(f,y,C,b,z,J,De){f.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+z+"]: "+y+"\n"+C+"\n"+J+" "+De})}(this.i,this.u,this.A,this.l,this.R,Li,C),this.o){if(this.T&&!this.K){t:{if(this.g){var In,fi=this.g;if((In=fi.g?fi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(In)){var Jt=In;break t}}Jt=null}if(!(C=Jt)){this.o=!1,this.s=3,ns(12),Ld(this),fv(this);break e}jp(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dx(this,C)}if(this.P){let Ho;for(C=!0;!this.J&&this.C<De.length;){if(Ho=Uve(this,De),Ho==bx){4==Li&&(this.s=4,ns(14),C=!1),jp(this.i,this.l,null,"[Incomplete Response]");break}if(Ho==u5){this.s=4,ns(15),jp(this.i,this.l,De,"[Invalid Chunk]"),C=!1;break}jp(this.i,this.l,Ho,null),Dx(this,Ho)}if(h5(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Li||0!=De.length||this.h.h||(this.s=1,ns(16),C=!1),this.o=this.o&&C,C){if(0<De.length&&!this.W){this.W=!0;var Fi=this.j;Fi.g==this&&Fi.ba&&!Fi.M&&(Fi.j.info("Great, no buffering proxy detected. Bytes received: "+De.length),xx(Fi),Fi.M=!0,ns(11))}}else jp(this.i,this.l,De,"[Invalid Chunked Response]"),Ld(this),fv(this)}else jp(this.i,this.l,De,null),Dx(this,De);4==Li&&Ld(this),this.o&&!this.J&&(4==Li?U5(this.j,this):(this.o=!1,hb(this)))}else(function nEe(f){const y={};f=(f.g&&2<=Al(f)&&f.g.getAllResponseHeaders()||"").split("\r\n");for(let b=0;b<f.length;b++){if(O(f[b]))continue;var C=j(f[b]);const z=C[0];if("string"!=typeof(C=C[1]))continue;C=C.trim();const J=y[z]||[];y[z]=J,J.push(C)}!function k(f,y){for(const C in f)y.call(void 0,f[C],C,f)}(y,function(b){return b.join(", ")})})(this.g),400==C&&0<De.indexOf("Unknown SID")?(this.s=3,ns(12)):(this.s=0,ns(13)),Ld(this),fv(this)}}}catch{}},Qc.prototype.cancel=function(){this.J=!0,Ld(this)},Qc.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(function Lve(f,y){f.info(function(){return"TIMEOUT: "+y})}(this.i,this.A),2!=this.L&&(uv(),ns(17)),Ld(this),this.s=2,fv(this)):f5(this,this.S-f)};var Bve=class{constructor(f,y){this.g=f,this.map=y}};function p5(f){this.l=f||10,f=a.PerformanceNavigationTiming?0<(f=a.performance.getEntriesByType("navigation")).length&&("hq"==f[0].nextHopProtocol||"h2"==f[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function g5(f){return!!f.h||!!f.g&&f.g.size>=f.j}function m5(f){return f.h?1:f.g?f.g.size:0}function Px(f,y){return f.h?f.h==y:!!f.g&&f.g.has(y)}function Mx(f,y){f.g?f.g.add(y):f.h=y}function _5(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}function y5(f){if(null!=f.h)return f.i.concat(f.h.D);if(null!=f.g&&0!==f.g.size){let y=f.i;for(const C of f.g.values())y=y.concat(C.D);return y}return T(f.i)}function v5(f,y){if(f.forEach&&"function"==typeof f.forEach)f.forEach(y,void 0);else if(l(f)||"string"==typeof f)Array.prototype.forEach.call(f,y,void 0);else for(var C=function $ve(f){if(f.na&&"function"==typeof f.na)return f.na();if(!f.V||"function"!=typeof f.V){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||"string"==typeof f){var y=[];f=f.length;for(var C=0;C<f;C++)y.push(C);return y}y=[],C=0;for(const b in f)y[C++]=b;return y}}}(f),b=function jve(f){if(f.V&&"function"==typeof f.V)return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if("string"==typeof f)return f.split("");if(l(f)){for(var y=[],C=f.length,b=0;b<C;b++)y.push(f[b]);return y}for(b in y=[],C=0,f)y[C++]=f[b];return y}(f),z=b.length,J=0;J<z;J++)y.call(void 0,b[J],C&&C[J],f)}p5.prototype.cancel=function(){if(this.i=y5(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const f of this.g.values())f.cancel();this.g.clear()}};var E5=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vd(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Vd){this.h=f.h,fb(this,f.j),this.o=f.o,this.g=f.g,pb(this,f.s),this.l=f.l;var y=f.i,C=new mv;C.i=y.i,y.g&&(C.g=new Map(y.g),C.h=y.h),C5(this,C),this.m=f.m}else f&&(y=String(f).match(E5))?(this.h=!1,fb(this,y[1]||"",!0),this.o=pv(y[2]||""),this.g=pv(y[3]||"",!0),pb(this,y[4]),this.l=pv(y[5]||"",!0),C5(this,y[6]||"",!0),this.m=pv(y[7]||"")):(this.h=!1,this.i=new mv(null,this.h))}function bl(f){return new Vd(f)}function fb(f,y,C){f.j=C?pv(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function pb(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function C5(f,y,C){y instanceof mv?(f.i=y,function Qve(f,y){y&&!f.j&&(Yc(f),f.i=null,f.g.forEach(function(C,b){var z=b.toLowerCase();b!=z&&(w5(this,b),b5(this,z,C))},f)),f.j=y}(f.i,f.h)):(C||(y=gv(y,Wve)),f.i=new mv(y,f.h))}function Bn(f,y,C){f.i.set(y,C)}function gb(f){return Bn(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function pv(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function gv(f,y,C){return"string"==typeof f?(f=encodeURI(f).replace(y,zve),C&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function zve(f){return"%"+((f=f.charCodeAt(0))>>4&15).toString(16)+(15&f).toString(16)}Vd.prototype.toString=function(){var f=[],y=this.j;y&&f.push(gv(y,I5,!0),":");var C=this.g;return(C||"file"==y)&&(f.push("//"),(y=this.o)&&f.push(gv(y,I5,!0),"@"),f.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(C=this.s)&&f.push(":",String(C))),(C=this.l)&&(this.g&&"/"!=C.charAt(0)&&f.push("/"),f.push(gv(C,"/"==C.charAt(0)?Gve:qve,!0))),(C=this.i.toString())&&f.push("?",C),(C=this.m)&&f.push("#",gv(C,Kve)),f.join("")};var I5=/[#\/\?@]/g,qve=/[#\?:]/g,Gve=/[#\?]/g,Wve=/[#\?@]/g,Kve=/#/g;function mv(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function Yc(f){f.g||(f.g=new Map,f.h=0,f.i&&function Hve(f,y){if(f){f=f.split("&");for(var C=0;C<f.length;C++){var b=f[C].indexOf("="),z=null;if(0<=b){var J=f[C].substring(0,b);z=f[C].substring(b+1)}else J=f[C];y(J,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}(f.i,function(y,C){f.add(decodeURIComponent(y.replace(/\+/g," ")),C)}))}function w5(f,y){Yc(f),y=$p(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function T5(f,y){return Yc(f),y=$p(f,y),f.g.has(y)}function b5(f,y,C){w5(f,y),0<C.length&&(f.i=null,f.g.set($p(f,y),T(C)),f.h+=C.length)}function $p(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function Zc(f,y,C,b,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),b(C)}catch{}}function Jve(){this.g=new xve}function Xve(f,y,C){const b=C||"";try{v5(f,function(z,J){let De=z;c(z)&&(De=Ex(z)),y.push(b+J+"="+encodeURIComponent(De))})}catch(z){throw y.push(b+"type="+encodeURIComponent("_badmap")),z}}function _v(f){this.l=f.Ub||null,this.j=f.eb||!1}function mb(f,y){ki.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function A5(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}function yv(f){f.readyState=4,f.l=null,f.j=null,f.v=null,vv(f)}function vv(f){f.onreadystatechange&&f.onreadystatechange.call(f)}function S5(f){let y="";return Re(f,function(C,b){y+=b,y+=":",y+=C,y+="\r\n"}),y}function Rx(f,y,C){e:{for(b in C){var b=!1;break e}b=!0}b||(C=S5(C),"string"==typeof f?null!=C&&encodeURIComponent(String(C)):Bn(f,y,C))}function ur(f){ki.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=mv.prototype).add=function(f,y){Yc(this),this.i=null,f=$p(this,f);var C=this.g.get(f);return C||this.g.set(f,C=[]),C.push(y),this.h+=1,this},n.forEach=function(f,y){Yc(this),this.g.forEach(function(C,b){C.forEach(function(z){f.call(y,z,b,this)},this)},this)},n.na=function(){Yc(this);const f=Array.from(this.g.values()),y=Array.from(this.g.keys()),C=[];for(let b=0;b<y.length;b++){const z=f[b];for(let J=0;J<z.length;J++)C.push(y[b])}return C},n.V=function(f){Yc(this);let y=[];if("string"==typeof f)T5(this,f)&&(y=y.concat(this.g.get($p(this,f))));else{f=Array.from(this.g.values());for(let C=0;C<f.length;C++)y=y.concat(f[C])}return y},n.set=function(f,y){return Yc(this),this.i=null,T5(this,f=$p(this,f))&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f&&0<(f=this.V(f)).length?String(f[0]):y},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(var C=0;C<y.length;C++){var b=y[C];const J=encodeURIComponent(String(b)),De=this.V(b);for(b=0;b<De.length;b++){var z=J;""!==De[b]&&(z+="="+encodeURIComponent(String(De[b]))),f.push(z)}}return this.i=f.join("&")},I(_v,Cx),_v.prototype.g=function(){return new mb(this.l,this.j)},_v.prototype.i=function(f){return function(){return f}}({}),I(mb,ki),(n=mb.prototype).open=function(f,y){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,vv(this)},n.send=function(f){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,yv(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,vv(this)),this.g&&(this.readyState=3,vv(this),this.g)))if("arraybuffer"===this.responseType)f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;A5(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?yv(this):vv(this),3==this.readyState&&A5(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,yv(this))},n.Qa=function(f){this.g&&(this.response=f,yv(this))},n.ga=function(){this.g&&yv(this)},n.setRequestHeader=function(f,y){this.u.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var C=y.next();!C.done;)f.push((C=C.value)[0]+": "+C[1]),C=y.next();return f.join("\r\n")},Object.defineProperty(mb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(f){this.m=f?"include":"same-origin"}}),I(ur,ki);var eEe=/^https?$/i,tEe=["POST","PUT"];function D5(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,P5(f),_b(f)}function P5(f){f.A||(f.A=!0,ts(f,"complete"),ts(f,"error"))}function M5(f){if(f.h&&typeof o<"u"&&(!f.v[1]||4!=Al(f)||2!=f.Z()))if(f.u&&4==Al(f))JW(f.Ea,0,f);else if(ts(f,"readystatechange"),4==Al(f)){f.h=!1;try{const De=f.Z();e:switch(De){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var C;if(!(C=y)){var b;if(b=0===De){var z=String(f.D).match(E5)[1]||null;!z&&a.self&&a.self.location&&(z=a.self.location.protocol.slice(0,-1)),b=!eEe.test(z?z.toLowerCase():"")}C=b}if(C)ts(f,"complete"),ts(f,"success");else{f.m=6;try{var J=2<Al(f)?f.g.statusText:""}catch{J=""}f.l=J+" ["+f.Z()+"]",P5(f)}}finally{_b(f)}}}function _b(f,y){if(f.g){R5(f);const C=f.g,b=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||ts(f,"ready");try{C.onreadystatechange=b}catch{}}}function R5(f){f.I&&(a.clearTimeout(f.I),f.I=null)}function Al(f){return f.g?f.g.readyState:0}function O5(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Ev(f,y,C){return C&&C.internalChannelParams&&C.internalChannelParams[f]||y}function N5(f){this.Aa=0,this.i=[],this.j=new hv,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ev("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ev("baseRetryDelayMs",5e3,f),this.cb=Ev("retryDelaySeedMs",1e4,f),this.Wa=Ev("forwardChannelMaxRetries",2,f),this.wa=Ev("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new p5(f&&f.concurrentRequestLimit),this.Da=new Jve,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Ox(f){if(x5(f),3==f.G){var y=f.U++,C=bl(f.I);if(Bn(C,"SID",f.K),Bn(C,"RID",y),Bn(C,"TYPE","terminate"),Cv(f,C),(y=new Qc(f,f.j,y)).L=2,y.v=gb(bl(C)),C=!1,a.navigator&&a.navigator.sendBeacon)try{C=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!C&&a.Image&&((new Image).src=y.v,C=!0),C||(y.g=H5(y.j,null),y.g.ea(y.v)),y.F=Date.now(),hb(y)}j5(f)}function yb(f){f.g&&(xx(f),f.g.cancel(),f.g=null)}function x5(f){yb(f),f.u&&(a.clearTimeout(f.u),f.u=null),Eb(f),f.h.cancel(),f.s&&("number"==typeof f.s&&a.clearTimeout(f.s),f.s=null)}function vb(f){if(!g5(f.h)&&!f.s){f.s=!0;var y=f.Ga;We||Cr(),Ze||(We(),Ze=!0),Ot.add(y,f),f.B=0}}function k5(f,y){var C;C=y?y.l:f.U++;const b=bl(f.I);Bn(b,"SID",f.K),Bn(b,"RID",C),Bn(b,"AID",f.T),Cv(f,b),f.m&&f.o&&Rx(b,f.m,f.o),C=new Qc(f,f.j,C,f.B+1),null===f.m&&(C.H=f.o),y&&(f.i=y.D.concat(f.i)),y=F5(f,C,1e3),C.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Mx(f.h,C),Ax(C,b,y)}function Cv(f,y){f.H&&Re(f.H,function(C,b){Bn(y,b,C)}),f.l&&v5({},function(C,b){Bn(y,b,C)})}function F5(f,y,C){C=Math.min(f.i.length,C);var b=f.l?_(f.l.Na,f.l,f):null;e:{var z=f.i;let J=-1;for(;;){const De=["count="+C];-1==J?0<C?(J=z[0].g,De.push("ofs="+J)):J=0:De.push("ofs="+J);let In=!0;for(let fi=0;fi<C;fi++){let Jt=z[fi].g;const Fi=z[fi].map;if(Jt-=J,0>Jt)J=Math.max(0,z[fi].g-100),In=!1;else try{Xve(Fi,De,"req"+Jt+"_")}catch{b&&b(Fi)}}if(In){b=De.join("&");break e}}}return f=f.i.splice(0,C),y.D=f,b}function L5(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;We||Cr(),Ze||(We(),Ze=!0),Ot.add(y,f),f.v=0}}function Nx(f){return!(f.g||f.u||3<=f.v||(f.Y++,f.u=dv(_(f.Fa,f),B5(f,f.v)),f.v++,0))}function xx(f){null!=f.A&&(a.clearTimeout(f.A),f.A=null)}function V5(f){f.g=new Qc(f,f.j,"rpc",f.Y),null===f.m&&(f.g.H=f.o),f.g.O=0;var y=bl(f.qa);Bn(y,"RID","rpc"),Bn(y,"SID",f.K),Bn(y,"AID",f.T),Bn(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&Bn(y,"TO",f.ja),Bn(y,"TYPE","xmlhttp"),Cv(f,y),f.m&&f.o&&Rx(y,f.m,f.o),f.L&&(f.g.I=f.L);var C=f.g;f=f.ia,C.L=1,C.v=gb(bl(y)),C.m=null,C.P=!0,d5(C,f)}function Eb(f){null!=f.C&&(a.clearTimeout(f.C),f.C=null)}function U5(f,y){var C=null;if(f.g==y){Eb(f),xx(f),f.g=null;var b=2}else{if(!Px(f.h,y))return;C=y.D,_5(f.h,y),b=1}if(0!=f.G)if(y.o)if(1==b){C=y.m?y.m.length:0,y=Date.now()-y.F;var z=f.B;ts(b=cb(),new a5(b,C)),vb(f)}else L5(f);else if(3==(z=y.s)||0==z&&0<y.X||!(1==b&&function rEe(f,y){return!(m5(f.h)>=f.h.j-(f.s?1:0)||(f.s?(f.i=y.D.concat(f.i),0):1==f.G||2==f.G||f.B>=(f.Va?0:f.Wa)||(f.s=dv(_(f.Ga,f,y),B5(f,f.B)),f.B++,0)))}(f,y)||2==b&&Nx(f)))switch(C&&0<C.length&&(y=f.h,y.i=y.i.concat(C)),z){case 1:Ud(f,5);break;case 4:Ud(f,10);break;case 3:Ud(f,6);break;default:Ud(f,2)}}function B5(f,y){let C=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(C*=2),C*y}function Ud(f,y){if(f.j.info("Error code "+y),2==y){var C=_(f.fb,f),b=f.Xa;const z=!b;b=new Vd(b||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||fb(b,"https"),gb(b),z?function Yve(f,y){const C=new hv;if(a.Image){const b=new Image;b.onload=E(Zc,C,"TestLoadImage: loaded",!0,y,b),b.onerror=E(Zc,C,"TestLoadImage: error",!1,y,b),b.onabort=E(Zc,C,"TestLoadImage: abort",!1,y,b),b.ontimeout=E(Zc,C,"TestLoadImage: timeout",!1,y,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=f}else y(!1)}(b.toString(),C):function Zve(f,y){new hv;const b=new AbortController,z=setTimeout(()=>{b.abort(),Zc(0,0,!1,y)},1e4);fetch(f,{signal:b.signal}).then(J=>{clearTimeout(z),Zc(0,0,!!J.ok,y)}).catch(()=>{clearTimeout(z),Zc(0,0,!1,y)})}(b.toString(),C)}else ns(2);f.G=0,f.l&&f.l.sa(y),j5(f),x5(f)}function j5(f){if(f.G=0,f.ka=[],f.l){const y=y5(f.h);(0!=y.length||0!=f.i.length)&&(S(f.ka,y),S(f.ka,f.i),f.h.i.length=0,T(f.i),f.i.length=0),f.l.ra()}}function $5(f,y,C){var b=C instanceof Vd?bl(C):new Vd(C);if(""!=b.g)y&&(b.g=y+"."+b.g),pb(b,b.s);else{var z=a.location;b=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;var J=new Vd(null);b&&fb(J,b),y&&(J.g=y),z&&pb(J,z),C&&(J.l=C),b=J}return y=f.ya,(C=f.D)&&y&&Bn(b,C,y),Bn(b,"VER",f.la),Cv(f,b),b}function H5(f,y,C){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return(y=new ur(f.Ca&&!f.pa?new _v({eb:C}):f.pa)).Ha(f.J),y}function z5(){}function Cb(){}function js(f,y){ki.call(this),this.g=new N5(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!O(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!O(y)&&(this.g.D=y,null!==(f=this.h)&&y in f&&y in(f=this.h)&&delete f[y]),this.j=new Hp(this)}function q5(f){Ix.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(const C in y){f=C;break e}f=void 0}(this.i=f)&&(f=this.i,y=null!==y&&f in y?y[f]:void 0),this.data=y}else this.data=f}function G5(){wx.call(this),this.status=1}function Hp(f){this.g=f}(n=ur.prototype).Ha=function(f){this.J=f},n.ea=function(f,y,C,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tx.g(),this.v=function n5(f){return f.h||(f.h=f.i())}(this.o?this.o:Tx),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(J){return void D5(this,J)}if(f=C||"",C=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var z in b)C.set(z,b[z]);else{if("function"!=typeof b.keys||"function"!=typeof b.get)throw Error("Unknown input type for opt_headers: "+String(b));for(const J of b.keys())C.set(J,b.get(J))}b=Array.from(C.keys()).find(J=>"content-type"==J.toLowerCase()),z=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(tEe,y,void 0))||b||z||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,De]of C)this.g.setRequestHeader(J,De);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{R5(this),this.u=!0,this.g.send(f),this.u=!1}catch(J){D5(this,J)}},n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,ts(this,"complete"),ts(this,"abort"),_b(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_b(this,!0)),ur.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?M5(this):this.bb())},n.bb=function(){M5(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Al(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&0==y.indexOf(f)&&(y=y.substring(f.length)),Nve(y)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=N5.prototype).la=8,n.G=1,n.connect=function(f,y,C,b){ns(0),this.W=f,this.H=y||{},C&&void 0!==b&&(this.H.OSID=C,this.H.OAID=b),this.F=this.X,this.I=$5(this,null,this.W),vb(this)},n.Ga=function(f){if(this.s)if(this.s=null,1==this.G){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const z=new Qc(this,this.j,f);let J=this.o;if(this.S&&(J?(J=P(J),U(J,this.S)):J=this.S),null!==this.m||this.O||(z.H=J,J=null),this.P)e:{for(var y=0,C=0;C<this.i.length;C++){var b=this.i[C];if(void 0===(b="__data__"in b.map&&"string"==typeof(b=b.map.__data__)?b.length:void 0))break;if(4096<(y+=b)){y=C;break e}if(4096===y||C===this.i.length-1){y=C+1;break e}}y=1e3}else y=1e3;y=F5(this,z,y),Bn(C=bl(this.I),"RID",f),Bn(C,"CVER",22),this.D&&Bn(C,"X-HTTP-Session-Id",this.D),Cv(this,C),J&&(this.O?y="headers="+encodeURIComponent(String(S5(J)))+"&"+y:this.m&&Rx(C,this.m,J)),Mx(this.h,z),this.Ua&&Bn(C,"TYPE","init"),this.P?(Bn(C,"$req",y),Bn(C,"SID","null"),z.T=!0,Ax(z,C,null)):Ax(z,C,y),this.G=2}}else 3==this.G&&(f?k5(this,f):0==this.i.length||g5(this.h)||k5(this))},n.Fa=function(){if(this.u=null,V5(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=dv(_(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ns(10),yb(this),V5(this))},n.Za=function(){null!=this.C&&(this.C=null,yb(this),Nx(this),ns(19))},n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),ns(2)):(this.j.info("Failed to ping google.com"),ns(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=z5.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},Cb.prototype.g=function(f,y){return new js(f,y)},I(js,ki),js.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},js.prototype.close=function(){Ox(this.g)},js.prototype.o=function(f){var y=this.g;if("string"==typeof f){var C={};C.__data__=f,f=C}else this.u&&((C={}).__data__=Ex(f),f=C);y.i.push(new Bve(y.Ya++,f)),3==y.G&&vb(y)},js.prototype.N=function(){this.g.l=null,delete this.j,Ox(this.g),delete this.g,js.aa.N.call(this)},I(q5,Ix),I(G5,wx),I(Hp,z5),Hp.prototype.ua=function(){ts(this.g,"a")},Hp.prototype.ta=function(f){ts(this.g,new q5(f))},Hp.prototype.sa=function(f){ts(this.g,new G5)},Hp.prototype.ra=function(){ts(this.g,"b")},Cb.prototype.createWebChannel=Cb.prototype.g,js.prototype.send=js.prototype.o,js.prototype.open=js.prototype.m,js.prototype.close=js.prototype.close,az=ul.createWebChannelTransport=function(){return new Cb},oz=ul.getStatEventTarget=function(){return cb()},sz=ul.Event=Fd,sM=ul.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ub.NO_ERROR=0,ub.TIMEOUT=8,ub.HTTP_ERROR=6,gw=ul.ErrorCode=ub,l5.COMPLETE="complete",iz=ul.EventType=l5,r5.EventType=cv,cv.OPEN="a",cv.CLOSE="b",cv.ERROR="c",cv.MESSAGE="d",ki.prototype.listen=ki.prototype.K,B_=ul.WebChannel=r5,rz=ul.FetchXmlHttpFactory=_v,ur.prototype.listenOnce=ur.prototype.L,ur.prototype.getLastError=ur.prototype.Ka,ur.prototype.getLastErrorCode=ur.prototype.Ba,ur.prototype.getStatus=ur.prototype.Z,ur.prototype.getResponseJson=ur.prototype.Oa,ur.prototype.getResponseText=ur.prototype.oa,ur.prototype.send=ur.prototype.ea,ur.prototype.setWithCredentials=ur.prototype.Ha,nz=ul.XhrIo=ur}).apply(typeof pw<"u"?pw:typeof self<"u"?self:typeof window<"u"?window:{});const lz="@firebase/firestore";class Xr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xr.UNAUTHENTICATED=new Xr(null),Xr.GOOGLE_CREDENTIALS=new Xr("google-credentials-uid"),Xr.FIRST_PARTY=new Xr("first-party-uid"),Xr.MOCK_USER=new Xr("mock-user");let zf="10.12.5";const gc=new xs.Vy("@firebase/firestore");function qf(){return gc.logLevel}function pe(n,...e){if(gc.logLevel<=xs.$b.DEBUG){const t=e.map(oM);gc.debug(`Firestore (${zf}): ${n}`,...t)}}function vr(n,...e){if(gc.logLevel<=xs.$b.ERROR){const t=e.map(oM);gc.error(`Firestore (${zf}): ${n}`,...t)}}function _s(n,...e){if(gc.logLevel<=xs.$b.WARN){const t=e.map(oM);gc.warn(`Firestore (${zf}): ${n}`,...t)}}function oM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Ue(n="Unexpected state"){const e=`FIRESTORE (${zf}) INTERNAL ASSERTION FAILED: `+n;throw vr(e),new Error(e)}function qe(n,e){n||Ue()}function Se(n,e){return n}const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends A.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class zr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class cz{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Gle{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xr.UNAUTHENTICATED))}shutdown(){}}class Wle{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Kle{constructor(e){this.t=e,this.currentUser=Xr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let o=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new zr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable((0,se.A)(function*(){yield c.promise,yield s(r.currentUser)}))},l=c=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new zr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe("string"==typeof r.accessToken),new cz(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return qe(null===e||"string"==typeof e),new Xr(e)}}class Qle{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Xr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Yle{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Qle(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Xr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uz{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zle{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,pe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(qe("string"==typeof t.token),this.R=t.token,new uz(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Jle(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class dz{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Jle(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function ct(n,e){return n<e?-1:n>e?1:0}function Gf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function hz(n){return n+"\0"}class zn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new he(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zn.fromMillis(Date.now())}static fromDate(e){return zn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new zn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ct(this.nanoseconds,e.nanoseconds):ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new zn(0,0))}static max(){return new Ge(new zn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class j_{constructor(e,t,r){void 0===t?t=0:t>e.length&&Ue(),void 0===r?r=e.length-t:r>e.length-t&&Ue(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===j_.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof j_?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class xt extends j_{construct(e,t,r){return new xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new xt(t)}static emptyPath(){return new xt([])}}const Xle=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kn extends j_{construct(e,t,r){return new kn(e,t,r)}static isValidIdentifier(e){return Xle.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new kn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new he(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new he(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new he(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new he(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kn(t)}static emptyPath(){return new kn([])}}class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(xt.fromString(e))}static fromName(e){return new Pe(xt.fromString(e).popFirst(5))}static empty(){return new Pe(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new xt(e.slice()))}}class Wf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function aM(n){return n.fields.find(e=>2===e.kind)}function td(n){return n.fields.filter(e=>2!==e.kind)}Wf.UNKNOWN_ID=-1;class nd{constructor(e,t){this.fieldPath=e,this.kind=t}}class Kf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Kf(0,ks.min())}}function fz(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ge.fromTimestamp(1e9===r?new zn(t+1,0):new zn(t,r));return new ks(i,Pe.empty(),e)}function pz(n){return new ks(n.readTime,n.key,-1)}class ks{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ks(Ge.min(),Pe.empty(),-1)}static max(){return new ks(Ge.max(),Pe.empty(),-1)}}function lM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Pe.comparator(n.documentKey,e.documentKey),0!==t?t:ct(n.largestBatchId,e.largestBatchId))}const gz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mz{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function mc(n){return cM.apply(this,arguments)}function cM(){return(cM=(0,se.A)(function*(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==gz)throw n;pe("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof q?t:q.resolve(t)}catch(t){return q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):q.reject(t)}static resolve(e){return new q((t,r)=>{t(e)})}static reject(e){return new q((t,r)=>{r(e)})}static waitFor(e){return new q((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=q.resolve(!1);for(const r of e)t=t.next(i=>i?q.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new q((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class mw{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new zr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new $_(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=uM(r.target.error);this.V.reject(new $_(e,i))}}static open(e,t,r,i){try{return new mw(t,e.transaction(i,r))}catch(s){throw new $_(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new rce(t)}}class Ea{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Ea.S((0,A.ZQ)())&&vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return pe("SimpleDb","Removing database:",e),rd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,A.zW)())return!1;if(Ea.C())return!0;const e=(0,A.ZQ)(),t=Ea.S(e),r=0<t&&t<10,i=_z(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,se.A)(function*(){return t.db||(pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new $_(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new he(Y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new he(Y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new $_(e,a))},s.onupgradeneeded=o=>{pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,se.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const l=mw.open(s.db,e,o?"readonly":"readwrite",r),c=i(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),q.reject(h))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,h="FirebaseError"!==c.name&&a<3;if(pe("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),s.close(),!h)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function _z(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class nce{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return rd(this.B.delete())}}class $_ extends he{constructor(e,t){super(Y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function _c(n){return"IndexedDbTransactionError"===n.name}class rce{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rd(r)}add(e){return pe("SimpleDb","ADD",this.store.name,e,e),rd(this.store.add(e))}get(e){return rd(this.store.get(e)).next(t=>(void 0===t&&(t=null),pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return pe("SimpleDb","DELETE",this.store.name,e),rd(this.store.delete(e))}count(){return pe("SimpleDb","COUNT",this.store.name),rd(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new q((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new q((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new q((r,i)=>{t.onerror=s=>{const o=uM(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new q((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new nce(a),c=t(a.primaryKey,a.value,l);if(c instanceof q){const h=c.catch(g=>(l.done(),q.reject(g)));r.push(h)}l.isDone?i():null===l.K?a.continue():a.continue(l.K)}}).next(()=>q.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function rd(n){return new q((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=uM(r.target.error);t(i)}})}let yz=!1;function uM(n){const e=Ea.S((0,A.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yz||(yz=!0,setTimeout(()=>{throw r},0)),r}}return n}class ice{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;pe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,se.A)(function*(){t.task=null;try{pe("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){_c(r)?pe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield mc(r)}yield t.X(6e4)}))}}class sce{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,se.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return q.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return pe("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(pe("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=pz(s);lM(o,r)>0&&(r=o)}),new ks(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Fs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function H_(n){return null==n}function z_(n){return 0===n&&1/n==-1/0}function vz(n){return"number"==typeof n&&Number.isInteger(n)&&!z_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Mi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ez(e)),e=oce(n.get(t),e);return Ez(e)}function oce(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function Ez(n){return n+"\x01\x01"}function Ca(n){const e=n.length;if(qe(e>=2),2===e)return qe("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),xt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&Ue(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===i.length?l=a:(i+=a,l=i,i=""),r.push(l);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:Ue()}s=o+2}return new xt(r)}const Cz=["userId","batchId"];function _w(n,e){return[n,Mi(e)]}function Iz(n,e,t){return[n,Mi(e),t]}const ace={},lce=["prefixPath","collectionGroup","readTime","documentId"],cce=["prefixPath","collectionGroup","documentId"],uce=["collectionGroup","readTime","prefixPath","documentId"],dce=["canonicalId","targetId"],hce=["targetId","path"],fce=["path","targetId"],pce=["collectionId","parent"],gce=["indexId","uid"],mce=["uid","sequenceNumber"],_ce=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yce=["indexId","uid","orderedDocumentKey"],vce=["userId","collectionPath","documentId"],Ece=["userId","collectionPath","largestBatchId"],Cce=["userId","collectionGroup","largestBatchId"],wz=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ice=[...wz,"documentOverlays"],Tz=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bz=Tz,dM=[...bz,"indexConfiguration","indexState","indexEntries"],wce=dM,Tce=[...dM,"globals"];class hM extends mz{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function qr(n,e){const t=Se(n);return Ea.F(t._e,e)}function Az(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function yc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Dz(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Mn{constructor(e,t){this.comparator=e,this.root=t||ci.EMPTY}insert(e,t){return new Mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new Mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yw(this.root,e,this.comparator,!1)}getReverseIterator(){return new yw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yw(this.root,e,this.comparator,!0)}}class yw{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ci{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ci.RED,this.left=i??ci.EMPTY,this.right=s??ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ci(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ci.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ue();const e=this.left.check();if(e!==this.right.check())throw Ue();return e+(this.isRed()?0:1)}}ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1,ci.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue()}get value(){throw Ue()}get color(){throw Ue()}get left(){throw Ue()}get right(){throw Ue()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ci(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mn{constructor(e){this.comparator=e,this.data=new Mn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pz(this.data.getIterator())}getIteratorFrom(e){return new Pz(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof mn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mn(this.comparator);return t.data=e,t}}class Pz{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qf(n){return n.hasNext()?n.getNext():void 0}class ys{constructor(e){this.fields=e,e.sort(kn.comparator)}static empty(){return new ys([])}unionWith(e){let t=new mn(kn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ys(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Mz extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class or{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Mz("Invalid base64 string: "+s):s}}(e);return new or(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new or(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}or.EMPTY_BYTE_STRING=new or("");const Ace=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dl(n){if(qe(!!n),"string"==typeof n){let e=0;const t=Ace.exec(n);if(qe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ar(n.seconds),nanos:ar(n.nanos)}}function ar(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function hl(n){return"string"==typeof n?or.fromBase64String(n):or.fromUint8Array(n)}function vw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ew(n){const e=n.mapValue.fields.__previous_value__;return vw(e)?Ew(e):e}function q_(n){const e=dl(n.mapValue.fields.__local_write_time__.timestampValue);return new zn(e.seconds,e.nanos)}class Sce{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class vc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vc&&e.projectId===this.projectId&&e.database===this.database}}const Ec={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Cw={nullValue:"NULL_VALUE"};function Cc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vw(n)?4:xz(n)?9007199254740991:10:Ue()}function Ia(n,e){if(n===e)return!0;const t=Cc(n);if(t!==Cc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return q_(n).isEqual(q_(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=dl(i.timestampValue),a=dl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,hl(n.bytesValue).isEqual(hl(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return ar(i.geoPointValue.latitude)===ar(s.geoPointValue.latitude)&&ar(i.geoPointValue.longitude)===ar(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ar(i.integerValue)===ar(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ar(i.doubleValue),a=ar(s.doubleValue);return o===a?z_(o)===z_(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Gf(n.arrayValue.values||[],e.arrayValue.values||[],Ia);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Az(o)!==Az(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!Ia(o[l],a[l])))return!1;return!0}(n,e);default:return Ue()}var s}function G_(n,e){return void 0!==(n.values||[]).find(t=>Ia(t,e))}function Ic(n,e){if(n===e)return 0;const t=Cc(n),r=Cc(e);if(t!==r)return ct(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ct(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ar(s.integerValue||s.doubleValue),l=ar(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return Rz(n.timestampValue,e.timestampValue);case 4:return Rz(q_(n),q_(e));case 5:return ct(n.stringValue,e.stringValue);case 6:return function(s,o){const a=hl(s),l=hl(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ct(a[c],l[c]);if(0!==h)return h}return ct(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ct(ar(s.latitude),ar(o.latitude));return 0!==a?a:ct(ar(s.longitude),ar(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=Ic(a[c],l[c]);if(h)return h}return ct(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ec.mapValue&&o===Ec.mapValue)return 0;if(s===Ec.mapValue)return 1;if(o===Ec.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let g=0;g<l.length&&g<h.length;++g){const _=ct(l[g],h[g]);if(0!==_)return _;const E=Ic(a[l[g]],c[h[g]]);if(0!==E)return E}return ct(l.length,h.length)}(n.mapValue,e.mapValue);default:throw Ue()}}function Rz(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ct(n,e);const t=dl(n),r=dl(e),i=ct(t.seconds,r.seconds);return 0!==i?i:ct(t.nanos,r.nanos)}function Yf(n){return fM(n)}function fM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=dl(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?hl(n.bytesValue).toBase64():"referenceValue"in n?Pe.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=fM(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${fM(t.fields[o])}`;return i+"}"}(n.mapValue):Ue()}function id(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function pM(n){return!!n&&"integerValue"in n}function W_(n){return!!n&&"arrayValue"in n}function Oz(n){return!!n&&"nullValue"in n}function Nz(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ww(n){return!!n&&"mapValue"in n}function K_(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return yc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=K_(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=K_(n.arrayValue.values[t]);return e}return Object.assign({},n)}function xz(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Dce(n){return"nullValue"in n?Cw:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?id(vc.empty(),Pe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ue()}function Pce(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?id(vc.empty(),Pe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ec:Ue()}function kz(n,e){const t=Ic(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Fz(n,e){const t=Ic(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ui{constructor(e){this.value=e}static empty(){return new ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ww(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=K_(t)}setAll(e){let t=kn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=K_(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());ww(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ia(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ww(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){yc(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ui(K_(this.value))}}function Lz(n){const e=[];return yc(n.fields,(t,r)=>{const i=new kn([t]);if(ww(r)){const s=Lz(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ys(e)}class Fn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Fn(e,0,Ge.min(),Ge.min(),Ge.min(),ui.empty(),0)}static newFoundDocument(e,t,r,i){return new Fn(e,1,t,Ge.min(),r,i,0)}static newNoDocument(e,t){return new Fn(e,2,t,Ge.min(),Ge.min(),ui.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,Ge.min(),Ge.min(),ui.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ge.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wc{constructor(e,t){this.position=e,this.inclusive=t}}function Vz(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?Pe.comparator(Pe.fromName(o.referenceValue),t.key):Ic(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Uz(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ia(n.position[t],e.position[t]))return!1;return!0}class Q_{constructor(e,t="asc"){this.field=e,this.dir=t}}function Mce(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Bz{}class kt extends Bz{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Rce(e,t,r):"array-contains"===t?new xce(e,r):"in"===t?new Gz(e,r):"not-in"===t?new kce(e,r):"array-contains-any"===t?new Fce(e,r):new kt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Oce(e,r):new Nce(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ic(t,this.value)):null!==t&&Cc(this.value)===Cc(t)&&this.matchesComparison(Ic(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dn extends Bz{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new dn(e,t)}matches(e){return Zf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Zf(n){return"and"===n.op}function gM(n){return"or"===n.op}function mM(n){return jz(n)&&Zf(n)}function jz(n){for(const e of n.filters)if(e instanceof dn)return!1;return!0}function _M(n){if(n instanceof kt)return n.field.canonicalString()+n.op.toString()+Yf(n.value);if(mM(n))return n.filters.map(e=>_M(e)).join(",");{const e=n.filters.map(t=>_M(t)).join(",");return`${n.op}(${e})`}}function $z(n,e){return n instanceof kt?(r=n,(i=e)instanceof kt&&r.op===i.op&&r.field.isEqual(i.field)&&Ia(r.value,i.value)):n instanceof dn?function(r,i){return i instanceof dn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&$z(o,i.filters[a]),!0)}(n,e):void Ue();var r,i}function Hz(n,e){const t=n.filters.concat(e);return dn.create(t,n.op)}function zz(n){return n instanceof kt?`${(t=n).field.canonicalString()} ${t.op} ${Yf(t.value)}`:n instanceof dn?function(t){return t.op.toString()+" {"+t.getFilters().map(zz).join(" ,")+"}"}(n):"Filter";var t}class Rce extends kt{constructor(e,t,r){super(e,t,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Oce extends kt{constructor(e,t){super(e,"in",t),this.keys=qz(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Nce extends kt{constructor(e,t){super(e,"not-in",t),this.keys=qz(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function qz(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Pe.fromName(r.referenceValue))}class xce extends kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return W_(t)&&G_(t.arrayValue,this.value)}}class Gz extends kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&G_(this.value.arrayValue,t)}}class kce extends kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(G_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!G_(this.value.arrayValue,t)}}class Fce extends kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!W_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>G_(this.value.arrayValue,r))}}class Lce{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function yM(n,e=null,t=[],r=[],i=null,s=null,o=null){return new Lce(n,e,t,r,i,s,o)}function sd(n){const e=Se(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>_M(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),H_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Yf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Yf(r)).join(",")),e.ue=t}return e.ue}function Y_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Mce(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$z(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Uz(n.startAt,e.startAt)&&Uz(n.endAt,e.endAt)}function Tw(n){return Pe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function bw(n,e){return n.filters.filter(t=>t instanceof kt&&t.field.isEqual(e))}function Wz(n,e,t){let r=Cw,i=!0;for(const s of bw(n,e)){let o=Cw,a=!0;switch(s.op){case"<":case"<=":o=Dce(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Cw}kz({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];kz({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function Kz(n,e,t){let r=Ec,i=!0;for(const s of bw(n,e)){let o=Ec,a=!0;switch(s.op){case">=":case">":o=Pce(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ec}Fz({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];Fz({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class fl{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null}}function Qz(n,e,t,r,i,s,o,a){return new fl(n,e,t,r,i,s,o,a)}function Jf(n){return new fl(n)}function Yz(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function vM(n){return null!==n.collectionGroup}function Xf(n){const e=Se(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new mn(kn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Q_(s,r))}),t.has(kn.keyField().canonicalString())||e.ce.push(new Q_(kn.keyField(),r))}return e.ce}function Ri(n){const e=Se(n);return e.le||(e.le=function Jz(n,e){if("F"===n.limitType)return yM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Q_(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new wc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new wc(n.startAt.position,n.startAt.inclusive):null;return yM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Xf(n))),e.le}function EM(n,e){const t=n.filters.concat([e]);return new fl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Aw(n,e,t){return new fl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Z_(n,e){return Y_(Ri(n),Ri(e))&&n.limitType===e.limitType}function Xz(n){return`${sd(Ri(n))}|lt:${n.limitType}`}function ep(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>zz(i)).join(", ")}]`),H_(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Yf(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Yf(i)).join(",")),`Target(${r})`}(Ri(n))}; limitType=${n.limitType})`}function J_(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Pe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Xf(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,l){const c=Vz(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Xf(r),i)||r.endAt&&!function(o,a,l){const c=Vz(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Xf(r),i)));var r,i}function e4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function t4(n){return(e,t)=>{let r=!1;for(const i of Xf(n)){const s=Vce(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Vce(n,e,t){const r=n.field.isKeyField()?Pe.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return null!==l&&null!==c?Ic(l,c):Ue()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ue()}}class pl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yc(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Dz(this.inner)}size(){return this.innerSize}}const Uce=new Mn(Pe.comparator);function vs(){return Uce}const n4=new Mn(Pe.comparator);function X_(...n){let e=n4;for(const t of n)e=e.insert(t.key,t);return e}function r4(n){let e=n4;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function wa(){return ey()}function i4(){return ey()}function ey(){return new pl(n=>n.toString(),(n,e)=>n.isEqual(e))}const Bce=new Mn(Pe.comparator),jce=new mn(Pe.comparator);function mt(...n){let e=jce;for(const t of n)e=e.add(t);return e}const $ce=new mn(ct);function CM(){return $ce}function s4(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:z_(e)?"-0":e}}function o4(n){return{integerValue:""+n}}function a4(n,e){return vz(e)?o4(e):s4(n,e)}class Sw{constructor(){this._=void 0}}function Hce(n,e,t){return n instanceof tp?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&vw(s)&&(s=Ew(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof od?c4(n,e):n instanceof ad?u4(n,e):function(i,s){const o=l4(i,s),a=d4(o)+d4(i.Pe);return pM(o)&&pM(i.Pe)?o4(a):s4(i.serializer,a)}(n,e)}function zce(n,e,t){return n instanceof od?c4(n,e):n instanceof ad?u4(n,e):t}function l4(n,e){return n instanceof np?pM(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class tp extends Sw{}class od extends Sw{constructor(e){super(),this.elements=e}}function c4(n,e){const t=h4(e);for(const r of n.elements)t.some(i=>Ia(i,r))||t.push(r);return{arrayValue:{values:t}}}class ad extends Sw{constructor(e){super(),this.elements=e}}function u4(n,e){let t=h4(e);for(const r of n.elements)t=t.filter(i=>!Ia(i,r));return{arrayValue:{values:t}}}class np extends Sw{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function d4(n){return ar(n.integerValue||n.doubleValue)}function h4(n){return W_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ty{constructor(e,t){this.field=e,this.transform=t}}class Gce{constructor(e,t){this.version=e,this.transformResults=t}}class qn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dw(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Pw{}function f4(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ip(n.key,qn.none()):new rp(n.key,n.data,qn.none());{const t=n.data,r=ui.empty();let i=new mn(kn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new gl(n.key,r,new ys(i.toArray()),qn.none())}}function Wce(n,e,t){n instanceof rp?function(i,s,o){const a=i.value.clone(),l=m4(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof gl?function(i,s,o){if(!Dw(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=m4(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(g4(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ny(n,e,t,r){return n instanceof rp?function(s,o,a,l){if(!Dw(s.precondition,o))return a;const c=s.value.clone(),h=_4(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof gl?function(s,o,a,l){if(!Dw(s.precondition,o))return a;const c=_4(s.fieldTransforms,l,o),h=o.data;return h.setAll(g4(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(n,e,t,r):(a=t,Dw(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function Kce(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=l4(r.transform,i||null);null!=s&&(null===t&&(t=ui.empty()),t.set(r.field,s))}return t||null}function p4(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Gf(r,i,(s,o)=>function qce(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof od&&i instanceof od||r instanceof ad&&i instanceof ad?Gf(r.elements,i.elements,Ia):r instanceof np&&i instanceof np?Ia(r.Pe,i.Pe):r instanceof tp&&i instanceof tp);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class rp extends Pw{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class gl extends Pw{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function g4(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function m4(n,e,t){const r=new Map;qe(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,zce(o,a,t[i]))}return r}function _4(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Hce(s,o,e))}return r}class ip extends Pw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IM extends Pw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Wce(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ny(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ny(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=i4();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=f4(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ge.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mt())}isEqual(e){return this.batchId===e.batchId&&Gf(this.mutations,e.mutations,(t,r)=>p4(t,r))&&Gf(this.baseMutations,e.baseMutations,(t,r)=>p4(t,r))}}class TM{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){qe(e.mutations.length===r.length);let i=function(){return Bce}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new TM(e,t,r,i)}}class bM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Qce{constructor(e,t){this.count=e,this.unchangedNames=t}}var xr,$t;function v4(n){switch(n){default:return Ue();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function E4(n){if(void 0===n)return vr("GRPC error has no .code"),Y.UNKNOWN;switch(n){case xr.OK:return Y.OK;case xr.CANCELLED:return Y.CANCELLED;case xr.UNKNOWN:return Y.UNKNOWN;case xr.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case xr.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case xr.INTERNAL:return Y.INTERNAL;case xr.UNAVAILABLE:return Y.UNAVAILABLE;case xr.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case xr.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case xr.NOT_FOUND:return Y.NOT_FOUND;case xr.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case xr.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case xr.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case xr.ABORTED:return Y.ABORTED;case xr.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case xr.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case xr.DATA_LOSS:return Y.DATA_LOSS;default:return Ue()}}($t=xr||(xr={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";function C4(){return new TextEncoder}const Yce=new ed([4294967295,4294967295],0);function I4(n){const e=C4().encode(n),t=new tz;return t.update(e),new Uint8Array(t.digest())}function w4(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ed([t,r],0),new ed([i,s],0)]}class AM{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ry(`Invalid padding: ${t}`);if(r<0)throw new ry(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new ry(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new ry(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ed.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ed.fromNumber(r)));return 1===i.compare(Yce)&&(i=new ed([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=I4(e),[r,i]=w4(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new AM(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=I4(e),[r,i]=w4(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class ry extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class iy{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,sy.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new iy(Ge.min(),i,new Mn(ct),vs(),mt())}}class sy{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new sy(r,t,mt(),mt(),mt())}}class Rw{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class T4{constructor(e,t){this.targetId=e,this.me=t}}class b4{constructor(e,t,r=or.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class A4{constructor(){this.fe=0,this.ge=D4(),this.pe=or.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=mt(),t=mt(),r=mt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ue()}}),new sy(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=D4()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Zce{constructor(e){this.Le=e,this.Be=new Map,this.ke=vs(),this.qe=S4(),this.Qe=new Mn(ct)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Ue()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(Tw(s))if(0===r){const o=new Pe(s.path);this.Ue(t,o,Fn.newNoDocument(o,Ge.min()))}else qe(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;0!==l&&(this.je(t),this.Qe=this.Qe.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=hl(r).toUint8Array()}catch(l){if(l instanceof Mz)return _s("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new AM(o,i,s)}catch(l){return _s(l instanceof ry?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Tw(a.target)){const l=new Pe(a.target.path);null!==this.ke.get(l)||this.it(o,l)||this.Ue(o,l,Fn.newNoDocument(l,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=mt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new iy(e,t,this.Qe,this.ke,r);return this.ke=vs(),this.qe=S4(),this.Qe=new Mn(ct),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new A4,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new mn(ct),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||pe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new A4),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function S4(){return new Mn(Pe.comparator)}function D4(){return new Mn(Pe.comparator)}const Jce={asc:"ASCENDING",desc:"DESCENDING"},Xce={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eue={and:"AND",or:"OR"};class tue{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function SM(n,e){return n.useProto3Json||H_(e)?e:{value:e}}function sp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function P4(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function nue(n,e){return sp(n,e.toTimestamp())}function Er(n){return qe(!!n),Ge.fromTimestamp(function(t){const r=dl(t);return new zn(r.seconds,r.nanos)}(n))}function DM(n,e){return PM(n,e).canonicalString()}function PM(n,e){const t=(i=n,new xt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function M4(n){const e=xt.fromString(n);return qe(j4(e)),e}function oy(n,e){return DM(n.databaseId,e.path)}function Ta(n,e){const t=M4(e);if(t.get(1)!==n.databaseId.projectId)throw new he(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe(N4(t))}function R4(n,e){return DM(n.databaseId,e)}function O4(n){const e=M4(n);return 4===e.length?xt.emptyPath():N4(e)}function MM(n){return new xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function N4(n){return qe(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function x4(n,e,t){return{name:oy(n,e),fields:t.value.mapValue.fields}}function k4(n,e,t){const r=Ta(n,e.name),i=Er(e.updateTime),s=e.createTime?Er(e.createTime):Ge.min(),o=new ui({mapValue:{fields:e.fields}}),a=Fn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function ay(n,e){let t;if(e instanceof rp)t={update:x4(n,e.key,e.value)};else if(e instanceof ip)t={delete:oy(n,e.key)};else if(e instanceof gl)t={update:x4(n,e.key,e.data),updateMask:uue(e.fieldMask)};else{if(!(e instanceof IM))return Ue();t={verify:oy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof tp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof od)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ad)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof np)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ue()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:nue(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Ue()),t;var s}function RM(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?qn.updateTime(Er(s.updateTime)):void 0!==s.exists?qn.exists(s.exists):qn.none():qn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;"setToServerValue"in a?(qe("REQUEST_TIME"===a.setToServerValue),l=new tp):"appendMissingElements"in a?l=new od(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new ad(a.removeAllFromArray.values||[]):"increment"in a?l=new np(o,a.increment):Ue();const c=kn.fromServerFormat(a.fieldPath);return new ty(c,l)}(n,i)):[];var s;if(e.update){const i=Ta(n,e.update.name),s=new ui({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new ys((e.updateMask.fieldPaths||[]).map(h=>kn.fromServerFormat(h)));return new gl(i,s,o,t,r)}return new rp(i,s,t,r)}if(e.delete){const i=Ta(n,e.delete);return new ip(i,t)}if(e.verify){const i=Ta(n,e.verify);return new IM(i,t)}return Ue()}function F4(n,e){return{documents:[R4(n,e.path)]}}function Ow(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=R4(n,i);const s=function(c){if(0!==c.length)return B4(dn.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(0!==c.length)return c.map(h=>{return{field:Tc((_=h).field),direction:aue(_.dir)};var _})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=SM(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:t,parent:i};var c}function V4(n){let e=O4(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){qe(1===r);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(g){const _=U4(g);return _ instanceof dn&&mM(_)?_.getFilters():[_]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(_=>{return new Q_(op((I=_).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let a=null;t.limit&&(a=function(g){let _;return _="object"==typeof g?g.value:g,H_(_)?null:_}(t.limit));let l=null;var g;t.startAt&&(l=new wc((g=t.startAt).values||[],!!g.before));let c=null;return t.endAt&&(c=function(g){return new wc(g.values||[],!g.before)}(t.endAt)),Qz(e,i,o,s,a,"F",l,c)}function U4(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=op(t.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=op(t.unaryFilter.field);return kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=op(t.unaryFilter.field);return kt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=op(t.unaryFilter.field);return kt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ue()}}(n):void 0!==n.fieldFilter?kt.create(op((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ue()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return dn.create(t.compositeFilter.filters.map(r=>U4(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ue()}}(t.compositeFilter.op))}(n):Ue();var t}function aue(n){return Jce[n]}function lue(n){return Xce[n]}function cue(n){return eue[n]}function Tc(n){return{fieldPath:n.canonicalString()}}function op(n){return kn.fromServerFormat(n.fieldPath)}function B4(n){return n instanceof kt?function(t){if("=="===t.op){if(Nz(t.value))return{unaryFilter:{field:Tc(t.field),op:"IS_NAN"}};if(Oz(t.value))return{unaryFilter:{field:Tc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Nz(t.value))return{unaryFilter:{field:Tc(t.field),op:"IS_NOT_NAN"}};if(Oz(t.value))return{unaryFilter:{field:Tc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tc(t.field),op:lue(t.op),value:t.value}}}(n):n instanceof dn?function(t){const r=t.getFilters().map(i=>B4(i));return 1===r.length?r[0]:{compositeFilter:{op:cue(t.op),filters:r}}}(n):Ue()}function uue(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function j4(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ml{constructor(e,t,r,i,s=Ge.min(),o=Ge.min(),a=or.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ml(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ml(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ml(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ml(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $4{constructor(e){this.ct=e}}function H4(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Nw(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:oy(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:sp(s,o.version.toTimestamp()),createTime:sp(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ld(e.version)};else{if(!e.isUnknownDocument())return Ue();r.unknownDocument={path:t.path.toArray(),version:ld(e.version)}}var s,o;return r}function Nw(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ld(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function cd(n){const e=new zn(n.seconds,n.nanoseconds);return Ge.fromTimestamp(e)}function ud(n,e){const t=(e.baseMutations||[]).map(s=>RM(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>RM(n.ct,s)),i=zn.fromMillis(e.localWriteTimeMs);return new wM(e.batchId,i,t,r)}function ly(n){const e=cd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?cd(n.lastLimboFreeSnapshotVersion):Ge.min();let r;return r=void 0!==n.query.documents?(qe(1===(s=n.query).documents.length),Ri(Jf(O4(s.documents[0])))):function(s){return Ri(V4(s))}(n.query),new ml(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,or.fromBase64String(n.resumeToken));var s}function z4(n,e){const t=ld(e.snapshotVersion),r=ld(e.lastLimboFreeSnapshotVersion);let i;i=Tw(e.target)?F4(n.ct,e.target):Ow(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sd(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function OM(n){const e=V4({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Aw(e,e.limit,"L"):e}function NM(n,e){return new bM(e.largestBatchId,RM(n.ct,e.overlayMutation))}function q4(n,e){const t=e.path.lastSegment();return[n,Mi(e.path.popLast()),t]}function G4(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ld(r.readTime),documentKey:Mi(r.documentKey.path),largestBatchId:r.largestBatchId}}class hue{getBundleMetadata(e,t){return W4(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:cd(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return W4(e).put({bundleId:(i=t).id,createTime:ld(Er(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return K4(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:OM(s.bundledQuery),readTime:cd(s.readTime)};var s})}saveNamedQuery(e,t){return K4(e).put({name:(i=t).name,readTime:ld(Er(i.readTime)),bundledQuery:i.bundledQuery});var i}}function W4(n){return qr(n,"bundles")}function K4(n){return qr(n,"namedQueries")}class xw{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new xw(e,t.uid||"")}getOverlay(e,t){return cy(e).get(q4(this.userId,t)).next(r=>r?NM(this.serializer,r):null)}getOverlays(e,t){const r=wa();return q.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new bM(t,o);i.push(this.ht(e,a))}),q.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Mi(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(cy(e).j("collectionPathOverlayIndex",a))}),q.waitFor(s)}getOverlaysForCollection(e,t,r){const i=wa(),s=Mi(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return cy(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=NM(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=wa();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cy(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,h)=>{const g=NM(this.serializer,c);s.size()<i||g.largestBatchId===o?(s.set(g.getKey(),g),o=g.largestBatchId):h.done()}).next(()=>s)}ht(e,t){return cy(e).put(function(i,s,o){const[a,l,c]=q4(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ay(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function cy(n){return qr(n,"documentOverlays")}class fue{Pt(e){return qr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?or.fromUint8Array(r):or.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class dd{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ar(e.integerValue));else if("doubleValue"in e){const r=ar(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),z_(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=dl(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(hl(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?xz(e)?this.dt(t,Number.MAX_SAFE_INTEGER):(this.wt(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.St(e.arrayValue,t),this.ft(t)):Ue()}Vt(e,t){this.dt(t,25),this.bt(e,t)}bt(e,t){t.Rt(e)}wt(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}St(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Pe.fromName(e).path.forEach(r=>{this.dt(t,60),this.bt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function pue(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Q4(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=pue(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}dd.Dt=new dd;class gue{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.vt(r.value),r=t.next();this.Ft()}Mt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.xt(r.value),r=t.next();this.Ot()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.vt(r);else if(r<2048)this.vt(960|r>>>6),this.vt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.vt(480|r>>>12),this.vt(128|63&r>>>6),this.vt(128|63&r);else{const i=t.codePointAt(0);this.vt(240|i>>>18),this.vt(128|63&i>>>12),this.vt(128|63&i>>>6),this.vt(128|63&i)}}this.Ft()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.xt(r);else if(r<2048)this.xt(960|r>>>6),this.xt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.xt(480|r>>>12),this.xt(128|63&r>>>6),this.xt(128|63&r);else{const i=t.codePointAt(0);this.xt(240|i>>>18),this.xt(128|63&i>>>12),this.xt(128|63&i>>>6),this.xt(128|63&i)}}this.Ot()}Bt(e){const t=this.kt(e),r=Q4(t);this.qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Qt(e){const t=this.kt(e),r=Q4(t);this.qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Kt(){this.$t(255),this.$t(255)}Ut(){this.Wt(255),this.Wt(255)}reset(){this.position=0}seed(e){this.qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Gt(){return this.buffer.slice(0,this.position)}kt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}vt(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(t)}xt(e){const t=255&e;0===t?(this.Wt(0),this.Wt(255)):255===t?(this.Wt(255),this.Wt(0)):this.Wt(e)}Ft(){this.$t(0),this.$t(1)}Ot(){this.Wt(0),this.Wt(1)}$t(e){this.qt(1),this.buffer[this.position++]=e}Wt(e){this.qt(1),this.buffer[this.position++]=~e}qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class mue{constructor(e){this.zt=e}gt(e){this.zt.Ct(e)}Rt(e){this.zt.Nt(e)}At(e){this.zt.Bt(e)}Et(){this.zt.Kt()}}class _ue{constructor(e){this.zt=e}gt(e){this.zt.Mt(e)}Rt(e){this.zt.Lt(e)}At(e){this.zt.Qt(e)}Et(){this.zt.Ut()}}class uy{constructor(){this.zt=new gue,this.jt=new mue(this.zt),this.Ht=new _ue(this.zt)}seed(e){this.zt.seed(e)}Jt(e){return 0===e?this.jt:this.Ht}Gt(){return this.zt.Gt()}reset(){this.zt.reset()}}class hd{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Yt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new hd(this.indexId,this.documentKey,this.arrayValue,r)}}function bc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Y4(n.arrayValue,e.arrayValue),0!==t?t:(t=Y4(n.directionalValue,e.directionalValue),0!==t?t:Pe.comparator(n.documentKey,e.documentKey)))}function Y4(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Z4{constructor(e){this.Zt=new mn((t,r)=>kn.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Xt=e.orderBy,this.en=[];for(const t of e.filters){const r=t;r.isInequality()?this.Zt=this.Zt.add(r):this.en.push(r)}}get tn(){return this.Zt.size>1}nn(e){if(qe(e.collectionGroup===this.collectionId),this.tn)return!1;const t=aM(e);if(void 0!==t&&!this.rn(t))return!1;const r=td(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.rn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Zt.size>0){const a=this.Zt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.sn(a,l)||!this.on(this.Xt[o++],l))return!1}++s}for(;s<r.length;++s)if(o>=this.Xt.length||!this.on(this.Xt[o++],r[s]))return!1;return!0}_n(){if(this.tn)return null;let e=new mn(kn.comparator);const t=[];for(const r of this.en)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new nd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new nd(r.field,0))}for(const r of this.Xt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new nd(r.field,"asc"===r.dir?0:1)));return new Wf(Wf.UNKNOWN_ID,this.collectionId,t,Kf.empty())}rn(e){for(const t of this.en)if(this.sn(t,e))return!0;return!1}sn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}on(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function J4(n){var e,t;if(qe(n instanceof kt||n instanceof dn),n instanceof kt){if(n instanceof Gz){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>kt.create(n.field,"==",s)))||[];return dn.create(i,"or")}return n}const r=n.filters.map(i=>J4(i));return dn.create(r,n.op)}function yue(n){if(0===n.getFilters().length)return[];const e=FM(J4(n));return qe(X4(e)),xM(e)||kM(e)?[e]:e.getFilters()}function xM(n){return n instanceof kt}function kM(n){return n instanceof dn&&mM(n)}function X4(n){return xM(n)||kM(n)||function(t){if(t instanceof dn&&gM(t)){for(const r of t.getFilters())if(!xM(r)&&!kM(r))return!1;return!0}return!1}(n)}function FM(n){if(qe(n instanceof kt||n instanceof dn),n instanceof kt)return n;if(1===n.filters.length)return FM(n.filters[0]);const e=n.filters.map(r=>FM(r));let t=dn.create(e,n.op);return t=kw(t),X4(t)?t:(qe(t instanceof dn),qe(Zf(t)),qe(t.filters.length>1),t.filters.reduce((r,i)=>LM(r,i)))}function LM(n,e){let t;return qe(n instanceof kt||n instanceof dn),qe(e instanceof kt||e instanceof dn),t=n instanceof kt?e instanceof kt?dn.create([n,e],"and"):eq(n,e):e instanceof kt?eq(e,n):function(i,s){if(qe(i.filters.length>0&&s.filters.length>0),Zf(i)&&Zf(s))return Hz(i,s.getFilters());const o=gM(i)?i:s,a=gM(i)?s:i,l=o.filters.map(c=>LM(c,a));return dn.create(l,"or")}(n,e),kw(t)}function eq(n,e){if(Zf(e))return Hz(e,n.getFilters());{const t=e.filters.map(r=>LM(n,r));return dn.create(t,"or")}}function kw(n){if(qe(n instanceof kt||n instanceof dn),n instanceof kt)return n;const e=n.getFilters();if(1===e.length)return kw(e[0]);if(jz(n))return n;const t=e.map(i=>kw(i)),r=[];return t.forEach(i=>{i instanceof kt?r.push(i):i instanceof dn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:dn.create(r,n.op)}class vue{constructor(){this.an=new VM}addToCollectionParentIndex(e,t){return this.an.add(t),q.resolve()}getCollectionParents(e,t){return q.resolve(this.an.getEntries(t))}addFieldIndex(e,t){return q.resolve()}deleteFieldIndex(e,t){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,t){return q.resolve()}getDocumentsMatchingTarget(e,t){return q.resolve(null)}getIndexType(e,t){return q.resolve(0)}getFieldIndexes(e,t){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,t){return q.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,t){return q.resolve(ks.min())}updateCollectionGroup(e,t,r){return q.resolve()}updateIndexEntries(e,t){return q.resolve()}}class VM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mn(xt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mn(xt.comparator)).toArray()}}const Fw=new Uint8Array(0);class Eue{constructor(e,t){this.databaseId=t,this.un=new VM,this.cn=new pl(r=>sd(r),(r,i)=>Y_(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.un.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.un.add(t)});const s={collectionId:r,parent:Mi(i)};return tq(e).put(s)}return q.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[hz(t),""],!1,!0);return tq(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Ca(o.parent))}return r})}addFieldIndex(e,t){const r=dy(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=lp(e);return s.next(a=>{o.put(G4(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=dy(e),i=lp(e),s=ap(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=dy(e),r=ap(e),i=lp(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return q.forEach(this.ln(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new Z4(r)._n();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=ap(e);let i=!0;const s=new Map;return q.forEach(this.ln(t),o=>this.hn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=mt();const a=[];return q.forEach(s,(l,c)=>{var H;pe("IndexedDbIndexManager",`Using index ${H=l,`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map(oe=>`${oe.fieldPath}:${oe.kind}`).join(",")}`} to execute ${sd(t)}`);const h=function(H,oe){const Te=aM(oe);if(void 0===Te)return null;for(const Re of bw(H,Te.fieldPath))switch(Re.op){case"array-contains-any":return Re.value.arrayValue.values||[];case"array-contains":return[Re.value]}return null}(c,l),g=function(H,oe){const Te=new Map;for(const Re of td(oe))for(const k of bw(H,Re.fieldPath))switch(k.op){case"==":case"in":Te.set(Re.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return Te.set(Re.fieldPath.canonicalString(),k.value),Array.from(Te.values())}return null}(c,l),_=function(H,oe){const Te=[];let Re=!0;for(const k of td(oe)){const P=0===k.kind?Wz(H,k.fieldPath,H.startAt):Kz(H,k.fieldPath,H.startAt);Te.push(P.value),Re&&(Re=P.inclusive)}return new wc(Te,Re)}(c,l),E=function(H,oe){const Te=[];let Re=!0;for(const k of td(oe)){const P=0===k.kind?Kz(H,k.fieldPath,H.endAt):Wz(H,k.fieldPath,H.endAt);Te.push(P.value),Re&&(Re=P.inclusive)}return new wc(Te,Re)}(c,l),I=this.Pn(l,c,_),T=this.Pn(l,c,E),S=this.In(l,c,g),L=this.Tn(l.indexId,h,I,_.inclusive,T,E.inclusive,S);return q.forEach(L,O=>r.G(O,t.limit).next(H=>{H.forEach(oe=>{const Te=Pe.fromSegments(oe.documentKey);o.has(Te)||(o=o.add(Te),a.push(Te))})}))}).next(()=>a)}return q.resolve(null)})}ln(e){let t=this.cn.get(e);return t||(t=0===e.filters.length?[e]:yue(dn.create(e.filters,"and")).map(r=>yM(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.cn.set(e,t),t)}Tn(e,t,r,i,s,o,a){const l=(null!=t?t.length:1)*Math.max(r.length,s.length),c=l/(null!=t?t.length:1),h=[];for(let g=0;g<l;++g){const _=t?this.En(t[g/c]):Fw,E=this.dn(e,_,r[g%c],i),I=this.An(e,_,s[g%c],o),T=a.map(S=>this.dn(e,_,S,!0));h.push(...this.createRange(E,I,T))}return h}dn(e,t,r,i){const s=new hd(e,Pe.empty(),t,r);return i?s:s.Yt()}An(e,t,r,i){const s=new hd(e,Pe.empty(),t,r);return i?s.Yt():s}hn(e,t){const r=new Z4(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.nn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.ln(t);return q.forEach(i,s=>this.hn(e,s).next(o=>{o?0!==r&&o.fields.length<function(l){let c=new mn(kn.comparator),h=!1;for(const g of l.filters)for(const _ of g.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?h=!0:c=c.add(_.field));for(const g of l.orderBy)g.field.isKeyField()||(c=c.add(g.field));return c.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Rn(e,t){const r=new uy;for(const i of td(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Jt(i.kind);dd.Dt.It(s,o)}return r.Gt()}En(e){const t=new uy;return dd.Dt.It(e,t.Jt(0)),t.Gt()}Vn(e,t){const r=new uy;return dd.Dt.It(id(this.databaseId,t),r.Jt(function(s){const o=td(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Gt()}In(e,t,r){if(null===r)return[];let i=[];i.push(new uy);let s=0;for(const o of td(e)){const a=r[s++];for(const l of i)if(this.mn(t,o.fieldPath)&&W_(a))i=this.fn(i,o,a);else{const c=l.Jt(o.kind);dd.Dt.It(a,c)}}return this.gn(i)}Pn(e,t,r){return this.In(e,t,r.position)}gn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Gt();return t}fn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new uy;l.seed(a.Gt()),dd.Dt.It(o,l.Jt(t.kind)),s.push(l)}return s}mn(e,t){return!!e.filters.find(r=>r instanceof kt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=dy(e),i=lp(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return q.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,g){const _=g?new Kf(g.sequenceNumber,new ks(cd(g.readTime),new Pe(Ca(g.documentKey)),g.largestBatchId)):Kf.empty(),E=h.fields.map(([I,T])=>new nd(kn.fromServerFormat(I),T));return new Wf(h.indexId,h.collectionGroup,E,_)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:ct(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=dy(e),s=lp(e);return this.pn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>q.forEach(a,l=>s.put(G4(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return q.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?q.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),q.forEach(a,l=>this.yn(e,i,l).next(c=>{const h=this.wn(s,l);return c.isEqual(h)?q.resolve():this.Sn(e,s,l,c,h)}))))})}bn(e,t,r,i){return ap(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Vn(r,t.key),documentKey:t.key.path.toArray()})}Dn(e,t,r,i){return ap(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Vn(r,t.key),t.key.path.toArray()])}yn(e,t,r){const i=ap(e);let s=new mn(bc);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Vn(r,t)])},(o,a)=>{s=s.add(new hd(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}wn(e,t){let r=new mn(bc);const i=this.Rn(t,e);if(null==i)return r;const s=aM(t);if(null!=s){const o=e.data.field(s.fieldPath);if(W_(o))for(const a of o.arrayValue.values||[])r=r.add(new hd(t.indexId,e.key,this.En(a),i))}else r=r.add(new hd(t.indexId,e.key,Fw,i));return r}Sn(e,t,r,i,s){pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,h,g,_){const E=l.getIterator(),I=c.getIterator();let T=Qf(E),S=Qf(I);for(;T||S;){let L=!1,O=!1;if(T&&S){const H=h(T,S);H<0?O=!0:H>0&&(L=!0)}else null!=T?O=!0:L=!0;L?(g(S),S=Qf(I)):O?(_(T),T=Qf(E)):(T=Qf(E),S=Qf(I))}}(i,s,bc,a=>{o.push(this.bn(e,t,r,a))},a=>{o.push(this.Dn(e,t,r,a))}),q.waitFor(o)}pn(e){let t=1;return lp(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>bc(o,a)).filter((o,a,l)=>!a||0!==bc(o,l[a-1]));const i=[];i.push(e);for(const o of r){const a=bc(o,e),l=bc(o,t);if(0===a)i[0]=e.Yt();else if(a>0&&l<0)i.push(o),i.push(o.Yt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Fw,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Fw,[]]))}return s}Cn(e,t){return bc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nq)}getMinOffset(e,t){return q.mapArray(this.ln(t),r=>this.hn(e,r).next(i=>i||Ue())).next(nq)}}function tq(n){return qr(n,"collectionParents")}function ap(n){return qr(n,"indexEntries")}function dy(n){return qr(n,"indexConfiguration")}function lp(n){return qr(n,"indexState")}function nq(n){qe(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;lM(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ks(e.readTime,e.documentKey,t)}const rq={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Oi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Oi(e,Oi.DEFAULT_COLLECTION_PERCENTILE,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function iq(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.J({range:o},(h,g,_)=>(a++,_.delete()));s.push(l.next(()=>{qe(1===a)}));const c=[];for(const h of t.mutations){const g=Iz(e,h.key.path,t.batchId);s.push(i.delete(g)),c.push(h.key)}return q.waitFor(s).next(()=>c)}function Lw(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ue();e=n.noDocument}return JSON.stringify(e).length}Oi.DEFAULT_COLLECTION_PERCENTILE=10,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oi.DEFAULT=new Oi(41943040,Oi.DEFAULT_COLLECTION_PERCENTILE,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oi.DISABLED=new Oi(-1,0,0);class Vw{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.vn={}}static lt(e,t,r,i){qe(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Vw(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ac(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=cp(e),o=Ac(e);return o.add({}).next(a=>{qe("number"==typeof a);const l=new wM(a,t,r,i),c=function(E,I,T){const S=T.baseMutations.map(O=>ay(E.ct,O)),L=T.mutations.map(O=>ay(E.ct,O));return{userId:I,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:S,mutations:L}}(this.serializer,this.userId,l),h=[];let g=new mn((_,E)=>ct(_.canonicalString(),E.canonicalString()));for(const _ of i){const E=Iz(this.userId,_.key.path,a);g=g.add(_.key.path.popLast()),h.push(o.put(c)),h.push(s.put(E,ace))}return g.forEach(_=>{h.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.vn[a]=l.keys()}),q.waitFor(h).next(()=>l)})}lookupMutationBatch(e,t){return Ac(e).get(t).next(r=>r?(qe(r.userId===this.userId),ud(this.serializer,r)):null)}Fn(e,t){return this.vn[t]?q.resolve(this.vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ac(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(qe(a.batchId>=r),s=ud(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ac(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ac(e).U("userMutationsIndex",t).next(r=>r.map(i=>ud(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=_w(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return cp(e).J({range:i},(o,a,l)=>{const[c,h,g]=o,_=Ca(h);if(c===this.userId&&t.path.isEqual(_))return Ac(e).get(g).next(E=>{if(!E)throw Ue();qe(E.userId===this.userId),s.push(ud(this.serializer,E))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(ct);const i=[];return t.forEach(s=>{const o=_w(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=cp(e).J({range:a},(c,h,g)=>{const[_,E,I]=c,T=Ca(E);_===this.userId&&s.path.isEqual(T)?r=r.add(I):g.done()});i.push(l)}),q.waitFor(i).next(()=>this.Mn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=_w(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new mn(ct);return cp(e).J({range:o},(l,c,h)=>{const[g,_,E]=l,I=Ca(_);g===this.userId&&r.isPrefixOf(I)?I.length===i&&(a=a.add(E)):h.done()}).next(()=>this.Mn(e,a))}Mn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Ac(e).get(s).next(o=>{if(null===o)throw Ue();qe(o.userId===this.userId),r.push(ud(this.serializer,o))}))}),q.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return iq(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.xn(t.batchId)}),q.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}xn(e){delete this.vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return q.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return cp(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Ca(s[1]);i.push(l)}else a.done()}).next(()=>{qe(0===i.length)})})}containsKey(e,t){return sq(e,this.userId,t)}On(e){return oq(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function sq(n,e,t){const r=_w(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return cp(n).J({range:s,H:!0},(a,l,c)=>{const[h,g,_]=a;h===e&&g===i&&(o=!0),c.done()}).next(()=>o)}function Ac(n){return qr(n,"mutations")}function cp(n){return qr(n,"documentMutations")}function oq(n){return qr(n,"mutationQueues")}class fd{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Ln(){return new fd(0)}static Bn(){return new fd(-1)}}class Cue{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.kn(e).next(t=>{const r=new fd(t.highestTargetId);return t.highestTargetId=r.next(),this.qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.kn(e).next(t=>Ge.fromTimestamp(new zn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.kn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.kn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.qn(e,i)))}addTargetData(e,t){return this.Qn(e,t).next(()=>this.kn(e).next(r=>(r.targetCount+=1,this.Kn(t,r),this.qn(e,r))))}updateTargetData(e,t){return this.Qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>up(e).delete(t.targetId)).next(()=>this.kn(e)).next(r=>(qe(r.targetCount>0),r.targetCount-=1,this.qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return up(e).J((o,a)=>{const l=ly(a);l.sequenceNumber<=t&&null===r.get(l.targetId)&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>q.waitFor(s)).next(()=>i)}forEachTarget(e,t){return up(e).J((r,i)=>{const s=ly(i);t(s)})}kn(e){return aq(e).get("targetGlobalKey").next(t=>(qe(null!==t),t))}qn(e,t){return aq(e).put("targetGlobalKey",t)}Qn(e,t){return up(e).put(z4(this.serializer,t))}Kn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.kn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=sd(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return up(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=ly(a);Y_(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Sc(e);return t.forEach(o=>{const a=Mi(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),q.waitFor(i)}removeMatchingKeys(e,t,r){const i=Sc(e);return q.forEach(t,s=>{const o=Mi(s.path);return q.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Sc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Sc(e);let s=mt();return i.J({range:r,H:!0},(o,a,l)=>{const c=Ca(o[1]),h=new Pe(c);s=s.add(h)}).next(()=>s)}containsKey(e,t){const r=Mi(t.path),i=IDBKeyRange.bound([r],[hz(r)],!1,!0);let s=0;return Sc(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}ot(e,t){return up(e).get(t).next(r=>r?ly(r):null)}}function up(n){return qr(n,"targets")}function aq(n){return qr(n,"targetGlobal")}function Sc(n){return qr(n,"targetDocuments")}function lq([n,e],[t,r]){const i=ct(n,t);return 0===i?ct(e,r):i}class Iue{constructor(e){this.$n=e,this.buffer=new mn(lq),this.Un=0}Wn(){return++this.Un}Gn(e){const t=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();lq(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cq{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.zn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.jn(6e4)}stop(){this.zn&&(this.zn.cancel(),this.zn=null)}get started(){return null!==this.zn}jn(e){var t=this;pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,se.A)(function*(){t.zn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){_c(r)?pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield mc(r)}yield t.jn(3e5)}))}}class wue{constructor(e,t){this.Hn=e,this.params=t}calculateTargetCount(e,t){return this.Hn.Jn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return q.resolve(Fs.oe);const r=new Iue(t);return this.Hn.forEachTarget(e,i=>r.Gn(i.sequenceNumber)).next(()=>this.Hn.Yn(e,i=>r.Gn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Hn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Hn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(rq)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rq):this.Zn(e,t))}getCacheSize(e){return this.Hn.getCacheSize(e)}Zn(e,t){let r,i,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,t))).next(g=>(s=g,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(c=Date.now(),qf()<=xs.$b.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${g} documents in `+(c-l)+`ms\nTotal Duration: ${c-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}class Tue{constructor(e,t){this.db=e,this.garbageCollector=function uq(n,e){return new wue(n,e)}(this,t)}Jn(e){const t=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Xn(e){let t=0;return this.Yn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Yn(e,t){return this.er(e,(r,i)=>t(i))}addReference(e,t,r){return Uw(e,r)}removeReference(e,t,r){return Uw(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Uw(e,t)}tr(e,t){return function(i,s){let o=!1;return oq(i).Y(a=>sq(i,a,s).next(l=>(l&&(o=!0),q.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.er(e,(o,a)=>{if(a<=t){const l=this.tr(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Ge.min()),Sc(e).delete([0,Mi(o.path)])))});i.push(l)}}).next(()=>q.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Uw(e,t)}er(e,t){const r=Sc(e);let i,s=Fs.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==Fs.oe&&t(new Pe(Ca(i)),s),s=c,i=l):s=Fs.oe}).next(()=>{s!==Fs.oe&&t(new Pe(Ca(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Uw(n,e){return Sc(n).put((i=n.currentSequenceNumber,{targetId:0,path:Mi(e.path),sequenceNumber:i}));var i}class dq{constructor(){this.changes=new pl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class bue{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pd(e).put(r)}removeEntry(e,t,r){return pd(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Nw(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.nr(e,r)))}getEntry(e,t){let r=Fn.newInvalidDocument(t);return pd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(hy(t))},(i,s)=>{r=this.rr(t,s)}).next(()=>r)}ir(e,t){let r={size:0,document:Fn.newInvalidDocument(t)};return pd(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(hy(t))},(i,s)=>{r={document:this.rr(t,s),size:Lw(s)}}).next(()=>r)}getEntries(e,t){let r=vs();return this.sr(e,t,(i,s)=>{const o=this.rr(i,s);r=r.insert(i,o)}).next(()=>r)}_r(e,t){let r=vs(),i=new Mn(Pe.comparator);return this.sr(e,t,(s,o)=>{const a=this.rr(s,o);r=r.insert(s,a),i=i.insert(s,Lw(o))}).next(()=>({documents:r,ar:i}))}sr(e,t,r){if(t.isEmpty())return q.resolve();let i=new mn(gq);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(hy(i.first()),hy(i.last())),o=i.getIterator();let a=o.getNext();return pd(e).J({index:"documentKeyIndex",range:s},(l,c,h)=>{const g=Pe.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&gq(a,g)<0;)r(a,null),a=o.getNext();a&&a.isEqual(g)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?h.$(hy(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Nw(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pd(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let h=vs();for(const g of c){const _=this.rr(Pe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);_.isFoundDocument()&&(J_(t,_)||i.has(_.key))&&(h=h.insert(_.key,_))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=vs();const o=pq(t,r),a=pq(t,ks.max());return pd(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,h)=>{const g=this.rr(Pe.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(g.key,g),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new Aue(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return fq(e).get("remoteDocumentGlobalKey").next(t=>(qe(!!t),t))}nr(e,t){return fq(e).put("remoteDocumentGlobalKey",t)}rr(e,t){if(t){const r=function due(n,e){let t;if(e.document)t=k4(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Pe.fromSegments(e.noDocument.path),i=cd(e.noDocument.readTime);t=Fn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ue();{const r=Pe.fromSegments(e.unknownDocument.path),i=cd(e.unknownDocument.version);t=Fn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new zn(i[0],i[1]);return Ge.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Ge.min()))return r}return Fn.newInvalidDocument(e)}}function hq(n){return new bue(n)}class Aue extends dq{constructor(e,t){super(),this.ur=e,this.trackRemovals=t,this.cr=new pl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new mn((s,o)=>ct(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.cr.get(s);if(t.push(this.ur.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=H4(this.ur.serializer,o);i=i.add(s.path.popLast());const c=Lw(l);r+=c-a.size,t.push(this.ur.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=H4(this.ur.serializer,o.convertToNoDocument(Ge.min()));t.push(this.ur.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.ur.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ur.updateMetadata(e,r)),q.waitFor(t)}getFromCache(e,t){return this.ur.ir(e,t).next(r=>(this.cr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ur._r(e,t).next(({documents:r,ar:i})=>(i.forEach((s,o)=>{this.cr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function fq(n){return qr(n,"remoteDocumentGlobal")}function pd(n){return qr(n,"remoteDocumentsV14")}function hy(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function pq(n,e){const t=e.documentKey.path.toArray();return[n,Nw(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function gq(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ct(t[s],r[s]),i)return i;return i=ct(t.length,r.length),i||(i=ct(t[t.length-2],r[r.length-2]),i||ct(t[t.length-1],r[r.length-1]))}class Sue{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class mq{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&ny(r.mutation,i,ys.empty(),zn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,mt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=mt()){const i=wa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=X_();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=wa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,mt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=vs();const o=ey(),a=ey();return t.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(void 0===h||h.mutation instanceof gl)?s=s.insert(c.key,c):void 0!==h?(o.set(c.key,h.mutation.getFieldMask()),ny(h.mutation,c,h.mutation.getFieldMask(),zn.now())):o.set(c.key,ys.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),t.forEach((c,h)=>{var g;return a.set(c,new Sue(h,null!==(g=o.get(c))&&void 0!==g?g:null))}),a))}recalculateAndSaveOverlays(e,t){const r=ey();let i=new Mn((o,a)=>o-a),s=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let h=r.get(l)||ys.empty();h=a.applyToLocalView(c,h),r.set(l,h);const g=(i.get(a.batchId)||mt()).add(l);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,g=i4();h.forEach(_=>{if(!s.has(_)){const E=f4(t.get(_),r.get(_));null!==E&&g.set(_,E),s=s.add(_)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,g))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Pe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):vM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):q.resolve(wa());let a=-1,l=s;return o.next(c=>q.forEach(c,(h,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(_=>{l=l.insert(h,_)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,mt())).next(h=>({batchId:a,changes:r4(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next(r=>{let i=X_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=X_();return this.indexManager.getCollectionParents(e,s).next(a=>q.forEach(a,l=>{const c=(g=t,_=l.child(s),new fl(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt));var g,_;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((g,_)=>{o=o.insert(g,_)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();null===o.get(h)&&(o=o.insert(h,Fn.newInvalidDocument(h)))});let a=X_();return o.forEach((l,c)=>{const h=s.get(l);void 0!==h&&ny(h.mutation,c,ys.empty(),zn.now()),J_(t,c)&&(a=a.insert(l,c))}),a})}}class Due{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,t){return q.resolve(this.lr.get(t))}saveBundleMetadata(e,t){return this.lr.set(t.id,{id:(i=t).id,version:i.version,createTime:Er(i.createTime)}),q.resolve();var i}getNamedQuery(e,t){return q.resolve(this.hr.get(t))}saveNamedQuery(e,t){return this.hr.set(t.name,{name:(i=t).name,query:OM(i.bundledQuery),readTime:Er(i.readTime)}),q.resolve();var i}}class Pue{constructor(){this.overlays=new Mn(Pe.comparator),this.Pr=new Map}getOverlay(e,t){return q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=wa();return q.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),q.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Pr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(r)),q.resolve()}getOverlaysForCollection(e,t,r){const i=wa(),s=t.length+1,o=new Pe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return q.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Mn((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let h=s.get(c.largestBatchId);null===h&&(h=wa(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=wa(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return q.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new bM(t,r));let s=this.Pr.get(t);void 0===s&&(s=mt(),this.Pr.set(t,s)),this.Pr.set(t,s.add(r.key))}}class Mue{constructor(){this.sessionToken=or.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,q.resolve()}}class UM{constructor(){this.Ir=new mn(ei.Tr),this.Er=new mn(ei.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(e,t){const r=new ei(e,t);this.Ir=this.Ir.add(r),this.Er=this.Er.add(r)}Ar(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Rr(new ei(e,t))}Vr(e,t){e.forEach(r=>this.removeReference(r,t))}mr(e){const t=new Pe(new xt([])),r=new ei(t,e),i=new ei(t,e+1),s=[];return this.Er.forEachInRange([r,i],o=>{this.Rr(o),s.push(o.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Er=this.Er.delete(e)}pr(e){const t=new Pe(new xt([])),r=new ei(t,e),i=new ei(t,e+1);let s=mt();return this.Er.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new ei(e,0),r=this.Ir.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ei{constructor(e,t){this.key=e,this.yr=t}static Tr(e,t){return Pe.comparator(e.key,t.key)||ct(e.yr,t.yr)}static dr(e,t){return ct(e.yr,t.yr)||Pe.comparator(e.key,t.key)}}class Rue{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.wr=1,this.Sr=new mn(ei.Tr)}checkEmpty(e){return q.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.wr;this.wr++;const o=new wM(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.Sr=this.Sr.add(new ei(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,t){return q.resolve(this.br(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Dr(t+1),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(0===this.mutationQueue.length?-1:this.wr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ei(t,0),i=new ei(t,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([r,i],o=>{const a=this.br(o.yr);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mn(ct);return t.forEach(i=>{const s=new ei(i,0),o=new ei(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,o],a=>{r=r.add(a.yr)})}),q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Pe.isDocumentKey(s)||(s=s.child(""));const o=new ei(new Pe(s),0);let a=new mn(ct);return this.Sr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.yr)),!0)},o),q.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.br(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){qe(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Sr;return q.forEach(t.mutations,i=>{const s=new ei(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,t){const r=new ei(t,0),i=this.Sr.firstAfterOrEqual(r);return q.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return q.resolve()}vr(e,t){return this.Dr(e)}Dr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}br(e){const t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Oue{constructor(e){this.Fr=e,this.docs=new Mn(Pe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Fr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return q.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let r=vs();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Fn.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=vs();const o=t.path,a=new Pe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||lM(pz(h),r)<=0||(i.has(h.key)||J_(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Ue()}Mr(e,t){return q.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Nue(this)}getSize(e){return q.resolve(this.size)}}class Nue extends dq{constructor(e){super(),this.ur=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),q.waitFor(t)}getFromCache(e,t){return this.ur.getEntry(e,t)}getAllFromCache(e,t){return this.ur.getEntries(e,t)}}class xue{constructor(e){this.persistence=e,this.Or=new pl(t=>sd(t),Y_),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new UM,this.targetCount=0,this.Br=fd.Ln()}forEachTarget(e,t){return this.Or.forEach((r,i)=>t(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Nr&&(this.Nr=t),q.resolve()}Qn(e){this.Or.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new fd(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,t){return this.Qn(t),this.targetCount+=1,q.resolve()}updateTargetData(e,t){return this.Qn(t),q.resolve()}removeTargetData(e,t){return this.Or.delete(t.target),this.Lr.mr(t.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Or.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Or.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,t){const r=this.Or.get(t)||null;return q.resolve(r)}addMatchingKeys(e,t,r){return this.Lr.Ar(t,r),q.resolve()}removeMatchingKeys(e,t,r){this.Lr.Vr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Lr.mr(t),q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Lr.pr(t);return q.resolve(r)}containsKey(e,t){return q.resolve(this.Lr.containsKey(t))}}class BM{constructor(e,t){this.kr={},this.overlays={},this.qr=new Fs(0),this.Qr=!1,this.Qr=!0,this.Kr=new Mue,this.referenceDelegate=e(this),this.$r=new xue(this),this.indexManager=new vue,this.remoteDocumentCache=new Oue(r=>this.referenceDelegate.Ur(r)),this.serializer=new $4(t),this.Wr=new Due(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Pue,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.kr[e.toKey()];return r||(r=new Rue(t,this.referenceDelegate),this.kr[e.toKey()]=r),r}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(e,t,r){pe("MemoryPersistence","Starting transaction:",e);const i=new kue(this.qr.next());return this.referenceDelegate.Gr(),r(i).next(s=>this.referenceDelegate.zr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}jr(e,t){return q.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,t)))}}class kue extends mz{constructor(e){super(),this.currentSequenceNumber=e}}class Bw{constructor(e){this.persistence=e,this.Hr=new UM,this.Jr=null}static Yr(e){return new Bw(e)}get Zr(){if(this.Jr)return this.Jr;throw Ue()}addReference(e,t,r){return this.Hr.addReference(r,t),this.Zr.delete(r.toString()),q.resolve()}removeReference(e,t,r){return this.Hr.removeReference(r,t),this.Zr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,t){return this.Zr.add(t.toString()),q.resolve()}removeTarget(e,t){this.Hr.mr(t.targetId).forEach(i=>this.Zr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Zr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Gr(){this.Jr=new Set}zr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Zr,r=>{const i=Pe.fromPath(r);return this.Xr(e,i).next(s=>{s||t.removeEntry(i,Ge.min())})}).next(()=>(this.Jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Xr(e,t).next(r=>{r?this.Zr.delete(t.toString()):this.Zr.add(t.toString())})}Ur(e){return 0}Xr(e,t){return q.or([()=>q.resolve(this.Hr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.jr(e,t)])}}class Fue{constructor(e){this.serializer=e}O(e,t,r,i){const s=new mw("createOrUpgrade",t);var l;r<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Cz,{unique:!0}),l.createObjectStore("documentMutations"),_q(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=q.resolve();return r<3&&i>=3&&(0!==r&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),_q(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ge.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Cz,{unique:!0});const g=c.store("mutations"),_=h.map(E=>g.put(E));return q.waitFor(_)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ti(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ni(s)))),r<7&&i>=7&&(o=o.next(()=>this.ri(s))),r<8&&i>=8&&(o=o.next(()=>this.ii(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.si(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:vce});c.createIndex("collectionPathOverlayIndex",Ece,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",Cce,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:lce});c.createIndex("documentKeyIndex",cce),c.createIndex("collectionGroupIndex",uce)}(e)).next(()=>this.oi(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this._i(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:gce}).createIndex("sequenceNumberIndex",mce,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:_ce}).createIndex("documentKeyIndex",yce,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(l){l.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ni(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Lw(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ti(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>q.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>q.forEach(a,l=>{qe(l.userId===s.userId);const c=ud(this.serializer,l);return iq(e,s.userId,c).next(()=>{})}))}))}ri(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new xt(o),c=[0,Mi(l)];s.push(t.get(c).next(h=>h?q.resolve():t.put({targetId:0,path:Mi(l),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>q.waitFor(s))})}ii(e,t){e.createObjectStore("collectionParents",{keyPath:pce});const r=t.store("collectionParents"),i=new VM,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Mi(l)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new xt(o);return s(l.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,l],c)=>{const h=Ca(a);return s(h.popLast())}))}si(e){const t=e.store("targets");return t.J((r,i)=>{const s=ly(i),o=z4(this.serializer,s);return t.put(o)})}oi(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(g=o,g.document?new Pe(xt.fromString(g.document.name).popFirst(5)):g.noDocument?Pe.fromSegments(g.noDocument.path):g.unknownDocument?Pe.fromSegments(g.unknownDocument.path):Ue()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var g;i.push(a.put(c))}).next(()=>q.waitFor(i))}_i(e,t){const r=t.store("mutations"),i=hq(this.serializer),s=new BM(Bw.Yr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let h=null!==(c=a.get(l.userId))&&void 0!==c?c:mt();ud(this.serializer,l).keys().forEach(g=>h=h.add(g)),a.set(l.userId,h)}),q.forEach(a,(l,c)=>{const h=new Xr(c),g=xw.lt(this.serializer,h),_=s.getIndexManager(h),E=Vw.lt(h,this.serializer,_,s.referenceDelegate);return new mq(i,E,g,_).recalculateAndSaveOverlaysForDocumentKeys(new hM(t,Fs.oe),l).next()})})}}function _q(n){n.createObjectStore("targetDocuments",{keyPath:hce}).createIndex("documentTargetsIndex",fce,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",dce,{unique:!0}),n.createObjectStore("targetGlobal")}const jM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $M{constructor(e,t,r,i,s,o,a,l,c,h,g=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ai=s,this.window=o,this.document=a,this.ui=c,this.ci=h,this.li=g,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.hi=null,this.inForeground=!1,this.Pi=null,this.Ii=null,this.Ti=Number.NEGATIVE_INFINITY,this.Ei=_=>Promise.resolve(),!$M.D())throw new he(Y.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Tue(this,i),this.di=t+"main",this.serializer=new $4(l),this.Ai=new Ea(this.di,this.li,new Fue(this.serializer)),this.Kr=new fue,this.$r=new Cue(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hq(this.serializer),this.Wr=new hue,this.window&&this.window.localStorage?this.Ri=this.window.localStorage:(this.Ri=null,!1===h&&vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Vi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(Y.FAILED_PRECONDITION,jM);return this.mi(),this.fi(),this.gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.$r.getHighestSequenceNumber(e))}).then(e=>{this.qr=new Fs(e,this.ui)}).then(()=>{this.Qr=!0}).catch(e=>(this.Ai&&this.Ai.close(),Promise.reject(e)))}pi(e){var t=this;return this.Ei=function(){var r=(0,se.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ai.L(function(){var t=(0,se.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ai.enqueueAndForget((0,se.A)(function*(){t.started&&(yield t.Vi())})))}Vi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$w(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.yi(e).next(t=>{t||(this.isPrimary=!1,this.ai.enqueueRetryable(()=>this.Ei(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.Si(e).next(()=>!1):!!t&&this.bi(e).next(()=>!0))).catch(e=>{if(_c(e))return pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ai.enqueueRetryable(()=>this.Ei(e)),this.isPrimary=e})}yi(e){return fy(e).get("owner").next(t=>q.resolve(this.Di(t)))}Ci(e){return $w(e).delete(this.clientId)}vi(){var e=this;return(0,se.A)(function*(){if(e.isPrimary&&!e.Fi(e.Ti,18e5)){e.Ti=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=qr(r,"clientMetadata");return i.U().next(s=>{const o=e.Mi(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return q.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ri)for(const r of t)e.Ri.removeItem(e.xi(r.clientId))}})()}gi(){this.Ii=this.ai.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Vi().then(()=>this.vi()).then(()=>this.gi()))}Di(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.ci?q.resolve(!0):fy(e).get("owner").next(t=>{if(null!==t&&this.Fi(t.leaseTimestampMs,5e3)&&!this.Oi(t.ownerId)){if(this.Di(t)&&this.networkEnabled)return!0;if(!this.Di(t)){if(!t.allowTabSynchronization)throw new he(Y.FAILED_PRECONDITION,jM);return!1}}return!(!this.networkEnabled||!this.inForeground)||$w(e).U().next(r=>void 0===this.Mi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,se.A)(function*(){e.Qr=!1,e.Ni(),e.Ii&&(e.Ii.cancel(),e.Ii=null),e.Li(),e.Bi(),yield e.Ai.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new hM(t,Fs.oe);return e.Si(r).next(()=>e.Ci(r))}),e.Ai.close(),e.ki()})()}Mi(e,t){return e.filter(r=>this.Fi(r.updateTimeMs,t)&&!this.Oi(r.clientId))}qi(){return this.runTransaction("getActiveClients","readonly",e=>$w(e).U().next(t=>this.Mi(t,18e5).map(r=>r.clientId)))}get started(){return this.Qr}getGlobalsCache(){return this.Kr}getMutationQueue(e,t){return Vw.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Eue(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return xw.lt(this.serializer,e)}getBundleCache(){return this.Wr}runTransaction(e,t,r){pe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(l=this.li)?Tce:16===l?wce:15===l?dM:14===l?bz:13===l?Tz:12===l?Ice:11===l?wz:void Ue();var l;let o;return this.Ai.runTransaction(e,i,s,a=>(o=new hM(a,this.qr?this.qr.next():Fs.oe),"readwrite-primary"===t?this.yi(o).next(l=>!!l||this.wi(o)).next(l=>{if(!l)throw vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ai.enqueueRetryable(()=>this.Ei(!1)),new he(Y.FAILED_PRECONDITION,gz);return r(o)}).next(l=>this.bi(o).next(()=>l)):this.Qi(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Qi(e){return fy(e).get("owner").next(t=>{if(null!==t&&this.Fi(t.leaseTimestampMs,5e3)&&!this.Oi(t.ownerId)&&!this.Di(t)&&!(this.ci||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(Y.FAILED_PRECONDITION,jM)})}bi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fy(e).put("owner",t)}static D(){return Ea.D()}Si(e){const t=fy(e);return t.get("owner").next(r=>this.Di(r)?(pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):q.resolve())}Fi(e,t){const r=Date.now();return!(e<r-t||e>r&&(vr(`Detected an update time that is in the future: ${e} > ${r}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Pi=()=>{this.ai.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Vi()))},this.document.addEventListener("visibilitychange",this.Pi),this.inForeground="visible"===this.document.visibilityState)}Li(){this.Pi&&(this.document.removeEventListener("visibilitychange",this.Pi),this.Pi=null)}fi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.hi=()=>{this.Ni();const t=/(?:Version|Mobile)\/1[456]/;(0,A.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ai.enterRestrictedMode(!0),this.ai.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.hi))}Bi(){this.hi&&(this.window.removeEventListener("pagehide",this.hi),this.hi=null)}Oi(e){var t;try{const r=null!==(null===(t=this.Ri)||void 0===t?void 0:t.getItem(this.xi(e)));return pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ni(){if(this.Ri)try{this.Ri.setItem(this.xi(this.clientId),String(Date.now()))}catch(e){vr("Failed to set zombie client id.",e)}}ki(){if(this.Ri)try{this.Ri.removeItem(this.xi(this.clientId))}catch{}}xi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function fy(n){return qr(n,"owner")}function $w(n){return qr(n,"clientMetadata")}function HM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class zM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ki=r,this.$i=i}static Ui(e,t){let r=mt(),i=mt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new zM(e,t.fromCache,r,i)}}class Lue{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class yq{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=(0,A.nr)()?8:_z((0,A.ZQ)())>0?6:4}initialize(e,t){this.Hi=e,this.indexManager=t,this.Wi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Yi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Lue;return this.Zi(e,t,o).next(a=>{if(s.result=a,this.Gi)return this.Xi(e,t,o,a.size)})}).next(()=>s.result)}Xi(e,t,r,i){return r.documentReadCount<this.zi?(qf()<=xs.$b.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",ep(t),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),q.resolve()):(qf()<=xs.$b.DEBUG&&pe("QueryEngine","Query:",ep(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ji*i?(qf()<=xs.$b.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",ep(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ri(t))):q.resolve())}Ji(e,t){if(Yz(t))return q.resolve(null);let r=Ri(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Aw(t,null,"F"),r=Ri(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=mt(...s);return this.Hi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.es(t,a);return this.ts(t,c,o,l.readTime)?this.Ji(e,Aw(t,null,"F")):this.ns(e,c,t,l)}))})))}Yi(e,t,r,i){return Yz(t)||i.isEqual(Ge.min())?q.resolve(null):this.Hi.getDocuments(e,r).next(s=>{const o=this.es(t,s);return this.ts(t,o,r,i)?q.resolve(null):(qf()<=xs.$b.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ep(t)),this.ns(e,o,t,fz(i,-1)).next(a=>a))})}es(e,t){let r=new mn(t4(e));return t.forEach((i,s)=>{J_(e,s)&&(r=r.add(s))}),r}ts(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Zi(e,t,r){return qf()<=xs.$b.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",ep(t)),this.Hi.getDocumentsMatchingQuery(e,t,ks.min(),r)}ns(e,t,r,i){return this.Hi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Vue{constructor(e,t,r,i){this.persistence=e,this.rs=t,this.serializer=i,this.ss=new Mn(ct),this.os=new pl(s=>sd(s),Y_),this._s=new Map,this.us=e.getRemoteDocumentCache(),this.$r=e.getTargetCache(),this.Wr=e.getBundleCache(),this.cs(r)}cs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mq(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ss))}}function vq(n,e,t,r){return new Vue(n,e,t,r)}function Eq(n,e){return qM.apply(this,arguments)}function qM(){return(qM=(0,se.A)(function*(n,e){const t=Se(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.cs(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=mt();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(c=>({ls:c,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function Cq(n){const e=Se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.$r.getLastRemoteSnapshotVersion(t))}function Iq(n,e,t){let r=mt(),i=mt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=vs();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ge.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):pe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{hs:o,Ps:i}})}function jue(n,e){const t=Se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dp(n,e){const t=Se(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.$r.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):t.$r.allocateTargetId(r).next(o=>(i=new ml(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.$r.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ss.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ss=t.ss.insert(r.targetId,r),t.os.set(e,r.targetId)),r})}function hp(n,e,t){return GM.apply(this,arguments)}function GM(){return(GM=(0,se.A)(function*(n,e,t){const r=Se(n),i=r.ss.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!_c(o))throw o;pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ss=r.ss.remove(e),r.os.delete(i.target)})).apply(this,arguments)}function Hw(n,e,t){const r=Se(n);let i=Ge.min(),s=mt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const g=Se(l),_=g.os.get(h);return void 0!==_?q.resolve(g.ss.get(_)):g.$r.getTargetData(c,h)}(r,o,Ri(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.$r.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.rs.getDocumentsMatchingQuery(o,e,t?i:Ge.min(),t?s:mt())).next(a=>(bq(r,e4(e),a),{documents:a,Is:s})))}function wq(n,e){const t=Se(n),r=Se(t.$r),i=t.ss.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function Tq(n,e){const t=Se(n),r=t._s.get(e)||Ge.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.us.getAllFromCollectionGroup(i,e,fz(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(bq(t,e,i),i))}function bq(n,e,t){let r=n._s.get(e)||Ge.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n._s.set(e,r)}function WM(){return(WM=(0,se.A)(function*(n,e,t,r){const i=Se(n);let s=mt(),o=vs();for(const c of t){const h=e.Ts(c.metadata.name);c.document&&(s=s.add(h));const g=e.Es(c);g.setReadTime(e.ds(c.metadata.readTime)),o=o.insert(h,g)}const a=i.us.newChangeBuffer({trackRemovals:!0}),l=yield dp(i,(h=r,Ri(Jf(xt.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>Iq(c,a,o).next(h=>(a.apply(c),h)).next(h=>i.$r.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.$r.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,h.hs,h.Ps)).next(()=>h.hs)))})).apply(this,arguments)}function Hue(n,e){return KM.apply(this,arguments)}function KM(){return(KM=(0,se.A)(function*(n,e,t=mt()){const r=yield dp(n,Ri(OM(e.bundledQuery))),i=Se(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Er(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Wr.saveNamedQuery(s,e);const a=r.withResumeToken(or.EMPTY_BYTE_STRING,o);return i.ss=i.ss.insert(a.targetId,a),i.$r.updateTargetData(s,a).next(()=>i.$r.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.$r.addMatchingKeys(s,t,r.targetId)).next(()=>i.Wr.saveNamedQuery(s,e))})})).apply(this,arguments)}function Aq(n,e){return`firestore_clients_${n}_${e}`}function Sq(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function QM(n,e){return`firestore_targets_${n}_${e}`}class zw{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static As(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new he(i.error.code,i.error.message))),o?new zw(e,t,i.state,s):(vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Rs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class py{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static As(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new he(r.error.code,r.error.message))),s?new py(e,r.state,i):(vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Rs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qw{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static As(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=CM();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=vz(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new qw(e,s):(vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class YM{constructor(e,t){this.clientId=e,this.onlineState=t}static As(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new YM(t.clientId,t.onlineState):(vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ZM{constructor(){this.activeTargetIds=CM()}Vs(e){this.activeTargetIds=this.activeTargetIds.add(e)}fs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Rs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JM{constructor(e,t,r,i,s){this.window=e,this.ai=t,this.persistenceKey=r,this.gs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ps=this.ys.bind(this),this.ws=new Mn(ct),this.started=!1,this.Ss=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.bs=Aq(this.persistenceKey,this.gs),this.Ds=`firestore_sequence_number_${this.persistenceKey}`,this.ws=this.ws.insert(this.gs,new ZM),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.vs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Fs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Ms=`firestore_online_state_${this.persistenceKey}`,this.xs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ps)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,se.A)(function*(){const t=yield e.syncEngine.qi();for(const i of t){if(i===e.gs)continue;const s=e.getItem(Aq(e.persistenceKey,i));if(s){const o=qw.As(i,s);o&&(e.ws=e.ws.insert(o.clientId,o))}}e.Os();const r=e.storage.getItem(e.Ms);if(r){const i=e.Ns(r);i&&e.Ls(i)}for(const i of e.Ss)e.ys(i);e.Ss=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ds,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Bs(this.ws)}isActiveQueryTarget(e){let t=!1;return this.ws.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ks(e,"pending")}updateMutationState(e,t,r){this.ks(e,t,r),this.qs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(QM(this.persistenceKey,e));if(r){const i=py.As(e,r);i&&(t=i.state)}}return this.Qs.Vs(e),this.Os(),t}removeLocalQueryTarget(e){this.Qs.fs(e),this.Os()}isLocalQueryTarget(e){return this.Qs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(QM(this.persistenceKey,e))}updateQueryState(e,t,r){this.Ks(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.$s(e)}notifyBundleLoaded(e){this.Us(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ps),this.removeItem(this.bs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return pe("SharedClientState","READ",e,t),t}setItem(e,t){pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ys(e){var t=this;const r=e;if(r.storageArea===this.storage){if(pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.bs)return void vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ai.enqueueRetryable((0,se.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Ws(r.key);return t.Gs(i,null)}{const i=t.zs(r.key,r.newValue);if(i)return t.Gs(i.clientId,i)}}else if(t.vs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Js(r.key,r.newValue);if(i)return t.Ys(i)}}else if(r.key===t.Ms){if(null!==r.newValue){const i=t.Ns(r.newValue);if(i)return t.Ls(i)}}else if(r.key===t.Ds){const i=function(o){let a=Fs.oe;if(null!=o)try{const l=JSON.parse(o);qe("number"==typeof l),a=l}catch(l){vr("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(r.newValue);i!==Fs.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.xs){const i=t.Zs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Xs(s)))}}else t.Ss.push(r)}))}}get Qs(){return this.ws.get(this.gs)}Os(){this.setItem(this.bs,this.Qs.Rs())}ks(e,t,r){const i=new zw(this.currentUser,e,t,r),s=Sq(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Rs())}qs(e){const t=Sq(this.persistenceKey,this.currentUser,e);this.removeItem(t)}$s(e){this.storage.setItem(this.Ms,JSON.stringify({clientId:this.gs,onlineState:e}))}Ks(e,t,r){const i=QM(this.persistenceKey,e),s=new py(e,t,r);this.setItem(i,s.Rs())}Us(e){const t=JSON.stringify(Array.from(e));this.setItem(this.xs,t)}Ws(e){const t=this.Cs.exec(e);return t?t[1]:null}zs(e,t){const r=this.Ws(e);return qw.As(r,t)}js(e,t){const r=this.vs.exec(e),i=Number(r[1]);return zw.As(new Xr(void 0!==r[2]?r[2]:null),i,t)}Js(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return py.As(i,t)}Ns(e){return YM.As(e)}Zs(e){return JSON.parse(e)}Hs(e){var t=this;return(0,se.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.eo(e.batchId,e.state,e.error);pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ys(e){return this.syncEngine.no(e.targetId,e.state,e.error)}Gs(e,t){const r=t?this.ws.insert(e,t):this.ws.remove(e),i=this.Bs(this.ws),s=this.Bs(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.ro(o,a).then(()=>{this.ws=r})}Ls(e){this.ws.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Bs(e){let t=CM();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Dq{constructor(){this.io=new ZM,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.io.Vs(e),this.so[e]||"not-current"}updateQueryState(e,t,r){this.so[e]=t}removeLocalQueryTarget(e){this.io.fs(e)}isLocalQueryTarget(e){return this.io.activeTargetIds.has(e)}clearQueryState(e){delete this.so[e]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(e){return this.io.activeTargetIds.has(e)}start(){return this.io=new ZM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zue{oo(e){}shutdown(){}}class Pq{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(e){this.lo.push(e)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.lo)e(0)}co(){pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.lo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Gw=null;function XM(){return null===Gw?Gw=268435456+Math.round(2147483648*Math.random()):Gw++,"0x"+Gw.toString(16)}const que={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gue{constructor(e){this.Po=e.Po,this.Io=e.Io}To(e){this.Eo=e}Ao(e){this.Ro=e}Vo(e){this.mo=e}onMessage(e){this.fo=e}close(){this.Io()}send(e){this.Po(e)}po(){this.Eo()}yo(){this.Ro()}wo(e){this.mo(e)}So(e){this.fo(e)}}const Ni="WebChannelConnection";class Wue extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.bo=r+"://"+t.host,this.Do=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get vo(){return!1}Fo(t,r,i,s,o){const a=XM(),l=this.Mo(t,r.toUriEncodedString());pe("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(c,s,o),this.Oo(t,l,c,i).then(h=>(pe("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw _s("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}No(t,r,i,s,o,a){return this.Fo(t,r,i,s,o)}xo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+zf,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}Mo(t,r){return`${this.bo}/v1/${r}:${que[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Oo(e,t,r,i){const s=XM();return new Promise((o,a)=>{const l=new nz;l.setWithCredentials(!0),l.listenOnce(iz.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gw.NO_ERROR:const h=l.getResponseJson();pe(Ni,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case gw.TIMEOUT:pe(Ni,`RPC '${e}' ${s} timed out`),a(new he(Y.DEADLINE_EXCEEDED,"Request time out"));break;case gw.HTTP_ERROR:const g=l.getStatus();if(pe(Ni,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let _=l.getResponseJson();Array.isArray(_)&&(_=_[0]);const E=_?.error;if(E&&E.status&&E.message){const I=function(S){const L=S.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(L)>=0?L:Y.UNKNOWN}(E.status);a(new he(I,E.message))}else a(new he(Y.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new he(Y.UNAVAILABLE,"Connection failed."));break;default:Ue()}}finally{pe(Ni,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);pe(Ni,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Lo(e,t,r){const i=XM(),s=[this.bo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=az(),a=oz(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new rz({})),this.xo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");pe(Ni,`Creating RPC '${e}' stream ${i}: ${h}`,l);const g=o.createWebChannel(h,l);let _=!1,E=!1;const I=new Gue({Po:S=>{E?pe(Ni,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(_||(pe(Ni,`Opening RPC '${e}' stream ${i} transport.`),g.open(),_=!0),pe(Ni,`RPC '${e}' stream ${i} sending:`,S),g.send(S))},Io:()=>g.close()}),T=(S,L,O)=>{S.listen(L,H=>{try{O(H)}catch(oe){setTimeout(()=>{throw oe},0)}})};return T(g,B_.EventType.OPEN,()=>{E||(pe(Ni,`RPC '${e}' stream ${i} transport opened.`),I.po())}),T(g,B_.EventType.CLOSE,()=>{E||(E=!0,pe(Ni,`RPC '${e}' stream ${i} transport closed`),I.wo())}),T(g,B_.EventType.ERROR,S=>{E||(E=!0,_s(Ni,`RPC '${e}' stream ${i} transport errored:`,S),I.wo(new he(Y.UNAVAILABLE,"The operation could not be completed")))}),T(g,B_.EventType.MESSAGE,S=>{var L;if(!E){const O=S.data[0];qe(!!O);const oe=O.error||(null===(L=O[0])||void 0===L?void 0:L.error);if(oe){pe(Ni,`RPC '${e}' stream ${i} received error:`,oe);const Te=oe.status;let Re=function(x){const U=xr[x];if(void 0!==U)return E4(U)}(Te),k=oe.message;void 0===Re&&(Re=Y.INTERNAL,k="Unknown error status: "+Te+" with message "+oe.message),E=!0,I.wo(new he(Re,k)),g.close()}else pe(Ni,`RPC '${e}' stream ${i} received:`,O),I.So(O)}}),T(a,sz.STAT_EVENT,S=>{S.stat===sM.PROXY?pe(Ni,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===sM.NOPROXY&&pe(Ni,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.yo()},0),I}}function Mq(){return typeof window<"u"?window:null}function Ww(){return typeof document<"u"?document:null}function gy(n){return new tue(n,!0)}class eR{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ai=e,this.timerId=t,this.Bo=r,this.ko=i,this.qo=s,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(e){this.cancel();const t=Math.floor(this.Qo+this.Go()),r=Math.max(0,Date.now()-this.$o),i=Math.max(0,t-r);i>0&&pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Qo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,i,()=>(this.$o=Date.now(),e())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){null!==this.Ko&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){null!==this.Ko&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}}class Rq{constructor(e,t,r,i,s,o,a,l){this.ai=e,this.jo=r,this.Ho=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new eR(e,t)}t_(){return 1===this.state||5===this.state||this.n_()}n_(){return 2===this.state||3===this.state}start(){this.Xo=0,4!==this.state?this.auth():this.r_()}stop(){var e=this;return(0,se.A)(function*(){e.t_()&&(yield e.close(0))})()}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&null===this.Yo&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(e){this.a_(),this.stream.send(e)}o_(){var e=this;return(0,se.A)(function*(){if(e.n_())return e.close(0)})()}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}close(e,t){var r=this;return(0,se.A)(function*(){r.a_(),r.u_(),r.e_.cancel(),r.Jo++,4!==e?r.e_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(vr(t.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),r.e_.Uo()):t&&t.code===Y.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.c_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Vo(t)})()}c_(){}auth(){this.state=1;const e=this.l_(this.Jo),t=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Jo===t&&this.h_(r,i)},r=>{e(()=>{const i=new he(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.P_(i)})})}h_(e,t){const r=this.l_(this.Jo);this.stream=this.I_(e,t),this.stream.To(()=>{r(()=>this.listener.To())}),this.stream.Ao(()=>{r(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(i=>{r(()=>this.P_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.Xo?this.T_(i):this.onNext(i))})}r_(){var e=this;this.state=5,this.e_.Wo((0,se.A)(function*(){e.state=0,e.start()}))}P_(e){return pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}l_(e){return t=>{this.ai.enqueueAndForget(()=>this.Jo===e?t():(pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kue extends Rq{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}I_(e,t){return this.connection.Lo("Listen",e,t)}T_(e){return this.onNext(e)}onNext(e){this.e_.reset();const t=function iue(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:Ue(),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(qe(void 0===h||"string"==typeof h),or.fromBase64String(h||"")):(qe(void 0===h||h instanceof Buffer||h instanceof Uint8Array),or.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=void 0===c.code?Y.UNKNOWN:E4(c.code);return new he(h,c.message||"")}(o);t=new b4(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Ta(n,r.document.name),s=Er(r.document.updateTime),o=r.document.createTime?Er(r.document.createTime):Ge.min(),a=new ui({mapValue:{fields:r.document.fields}}),l=Fn.newFoundDocument(i,s,o,a);t=new Rw(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=Ta(n,r.document),s=r.readTime?Er(r.readTime):Ge.min(),o=Fn.newNoDocument(i,s);t=new Rw([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Ta(n,r.document);t=new Rw([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Ue();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new Qce(i,s);t=new T4(r.targetId,o)}}var c;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ge.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ge.min():o.readTime?Er(o.readTime):Ge.min()}(e);return this.listener.E_(t,r)}d_(e){const t={};t.database=MM(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=Tw(l)?{documents:F4(s,l)}:{query:Ow(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=P4(s,o.resumeToken);const c=SM(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ge.min())>0){a.readTime=sp(s,o.snapshotVersion.toTimestamp());const c=SM(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function oue(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.__(t)}A_(e){const t={};t.database=MM(this.serializer),t.removeTarget=e,this.__(t)}}class Que extends Rq{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(e,t){return this.connection.Lo("Write",e,t)}T_(e){return qe(!!e.streamToken),this.lastStreamToken=e.streamToken,qe(!e.writeResults||0===e.writeResults.length),this.listener.m_()}onNext(e){qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.e_.reset();const t=function sue(n,e){return n&&n.length>0?(qe(void 0!==e),n.map(t=>function(i,s){let o=Er(i.updateTime?i.updateTime:s);return o.isEqual(Ge.min())&&(o=Er(s)),new Gce(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Er(e.commitTime);return this.listener.f_(r,t)}g_(){const e={};e.database=MM(this.serializer),this.__(e)}V_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ay(this.serializer,r))};this.__(t)}}class Yue extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.p_=!1}y_(){if(this.p_)throw new he(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(e,t,r,i){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Fo(e,PM(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new he(Y.UNKNOWN,s.toString())})}No(e,t,r,i,s){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.No(e,PM(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(Y.UNKNOWN,o.toString())})}terminate(){this.p_=!0,this.connection.terminate()}}class Zue{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){0===this.w_&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(e){"Online"===this.state?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.M_(),this.w_=0,"Online"===e&&(this.b_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}v_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(vr(t),this.b_=!1):pe("OnlineStateTracker",t)}M_(){null!==this.S_&&(this.S_.cancel(),this.S_=null)}}class Jue{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=s,this.B_.oo(a=>{r.enqueueAndForget((0,se.A)(function*(){var l;Dc(o)&&(pe("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,se.A)(function*(h){const g=Se(h);g.N_.add(4),yield fp(g),g.k_.set("Unknown"),g.N_.delete(4),yield my(g)}),function c(h){return l.apply(this,arguments)})(o))}))}),this.k_=new Zue(r,i)}}function my(n){return tR.apply(this,arguments)}function tR(){return(tR=(0,se.A)(function*(n){if(Dc(n))for(const e of n.L_)yield e(!0)})).apply(this,arguments)}function fp(n){return nR.apply(this,arguments)}function nR(){return(nR=(0,se.A)(function*(n){for(const e of n.L_)yield e(!1)})).apply(this,arguments)}function Kw(n,e){const t=Se(n);t.O_.has(e.targetId)||(t.O_.set(e.targetId,e),sR(t)?iR(t):mp(t).n_()&&rR(t,e))}function pp(n,e){const t=Se(n),r=mp(t);t.O_.delete(e),r.n_()&&Oq(t,e),0===t.O_.size&&(r.n_()?r.s_():Dc(t)&&t.k_.set("Unknown"))}function rR(n,e){if(n.q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}mp(n).d_(e)}function Oq(n,e){n.q_.xe(e),mp(n).A_(e)}function iR(n){n.q_=new Zce({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.O_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),mp(n).start(),n.k_.D_()}function sR(n){return Dc(n)&&!mp(n).t_()&&n.O_.size>0}function Dc(n){return 0===Se(n).N_.size}function Nq(n){n.q_=void 0}function Xue(n){return oR.apply(this,arguments)}function oR(){return(oR=(0,se.A)(function*(n){n.k_.set("Online")})).apply(this,arguments)}function ede(n){return aR.apply(this,arguments)}function aR(){return(aR=(0,se.A)(function*(n){n.O_.forEach((e,t)=>{rR(n,e)})})).apply(this,arguments)}function tde(n,e){return lR.apply(this,arguments)}function lR(){return(lR=(0,se.A)(function*(n,e){Nq(n),sR(n)?(n.k_.F_(e),iR(n)):n.k_.set("Unknown")})).apply(this,arguments)}function nde(n,e,t){return cR.apply(this,arguments)}function cR(){return cR=(0,se.A)(function*(n,e,t){if(n.k_.set("Online"),e instanceof b4&&2===e.state&&e.cause)try{yield(r=(0,se.A)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.O_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.O_.delete(l),s.q_.removeTarget(l))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Qw(n,r)}else if(e instanceof Rw?n.q_.Ke(e):e instanceof T4?n.q_.He(e):n.q_.We(e),!t.isEqual(Ge.min()))try{const r=yield Cq(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.O_.get(c);h&&s.O_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.O_.get(l);if(!h)return;s.O_.set(l,h.withResumeToken(or.EMPTY_BYTE_STRING,h.snapshotVersion)),Oq(s,l);const g=new ml(h.target,l,c,h.sequenceNumber);rR(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){pe("RemoteStore","Failed to raise snapshot:",r),yield Qw(n,r)}var r}),cR.apply(this,arguments)}function Qw(n,e,t){return uR.apply(this,arguments)}function uR(){return(uR=(0,se.A)(function*(n,e,t){if(!_c(e))throw e;n.N_.add(1),yield fp(n),n.k_.set("Offline"),t||(t=()=>Cq(n.localStore)),n.asyncQueue.enqueueRetryable((0,se.A)(function*(){pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.N_.delete(1),yield my(n)}))})).apply(this,arguments)}function xq(n,e){return e().catch(t=>Qw(n,t,e))}function gp(n){return dR.apply(this,arguments)}function dR(){return(dR=(0,se.A)(function*(n){const e=Se(n),t=Pc(e);let r=e.x_.length>0?e.x_[e.x_.length-1].batchId:-1;for(;rde(e);)try{const i=yield jue(e.localStore,r);if(null===i){0===e.x_.length&&t.s_();break}r=i.batchId,ide(e,i)}catch(i){yield Qw(e,i)}kq(e)&&Fq(e)})).apply(this,arguments)}function rde(n){return Dc(n)&&n.x_.length<10}function ide(n,e){n.x_.push(e);const t=Pc(n);t.n_()&&t.R_&&t.V_(e.mutations)}function kq(n){return Dc(n)&&!Pc(n).t_()&&n.x_.length>0}function Fq(n){Pc(n).start()}function sde(n){return hR.apply(this,arguments)}function hR(){return(hR=(0,se.A)(function*(n){Pc(n).g_()})).apply(this,arguments)}function ode(n){return fR.apply(this,arguments)}function fR(){return(fR=(0,se.A)(function*(n){const e=Pc(n);for(const t of n.x_)e.V_(t.mutations)})).apply(this,arguments)}function ade(n,e,t){return pR.apply(this,arguments)}function pR(){return(pR=(0,se.A)(function*(n,e,t){const r=n.x_.shift(),i=TM.from(r,e,t);yield xq(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield gp(n)})).apply(this,arguments)}function lde(n,e){return gR.apply(this,arguments)}function gR(){return gR=(0,se.A)(function*(n,e){var t;e&&Pc(n).R_&&(yield(t=(0,se.A)(function*(i,s){if(v4(a=s.code)&&a!==Y.ABORTED){const o=i.x_.shift();Pc(i).i_(),yield xq(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield gp(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),kq(n)&&Fq(n)}),gR.apply(this,arguments)}function Lq(n,e){return mR.apply(this,arguments)}function mR(){return(mR=(0,se.A)(function*(n,e){const t=Se(n);t.asyncQueue.verifyOperationInProgress(),pe("RemoteStore","RemoteStore received new credentials");const r=Dc(t);t.N_.add(3),yield fp(t),r&&t.k_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.N_.delete(3),yield my(t)})).apply(this,arguments)}function _R(n,e){return yR.apply(this,arguments)}function yR(){return(yR=(0,se.A)(function*(n,e){const t=Se(n);e?(t.N_.delete(2),yield my(t)):e||(t.N_.add(2),yield fp(t),t.k_.set("Unknown"))})).apply(this,arguments)}function mp(n){return n.Q_||(n.Q_=function(t,r,i){const s=Se(t);return s.y_(),new Kue(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{To:Xue.bind(null,n),Ao:ede.bind(null,n),Vo:tde.bind(null,n),E_:nde.bind(null,n)}),n.L_.push(function(){var e=(0,se.A)(function*(t){t?(n.Q_.i_(),sR(n)?iR(n):n.k_.set("Unknown")):(yield n.Q_.stop(),Nq(n))});return function(t){return e.apply(this,arguments)}}())),n.Q_}function Pc(n){return n.K_||(n.K_=function(t,r,i){const s=Se(t);return s.y_(),new Que(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{To:()=>Promise.resolve(),Ao:sde.bind(null,n),Vo:lde.bind(null,n),m_:ode.bind(null,n),f_:ade.bind(null,n)}),n.L_.push(function(){var e=(0,se.A)(function*(t){t?(n.K_.i_(),yield gp(n)):(yield n.K_.stop(),n.x_.length>0&&(pe("RemoteStore",`Stopping write stream with ${n.x_.length} pending writes`),n.x_=[]))});return function(t){return e.apply(this,arguments)}}())),n.K_}class vR{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new vR(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new he(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _p(n,e){if(vr("AsyncQueue",`${e}: ${n}`),_c(n))return new he(Y.UNAVAILABLE,`${e}: ${n}`);throw n}class yp{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Pe.comparator(t.key,r.key):(t,r)=>Pe.comparator(t.key,r.key),this.keyedMap=X_(),this.sortedSet=new Mn(this.comparator)}static emptySet(e){return new yp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new yp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Vq{constructor(){this.U_=new Mn(Pe.comparator)}track(e){const t=e.doc.key,r=this.U_.get(t);r?0!==e.type&&3===r.type?this.U_=this.U_.insert(t,e):3===e.type&&1!==r.type?this.U_=this.U_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.U_=this.U_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.U_=this.U_.remove(t):1===e.type&&2===r.type?this.U_=this.U_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):Ue():this.U_=this.U_.insert(t,e)}W_(){const e=[];return this.U_.inorderTraversal((t,r)=>{e.push(r)}),e}}class vp{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new vp(e,t,yp.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Z_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class cde{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(e=>e.H_())}}class ude{constructor(){this.queries=Uq(),this.onlineState="Unknown",this.J_=new Set}terminate(){!function(t,r){const i=Se(t),s=i.queries;i.queries=Uq(),s.forEach((o,a)=>{for(const l of a.z_)l.onError(r)})}(this,new he(Y.ABORTED,"Firestore shutting down"))}}function Uq(){return new pl(n=>Xz(n),Z_)}function ER(n,e){return CR.apply(this,arguments)}function CR(){return(CR=(0,se.A)(function*(n,e){const t=Se(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.j_()&&e.H_()&&(r=2):(s=new cde,r=e.H_()?0:1);try{switch(r){case 0:s.G_=yield t.onListen(i,!0);break;case 1:s.G_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=_p(o,`Initialization of query '${ep(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.z_.push(e),e.Y_(t.onlineState),s.G_&&e.Z_(s.G_)&&TR(t)})).apply(this,arguments)}function IR(n,e){return wR.apply(this,arguments)}function wR(){return(wR=(0,se.A)(function*(n,e){const t=Se(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.z_.indexOf(e);o>=0&&(s.z_.splice(o,1),0===s.z_.length?i=e.H_()?0:1:!s.j_()&&e.H_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function dde(n,e){const t=Se(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.z_)a.Z_(i)&&(r=!0);o.G_=i}}r&&TR(t)}function hde(n,e,t){const r=Se(n),i=r.queries.get(e);if(i)for(const s of i.z_)s.onError(t);r.queries.delete(e)}function TR(n){n.J_.forEach(e=>{e.next()})}var bR,Bq;(Bq=bR||(bR={})).X_="default",Bq.Cache="cache";class AR{constructor(e,t,r){this.query=e,this.ea=t,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=r||{}}Z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new vp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ta?this.ra(e)&&(this.ea.next(e),t=!0):this.ia(e,this.onlineState)&&(this.sa(e),t=!0),this.na=e,t}onError(e){this.ea.error(e)}Y_(e){this.onlineState=e;let t=!1;return this.na&&!this.ta&&this.ia(this.na,e)&&(this.sa(this.na),t=!0),t}ia(e,t){return!e.fromCache||!this.H_()||(!this.options.oa||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ra(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.na&&this.na.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}sa(e){e=vp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ta=!0,this.ea.next(e)}H_(){return this.options.source!==bR.Cache}}class fde{constructor(e,t){this._a=e,this.byteLength=t}aa(){return"metadata"in this._a}}class jq{constructor(e){this.serializer=e}Ts(e){return Ta(this.serializer,e)}Es(e){return e.metadata.exists?k4(this.serializer,e.document,!1):Fn.newNoDocument(this.Ts(e.metadata.name),this.ds(e.metadata.readTime))}ds(e){return Er(e)}}class pde{constructor(e,t,r){this.ua=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=$q(e)}ca(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e._a.namedQuery)this.queries.push(e._a.namedQuery);else if(e._a.documentMetadata){this.documents.push({metadata:e._a.documentMetadata}),e._a.documentMetadata.exists||++t;const r=xt.fromString(e._a.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e._a.document&&(this.documents[this.documents.length-1].document=e._a.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}la(e){const t=new Map,r=new jq(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ts(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||mt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,se.A)(function*(){const t=yield function $ue(n,e,t,r){return WM.apply(this,arguments)}(e.localStore,new jq(e.serializer),e.documents,e.ua.id),r=e.la(e.documents);for(const i of e.queries)yield Hue(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ha:e.collectionGroups,Pa:t}})()}}function $q(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Hq{constructor(e){this.key=e}}class zq{constructor(e){this.key=e}}class qq{constructor(e,t){this.query=e,this.Ia=t,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=mt(),this.mutatedKeys=mt(),this.da=t4(e),this.Aa=new yp(this.da)}get Ra(){return this.Ia}Va(e,t){const r=t?t.ma:new Vq,i=t?t.Aa:this.Aa;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,g)=>{const _=i.get(h),E=J_(this.query,g)?g:null,I=!!_&&this.mutatedKeys.has(_.key),T=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let S=!1;_&&E?_.data.isEqual(E.data)?I!==T&&(r.track({type:3,doc:E}),S=!0):this.fa(_,E)||(r.track({type:2,doc:E}),S=!0,(l&&this.da(E,l)>0||c&&this.da(E,c)<0)&&(a=!0)):!_&&E?(r.track({type:0,doc:E}),S=!0):_&&!E&&(r.track({type:1,doc:_}),S=!0,(l||c)&&(a=!0)),S&&(E?(o=o.add(E),s=T?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Aa:o,ma:r,ts:a,mutatedKeys:s}}fa(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Aa;this.Aa=e.Aa,this.mutatedKeys=e.mutatedKeys;const o=e.ma.W_();o.sort((h,g)=>function(E,I){const T=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue()}};return T(E)-T(I)}(h.type,g.type)||this.da(h.doc,g.doc)),this.ga(r),i=null!=i&&i;const a=t&&!i?this.pa():[],l=0===this.Ea.size&&this.current&&!i?1:0,c=l!==this.Ta;return this.Ta=l,0!==o.length||c?{snapshot:new vp(this.query,e.Aa,s,o,e.mutatedKeys,0===l,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ya:a}:{ya:a}}Y_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new Vq,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(e){return!this.Ia.has(e)&&!!this.Aa.has(e)&&!this.Aa.get(e).hasLocalMutations}ga(e){e&&(e.addedDocuments.forEach(t=>this.Ia=this.Ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ia=this.Ia.delete(t)),this.current=e.current)}pa(){if(!this.current)return[];const e=this.Ea;this.Ea=mt(),this.Aa.forEach(r=>{this.wa(r.key)&&(this.Ea=this.Ea.add(r.key))});const t=[];return e.forEach(r=>{this.Ea.has(r)||t.push(new zq(r))}),this.Ea.forEach(r=>{e.has(r)||t.push(new Hq(r))}),t}Sa(e){this.Ia=e.Is,this.Ea=mt();const t=this.Va(e.documents);return this.applyChanges(t,!0)}ba(){return vp.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,0===this.Ta,this.hasCachedResults)}}class gde{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class mde{constructor(e){this.key=e,this.Da=!1}}class _de{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.va=new pl(a=>Xz(a),Z_),this.Fa=new Map,this.Ma=new Set,this.xa=new Mn(Pe.comparator),this.Oa=new Map,this.Na=new UM,this.La={},this.Ba=new Map,this.ka=fd.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return!0===this.qa}}function yde(n,e){return SR.apply(this,arguments)}function SR(){return(SR=(0,se.A)(function*(n,e,t=!0){const r=Yw(n);let i;const s=r.va.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ba()):i=yield Gq(r,e,t,!0),i})).apply(this,arguments)}function vde(n,e){return DR.apply(this,arguments)}function DR(){return(DR=(0,se.A)(function*(n,e){const t=Yw(n);yield Gq(t,e,!0,!1)})).apply(this,arguments)}function Gq(n,e,t,r){return PR.apply(this,arguments)}function PR(){return(PR=(0,se.A)(function*(n,e,t,r){const i=yield dp(n.localStore,Ri(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield MR(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&Kw(n.remoteStore,i),a})).apply(this,arguments)}function MR(n,e,t,r,i){return RR.apply(this,arguments)}function RR(){return RR=(0,se.A)(function*(n,e,t,r,i){n.Qa=(g,_,E)=>{return(I=(0,se.A)(function*(S,L,O,H){let oe=L.view.Va(O);oe.ts&&(oe=yield Hw(S.localStore,L.query,!1).then(({documents:P})=>L.view.Va(P,oe)));const Te=H&&H.targetChanges.get(L.targetId),Re=H&&null!=H.targetMismatches.get(L.targetId),k=L.view.applyChanges(oe,S.isPrimaryClient,Te,Re);return $R(S,L.targetId,k.ya),k.snapshot}),function T(S,L,O,H){return I.apply(this,arguments)})(n,g,_,E);var I};const s=yield Hw(n.localStore,e,!0),o=new qq(e,s.Is),a=o.Va(s.documents),l=sy.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=o.applyChanges(a,n.isPrimaryClient,l);$R(n,t,c.ya);const h=new gde(e,t,o);return n.va.set(e,h),n.Fa.has(t)?n.Fa.get(t).push(e):n.Fa.set(t,[e]),c.snapshot}),RR.apply(this,arguments)}function Ede(n,e,t){return OR.apply(this,arguments)}function OR(){return(OR=(0,se.A)(function*(n,e,t){const r=Se(n),i=r.va.get(e),s=r.Fa.get(i.targetId);if(s.length>1)return r.Fa.set(i.targetId,s.filter(o=>!Z_(o,e))),void r.va.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield hp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&pp(r.remoteStore,i.targetId),Ep(r,i.targetId)}).catch(mc))):(Ep(r,i.targetId),yield hp(r.localStore,i.targetId,!0))})).apply(this,arguments)}function Cde(n,e){return NR.apply(this,arguments)}function NR(){return(NR=(0,se.A)(function*(n,e){const t=Se(n),r=t.va.get(e),i=t.Fa.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),pp(t.remoteStore,r.targetId))})).apply(this,arguments)}function xR(){return(xR=(0,se.A)(function*(n,e,t){const r=XR(n);try{const i=yield function(o,a){const l=Se(o),c=zn.now(),h=a.reduce((E,I)=>E.add(I.key),mt());let g,_;return l.persistence.runTransaction("Locally write mutations","readwrite",E=>{let I=vs(),T=mt();return l.us.getEntries(E,h).next(S=>{I=S,I.forEach((L,O)=>{O.isValidDocument()||(T=T.add(L))})}).next(()=>l.localDocuments.getOverlayedDocuments(E,I)).next(S=>{g=S;const L=[];for(const O of a){const H=Kce(O,g.get(O.key).overlayedDocument);null!=H&&L.push(new gl(O.key,H,Lz(H.value.mapValue),qn.exists(!0)))}return l.mutationQueue.addMutationBatch(E,c,L,a)}).next(S=>{_=S;const L=S.applyToLocalDocumentSet(g,T);return l.documentOverlayCache.saveOverlays(E,S.batchId,L)})}).then(()=>({batchId:_.batchId,changes:r4(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.La[o.currentUser.toKey()];c||(c=new Mn(ct)),c=c.insert(a,l),o.La[o.currentUser.toKey()]=c}(r,i.batchId,t),yield _l(r,i.changes),yield gp(r.remoteStore)}catch(i){const s=_p(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function Wq(n,e){return kR.apply(this,arguments)}function kR(){return(kR=(0,se.A)(function*(n,e){const t=Se(n);try{const r=yield function Bue(n,e){const t=Se(n),r=e.snapshotVersion;let i=t.ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.us.newChangeBuffer({trackRemovals:!0});i=t.ss;const a=[];e.targetChanges.forEach((h,g)=>{const _=i.get(g);if(!_)return;a.push(t.$r.removeMatchingKeys(s,h.removedDocuments,g).next(()=>t.$r.addMatchingKeys(s,h.addedDocuments,g)));let E=_.withSequenceNumber(s.currentSequenceNumber);var T,S,L;null!==e.targetMismatches.get(g)?E=E.withResumeToken(or.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(g,E),S=E,L=h,(0===(T=_).resumeToken.approximateByteSize()||S.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8||L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0)&&a.push(t.$r.updateTargetData(s,E))});let l=vs(),c=mt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(Iq(s,o,e.documentUpdates).next(h=>{l=h.hs,c=h.Ps})),!r.isEqual(Ge.min())){const h=t.$r.getLastRemoteSnapshotVersion(s).next(g=>t.$r.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.ss=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Oa.get(s);o&&(qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Da=!0:i.modifiedDocuments.size>0?qe(o.Da):i.removedDocuments.size>0&&(qe(o.Da),o.Da=!1))}),yield _l(t,r,e)}catch(r){yield mc(r)}})).apply(this,arguments)}function Kq(n,e,t){const r=Se(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.va.forEach((s,o)=>{const a=o.view.Y_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Se(o);l.onlineState=a;let c=!1;l.queries.forEach((h,g)=>{for(const _ of g.z_)_.Y_(a)&&(c=!0)}),c&&TR(l)}(r.eventManager,e),i.length&&r.Ca.E_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function wde(n,e,t){return FR.apply(this,arguments)}function FR(){return(FR=(0,se.A)(function*(n,e,t){const r=Se(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Oa.get(e),s=i&&i.key;if(s){let o=new Mn(Pe.comparator);o=o.insert(s,Fn.newNoDocument(s,Ge.min()));const a=mt().add(s),l=new iy(Ge.min(),new Map,new Mn(ct),o,a);yield Wq(r,l),r.xa=r.xa.remove(s),r.Oa.delete(e),HR(r)}else yield hp(r.localStore,e,!1).then(()=>Ep(r,e,t)).catch(mc)})).apply(this,arguments)}function Tde(n,e){return LR.apply(this,arguments)}function LR(){return(LR=(0,se.A)(function*(n,e){const t=Se(n),r=e.batch.batchId;try{const i=yield function Uue(n,e){const t=Se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.us.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const g=c.batch,_=g.keys();let E=q.resolve();return _.forEach(I=>{E=E.next(()=>h.getEntry(l,I)).next(T=>{const S=c.docVersions.get(I);qe(null!==S),T.version.compareTo(S)<0&&(g.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),h.addEntry(T)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(l,g))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=mt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);jR(t,r,null),BR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield _l(t,i)}catch(i){yield mc(i)}})).apply(this,arguments)}function bde(n,e,t){return VR.apply(this,arguments)}function VR(){return(VR=(0,se.A)(function*(n,e,t){const r=Se(n);try{const i=yield function(o,a){const l=Se(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(g=>(qe(null!==g),h=g.keys(),l.mutationQueue.removeMutationBatch(c,g))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);jR(r,e,t),BR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield _l(r,i)}catch(i){yield mc(i)}})).apply(this,arguments)}function UR(){return(UR=(0,se.A)(function*(n,e){const t=Se(n);Dc(t.remoteStore)||pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=Se(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ba.get(r)||[];i.push(e),t.Ba.set(r,i)}catch(r){const i=_p(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function BR(n,e){(n.Ba.get(e)||[]).forEach(t=>{t.resolve()}),n.Ba.delete(e)}function jR(n,e,t){const r=Se(n);let i=r.La[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.La[r.currentUser.toKey()]=i}}function Ep(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Fa.get(e))n.va.delete(r),t&&n.Ca.Ka(r,t);n.Fa.delete(e),n.isPrimaryClient&&n.Na.mr(e).forEach(r=>{n.Na.containsKey(r)||Qq(n,r)})}function Qq(n,e){n.Ma.delete(e.path.canonicalString());const t=n.xa.get(e);null!==t&&(pp(n.remoteStore,t),n.xa=n.xa.remove(e),n.Oa.delete(t),HR(n))}function $R(n,e,t){for(const r of t)r instanceof Hq?(n.Na.addReference(r.key,e),Sde(n,r)):r instanceof zq?(pe("SyncEngine","Document no longer in limbo: "+r.key),n.Na.removeReference(r.key,e),n.Na.containsKey(r.key)||Qq(n,r.key)):Ue()}function Sde(n,e){const t=e.key,r=t.path.canonicalString();n.xa.get(t)||n.Ma.has(r)||(pe("SyncEngine","New document in limbo: "+t),n.Ma.add(r),HR(n))}function HR(n){for(;n.Ma.size>0&&n.xa.size<n.maxConcurrentLimboResolutions;){const e=n.Ma.values().next().value;n.Ma.delete(e);const t=new Pe(xt.fromString(e)),r=n.ka.next();n.Oa.set(r,new mde(t)),n.xa=n.xa.insert(t,r),Kw(n.remoteStore,new ml(Ri(Jf(t.path)),r,"TargetPurposeLimboResolution",Fs.oe))}}function _l(n,e,t){return zR.apply(this,arguments)}function zR(){return zR=(0,se.A)(function*(n,e,t){const r=Se(n),i=[],s=[],o=[];var a;r.va.isEmpty()||(r.va.forEach((a,l)=>{o.push(r.Qa(l,e,t).then(c=>{var h;if((c||t)&&r.isPrimaryClient){const g=c?!c.fromCache:null===(h=t?.targetChanges.get(l.targetId))||void 0===h?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(c){i.push(c);const g=zM.Ui(l.targetId,c);s.push(g)}}))}),yield Promise.all(o),r.Ca.E_(i),yield(a=(0,se.A)(function*(c,h){const g=Se(c);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>q.forEach(h,E=>q.forEach(E.Ki,I=>g.persistence.referenceDelegate.addReference(_,E.targetId,I)).next(()=>q.forEach(E.$i,I=>g.persistence.referenceDelegate.removeReference(_,E.targetId,I)))))}catch(_){if(!_c(_))throw _;pe("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of h){const E=_.targetId;if(!_.fromCache){const I=g.ss.get(E),S=I.withLastLimboFreeSnapshotVersion(I.snapshotVersion);g.ss=g.ss.insert(E,S)}}}),function l(c,h){return a.apply(this,arguments)})(r.localStore,s))}),zR.apply(this,arguments)}function Dde(n,e){return qR.apply(this,arguments)}function qR(){return(qR=(0,se.A)(function*(n,e){const t=Se(n);if(!t.currentUser.isEqual(e)){pe("SyncEngine","User change. New user:",e.toKey());const r=yield Eq(t.localStore,e);t.currentUser=e,(s=t).Ba.forEach(a=>{a.forEach(l=>{l.reject(new he(Y.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ba.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield _l(t,r.ls)}var s})).apply(this,arguments)}function Pde(n,e){const t=Se(n),r=t.Oa.get(e);if(r&&r.Da)return mt().add(r.key);{let i=mt();const s=t.Fa.get(e);if(!s)return i;for(const o of s){const a=t.va.get(o);i=i.unionWith(a.view.Ra)}return i}}function Mde(n,e){return GR.apply(this,arguments)}function GR(){return(GR=(0,se.A)(function*(n,e){const t=Se(n),r=yield Hw(t.localStore,e.query,!0),i=e.view.Sa(r);return t.isPrimaryClient&&$R(t,e.targetId,i.ya),i})).apply(this,arguments)}function Rde(n,e){return WR.apply(this,arguments)}function WR(){return(WR=(0,se.A)(function*(n,e){const t=Se(n);return Tq(t.localStore,e).then(r=>_l(t,r))})).apply(this,arguments)}function Ode(n,e,t,r){return KR.apply(this,arguments)}function KR(){return(KR=(0,se.A)(function*(n,e,t,r){const i=Se(n),s=yield function(a,l){const c=Se(a),h=Se(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",g=>h.Fn(g,l).next(_=>_?c.localDocuments.getDocuments(g,_):q.resolve(null)))}(i.localStore,e);var l;null!==s?("pending"===t?yield gp(i.remoteStore):"acknowledged"===t||"rejected"===t?(jR(i,e,r||null),BR(i,e),l=e,Se(Se(i.localStore).mutationQueue).xn(l)):Ue(),yield _l(i,s)):pe("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function QR(){return(QR=(0,se.A)(function*(n,e){const t=Se(n);if(Yw(t),XR(t),!0===e&&!0!==t.qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Yq(t,r.toArray());t.qa=!0,yield _R(t.remoteStore,!0);for(const s of i)Kw(t.remoteStore,s)}else if(!1===e&&!1!==t.qa){const r=[];let i=Promise.resolve();t.Fa.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Ep(t,o),hp(t.localStore,o,!0))),pp(t.remoteStore,o)}),yield i,yield Yq(t,r),function(o){const a=Se(o);a.Oa.forEach((l,c)=>{pp(a.remoteStore,c)}),a.Na.gr(),a.Oa=new Map,a.xa=new Mn(Pe.comparator)}(t),t.qa=!1,yield _R(t.remoteStore,!1)}})).apply(this,arguments)}function Yq(n,e,t){return YR.apply(this,arguments)}function YR(){return(YR=(0,se.A)(function*(n,e,t){const r=Se(n),i=[],s=[];for(const o of e){let a;const l=r.Fa.get(o);if(l&&0!==l.length){a=yield dp(r.localStore,Ri(l[0]));for(const c of l){const h=r.va.get(c),g=yield Mde(r,h);g.snapshot&&s.push(g.snapshot)}}else{const c=yield wq(r.localStore,o);a=yield dp(r.localStore,c),yield MR(r,Zq(c),o,!1,a.resumeToken)}i.push(a)}return r.Ca.E_(s),i})).apply(this,arguments)}function Zq(n){return Qz(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function xde(n){return t=Se(n).localStore,Se(Se(t).persistence).qi();var t}function kde(n,e,t,r){return ZR.apply(this,arguments)}function ZR(){return(ZR=(0,se.A)(function*(n,e,t,r){const i=Se(n);if(i.qa)return void pe("SyncEngine","Ignoring unexpected query state notification.");const s=i.Fa.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield Tq(i.localStore,e4(s[0])),a=iy.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,or.EMPTY_BYTE_STRING);yield _l(i,o,a);break}case"rejected":yield hp(i.localStore,e,!0),Ep(i,e,r);break;default:Ue()}})).apply(this,arguments)}function Fde(n,e,t){return JR.apply(this,arguments)}function JR(){return(JR=(0,se.A)(function*(n,e,t){const r=Yw(n);if(r.qa){for(const i of e){if(r.Fa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){pe("SyncEngine","Adding an already active target "+i);continue}const s=yield wq(r.localStore,i),o=yield dp(r.localStore,s);yield MR(r,Zq(s),o.targetId,!1,o.resumeToken),Kw(r.remoteStore,o)}for(const i of t)r.Fa.has(i)&&(yield hp(r.localStore,i,!1).then(()=>{pp(r.remoteStore,i),Ep(r,i)}).catch(mc))}})).apply(this,arguments)}function Yw(n){const e=Se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wq.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pde.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wde.bind(null,e),e.Ca.E_=dde.bind(null,e.eventManager),e.Ca.Ka=hde.bind(null,e.eventManager),e}function XR(n){const e=Se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tde.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bde.bind(null,e),e}class Cp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,se.A)(function*(){t.serializer=gy(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return vq(this.persistence,new yq,e.initialUser,this.serializer)}createPersistence(e){return new BM(Bw.Yr,this.serializer)}createSharedClientState(e){return new Dq}terminate(){var e=this;return(0,se.A)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class eO extends Cp{constructor(e,t,r){super(),this.Ua=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,se.A)(function*(){yield t().call(r,e),yield r.Ua.initialize(r,e),yield XR(r.Ua.syncEngine),yield gp(r.Ua.remoteStore),yield r.persistence.pi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return vq(this.persistence,new yq,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new cq(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new sce(t,this.persistence);return new ice(e.asyncQueue,r)}createPersistence(e){const t=HM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Oi.withCacheSize(this.cacheSizeBytes):Oi.DEFAULT;return new $M(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Mq(),Ww(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Dq}}class Jq extends eO{constructor(e,t){super(e,t,!1),this.Ua=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,se.A)(function*(){yield t().call(r,e);const i=r.Ua.syncEngine;r.sharedClientState instanceof JM&&(r.sharedClientState.syncEngine={eo:Ode.bind(null,i),no:kde.bind(null,i),ro:Fde.bind(null,i),qi:xde.bind(null,i),Xs:Rde.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.pi(function(){var s=(0,se.A)(function*(o){yield function Nde(n,e){return QR.apply(this,arguments)}(r.Ua.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Mq();if(!JM.D(t))throw new he(Y.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=HM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new JM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ip{initialize(e,t){var r=this;return(0,se.A)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Kq(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Dde.bind(null,r.syncEngine),yield _R(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ude}createDatastore(e){const t=gy(e.databaseInfo.databaseId),r=new Wue(e.databaseInfo);return new Yue(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>Kq(this.syncEngine,t,0),a=Pq.D()?new Pq:new zue,new Jue(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,l,c,h){const g=new _de(i,s,o,a,l,c);return h&&(g.qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,se.A)(function*(){var t,r,i;yield(i=(0,se.A)(function*(o){const a=Se(o);pe("RemoteStore","RemoteStore shutting down."),a.N_.add(5),yield fp(a),a.B_.shutdown(),a.k_.set("Unknown")}),function s(o){return i.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate(),null===(r=e.eventManager)||void 0===r||r.terminate()})()}}function Xq(n,e=10240){let t=0;return{read:()=>(0,se.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,se.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Zw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Wa(this.observer.next,e)}error(e){this.observer.error?this.Wa(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString())}Ga(){this.muted=!0}Wa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Ude{constructor(e,t){this.za=e,this.serializer=t,this.metadata=new zr,this.buffer=new Uint8Array,this.ja=new TextDecoder("utf-8"),this.Ha().then(r=>{r&&r.aa()?this.metadata.resolve(r._a.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?._a)}`))},r=>this.metadata.reject(r))}close(){return this.za.cancel()}getMetadata(){var e=this;return(0,se.A)(function*(){return e.metadata.promise})()}$a(){var e=this;return(0,se.A)(function*(){return yield e.getMetadata(),e.Ha()})()}Ha(){var e=this;return(0,se.A)(function*(){const t=yield e.Ja();if(null===t)return null;const r=e.ja.decode(t),i=Number(r);isNaN(i)&&e.Ya(`length string (${r}) is not valid number`);const s=yield e.Za(i);return new fde(JSON.parse(s),t.length+i)})()}Xa(){return this.buffer.findIndex(e=>123===e)}Ja(){var e=this;return(0,se.A)(function*(){for(;e.Xa()<0&&!(yield e.eu()););if(0===e.buffer.length)return null;const t=e.Xa();t<0&&e.Ya("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Za(e){var t=this;return(0,se.A)(function*(){for(;t.buffer.length<e;)(yield t.eu())&&t.Ya("Reached the end of bundle when more is expected.");const r=t.ja.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ya(e){throw this.za.cancel(),new Error(`Invalid bundle format: ${e}`)}eu(){var e=this;return(0,se.A)(function*(){const t=yield e.za.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Bde{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,se.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new he(Y.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,se.A)(function*(o,a){const l=Se(o),c={documents:a.map(E=>oy(l.serializer,E))},h=yield l.No("BatchGetDocuments",l.serializer.databaseId,xt.emptyPath(),c,a.length),g=new Map;h.forEach(E=>{const I=function rue(n,e){return"found"in e?function(r,i){qe(!!i.found);const s=Ta(r,i.found.name),o=Er(i.found.updateTime),a=i.found.createTime?Er(i.found.createTime):Ge.min(),l=new ui({mapValue:{fields:i.found.fields}});return Fn.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){qe(!!i.missing),qe(!!i.readTime);const s=Ta(r,i.missing),o=Er(i.readTime);return Fn.newNoDocument(s,o)}(n,e):Ue()}(l.serializer,E);g.set(I.key.toString(),I)});const _=[];return a.forEach(E=>{const I=g.get(E.toString());qe(!!I),_.push(I)}),_}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ip(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,se.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=Pe.fromPath(i);e.mutations.push(new IM(s,e.precondition(s)))}),yield(r=(0,se.A)(function*(s,o){const a=Se(s),l={writes:o.map(c=>ay(a.serializer,c))};yield a.Fo("Commit",a.serializer.databaseId,xt.emptyPath(),l)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ue();t=Ge.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new he(Y.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ge.min())?qn.exists(!1):qn.updateTime(t):qn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ge.min()))throw new he(Y.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qn.updateTime(t)}return qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class jde{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.tu=r.maxAttempts,this.e_=new eR(this.asyncQueue,"transaction_retry")}nu(){this.tu-=1,this.ru()}ru(){var e=this;this.e_.Wo((0,se.A)(function*(){const t=new Bde(e.datastore),r=e.iu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.su(s)}))}).catch(i=>{e.su(i)})}))}iu(e){try{const t=this.updateFunction(e);return!H_(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}su(e){this.tu>0&&this.ou(e)?(this.tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ru(),Promise.resolve()))):this.deferred.reject(e)}ou(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!v4(t)}return!1}}class $de{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Xr.UNAUTHENTICATED,this.clientId=dz.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,se.A)(function*(a){pe("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(pe("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new he(Y.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,se.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=_p(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Jw(n,e){return tO.apply(this,arguments)}function tO(){return tO=(0,se.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),pe("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,se.A)(function*(s){r.isEqual(s)||(yield Eq(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),tO.apply(this,arguments)}function nO(n,e){return rO.apply(this,arguments)}function rO(){return(rO=(0,se.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield iO(n);pe("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Lq(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Lq(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function eG(n){return"FirebaseError"===n.name?n.code===Y.FAILED_PRECONDITION||n.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function iO(n){return sO.apply(this,arguments)}function sO(){return(sO=(0,se.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Jw(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!eG(t))throw t;_s("Error using user provided cache. Falling back to memory cache: "+t),yield Jw(n,new Cp)}}else pe("FirestoreClient","Using default OfflineComponentProvider"),yield Jw(n,new Cp);return n._offlineComponents})).apply(this,arguments)}function Xw(n){return oO.apply(this,arguments)}function oO(){return(oO=(0,se.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe("FirestoreClient","Using user provided OnlineComponentProvider"),yield nO(n,n._uninitializedComponentsProvider._online)):(pe("FirestoreClient","Using default OnlineComponentProvider"),yield nO(n,new Ip))),n._onlineComponents})).apply(this,arguments)}function tG(n){return iO(n).then(e=>e.persistence)}function wp(n){return iO(n).then(e=>e.localStore)}function nG(n){return Xw(n).then(e=>e.remoteStore)}function aO(n){return Xw(n).then(e=>e.syncEngine)}function Tp(n){return lO.apply(this,arguments)}function lO(){return(lO=(0,se.A)(function*(n){const e=yield Xw(n),t=e.eventManager;return t.onListen=yde.bind(null,e.syncEngine),t.onUnlisten=Ede.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=vde.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Cde.bind(null,e.syncEngine),t})).apply(this,arguments)}function iG(n,e,t={}){const r=new zr;return n.asyncQueue.enqueueAndForget((0,se.A)(function*(){return function(s,o,a,l,c){const h=new Zw({next:_=>{o.enqueueAndForget(()=>IR(s,g));const E=_.docs.has(a);!E&&_.fromCache?c.reject(new he(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&l&&"server"===l.source?c.reject(new he(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(_)},error:_=>c.reject(_)}),g=new AR(Jf(a.path),h,{includeMetadataChanges:!0,oa:!0});return ER(s,g)}(yield Tp(n),n.asyncQueue,e,t,r)})),r.promise}function sG(n,e,t={}){const r=new zr;return n.asyncQueue.enqueueAndForget((0,se.A)(function*(){return function(s,o,a,l,c){const h=new Zw({next:_=>{o.enqueueAndForget(()=>IR(s,g)),_.fromCache&&"server"===l.source?c.reject(new he(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(_)},error:_=>c.reject(_)}),g=new AR(a,h,{includeMetadataChanges:!0,oa:!0});return ER(s,g)}(yield Tp(n),n.asyncQueue,e,t,r)})),r.promise}function oG(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const aG=new Map;function cO(n,e,t){if(!t)throw new he(Y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lG(n,e,t,r){if(!0===e&&!0===r)throw new he(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cG(n){if(!Pe.isDocumentKey(n))throw new he(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uG(n){if(Pe.isDocumentKey(n))throw new he(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function eT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Ue()}function Tt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eT(n);throw new he(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function dG(n,e){if(e<=0)throw new he(Y.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class hG{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new he(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new he(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=oG(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new he(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _y{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hG({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new he(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new he(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hG(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Gle;switch(r.type){case"firstParty":return new Yle(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=aG.get(t);r&&(pe("ComponentProvider","Removing Datastore"),aG.delete(t),r.terminate())}(this),Promise.resolve()}}class di{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new di(this.firestore,e,this._query)}}class Ln{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ba(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ln(this.firestore,e,this._key)}}class ba extends di{constructor(e,t,r){super(e,t,Jf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ln(this.firestore,null,new Pe(e))}withConverter(e){return new ba(this.firestore,e,this._path)}}function pG(n,e,...t){if(n=(0,A.Ku)(n),cO("collection","path",e),n instanceof _y){const r=xt.fromString(e,...t);return uG(r),new ba(n,null,r)}{if(!(n instanceof Ln||n instanceof ba))throw new he(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xt.fromString(e,...t));return uG(r),new ba(n.firestore,null,r)}}function tT(n,e,...t){if(n=(0,A.Ku)(n),1===arguments.length&&(e=dz.newId()),cO("doc","path",e),n instanceof _y){const r=xt.fromString(e,...t);return cG(r),new Ln(n,null,new Pe(r))}{if(!(n instanceof Ln||n instanceof ba))throw new he(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xt.fromString(e,...t));return cG(r),new Ln(n.firestore,n instanceof ba?n.converter:null,new Pe(r))}}function gG(n,e){return n=(0,A.Ku)(n),e=(0,A.Ku)(e),(n instanceof Ln||n instanceof ba)&&(e instanceof Ln||e instanceof ba)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function uO(n,e){return n=(0,A.Ku)(n),e=(0,A.Ku)(e),n instanceof di&&e instanceof di&&n.firestore===e.firestore&&Z_(n._query,e._query)&&n.converter===e.converter}class the{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new eR(this,"async_queue_retry"),this.Tu=()=>{const t=Ww();t&&pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.e_.zo()};const e=Ww();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Eu(),this.du(e)}enterRestrictedMode(e){if(!this.uu){this.uu=!0,this.Pu=e||!1;const t=Ww();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tu)}}enqueue(e){if(this.Eu(),this.uu)return new Promise(()=>{});const t=new zr;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.au.push(e),this.Au()))}Au(){var e=this;return(0,se.A)(function*(){if(0!==e.au.length){try{yield e.au[0](),e.au.shift(),e.e_.reset()}catch(t){if(!_c(t))throw t;pe("AsyncQueue","Operation failed with retryable error: "+t)}e.au.length>0&&e.e_.Wo(()=>e.Au())}})()}du(e){const t=this._u.then(()=>(this.hu=!0,e().catch(r=>{throw this.lu=r,this.hu=!1,vr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.hu=!1,r))));return this._u=t,t}enqueueAfterDelay(e,t,r){this.Eu(),this.Iu.indexOf(e)>-1&&(t=0);const i=vR.createAndSchedule(this,e,t,r,s=>this.Ru(s));return this.cu.push(i),i}Eu(){this.lu&&Ue()}verifyOperationInProgress(){}Vu(){var e=this;return(0,se.A)(function*(){let t;do{t=e._u,yield t}while(t!==e._u)})()}mu(e){for(const t of this.cu)if(t.timerId===e)return!0;return!1}fu(e){return this.Vu().then(()=>{this.cu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.cu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Vu()})}gu(e){this.Iu.push(e)}Ru(e){const t=this.cu.indexOf(e);this.cu.splice(t,1)}}function dO(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class nhe{constructor(){this._progressObserver={},this._taskCompletionResolver=new zr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class _n extends _y{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new the,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||mG(this),this._firestoreClient.terminate()}}function Gn(n){return n._firestoreClient||mG(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function mG(n){var e,t,r;const i=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Sce(n._databaseId,l,n._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,oG(h.experimentalLongPollingOptions),h.useFetchStreams));var l,h;n._firestoreClient=new $de(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function _G(n,e,t){const r=new zr;return n.asyncQueue.enqueue((0,se.A)(function*(){try{yield Jw(n,t),yield nO(n,e),r.resolve()}catch(i){const s=i;if(!eG(s))throw s;_s("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function yG(n){if(n._initialized||n._terminated)throw new he(Y.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Aa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Aa(or.fromBase64String(e))}catch(t){throw new he(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Aa(or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class yl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new he(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gd{constructor(e){this._methodName=e}}class nT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ct(this._lat,e._lat)||ct(this._long,e._long)}}const fhe=/^__.*__$/;class phe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new gl(e,this.data,this.fieldMask,t,this.fieldTransforms):new rp(e,this.data,t,this.fieldTransforms)}}class vG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new gl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function EG(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue()}}class rT{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(e){return new rT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.wu({path:r,bu:!1});return i.Du(e),i}Cu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.wu({path:r,bu:!1});return i.pu(),i}vu(e){return this.wu({path:void 0,bu:!0})}Fu(e){return oT(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Du(this.path.get(e))}Du(e){if(0===e.length)throw this.Fu("Document fields must not be empty");if(EG(this.yu)&&fhe.test(e))throw this.Fu('Document fields cannot begin and end with "__"')}}class ghe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||gy(e)}Ou(e,t,r,i=!1){return new rT({yu:e,methodName:t,xu:r,path:kn.emptyPath(),bu:!1,Mu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function md(n){const e=n._freezeSettings(),t=gy(n._databaseId);return new ghe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function iT(n,e,t,r,i,s={}){const o=n.Ou(s.merge||s.mergeFields?2:0,e,t,i);yO("Data must be an object, but it was:",o,r);const a=wG(r,o);let l,c;if(s.merge)l=new ys(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const g of s.mergeFields){const _=Ey(e,g,t);if(!o.contains(_))throw new he(Y.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);bG(h,_)||h.push(_)}l=new ys(h),c=o.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,c=o.fieldTransforms;return new phe(new ui(a),l,c)}class vy extends gd{_toFieldTransform(e){if(2!==e.yu)throw e.Fu(1===e.yu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vy}}function CG(n,e,t){return new rT({yu:3,xu:e.settings.xu,methodName:n._methodName,bu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hO extends gd{_toFieldTransform(e){return new ty(e.path,new tp)}isEqual(e){return e instanceof hO}}class fO extends gd{constructor(e,t){super(e),this.Nu=t}_toFieldTransform(e){const t=CG(this,e,!0),r=this.Nu.map(s=>_d(s,t)),i=new od(r);return new ty(e.path,i)}isEqual(e){return e instanceof fO&&(0,A.bD)(this.Nu,e.Nu)}}class pO extends gd{constructor(e,t){super(e),this.Nu=t}_toFieldTransform(e){const t=CG(this,e,!0),r=this.Nu.map(s=>_d(s,t)),i=new ad(r);return new ty(e.path,i)}isEqual(e){return e instanceof pO&&(0,A.bD)(this.Nu,e.Nu)}}class gO extends gd{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new np(e.serializer,a4(e.serializer,this.Lu));return new ty(e.path,t)}isEqual(e){return e instanceof gO&&this.Lu===e.Lu}}function mO(n,e,t,r){const i=n.Ou(1,e,t);yO("Data must be an object, but it was:",i,r);const s=[],o=ui.empty();yc(r,(l,c)=>{const h=sT(e,l,t);c=(0,A.Ku)(c);const g=i.Cu(h);if(c instanceof vy)s.push(h);else{const _=_d(c,g);null!=_&&(s.push(h),o.set(h,_))}});const a=new ys(s);return new vG(o,a,i.fieldTransforms)}function _O(n,e,t,r,i,s){const o=n.Ou(1,e,t),a=[Ey(e,r,t)],l=[i];if(s.length%2!=0)throw new he(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<s.length;_+=2)a.push(Ey(e,s[_])),l.push(s[_+1]);const c=[],h=ui.empty();for(let _=a.length-1;_>=0;--_)if(!bG(c,a[_])){const E=a[_];let I=l[_];I=(0,A.Ku)(I);const T=o.Cu(E);if(I instanceof vy)c.push(E);else{const S=_d(I,T);null!=S&&(c.push(E),h.set(E,S))}}const g=new ys(c);return new vG(h,g,o.fieldTransforms)}function IG(n,e,t,r=!1){return _d(t,n.Ou(r?4:3,e))}function _d(n,e){if(TG(n=(0,A.Ku)(n)))return yO("Unsupported field value:",e,n),wG(n,e);if(n instanceof gd)return function(r,i){if(!EG(i.yu))throw i.Fu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Fu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.bu&&4!==e.yu)throw e.Fu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=_d(a,i.vu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,A.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return a4(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=zn.fromDate(r);return{timestampValue:sp(i.serializer,s)}}if(r instanceof zn){const s=new zn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sp(i.serializer,s)}}if(r instanceof nT)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Aa)return{bytesValue:P4(i.serializer,r._byteString)};if(r instanceof Ln){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Fu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:DM(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Fu(`Unsupported field value: ${eT(r)}`)}(n,e)}function wG(n,e){const t={};return Dz(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yc(n,(r,i)=>{const s=_d(i,e.Su(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function TG(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof zn||n instanceof nT||n instanceof Aa||n instanceof Ln||n instanceof gd)}function yO(n,e,t){if(!TG(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=eT(t);throw e.Fu("an object"===r?n+" a custom object":n+" "+r)}var i}function Ey(n,e,t){if((e=(0,A.Ku)(e))instanceof yl)return e._internalPath;if("string"==typeof e)return sT(n,e);throw oT("Field path arguments must be of type string or ",n,!1,void 0,t)}const mhe=new RegExp("[~\\*/\\[\\]]");function sT(n,e,t){if(e.search(mhe)>=0)throw oT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yl(...e.split("."))._internalPath}catch{throw oT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function oT(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new he(Y.INVALID_ARGUMENT,a+n+l)}function bG(n,e){return n.some(t=>t.isEqual(e))}class Cy{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ln(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _he(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(aT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _he extends Cy{data(){return super.data()}}function aT(n,e){return"string"==typeof e?sT(n,e):e instanceof yl?e._internalPath:e._delegate._internalPath}function AG(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new he(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vO{}class Iy extends vO{}function Mc(n,e,...t){let r=[];e instanceof vO&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof bp).length,a=s.filter(l=>l instanceof wy).length;if(o>1||o>0&&a>0)throw new he(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class wy extends Iy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new wy(e,t,r)}_apply(e){const t=this._parse(e);return MG(e._query,t),new di(e.firestore,e.converter,EM(e._query,t))}_parse(e){const t=md(e.firestore);return function(s,o,a,l,c,h,g){let _;if(c.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new he(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){PG(g,h);const E=[];for(const I of g)E.push(DG(l,s,I));_={arrayValue:{values:E}}}else _=DG(l,s,g)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||PG(g,h),_=IG(a,"where",g,"in"===h||"not-in"===h);return kt.create(c,h,_)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class bp extends vO{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bp(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:dn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)MG(o,l),o=EM(o,l)}(e._query,t),new di(e.firestore,e.converter,EM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class EO extends Iy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new EO(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new he(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new he(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Q_(s,o)}(e._query,this._field,this._direction);return new di(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new fl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class lT extends Iy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new lT(e,t,r)}_apply(e){return new di(e.firestore,e.converter,Aw(e._query,this._limit,this._limitType))}}class cT extends Iy{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new cT(e,t,r)}_apply(e){const t=SG(e,this.type,this._docOrFields,this._inclusive);return new di(e.firestore,e.converter,(s=t,new fl((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class uT extends Iy{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new uT(e,t,r)}_apply(e){const t=SG(e,this.type,this._docOrFields,this._inclusive);return new di(e.firestore,e.converter,(s=t,new fl((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function SG(n,e,t,r){if(t[0]=(0,A.Ku)(t[0]),t[0]instanceof Cy)return function(s,o,a,l,c){if(!l)throw new he(Y.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const g of Xf(s))if(g.field.isKeyField())h.push(id(o,l.key));else{const _=l.data.field(g.field);if(vw(_))throw new he(Y.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const E=g.field.canonicalString();throw new he(Y.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}h.push(_)}return new wc(h,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=md(n.firestore);return function(o,a,l,c,h,g){const _=o.explicitOrderBy;if(h.length>_.length)throw new he(Y.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let I=0;I<h.length;I++){const T=h[I];if(_[I].field.isKeyField()){if("string"!=typeof T)throw new he(Y.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof T}`);if(!vM(o)&&-1!==T.indexOf("/"))throw new he(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${T}' contains a slash.`);const S=o.path.child(xt.fromString(T));if(!Pe.isDocumentKey(S))throw new he(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const L=new Pe(S);E.push(id(a,L))}else{const S=IG(l,c,T);E.push(S)}}return new wc(E,g)}(n._query,n.firestore._databaseId,i,e,t,r)}}function DG(n,e,t){if("string"==typeof(t=(0,A.Ku)(t))){if(""===t)throw new he(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vM(e)&&-1!==t.indexOf("/"))throw new he(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(xt.fromString(t));if(!Pe.isDocumentKey(r))throw new he(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return id(n,new Pe(r))}if(t instanceof Ln)return id(n,t._key);throw new he(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eT(t)}.`)}function PG(n,e){if(!Array.isArray(n)||0===n.length)throw new he(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MG(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new he(Y.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class CO{convertValue(e,t="none"){switch(Cc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ue()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return yc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new nT(ar(e.latitude),ar(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ew(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(q_(e));default:return null}}convertTimestamp(e){const t=dl(e);return new zn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=xt.fromString(e);qe(j4(r));const i=new vc(r.get(1),r.get(3)),s=new Pe(r.popFirst(5));return i.isEqual(t)||vr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function dT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Ahe extends CO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Aa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,t)}}class yd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vl extends Cy{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ty(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(aT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ty extends vl{data(e={}){return super.data(e)}}class Rc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new yd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ty(this._firestore,this._userDataWriter,r.key,r,new yd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Ty(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new Ty(i._firestore,i._userDataWriter,a.doc.key,a.doc,new yd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Dhe(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Dhe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue()}}function OG(n,e){return n instanceof vl&&e instanceof vl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Rc&&e instanceof Rc&&n._firestore===e._firestore&&uO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Oc extends CO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Aa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ln(this.firestore,null,t)}}function NG(n,e,t){n=Tt(n,Ln);const r=Tt(n.firestore,_n),i=dT(n.converter,e,t);return Ap(r,[iT(md(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,qn.none())])}function xG(n,e,t,...r){n=Tt(n,Ln);const i=Tt(n.firestore,_n),s=md(i);let o;return o="string"==typeof(e=(0,A.Ku)(e))||e instanceof yl?_O(s,"updateDoc",n._key,e,t,r):mO(s,"updateDoc",n._key,e),Ap(i,[o.toMutation(n._key,qn.exists(!0))])}function kG(n,...e){var t,r,i;n=(0,A.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||dO(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(dO(e[o])){const g=e[o];e[o]=null===(t=g.next)||void 0===t?void 0:t.bind(g),e[o+1]=null===(r=g.error)||void 0===r?void 0:r.bind(g),e[o+2]=null===(i=g.complete)||void 0===i?void 0:i.bind(g)}let l,c,h;if(n instanceof Ln)c=Tt(n.firestore,_n),h=Jf(n._key.path),l={next:g=>{e[o]&&e[o](IO(c,n,g))},error:e[o+1],complete:e[o+2]};else{const g=Tt(n,di);c=Tt(g.firestore,_n),h=g._query;const _=new Oc(c);l={next:E=>{e[o]&&e[o](new Rc(c,_,g,E))},error:e[o+1],complete:e[o+2]},AG(n._query)}return function(_,E,I,T){const S=new Zw(T),L=new AR(E,S,I);return _.asyncQueue.enqueueAndForget((0,se.A)(function*(){return ER(yield Tp(_),L)})),()=>{S.Ga(),_.asyncQueue.enqueueAndForget((0,se.A)(function*(){return IR(yield Tp(_),L)}))}}(Gn(c),h,a,l)}function Ap(n,e){return function(r,i){const s=new zr;return r.asyncQueue.enqueueAndForget((0,se.A)(function*(){return function Ide(n,e,t){return xR.apply(this,arguments)}(yield aO(r),i,s)})),s.promise}(Gn(n),e)}function IO(n,e,t){const r=t.docs.get(e._key),i=new Oc(n);return new vl(n,i,e._key,r,new yd(t.hasPendingWrites,t.fromCache),e.converter)}const Ghe={maxAttempts:5};class FG{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=md(e)}set(e,t,r){this._verifyNotCommitted();const i=Nc(e,this._firestore),s=dT(i.converter,t,r),o=iT(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,qn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Nc(e,this._firestore);let o;return o="string"==typeof(t=(0,A.Ku)(t))||t instanceof yl?_O(this._dataReader,"WriteBatch.update",s._key,t,r,i):mO(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,qn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nc(e,this._firestore);return this._mutations=this._mutations.concat(new ip(t._key,qn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new he(Y.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nc(n,e){if((n=(0,A.Ku)(n)).firestore!==e)throw new he(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Whe extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=md(t)}get(t){const r=Nc(t,this._firestore),i=new Ahe(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Ue();const o=s[0];if(o.isFoundDocument())return new Cy(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Cy(this._firestore,i,r._key,null,r.converter);throw Ue()})}set(t,r,i){const s=Nc(t,this._firestore),o=dT(s.converter,r,i),a=iT(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Nc(t,this._firestore);let a;return a="string"==typeof(r=(0,A.Ku)(r))||r instanceof yl?_O(this._dataReader,"Transaction.update",o._key,r,i,s):mO(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Nc(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nc(e,this._firestore),r=new Oc(this._firestore);return super.get(e).then(i=>new vl(this._firestore,r,t._key,i._document,new yd(!1,!1),t.converter))}}function TO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new he("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function BG(){if(typeof Uint8Array>"u")throw new he("unimplemented","Uint8Arrays are not available in this environment.")}function jG(){if(!function bce(){return typeof atob<"u"}())throw new he("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){zf=va.SDK_VERSION,(0,va._registerComponent)(new cl.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new _n(new Kle(r.getProvider("auth-internal")),new Zle(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new he(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vc(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,va.registerVersion)(lz,"4.6.5",e),(0,va.registerVersion)(lz,"4.6.5","esm2017")}();class by{constructor(e){this._delegate=e}static fromBase64String(e){return jG(),new by(Aa.fromBase64String(e))}static fromUint8Array(e){return BG(),new by(Aa.fromUint8Array(e))}toBase64(){return jG(),this._delegate.toBase64()}toUint8Array(){return BG(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function bO(n){return function rfe(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class ife{enableIndexedDbPersistence(e,t){return function ihe(n,e){yG(n=Tt(n,_n));const t=Gn(n);if(t._uninitializedComponentsProvider)throw new he(Y.FAILED_PRECONDITION,"SDK cache is already specified.");_s("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Ip;return _G(t,i,new eO(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function she(n){yG(n=Tt(n,_n));const e=Gn(n);if(e._uninitializedComponentsProvider)throw new he(Y.FAILED_PRECONDITION,"SDK cache is already specified.");_s("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Ip;return _G(e,r,new Jq(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ohe(n){if(n._initialized&&!n._terminated)throw new he(Y.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new zr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,se.A)(function*(){try{yield(t=(0,se.A)(function*(i){if(!Ea.D())return Promise.resolve();const s=i+"main";yield Ea.delete(s)}),function r(i){return t.apply(this,arguments)})(HM(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class $G{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof vc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&_s("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function fG(n,e,t,r={}){var i;const s=(n=Tt(n,_y))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&_s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=Xr.MOCK_USER;else{a=(0,A.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new he(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Xr(c)}n._authCredentials=new Wle(new cz(a,l))}}(this._delegate,e,t,r)}enableNetwork(){return function lhe(n){return function Hde(n){return n.asyncQueue.enqueue((0,se.A)(function*(){const e=yield tG(n),t=yield nG(n);return e.setNetworkEnabled(!0),function(i){const s=Se(i);return s.N_.delete(0),my(s)}(t)}))}(Gn(n=Tt(n,_n)))}(this._delegate)}disableNetwork(){return function che(n){return function zde(n){return n.asyncQueue.enqueue((0,se.A)(function*(){const e=yield tG(n),t=yield nG(n);return e.setNetworkEnabled(!1),(r=(0,se.A)(function*(s){const o=Se(s);o.N_.add(0),yield fp(o),o.k_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Gn(n=Tt(n,_n)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,lG("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ahe(n){return function(t){const r=new zr;return t.asyncQueue.enqueueAndForget((0,se.A)(function*(){return function Ade(n,e){return UR.apply(this,arguments)}(yield aO(t),r)})),r.promise}(Gn(n=Tt(n,_n)))}(this._delegate)}onSnapshotsInSync(e){return function Lhe(n,e){return function Kde(n,e){const t=new Zw(e);return n.asyncQueue.enqueueAndForget((0,se.A)(function*(){return i=yield Tp(n),s=t,Se(i).J_.add(s),void s.next();var i,s})),()=>{t.Ga(),n.asyncQueue.enqueueAndForget((0,se.A)(function*(){return i=yield Tp(n),s=t,void Se(i).J_.delete(s);var i,s}))}}(Gn(n=Tt(n,_n)),dO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new he("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Sp(this,pG(this._delegate,e))}catch(t){throw Ji(t,"collection()","Firestore.collection()")}}doc(e){try{return new ro(this,tT(this._delegate,e))}catch(t){throw Ji(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xi(this,function ehe(n,e){if(n=Tt(n,_y),cO("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new he(Y.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new di(n,null,(r=e,new fl(xt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Ji(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Khe(n,e,t){n=Tt(n,_n);const r=Object.assign(Object.assign({},Ghe),t);return function(s){if(s.maxAttempts<1)throw new he(Y.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new zr;return s.asyncQueue.enqueueAndForget((0,se.A)(function*(){const c=yield function rG(n){return Xw(n).then(e=>e.datastore)}(s);new jde(s.asyncQueue,c,a,o,l).nu()})),l.promise}(Gn(n),i=>e(new Whe(n,i)),r)}(this._delegate,t=>e(new HG(this,t)))}batch(){return Gn(this._delegate),new zG(new FG(this._delegate,e=>Ap(this._delegate,e)))}loadBundle(e){return function uhe(n,e){const t=Gn(n=Tt(n,_n)),r=new nhe;return function Qde(n,e,t,r){const i=function(o,a){let l;return l="string"==typeof o?C4().encode(o):o,h=function(h,g){if(h instanceof Uint8Array)return Xq(h,g);if(h instanceof ArrayBuffer)return Xq(new Uint8Array(h),g);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new Ude(h,a);var h}(t,gy(e));n.asyncQueue.enqueueAndForget((0,se.A)(function*(){!function Lde(n,e,t){const r=Se(n);var i;(i=(0,se.A)(function*(o,a,l){try{const c=yield a.getMetadata();if(yield function(I,T){const S=Se(I),L=Er(T.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",O=>S.Wr.getBundleMetadata(O,T.id)).then(O=>!!O&&O.createTime.compareTo(L)>=0)}(o.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(I=c).totalDocuments,bytesLoaded:I.totalBytes,totalDocuments:I.totalDocuments,totalBytes:I.totalBytes}),Promise.resolve(new Set);l._updateProgress($q(c));const h=new pde(c,o.localStore,a.serializer);let g=yield a.$a();for(;g;){const E=yield h.ca(g);E&&l._updateProgress(E),g=yield a.$a()}const _=yield h.complete();return yield _l(o,_.Pa,void 0),yield function(I,T){const S=Se(I);return S.persistence.runTransaction("Save bundle","readwrite",L=>S.Wr.saveBundleMetadata(L,T))}(o.localStore,c),l._completeWith(_.progress),Promise.resolve(_.ha)}catch(c){return _s("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var I}),function s(o,a,l){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield aO(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function dhe(n,e){return function Yde(n,e){return n.asyncQueue.enqueue((0,se.A)(function*(){return function(r,i){const s=Se(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Wr.getNamedQuery(o,i))}(yield wp(n),e)}))}(Gn(n=Tt(n,_n)),e).then(t=>t?new di(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Xi(this,t):null)}}class fT extends CO{constructor(e){super(),this.firestore=e}convertBytes(e){return new by(new Aa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ro.forKey(t,this.firestore,null)}}class HG{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new fT(e)}get(e){const t=Ed(e);return this._delegate.get(t).then(r=>new Ay(this._firestore,new vl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ed(e);return r?(TO("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Ed(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Ed(e);return this._delegate.delete(t),this}}class zG{constructor(e){this._delegate=e}set(e,t,r){const i=Ed(e);return r?(TO("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Ed(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Ed(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class vd{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Ty(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Sy(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=vd.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new vd(e,new fT(e),t),i.set(t,s)),s}}vd.INSTANCES=new WeakMap;class ro{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new he("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ro(t,new Ln(t._delegate,r,new Pe(e)))}static forKey(e,t,r){return new ro(t,new Ln(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Sp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Sp(this.firestore,pG(this._delegate,e))}catch(t){throw Ji(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,A.Ku)(e))instanceof Ln&&gG(this._delegate,e)}set(e,t){t=TO("DocumentReference.set",t);try{return t?NG(this._delegate,e,t):NG(this._delegate,e)}catch(r){throw Ji(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?xG(this._delegate,e):xG(this._delegate,e,t,...r)}catch(i){throw Ji(i,"updateDoc()","DocumentReference.update()")}}delete(){return function khe(n){return Ap(Tt(n.firestore,_n),[new ip(n._key,qn.none())])}(this._delegate)}onSnapshot(...e){const t=qG(e),r=GG(e,i=>new Ay(this.firestore,new vl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return kG(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Mhe(n){n=Tt(n,Ln);const e=Tt(n.firestore,_n),t=Gn(e),r=new Oc(e);return function qde(n,e){const t=new zr;return n.asyncQueue.enqueueAndForget((0,se.A)(function*(){return(r=(0,se.A)(function*(s,o,a){try{const l=yield function(h,g){const _=Se(h);return _.persistence.runTransaction("read document","readonly",E=>_.localDocuments.getDocument(E,g))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new he(Y.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=_p(l,`Failed to get document '${o} from cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield wp(n),e,t);var r})),t.promise}(t,n._key).then(i=>new vl(e,r,n._key,i,new yd(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Rhe(n){n=Tt(n,Ln);const e=Tt(n.firestore,_n);return iG(Gn(e),n._key,{source:"server"}).then(t=>IO(e,n,t))}(this._delegate):function Phe(n){n=Tt(n,Ln);const e=Tt(n.firestore,_n);return iG(Gn(e),n._key).then(t=>IO(e,n,t))}(this._delegate),t.then(r=>new Ay(this.firestore,new vl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ro(this.firestore,this._delegate.withConverter(e?vd.getInstance(this.firestore,e):null))}}function Ji(n,e,t){return n.message=n.message.replace(e,t),n}function qG(n){for(const e of n)if("object"==typeof e&&!bO(e))return e;return{}}function GG(n,e){var t,r;let i;return i=bO(n[0])?n[0]:bO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Ay{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ro(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return OG(this._delegate,e._delegate)}}class Sy extends Ay{data(e){const t=this._delegate.data(e);return this._delegate._converter||function qle(n,e){n||Ue()}(void 0!==t),t}}class Xi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fT(e)}where(e,t,r){try{return new Xi(this.firestore,Mc(this._delegate,function yhe(n,e,t){const r=e,i=aT("where",n);return wy._create(i,r,t)}(e,t,r)))}catch(i){throw Ji(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Xi(this.firestore,Mc(this._delegate,function vhe(n,e="asc"){const t=e,r=aT("orderBy",n);return EO._create(r,t)}(e,t)))}catch(r){throw Ji(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Xi(this.firestore,Mc(this._delegate,function Ehe(n){return dG("limit",n),lT._create("limit",n,"F")}(e)))}catch(t){throw Ji(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Xi(this.firestore,Mc(this._delegate,function Che(n){return dG("limitToLast",n),lT._create("limitToLast",n,"L")}(e)))}catch(t){throw Ji(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Xi(this.firestore,Mc(this._delegate,function Ihe(...n){return cT._create("startAt",n,!0)}(...e)))}catch(t){throw Ji(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Xi(this.firestore,Mc(this._delegate,function whe(...n){return cT._create("startAfter",n,!1)}(...e)))}catch(t){throw Ji(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Xi(this.firestore,Mc(this._delegate,function The(...n){return uT._create("endBefore",n,!1)}(...e)))}catch(t){throw Ji(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Xi(this.firestore,Mc(this._delegate,function bhe(...n){return uT._create("endAt",n,!0)}(...e)))}catch(t){throw Ji(t,"endAt()","Query.endAt()")}}isEqual(e){return uO(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Nhe(n){n=Tt(n,di);const e=Tt(n.firestore,_n),t=Gn(e),r=new Oc(e);return function Gde(n,e){const t=new zr;return n.asyncQueue.enqueueAndForget((0,se.A)(function*(){return(r=(0,se.A)(function*(s,o,a){try{const l=yield Hw(s,o,!0),c=new qq(o,l.Is),h=c.Va(l.documents),g=c.applyChanges(h,!1);a.resolve(g.snapshot)}catch(l){const c=_p(l,`Failed to execute query '${o} against cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield wp(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Rc(e,r,n,i))}(this._delegate):"server"===e?.source?function xhe(n){n=Tt(n,di);const e=Tt(n.firestore,_n),t=Gn(e),r=new Oc(e);return sG(t,n._query,{source:"server"}).then(i=>new Rc(e,r,n,i))}(this._delegate):function Ohe(n){n=Tt(n,di);const e=Tt(n.firestore,_n),t=Gn(e),r=new Oc(e);return AG(n._query),sG(t,n._query).then(i=>new Rc(e,r,n,i))}(this._delegate),t.then(r=>new AO(this.firestore,new Rc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=qG(e),r=GG(e,i=>new AO(this.firestore,new Rc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return kG(this._delegate,t,r)}withConverter(e){return new Xi(this.firestore,this._delegate.withConverter(e?vd.getInstance(this.firestore,e):null))}}class ofe{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Sy(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class AO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Xi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Sy(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ofe(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Sy(this._firestore,r))})}isEqual(e){return OG(this._delegate,e._delegate)}}class Sp extends Xi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ro(this.firestore,e):null}doc(e){try{return new ro(this.firestore,void 0===e?tT(this._delegate):tT(this._delegate,e))}catch(t){throw Ji(t,"doc()","CollectionReference.doc()")}}add(e){return function Fhe(n,e){const t=Tt(n.firestore,_n),r=tT(n),i=dT(n.converter,e);return Ap(t,[iT(md(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,qn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ro(this.firestore,t))}isEqual(e){return gG(this._delegate,e._delegate)}withConverter(e){return new Sp(this.firestore,this._delegate.withConverter(e?vd.getInstance(this.firestore,e):null))}}function Ed(n){return Tt(n,Ln)}class SO{constructor(...e){this._delegate=new yl(...e)}static documentId(){return new SO(kn.keyField().canonicalString())}isEqual(e){return(e=(0,A.Ku)(e))instanceof yl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Cd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Yhe(){return new hO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Cd(e)}static delete(){const e=function Qhe(){return new vy("deleteField")}();return e._methodName="FieldValue.delete",new Cd(e)}static arrayUnion(...e){const t=function Zhe(...n){return new fO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Cd(t)}static arrayRemove(...e){const t=function Jhe(...n){return new pO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Cd(t)}static increment(e){const t=function Xhe(n){return new gO("increment",n)}(e);return t._methodName="FieldValue.increment",new Cd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const afe={Firestore:$G,GeoPoint:nT,Timestamp:zn,Blob:by,Transaction:HG,WriteBatch:zG,DocumentReference:ro,DocumentSnapshot:Ay,Query:Xi,QueryDocumentSnapshot:Sy,QuerySnapshot:AO,CollectionReference:Sp,FieldPath:SO,FieldValue:Cd,setLogLevel:function sfe(n){!function zle(n){gc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function WG(n,e){return function ufe(n,e=HP){return new on(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function DO(n,e){return WG(n,e).pipe(He(t=>({payload:t,type:"query"})))}!function cfe(n){(function lfe(n,e){n.INTERNAL.registerComponent(new cl.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},afe)))})(n,(e,t)=>new $G(e,t,new ife)),n.registerVersion("@firebase/firestore-compat","0.3.34")}(ll.A);class KG{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=JG(r,t);return new ZG(i,s,this.afs)}snapshotChanges(){return function dfe(n,e){return WG(n,e).pipe(RI(void 0),iM(),He(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Hr)}valueChanges(e={}){return this.snapshotChanges().pipe(He(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return xn(this.ref.get(e)).pipe(Hr)}}function pT(n,e){return DO(n,e).pipe(RI(void 0),iM(),He(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{const c=s.find(g=>g.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(g=>g.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function QG(n,e,t){return pT(n,t).pipe(bf((r,i)=>function hfe(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function ffe(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return PO(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return PO(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return PO(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),JH(),He(r=>r.map(i=>({type:i.type,payload:i}))))}function PO(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function YG(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class ZG{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=pT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(He(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(RI(void 0),iM(),ko(([r,i])=>i.length>0||!r),He(([,r])=>r),Hr)}auditTrail(e){return this.stateChanges(e).pipe(bf((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=YG(e);return QG(this.query,t,this.afs.schedulers.outsideAngular).pipe(Hr)}valueChanges(e={}){return DO(this.query,this.afs.schedulers.outsideAngular).pipe(He(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Hr)}get(e){return xn(this.query.get(e)).pipe(Hr)}add(e){return this.ref.add(e)}doc(e){return new KG(this.ref.doc(e),this.afs)}}class pfe{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?pT(this.query,this.afs.schedulers.outsideAngular).pipe(He(t=>t.filter(r=>e.indexOf(r.type)>-1)),ko(t=>t.length>0),Hr):pT(this.query,this.afs.schedulers.outsideAngular).pipe(Hr)}auditTrail(e){return this.stateChanges(e).pipe(bf((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=YG(e);return QG(this.query,t,this.afs.schedulers.outsideAngular).pipe(Hr)}valueChanges(e={}){return DO(this.query,this.afs.schedulers.outsideAngular).pipe(He(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Hr)}get(e){return xn(this.query.get(e)).pipe(Hr)}}const gfe=new we("angularfire2.enableFirestorePersistence"),mfe=new we("angularfire2.firestore.persistenceSettings"),_fe=new we("angularfire2.firestore.settings"),yfe=new we("angularfire2.firestore.use-emulator");function JG(n,e=(t=>t)){return{query:e(n),ref:n}}let vfe=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,l,c,h,g,_,E,I,T,S,L,O){this.schedulers=l;const H=fw(t,a,r),oe=h;g&&nM(H,a,_,I,T,S,E,L),[this.firestore,this.persistenceEnabled$]=WP(`${H.name}.firestore`,"AngularFirestore",H.name,()=>{const Te=a.runOutsideAngular(()=>H.firestore());if(s&&Te.settings(s),oe&&Te.useEmulator(...oe),i&&!TI(o)){const Re=()=>{try{return xn(Te.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(k){return typeof console<"u"&&console.warn(k),Xe(!1)}};return[Te,a.runOutsideAngular(Re)]}return[Te,Xe(!1)]},[s,oe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=JG(i,r),a=this.schedulers.ngZone.run(()=>s);return new ZG(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new pfe(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new KG(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(ge(V_),ge(U_,8),ge(gfe,8),ge(_fe,8),ge(Ao),ge(Rt),ge(GP),ge(mfe,8),ge(yfe,8),ge(rM,8),ge(YP,8),ge(ZP,8),ge(JP,8),ge(XP,8),ge(eM,8),ge(tM,8),ge(qP,8))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Efe=(()=>{class n{constructor(t){this.firestore=t}getPosts(){return this.firestore.collection("posts",t=>t.orderBy("timestamp")).valueChanges({idField:"id"})}addPost(t){this.firestore.collection("posts").add({content:t,timestamp:new Date}).then(()=>console.log("Post added successfully")).catch(r=>console.error("Error adding post:",r))}deletePost(t){return this.firestore.collection("posts").doc(t).delete().then(()=>console.log("Post deleted")).catch(r=>console.error("Error deleting post:",r))}static#e=this.\u0275fac=function(r){return new(r||n)(ge(vfe))};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Cfe(n,e){1&n&&(Ce(0,"div",6)(1,"p"),be(2,"No posts yet! Be the first to share a thought about Bob."),ve()())}function Ife(n,e){if(1&n){const t=Hu();Ce(0,"div",7)(1,"p"),be(2),ve(),Ce(3,"span",8),be(4),function sU(n,e){const t=gt();let r;const i=n+Qe;t.firstCreatePass?(r=function WJ(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=Ha(r.type)),a=Ei(ye);try{const l=WE(!1),c=s();return WE(l),function vJ(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,ne(),i,c),c}finally{Ei(a)}}(5,"date"),ve(),Ce(6,"button",9),en("click",function(){const i=Ys(t).$implicit;return Zs($n().deletePost(i.id))}),be(7,"Delete"),ve()()}if(2&n){const t=e.$implicit;Yt("@fadeSlideIn",void 0),st(2),gs(t.content),st(2),gs(oU(5,3,t.timestamp,"medium"))}}const wfe=[{path:"",component:Roe},{path:"about",component:Noe},{path:"gallery",component:Loe},{path:"bob-life",component:Voe},{path:"name-tree",component:Goe},{path:"anthem",component:nle},{path:"quiz",component:tle},{path:"faq",component:ole},{path:"secret-blog",component:dle},{path:"blog",component:(()=>{class n{constructor(t){this.firebaseService=t,this.posts=[],this.newPost=""}ngOnInit(){this.firebaseService.getPosts().subscribe(t=>{this.posts=t,console.log("Posts retrieved on init:",this.posts)})}addPost(){this.newPost.trim()&&(this.firebaseService.addPost(this.newPost),this.newPost="")}deletePost(t){this.firebaseService.deletePost(t).then(()=>{this.posts=this.posts.filter(r=>r.id!==t)})}static#e=this.\u0275fac=function(r){return new(r||n)(ye(Efe))};static#t=this.\u0275cmp=Sr({type:n,selectors:[["app-blog"]],decls:9,vars:4,consts:[[1,"blog-container"],[1,"post-creator"],["placeholder","Write your thoughts here...",3,"ngModelChange","ngModel"],[3,"click","disabled"],["class","empty-state",4,"ngIf"],["class","post-card",4,"ngFor","ngForOf"],[1,"empty-state"],[1,"post-card"],[1,"post-date"],[1,"delete-button",3,"click"]],template:function(r,i){1&r&&(Ce(0,"div",0)(1,"h2"),be(2,"Bob\u2019s Blog"),ve(),Ce(3,"div",1)(4,"textarea",2),Xm("ngModelChange",function(o){return YC(i.newPost,o)||(i.newPost=o),o}),ve(),Ce(5,"button",3),en("click",function(){return i.addPost()}),be(6,"Post"),ve()(),Ur(7,Cfe,3,0,"div",4)(8,Ife,8,6,"div",5),ve()),2&r&&(st(4),Jm("ngModel",i.newPost),st(),Yt("disabled",!i.newPost.trim()),st(2),Yt("ngIf",0===i.posts.length),st(),Yt("ngForOf",i.posts))},dependencies:[cc,vf,Vf,ew,x_,GB],styles:[".highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}.blog-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;background-color:#f7f9fc;font-family:Roboto,sans-serif}h2[_ngcontent-%COMP%]{text-align:center;color:#eb94bd;margin-bottom:1.5rem}.post-creator[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:20px}.post-creator[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;max-width:750px;height:100px;padding:10px;font-size:1rem;border:1px solid #e2e8f0;border-radius:5px;margin-bottom:10px;resize:vertical;box-shadow:0 4px 8px #0000001a}.post-creator[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#eb94bd;color:#fff;padding:10px 20px;border:none;border-radius:5px;font-size:1rem;cursor:pointer;transition:background-color .3s;width:100%;max-width:200px}.post-creator[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#e369a2}.post-creator[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{background-color:#fbeaf2;cursor:not-allowed}.empty-state[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem;color:#2e4057;margin-top:20px}.post-card[_ngcontent-%COMP%]{background-color:#fff;padding:15px;border-radius:8px;box-shadow:0 4px 8px #0003;margin:10px 0;transition:transform .3s}.post-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.post-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#333;font-size:1.1rem;margin-bottom:5px}.post-card[_ngcontent-%COMP%]   .post-date[_ngcontent-%COMP%]{font-size:.8rem;color:#2e4057;text-align:right;display:block;margin-top:5px}.post-card[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{background:none;border:none;color:#2e4057;cursor:pointer;font-size:.8rem;text-align:right;padding:0;transition:color .3s}.post-card[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]:hover{color:#eb94bd}@media (max-width: 768px){.blog-container[_ngcontent-%COMP%]{padding:10px}.post-creator[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:.9rem;height:80px}.post-creator[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;font-size:.9rem}.post-card[_ngcontent-%COMP%]{padding:10px}.post-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.post-card[_ngcontent-%COMP%]   .post-date[_ngcontent-%COMP%]{font-size:.7rem}}"],data:{animation:[hle("fadeSlideIn",[$H(":enter",[jH("0.5s ease-out",ple([k_({opacity:0,transform:"translateY(20px)",offset:0}),k_({opacity:1,transform:"translateY(0)",offset:1})]))]),$H(":leave",[jH("0.3s ease-in",k_({opacity:0,transform:"translateY(-20px)"}))])])]}})}return n})()},{path:"**",component:rle}];let Tfe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=cs({type:n});static#n=this.\u0275inj=vi({imports:[L$.forRoot(wfe),L$]})}return n})(),bfe=(()=>{class n{constructor(){this.menuOpen=!1}toggleMenu(){this.menuOpen=!this.menuOpen}closeMenu(){this.menuOpen=!1}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Sr({type:n,selectors:[["app-header"]],decls:38,vars:4,consts:[["role","banner",1,"site-header"],[1,"wrapper"],["rel","author","routerLink","/",1,"site-title"],[1,"site-nav"],["aria-label","Menu Toggle",1,"menu-toggle",3,"click"],[1,"hamburger"],["routerLink","/","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/about","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/gallery","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/bob-life","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/name-tree","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/quiz","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/anthem","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/faq","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/blog","routerLinkActive","active",1,"menu-item",3,"click"],["routerLink","/secret-blog","routerLinkActive","active",1,"menu-item",3,"click"]],template:function(r,i){1&r&&(Ce(0,"header",0)(1,"div",1)(2,"a",2),be(3,"Bob the Cat"),ve(),Ce(4,"nav",3)(5,"div",4),en("click",function(){return i.toggleMenu()}),er(6,"span",5),ve(),Ce(7,"ul")(8,"li")(9,"a",6),en("click",function(){return i.closeMenu()}),be(10,"Home"),ve()(),Ce(11,"li")(12,"a",7),en("click",function(){return i.closeMenu()}),be(13,"About Bob"),ve()(),Ce(14,"li")(15,"a",8),en("click",function(){return i.closeMenu()}),be(16,"Gallery"),ve()(),Ce(17,"li")(18,"a",9),en("click",function(){return i.closeMenu()}),be(19,"A Day in Bob's Life"),ve()(),Ce(20,"li")(21,"a",10),en("click",function(){return i.closeMenu()}),be(22,"Bob's Names"),ve()(),Ce(23,"li")(24,"a",11),en("click",function(){return i.closeMenu()}),be(25,"Bob Quiz"),ve()(),Ce(26,"li")(27,"a",12),en("click",function(){return i.closeMenu()}),be(28,"Bob's Anthem"),ve()(),Ce(29,"li")(30,"a",13),en("click",function(){return i.closeMenu()}),be(31,"FAQ"),ve()(),Ce(32,"li")(33,"a",14),en("click",function(){return i.closeMenu()}),be(34,"Blog"),ve()(),Ce(35,"li")(36,"a",15),en("click",function(){return i.closeMenu()}),be(37,"Secret Momma Page"),ve()()()()()()),2&r&&(st(5),$u("active",i.menuOpen),st(2),$u("active",i.menuOpen))},dependencies:[Lf,P$],styles:['.highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}.site-header[_ngcontent-%COMP%]{background-color:#f7f9fc;border-bottom:1px solid #8ea5c3;position:sticky;top:0;width:100%;z-index:1000}.site-header[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 20px}.site-header[_ngcontent-%COMP%]   .site-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#eb94bd;text-decoration:none;font-family:Roboto,sans-serif}.site-header[_ngcontent-%COMP%]   .site-title[_ngcontent-%COMP%]:hover{color:#e369a2}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]{position:relative}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]{display:none;cursor:pointer;width:30px;height:25px;flex-direction:column;justify-content:space-between}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%], .site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:before, .site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:after{content:"";display:block;background-color:#2e4057;height:3px;border-radius:2px;transition:all .3s ease}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:before, .site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:after{position:absolute;width:100%}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:before{transform:translateY(-8px)}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:after{transform:translateY(8px)}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle.active[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]{background-color:transparent}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle.active[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle.active[_ngcontent-%COMP%]   .hamburger[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:flex;margin:0}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:20px}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{color:#2e4057;text-decoration:none;font-size:1rem;transition:color .3s ease;font-family:Roboto,sans-serif}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover, .site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu-item.active[_ngcontent-%COMP%]{color:#eb94bd}@media (max-width: 768px){.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   .menu-toggle[_ngcontent-%COMP%]{display:flex}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background-color:#f7f9fc;flex-direction:column;width:250px;max-height:0;overflow:hidden;transition:max-height .3s ease;box-shadow:0 4px 6px #0000001a}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul.active[_ngcontent-%COMP%]{max-height:500px}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{display:block;padding:15px 20px;border-bottom:1px solid #8ea5c3}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover{background-color:#fff}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none}.site-header[_ngcontent-%COMP%]   .site-nav[_ngcontent-%COMP%]   ul.active[_ngcontent-%COMP%]{display:flex}.site-header[_ngcontent-%COMP%]   .site-title[_ngcontent-%COMP%]{font-size:1.5rem}}']})}return n})(),Afe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Sr({type:n,selectors:[["app-footer"]],decls:11,vars:0,consts:[[1,"site-footer"],[1,"wrapper"],[1,"footer-content"],["href","https://www.instagram.com/bobbatausa/","target","_blank",1,"footer-link"],[1,"footer-nav"]],template:function(r,i){1&r&&(Ce(0,"footer",0)(1,"div",1)(2,"div",2)(3,"h2"),be(4,"Bob the Cat"),ve(),Ce(5,"a",3),be(6,"Follow Bob on Instagram"),ve(),Ce(7,"p"),be(8,"Follow along Bob on her daily adventures!"),ve()(),Ce(9,"div",4),er(10,"ul"),ve()()())},styles:[".highlight[_ngcontent-%COMP%]{background:#fff}.highlighter-rouge[_ngcontent-%COMP%]   .highlight[_ngcontent-%COMP%]{background:#eef}.highlight[_ngcontent-%COMP%]   .c[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .err[_ngcontent-%COMP%]{color:#a61717;background-color:#e3d2d2}.highlight[_ngcontent-%COMP%]   .k[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .o[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .cm[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cp[_ngcontent-%COMP%]{color:#999;font-weight:700}.highlight[_ngcontent-%COMP%]   .c1[_ngcontent-%COMP%]{color:#998;font-style:italic}.highlight[_ngcontent-%COMP%]   .cs[_ngcontent-%COMP%]{color:#999;font-weight:700;font-style:italic}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]{color:#000;background-color:#fdd}.highlight[_ngcontent-%COMP%]   .gd[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#faa}.highlight[_ngcontent-%COMP%]   .ge[_ngcontent-%COMP%]{font-style:italic}.highlight[_ngcontent-%COMP%]   .gr[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .gh[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]{color:#000;background-color:#dfd}.highlight[_ngcontent-%COMP%]   .gi[_ngcontent-%COMP%]   .x[_ngcontent-%COMP%]{color:#000;background-color:#afa}.highlight[_ngcontent-%COMP%]   .go[_ngcontent-%COMP%]{color:#888}.highlight[_ngcontent-%COMP%]   .gp[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .gs[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .gu[_ngcontent-%COMP%]{color:#aaa}.highlight[_ngcontent-%COMP%]   .gt[_ngcontent-%COMP%]{color:#a00}.highlight[_ngcontent-%COMP%]   .kc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kp[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .kr[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .kt[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .m[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .s[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .na[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .nb[_ngcontent-%COMP%]{color:#0086b3}.highlight[_ngcontent-%COMP%]   .nc[_ngcontent-%COMP%]{color:#458;font-weight:700}.highlight[_ngcontent-%COMP%]   .no[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ni[_ngcontent-%COMP%]{color:purple}.highlight[_ngcontent-%COMP%]   .ne[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .nf[_ngcontent-%COMP%]{color:#900;font-weight:700}.highlight[_ngcontent-%COMP%]   .nn[_ngcontent-%COMP%]{color:#555}.highlight[_ngcontent-%COMP%]   .nt[_ngcontent-%COMP%]{color:navy}.highlight[_ngcontent-%COMP%]   .nv[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .ow[_ngcontent-%COMP%]{font-weight:700}.highlight[_ngcontent-%COMP%]   .w[_ngcontent-%COMP%]{color:#bbb}.highlight[_ngcontent-%COMP%]   .mf[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mi[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .mo[_ngcontent-%COMP%]{color:#099}.highlight[_ngcontent-%COMP%]   .sb[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sd[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .s2[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .se[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sh[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .si[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .sx[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .sr[_ngcontent-%COMP%]{color:#009926}.highlight[_ngcontent-%COMP%]   .s1[_ngcontent-%COMP%]{color:#d14}.highlight[_ngcontent-%COMP%]   .ss[_ngcontent-%COMP%]{color:#990073}.highlight[_ngcontent-%COMP%]   .bp[_ngcontent-%COMP%]{color:#999}.highlight[_ngcontent-%COMP%]   .vc[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vg[_ngcontent-%COMP%], .highlight[_ngcontent-%COMP%]   .vi[_ngcontent-%COMP%]{color:teal}.highlight[_ngcontent-%COMP%]   .il[_ngcontent-%COMP%]{color:#099}.site-footer[_ngcontent-%COMP%]{background-color:#f7f9fc;color:#333;padding:3rem 0;font-family:Roboto,sans-serif;border-top:1px solid #cccccc}.site-footer[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:2rem}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]{flex:1;min-width:250px;text-align:left}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:2rem;color:#eb94bd}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5rem;font-size:1.1rem}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]{display:flex;gap:1rem}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{color:#333;font-size:1.8rem;transition:color .3s}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]:hover{color:#eb94bd}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]{flex:1;min-width:200px}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.75rem}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .footer-nav-item[_ngcontent-%COMP%]{color:#333;text-decoration:none;font-size:1.1rem;transition:color .3s}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .footer-nav-item[_ngcontent-%COMP%]:hover{color:#eb94bd}@media (max-width: 768px){.site-footer[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.site-footer[_ngcontent-%COMP%]   .footer-content[_ngcontent-%COMP%], .site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]{min-width:unset}.site-footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]{margin-top:2rem}}"]})}return n})(),Sfe=(()=>{class n{constructor(){this.title="my-angular-website"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=Sr({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[["aria-label","Content",1,"page-content"],[1,"wrapper"]],template:function(r,i){1&r&&(er(0,"app-header"),Ce(1,"main",0)(2,"div",1),er(3,"router-outlet"),ve()(),er(4,"app-footer"))},dependencies:[aP,bfe,Afe]})}return n})();function XG(n){return new Q(3e3,!1)}function xc(n){switch(n.length){case 0:return new F_;case 1:return n[0];default:return new HH(n)}}function e3(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),h=c==o,g=h&&a||new Map;l.forEach((_,E)=>{let I=E,T=_;if("offset"!==E)switch(I=n.normalizePropertyName(I,i),T){case"!":T=t.get(E);break;case al:T=r.get(E);break;default:T=n.normalizeStyleValue(E,I,T,i)}g.set(I,T)}),h||s.push(g),a=g,o=c}),i.length)throw function Yfe(n){return new Q(3502,!1)}();return s}function MO(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&RO(t,"start",n)));break;case"done":n.onDone(()=>r(t&&RO(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&RO(t,"destroy",n)))}}function RO(n,e,t){const s=OO(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function OO(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Ls(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function t3(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const lpe=typeof document>"u"?null:document.documentElement;function NO(n){const e=n.parentNode||n.host||null;return e===lpe?null:e}let Id=null,n3=!1;function r3(n,e){for(;e;){if(e===n)return!0;e=NO(e)}return!1}function i3(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let xO=(()=>{class n{validateStyleProperty(t){return function upe(n){Id||(Id=function dpe(){return typeof document<"u"?document.body:null}()||{},n3=!!Id.style&&"WebkitAppearance"in Id.style);let e=!0;return Id.style&&!function cpe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Id.style,!e&&n3&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Id.style)),e}(t)}containsElement(t,r){return r3(t,r)}getParentElement(t){return NO(t)}query(t,r,i){return i3(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new F_(i,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();class kO{static#e=this.NOOP=new xO}class FO{}const fpe=1e3,LO="ng-enter",gT="ng-leave",mT="ng-trigger",_T=".ng-trigger",o3="ng-animating",VO=".ng-animating";function El(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:UO(parseFloat(e[1]),e[2])}function UO(n,e){return"s"===e?n*fpe:n}function yT(n,e,t){return n.hasOwnProperty("duration")?n:function gpe(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(XG()),{duration:0,delay:0,easing:""};i=UO(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=UO(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(function Dfe(){return new Q(3100,!1)}()),a=!0),s<0&&(e.push(function Pfe(){return new Q(3101,!1)}()),a=!0),a&&e.splice(l,0,XG())}return{duration:i,delay:s,easing:o}}(n,e,t)}function Sa(n,e,t){e.forEach((r,i)=>{const s=jO(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function wd(n,e){e.forEach((t,r)=>{const i=jO(r);n.style[i]=""})}function Dy(n){return Array.isArray(n)?1==n.length?n[0]:function fle(n,e=null){return{type:ot.Sequence,steps:n,options:e}}(n):n}const BO=new RegExp("{{\\s*(.+?)\\s*}}","g");function l3(n){let e=[];if("string"==typeof n){let t;for(;t=BO.exec(n);)e.push(t[1]);BO.lastIndex=0}return e}function Py(n,e,t){const r=`${n}`,i=r.replace(BO,(s,o)=>{let a=e[o];return null==a&&(t.push(function Rfe(n){return new Q(3003,!1)}()),a=""),a.toString()});return i==r?n:i}const ype=/-+([a-z0-9])/g;function jO(n){return n.replace(ype,(...e)=>e[1].toUpperCase())}function Vs(n,e,t){switch(e.type){case ot.Trigger:return n.visitTrigger(e,t);case ot.State:return n.visitState(e,t);case ot.Transition:return n.visitTransition(e,t);case ot.Sequence:return n.visitSequence(e,t);case ot.Group:return n.visitGroup(e,t);case ot.Animate:return n.visitAnimate(e,t);case ot.Keyframes:return n.visitKeyframes(e,t);case ot.Style:return n.visitStyle(e,t);case ot.Reference:return n.visitReference(e,t);case ot.AnimateChild:return n.visitAnimateChild(e,t);case ot.AnimateRef:return n.visitAnimateRef(e,t);case ot.Query:return n.visitQuery(e,t);case ot.Stagger:return n.visitStagger(e,t);default:throw function Ofe(n){return new Q(3004,!1)}()}}function $O(n,e){return window.getComputedStyle(n)[e]}const Cpe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class c3 extends FO{normalizePropertyName(e,t){return jO(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(Cpe.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function Nfe(n,e){return new Q(3005,!1)}())}return o+s}}const vT="*";const ET=new Set(["true","1"]),CT=new Set(["false","0"]);function u3(n,e){const t=ET.has(n)||CT.has(n),r=ET.has(e)||CT.has(e);return(i,s)=>{let o=n==vT||n==i,a=e==vT||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?ET.has(n):CT.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?ET.has(e):CT.has(e)),o&&a}}const bpe=new RegExp("s*:selfs*,?","g");function HO(n,e,t,r){return new Ape(n).build(e,t,r)}class Ape{constructor(e){this._driver=e}build(e,t,r){const i=new Ppe(t);return this._resetContextStyleTimingState(i),Vs(this,Dy(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function xfe(){return new Q(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==ot.State){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(h=>{l.name=h,s.push(this.visitState(l,t))}),l.name=c}else if(a.type==ot.Transition){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(function kfe(){return new Q(3007,!1)}())}),{type:ot.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{l3(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&t.errors.push(function Ffe(n,e){return new Q(3008,!1)}(0,s.values()))}return{type:ot.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Vs(this,Dy(e.animation),t),i=function Ipe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function wpe(n,e,t){if(":"==n[0]){const l=function Tpe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Gfe(n){return new Q(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function qfe(n){return new Q(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(u3(i,o)),"<"==s[0]&&(i!=vT||o!=vT)&&e.push(u3(o,i))}(r,t,e)):t.push(n),t}(e.expr,t.errors);return{type:ot.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Td(e.options)}}visitSequence(e,t){return{type:ot.Sequence,steps:e.steps.map(r=>Vs(this,r,t)),options:Td(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=Vs(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:ot.Group,steps:s,options:Td(e.options)}}visitAnimate(e,t){const r=function Rpe(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return zO(yT(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=zO(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=yT(t,e);return zO(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:k_({});if(s.type==ot.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};r.easing&&(c.easing=r.easing),o=k_(c)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:ot.Animate,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===al?r.push(a):t.errors.push(new Q(3002,!1)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:ot.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),h=c.get(l);let g=!0;h&&(s!=i&&s>=h.startTime&&i<=h.endTime&&(t.errors.push(function Vfe(n,e,t,r,i){return new Q(3010,!1)}()),g=!1),s=h.startTime),g&&c.set(l,{startTime:s,endTime:i}),t.options&&function _pe(n,e,t){const r=e.params||{},i=l3(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function Mfe(n){return new Q(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:ot.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Ufe(){return new Q(3011,!1)}()),r;let s=0;const o=[];let a=!1,l=!1,c=0;const h=e.steps.map(L=>{const O=this._makeStyleAst(L,t);let H=null!=O.offset?O.offset:function Mpe(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(O.styles),oe=0;return null!=H&&(s++,oe=O.offset=H),l=l||oe<0||oe>1,a=a||oe<c,c=oe,o.push(oe),O});l&&t.errors.push(function Bfe(){return new Q(3012,!1)}()),a&&t.errors.push(function jfe(){return new Q(3200,!1)}());const g=e.steps.length;let _=0;s>0&&s<g?t.errors.push(function $fe(){return new Q(3202,!1)}()):0==s&&(_=1/(g-1));const E=g-1,I=t.currentTime,T=t.currentAnimateTimings,S=T.duration;return h.forEach((L,O)=>{const H=_>0?O==E?1:_*O:o[O],oe=H*S;t.currentTime=I+T.delay+oe,T.duration=oe,this._validateStyleAst(L,t),L.offset=H,r.styles.push(L)}),r}visitReference(e,t){return{type:ot.Reference,animation:Vs(this,Dy(e.animation),t),options:Td(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:ot.AnimateChild,options:Td(e.options)}}visitAnimateRef(e,t){return{type:ot.AnimateRef,animation:this.visitReference(e.animation,t),options:Td(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function Spe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(bpe,"")),n=n.replace(/@\*/g,_T).replace(/@\w+/g,t=>_T+"-"+t.slice(1)).replace(/:animating/g,VO),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Ls(t.collectedStyles,t.currentQuerySelector,new Map);const a=Vs(this,Dy(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:ot.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Td(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Hfe(){return new Q(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:yT(e.timings,t.errors,!0);return{type:ot.Stagger,animation:Vs(this,Dy(e.animation),t),timings:r,options:null}}}class Ppe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Td(n){return n?(n={...n}).params&&(n.params=function Dpe(n){return n?{...n}:null}(n.params)):n={},n}function zO(n,e,t){return{duration:n,delay:e,easing:t}}function qO(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class IT{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const xpe=new RegExp(":enter","g"),Fpe=new RegExp(":leave","g");function GO(n,e,t,r,i,s=new Map,o=new Map,a,l,c=[]){return(new Lpe).buildKeyframes(n,e,t,r,i,s,o,a,l,c)}class Lpe{buildKeyframes(e,t,r,i,s,o,a,l,c,h=[]){c=c||new IT;const g=new WO(e,t,c,i,s,h,[]);g.options=l;const _=l.delay?El(l.delay):0;g.currentTimeline.delayNextStep(_),g.currentTimeline.setStyles([o],null,g.errors,l),Vs(this,r,g);const E=g.timelines.filter(I=>I.containsAnimation());if(E.length&&a.size){let I;for(let T=E.length-1;T>=0;T--){const S=E[T];if(S.element===t){I=S;break}}I&&!I.allowOnlyTimelineStyles()&&I.setStyles([a],null,g.errors,l)}return E.length?E.map(I=>I.buildKeyframes()):[qO(t,[],[],[],0,_,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:El(Py(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?El(r.duration):null,a=null!=r.delay?El(r.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Vs(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){i.previousNode.type==ot.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=wT);const o=El(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Vs(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?El(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Vs(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return yT(t.params?Py(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;s.type==ot.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?El(i.delay):0;s&&(t.previousNode.type===ot.Style||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=wT);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,h)=>{t.currentQueryIndex=h;const g=t.createSubContext(e.options,c);s&&g.delayNextStep(s),c===t.element&&(l=g.currentTimeline),Vs(this,e.animation,g),g.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,g.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const h=t.currentTimeline;l&&h.delayNextStep(l);const g=h.currentTime;Vs(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-g+(i.startTime-r.currentTimeline.startTime)}}const wT={};class WO{constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=wT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new TT(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=El(r.duration)),null!=r.delay&&(i.delay=El(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Py(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new WO(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=wT,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new Vpe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(xpe,"."+this._enterClassName)).replace(Fpe,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&0==a.length&&o.push(function zfe(n){return new Q(3014,!1)}()),a}}class TT{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new TT(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||al),this._currentKeyframe.set(t,al);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function Upe(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r??=e.keys();for(let s of r)t.set(s,al)}else for(let[s,o]of i)t.set(s,o)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=Py(l,s,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??al),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const c=new Map([...this._backFill,...a]);c.forEach((h,g)=>{"!"===h?e.add(g):h===al&&t.add(g)}),r||c.set("offset",l/this.duration),i.push(c)});const s=[...e.values()],o=[...t.values()];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return qO(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class Vpe extends TT{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,l=new Map(e[0]);l.set("offset",0),s.push(l);const c=new Map(e[0]);c.set("offset",f3(a)),s.push(c);const h=e.length-1;for(let g=1;g<=h;g++){let _=new Map(e[g]);const E=_.get("offset");_.set("offset",f3((t+E*r)/o)),s.push(_)}r=o,t=0,i="",e=s}return qO(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function f3(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}function p3(n,e,t,r,i,s,o,a,l,c,h,g,_){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:g,errors:_}}const KO={};class g3{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Bpe(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,l,c,h){const g=[],_=this.ast.options&&this.ast.options.params||KO,I=this.buildStyles(r,a&&a.params||KO,g),T=l&&l.params||KO,S=this.buildStyles(i,T,g),L=new Set,O=new Map,H=new Map,oe="void"===i,Te={params:m3(T,_),delay:this.ast.options?.delay},Re=h?[]:GO(e,t,this.ast.animation,s,o,I,S,Te,c,g);let k=0;return Re.forEach(P=>{k=Math.max(P.duration+P.delay,k)}),g.length?p3(t,this._triggerName,r,i,oe,I,S,[],[],O,H,k,g):(Re.forEach(P=>{const x=P.element,U=Ls(O,x,new Set);P.preStyleProps.forEach(G=>U.add(G));const j=Ls(H,x,new Set);P.postStyleProps.forEach(G=>j.add(G)),x!==t&&L.add(x)}),p3(t,this._triggerName,r,i,oe,I,S,Re,[...L.values()],O,H,k))}}function m3(n,e){const t={...e};return Object.entries(n).forEach(([r,i])=>{null!=i&&(t[r]=i)}),t}class jpe{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=m3(e,this.defaultParams);return this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Py(o,i,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),r.set(a,o)})}),r}}class Hpe{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new jpe(i.style,i.options&&i.options.params||{},r))}),_3(this.states,"true","1"),_3(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new g3(e,i,this.states))}),this.fallbackTransition=function zpe(n,e,t){return new g3(n,{type:ot.Transition,animation:{type:ot.Sequence,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function _3(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const qpe=new IT;class Gpe{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=HO(this._driver,t,r,[]);if(r.length)throw function Zfe(n){return new Q(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=e3(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=GO(this._driver,t,s,LO,gT,new Map,new Map,r,qpe,i),o.forEach(h=>{const g=Ls(a,h.element,new Map);h.postStyleProps.forEach(_=>g.set(_,null))})):(i.push(function Jfe(){return new Q(3300,!1)}()),o=[]),i.length)throw function Xfe(n){return new Q(3504,!1)}();a.forEach((h,g)=>{h.forEach((_,E)=>{h.set(E,this._driver.computeStyle(g,E,al))})});const c=xc(o.map(h=>{const g=a.get(h.element);return this._buildPlayer(h,new Map,g)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function epe(n){return new Q(3301,!1)}();return t}listen(e,t,r,i){const s=OO(t,"","","");return MO(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const y3="ng-animate-queued",QO="ng-animate-disabled",Zpe=[],v3={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Jpe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Vo="__ng_removed";class YO{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function nge(n){return n??null}(r?e.value:e),r){const{value:s,...o}=e;this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const My="void",ZO=new YO(My);class Xpe{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,io(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function tpe(n,e){return new Q(3302,!1)}();if(null==r||0==r.length)throw function npe(n){return new Q(3303,!1)}();if(!function rge(n){return"start"==n||"done"==n}(r))throw function rpe(n,e){return new Q(3400,!1)}();const s=Ls(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=Ls(this._engine.statesByElement,e,new Map);return a.has(t)||(io(e,mT),io(e,mT+"-"+t),a.set(t,ZO)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function ipe(n){return new Q(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new JO(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(io(e,mT),io(e,mT+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new YO(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=ZO),c.value!==My&&l.value===c.value){if(!function oge(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const T=[],S=s.matchStyles(l.value,l.params,T),L=s.matchStyles(c.value,c.params,T);T.length?this._engine.reportError(T):this._engine.afterFlush(()=>{wd(e,S),Sa(e,L)})}return}const _=Ls(this._engine.playersByElement,e,[]);_.forEach(T=>{T.namespaceId==this.id&&T.triggerName==t&&T.queued&&T.destroy()});let E=s.matchTransition(l.value,c.value,e,c.params),I=!1;if(!E){if(!i)return;E=s.fallbackTransition,I=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:E,fromState:l,toState:c,player:o,isFallbackTransition:I}),I||(io(e,y3),o.onStart(()=>{Dp(e,y3)})),o.onDone(()=>{let T=this.players.indexOf(o);T>=0&&this.players.splice(T,1);const S=this._engine.playersByElement.get(e);if(S){let L=S.indexOf(o);L>=0&&S.splice(L,1)}}),this.players.push(o),_.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,_T,!0);r.forEach(i=>{if(i[Vo])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const h=this.trigger(e,c,My,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&xc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers.get(o).fallbackTransition,c=r.get(o)||ZO,h=new YO(My),g=new JO(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:h,player:g,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Vo];(!s||s===v3)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){io(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=OO(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,MO(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class ege{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Xpe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=i.get(a);if(l){const c=r.indexOf(l);r.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(bT(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!bT(t))return;const s=t[Vo];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),io(e,QO)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Dp(e,QO))}removeNode(e,t,r){if(bT(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Vo]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return bT(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,_T,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,VO,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return xc(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Vo];if(t&&t.setForRemoval){if(e[Vo]=v3,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(QO)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)io(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?xc(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function spe(n){return new Q(3402,!1)}()}_flushAnimations(e,t){const r=new IT,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,h=new Set;this.disabledNodes.forEach(ze=>{h.add(ze);const We=this.driver.query(ze,".ng-animate-queued",!0);for(let Ze=0;Ze<We.length;Ze++)h.add(We[Ze])});const g=this.bodyNode,_=Array.from(this.statesByElement.keys()),E=I3(_,this.collectedEnterElements),I=new Map;let T=0;E.forEach((ze,We)=>{const Ze=LO+T++;I.set(We,Ze),ze.forEach(Ot=>io(Ot,Ze))});const S=[],L=new Set,O=new Set;for(let ze=0;ze<this.collectedLeaveElements.length;ze++){const We=this.collectedLeaveElements[ze],Ze=We[Vo];Ze&&Ze.setForRemoval&&(S.push(We),L.add(We),Ze.hasAnimation?this.driver.query(We,".ng-star-inserted",!0).forEach(Ot=>L.add(Ot)):O.add(We))}const H=new Map,oe=I3(_,Array.from(L));oe.forEach((ze,We)=>{const Ze=gT+T++;H.set(We,Ze),ze.forEach(Ot=>io(Ot,Ze))}),e.push(()=>{E.forEach((ze,We)=>{const Ze=I.get(We);ze.forEach(Ot=>Dp(Ot,Ze))}),oe.forEach((ze,We)=>{const Ze=H.get(We);ze.forEach(Ot=>Dp(Ot,Ze))}),S.forEach(ze=>{this.processLeaveNode(ze)})});const Te=[],Re=[];for(let ze=this._namespaceList.length-1;ze>=0;ze--)this._namespaceList[ze].drainQueuedTransitions(t).forEach(Ze=>{const Ot=Ze.player,Cr=Ze.element;if(Te.push(Ot),this.collectedEnterElements.length){const cr=Cr[Vo];if(cr&&cr.setForMove){if(cr.previousTriggersValues&&cr.previousTriggersValues.has(Ze.triggerName)){const wl=cr.previousTriggersValues.get(Ze.triggerName),Is=this.statesByElement.get(Ze.element);if(Is&&Is.has(Ze.triggerName)){const Tl=Is.get(Ze.triggerName);Tl.value=wl,Is.set(Ze.triggerName,Tl)}}return void Ot.destroy()}}const co=!g||!this.driver.containsElement(g,Cr),lr=H.get(Cr),Vn=I.get(Cr),Un=this._buildInstruction(Ze,r,Vn,lr,co);if(Un.errors&&Un.errors.length)return void Re.push(Un);if(co)return Ot.onStart(()=>wd(Cr,Un.fromStyles)),Ot.onDestroy(()=>Sa(Cr,Un.toStyles)),void i.push(Ot);if(Ze.isFallbackTransition)return Ot.onStart(()=>wd(Cr,Un.fromStyles)),Ot.onDestroy(()=>Sa(Cr,Un.toStyles)),void i.push(Ot);const Wc=[];Un.timelines.forEach(cr=>{cr.stretchStartingKeyframe=!0,this.disabledNodes.has(cr.element)||Wc.push(cr)}),Un.timelines=Wc,r.append(Cr,Un.timelines),o.push({instruction:Un,player:Ot,element:Cr}),Un.queriedElements.forEach(cr=>Ls(a,cr,[]).push(Ot)),Un.preStyleProps.forEach((cr,wl)=>{if(cr.size){let Is=l.get(wl);Is||l.set(wl,Is=new Set),cr.forEach((Tl,Kc)=>Is.add(Kc))}}),Un.postStyleProps.forEach((cr,wl)=>{let Is=c.get(wl);Is||c.set(wl,Is=new Set),cr.forEach((Tl,Kc)=>Is.add(Kc))})});if(Re.length){const ze=[];Re.forEach(We=>{ze.push(function ope(n,e){return new Q(3505,!1)}())}),Te.forEach(We=>We.destroy()),this.reportError(ze)}const k=new Map,P=new Map;o.forEach(ze=>{const We=ze.element;r.has(We)&&(P.set(We,We),this._beforeAnimationBuild(ze.player.namespaceId,ze.instruction,k))}),i.forEach(ze=>{const We=ze.element;this._getPreviousPlayers(We,!1,ze.namespaceId,ze.triggerName,null).forEach(Ot=>{Ls(k,We,[]).push(Ot),Ot.destroy()})});const x=S.filter(ze=>T3(ze,l,c)),U=new Map;C3(U,this.driver,O,c,al).forEach(ze=>{T3(ze,l,c)&&x.push(ze)});const G=new Map;E.forEach((ze,We)=>{C3(G,this.driver,new Set(ze),l,"!")}),x.forEach(ze=>{const We=U.get(ze),Ze=G.get(ze);U.set(ze,new Map([...We?.entries()??[],...Ze?.entries()??[]]))});const F=[],lo=[],Gc={};o.forEach(ze=>{const{element:We,player:Ze,instruction:Ot}=ze;if(r.has(We)){if(h.has(We))return Ze.onDestroy(()=>Sa(We,Ot.toStyles)),Ze.disabled=!0,Ze.overrideTotalTime(Ot.totalTime),void i.push(Ze);let Cr=Gc;if(P.size>1){let lr=We;const Vn=[];for(;lr=lr.parentNode;){const Un=P.get(lr);if(Un){Cr=Un;break}Vn.push(lr)}Vn.forEach(Un=>P.set(Un,Cr))}const co=this._buildAnimation(Ze.namespaceId,Ot,k,s,G,U);if(Ze.setRealPlayer(co),Cr===Gc)F.push(Ze);else{const lr=this.playersByElement.get(Cr);lr&&lr.length&&(Ze.parentPlayer=xc(lr)),i.push(Ze)}}else wd(We,Ot.fromStyles),Ze.onDestroy(()=>Sa(We,Ot.toStyles)),lo.push(Ze),h.has(We)&&i.push(Ze)}),lo.forEach(ze=>{const We=s.get(ze.element);if(We&&We.length){const Ze=xc(We);ze.setRealPlayer(Ze)}}),i.forEach(ze=>{ze.parentPlayer?ze.syncPlayerEvents(ze.parentPlayer):ze.destroy()});for(let ze=0;ze<S.length;ze++){const We=S[ze],Ze=We[Vo];if(Dp(We,gT),Ze&&Ze.hasAnimation)continue;let Ot=[];if(a.size){let co=a.get(We);co&&co.length&&Ot.push(...co);let lr=this.driver.query(We,VO,!0);for(let Vn=0;Vn<lr.length;Vn++){let Un=a.get(lr[Vn]);Un&&Un.length&&Ot.push(...Un)}}const Cr=Ot.filter(co=>!co.destroyed);Cr.length?ige(this,We,Cr):this.processLeaveNode(We)}return S.length=0,F.forEach(ze=>{this.players.push(ze),ze.onDone(()=>{ze.destroy();const We=this.players.indexOf(ze);this.players.splice(We,1)}),ze.play()}),F}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==My;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,h=c!==s,g=Ls(r,c,[]);this._getPreviousPlayers(c,h,o,a,t.toState).forEach(E=>{const I=E.getRealPlayer();I.beforeDestroy&&I.beforeDestroy(),E.destroy(),g.push(E)})}wd(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,l=t.element,c=[],h=new Set,g=new Set,_=t.timelines.map(I=>{const T=I.element;h.add(T);const S=T[Vo];if(S&&S.removedBeforeQueried)return new F_(I.duration,I.delay);const L=T!==l,O=function sge(n){const e=[];return w3(n,e),e}((r.get(T)||Zpe).map(k=>k.getRealPlayer())).filter(k=>!!k.element&&k.element===T),H=s.get(T),oe=o.get(T),Te=e3(this._normalizer,I.keyframes,H,oe),Re=this._buildPlayer(I,Te,O);if(I.subTimeline&&i&&g.add(T),L){const k=new JO(e,a,T);k.setRealPlayer(Re),c.push(k)}return Re});c.forEach(I=>{Ls(this.playersByQueriedElement,I.element,[]).push(I),I.onDone(()=>function tge(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,I.element,I))}),h.forEach(I=>io(I,o3));const E=xc(_);return E.onDestroy(()=>{h.forEach(I=>Dp(I,o3)),Sa(l,t.toStyles)}),g.forEach(I=>{Ls(i,I,[]).push(E)}),E}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new F_(e.duration,e.delay)}}class JO{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new F_,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>MO(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ls(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function bT(n){return n&&1===n.nodeType}function E3(n,e){const t=n.style.display;return n.style.display=e??"none",t}function C3(n,e,t,r,i){const s=[];t.forEach(l=>s.push(E3(l)));const o=[];r.forEach((l,c)=>{const h=new Map;l.forEach(g=>{const _=e.computeStyle(c,g,i);h.set(g,_),(!_||0==_.length)&&(c[Vo]=Jpe,o.push(c))}),n.set(c,h)});let a=0;return t.forEach(l=>E3(l,s[a++])),o}function I3(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:i.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function io(n,e){n.classList?.add(e)}function Dp(n,e){n.classList?.remove(e)}function ige(n,e,t){xc(t).onDone(()=>n.processLeaveNode(e))}function w3(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof HH?w3(r.players,e):e.push(r)}}function T3(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class Ry{constructor(e,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new ege(e.body,t,r),this._timelineEngine=new Gpe(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],h=HO(this._driver,s,l,[]);if(l.length)throw function Qfe(n,e){return new Q(3404,!1)}();a=function $pe(n,e,t){return new Hpe(n,e,t)}(i,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=t3(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=t3(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}class Oy{static#e=this.initialStylesByElement=new WeakMap;constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=Oy.initialStylesByElement.get(e);i||Oy.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&Sa(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Sa(this._element,this._initialStyles),this._endStyles&&(Sa(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Oy.initialStylesByElement.delete(this._element),this._startStyles&&(wd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wd(this._element,this._endStyles),this._endStyles=null),Sa(this._element,this._initialStyles),this._state=3)}}function XO(n){let e=null;return n.forEach((t,r)=>{(function lge(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class b3{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:$O(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class A3{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return r3(e,t)}getParentElement(e){return NO(e)}query(e,t,r){return i3(e,t,r)}computeStyle(e,t,r){return $O(e,t)}animate(e,t,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const c=new Map,h=o.filter(E=>E instanceof b3);(function vpe(n,e){return 0===n||0===e})(r,i)&&h.forEach(E=>{E.currentSnapshot.forEach((I,T)=>c.set(T,I))});let g=function mpe(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}(t).map(E=>new Map(E));g=function Epe(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,$O(n,a)))}}return e}(e,g,c);const _=function age(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=XO(e[0]),e.length>1&&(r=XO(e[e.length-1]))):e instanceof Map&&(t=XO(e)),t||r?new Oy(n,t,r):null}(e,g);return new b3(e,g,l,_)}}const S3="@.disabled";class D3{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==S3?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class cge extends D3{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==S3?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function uge(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function dge(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}class hge{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,s)=>{const o=s?.parentNode(i);o&&s.removeChild(o,i)}}createRenderer(e,t){const i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){const c=this._rendererCache;let h=c.get(i);return h||(h=new D3("",i,this.engine,()=>c.delete(i)),c.set(i,h)),h}const s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);const a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(s,o,e,c.name,c)};return t.data.animation.forEach(a),new cge(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId)return void this._zone.run(()=>t(r));const i=this._animationCallbacksBuffer;0==i.length&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const P3=[{provide:FO,useFactory:function pge(){return new c3}},{provide:Ry,useClass:(()=>{class n extends Ry{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(ge(Rs),ge(kO),ge(FO))};static#t=this.\u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})()},{provide:DC,useFactory:function gge(n,e,t){return new hge(n,e,t)},deps:[UD,Ry,Rt]}],eN=[{provide:kO,useFactory:()=>new A3},{provide:g1,useValue:"BrowserAnimations"},...P3],M3=[{provide:kO,useClass:xO},{provide:g1,useValue:"NoopAnimations"},...P3];let mge=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?M3:eN}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=cs({type:n});static#n=this.\u0275inj=vi({providers:eN,imports:[gj]})}return n})();const _ge_firebaseConfig={apiKey:"AIzaSyC9rn4K-vmkdd8KnJoEFpNolJu-oXO3GFY",authDomain:"boblovers2-815af.firebaseapp.com",projectId:"boblovers2-815af",storageBucket:"boblovers2-815af.firebasestorage.app",messagingSenderId:"281124227593",appId:"1:281124227593:web:13804a8453f5931f8806d8",measurementId:"G-WTYRTMW5H3"},R3="@firebase/database";let tN="";function nN(n){tN=n}class Ege{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,A.As)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,A.$L)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Cge{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,A.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const N3=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ege(e)}}catch{}return new Cge},bd=N3("localStorage"),rN=N3("sessionStorage"),Pp=new xs.Vy("@firebase/database"),x3=function(){let n=1;return function(){return n++}}(),k3=function(n){const e=(0,A.kj)(n),t=new A.gz;t.update(e);const r=t.digest();return A.K3.encodeByteArray(r)},Ny=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Ny.apply(null,r):e+="object"==typeof r?(0,A.As)(r):r,e+=" "}return e};let Ad=null,F3=!0;const L3=function(n,e){(0,A.vA)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Pp.logLevel=xs.$b.VERBOSE,Ad=Pp.log.bind(Pp),e&&rN.set("logging_enabled",!0)):"function"==typeof n?Ad=n:(Ad=null,rN.remove("logging_enabled"))},ti=function(...n){if(!0===F3&&(F3=!1,null===Ad&&!0===rN.get("logging_enabled")&&L3(!0)),Ad){const e=Ny.apply(null,n);Ad(e)}},xy=function(n){return function(...e){ti(n,...e)}},iN=function(...n){const e="FIREBASE INTERNAL ERROR: "+Ny(...n);Pp.error(e)},Da=function(...n){const e=`FIREBASE FATAL ERROR: ${Ny(...n)}`;throw Pp.error(e),new Error(e)},xi=function(...n){const e="FIREBASE WARNING: "+Ny(...n);Pp.warn(e)},ST=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},kc="[MIN_NAME]",Cl="[MAX_NAME]",Sd=function(n,e){if(n===e)return 0;if(n===kc||e===Cl)return-1;if(e===kc||n===Cl)return 1;{const t=B3(n),r=B3(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Tge=function(n,e){return n===e?0:n<e?-1:1},ky=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,A.As)(e))},sN=function(n){if("object"!=typeof n||null===n)return(0,A.As)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,A.As)(e[r]),t+=":",t+=sN(n[e[r]]);return t+="}",t},V3=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ni(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const U3=function(n){(0,A.vA)(!ST(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const h=c.join("");let g="";for(l=0;l<64;l+=8){let _=parseInt(h.substr(l,8),2).toString(16);1===_.length&&(_="0"+_),g+=_}return g.toLowerCase()},Dge=new RegExp("^-?(0*)\\d{1,10}$"),B3=function(n){if(Dge.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Mp=function(n){try{n()}catch(e){setTimeout(()=>{throw xi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Fy=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Oge{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){xi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Nge{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ti("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xi(e)}}let Ly=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const q3=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,K3="websocket",Q3="long_polling";class aN{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bd.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&bd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Y3(n,e,t){let r;if((0,A.vA)("string"==typeof e,"typeof type must == string"),(0,A.vA)("object"==typeof t,"typeof params must == object"),e===K3)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==Q3)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function xge(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ni(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class kge{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,A.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,A.A4)(this.counters_)}}const lN={},cN={};function uN(n){const e=n.toString();return lN[e]||(lN[e]=new kge),lN[e]}class Lge{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Mp(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Fc{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=xy(e),this.stats_=uN(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),Y3(t,Q3,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Lge(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,A.$g)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new dN((...s)=>{const[o,a,l,c,h]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&q3.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Fc.forceAllow_=!0}static forceDisallow(){Fc.forceDisallow_=!0}static isAvailable(){return!((0,A.$g)()||!Fc.forceAllow_&&(Fc.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,A.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,A.KA)(t),i=V3(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,A.$g)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,A.As)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class dN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,A.$g)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=x3(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=dN.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ti("frame writing exception"),a.stack&&ti(a.stack),ti(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ti("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,A.$g)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ti("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let PT=null;typeof MozWebSocket<"u"?PT=MozWebSocket:typeof WebSocket<"u"&&(PT=WebSocket);let Rp=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=xy(this.connId),this.stats_=uN(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return!(0,A.$g)()&&typeof location<"u"&&location.hostname&&q3.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),Y3(t,K3,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bd.set("previous_websocket_failure",!0);try{let i;if((0,A.$g)()){i={headers:{"User-Agent":`Firebase/5/${tN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new PT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==PT&&!n.forceDisallow_}static previouslyFailed(){return bd.isInMemoryStorage||!0===bd.get("previous_websocket_failure")}markConnectionHealthy(){bd.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,A.$L)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,A.vA)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,A.As)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=V3(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),r9=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Fc,Rp]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Rp&&Rp.isAvailable();let i=r&&!Rp.previouslyFailed();if(t.webSocketOnly&&(r||xi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Rp];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class u9{constructor(e,t,r,i,s,o,a,l,c,h){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=xy("c:"+this.id+":"),this.transportManager_=new r9(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Fy(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ky("t",e),r=ky("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ky("t",e),r=ky("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ky("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?iN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):iN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&xi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Fy(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Fy(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class d9{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class h9{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,A.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,A.vA)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class MT extends h9{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,A.jZ)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new MT}getInitialEvent(e){return(0,A.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class sn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Zt(){return new sn("")}function bt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Lc(n){return n.pieces_.length-n.pieceNum_}function Cn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new sn(n.pieces_,e)}function fN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Vy(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function g9(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new sn(e,0)}function Wn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof sn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new sn(t,0)}function At(n){return n.pieceNum_>=n.pieces_.length}function es(n,e){const t=bt(n),r=bt(e);if(null===t)return e;if(t===r)return es(Cn(n),Cn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function sme(n,e){const t=Vy(n,0),r=Vy(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Sd(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function pN(n,e){if(Lc(n)!==Lc(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function so(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Lc(n)>Lc(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class ome{constructor(e,t){this.errorPrefix_=t,this.parts_=Vy(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,A.OE)(this.parts_[r]);m9(this)}}function m9(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Dd(n))}function Dd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class gN extends h9{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new gN}getInitialEvent(e){return(0,A.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Uy=1e3;let OT,Pd=(()=>{class n extends d9{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=xy("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Uy,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!(0,A.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");gN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&MT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_((0,A.As)(o)),(0,A.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new A.cY,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,A.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,A.vA)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,h=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==h&&this.removeListen_(i,s),t.onComplete&&t.onComplete(h,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,A.gR)(t,"w")){const i=(0,A.yw)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();xi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,A.qc)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,A.Cv)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,A.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,A.As)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):iN("Unrecognized action received from server: "+(0,A.As)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,A.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Uy,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Uy,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Uy),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,se.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const h=function(){c?c.close():(l=!0,s())};t.realtime_={close:h,sendRequest:function(E){(0,A.vA)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(E)}};const _=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[E,I]=yield Promise.all([t.authTokenProvider_.getToken(_),t.appCheckTokenProvider_.getToken(_)]);l?ti("getToken() completed but was canceled"):(ti("getToken() completed. Creating connection."),t.authToken_=E&&E.accessToken,t.appCheckToken_=I&&I.token,c=new u9(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,T=>{xi(T+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(E){t.log_("Failed to get token: "+E),l||(t.repoInfo_.nodeAdmin&&xi(E),h())}}})()}interrupt(t){ti("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ti("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,A.Im)(this.interruptReasons_)&&(this.reconnectDelay_=Uy,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>sN(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new sn(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){ti("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ti("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,A.$g)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+tN.replace(/\./g,"-")]=1,(0,A.jZ)()?t["framework.cordova"]=1:(0,A.lV)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=MT.getInstance().currentlyOnline();return(0,A.Im)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Dt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Dt(e,t)}}class RT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Dt(kc,e),i=new Dt(kc,t);return 0!==this.compare(r,i)}minPost(){return Dt.MIN}}class v9 extends RT{static get __EMPTY_NODE(){return OT}static set __EMPTY_NODE(e){OT=e}compare(e,t){return Sd(e.name,t.name)}isDefinedOn(e){throw(0,A.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Dt.MIN}maxPost(){return new Dt(Cl,OT)}makePost(e,t){return(0,A.vA)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Dt(e,OT)}toString(){return".key"}}const Pa=new v9;class NT{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let _N,Uo=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Es.EMPTY_NODE,this.right=o??Es.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Es.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Es.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Es{constructor(e,t=Es.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Es(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Uo.BLACK,null,null))}remove(e){return new Es(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Uo.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new NT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new NT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new NT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new NT(this.root_,null,this.comparator_,!0,e)}}function pme(n,e){return Sd(n.name,e.name)}function mN(n,e){return Sd(n,e)}Es.EMPTY_NODE=new class fme{copy(e,t,r,i,s){return this}insert(e,t,r){return new Uo(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const E9=function(n){return"number"==typeof n?"number:"+U3(n):"string:"+n},C9=function(n){if(n.isLeafNode()){const e=n.val();(0,A.vA)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,A.gR)(e,".sv"),"Priority must be a string or number.")}else(0,A.vA)(n===_N||n.isEmpty(),"priority of unexpected type.");(0,A.vA)(n===_N||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let I9,w9,T9,Op=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,A.vA)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),C9(this.priorityNode_)}static set __childrenNodeConstructor(t){I9=t}static get __childrenNodeConstructor(){return I9}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return At(t)?this:".priority"===bt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=bt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,A.vA)(".priority"!==i||1===Lc(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Cn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+E9(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?U3(this.value_):this.value_,this.lazyHash_=k3(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,A.vA)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return(0,A.vA)(s>=0,"Unknown leaf type: "+r),(0,A.vA)(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Rn=new class yme extends RT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Sd(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Dt.MIN}maxPost(){return new Dt(Cl,new Op("[PRIORITY-POST]",T9))}makePost(e,t){const r=w9(e);return new Dt(t,new Op("[PRIORITY-POST]",r))}toString(){return".priority"}},vme=Math.log(2);class Eme{constructor(e){this.count=parseInt(Math.log(e+1)/vme,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const xT=function(n,e,t,r){n.sort(e);const i=function(l,c){const h=c-l;let g,_;if(0===h)return null;if(1===h)return g=n[l],_=t?t(g):g,new Uo(_,g.node,Uo.BLACK,null,null);{const E=parseInt(h/2,10)+l,I=i(l,E),T=i(E+1,c);return g=n[E],_=t?t(g):g,new Uo(_,g.node,Uo.BLACK,I,T)}},a=function(l){let c=null,h=null,g=n.length;const _=function(I,T){const S=g-I,L=g;g-=I;const O=i(S+1,L),H=n[S],oe=t?t(H):H;E(new Uo(oe,H.node,T,null,O))},E=function(I){c?(c.left=I,c=I):(h=I,c=I)};for(let I=0;I<l.count;++I){const T=l.nextBitIsOne(),S=Math.pow(2,l.count-(I+1));T?_(S,Uo.BLACK):(_(S,Uo.BLACK),_(S,Uo.RED))}return h}(new Eme(n.length));return new Es(r||e,a)};let yN;const Np={};class Il{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,A.vA)(Np&&Rn,"ChildrenNode.ts has not been loaded"),yN=yN||new Il({".priority":Np},{".priority":Rn}),yN}get(e){const t=(0,A.yw)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Es?t:null}hasIndex(e){return(0,A.gR)(this.indexSet_,e.toString())}addIndex(e,t){(0,A.vA)(e!==Pa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(Dt.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?xT(r,e.getCompare()):Np;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new Il(h,c)}addToIndexes(e,t){const r=(0,A.kH)(this.indexes_,(i,s)=>{const o=(0,A.yw)(this.indexSet_,s);if((0,A.vA)(o,"Missing index implementation for "+s),i===Np){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(Dt.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),xT(a,o.getCompare())}return Np}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new Dt(e.name,a))),l.insert(e,e.node)}});return new Il(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,A.kH)(this.indexes_,i=>{if(i===Np)return i;{const s=t.get(e.name);return s?i.remove(new Dt(e.name,s)):i}});return new Il(r,this.indexSet_)}}let By,ft=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&C9(this.priorityNode_),this.children_.isEmpty()&&(0,A.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return By||(By=new n(new Es(mN),null,Il.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||By}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?By:r}}getChild(t){const r=bt(t);return null===r?this:this.getImmediateChild(r).getChild(Cn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,A.vA)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Dt(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?By:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=bt(t);if(null===i)return r;{(0,A.vA)(".priority"!==bt(t)||1===Lc(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Cn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(Rn,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+E9(this.getPriority().val())+":"),this.forEachChild(Rn,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":k3(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new Dt(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Dt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Dt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Dt.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Dt.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===jy?-1:0}withIndex(t){if(t===Pa||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Pa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Rn),s=r.getIterator(Rn);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===Pa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const jy=new class Cme extends ft{constructor(){super(new Es(mN),ft.EMPTY_NODE,Il.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ft.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Dt,{MIN:{value:new Dt(kc,ft.EMPTY_NODE)},MAX:{value:new Dt(Cl,jy)}}),v9.__EMPTY_NODE=ft.EMPTY_NODE,Op.__childrenNodeConstructor=ft,function gme(n){_N=n}(jy),function _me(n){T9=n}(jy);const Ime=!0;function tr(n,e=null){if(null===n)return ft.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,A.vA)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Op(n,tr(e));if(n instanceof Array||!Ime){let t=ft.EMPTY_NODE;return ni(n,(r,i)=>{if((0,A.gR)(n,r)&&"."!==r.substring(0,1)){const s=tr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(tr(e))}{const t=[];let r=!1;if(ni(n,(o,a)=>{if("."!==o.substring(0,1)){const l=tr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new Dt(o,l)))}}),0===t.length)return ft.EMPTY_NODE;const s=xT(t,pme,o=>o.name,mN);if(r){const o=xT(t,Rn.getCompare());return new ft(s,tr(e),new Il({".priority":o},{".priority":Rn}))}return new ft(s,tr(e),Il.Default)}}!function mme(n){w9=n}(tr);class vN extends RT{constructor(e){super(),this.indexPath_=e,(0,A.vA)(!At(e)&&".priority"!==bt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Sd(e.name,t.name):s}makePost(e,t){const r=tr(e),i=ft.EMPTY_NODE.updateChild(this.indexPath_,r);return new Dt(t,i)}maxPost(){const e=ft.EMPTY_NODE.updateChild(this.indexPath_,jy);return new Dt(Cl,e)}toString(){return Vy(this.indexPath_,0).join("/")}}const EN=new class wme extends RT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Sd(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Dt.MIN}maxPost(){return Dt.MAX}makePost(e,t){const r=tr(e);return new Dt(t,r)}toString(){return".value"}};function b9(n){return{type:"value",snapshotNode:n}}function xp(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function $y(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Hy(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class CN{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){(0,A.vA)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange($y(t,a)):(0,A.vA)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(xp(t,r)):o.trackChildChange(Hy(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Rn,(i,s)=>{t.hasChild(i)||r.trackChildChange($y(i,s))}),t.isLeafNode()||t.forEachChild(Rn,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Hy(i,s,o))}else r.trackChildChange(xp(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?ft.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class zy{constructor(e){this.indexedFilter_=new CN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=zy.getStartPost_(e),this.endPost_=zy.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new Dt(t,r))||(r=ft.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=ft.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(ft.EMPTY_NODE);const s=this;return t.forEachChild(Rn,(o,a)=>{s.matches(new Dt(o,a))||(i=i.updateImmediateChild(o,ft.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class bme{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new zy(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new Dt(t,r))||(r=ft.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=ft.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=ft.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(ft.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,ft.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const g=this.index_.getCompare();o=(_,E)=>g(E,_)}else o=this.index_.getCompare();const a=e;(0,A.vA)(a.numChildren()===this.limit_,"");const l=new Dt(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(t)){const g=a.getImmediateChild(t);let _=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=_&&(_.name===t||a.hasChild(_.name));)_=i.getChildAfterChild(this.index_,_,this.reverse_);const E=null==_?1:o(_,l);if(h&&!r.isEmpty()&&E>=0)return s?.trackChildChange(Hy(t,r,g)),a.updateImmediateChild(t,r);{s?.trackChildChange($y(t,g));const T=a.updateImmediateChild(t,ft.EMPTY_NODE);return null!=_&&this.rangedFilter_.matches(_)?(s?.trackChildChange(xp(_.name,_.node)),T.updateImmediateChild(_.name,_.node)):T}}return r.isEmpty()?e:h&&o(c,l)>=0?(null!=s&&(s.trackChildChange($y(c.name,c.node)),s.trackChildChange(xp(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,ft.EMPTY_NODE)):e}}class kT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,A.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,A.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:kc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,A.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,A.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Cl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,A.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Rn}copy(){const e=new kT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function IN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function wN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function FT(n,e){const t=n.copy();return t.index_=e,t}function A9(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Rn?t="$priority":n.index_===EN?t="$value":n.index_===Pa?t="$key":((0,A.vA)(n.index_ instanceof vN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,A.As)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,A.As)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,A.As)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,A.As)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,A.As)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function S9(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Rn&&(e.i=n.index_.toString()),e}class LT extends d9{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=xy("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,A.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=LT.getListenId_(e,r),a={};this.listens_[o]=a;const l=A9(e._queryParams);this.restRequest_(s+".json",l,(c,h)=>{let g=h;if(404===c&&(g=null,c=null),null===c&&this.onDataUpdate_(s,g,!1,r),(0,A.yw)(this.listens_,o)===a){let _;_=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(_,null)}})}unlisten(e,t){const r=LT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=A9(e._queryParams),r=e._path.toString(),i=new A.cY;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,A.Am)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,A.$L)(a.responseText)}catch{xi("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&xi("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class Rme{constructor(){this.rootNode_=ft.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function VT(){return{value:null,children:new Map}}function kp(n,e,t){if(At(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=bt(e);n.children.has(r)||n.children.set(r,VT()),kp(n.children.get(r),e=Cn(e),t)}}function TN(n,e){if(At(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Rn,(r,i)=>{kp(n,new sn(r),i)}),TN(n,e)}}if(n.children.size>0){const t=bt(e);return e=Cn(e),n.children.has(t)&&TN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function bN(n,e,t){null!==n.value?t(e,n.value):function Ome(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{bN(i,new sn(e.toString()+"/"+r),t)})}class Nme{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ni(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Fme{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Nme(e);const r=1e4+2e4*Math.random();Fy(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ni(e,(i,s)=>{s>0&&(0,A.gR)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Fy(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ma=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Ma||{});function DN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class UT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ma.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(At(this.path)){if(null!=this.affectedTree.value)return(0,A.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new sn(e));return new UT(Zt(),t,this.revert)}}return(0,A.vA)(bt(this.path)===e,"operationForChild called for unrelated child."),new UT(Cn(this.path),this.affectedTree,this.revert)}}class qy{constructor(e,t){this.source=e,this.path=t,this.type=Ma.LISTEN_COMPLETE}operationForChild(e){return At(this.path)?new qy(this.source,Zt()):new qy(this.source,Cn(this.path))}}class Md{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ma.OVERWRITE}operationForChild(e){return At(this.path)?new Md(this.source,Zt(),this.snap.getImmediateChild(e)):new Md(this.source,Cn(this.path),this.snap)}}class Fp{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ma.MERGE}operationForChild(e){if(At(this.path)){const t=this.children.subtree(new sn(e));return t.isEmpty()?null:t.value?new Md(this.source,Zt(),t.value):new Fp(this.source,Zt(),t)}return(0,A.vA)(bt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Fp(this.source,Cn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Vc{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(At(e))return this.isFullyInitialized()&&!this.filtered_;const t=bt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Lme{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Gy(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function Bme(n,e,t){if(null==e.childName||null==t.childName)throw(0,A.Hk)("Should only compare child_ events.");const r=new Dt(e.childName,e.snapshotNode),i=new Dt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function Ume(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function BT(n,e){return{eventCache:n,serverCache:e}}function Wy(n,e,t,r){return BT(new Vc(e,t,r),n.serverCache)}function P9(n,e,t,r){return BT(n.eventCache,new Vc(e,t,r))}function jT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Rd(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let PN;class On{constructor(e,t=(()=>(PN||(PN=new Es(Tge)),PN))()){this.value=e,this.children=t}static fromObject(e){let t=new On(null);return ni(e,(r,i)=>{t=t.set(new sn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Zt(),value:this.value};if(At(e))return null;{const r=bt(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Cn(e),t);return null!=s?{path:Wn(new sn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(At(e))return this;{const t=bt(e),r=this.children.get(t);return null!==r?r.subtree(Cn(e)):new On(null)}}set(e,t){if(At(e))return new On(t,this.children);{const r=bt(e),s=(this.children.get(r)||new On(null)).set(Cn(e),t),o=this.children.insert(r,s);return new On(this.value,o)}}remove(e){if(At(e))return this.children.isEmpty()?new On(null):new On(null,this.children);{const t=bt(e),r=this.children.get(t);if(r){const i=r.remove(Cn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new On(null):new On(this.value,s)}return this}}get(e){if(At(e))return this.value;{const t=bt(e),r=this.children.get(t);return r?r.get(Cn(e)):null}}setTree(e,t){if(At(e))return t;{const r=bt(e),s=(this.children.get(r)||new On(null)).setTree(Cn(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new On(this.value,o)}}fold(e){return this.fold_(Zt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Wn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Zt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(At(e))return null;{const s=bt(e),o=this.children.get(s);return o?o.findOnPath_(Cn(e),Wn(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Zt(),t)}foreachOnPath_(e,t,r){if(At(e))return this;{this.value&&r(t,this.value);const i=bt(e),s=this.children.get(i);return s?s.foreachOnPath_(Cn(e),Wn(t,i),r):new On(null)}}foreach(e){this.foreach_(Zt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Wn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Bo{constructor(e){this.writeTree_=e}static empty(){return new Bo(new On(null))}}function Ky(n,e,t){if(At(e))return new Bo(new On(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=es(i,e);return s=s.updateChild(o,t),new Bo(n.writeTree_.set(i,s))}{const i=new On(t),s=n.writeTree_.setTree(e,i);return new Bo(s)}}}function MN(n,e,t){let r=n;return ni(t,(i,s)=>{r=Ky(r,Wn(e,i),s)}),r}function M9(n,e){if(At(e))return Bo.empty();{const t=n.writeTree_.setTree(e,new On(null));return new Bo(t)}}function RN(n,e){return null!=Od(n,e)}function Od(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(es(t.path,e)):null}function R9(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Rn,(r,i)=>{e.push(new Dt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Dt(r,i.value))}),e}function Uc(n,e){if(At(e))return n;{const t=Od(n,e);return new Bo(null!=t?new On(t):n.writeTree_.subtree(e))}}function ON(n){return n.writeTree_.isEmpty()}function Lp(n,e){return O9(Zt(),n.writeTree_,e)}function O9(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,A.vA)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=O9(Wn(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Wn(n,".priority"),r)),t}}function $T(n,e){return L9(e,n)}function Gme(n,e){if(n.snap)return so(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&so(Wn(n.path,t),e))return!0;return!1}function Kme(n){return n.visible}function N9(n,e,t){let r=Bo.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)so(t,o)?(a=es(t,o),r=Ky(r,a,s.snap)):so(o,t)&&(a=es(o,t),r=Ky(r,Zt(),s.snap.getChild(a)));else{if(!s.children)throw(0,A.Hk)("WriteRecord should have .snap or .children");if(so(t,o))a=es(t,o),r=MN(r,a,s.children);else if(so(o,t))if(a=es(o,t),At(a))r=MN(r,Zt(),s.children);else{const l=(0,A.yw)(s.children,bt(a));if(l){const c=l.getChild(Cn(a));r=Ky(r,Zt(),c)}}}}}return r}function x9(n,e,t,r,i){if(r||i){const s=Uc(n.visibleWrites,e);return!i&&ON(s)?t:i||null!=t||RN(s,Zt())?Lp(N9(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(so(c.path,e)||so(e,c.path))},e),t||ft.EMPTY_NODE):null}{const s=Od(n.visibleWrites,e);if(null!=s)return s;{const o=Uc(n.visibleWrites,e);return ON(o)?t:null!=t||RN(o,Zt())?Lp(o,t||ft.EMPTY_NODE):null}}}function HT(n,e,t,r){return x9(n.writeTree,n.treePath,e,t,r)}function NN(n,e){return function Qme(n,e,t){let r=ft.EMPTY_NODE;const i=Od(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Rn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=Uc(n.visibleWrites,e);return t.forEachChild(Rn,(o,a)=>{const l=Lp(Uc(s,new sn(o)),a);r=r.updateImmediateChild(o,l)}),R9(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return R9(Uc(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function k9(n,e,t,r){return function Yme(n,e,t,r,i){(0,A.vA)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Wn(e,t);if(RN(n.visibleWrites,s))return null;{const o=Uc(n.visibleWrites,s);return ON(o)?i.getChild(t):Lp(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function zT(n,e){return function Jme(n,e){return Od(n.visibleWrites,e)}(n.writeTree,Wn(n.treePath,e))}function xN(n,e,t){return function Zme(n,e,t,r){const i=Wn(e,t),s=Od(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Lp(Uc(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function F9(n,e){return L9(Wn(n.treePath,e),n.writeTree)}function L9(n,e){return{treePath:n,writeTree:e}}class n_e{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,A.vA)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,A.vA)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,Hy(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,$y(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,xp(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,A.Hk)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Hy(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const V9=new class r_e{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class kN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Vc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Rd(this.viewCache_),s=function t_e(n,e,t,r,i,s){return function Xme(n,e,t,r,i,s,o){let a;const l=Uc(n.visibleWrites,e),c=Od(l,Zt());if(null!=c)a=c;else{if(null==t)return[];a=Lp(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const h=[],g=o.getCompare(),_=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let E=_.getNext();for(;E&&h.length<i;)0!==g(E,r)&&h.push(E),E=_.getNext();return h}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function U9(n,e,t,r,i,s){const o=e.eventCache;if(null!=zT(r,t))return e;{let a,l;if(At(t))if((0,A.vA)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Rd(e),g=NN(r,c instanceof ft?c:ft.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),g,s)}else{const c=HT(r,Rd(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=bt(t);if(".priority"===c){(0,A.vA)(1===Lc(t),"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const g=k9(r,t,h,l);a=null!=g?n.filter.updatePriority(h,g):o.getNode()}else{const h=Cn(t);let g;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const _=k9(r,t,o.getNode(),l);g=null!=_?o.getNode().getImmediateChild(c).updateChild(h,_):o.getNode().getImmediateChild(c)}else g=xN(r,c,e.serverCache);a=null!=g?n.filter.updateChild(o.getNode(),c,g,h,i,s):o.getNode()}}return Wy(e,a,o.isFullyInitialized()||At(t),n.filter.filtersNodes())}}function qT(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const h=o?n.filter:n.filter.getIndexedFilter();if(At(t))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const E=l.getNode().updateChild(t,r);c=h.updateFullNode(l.getNode(),E,null)}else{const E=bt(t);if(!l.isCompleteForPath(t)&&Lc(t)>1)return e;const I=Cn(t),S=l.getNode().getImmediateChild(E).updateChild(I,r);c=".priority"===E?h.updatePriority(l.getNode(),S):h.updateChild(l.getNode(),E,S,I,V9,null)}const g=P9(e,c,l.isFullyInitialized()||At(t),h.filtersNodes());return U9(n,g,t,i,new kN(i,g,s),a)}function FN(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const h=new kN(i,e,s);if(At(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=Wy(e,c,!0,n.filter.filtersNodes());else{const g=bt(t);if(".priority"===g)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=Wy(e,c,a.isFullyInitialized(),a.isFiltered());else{const _=Cn(t),E=a.getNode().getImmediateChild(g);let I;if(At(_))I=r;else{const T=h.getCompleteChild(g);I=null!=T?".priority"===fN(_)&&T.getChild(g9(_)).isEmpty()?T:T.updateChild(_,r):ft.EMPTY_NODE}l=E.equals(I)?e:Wy(e,n.filter.updateChild(a.getNode(),g,I,_,h,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function B9(n,e){return n.eventCache.isCompleteForChild(e)}function j9(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function LN(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=At(t)?r:new On(null).setTree(t,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((g,_)=>{if(h.hasChild(g)){const I=j9(0,e.serverCache.getNode().getImmediateChild(g),_);l=qT(n,l,new sn(g),I,i,s,o,a)}}),c.children.inorderTraversal((g,_)=>{const E=!e.serverCache.isCompleteForChild(g)&&null===_.value;if(!h.hasChild(g)&&!E){const T=j9(0,e.serverCache.getNode().getImmediateChild(g),_);l=qT(n,l,new sn(g),T,i,s,o,a)}}),l}class h_e{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new CN(r.getIndex()),s=function Ame(n){return n.loadsAllData()?new CN(n.getIndex()):n.hasLimit()?new bme(n):new zy(n)}(r);this.processor_=function i_e(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(ft.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(ft.EMPTY_NODE,a.getNode(),null),h=new Vc(l,o.isFullyInitialized(),i.filtersNodes()),g=new Vc(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=BT(g,h),this.eventGenerator_=new Lme(this.query_)}get query(){return this.query_}}function g_e(n,e){const t=Rd(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!At(e)&&!t.getImmediateChild(bt(e)).isEmpty())?t.getChild(e):null}function $9(n){return 0===n.eventRegistrations_.length}function H9(n,e,t){const r=[];if(t){(0,A.vA)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function z9(n,e,t,r){e.type===Ma.MERGE&&null!==e.source.queryId&&((0,A.vA)(Rd(n.viewCache_),"We should always have a full cache before handling merges"),(0,A.vA)(jT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function o_e(n,e,t,r,i){const s=new n_e;let o,a;if(t.type===Ma.OVERWRITE){const c=t;c.source.fromUser?o=FN(n,e,c.path,c.snap,r,i,s):((0,A.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!At(c.path),o=qT(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===Ma.MERGE){const c=t;c.source.fromUser?o=function l_e(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const h=Wn(t,l);B9(e,bt(h))&&(a=FN(n,a,h,c,i,s,o))}),r.foreach((l,c)=>{const h=Wn(t,l);B9(e,bt(h))||(a=FN(n,a,h,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):((0,A.vA)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=LN(n,e,c.path,c.children,r,i,a,s))}else if(t.type===Ma.ACK_USER_WRITE){const c=t;o=c.revert?function d_e(n,e,t,r,i,s){let o;if(null!=zT(r,t))return e;{const a=new kN(r,e,i),l=e.eventCache.getNode();let c;if(At(t)||".priority"===bt(t)){let h;if(e.serverCache.isFullyInitialized())h=HT(r,Rd(e));else{const g=e.serverCache.getNode();(0,A.vA)(g instanceof ft,"serverChildren would be complete if leaf node"),h=NN(r,g)}c=n.filter.updateFullNode(l,h,s)}else{const h=bt(t);let g=xN(r,h,e.serverCache);null==g&&e.serverCache.isCompleteForChild(h)&&(g=l.getImmediateChild(h)),c=null!=g?n.filter.updateChild(l,h,g,Cn(t),a,s):e.eventCache.getNode().hasChild(h)?n.filter.updateChild(l,h,ft.EMPTY_NODE,Cn(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=HT(r,Rd(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=zT(r,Zt()),Wy(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function c_e(n,e,t,r,i,s,o){if(null!=zT(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(At(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return qT(n,e,t,l.getNode().getChild(t),i,s,a,o);if(At(t)){let c=new On(null);return l.getNode().forEachChild(Pa,(h,g)=>{c=c.set(new sn(h),g)}),LN(n,e,t,c,i,s,a,o)}return e}{let c=new On(null);return r.foreach((h,g)=>{const _=Wn(t,h);l.isCompleteForPath(_)&&(c=c.set(h,l.getNode().getChild(_)))}),LN(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==Ma.LISTEN_COMPLETE)throw(0,A.Hk)("Unknown operation type: "+t.type);o=function u_e(n,e,t,r,i){const s=e.serverCache;return U9(n,P9(e,s.getNode(),s.isFullyInitialized()||At(t),s.isFiltered()),t,r,V9,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function a_e(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=jT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(b9(jT(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function s_e(n,e){(0,A.vA)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,A.vA)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,A.vA)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,q9(n,s.changes,s.viewCache.eventCache.getNode(),null)}function q9(n,e,t,r){return function Vme(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function Tme(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),Gy(n,i,"child_removed",e,r,t),Gy(n,i,"child_added",e,r,t),Gy(n,i,"child_moved",s,r,t),Gy(n,i,"child_changed",e,r,t),Gy(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let GT,KT;class G9{constructor(){this.views=new Map}}function VN(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,A.vA)(null!=s,"SyncTree gave us an op for an invalid query."),z9(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(z9(o,e,t,r));return s}}function W9(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=HT(t,i?r:null),l=!1;a?l=!0:r instanceof ft?(a=NN(t,r),l=!1):(a=ft.EMPTY_NODE,l=!1);const c=BT(new Vc(a,l,!1),new Vc(r,i,!1));return new h_e(e,c)}return o}function K9(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Bc(n,e){let t=null;for(const r of n.views.values())t=t||g_e(r,e);return t}function Q9(n,e){return e._queryParams.loadsAllData()?WT(n):n.views.get(e._queryIdentifier)}function Y9(n,e){return null!=Q9(n,e)}function jc(n){return null!=WT(n)}function WT(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let b_e=1;class Z9{constructor(e){this.listenProvider_=e,this.syncPointTree_=new On(null),this.pendingWriteTree_=function e_e(){return{visibleWrites:Bo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function UN(n,e,t,r,i){return function $me(n,e,t,r,i){(0,A.vA)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Ky(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Vp(n,new Md({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function $c(n,e,t=!1){const r=function zme(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function qme(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);(0,A.vA)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&Gme(a,r.path)?i=!1:so(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function Wme(n){n.visibleWrites=N9(n.allWrites,Kme,Zt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=M9(n.visibleWrites,r.path):ni(r.children,l=>{n.visibleWrites=M9(n.visibleWrites,Wn(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new On(null);return null!=r.snap?s=s.set(Zt(),!0):ni(r.children,o=>{s=s.set(new sn(o),!0)}),Vp(n,new UT(r.path,s,t))}return[]}function Qy(n,e,t){return Vp(n,new Md({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function QT(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||Y9(o,e))){const l=function I_e(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=jc(n);if("default"===i)for(const[l,c]of n.views.entries())o=o.concat(H9(c,t,r)),$9(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(H9(l,t,r)),$9(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!jc(n)&&s.push(new(function v_e(){return(0,A.vA)(GT,"Reference.ts has not been loaded"),GT}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function E_e(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const h=-1!==c.findIndex(_=>_._queryParams.loadsAllData()),g=n.syncPointTree_.findOnPath(s,(_,E)=>jc(E));if(h&&!g){const _=n.syncPointTree_.subtree(s);if(!_.isEmpty()){const E=function O_e(n){return n.fold((e,t,r)=>{if(t&&jc(t))return[WT(t)];{let i=[];return t&&(i=K9(t)),ni(r,(s,o)=>{i=i.concat(o)}),i}})}(_);for(let I=0;I<E.length;++I){const T=E[I],S=T.query,L=tW(n,T);n.listenProvider_.startListening(Zy(S),Yy(n,S),L.hashFn,L.onComplete)}}}!g&&c.length>0&&!r&&(h?n.listenProvider_.stopListening(Zy(e),null):c.forEach(_=>{const E=n.queryToTagMap.get(ZT(_));n.listenProvider_.stopListening(Zy(_),E)}))}!function N_e(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=ZT(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function J9(n,e,t,r){const i=jN(n,r);if(null!=i){const s=$N(i),o=s.path,a=s.queryId,l=es(o,e);return HN(n,o,new Md(DN(a),l,t))}return[]}function BN(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(_,E)=>{const I=es(_,i);s=s||Bc(E,I),o=o||jc(E)});let l,a=n.syncPointTree_.get(i);a?(o=o||jc(a),s=s||Bc(a,Zt())):(a=new G9,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=ft.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((E,I)=>{const T=Bc(I,Zt());T&&(s=s.updateImmediateChild(E,T))}));const c=Y9(a,e);if(!c&&!e._queryParams.loadsAllData()){const _=ZT(e);(0,A.vA)(!n.queryToTagMap.has(_),"View does not exist, but we have a tag");const E=function x_e(){return b_e++}();n.queryToTagMap.set(_,E),n.tagToQueryMap.set(E,_)}let g=function C_e(n,e,t,r,i,s){const o=W9(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function m_e(n,e){n.eventRegistrations_.push(e)}(o,t),function __e(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Rn,(s,o)=>{r.push(xp(s,o))}),t.isFullyInitialized()&&r.push(b9(t.getNode())),q9(n,r,t.getNode(),e)}(o,t)}(a,e,t,$T(n.pendingWriteTree_,i),s,l);if(!c&&!o&&!r){const _=Q9(a,e);g=g.concat(function k_e(n,e,t){const r=e._path,i=Yy(n,e),s=tW(n,t),o=n.listenProvider_.startListening(Zy(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)(0,A.vA)(!jc(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,h,g)=>{if(!At(c)&&h&&jc(h))return[WT(h).query];{let _=[];return h&&(_=_.concat(K9(h).map(E=>E.query))),ni(g,(E,I)=>{_=_.concat(I)}),_}});for(let c=0;c<l.length;++c){const h=l[c];n.listenProvider_.stopListening(Zy(h),Yy(n,h))}}return o}(n,e,_))}return g}function YT(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=Bc(a,es(o,e));if(c)return c});return x9(i,e,s,t,!0)}function Vp(n,e){return X9(e,n.syncPointTree_,null,$T(n.pendingWriteTree_,Zt()))}function X9(n,e,t,r){if(At(n.path))return eW(n,e,t,r);{const i=e.get(Zt());null==t&&null!=i&&(t=Bc(i,Zt()));let s=[];const o=bt(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,h=F9(r,o);s=s.concat(X9(a,l,c,h))}return i&&(s=s.concat(VN(i,n,r,t))),s}}function eW(n,e,t,r){const i=e.get(Zt());null==t&&null!=i&&(t=Bc(i,Zt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=F9(r,o),h=n.operationForChild(o);h&&(s=s.concat(eW(h,a,l,c)))}),i&&(s=s.concat(VN(i,n,r,t))),s}function tW(n,e){const t=e.query,r=Yy(n,t);return{hashFn:()=>(function f_e(n){return n.viewCache_.serverCache.getNode()}(e)||ft.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function P_e(n,e,t){const r=jN(n,t);if(r){const i=$N(r),s=i.path,o=i.queryId,a=es(s,e);return HN(n,s,new qy(DN(o),a))}return[]}(n,t._path,r):function D_e(n,e){return Vp(n,new qy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function Sge(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return QT(n,t,null,s)}}}}function Yy(n,e){const t=ZT(e);return n.queryToTagMap.get(t)}function ZT(n){return n._path.toString()+"$"+n._queryIdentifier}function jN(n,e){return n.tagToQueryMap.get(e)}function $N(n){const e=n.indexOf("$");return(0,A.vA)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new sn(n.substr(0,e))}}function HN(n,e,t){const r=n.syncPointTree_.get(e);return(0,A.vA)(r,"Missing sync point for query tag that we're tracking"),VN(r,t,$T(n.pendingWriteTree_,e),null)}function Zy(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function T_e(){return(0,A.vA)(KT,"Reference.ts has not been loaded"),KT}())(n._repo,n._path):n}class zN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new zN(t)}node(){return this.node_}}class qN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Wn(this.path_,e);return new qN(this.syncTree_,t)}node(){return YT(this.syncTree_,this.path_)}}const F_e=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},nW=function(n,e,t){return n&&"object"==typeof n?((0,A.vA)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?L_e(n[".sv"],e,t):"object"==typeof n[".sv"]?V_e(n[".sv"],e):void(0,A.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},L_e=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,A.vA)(!1,"Unexpected server value: "+n)},V_e=function(n,e,t){n.hasOwnProperty("increment")||(0,A.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,A.vA)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,A.vA)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},rW=function(n,e,t,r){return WN(e,new qN(t,n),r)},GN=function(n,e,t){return WN(n,new zN(e),t)};function WN(n,e,t){const r=n.getPriority().val(),i=nW(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=nW(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Op(a,tr(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Op(i))),o.forEachChild(Rn,(a,l)=>{const c=WN(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class KN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function JT(n,e){let t=e instanceof sn?e:new sn(e),r=n,i=bt(t);for(;null!==i;){const s=(0,A.yw)(r.node.children,i)||{children:{},childCount:0};r=new KN(i,r,s),t=Cn(t),i=bt(t)}return r}function Nd(n){return n.node.value}function QN(n,e){n.node.value=e,YN(n)}function iW(n){return n.node.childCount>0}function XT(n,e){ni(n.node.children,(t,r)=>{e(new KN(t,n,r))})}function sW(n,e,t,r){t&&!r&&e(n),XT(n,i=>{sW(i,e,!0,r)}),t&&r&&e(n)}function Jy(n){return new sn(null===n.parent?n.name:Jy(n.parent)+"/"+n.name)}function YN(n){null!==n.parent&&function j_e(n,e,t){const r=function U_e(n){return void 0===Nd(n)&&!iW(n)}(t),i=(0,A.gR)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,YN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,YN(n))}(n.parent,n.name,n)}const $_e=/[\[\].#$\/\u0000-\u001F\u007F]/,H_e=/[\[\].#$\u0000-\u001F\u007F]/,ZN=10485760,eb=function(n){return"string"==typeof n&&0!==n.length&&!$_e.test(n)},oW=function(n){return"string"==typeof n&&0!==n.length&&!H_e.test(n)},Xy=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!ST(n)||n&&"object"==typeof n&&(0,A.gR)(n,".sv")},Ra=function(n,e,t,r){r&&void 0===e||ev((0,A.dI)(n,"value"),e,t)},ev=function(n,e,t){const r=t instanceof sn?new ome(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Dd(r));if("function"==typeof e)throw new Error(n+"contains a function "+Dd(r)+" with contents = "+e.toString());if(ST(e))throw new Error(n+"contains "+e.toString()+" "+Dd(r));if("string"==typeof e&&e.length>ZN/3&&(0,A.OE)(e)>ZN)throw new Error(n+"contains a string greater than "+ZN+" utf8 bytes "+Dd(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(ni(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!eb(o)))throw new Error(n+" contains an invalid key ("+o+") "+Dd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function ame(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,A.OE)(e),m9(n)})(r,o),ev(n,a,r),function lme(n){const e=n.parts_.pop();n.byteLength_-=(0,A.OE)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Dd(r)+" in addition to actual children.")}},aW=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,A.dI)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];ni(e,(o,a)=>{const l=new sn(o);if(ev(i,a,Wn(t,l)),".priority"===fN(l)&&!Xy(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=Vy(r);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!eb(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(sme);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&so(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},JN=function(n,e,t){if(!t||void 0!==e){if(ST(e))throw new Error((0,A.dI)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Xy(e))throw new Error((0,A.dI)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},tv=function(n,e,t,r){if(!(r&&void 0===t||eb(t)))throw new Error((0,A.dI)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},nv=function(n,e,t,r){if(!(r&&void 0===t||oW(t)))throw new Error((0,A.dI)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},G_e=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),nv(n,e,t,r)},oo=function(n,e){if(".info"===bt(e))throw new Error(n+" failed = Can't modify data under /.info/")},lW=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!eb(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),oW(n)}(t))throw new Error((0,A.dI)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class W_e{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function tb(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!pN(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function cW(n,e,t){tb(n,t),uW(n,r=>pN(r,e))}function Us(n,e,t){tb(n,t),uW(n,r=>so(r,e)||so(e,r))}function uW(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(K_e(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function K_e(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Ad&&ti("event: "+t.toString()),Mp(r)}}}const dW="repo_interrupt",Q_e=25;class Y_e{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new W_e,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=VT(),this.transactionQueueTree_=new KN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function hW(n){const t=n.infoData_.getNode(new sn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function rv(n){return F_e({timestamp:hW(n)})}function fW(n,e,t,r,i){n.dataUpdateCount++;const s=new sn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=(0,A.kH)(t,c=>tr(c));o=function M_e(n,e,t,r){const i=jN(n,r);if(i){const s=$N(i),o=s.path,a=s.queryId,l=es(o,e),c=On.fromObject(t);return HN(n,o,new Fp(DN(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=tr(t);o=J9(n.serverSyncTree_,s,l,i)}else if(r){const l=(0,A.kH)(t,c=>tr(c));o=function S_e(n,e,t){const r=On.fromObject(t);return Vp(n,new Fp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=tr(t);o=Qy(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Bp(n,s)),Us(n.eventQueue_,a,o)}function pW(n,e){XN(n,"connected",e),!1===e&&function tye(n){Up(n,"onDisconnectEvents");const e=rv(n),t=VT();bN(n.onDisconnect_,Zt(),(i,s)=>{const o=rW(i,s,n.serverSyncTree_,e);kp(t,i,o)});let r=[];bN(t,Zt(),(i,s)=>{r=r.concat(Qy(n.serverSyncTree_,i,s));const o=rx(n,i);Bp(n,o)}),n.onDisconnect_=VT(),Us(n.eventQueue_,Zt(),r)}(n)}function XN(n,e,t){const r=new sn("/.info/"+e),i=tr(t);n.infoData_.updateSnapshot(r,i);const s=Qy(n.infoSyncTree_,r,i);Us(n.eventQueue_,r,s)}function nb(n){return n.nextWriteId_++}function ex(n,e,t,r,i){Up(n,"set",{path:e.toString(),value:t,priority:r});const s=rv(n),o=tr(t,r),a=YT(n.serverSyncTree_,e),l=GN(o,a,s),c=nb(n),h=UN(n.serverSyncTree_,e,l,c,!0);tb(n.eventQueue_,h),n.server_.put(e.toString(),o.val(!0),(_,E)=>{const I="ok"===_;I||xi("set at "+e+" failed: "+_);const T=$c(n.serverSyncTree_,c,!I);Us(n.eventQueue_,e,T),Hc(0,i,_,E)});const g=rx(n,e);Bp(n,g),Us(n.eventQueue_,g,[])}function nye(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&TN(n.onDisconnect_,e),Hc(0,t,r,i)})}function gW(n,e,t,r){const i=tr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{"ok"===s&&kp(n.onDisconnect_,e,i),Hc(0,r,s,o)})}function tx(n,e,t){let r;r=".info"===bt(e._path)?QT(n.infoSyncTree_,e,t):QT(n.serverSyncTree_,e,t),cW(n.eventQueue_,e._path,r)}function mW(n){n.persistentConnection_&&n.persistentConnection_.interrupt(dW)}function Up(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ti(t,...e)}function Hc(n,e,t,r){e&&Mp(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function nx(n,e,t){return YT(n.serverSyncTree_,e,t)||ft.EMPTY_NODE}function rb(n,e=n.transactionQueueTree_){if(e||ib(n,e),Nd(e)){const t=yW(n,e);(0,A.vA)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function lye(n,e,t){const r=t.map(c=>c.currentWriteId),i=nx(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const h=t[c];(0,A.vA)(0===h.status,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const g=es(e,h.path);s=s.updateChild(g,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{Up(n,"transaction put response",{path:l.toString(),status:c});let h=[];if("ok"===c){const g=[];for(let _=0;_<t.length;_++)t[_].status=2,h=h.concat($c(n.serverSyncTree_,t[_].currentWriteId)),t[_].onComplete&&g.push(()=>t[_].onComplete(null,!0,t[_].currentOutputSnapshotResolved)),t[_].unwatcher();ib(n,JT(n.transactionQueueTree_,e)),rb(n,n.transactionQueueTree_),Us(n.eventQueue_,e,h);for(let _=0;_<g.length;_++)Mp(g[_])}else{if("datastale"===c)for(let g=0;g<t.length;g++)t[g].status=3===t[g].status?4:0;else{xi("transaction at "+l.toString()+" failed: "+c);for(let g=0;g<t.length;g++)t[g].status=4,t[g].abortReason=c}Bp(n,e)}},o)}(n,Jy(e),t)}else iW(e)&&XT(e,t=>{rb(n,t)})}function Bp(n,e){const t=_W(n,e),r=Jy(t);return function cye(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=es(t,l.path);let g,h=!1;if((0,A.vA)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,g=l.abortReason,i=i.concat($c(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=Q_e)h=!0,g="maxretry",i=i.concat($c(n.serverSyncTree_,l.currentWriteId,!0));else{const _=nx(n,l.path,o);l.currentInputSnapshot=_;const E=e[a].update(_.val());if(void 0!==E){ev("transaction failed: Data returned ",E,l.path);let I=tr(E);"object"==typeof E&&null!=E&&(0,A.gR)(E,".priority")||(I=I.updatePriority(_.getPriority()));const S=l.currentWriteId,L=rv(n),O=GN(I,_,L);l.currentOutputSnapshotRaw=I,l.currentOutputSnapshotResolved=O,l.currentWriteId=nb(n),o.splice(o.indexOf(S),1),i=i.concat(UN(n.serverSyncTree_,l.path,O,l.currentWriteId,l.applyLocally)),i=i.concat($c(n.serverSyncTree_,S,!0))}else h=!0,g="nodata",i=i.concat($c(n.serverSyncTree_,l.currentWriteId,!0))}Us(n.eventQueue_,t,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===g?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(g),!1,null)))}ib(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Mp(r[a]);rb(n,n.transactionQueueTree_)}(n,yW(n,t),r),r}function _W(n,e){let t,r=n.transactionQueueTree_;for(t=bt(e);null!==t&&void 0===Nd(r);)r=JT(r,t),t=bt(e=Cn(e));return r}function yW(n,e){const t=[];return vW(n,e,t),t.sort((r,i)=>r.order-i.order),t}function vW(n,e,t){const r=Nd(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);XT(e,i=>{vW(n,i,t)})}function ib(n,e){const t=Nd(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,QN(e,t.length>0?t:void 0)}XT(e,r=>{ib(n,r)})}function rx(n,e){const t=Jy(_W(n,e)),r=JT(n.transactionQueueTree_,e);return function B_e(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{ix(n,i)}),ix(n,r),sW(r,i=>{ix(n,i)}),t}function ix(n,e){const t=Nd(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,A.vA)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,A.vA)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat($c(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?QN(e,void 0):t.length=s+1,Us(n.eventQueue_,Jy(e),i);for(let o=0;o<r.length;o++)Mp(r[o])}}const sx=function(n,e){const t=hye(n),r=t.namespace;return"firebase.com"===t.domain&&Da(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Da("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&xi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new aN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new sn(t.pathString)}},hye=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let h=n.indexOf("/");-1===h&&(h=n.length);let g=n.indexOf("?");-1===g&&(g=n.length),e=n.substring(0,Math.min(h,g)),h<g&&(i=function uye(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(h,g)));const _=function dye(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):xi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,g)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const E=e.slice(0,c);if("localhost"===E.toLowerCase())t="localhost";else if(E.split(".").length<=2)t=E;else{const I=e.indexOf(".");r=e.substring(0,I).toLowerCase(),t=e.substring(I+1),s=r}"ns"in _&&(s=_.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},EW="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fye=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=EW.charAt(t%64),t=Math.floor(t/64);(0,A.vA)(0===t,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=EW.charAt(e[i]);return(0,A.vA)(20===o.length,"nextPushId: Length should be 20."),o}}();class CW{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,A.As)(this.snapshot.exportVal())}}class IW{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ox{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,A.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class wW{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new A.cY;return nye(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){oo("OnDisconnect.remove",this._path);const e=new A.cY;return gW(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){oo("OnDisconnect.set",this._path),Ra("OnDisconnect.set",e,this._path,!1);const t=new A.cY;return gW(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){oo("OnDisconnect.setWithPriority",this._path),Ra("OnDisconnect.setWithPriority",e,this._path,!1),JN("OnDisconnect.setWithPriority",t,!1);const r=new A.cY;return function rye(n,e,t,r,i){const s=tr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{"ok"===o&&kp(n.onDisconnect_,e,s),Hc(0,i,o,a)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){oo("OnDisconnect.update",this._path),aW("OnDisconnect.update",e,this._path,!1);const t=new A.cY;return function iye(n,e,t,r){if((0,A.Im)(t))return ti("onDisconnect().update() called with empty data.  Don't do anything."),void Hc(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&ni(t,(o,a)=>{const l=tr(a);kp(n.onDisconnect_,Wn(e,o),l)}),Hc(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Cs{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return At(this._path)?null:fN(this._path)}get ref(){return new ao(this._repo,this._path)}get _queryIdentifier(){const e=S9(this._queryParams),t=sN(e);return"{}"===t?"default":t}get _queryObject(){return S9(this._queryParams)}isEqual(e){if(!((e=(0,A.Ku)(e))instanceof Cs))return!1;const t=this._repo===e._repo,r=pN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ime(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function sb(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function zc(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Pa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==kc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Cl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Rn){if(null!=e&&!Xy(e)||null!=t&&!Xy(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,A.vA)(n.getIndex()instanceof vN||n.getIndex()===EN,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ob(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ao extends Cs{constructor(e,t){super(e,t,new kT,!1)}get parent(){const e=g9(this._path);return null===e?null:new ao(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class xd{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new sn(e),r=kd(this.ref,e);return new xd(this._node.getChild(t),r,Rn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new xd(i,kd(this.ref,r),Rn)))}hasChild(e){const t=new sn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function TW(n,e){return(n=(0,A.Ku)(n))._checkNotDeleted("ref"),void 0!==e?kd(n._root,e):n._root}function bW(n,e){(n=(0,A.Ku)(n))._checkNotDeleted("refFromURL");const t=sx(e,n._repo.repoInfo_.nodeAdmin);lW("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Da("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),TW(n,t.path.toString())}function kd(n,e){return null===bt((n=(0,A.Ku)(n))._path)?G_e("child","path",e,!1):nv("child","path",e,!1),new ao(n._repo,Wn(n._path,e))}function ax(n,e){n=(0,A.Ku)(n),oo("set",n._path),Ra("set",e,n._path,!1);const t=new A.cY;return ex(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function yye(n,e){aW("update",e,n._path,!1);const t=new A.cY;return function eye(n,e,t,r){Up(n,"update",{path:e.toString(),value:t});let i=!0;const s=rv(n),o={};if(ni(t,(a,l)=>{i=!1,o[a]=rW(Wn(e,a),tr(l),n.serverSyncTree_,s)}),i)ti("update() called with empty data.  Don't do anything."),Hc(0,r,"ok",void 0);else{const a=nb(n),l=function A_e(n,e,t,r){!function Hme(n,e,t,r){(0,A.vA)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=MN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=On.fromObject(t);return Vp(n,new Fp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,o,a);tb(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,h)=>{const g="ok"===c;g||xi("update at "+e+" failed: "+c);const _=$c(n.serverSyncTree_,a,!g),E=_.length>0?Bp(n,e):e;Us(n.eventQueue_,E,_),Hc(0,r,c,h)}),ni(t,c=>{const h=rx(n,Wn(e,c));Bp(n,h)}),Us(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function vye(n){n=(0,A.Ku)(n);const e=new ox(()=>{}),t=new iv(e);return function X_e(n,e,t){const r=function R_e(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,h)=>{const g=es(c,t);r=r||Bc(h,g)});let i=n.syncPointTree_.get(t);i?r=r||Bc(i,Zt()):(i=new G9,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new Vc(r,!0,!1):null;return function p_e(n){return jT(n.viewCache_)}(W9(i,e,$T(n.pendingWriteTree_,e._path),s?o.getNode():ft.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=tr(i).withIndex(e._queryParams.getIndex());let o;if(BN(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=Qy(n.serverSyncTree_,e._path,s);else{const a=Yy(n.serverSyncTree_,e);o=J9(n.serverSyncTree_,e._path,s,a)}return Us(n.eventQueue_,e._path,o),QT(n.serverSyncTree_,e,t,null,!0),s},i=>(Up(n,"get for query "+(0,A.As)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new xd(r,new ao(n._repo,n._path),n._queryParams.getIndex()))}class iv{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new CW("value",this,new xd(e.snapshotNode,new ao(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new IW(this,e,t):null}matches(e){return e instanceof iv&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ab{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new IW(this,e,t):null}createEvent(e,t){(0,A.vA)(null!=e.childName,"Child events should have a childName.");const r=kd(new ao(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new CW(e.type,this,new xd(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ab&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function sv(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const l=t,c=(h,g)=>{tx(n._repo,n,a),l(h,g)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new ox(t,s||void 0),a="value"===e?new iv(o):new ab(e,o);return function sye(n,e,t){let r;r=".info"===bt(e._path)?BN(n.infoSyncTree_,e,t):BN(n.serverSyncTree_,e,t),cW(n.eventQueue_,e._path,r)}(n._repo,n,a),()=>tx(n._repo,n,a)}function lx(n,e,t,r){return sv(n,"value",e,t,r)}function AW(n,e,t,r){return sv(n,"child_added",e,t,r)}function SW(n,e,t,r){return sv(n,"child_changed",e,t,r)}function DW(n,e,t,r){return sv(n,"child_moved",e,t,r)}function PW(n,e,t,r){return sv(n,"child_removed",e,t,r)}function MW(n,e,t){let r=null;const i=t?new ox(t):null;"value"===e?r=new iv(i):e&&(r=new ab(e,i)),tx(n._repo,n,r)}class jo{}class RW extends jo{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){Ra("endAt",this._value,e._path,!0);const t=wN(e._queryParams,this._value,this._key);if(ob(t),zc(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Cs(e._repo,e._path,t,e._orderByCalled)}}class Cye extends jo{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){Ra("endBefore",this._value,e._path,!1);const t=function Mme(n,e,t){let r;return r=wN(n,e,n.index_===Pa||t?t:kc),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(ob(t),zc(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Cs(e._repo,e._path,t,e._orderByCalled)}}class OW extends jo{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){Ra("startAt",this._value,e._path,!0);const t=IN(e._queryParams,this._value,this._key);if(ob(t),zc(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Cs(e._repo,e._path,t,e._orderByCalled)}}class Tye extends jo{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){Ra("startAfter",this._value,e._path,!1);const t=function Pme(n,e,t){let r;return r=IN(n,e,n.index_===Pa||t?t:Cl),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(ob(t),zc(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Cs(e._repo,e._path,t,e._orderByCalled)}}class Aye extends jo{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Cs(e._repo,e._path,function Sme(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Dye extends jo{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Cs(e._repo,e._path,function Dme(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Mye extends jo{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){sb(e,"orderByChild");const t=new sn(this._path);if(At(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new vN(t),i=FT(e._queryParams,r);return zc(i),new Cs(e._repo,e._path,i,!0)}}class Oye extends jo{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){sb(e,"orderByKey");const t=FT(e._queryParams,Pa);return zc(t),new Cs(e._repo,e._path,t,!0)}}class xye extends jo{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){sb(e,"orderByPriority");const t=FT(e._queryParams,Rn);return zc(t),new Cs(e._repo,e._path,t,!0)}}class Fye extends jo{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){sb(e,"orderByValue");const t=FT(e._queryParams,EN);return zc(t),new Cs(e._repo,e._path,t,!0)}}class Vye extends jo{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(Ra("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new RW(this._value,this._key)._apply(new OW(this._value,this._key)._apply(e))}}function $o(n,...e){let t=(0,A.Ku)(n);for(const r of e)t=r._apply(t);return t}(function y_e(n){(0,A.vA)(!GT,"__referenceConstructor has already been defined"),GT=n})(ao),function w_e(n){(0,A.vA)(!KT,"__referenceConstructor has already been defined"),KT=n}(ao);const cx={};function ux(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Da("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ti("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=sx(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=sx(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const h=i&&l?new Ly(Ly.OWNER):new Nge(n.name,n.options,e);lW("Invalid Firebase Database URL",o),At(o.path)||Da("Database URL must point to the root of a Firebase Database (not including a child path).");const g=function Hye(n,e,t,r){let i=cx[e.name];i||(i={},cx[e.name]=i);let s=i[n.toURLString()];return s&&Da("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Y_e(n,false,t,r),i[n.toURLString()]=s,s}(a,n,h,new Oge(n.name,t));return new qye(g,n)}class qye{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Z_e(n,e,t){if(n.stats_=uN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new LT(n.repoInfo_,(r,i,s,o)=>{fW(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>pW(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,A.As)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Pd(n.repoInfo_,e,(r,i,s,o)=>{fW(n,r,i,s,o)},r=>{pW(n,r)},r=>{!function J_e(n,e){ni(e,(t,r)=>{XN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Fge(n,e){const t=n.toString();return cN[t]||(cN[t]=e()),cN[t]}(n.repoInfo_,()=>new Fme(n.stats_,n.server_)),n.infoData_=new Rme,n.infoSyncTree_=new Z9({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=Qy(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),XN(n,"connected",!1),n.serverSyncTree_=new Z9({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);Us(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ao(this._repo,Zt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function $ye(n,e){const t=cx[e];(!t||t[n.key]!==n)&&Da(`Database ${e}(${n.repoInfo_}) has already been deleted.`),mW(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Da("Cannot call "+e+" on a deleted database.")}}function xW(){r9.IS_TRANSPORT_INITIALIZED&&xi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Gye(){xW(),Fc.forceDisallow()}function Wye(){xW(),Rp.forceDisallow(),Fc.forceAllow()}function Yye(n,e){L3(n,e)}const Jye={".sv":"timestamp"};class tve{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Pd.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Pd.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Zye(n){nN(va.SDK_VERSION),(0,va._registerComponent)(new cl.uA("database",(e,{instanceIdentifier:t})=>ux(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,va.registerVersion)(R3,"1.0.7",n),(0,va.registerVersion)(R3,"1.0.7","esm2017")}();const sve=new xs.Vy("@firebase/database-compat"),FW=function(n){sve.warn("FIREBASE WARNING: "+n)};class lve{constructor(e){this._delegate=e}cancel(e){(0,A.od)("OnDisconnect.cancel",0,1,arguments.length),(0,A.oD)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,A.od)("OnDisconnect.remove",0,1,arguments.length),(0,A.oD)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,A.od)("OnDisconnect.set",1,2,arguments.length),(0,A.oD)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,A.od)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,A.oD)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,A.od)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,FW("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,A.oD)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class cve{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,A.od)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class qc{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,A.od)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,A.od)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,A.od)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,A.od)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,A.od)("DataSnapshot.child",0,1,arguments.length),e=String(e),nv("DataSnapshot.child","path",e,!1),new qc(this._database,this._delegate.child(e))}hasChild(e){return(0,A.od)("DataSnapshot.hasChild",1,1,arguments.length),nv("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,A.od)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,A.od)("DataSnapshot.forEach",1,1,arguments.length),(0,A.oD)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new qc(this._database,t)))}hasChildren(){return(0,A.od)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,A.od)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,A.od)("DataSnapshot.ref",0,0,arguments.length),new Bs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class hi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,A.od)("Query.on",2,4,arguments.length),(0,A.oD)("Query.on","callback",t,!1);const o=hi.getCancelAndContextArgs_("Query.on",r,i),a=(c,h)=>{t.call(o.context,new qc(this.database,c),h)};a.userCallback=t,a.context=o.context;const l=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(e){case"value":return lx(this._delegate,a,l),t;case"child_added":return AW(this._delegate,a,l),t;case"child_removed":return PW(this._delegate,a,l),t;case"child_changed":return SW(this._delegate,a,l),t;case"child_moved":return DW(this._delegate,a,l),t;default:throw new Error((0,A.dI)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,A.od)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,A.dI)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,A.oD)("Query.off","callback",t,!0),(0,A.HN)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,MW(this._delegate,e,i)}else MW(this._delegate,e)}get(){return vye(this._delegate).then(e=>new qc(this.database,e))}once(e,t,r,i){(0,A.od)("Query.once",1,4,arguments.length),(0,A.oD)("Query.once","callback",t,!0);const s=hi.getCancelAndContextArgs_("Query.once",r,i),o=new A.cY,a=(c,h)=>{const g=new qc(this.database,c);t&&t.call(s.context,g,h),o.resolve(g)};a.userCallback=t,a.context=s.context;const l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":lx(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":AW(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":PW(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":SW(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":DW(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,A.dI)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,A.od)("Query.limitToFirst",1,1,arguments.length),new hi(this.database,$o(this._delegate,function Sye(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Aye(n)}(e)))}limitToLast(e){return(0,A.od)("Query.limitToLast",1,1,arguments.length),new hi(this.database,$o(this._delegate,function Pye(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Dye(n)}(e)))}orderByChild(e){return(0,A.od)("Query.orderByChild",1,1,arguments.length),new hi(this.database,$o(this._delegate,function Rye(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return nv("orderByChild","path",n,!1),new Mye(n)}(e)))}orderByKey(){return(0,A.od)("Query.orderByKey",0,0,arguments.length),new hi(this.database,$o(this._delegate,function Nye(){return new Oye}()))}orderByPriority(){return(0,A.od)("Query.orderByPriority",0,0,arguments.length),new hi(this.database,$o(this._delegate,function kye(){return new xye}()))}orderByValue(){return(0,A.od)("Query.orderByValue",0,0,arguments.length),new hi(this.database,$o(this._delegate,function Lye(){return new Fye}()))}startAt(e=null,t){return(0,A.od)("Query.startAt",0,2,arguments.length),new hi(this.database,$o(this._delegate,function wye(n=null,e){return tv("startAt","key",e,!0),new OW(n,e)}(e,t)))}startAfter(e=null,t){return(0,A.od)("Query.startAfter",0,2,arguments.length),new hi(this.database,$o(this._delegate,function bye(n,e){return tv("startAfter","key",e,!0),new Tye(n,e)}(e,t)))}endAt(e=null,t){return(0,A.od)("Query.endAt",0,2,arguments.length),new hi(this.database,$o(this._delegate,function Eye(n,e){return tv("endAt","key",e,!0),new RW(n,e)}(e,t)))}endBefore(e=null,t){return(0,A.od)("Query.endBefore",0,2,arguments.length),new hi(this.database,$o(this._delegate,function Iye(n,e){return tv("endBefore","key",e,!0),new Cye(n,e)}(e,t)))}equalTo(e,t){return(0,A.od)("Query.equalTo",1,2,arguments.length),new hi(this.database,$o(this._delegate,function Uye(n,e){return tv("equalTo","key",e,!0),new Vye(n,e)}(e,t)))}toString(){return(0,A.od)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,A.od)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,A.od)("Query.isEqual",1,1,arguments.length),!(e instanceof hi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,A.oD)(e,"cancel",i.cancel,!0),i.context=r,(0,A.HN)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,A.dI)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Bs(this.database,new ao(this._delegate._repo,this._delegate._path))}}class Bs extends hi{constructor(e,t){super(e,new Cs(t._repo,t._path,new kT,!1)),this.database=e,this._delegate=t}getKey(){return(0,A.od)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,A.od)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Bs(this.database,kd(this._delegate,e))}getParent(){(0,A.od)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Bs(this.database,e):null}getRoot(){return(0,A.od)("Reference.root",0,0,arguments.length),new Bs(this.database,this._delegate.root)}set(e,t){(0,A.od)("Reference.set",1,2,arguments.length),(0,A.oD)("Reference.set","onComplete",t,!0);const r=ax(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,A.od)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,FW("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}oo("Reference.update",this._delegate._path),(0,A.oD)("Reference.update","onComplete",t,!0);const r=yye(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,A.od)("Reference.setWithPriority",2,3,arguments.length),(0,A.oD)("Reference.setWithPriority","onComplete",r,!0);const i=function _ye(n,e,t){if(oo("setWithPriority",n._path),Ra("setWithPriority",e,n._path,!1),JN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new A.cY;return ex(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,A.od)("Reference.remove",0,1,arguments.length),(0,A.oD)("Reference.remove","onComplete",e,!0);const t=function gye(n){return oo("remove",n._path),ax(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,A.od)("Reference.transaction",1,3,arguments.length),(0,A.oD)("Reference.transaction","transactionUpdate",e,!1),(0,A.oD)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,A.dI)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function nve(n,e,t){var r;if(n=(0,A.Ku)(n),oo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new A.cY,a=lx(n,()=>{});return function aye(n,e,t,r,i,s){Up(n,"transaction on "+e);const o={path:e,update:t,onComplete:r,status:null,order:x3(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=nx(n,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{ev("transaction failed: Data returned ",l,o.path),o.status=0;const c=JT(n.transactionQueueTree_,e),h=Nd(c)||[];let g;h.push(o),QN(c,h),"object"==typeof l&&null!==l&&(0,A.gR)(l,".priority")?(g=(0,A.yw)(l,".priority"),(0,A.vA)(Xy(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):g=(YT(n.serverSyncTree_,e)||ft.EMPTY_NODE).getPriority().val();const _=rv(n),E=tr(l,g),I=GN(E,a,_);o.currentOutputSnapshotRaw=E,o.currentOutputSnapshotResolved=I,o.currentWriteId=nb(n);const T=UN(n.serverSyncTree_,e,I,o.currentWriteId,o.applyLocally);Us(n.eventQueue_,e,T),rb(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(l,c,h)=>{let g=null;l?s.reject(l):(g=new xd(h,new ao(n._repo,n._path),Rn),s.resolve(new tve(c,g)))},a,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new cve(s.committed,new qc(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,A.od)("Reference.setPriority",1,2,arguments.length),(0,A.oD)("Reference.setPriority","onComplete",t,!0);const r=function mye(n,e){n=(0,A.Ku)(n),oo("setPriority",n._path),JN("setPriority",e,!1);const t=new A.cY;return ex(n._repo,Wn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,A.od)("Reference.push",0,2,arguments.length),(0,A.oD)("Reference.push","onComplete",t,!0);const r=function pye(n,e){n=(0,A.Ku)(n),oo("push",n._path),Ra("push",e,n._path,!0);const t=hW(n._repo),r=fye(t),i=kd(n,r),s=kd(n,r);let o;return o=null!=e?ax(s,e).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),i=r.then(o=>new Bs(this.database,o));t&&i.then(()=>t(null),o=>t(o));const s=new Bs(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return oo("Reference.onDisconnect",this._delegate._path),new lve(new wW(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class ov{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Gye,forceLongPolling:Wye}}useEmulator(e,t,r={}){!function kW(n,e,t,r={}){(n=(0,A.Ku)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Da("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Da('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ly(Ly.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:(0,A.Fy)(r.mockUserToken,n.app.options.projectId);s=new Ly(o)}!function jye(n,e,t,r){n.repoInfo_=new aN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,A.od)("database.ref",0,1,arguments.length),e instanceof Bs){const t=bW(this._delegate,e.toString());return new Bs(this,t)}{const t=TW(this._delegate,e);return new Bs(this,t)}}refFromURL(e){(0,A.od)("database.refFromURL",1,1,arguments.length);const r=bW(this._delegate,e);return new Bs(this,r)}goOffline(){return(0,A.od)("database.goOffline",0,0,arguments.length),function Kye(n){(n=(0,A.Ku)(n))._checkNotDeleted("goOffline"),mW(n._repo)}(this._delegate)}goOnline(){return(0,A.od)("database.goOnline",0,0,arguments.length),function Qye(n){(n=(0,A.Ku)(n))._checkNotDeleted("goOnline"),function oye(n){n.persistentConnection_&&n.persistentConnection_.resume(dW)}(n._repo)}(this._delegate)}}ov.ServerValue={TIMESTAMP:function Xye(){return Jye}(),increment:n=>function eve(n){return{".sv":{increment:n}}}(n)};var dve=Object.freeze({__proto__:null,initStandalone:function uve({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){nN(t);const a=new cl.h1("database-standalone"),l=new cl.Kq("auth-internal",a);let c;return l.setComponent(new cl.uA("auth-internal",()=>r,"PRIVATE")),i&&(c=new cl.Kq("app-check-internal",a),c.setComponent(new cl.uA("app-check-internal",()=>i,"PRIVATE"))),{instance:new ov(ux(n,l,c,e,o),n),namespace:s}}});const hve=ov.ServerValue;function av(n,e,t="on",r=HP){return new on(i=>{let s=null;return s=n[t](e,(o,a)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:a})}),"once"===t&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe(He(i=>{const{snapshot:s,prevKey:o}=i;let a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),QH())}function LW(n){return null==n}function VW(n){return"function"==typeof n.set}function UW(n,e){return VW(e)?e:n.ref(e)}function BW(n,e){if(function pve(n){return"string"==typeof n}(n))return e.stringCase();if(VW(n))return e.firebaseCase();if(function gve(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function jW(n){return(LW(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function $W(n,e,t){return KP(...(e=jW(e)).map(i=>av(n,i,"on",t)))}function HW(n,e){return function(r,i){return BW(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function vve(n){return function(t){return t?BW(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function zW(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Ive(n,e){const{payload:t,prevKey:r,key:i}=e,s=zW(n,i),o=function Cve(n,e){if(LW(e))return 0;{const t=zW(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{const c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,c],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==r&&(n=n.filter(l=>l.payload.key!==t.key)).splice(o,0,e);else{if(null==r)return[e,...n];(n=n.slice()).splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===i?e:a);case"child_moved":if(s>-1){const a=n.splice(s,1)[0];return(n=n.slice()).splice(o,0,a),n}return n;default:return n}}function qW(n,e,t){return function Eve(n,e,t){return av(n,"value","once",t).pipe($r(r=>{const i=[Xe(r)];return e.forEach(s=>i.push(av(n,s,"on",t))),KP(...i).pipe(bf(Ive,[]))}),JH())}(n,e=jW(e),t)}function GW(n,e){return function(){return av(n,"value","on",e)}}!function fve(n){n.INTERNAL.registerComponent(new cl.uA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new ov(i,r)},"PUBLIC").setServiceProps({Reference:Bs,Query:hi,Database:ov,DataSnapshot:qc,enableLogging:Yye,INTERNAL:dve,ServerValue:hve}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.7")}(ll.A);const bve=new we("angularfire2.realtimeDatabaseURL"),Ave=new we("angularfire2.database.use-emulator");let Sve=(()=>{class n{schedulers;database;constructor(t,r,i,s,o,a,l,c,h,g,_,E,I,T,S){this.schedulers=a;const L=l,O=fw(t,o,r);c&&nM(O,o,h,_,E,I,g,T),this.database=WP(`${O.name}.database.${i}`,"AngularFireDatabase",O.name,()=>{const H=o.runOutsideAngular(()=>O.database(i||void 0));return L&&H.useEmulator(...L),H},[L])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>UW(this.database,t));let s=i;return r&&(s=r(i)),function wve(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:HW(r,"update"),set:HW(r,"set"),push:i=>r.push(i),remove:vve(r),snapshotChanges:i=>qW(n,i,t).pipe(Hr),stateChanges:i=>$W(n,i,t).pipe(Hr),auditTrail:i=>function mve(n,e,t){return function yve(n,e,t){return function _ve(n,e){return av(n,"value","on",e).pipe(He(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function yge(...n){const e=HD(n);return _e((t,r)=>{const i=n.length,s=new Array(i);let o=n.map(()=>!1),a=!1;for(let l=0;l<i;l++)ms(n[l]).subscribe(Fe(r,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(Lr))&&(o=null))},zo));t.subscribe(Fe(r,l=>{if(a){const c=[l,...s];r.next(e?e(...c):c)}}))})}(e),He(([i,s])=>{const o=i.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function vge(n){return _e((e,t)=>{let r=!1,i=0;e.subscribe(Fe(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),He(i=>i.actions))}(n,$W(n,e).pipe(bf((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(Hr),valueChanges:(i,s)=>qW(n,i,t).pipe(He(a=>a.map(l=>s&&s.idField?{...l.payload.val(),[s.idField]:l.key}:l.payload.val())),Hr)}}(s,this)}object(t){return function Tve(n,e){return{query:n,snapshotChanges:()=>GW(n,e.schedulers.outsideAngular)().pipe(Hr),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>GW(n,e.schedulers.outsideAngular)().pipe(Hr,He(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>UW(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(ge(V_),ge(U_,8),ge(bve,8),ge(Ao),ge(Rt),ge(GP),ge(Ave,8),ge(rM,8),ge(YP,8),ge(ZP,8),ge(JP,8),ge(XP,8),ge(eM,8),ge(tM,8),ge(qP,8))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Dve=(()=>{class n{constructor(){ll.A.registerVersion("angularfire",zP.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=cs({type:n});static \u0275inj=vi({providers:[Sve]})}return n})(),Pve=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=cs({type:n,bootstrap:[Sfe]});static#n=this.\u0275inj=vi({imports:[gj,Tfe,mge,Gae,Vle.initializeApp(_ge_firebaseConfig),Dve]})}return n})();Mre().bootstrapModule(Pve).catch(n=>console.error(n))},3345:(uo,kr,ut)=>{ut.d(kr,{A:()=>Ir});var D=ut(1076),Be=ut(1362),Ne=ut(7852),ee=ut(8041);class hn{constructor(ht,Et){this._delegate=ht,this.firebase=Et,(0,Ne._addComponent)(ht,new Be.uA("app-compat",()=>this,"PUBLIC")),this.container=ht.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ht){this._delegate.automaticDataCollectionEnabled=ht}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ht=>{this._delegate.checkDestroyed(),ht()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Ne.deleteApp)(this._delegate)))}_getService(ht,Et=Ne._DEFAULT_ENTRY_NAME){var dr;this._delegate.checkDestroyed();const Gr=this._delegate.container.getProvider(ht);return!Gr.isInitialized()&&"EXPLICIT"===(null===(dr=Gr.getComponent())||void 0===dr?void 0:dr.instantiationMode)&&Gr.initialize(),Gr.getImmediate({identifier:Et})}_removeServiceInstance(ht,Et=Ne._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ht).clearInstance(Et)}_addComponent(ht){(0,Ne._addComponent)(this._delegate,ht)}_addOrOverwriteComponent(ht){(0,Ne._addOrOverwriteComponent)(this._delegate,ht)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Kn=new D.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),de=function Kt(){const Qt=function Fr(Qt){const ht={},Et={__esModule:!0,initializeApp:function yn(et,jn={}){const Nn=Ne.initializeApp(et,jn);if((0,D.gR)(ht,Nn.name))return ht[Nn.name];const fe=new Qt(Nn,Et);return ht[Nn.name]=fe,fe},app:Gr,registerVersion:Ne.registerVersion,setLogLevel:Ne.setLogLevel,onLog:Ne.onLog,apps:null,SDK_VERSION:Ne.SDK_VERSION,INTERNAL:{registerComponent:function jt(et){const jn=et.name,Nn=jn.replace("-compat","");if(Ne._registerComponent(et)&&"PUBLIC"===et.type){const fe=(Qn=Gr())=>{if("function"!=typeof Qn[Nn])throw Kn.create("invalid-app-argument",{appName:jn});return Qn[Nn]()};void 0!==et.serviceProps&&(0,D.zw)(fe,et.serviceProps),Et[Nn]=fe,Qt.prototype[Nn]=function(...Qn){return this._getService.bind(this,jn).apply(this,et.multipleInstances?Qn:[])}}return"PUBLIC"===et.type?Et[Nn]:null},removeApp:function dr(et){delete ht[et]},useAsService:function pi(et,jn){return"serverAuth"===jn?null:jn},modularAPIs:Ne}};function Gr(et){if(!(0,D.gR)(ht,et=et||Ne._DEFAULT_ENTRY_NAME))throw Kn.create("no-app",{appName:et});return ht[et]}return Et.default=Et,Object.defineProperty(Et,"apps",{get:function Bt(){return Object.keys(ht).map(et=>ht[et])}}),Gr.App=Qt,Et}(hn);return Qt.INTERNAL=Object.assign(Object.assign({},Qt.INTERNAL),{createFirebaseNamespace:Kt,extendNamespace:function ht(Et){(0,D.zw)(Qt,Et)},createSubscribe:D.tD,ErrorFactory:D.FA,deepExtend:D.zw}),Qt}(),me=new ee.Vy("@firebase/app-compat");if((0,D.Bd)()&&void 0!==window.firebase){me.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Qt=window.firebase.SDK_VERSION;Qt&&Qt.indexOf("LITE")>=0&&me.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ir=de;!function Ft(Qt){(0,Ne.registerVersion)("@firebase/app-compat","0.2.38",Qt)}()},7852:(uo,kr,ut)=>{ut.r(kr),ut.d(kr,{FirebaseError:()=>ee.g,SDK_VERSION:()=>Lr,_DEFAULT_ENTRY_NAME:()=>ws,_addComponent:()=>Ui,_addOrOverwriteComponent:()=>Bd,_apps:()=>_i,_clearComponents:()=>Wr,_components:()=>Tr,_getProvider:()=>qo,_isFirebaseApp:()=>Go,_isFirebaseServerApp:()=>Hs,_registerComponent:()=>rs,_removeServiceInstance:()=>is,_serverApps:()=>Vi,deleteApp:()=>Fa,getApp:()=>on,getApps:()=>eu,initializeApp:()=>Wo,initializeServerApp:()=>Pl,onLog:()=>M,registerVersion:()=>N,setLogLevel:()=>V});var D=ut(467),Be=ut(1362),Ne=ut(8041),ee=ut(1076);const hn=(Z,$)=>$.some(ie=>Z instanceof ie);let je,Kn;const de=new WeakMap,me=new WeakMap,$e=new WeakMap,_t=new WeakMap,Ft=new WeakMap;let ht={get(Z,$,ie){if(Z instanceof IDBTransaction){if("done"===$)return me.get(Z);if("objectStoreNames"===$)return Z.objectStoreNames||$e.get(Z);if("store"===$)return ie.objectStoreNames[1]?void 0:ie.objectStore(ie.objectStoreNames[0])}return yn(Z[$])},set:(Z,$,ie)=>(Z[$]=ie,!0),has:(Z,$)=>Z instanceof IDBTransaction&&("done"===$||"store"===$)||$ in Z};function Gr(Z){return"function"==typeof Z?function dr(Z){return Z!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Kt(){return Kn||(Kn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Z)?function(...$){return Z.apply(Bt(this),$),yn(de.get(this))}:function(...$){return yn(Z.apply(Bt(this),$))}:function($,...ie){const Me=Z.call(Bt(this),$,...ie);return $e.set(Me,$.sort?$.sort():[$]),yn(Me)}}(Z):(Z instanceof IDBTransaction&&function Qt(Z){if(me.has(Z))return;const $=new Promise((ie,Me)=>{const it=()=>{Z.removeEventListener("complete",lt),Z.removeEventListener("error",pt),Z.removeEventListener("abort",pt)},lt=()=>{ie(),it()},pt=()=>{Me(Z.error||new DOMException("AbortError","AbortError")),it()};Z.addEventListener("complete",lt),Z.addEventListener("error",pt),Z.addEventListener("abort",pt)});me.set(Z,$)}(Z),hn(Z,function Fr(){return je||(je=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Z,ht):Z)}function yn(Z){if(Z instanceof IDBRequest)return function Ir(Z){const $=new Promise((ie,Me)=>{const it=()=>{Z.removeEventListener("success",lt),Z.removeEventListener("error",pt)},lt=()=>{ie(yn(Z.result)),it()},pt=()=>{Me(Z.error),it()};Z.addEventListener("success",lt),Z.addEventListener("error",pt)});return $.then(ie=>{ie instanceof IDBCursor&&de.set(ie,Z)}).catch(()=>{}),Ft.set($,Z),$}(Z);if(_t.has(Z))return _t.get(Z);const $=Gr(Z);return $!==Z&&(_t.set(Z,$),Ft.set($,Z)),$}const Bt=Z=>Ft.get(Z),et=["get","getKey","getAll","getAllKeys","count"],jn=["put","add","delete","clear"],Nn=new Map;function fe(Z,$){if(!(Z instanceof IDBDatabase)||$ in Z||"string"!=typeof $)return;if(Nn.get($))return Nn.get($);const ie=$.replace(/FromIndex$/,""),Me=$!==ie,it=jn.includes(ie);if(!(ie in(Me?IDBIndex:IDBObjectStore).prototype)||!it&&!et.includes(ie))return;const lt=function(){var pt=(0,D.A)(function*(Tn,...an){const Bi=this.transaction(Tn,it?"readwrite":"readonly");let Va=Bi.store;return Me&&(Va=Va.index(an.shift())),(yield Promise.all([Va[ie](...an),it&&Bi.done]))[0]});return function(an){return pt.apply(this,arguments)}}();return Nn.set($,lt),lt}!function Et(Z){ht=Z(ht)}(Z=>({...Z,get:($,ie,Me)=>fe($,ie)||Z.get($,ie,Me),has:($,ie)=>!!fe($,ie)||Z.has($,ie)}));class Qn{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(ie=>{if(function wr(Z){const $=Z.getComponent();return"VERSION"===$?.type}(ie)){const Me=ie.getImmediate();return`${Me.library}/${Me.version}`}return null}).filter(ie=>ie).join(" ")}}const gi="@firebase/app",ho="0.10.8",ri=new Ne.Vy("@firebase/app"),Oa="@firebase/app-compat",Sl="@firebase/analytics-compat",K="@firebase/analytics",X="@firebase/app-check-compat",ae="@firebase/app-check",le="@firebase/auth",Ie="@firebase/auth-compat",ce="@firebase/database",Oe="@firebase/database-compat",Pt="@firebase/functions",Yn="@firebase/functions-compat",Ye="@firebase/installations",Mt="@firebase/installations-compat",fn="@firebase/messaging",St="@firebase/messaging-compat",Ht="@firebase/performance",Zn="@firebase/performance-compat",wn="@firebase/remote-config",zt="@firebase/remote-config-compat",ii="@firebase/storage",Na="@firebase/storage-compat",Dl="@firebase/firestore",mi="@firebase/vertexai-preview",$s="@firebase/firestore-compat",xa="firebase",ws="[DEFAULT]",Jc={[gi]:"fire-core",[Oa]:"fire-core-compat",[K]:"fire-analytics",[Sl]:"fire-analytics-compat",[ae]:"fire-app-check",[X]:"fire-app-check-compat",[le]:"fire-auth",[Ie]:"fire-auth-compat",[ce]:"fire-rtdb",[Oe]:"fire-rtdb-compat",[Pt]:"fire-fn",[Yn]:"fire-fn-compat",[Ye]:"fire-iid",[Mt]:"fire-iid-compat",[fn]:"fire-fcm",[St]:"fire-fcm-compat",[Ht]:"fire-perf",[Zn]:"fire-perf-compat",[wn]:"fire-rc",[zt]:"fire-rc-compat",[ii]:"fire-gcs",[Na]:"fire-gcs-compat",[Dl]:"fire-fst",[$s]:"fire-fst-compat",[mi]:"fire-vertex","fire-js":"fire-js",[xa]:"fire-js-all"},_i=new Map,Vi=new Map,Tr=new Map;function Ui(Z,$){try{Z.container.addComponent($)}catch(ie){ri.debug(`Component ${$.name} failed to register with FirebaseApp ${Z.name}`,ie)}}function Bd(Z,$){Z.container.addOrOverwriteComponent($)}function rs(Z){const $=Z.name;if(Tr.has($))return ri.debug(`There were multiple attempts to register component ${$}.`),!1;Tr.set($,Z);for(const ie of _i.values())Ui(ie,Z);for(const ie of Vi.values())Ui(ie,Z);return!0}function qo(Z,$){const ie=Z.container.getProvider("heartbeat").getImmediate({optional:!0});return ie&&ie.triggerHeartbeat(),Z.container.getProvider($)}function is(Z,$,ie=ws){qo(Z,$).clearInstance(ie)}function Go(Z){return void 0!==Z.options}function Hs(Z){return void 0!==Z.settings}function Wr(){Tr.clear()}const br=new ee.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Xc{constructor($,ie,Me){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},ie),this._name=ie.name,this._automaticDataCollectionEnabled=ie.automaticDataCollectionEnabled,this._container=Me,this.container.addComponent(new Be.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}class fo extends Xc{constructor($,ie,Me,it){const lt=void 0!==ie.automaticDataCollectionEnabled&&ie.automaticDataCollectionEnabled,pt={name:Me,automaticDataCollectionEnabled:lt};super(void 0!==$.apiKey?$:$.options,pt,it),this._serverConfig=Object.assign({automaticDataCollectionEnabled:lt},ie),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,ie.releaseOnDeref=void 0,N(gi,ho,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount($){this.isDeleted||(this._refCount++,void 0!==$&&null!==this._finalizationRegistry&&this._finalizationRegistry.register($,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Fa(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw br.create("server-app-deleted")}}const Lr="10.12.5";function Wo(Z,$={}){let ie=Z;"object"!=typeof $&&($={name:$});const Me=Object.assign({name:ws,automaticDataCollectionEnabled:!1},$),it=Me.name;if("string"!=typeof it||!it)throw br.create("bad-app-name",{appName:String(it)});if(ie||(ie=(0,ee.T9)()),!ie)throw br.create("no-options");const lt=_i.get(it);if(lt){if((0,ee.bD)(ie,lt.options)&&(0,ee.bD)(Me,lt.config))return lt;throw br.create("duplicate-app",{appName:it})}const pt=new Be.h1(it);for(const an of Tr.values())pt.addComponent(an);const Tn=new Xc(ie,Me,pt);return _i.set(it,Tn),Tn}function Pl(Z,$){if((0,ee.Bd)()&&!(0,ee.p7)())throw br.create("invalid-server-app-environment");let ie;void 0===$.automaticDataCollectionEnabled&&($.automaticDataCollectionEnabled=!1),ie=Go(Z)?Z.options:Z;const Me=Object.assign(Object.assign({},$),ie);if(void 0!==Me.releaseOnDeref&&delete Me.releaseOnDeref,void 0!==$.releaseOnDeref&&typeof FinalizationRegistry>"u")throw br.create("finalization-registry-not-supported",{});const lt=""+(Bi=JSON.stringify(Me),[...Bi].reduce((Va,Iv)=>Math.imul(31,Va)+Iv.charCodeAt(0)|0,0)),pt=Vi.get(lt);var Bi;if(pt)return pt.incRefCount($.releaseOnDeref),pt;const Tn=new Be.h1(lt);for(const Bi of Tr.values())Tn.addComponent(Bi);const an=new fo(ie,$,lt,Tn);return Vi.set(lt,an),an}function on(Z=ws){const $=_i.get(Z);if(!$&&Z===ws&&(0,ee.T9)())return Wo();if(!$)throw br.create("no-app",{appName:Z});return $}function eu(){return Array.from(_i.values())}function Fa(Z){return La.apply(this,arguments)}function La(){return(La=(0,D.A)(function*(Z){let $=!1;const ie=Z.name;_i.has(ie)?($=!0,_i.delete(ie)):Vi.has(ie)&&Z.decRefCount()<=0&&(Vi.delete(ie),$=!0),$&&(yield Promise.all(Z.container.getProviders().map(Me=>Me.delete())),Z.isDeleted=!0)})).apply(this,arguments)}function N(Z,$,ie){var Me;let it=null!==(Me=Jc[Z])&&void 0!==Me?Me:Z;ie&&(it+=`-${ie}`);const lt=it.match(/\s|\//),pt=$.match(/\s|\//);if(lt||pt){const Tn=[`Unable to register library "${it}" with version "${$}":`];return lt&&Tn.push(`library name "${it}" contains illegal characters (whitespace or "/")`),lt&&pt&&Tn.push("and"),pt&&Tn.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void ri.warn(Tn.join(" "))}rs(new Be.uA(`${it}-version`,()=>({library:it,version:$}),"VERSION"))}function M(Z,$){if(null!==Z&&"function"!=typeof Z)throw br.create("invalid-log-argument");(0,Ne.Ey)(Z,$)}function V(Z){(0,Ne.He)(Z)}const te="firebase-heartbeat-database",W=1,_e="firebase-heartbeat-store";let Fe=null;function It(){return Fe||(Fe=function jt(Z,$,{blocked:ie,upgrade:Me,blocking:it,terminated:lt}={}){const pt=indexedDB.open(Z,$),Tn=yn(pt);return Me&&pt.addEventListener("upgradeneeded",an=>{Me(yn(pt.result),an.oldVersion,an.newVersion,yn(pt.transaction),an)}),ie&&pt.addEventListener("blocked",an=>ie(an.oldVersion,an.newVersion,an)),Tn.then(an=>{lt&&an.addEventListener("close",()=>lt()),it&&an.addEventListener("versionchange",Bi=>it(Bi.oldVersion,Bi.newVersion,Bi))}).catch(()=>{}),Tn}(te,W,{upgrade:(Z,$)=>{if(0===$)try{Z.createObjectStore(_e)}catch(ie){console.warn(ie)}}}).catch(Z=>{throw br.create("idb-open",{originalErrorMessage:Z.message})})),Fe}function pn(){return(pn=(0,D.A)(function*(Z){try{const ie=(yield It()).transaction(_e),Me=yield ie.objectStore(_e).get(yi(Z));return yield ie.done,Me}catch($){if($ instanceof ee.g)ri.warn($.message);else{const ie=br.create("idb-get",{originalErrorMessage:$?.message});ri.warn(ie.message)}}})).apply(this,arguments)}function Ar(Z,$){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,D.A)(function*(Z,$){try{const Me=(yield It()).transaction(_e,"readwrite");yield Me.objectStore(_e).put($,yi(Z)),yield Me.done}catch(ie){if(ie instanceof ee.g)ri.warn(ie.message);else{const Me=br.create("idb-set",{originalErrorMessage:ie?.message});ri.warn(Me.message)}}})).apply(this,arguments)}function yi(Z){return`${Z.name}!${Z.options.appId}`}class jd{constructor($){this.container=$,this._heartbeatsCache=null;const ie=this.container.getProvider("app").getImmediate();this._storage=new qp(ie),this._heartbeatsCachePromise=this._storage.read().then(Me=>(this._heartbeatsCache=Me,Me))}triggerHeartbeat(){var $=this;return(0,D.A)(function*(){var ie,Me;const lt=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),pt=tu();if((null!=(null===(ie=$._heartbeatsCache)||void 0===ie?void 0:ie.heartbeats)||($._heartbeatsCache=yield $._heartbeatsCachePromise,null!=(null===(Me=$._heartbeatsCache)||void 0===Me?void 0:Me.heartbeats)))&&$._heartbeatsCache.lastSentHeartbeatDate!==pt&&!$._heartbeatsCache.heartbeats.some(Tn=>Tn.date===pt))return $._heartbeatsCache.heartbeats.push({date:pt,agent:lt}),$._heartbeatsCache.heartbeats=$._heartbeatsCache.heartbeats.filter(Tn=>{const an=new Date(Tn.date).valueOf();return Date.now()-an<=2592e6}),$._storage.overwrite($._heartbeatsCache)})()}getHeartbeatsHeader(){var $=this;return(0,D.A)(function*(){var ie;if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null==(null===(ie=$._heartbeatsCache)||void 0===ie?void 0:ie.heartbeats)||0===$._heartbeatsCache.heartbeats.length)return"";const Me=tu(),{heartbeatsToSend:it,unsentEntries:lt}=function xe(Z,$=1024){const ie=[];let Me=Z.slice();for(const it of Z){const lt=ie.find(pt=>pt.agent===it.agent);if(lt){if(lt.dates.push(it.date),$d(ie)>$){lt.dates.pop();break}}else if(ie.push({agent:it.agent,dates:[it.date]}),$d(ie)>$){ie.pop();break}Me=Me.slice(1)}return{heartbeatsToSend:ie,unsentEntries:Me}}($._heartbeatsCache.heartbeats),pt=(0,ee.Uj)(JSON.stringify({version:2,heartbeats:it}));return $._heartbeatsCache.lastSentHeartbeatDate=Me,lt.length>0?($._heartbeatsCache.heartbeats=lt,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),pt})()}}function tu(){return(new Date).toISOString().substring(0,10)}class qp{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.A)(function*(){return!!(0,ee.zW)()&&(0,ee.eX)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,D.A)(function*(){if(yield $._canUseIndexedDBPromise){const Me=yield function He(Z){return pn.apply(this,arguments)}($.app);return Me?.heartbeats?Me:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite($){var ie=this;return(0,D.A)(function*(){var Me;if(yield ie._canUseIndexedDBPromise){const lt=yield ie.read();return Ar(ie.app,{lastSentHeartbeatDate:null!==(Me=$.lastSentHeartbeatDate)&&void 0!==Me?Me:lt.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var ie=this;return(0,D.A)(function*(){var Me;if(yield ie._canUseIndexedDBPromise){const lt=yield ie.read();return Ar(ie.app,{lastSentHeartbeatDate:null!==(Me=$.lastSentHeartbeatDate)&&void 0!==Me?Me:lt.lastSentHeartbeatDate,heartbeats:[...lt.heartbeats,...$.heartbeats]})}})()}}function $d(Z){return(0,ee.Uj)(JSON.stringify({version:2,heartbeats:Z})).length}!function Qo(Z){rs(new Be.uA("platform-logger",$=>new Qn($),"PRIVATE")),rs(new Be.uA("heartbeat",$=>new jd($),"PRIVATE")),N(gi,ho,Z),N(gi,ho,"esm2017"),N("fire-js","")}("")},1362:(uo,kr,ut)=>{ut.d(kr,{Kq:()=>hn,h1:()=>Fr,uA:()=>Ne});var D=ut(467),Be=ut(1076);class Ne{constructor(de,me,$e){this.name=de,this.instanceFactory=me,this.type=$e,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(de){return this.instantiationMode=de,this}setMultipleInstances(de){return this.multipleInstances=de,this}setServiceProps(de){return this.serviceProps=de,this}setInstanceCreatedCallback(de){return this.onInstanceCreated=de,this}}const ee="[DEFAULT]";class hn{constructor(de,me){this.name=de,this.container=me,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(de){const me=this.normalizeInstanceIdentifier(de);if(!this.instancesDeferred.has(me)){const $e=new Be.cY;if(this.instancesDeferred.set(me,$e),this.isInitialized(me)||this.shouldAutoInitialize())try{const _t=this.getOrInitializeService({instanceIdentifier:me});_t&&$e.resolve(_t)}catch{}}return this.instancesDeferred.get(me).promise}getImmediate(de){var me;const $e=this.normalizeInstanceIdentifier(de?.identifier),_t=null!==(me=de?.optional)&&void 0!==me&&me;if(!this.isInitialized($e)&&!this.shouldAutoInitialize()){if(_t)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:$e})}catch(Ft){if(_t)return null;throw Ft}}getComponent(){return this.component}setComponent(de){if(de.name!==this.name)throw Error(`Mismatching Component ${de.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=de,this.shouldAutoInitialize()){if(function Kn(Kt){return"EAGER"===Kt.instantiationMode}(de))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[me,$e]of this.instancesDeferred.entries()){const _t=this.normalizeInstanceIdentifier(me);try{const Ft=this.getOrInitializeService({instanceIdentifier:_t});$e.resolve(Ft)}catch{}}}}clearInstance(de=ee){this.instancesDeferred.delete(de),this.instancesOptions.delete(de),this.instances.delete(de)}delete(){var de=this;return(0,D.A)(function*(){const me=Array.from(de.instances.values());yield Promise.all([...me.filter($e=>"INTERNAL"in $e).map($e=>$e.INTERNAL.delete()),...me.filter($e=>"_delete"in $e).map($e=>$e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(de=ee){return this.instances.has(de)}getOptions(de=ee){return this.instancesOptions.get(de)||{}}initialize(de={}){const{options:me={}}=de,$e=this.normalizeInstanceIdentifier(de.instanceIdentifier);if(this.isInitialized($e))throw Error(`${this.name}(${$e}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const _t=this.getOrInitializeService({instanceIdentifier:$e,options:me});for(const[Ft,Ir]of this.instancesDeferred.entries())$e===this.normalizeInstanceIdentifier(Ft)&&Ir.resolve(_t);return _t}onInit(de,me){var $e;const _t=this.normalizeInstanceIdentifier(me),Ft=null!==($e=this.onInitCallbacks.get(_t))&&void 0!==$e?$e:new Set;Ft.add(de),this.onInitCallbacks.set(_t,Ft);const Ir=this.instances.get(_t);return Ir&&de(Ir,_t),()=>{Ft.delete(de)}}invokeOnInitCallbacks(de,me){const $e=this.onInitCallbacks.get(me);if($e)for(const _t of $e)try{_t(de,me)}catch{}}getOrInitializeService({instanceIdentifier:de,options:me={}}){let $e=this.instances.get(de);if(!$e&&this.component&&($e=this.component.instanceFactory(this.container,{instanceIdentifier:(Kt=de,Kt===ee?void 0:Kt),options:me}),this.instances.set(de,$e),this.instancesOptions.set(de,me),this.invokeOnInitCallbacks($e,de),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,de,$e)}catch{}var Kt;return $e||null}normalizeInstanceIdentifier(de=ee){return this.component?this.component.multipleInstances?de:ee:de}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fr{constructor(de){this.name=de,this.providers=new Map}addComponent(de){const me=this.getProvider(de.name);if(me.isComponentSet())throw new Error(`Component ${de.name} has already been registered with ${this.name}`);me.setComponent(de)}addOrOverwriteComponent(de){this.getProvider(de.name).isComponentSet()&&this.providers.delete(de.name),this.addComponent(de)}getProvider(de){if(this.providers.has(de))return this.providers.get(de);const me=new hn(de,this);return this.providers.set(de,me),me}getProviders(){return Array.from(this.providers.values())}}},8041:(uo,kr,ut)=>{ut.d(kr,{$b:()=>Be,Ey:()=>Kt,He:()=>Fr,Vy:()=>Kn});const D=[];var Be=function(de){return de[de.DEBUG=0]="DEBUG",de[de.VERBOSE=1]="VERBOSE",de[de.INFO=2]="INFO",de[de.WARN=3]="WARN",de[de.ERROR=4]="ERROR",de[de.SILENT=5]="SILENT",de}(Be||{});const Ne={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},ee=Be.INFO,hn={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},je=(de,me,...$e)=>{if(me<de.logLevel)return;const _t=(new Date).toISOString(),Ft=hn[me];if(!Ft)throw new Error(`Attempted to log a message with an invalid logType (value: ${me})`);console[Ft](`[${_t}]  ${de.name}:`,...$e)};class Kn{constructor(me){this.name=me,this._logLevel=ee,this._logHandler=je,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(me){if(!(me in Be))throw new TypeError(`Invalid value "${me}" assigned to \`logLevel\``);this._logLevel=me}setLogLevel(me){this._logLevel="string"==typeof me?Ne[me]:me}get logHandler(){return this._logHandler}set logHandler(me){if("function"!=typeof me)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=me}get userLogHandler(){return this._userLogHandler}set userLogHandler(me){this._userLogHandler=me}debug(...me){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...me),this._logHandler(this,Be.DEBUG,...me)}log(...me){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...me),this._logHandler(this,Be.VERBOSE,...me)}info(...me){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...me),this._logHandler(this,Be.INFO,...me)}warn(...me){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...me),this._logHandler(this,Be.WARN,...me)}error(...me){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...me),this._logHandler(this,Be.ERROR,...me)}}function Fr(de){D.forEach(me=>{me.setLogLevel(de)})}function Kt(de,me){for(const $e of D){let _t=null;me&&me.level&&(_t=Ne[me.level]),$e.userLogHandler=null===de?null:(Ft,Ir,...Qt)=>{const ht=Qt.map(Et=>{if(null==Et)return null;if("string"==typeof Et)return Et;if("number"==typeof Et||"boolean"==typeof Et)return Et.toString();if(Et instanceof Error)return Et.message;try{return JSON.stringify(Et)}catch{return null}}).filter(Et=>Et).join(" ");Ir>=(_t??Ft.logLevel)&&de({level:Be[Ir].toLowerCase(),message:ht,args:Qt,type:Ft.name})}}}},9254:(uo,kr,ut)=>{ut.r(kr);var D=ut(467),Be=ut(3345),Ne=ut(7852),ee=ut(1076),hn=ut(8041),je=ut(1635),Kn=ut(1362);const Kt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Ir=function _t(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Qt=function Ft(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ht=new ee.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),dr=new hn.Vy("@firebase/auth");function yn(p,...u){dr.logLevel<=hn.$b.ERROR&&dr.error(`Auth (${Ne.SDK_VERSION}): ${p}`,...u)}function Bt(p,...u){throw Nn(p,...u)}function jt(p,...u){return Nn(p,...u)}function pi(p,u,d){const m=Object.assign(Object.assign({},Qt()),{[u]:d});return new ee.FA("auth","Firebase",m).create(u,{appName:p.name})}function et(p){return pi(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jn(p,u,d){if(!(u instanceof d))throw d.name!==u.constructor.name&&Bt(p,"argument-error"),pi(p,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Nn(p,...u){if("string"!=typeof p){const d=u[0],m=[...u.slice(1)];return m[0]&&(m[0].appName=p.name),p._errorFactory.create(d,...m)}return ht.create(p,...u)}function fe(p,u,...d){if(!p)throw Nn(u,...d)}function Qn(p){const u="INTERNAL ASSERTION FAILED: "+p;throw yn(u),new Error(u)}function wr(p,u){p||Qn(u)}function gi(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function ho(){return"http:"===ri()||"https:"===ri()}function ri(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class K{constructor(u,d){this.shortDelay=u,this.longDelay=d,wr(d>u,"Short delay should be less than long delay!"),this.isMobile=(0,ee.jZ)()||(0,ee.lV)()}get(){return function Oa(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ho()||(0,ee.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function X(p,u){wr(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return u?`${d}${u.startsWith("/")?u.slice(1):u}`:d}class ae{static initialize(u,d,m){this.fetchImpl=u,d&&(this.headersImpl=d),m&&(this.responseImpl=m)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const le={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ie=new K(3e4,6e4);function ce(p,u){return p.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:p.tenantId}):u}function Oe(p,u,d,m){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,D.A)(function*(p,u,d,m,v={}){return Yn(p,v,(0,D.A)(function*(){let w={},R={};m&&("GET"===u?R=m:w={body:JSON.stringify(m)});const B=(0,ee.Am)(Object.assign({key:p.config.apiKey},R)).slice(1),re=yield p._getAdditionalHeaders();return re["Content-Type"]="application/json",p.languageCode&&(re["X-Firebase-Locale"]=p.languageCode),ae.fetch()(St(p,p.config.apiHost,d,B),Object.assign({method:u,headers:re,referrerPolicy:"no-referrer"},w))}))})).apply(this,arguments)}function Yn(p,u,d){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,D.A)(function*(p,u,d){p._canInitEmulator=!1;const m=Object.assign(Object.assign({},le),u);try{const v=new Zn(p),w=yield Promise.race([d(),v.promise]);v.clearNetworkTimeout();const R=yield w.json();if("needConfirmation"in R)throw wn(p,"account-exists-with-different-credential",R);if(w.ok&&!("errorMessage"in R))return R;{const B=w.ok?R.errorMessage:R.error.message,[re,Ae]=B.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===re)throw wn(p,"credential-already-in-use",R);if("EMAIL_EXISTS"===re)throw wn(p,"email-already-in-use",R);if("USER_DISABLED"===re)throw wn(p,"user-disabled",R);const Le=m[re]||re.toLowerCase().replace(/[_\s]+/g,"-");if(Ae)throw pi(p,Le,Ae);Bt(p,Le)}}catch(v){if(v instanceof ee.g)throw v;Bt(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function Mt(p,u,d,m){return fn.apply(this,arguments)}function fn(){return(fn=(0,D.A)(function*(p,u,d,m,v={}){const w=yield Oe(p,u,d,m,v);return"mfaPendingCredential"in w&&Bt(p,"multi-factor-auth-required",{_serverResponse:w}),w})).apply(this,arguments)}function St(p,u,d,m){const v=`${u}${d}?${m}`;return p.config.emulator?X(p.config,v):`${p.config.apiScheme}://${v}`}function Ht(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Zn{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((d,m)=>{this.timer=setTimeout(()=>m(jt(this.auth,"network-request-failed")),Ie.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wn(p,u,d){const m={appName:p.name};d.email&&(m.email=d.email),d.phoneNumber&&(m.phoneNumber=d.phoneNumber);const v=jt(p,u,m);return v.customData._tokenResponse=d,v}function zt(p){return void 0!==p&&void 0!==p.getResponse}function ii(p){return void 0!==p&&void 0!==p.enterprise}class Na{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===u)return Ht(d.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function mi(){return(mi=(0,D.A)(function*(p){return(yield Oe(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function $s(p,u){return xa.apply(this,arguments)}function xa(){return(xa=(0,D.A)(function*(p,u){return Oe(p,"GET","/v2/recaptchaConfig",ce(p,u))})).apply(this,arguments)}function ws(){return(ws=(0,D.A)(function*(p,u){return Oe(p,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function _i(){return(_i=(0,D.A)(function*(p,u){return Oe(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Vi(p,u){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,D.A)(function*(p,u){return Oe(p,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function Ui(p){if(p)try{const u=new Date(Number(p));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function qo(){return(qo=(0,D.A)(function*(p,u=!1){const d=(0,ee.Ku)(p),m=yield d.getIdToken(u),v=Go(m);fe(v&&v.exp&&v.auth_time&&v.iat,d.auth,"internal-error");const w="object"==typeof v.firebase?v.firebase:void 0,R=w?.sign_in_provider;return{claims:v,token:m,authTime:Ui(is(v.auth_time)),issuedAtTime:Ui(is(v.iat)),expirationTime:Ui(is(v.exp)),signInProvider:R||null,signInSecondFactor:w?.sign_in_second_factor||null}})).apply(this,arguments)}function is(p){return 1e3*Number(p)}function Go(p){const[u,d,m]=p.split(".");if(void 0===u||void 0===d||void 0===m)return yn("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,ee.u)(d);return v?JSON.parse(v):(yn("Failed to decode base64 JWT payload"),null)}catch(v){return yn("Caught error parsing JWT payload as JSON",v?.toString()),null}}function Hs(p){const u=Go(p);return fe(u,"internal-error"),fe(typeof u.exp<"u","internal-error"),fe(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}function Wr(p,u){return ka.apply(this,arguments)}function ka(){return(ka=(0,D.A)(function*(p,u,d=!1){if(d)return u;try{return yield u}catch(m){throw m instanceof ee.g&&function br({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(m)&&p.auth.currentUser===p&&(yield p.auth.signOut()),m}})).apply(this,arguments)}class Xc{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var d;if(u){const m=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),m}{this.errorBackoff=3e4;const v=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(u=!1){var d=this;if(!this.isRunning)return;const m=this.getInterval(u);this.timerId=setTimeout((0,D.A)(function*(){yield d.iteration()}),m)}iteration(){var u=this;return(0,D.A)(function*(){try{yield u.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&u.schedule(!0))}u.schedule()})()}}class fo{constructor(u,d){this.createdAt=u,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ui(this.lastLoginAt),this.creationTime=Ui(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Lr(p){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,D.A)(function*(p){var u;const d=p.auth,m=yield p.getIdToken(),v=yield Wr(p,Vi(d,{idToken:m}));fe(v?.users.length,d,"internal-error");const w=v.users[0];p._notifyReloadListener(w);const R=null!==(u=w.providerUserInfo)&&void 0!==u&&u.length?Fa(w.providerUserInfo):[],B=function eu(p,u){return[...p.filter(m=>!u.some(v=>v.providerId===m.providerId)),...u]}(p.providerData,R),Le=!!p.isAnonymous&&!(p.email&&w.passwordHash||B?.length),ke={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:B,metadata:new fo(w.createdAt,w.lastLoginAt),isAnonymous:Le};Object.assign(p,ke)})).apply(this,arguments)}function on(){return(on=(0,D.A)(function*(p){const u=(0,ee.Ku)(p);yield Lr(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function Fa(p){return p.map(u=>{var{providerId:d}=u,m=(0,je.Tt)(u,["providerId"]);return{providerId:d,uid:m.rawId||"",displayName:m.displayName||null,email:m.email||null,phoneNumber:m.phoneNumber||null,photoURL:m.photoUrl||null}})}function N(){return(N=(0,D.A)(function*(p,u){const d=yield Yn(p,{},(0,D.A)(function*(){const m=(0,ee.Am)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:v,apiKey:w}=p.config,R=St(p,v,"/v1/token",`key=${w}`),B=yield p._getAdditionalHeaders();return B["Content-Type"]="application/x-www-form-urlencoded",ae.fetch()(R,{method:"POST",headers:B,body:m})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function V(){return(V=(0,D.A)(function*(p,u){return Oe(p,"POST","/v2/accounts:revokeToken",ce(p,u))})).apply(this,arguments)}class te{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){fe(u.idToken,"internal-error"),fe(typeof u.idToken<"u","internal-error"),fe(typeof u.refreshToken<"u","internal-error");const d="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):Hs(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,d)}updateFromIdToken(u){fe(0!==u.length,"internal-error");const d=Hs(u);this.updateTokensAndExpiration(u,null,d)}getToken(u,d=!1){var m=this;return(0,D.A)(function*(){return d||!m.accessToken||m.isExpired?(fe(m.refreshToken,u,"user-token-expired"),m.refreshToken?(yield m.refresh(u,m.refreshToken),m.accessToken):null):m.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,d){var m=this;return(0,D.A)(function*(){const{accessToken:v,refreshToken:w,expiresIn:R}=yield function La(p,u){return N.apply(this,arguments)}(u,d);m.updateTokensAndExpiration(v,w,Number(R))})()}updateTokensAndExpiration(u,d,m){this.refreshToken=d||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*m}static fromJSON(u,d){const{refreshToken:m,accessToken:v,expirationTime:w}=d,R=new te;return m&&(fe("string"==typeof m,"internal-error",{appName:u}),R.refreshToken=m),v&&(fe("string"==typeof v,"internal-error",{appName:u}),R.accessToken=v),w&&(fe("number"==typeof w,"internal-error",{appName:u}),R.expirationTime=w),R}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new te,this.toJSON())}_performRefresh(){return Qn("not implemented")}}function W(p,u){fe("string"==typeof p||typeof p>"u","internal-error",{appName:u})}class _e{constructor(u){var{uid:d,auth:m,stsTokenManager:v}=u,w=(0,je.Tt)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=m,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new fo(w.createdAt||void 0,w.lastLoginAt||void 0)}getIdToken(u){var d=this;return(0,D.A)(function*(){const m=yield Wr(d,d.stsTokenManager.getToken(d.auth,u));return fe(m,d.auth,"internal-error"),d.accessToken!==m&&(d.accessToken=m,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),m})()}getIdTokenResult(u){return function rs(p){return qo.apply(this,arguments)}(this,u)}reload(){return function Pl(p){return on.apply(this,arguments)}(this)}_assign(u){this!==u&&(fe(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(d=>Object.assign({},d)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const d=new _e(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(u){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,d=!1){var m=this;return(0,D.A)(function*(){let v=!1;u.idToken&&u.idToken!==m.stsTokenManager.accessToken&&(m.stsTokenManager.updateFromServerResponse(u),v=!0),d&&(yield Lr(m)),yield m.auth._persistUserIfCurrent(m),v&&m.auth._notifyListenersIfCurrent(m)})()}delete(){var u=this;return(0,D.A)(function*(){if((0,Ne._isFirebaseServerApp)(u.auth.app))return Promise.reject(et(u.auth));const d=yield u.getIdToken();return yield Wr(u,function zo(p,u){return ws.apply(this,arguments)}(u.auth,{idToken:d})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,d){var m,v,w,R,B,re,Ae,Le;const ke=null!==(m=d.displayName)&&void 0!==m?m:void 0,Xt=null!==(v=d.email)&&void 0!==v?v:void 0,As=null!==(w=d.phoneNumber)&&void 0!==w?w:void 0,Dh=null!==(R=d.photoURL)&&void 0!==R?R:void 0,jE=null!==(B=d.tenantId)&&void 0!==B?B:void 0,Xg=null!==(re=d._redirectEventId)&&void 0!==re?re:void 0,$E=null!==(Ae=d.createdAt)&&void 0!==Ae?Ae:void 0,ne=null!==(Le=d.lastLoginAt)&&void 0!==Le?Le:void 0,{uid:gt,emailVerified:Ys,isAnonymous:Zs,providerData:Wt,stsTokenManager:em}=d;fe(gt&&em,u,"internal-error");const Pu=te.fromJSON(this.name,em);fe("string"==typeof gt,u,"internal-error"),W(ke,u.name),W(Xt,u.name),fe("boolean"==typeof Ys,u,"internal-error"),fe("boolean"==typeof Zs,u,"internal-error"),W(As,u.name),W(Dh,u.name),W(jE,u.name),W(Xg,u.name),W($E,u.name),W(ne,u.name);const ds=new _e({uid:gt,auth:u,email:Xt,emailVerified:Ys,displayName:ke,isAnonymous:Zs,photoURL:Dh,phoneNumber:As,tenantId:jE,stsTokenManager:Pu,createdAt:$E,lastLoginAt:ne});return Wt&&Array.isArray(Wt)&&(ds.providerData=Wt.map(tm=>Object.assign({},tm))),Xg&&(ds._redirectEventId=Xg),ds}static _fromIdTokenResponse(u,d,m=!1){return(0,D.A)(function*(){const v=new te;v.updateFromServerResponse(d);const w=new _e({uid:d.localId,auth:u,stsTokenManager:v,isAnonymous:m});return yield Lr(w),w})()}static _fromGetAccountInfoResponse(u,d,m){return(0,D.A)(function*(){const v=d.users[0];fe(void 0!==v.localId,"internal-error");const w=void 0!==v.providerUserInfo?Fa(v.providerUserInfo):[],R=!(v.email&&v.passwordHash||w?.length),B=new te;B.updateFromIdToken(m);const re=new _e({uid:v.localId,auth:u,stsTokenManager:B,isAnonymous:R}),Ae={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:w,metadata:new fo(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||w?.length)};return Object.assign(re,Ae),re})()}}const Fe=new Map;function It(p){wr(p instanceof Function,"Expected a class definition");let u=Fe.get(p);return u?(wr(u instanceof p,"Instance stored in cache mismatched with class"),u):(u=new p,Fe.set(p,u),u)}const pn=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.A)(function*(){return!0})()}_set(d,m){var v=this;return(0,D.A)(function*(){v.storage[d]=m})()}_get(d){var m=this;return(0,D.A)(function*(){const v=m.storage[d];return void 0===v?null:v})()}_remove(d){var m=this;return(0,D.A)(function*(){delete m.storage[d]})()}_addListener(d,m){}_removeListener(d,m){}}return p.type="NONE",p})();function Ar(p,u,d){return`firebase:${p}:${u}:${d}`}class Ct{constructor(u,d,m){this.persistence=u,this.auth=d,this.userKey=m;const{config:v,name:w}=this.auth;this.fullUserKey=Ar(this.userKey,v.apiKey,w),this.fullPersistenceKey=Ar("persistence",v.apiKey,w),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,D.A)(function*(){const d=yield u.persistence._get(u.fullUserKey);return d?_e._fromJSON(u.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var d=this;return(0,D.A)(function*(){if(d.persistence===u)return;const m=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=u,m?d.setCurrentUser(m):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,d,m="authUser"){return(0,D.A)(function*(){if(!d.length)return new Ct(It(pn),u,m);const v=(yield Promise.all(d.map(function(){var Ae=(0,D.A)(function*(Le){if(yield Le._isAvailable())return Le});return function(Le){return Ae.apply(this,arguments)}}()))).filter(Ae=>Ae);let w=v[0]||It(pn);const R=Ar(m,u.config.apiKey,u.name);let B=null;for(const Ae of d)try{const Le=yield Ae._get(R);if(Le){const ke=_e._fromJSON(u,Le);Ae!==w&&(B=ke),w=Ae;break}}catch{}const re=v.filter(Ae=>Ae._shouldAllowMigration);return w._shouldAllowMigration&&re.length?(w=re[0],B&&(yield w._set(R,B.toJSON())),yield Promise.all(d.map(function(){var Ae=(0,D.A)(function*(Le){if(Le!==w)try{yield Le._remove(R)}catch{}});return function(Le){return Ae.apply(this,arguments)}}())),new Ct(w,u,m)):new Ct(w,u,m)})()}}function yi(p){const u=p.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(tu(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(Ko(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(qp(u))return"Blackberry";if($d(u))return"Webos";if(Ml(u))return"Safari";if((u.includes("chrome/")||jd(u))&&!u.includes("edge/"))return"Chrome";if(xe(u))return"Android";{const m=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===m?.length)return m[1]}return"Other"}function Ko(p=(0,ee.ZQ)()){return/firefox\//i.test(p)}function Ml(p=(0,ee.ZQ)()){const u=p.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function jd(p=(0,ee.ZQ)()){return/crios\//i.test(p)}function tu(p=(0,ee.ZQ)()){return/iemobile/i.test(p)}function xe(p=(0,ee.ZQ)()){return/android/i.test(p)}function qp(p=(0,ee.ZQ)()){return/blackberry/i.test(p)}function $d(p=(0,ee.ZQ)()){return/webos/i.test(p)}function Qo(p=(0,ee.ZQ)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function Me(p=(0,ee.ZQ)()){return Qo(p)||xe(p)||$d(p)||qp(p)||/windows phone/i.test(p)||tu(p)}function lt(p,u=[]){let d;switch(p){case"Browser":d=yi((0,ee.ZQ)());break;case"Worker":d=`${yi((0,ee.ZQ)())}-${p}`;break;default:d=p}const m=u.length?u.join(","):"FirebaseCore-web";return`${d}/JsCore/${Ne.SDK_VERSION}/${m}`}class pt{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,d){const m=w=>new Promise((R,B)=>{try{R(u(w))}catch(re){B(re)}});m.onAbort=d,this.queue.push(m);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(u){var d=this;return(0,D.A)(function*(){if(d.auth.currentUser===u)return;const m=[];try{for(const v of d.queue)yield v(u),v.onAbort&&m.push(v.onAbort)}catch(v){m.reverse();for(const w of m)try{w()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function an(){return(an=(0,D.A)(function*(p,u={}){return Oe(p,"GET","/v2/passwordPolicy",ce(p,u))})).apply(this,arguments)}class Va{constructor(u){var d,m,v,w;const R=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=R.minPasswordLength)&&void 0!==d?d:6,R.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=R.maxPasswordLength),void 0!==R.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=R.containsLowercaseCharacter),void 0!==R.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=R.containsUppercaseCharacter),void 0!==R.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=R.containsNumericCharacter),void 0!==R.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=R.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(m=u.allowedNonAlphanumericCharacters)||void 0===m?void 0:m.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(w=u.forceUpgradeOnSignin)&&void 0!==w&&w,this.schemaVersion=u.schemaVersion}validatePassword(u){var d,m,v,w,R,B;const re={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,re),this.validatePasswordCharacterOptions(u,re),re.isValid&&(re.isValid=null===(d=re.meetsMinPasswordLength)||void 0===d||d),re.isValid&&(re.isValid=null===(m=re.meetsMaxPasswordLength)||void 0===m||m),re.isValid&&(re.isValid=null===(v=re.containsLowercaseLetter)||void 0===v||v),re.isValid&&(re.isValid=null===(w=re.containsUppercaseLetter)||void 0===w||w),re.isValid&&(re.isValid=null===(R=re.containsNumericCharacter)||void 0===R||R),re.isValid&&(re.isValid=null===(B=re.containsNonAlphanumericCharacter)||void 0===B||B),re}validatePasswordLengthOptions(u,d){const m=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;m&&(d.meetsMinPasswordLength=u.length>=m),v&&(d.meetsMaxPasswordLength=u.length<=v)}validatePasswordCharacterOptions(u,d){let m;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let v=0;v<u.length;v++)m=u.charAt(v),this.updatePasswordCharacterOptionsStatuses(d,m>="a"&&m<="z",m>="A"&&m<="Z",m>="0"&&m<="9",this.allowedNonAlphanumericCharacters.includes(m))}updatePasswordCharacterOptionsStatuses(u,d,m,v,w){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=m)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=w))}}class Iv{constructor(u,d,m,v){this.app=u,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=m,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nu(this),this.idTokenSubscription=new nu(this),this.beforeStateQueue=new pt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ht,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(u,d){var m=this;return d&&(this._popupRedirectResolver=It(d)),this._initializationPromise=this.queue((0,D.A)(function*(){var v,w;if(!m._deleted&&(m.persistenceManager=yield Ct.create(m,u),!m._deleted)){if(null!==(v=m._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield m._popupRedirectResolver._initialize(m)}catch{}yield m.initializeCurrentUser(d),m.lastNotifiedUid=(null===(w=m.currentUser)||void 0===w?void 0:w.uid)||null,!m._deleted&&(m._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,D.A)(function*(){if(u._deleted)return;const d=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||d){if(u.currentUser&&d&&u.currentUser.uid===d.uid)return u._currentUser._assign(d),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(u){var d=this;return(0,D.A)(function*(){try{const m=yield Vi(d,{idToken:u}),v=yield _e._fromGetAccountInfoResponse(d,m,u);yield d.directlySetCurrentUser(v)}catch(m){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",m),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(u){var d=this;return(0,D.A)(function*(){var m;if((0,Ne._isFirebaseServerApp)(d.app)){const B=d.app.settings.authIdToken;return B?new Promise(re=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(B).then(re,re))}):d.directlySetCurrentUser(null)}const v=yield d.assertedPersistence.getCurrentUser();let w=v,R=!1;if(u&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const B=null===(m=d.redirectUser)||void 0===m?void 0:m._redirectEventId,re=w?._redirectEventId,Ae=yield d.tryRedirectSignIn(u);(!B||B===re)&&Ae?.user&&(w=Ae.user,R=!0)}if(!w)return d.directlySetCurrentUser(null);if(!w._redirectEventId){if(R)try{yield d.beforeStateQueue.runMiddleware(w)}catch(B){w=v,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(B))}return w?d.reloadAndSetCurrentUserOrClear(w):d.directlySetCurrentUser(null)}return fe(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===w._redirectEventId?d.directlySetCurrentUser(w):d.reloadAndSetCurrentUserOrClear(w)})()}tryRedirectSignIn(u){var d=this;return(0,D.A)(function*(){let m=null;try{m=yield d._popupRedirectResolver._completeRedirectFn(d,u,!0)}catch{yield d._setRedirectUser(null)}return m})()}reloadAndSetCurrentUserOrClear(u){var d=this;return(0,D.A)(function*(){try{yield Lr(u)}catch(m){if("auth/network-request-failed"!==m?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function Sl(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var u=this;return(0,D.A)(function*(){u._deleted=!0})()}updateCurrentUser(u){var d=this;return(0,D.A)(function*(){if((0,Ne._isFirebaseServerApp)(d.app))return Promise.reject(et(d));const m=u?(0,ee.Ku)(u):null;return m&&fe(m.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(m&&m._clone(d))})()}_updateCurrentUser(u,d=!1){var m=this;return(0,D.A)(function*(){if(!m._deleted)return u&&fe(m.tenantId===u.tenantId,m,"tenant-id-mismatch"),d||(yield m.beforeStateQueue.runMiddleware(u)),m.queue((0,D.A)(function*(){yield m.directlySetCurrentUser(u),m.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,D.A)(function*(){return(0,Ne._isFirebaseServerApp)(u.app)?Promise.reject(et(u)):(yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0))})()}setPersistence(u){var d=this;return(0,Ne._isFirebaseServerApp)(this.app)?Promise.reject(et(this)):this.queue((0,D.A)(function*(){yield d.assertedPersistence.setPersistence(It(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var d=this;return(0,D.A)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const m=d._getPasswordPolicyInternal();return m.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):m.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,D.A)(function*(){const d=yield function Tn(p){return an.apply(this,arguments)}(u),m=new Va(d);null===u.tenantId?u._projectPasswordPolicy=m:u._tenantPasswordPolicies[u.tenantId]=m})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new ee.FA("auth","Firebase",u())}onAuthStateChanged(u,d,m){return this.registerStateListener(this.authStateSubscription,u,d,m)}beforeAuthStateChanged(u,d){return this.beforeStateQueue.pushCallback(u,d)}onIdTokenChanged(u,d,m){return this.registerStateListener(this.idTokenSubscription,u,d,m)}authStateReady(){return new Promise((u,d)=>{if(this.currentUser)u();else{const m=this.onAuthStateChanged(()=>{m(),u()},d)}})}revokeAccessToken(u){var d=this;return(0,D.A)(function*(){if(d.currentUser){const m=yield d.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:m};null!=d.tenantId&&(v.tenantId=d.tenantId),yield function M(p,u){return V.apply(this,arguments)}(d,v)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,d){var m=this;return(0,D.A)(function*(){const v=yield m.getOrInitRedirectPersistenceManager(d);return null===u?v.removeCurrentUser():v.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var d=this;return(0,D.A)(function*(){if(!d.redirectPersistenceManager){const m=u&&It(u)||d._popupRedirectResolver;fe(m,d,"argument-error"),d.redirectPersistenceManager=yield Ct.create(d,[It(m._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(u){var d=this;return(0,D.A)(function*(){var m,v;return d._isInitialized&&(yield d.queue((0,D.A)(function*(){}))),(null===(m=d._currentUser)||void 0===m?void 0:m._redirectEventId)===u?d._currentUser:(null===(v=d.redirectUser)||void 0===v?void 0:v._redirectEventId)===u?d.redirectUser:null})()}_persistUserIfCurrent(u){var d=this;return(0,D.A)(function*(){if(u===d.currentUser)return d.queue((0,D.A)(function*(){return d.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const m=null!==(d=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==m&&(this.lastNotifiedUid=m,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,d,m,v){if(this._deleted)return()=>{};const w="function"==typeof d?d:d.next.bind(d);let R=!1;const B=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(B,this,"internal-error"),B.then(()=>{R||w(this.currentUser)}),"function"==typeof d){const re=u.addObserver(d,m,v);return()=>{R=!0,re()}}{const re=u.addObserver(d);return()=>{R=!0,re()}}}directlySetCurrentUser(u){var d=this;return(0,D.A)(function*(){d.currentUser&&d.currentUser!==u&&d._currentUser._stopProactiveRefresh(),u&&d.isProactiveRefreshEnabled&&u._startProactiveRefresh(),d.currentUser=u,u?yield d.assertedPersistence.setCurrentUser(u):yield d.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=lt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,D.A)(function*(){var d;const m={"X-Client-Version":u.clientVersion};u.app.options.appId&&(m["X-Firebase-gmpid"]=u.app.options.appId);const v=yield null===(d=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();v&&(m["X-Firebase-Client"]=v);const w=yield u._getAppCheckToken();return w&&(m["X-Firebase-AppCheck"]=w),m})()}_getAppCheckToken(){var u=this;return(0,D.A)(function*(){var d;const m=yield null===(d=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return m?.error&&function Gr(p,...u){dr.logLevel<=hn.$b.WARN&&dr.warn(`Auth (${Ne.SDK_VERSION}): ${p}`,...u)}(`Error while retrieving App Check token: ${m.error}`),m?.token})()}}function Lt(p){return(0,ee.Ku)(p)}class nu{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,ee.tD)(d=>this.observer=d)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ss={loadJS:()=>(0,D.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Hd(p){return ss.loadJS(p)}function Av(p){return`__${p}${Math.floor(1e6*Math.random())}`}class zd{constructor(u){this.type="recaptcha-enterprise",this.auth=Lt(u)}verify(u="verify",d=!1){var m=this;return(0,D.A)(function*(){function w(){return w=(0,D.A)(function*(B){if(!d){if(null==B.tenantId&&null!=B._agentRecaptchaConfig)return B._agentRecaptchaConfig.siteKey;if(null!=B.tenantId&&void 0!==B._tenantRecaptchaConfigs[B.tenantId])return B._tenantRecaptchaConfigs[B.tenantId].siteKey}return new Promise(function(){var re=(0,D.A)(function*(Ae,Le){$s(B,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ke=>{if(void 0!==ke.recaptchaKey){const Xt=new Na(ke);return null==B.tenantId?B._agentRecaptchaConfig=Xt:B._tenantRecaptchaConfigs[B.tenantId]=Xt,Ae(Xt.siteKey)}Le(new Error("recaptcha Enterprise site key undefined"))}).catch(ke=>{Le(ke)})});return function(Ae,Le){return re.apply(this,arguments)}}())}),w.apply(this,arguments)}function R(B,re,Ae){const Le=window.grecaptcha;ii(Le)?Le.enterprise.ready(()=>{Le.enterprise.execute(B,{action:u}).then(ke=>{re(ke)}).catch(()=>{re("NO_RECAPTCHA")})}):Ae(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((B,re)=>{(function v(B){return w.apply(this,arguments)})(m.auth).then(Ae=>{if(!d&&ii(window.grecaptcha))R(Ae,B,re);else{if(typeof window>"u")return void re(new Error("RecaptchaVerifier is only supported in browser"));let Le=function bv(){return ss.recaptchaEnterpriseScript}();0!==Le.length&&(Le+=Ae),Hd(Le).then(()=>{R(Ae,B,re)}).catch(ke=>{re(ke)})}}).catch(Ae=>{re(Ae)})})})()}}function qd(p,u,d){return Sv.apply(this,arguments)}function Sv(){return(Sv=(0,D.A)(function*(p,u,d,m=!1){const v=new zd(p);let w;try{w=yield v.verify(d)}catch{w=yield v.verify(d,!0)}const R=Object.assign({},u);return Object.assign(R,m?{captchaResp:w}:{captchaResponse:w}),Object.assign(R,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(R,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),R})).apply(this,arguments)}function Yo(p,u,d,m){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,D.A)(function*(p,u,d,m){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const w=yield qd(p,u,d,"getOobCode"===d);return m(p,w)}return m(p,u).catch(function(){var w=(0,D.A)(function*(R){if("auth/missing-recaptcha-token"===R.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const B=yield qd(p,u,d,"getOobCode"===d);return m(p,B)}return Promise.reject(R)});return function(R){return w.apply(this,arguments)}}())}),Gp.apply(this,arguments)}function Pv(p){const u=p.indexOf(":");return u<0?"":p.substr(0,u+1)}function Db(p){if(!p)return null;const u=Number(p);return isNaN(u)?null:u}class Ua{constructor(u,d){this.providerId=u,this.signInMethod=d}toJSON(){return Qn("not implemented")}_getIdTokenResponse(u){return Qn("not implemented")}_linkToIdToken(u,d){return Qn("not implemented")}_getReauthenticationResolver(u){return Qn("not implemented")}}function Pb(p,u){return Mv.apply(this,arguments)}function Mv(){return(Mv=(0,D.A)(function*(p,u){return Oe(p,"POST","/v1/accounts:resetPassword",ce(p,u))})).apply(this,arguments)}function Rv(){return(Rv=(0,D.A)(function*(p,u){return Oe(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function nr(p,u){return Ov.apply(this,arguments)}function Ov(){return(Ov=(0,D.A)(function*(p,u){return Oe(p,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function Qp(){return(Qp=(0,D.A)(function*(p,u){return Oe(p,"POST","/v1/accounts:update",ce(p,u))})).apply(this,arguments)}function Lx(p,u){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,D.A)(function*(p,u){return Mt(p,"POST","/v1/accounts:signInWithPassword",ce(p,u))})).apply(this,arguments)}function Rl(p,u){return iu.apply(this,arguments)}function iu(){return(iu=(0,D.A)(function*(p,u){return Oe(p,"POST","/v1/accounts:sendOobCode",ce(p,u))})).apply(this,arguments)}function Yp(){return(Yp=(0,D.A)(function*(p,u){return Rl(p,u)})).apply(this,arguments)}function Ob(p,u){return Nv.apply(this,arguments)}function Nv(){return(Nv=(0,D.A)(function*(p,u){return Rl(p,u)})).apply(this,arguments)}function Vx(p,u){return Zp.apply(this,arguments)}function Zp(){return(Zp=(0,D.A)(function*(p,u){return Rl(p,u)})).apply(this,arguments)}function Jp(){return(Jp=(0,D.A)(function*(p,u){return Rl(p,u)})).apply(this,arguments)}function Xp(){return(Xp=(0,D.A)(function*(p,u){return Mt(p,"POST","/v1/accounts:signInWithEmailLink",ce(p,u))})).apply(this,arguments)}function eg(){return(eg=(0,D.A)(function*(p,u){return Mt(p,"POST","/v1/accounts:signInWithEmailLink",ce(p,u))})).apply(this,arguments)}class su extends Ua{constructor(u,d,m,v=null){super("password",m),this._email=u,this._password=d,this._tenantId=v}static _fromEmailAndPassword(u,d){return new su(u,d,"password")}static _fromEmailAndCode(u,d,m=null){return new su(u,d,"emailLink",m)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(u){var d=this;return(0,D.A)(function*(){switch(d.signInMethod){case"password":return Yo(u,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Lx);case"emailLink":return function xb(p,u){return Xp.apply(this,arguments)}(u,{email:d._email,oobCode:d._password});default:Bt(u,"internal-error")}})()}_linkToIdToken(u,d){var m=this;return(0,D.A)(function*(){switch(m.signInMethod){case"password":return Yo(u,{idToken:d,returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nr);case"emailLink":return function kb(p,u){return eg.apply(this,arguments)}(u,{idToken:d,email:m._email,oobCode:m._password});default:Bt(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function po(p,u){return tg.apply(this,arguments)}function tg(){return(tg=(0,D.A)(function*(p,u){return Mt(p,"POST","/v1/accounts:signInWithIdp",ce(p,u))})).apply(this,arguments)}class go extends Ua{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const d=new go(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(d.idToken=u.idToken),u.accessToken&&(d.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(d.nonce=u.nonce),u.pendingToken&&(d.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(d.accessToken=u.oauthToken,d.secret=u.oauthTokenSecret):Bt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:v}=d,w=(0,je.Tt)(d,["providerId","signInMethod"]);if(!m||!v)return null;const R=new go(m,v);return R.idToken=w.idToken||void 0,R.accessToken=w.accessToken||void 0,R.secret=w.secret,R.nonce=w.nonce,R.pendingToken=w.pendingToken||null,R}_getIdTokenResponse(u){return po(u,this.buildRequest())}_linkToIdToken(u,d){const m=this.buildRequest();return m.idToken=d,po(u,m)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,po(u,d)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),u.postBody=(0,ee.Am)(d)}return u}}function ng(){return(ng=(0,D.A)(function*(p,u){return Oe(p,"POST","/v1/accounts:sendVerificationCode",ce(p,u))})).apply(this,arguments)}function Kd(){return(Kd=(0,D.A)(function*(p,u){return Mt(p,"POST","/v1/accounts:signInWithPhoneNumber",ce(p,u))})).apply(this,arguments)}function Qd(){return(Qd=(0,D.A)(function*(p,u){const d=yield Mt(p,"POST","/v1/accounts:signInWithPhoneNumber",ce(p,u));if(d.temporaryProof)throw wn(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Ub={USER_NOT_FOUND:"user-not-found"};function rg(){return(rg=(0,D.A)(function*(p,u){return Mt(p,"POST","/v1/accounts:signInWithPhoneNumber",ce(p,Object.assign(Object.assign({},u),{operation:"REAUTH"})),Ub)})).apply(this,arguments)}class Ba extends Ua{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,d){return new Ba({verificationId:u,verificationCode:d})}static _fromTokenResponse(u,d){return new Ba({phoneNumber:u,temporaryProof:d})}_getIdTokenResponse(u){return function Vb(p,u){return Kd.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,d){return function xv(p,u){return Qd.apply(this,arguments)}(u,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function Bb(p,u){return rg.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:d,verificationId:m,verificationCode:v}=this.params;return u&&d?{temporaryProof:u,phoneNumber:d}:{sessionInfo:m,code:v}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:d,verificationCode:m,phoneNumber:v,temporaryProof:w}=u;return m||d||v||w?new Ba({verificationId:d,verificationCode:m,phoneNumber:v,temporaryProof:w}):null}}class ou{constructor(u){var d,m,v,w,R,B;const re=(0,ee.I9)((0,ee.hp)(u)),Ae=null!==(d=re.apiKey)&&void 0!==d?d:null,Le=null!==(m=re.oobCode)&&void 0!==m?m:null,ke=function jb(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=re.mode)&&void 0!==v?v:null);fe(Ae&&Le&&ke,"argument-error"),this.apiKey=Ae,this.operation=ke,this.code=Le,this.continueUrl=null!==(w=re.continueUrl)&&void 0!==w?w:null,this.languageCode=null!==(R=re.languageCode)&&void 0!==R?R:null,this.tenantId=null!==(B=re.tenantId)&&void 0!==B?B:null}static parseLink(u){const d=function Ux(p){const u=(0,ee.I9)((0,ee.hp)(p)).link,d=u?(0,ee.I9)((0,ee.hp)(u)).deep_link_id:null,m=(0,ee.I9)((0,ee.hp)(p)).deep_link_id;return(m?(0,ee.I9)((0,ee.hp)(m)).link:null)||m||d||u||p}(u);try{return new ou(d)}catch{return null}}}let ig=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,m){return su._fromEmailAndPassword(d,m)}static credentialWithLink(d,m){const v=ou.parseLink(m);return fe(v,"argument-error"),su._fromEmailAndCode(d,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class mo{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class Zo extends mo{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class Ol extends Zo{static credentialFromJSON(u){const d="string"==typeof u?JSON.parse(u):u;return fe("providerId"in d&&"signInMethod"in d,"argument-error"),go._fromParams(d)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return fe(u.idToken||u.accessToken,"argument-error"),go._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return Ol.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return Ol.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:d,oauthAccessToken:m,oauthTokenSecret:v,pendingToken:w,nonce:R,providerId:B}=u;if(!m&&!v&&!d&&!w||!B)return null;try{return new Ol(B)._credential({idToken:d,accessToken:m,nonce:R,pendingToken:w})}catch{return null}}}let $b=(()=>{class p extends Zo{constructor(){super("facebook.com")}static credential(d){return go._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),kv=(()=>{class p extends Zo{constructor(){super("google.com"),this.addScope("profile")}static credential(d,m){return go._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:m})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:m,oauthAccessToken:v}=d;if(!m&&!v)return null;try{return p.credential(m,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Hb=(()=>{class p extends Zo{constructor(){super("github.com")}static credential(d){return go._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class Nl extends Ua{constructor(u,d){super(u,u),this.pendingToken=d}_getIdTokenResponse(u){return po(u,this.buildRequest())}_linkToIdToken(u,d){const m=this.buildRequest();return m.idToken=d,po(u,m)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,po(u,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:v,pendingToken:w}=d;return m&&v&&w&&m===v?new Nl(m,w):null}static _create(u,d){return new Nl(u,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Yd extends mo{constructor(u){fe(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return Yd.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return Yd.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const d=Nl.fromJSON(u);return fe(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:d,providerId:m}=u;if(!d||!m)return null;try{return Nl._create(m,d)}catch{return null}}}let zb=(()=>{class p extends Zo{constructor(){super("twitter.com")}static credential(d,m){return go._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:m})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:m,oauthTokenSecret:v}=d;if(!m||!v)return null;try{return p.credential(m,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function Lv(p,u){return Vv.apply(this,arguments)}function Vv(){return(Vv=(0,D.A)(function*(p,u){return Mt(p,"POST","/v1/accounts:signUp",ce(p,u))})).apply(this,arguments)}class os{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,d,m,v=!1){return(0,D.A)(function*(){const w=yield _e._fromIdTokenResponse(u,m,v),R=Uv(m);return new os({user:w,providerId:R,_tokenResponse:m,operationType:d})})()}static _forOperation(u,d,m){return(0,D.A)(function*(){yield u._updateTokensIfNecessary(m,!0);const v=Uv(m);return new os({user:u,providerId:v,_tokenResponse:m,operationType:d})})()}}function Uv(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function sg(){return(sg=(0,D.A)(function*(p){var u;if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject(et(p));const d=Lt(p);if(yield d._initializationPromise,null!==(u=d.currentUser)&&void 0!==u&&u.isAnonymous)return new os({user:d.currentUser,providerId:null,operationType:"signIn"});const m=yield Lv(d,{returnSecureToken:!0}),v=yield os._fromIdTokenResponse(d,"signIn",m,!0);return yield d._updateCurrentUser(v.user),v})).apply(this,arguments)}class zs extends ee.g{constructor(u,d,m,v){var w;super(d.code,d.message),this.operationType=m,this.user=v,Object.setPrototypeOf(this,zs.prototype),this.customData={appName:u.name,tenantId:null!==(w=u.tenantId)&&void 0!==w?w:void 0,_serverResponse:d.customData._serverResponse,operationType:m}}static _fromErrorAndOperation(u,d,m,v){return new zs(u,d,m,v)}}function Gb(p,u,d,m){return("reauthenticate"===u?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(w=>{throw"auth/multi-factor-auth-required"===w.code?zs._fromErrorAndOperation(p,w,u,m):w})}function Bv(p){return new Set(p.map(({providerId:u})=>u).filter(u=>!!u))}function og(){return og=(0,D.A)(function*(p,u){const d=(0,ee.Ku)(p);yield cg(!0,d,u);const{providerUserInfo:m}=yield function Jc(p,u){return _i.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[u]}),v=Bv(m||[]);return d.providerData=d.providerData.filter(w=>v.has(w.providerId)),v.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),og.apply(this,arguments)}function ag(p,u){return lg.apply(this,arguments)}function lg(){return(lg=(0,D.A)(function*(p,u,d=!1){const m=yield Wr(p,u._linkToIdToken(p.auth,yield p.getIdToken()),d);return os._forOperation(p,"link",m)})).apply(this,arguments)}function cg(p,u,d){return jv.apply(this,arguments)}function jv(){return(jv=(0,D.A)(function*(p,u,d){yield Lr(u);const v=!1===p?"provider-already-linked":"no-such-provider";fe(Bv(u.providerData).has(d)===p,u.auth,v)})).apply(this,arguments)}function Wb(p,u){return $v.apply(this,arguments)}function $v(){return($v=(0,D.A)(function*(p,u,d=!1){const{auth:m}=p;if((0,Ne._isFirebaseServerApp)(m.app))return Promise.reject(et(m));const v="reauthenticate";try{const w=yield Wr(p,Gb(m,v,u,p),d);fe(w.idToken,m,"internal-error");const R=Go(w.idToken);fe(R,m,"internal-error");const{sub:B}=R;return fe(p.uid===B,m,"user-mismatch"),os._forOperation(p,v,w)}catch(w){throw"auth/user-not-found"===w?.code&&Bt(m,"user-mismatch"),w}})).apply(this,arguments)}function Kb(p,u){return ug.apply(this,arguments)}function ug(){return(ug=(0,D.A)(function*(p,u,d=!1){if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject(et(p));const m="signIn",v=yield Gb(p,m,u),w=yield os._fromIdTokenResponse(p,m,v);return d||(yield p._updateCurrentUser(w.user)),w})).apply(this,arguments)}function dg(p,u){return Hv.apply(this,arguments)}function Hv(){return(Hv=(0,D.A)(function*(p,u){return Kb(Lt(p),u)})).apply(this,arguments)}function hg(p,u){return Q.apply(this,arguments)}function Q(){return(Q=(0,D.A)(function*(p,u){const d=(0,ee.Ku)(p);return yield cg(!1,d,u.providerId),ag(d,u)})).apply(this,arguments)}function ja(p,u){return xl.apply(this,arguments)}function xl(){return(xl=(0,D.A)(function*(p,u){return Wb((0,ee.Ku)(p),u)})).apply(this,arguments)}function qv(){return(qv=(0,D.A)(function*(p,u){return Mt(p,"POST","/v1/accounts:signInWithCustomToken",ce(p,u))})).apply(this,arguments)}function Zd(){return Zd=(0,D.A)(function*(p,u){if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject(et(p));const d=Lt(p),m=yield function zv(p,u){return qv.apply(this,arguments)}(d,{token:u,returnSecureToken:!0}),v=yield os._fromIdTokenResponse(d,"signIn",m);return yield d._updateCurrentUser(v.user),v}),Zd.apply(this,arguments)}class ji{constructor(u,d){this.factorId=u,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(u,d){return"phoneInfo"in d?Jo._fromServerResponse(u,d):"totpInfo"in d?Xo._fromServerResponse(u,d):Bt(u,"internal-error")}}class Jo extends ji{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,d){return new Jo(d)}}class Xo extends ji{constructor(u){super("totp",u)}static _fromServerResponse(u,d){return new Xo(d)}}function _o(p,u,d){var m;fe((null===(m=d.url)||void 0===m?void 0:m.length)>0,p,"invalid-continue-uri"),fe(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),u.continueUrl=d.url,u.dynamicLinkDomain=d.dynamicLinkDomain,u.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(fe(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),u.iOSBundleId=d.iOS.bundleId),d.android&&(fe(d.android.packageName.length>0,p,"missing-android-pkg-name"),u.androidInstallApp=d.android.installApp,u.androidMinimumVersionCode=d.android.minimumVersion,u.androidPackageName=d.android.packageName)}function Jd(p){return au.apply(this,arguments)}function au(){return(au=(0,D.A)(function*(p){const u=Lt(p);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function Gv(){return(Gv=(0,D.A)(function*(p,u,d){const m=Lt(p),v={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};d&&_o(m,v,d),yield Yo(m,v,"getOobCode",Ob)})).apply(this,arguments)}function Wv(){return Wv=(0,D.A)(function*(p,u,d){yield Pb((0,ee.Ku)(p),{oobCode:u,newPassword:d}).catch(function(){var m=(0,D.A)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Jd(p),v});return function(v){return m.apply(this,arguments)}}())}),Wv.apply(this,arguments)}function qt(){return qt=(0,D.A)(function*(p,u){yield function Mb(p,u){return Qp.apply(this,arguments)}((0,ee.Ku)(p),{oobCode:u})}),qt.apply(this,arguments)}function Kv(p,u){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,D.A)(function*(p,u){const d=(0,ee.Ku)(p),m=yield Pb(d,{oobCode:u}),v=m.requestType;switch(fe(v,d,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":fe(m.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":fe(m.mfaInfo,d,"internal-error");default:fe(m.email,d,"internal-error")}let w=null;return m.mfaInfo&&(w=ji._fromServerResponse(Lt(d),m.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.newEmail:m.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.email:m.newEmail)||null,multiFactorInfo:w},operation:v}})).apply(this,arguments)}function Qv(){return(Qv=(0,D.A)(function*(p,u){const{data:d}=yield Kv((0,ee.Ku)(p),u);return d.email})).apply(this,arguments)}function rn(){return(rn=(0,D.A)(function*(p,u,d){if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject(et(p));const m=Lt(p),R=yield Yo(m,{returnSecureToken:!0,email:u,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Lv).catch(re=>{throw"auth/password-does-not-meet-requirements"===re.code&&Jd(p),re}),B=yield os._fromIdTokenResponse(m,"signIn",R);return yield m._updateCurrentUser(B.user),B})).apply(this,arguments)}function si(){return(si=(0,D.A)(function*(p,u,d){const m=Lt(p),v={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function w(R,B){fe(B.handleCodeInApp,m,"argument-error"),B&&_o(m,R,B)})(v,d),yield Yo(m,v,"getOobCode",Vx)})).apply(this,arguments)}function Yv(){return(Yv=(0,D.A)(function*(p,u,d){if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject(et(p));const m=(0,ee.Ku)(p),v=ig.credentialWithLink(u,d||gi());return fe(v._tenantId===(m.tenantId||null),m,"tenant-id-mismatch"),dg(m,v)})).apply(this,arguments)}function Zv(){return(Zv=(0,D.A)(function*(p,u){return Oe(p,"POST","/v1/accounts:createAuthUri",ce(p,u))})).apply(this,arguments)}function Jv(){return Jv=(0,D.A)(function*(p,u){const m={identifier:u,continueUri:ho()?gi():"http://localhost"},{signinMethods:v}=yield function ea(p,u){return Zv.apply(this,arguments)}((0,ee.Ku)(p),m);return v||[]}),Jv.apply(this,arguments)}function pg(){return pg=(0,D.A)(function*(p,u){const d=(0,ee.Ku)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};u&&_o(d.auth,v,u);const{email:w}=yield function Rb(p,u){return Yp.apply(this,arguments)}(d.auth,v);w!==p.email&&(yield p.reload())}),pg.apply(this,arguments)}function gg(){return gg=(0,D.A)(function*(p,u,d){const m=(0,ee.Ku)(p),w={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:u};d&&_o(m.auth,w,d);const{email:R}=yield function Nb(p,u){return Jp.apply(this,arguments)}(m.auth,w);R!==p.email&&(yield p.reload())}),gg.apply(this,arguments)}function oi(){return(oi=(0,D.A)(function*(p,u){return Oe(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Xv(){return Xv=(0,D.A)(function*(p,{displayName:u,photoURL:d}){if(void 0===u&&void 0===d)return;const m=(0,ee.Ku)(p),w={idToken:yield m.getIdToken(),displayName:u,photoUrl:d,returnSecureToken:!0},R=yield Wr(m,function Qx(p,u){return oi.apply(this,arguments)}(m.auth,w));m.displayName=R.displayName||null,m.photoURL=R.photoUrl||null;const B=m.providerData.find(({providerId:re})=>"password"===re);B&&(B.displayName=m.displayName,B.photoURL=m.photoURL),yield m._updateTokensIfNecessary(R)}),Xv.apply(this,arguments)}function Zb(p,u,d){return eE.apply(this,arguments)}function eE(){return eE=(0,D.A)(function*(p,u,d){const{auth:m}=p,w={idToken:yield p.getIdToken(),returnSecureToken:!0};u&&(w.email=u),d&&(w.password=d);const R=yield Wr(p,function Fx(p,u){return Rv.apply(this,arguments)}(m,w));yield p._updateTokensIfNecessary(R,!0)}),eE.apply(this,arguments)}class lu{constructor(u,d,m={}){this.isNewUser=u,this.providerId=d,this.profile=m}}class vi extends lu{constructor(u,d,m,v){super(u,d,m),this.username=v}}class eh extends lu{constructor(u,d){super(u,"facebook.com",d)}}class Jb extends vi{constructor(u,d){super(u,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class tE extends lu{constructor(u,d){super(u,"google.com",d)}}class Xb extends vi{constructor(u,d,m){super(u,"twitter.com",d,m)}}function th(p){const{user:u,_tokenResponse:d}=p;return u.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function Ve(p){var u,d;if(!p)return null;const{providerId:m}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},w=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!m&&p?.idToken){const R=null===(d=null===(u=Go(p.idToken))||void 0===u?void 0:u.firebase)||void 0===d?void 0:d.sign_in_provider;if(R)return new lu(w,"anonymous"!==R&&"custom"!==R?R:null)}if(!m)return null;switch(m){case"facebook.com":return new eh(w,v);case"github.com":return new Jb(w,v);case"google.com":return new tE(w,v);case"twitter.com":return new Xb(w,v,p.screenName||null);case"custom":case"anonymous":return new lu(w,null);default:return new lu(w,m,v)}}(d)}class Fl{constructor(u,d,m){this.type=u,this.credential=d,this.user=m}static _fromIdtoken(u,d){return new Fl("enroll",u,d)}static _fromMfaPendingCredential(u){return new Fl("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var d,m;if(u?.multiFactorSession){if(null!==(d=u.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Fl._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(m=u.multiFactorSession)&&void 0!==m&&m.idToken)return Fl._fromIdtoken(u.multiFactorSession.idToken)}return null}}class aE{constructor(u,d,m){this.session=u,this.hints=d,this.signInResolver=m}static _fromError(u,d){const m=Lt(u),v=d.customData._serverResponse,w=(v.mfaInfo||[]).map(B=>ji._fromServerResponse(m,B));fe(v.mfaPendingCredential,m,"internal-error");const R=Fl._fromMfaPendingCredential(v.mfaPendingCredential);return new aE(R,w,function(){var B=(0,D.A)(function*(re){const Ae=yield re._process(m,R);delete v.mfaInfo,delete v.mfaPendingCredential;const Le=Object.assign(Object.assign({},v),{idToken:Ae.idToken,refreshToken:Ae.refreshToken});switch(d.operationType){case"signIn":const ke=yield os._fromIdTokenResponse(m,d.operationType,Le);return yield m._updateCurrentUser(ke.user),ke;case"reauthenticate":return fe(d.user,m,"internal-error"),os._forOperation(d.user,d.operationType,Le);default:Bt(m,"internal-error")}});return function(re){return B.apply(this,arguments)}}())}resolveSignIn(u){var d=this;return(0,D.A)(function*(){return d.signInResolver(u)})()}}class $a{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(m=>ji._fromServerResponse(u.auth,m)))})}static _fromUser(u){return new $a(u)}getSession(){var u=this;return(0,D.A)(function*(){return Fl._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,d){var m=this;return(0,D.A)(function*(){const v=u,w=yield m.getSession(),R=yield Wr(m.user,v._process(m.user.auth,w,d));return yield m.user._updateTokensIfNecessary(R),m.user.reload()})()}unenroll(u){var d=this;return(0,D.A)(function*(){const m="string"==typeof u?u:u.uid,v=yield d.user.getIdToken();try{const w=yield Wr(d.user,function yo(p,u){return Oe(p,"POST","/v2/accounts/mfaEnrollment:withdraw",ce(p,u))}(d.user.auth,{idToken:v,mfaEnrollmentId:m}));d.enrolledFactors=d.enrolledFactors.filter(({uid:R})=>R!==m),yield d.user._updateTokensIfNecessary(w),yield d.user.reload()}catch(w){throw w}})()}}const nh=new WeakMap,Nt="__sak";class nA{constructor(u,d){this.storageRetriever=u,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Nt,"1"),this.storage.removeItem(Nt),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,d){return this.storage.setItem(u,JSON.stringify(d)),Promise.resolve()}_get(u){const d=this.storage.getItem(u);return Promise.resolve(d?JSON.parse(d):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ll=(()=>{class p extends nA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,m)=>this.onStorageEvent(d,m),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function rA(){const p=(0,ee.ZQ)();return Ml(p)||Qo(p)}()&&function it(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Me(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const m of Object.keys(this.listeners)){const v=this.storage.getItem(m),w=this.localCache[m];v!==w&&d(m,w,v)}}onStorageEvent(d,m=!1){if(!d.key)return void this.forAllChangedKeys((B,re,Ae)=>{this.notifyListeners(B,Ae)});const v=d.key;if(m?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const B=this.storage.getItem(v);if(d.newValue!==B)null!==d.newValue?this.storage.setItem(v,d.newValue):this.storage.removeItem(v);else if(this.localCache[v]===d.newValue&&!m)return}const w=()=>{const B=this.storage.getItem(v);!m&&this.localCache[v]===B||this.notifyListeners(v,B)},R=this.storage.getItem(v);!function ie(){return(0,ee.lT)()&&10===document.documentMode}()||R===d.newValue||d.newValue===d.oldValue?w():setTimeout(w,10)}notifyListeners(d,m){this.localCache[d]=m;const v=this.listeners[d];if(v)for(const w of Array.from(v))w(m&&JSON.parse(m))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,m,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:m,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,m){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(m)}_removeListener(d,m){this.listeners[d]&&(this.listeners[d].delete(m),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,m){var v=()=>super._set,w=this;return(0,D.A)(function*(){yield v().call(w,d,m),w.localCache[d]=JSON.stringify(m)})()}_get(d){var m=()=>super._get,v=this;return(0,D.A)(function*(){const w=yield m().call(v,d);return v.localCache[d]=JSON.stringify(w),w})()}_remove(d){var m=()=>super._remove,v=this;return(0,D.A)(function*(){yield m().call(v,d),delete v.localCache[d]})()}}return p.type="LOCAL",p})(),qs=(()=>{class p extends nA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,m){}_removeListener(d,m){}}return p.type="SESSION",p})();let Ei=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const m=this.receivers.find(w=>w.isListeningto(d));if(m)return m;const v=new p(d);return this.receivers.push(v),v}isListeningto(d){return this.eventTarget===d}handleEvent(d){var m=this;return(0,D.A)(function*(){const v=d,{eventId:w,eventType:R,data:B}=v.data,re=m.handlersMap[R];if(!re?.size)return;v.ports[0].postMessage({status:"ack",eventId:w,eventType:R});const Ae=Array.from(re).map(function(){var ke=(0,D.A)(function*(Xt){return Xt(v.origin,B)});return function(Xt){return ke.apply(this,arguments)}}()),Le=yield function uE(p){return Promise.all(p.map(function(){var u=(0,D.A)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(m){return{fulfilled:!1,reason:m}}});return function(d){return u.apply(this,arguments)}}()))}(Ae);v.ports[0].postMessage({status:"done",eventId:w,eventType:R,response:Le})})()}_subscribe(d,m){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(m)}_unsubscribe(d,m){this.handlersMap[d]&&m&&this.handlersMap[d].delete(m),(!m||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function Vl(p="",u=10){let d="";for(let m=0;m<u;m++)d+=Math.floor(10*Math.random());return p+d}class tk{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,d,m=50){var v=this;return(0,D.A)(function*(){const w=typeof MessageChannel<"u"?new MessageChannel:null;if(!w)throw new Error("connection_unavailable");let R,B;return new Promise((re,Ae)=>{const Le=Vl("",20);w.port1.start();const ke=setTimeout(()=>{Ae(new Error("unsupported_event"))},m);B={messageChannel:w,onMessage(Xt){const As=Xt;if(As.data.eventId===Le)switch(As.data.status){case"ack":clearTimeout(ke),R=setTimeout(()=>{Ae(new Error("timeout"))},3e3);break;case"done":clearTimeout(R),re(As.data.response);break;default:clearTimeout(ke),clearTimeout(R),Ae(new Error("invalid_response"))}}},v.handlers.add(B),w.port1.addEventListener("message",B.onMessage),v.target.postMessage({eventType:u,eventId:Le,data:d},[w.port2])}).finally(()=>{B&&v.removeMessageHandler(B)})})()}}function hr(){return window}function du(){return typeof hr().WorkerGlobalScope<"u"&&"function"==typeof hr().importScripts}function Cg(){return(Cg=(0,D.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ig="firebaseLocalStorageDb",ih="firebaseLocalStorage",vo="fbase_key";class hu{constructor(u){this.request=u}toPromise(){return new Promise((u,d)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function ge(p,u){return p.transaction([ih],u?"readwrite":"readonly").objectStore(ih)}function ue(){const p=indexedDB.open(Ig,1);return new Promise((u,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const m=p.result;try{m.createObjectStore(ih,{keyPath:vo})}catch(v){d(v)}}),p.addEventListener("success",(0,D.A)(function*(){const m=p.result;m.objectStoreNames.contains(ih)?u(m):(m.close(),yield function dE(){const p=indexedDB.deleteDatabase(Ig);return new hu(p).toPromise()}(),u(yield ue()))}))})}function fu(p,u,d){return pu.apply(this,arguments)}function pu(){return(pu=(0,D.A)(function*(p,u,d){const m=ge(p,!0).put({[vo]:u,value:d});return new hu(m).toPromise()})).apply(this,arguments)}function wg(){return(wg=(0,D.A)(function*(p,u){const d=ge(p,!1).get(u),m=yield new hu(d).toPromise();return void 0===m?null:m.value})).apply(this,arguments)}function hE(p,u){const d=ge(p,!0).delete(u);return new hu(d).toPromise()}const Bl=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,D.A)(function*(){return d.db||(d.db=yield ue()),d.db})()}_withRetries(d){var m=this;return(0,D.A)(function*(){let v=0;for(;;)try{const w=yield m._openDb();return yield d(w)}catch(w){if(v++>3)throw w;m.db&&(m.db.close(),m.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,D.A)(function*(){return du()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,D.A)(function*(){d.receiver=Ei._getInstance(function oA(){return du()?self:null}()),d.receiver._subscribe("keyChanged",function(){var m=(0,D.A)(function*(v,w){return{keyProcessed:(yield d._poll()).includes(w.key)}});return function(v,w){return m.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var m=(0,D.A)(function*(v,w){return["keyChanged"]});return function(v,w){return m.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,D.A)(function*(){var m,v;if(d.activeServiceWorker=yield function rh(){return Cg.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new tk(d.activeServiceWorker);const w=yield d.sender._send("ping",{},800);w&&null!==(m=w[0])&&void 0!==m&&m.fulfilled&&null!==(v=w[0])&&void 0!==v&&v.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var m=this;return(0,D.A)(function*(){if(m.sender&&m.activeServiceWorker&&function sA(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===m.activeServiceWorker)try{yield m.sender._send("keyChanged",{key:d},m.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,D.A)(function*(){try{if(!indexedDB)return!1;const d=yield ue();return yield fu(d,Nt,"1"),yield hE(d,Nt),!0}catch{}return!1})()}_withPendingWrite(d){var m=this;return(0,D.A)(function*(){m.pendingWrites++;try{yield d()}finally{m.pendingWrites--}})()}_set(d,m){var v=this;return(0,D.A)(function*(){return v._withPendingWrite((0,D.A)(function*(){return yield v._withRetries(w=>fu(w,d,m)),v.localCache[d]=m,v.notifyServiceWorker(d)}))})()}_get(d){var m=this;return(0,D.A)(function*(){const v=yield m._withRetries(w=>function gu(p,u){return wg.apply(this,arguments)}(w,d));return m.localCache[d]=v,v})()}_remove(d){var m=this;return(0,D.A)(function*(){return m._withPendingWrite((0,D.A)(function*(){return yield m._withRetries(v=>hE(v,d)),delete m.localCache[d],m.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,D.A)(function*(){const m=yield d._withRetries(R=>{const B=ge(R,!1).getAll();return new hu(B).toPromise()});if(!m)return[];if(0!==d.pendingWrites)return[];const v=[],w=new Set;if(0!==m.length)for(const{fbase_key:R,value:B}of m)w.add(R),JSON.stringify(d.localCache[R])!==JSON.stringify(B)&&(d.notifyListeners(R,B),v.push(R));for(const R of Object.keys(d.localCache))d.localCache[R]&&!w.has(R)&&(d.notifyListeners(R,null),v.push(R));return v})()}notifyListeners(d,m){this.localCache[d]=m;const v=this.listeners[d];if(v)for(const w of Array.from(v))w(m)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,D.A)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,m){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(m)}_removeListener(d,m){this.listeners[d]&&(this.listeners[d].delete(m),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),Eo=1e12;class fE{constructor(u){this.auth=u,this.counter=Eo,this._widgets=new Map}render(u,d){const m=this.counter;return this._widgets.set(m,new ah(u,this.auth.name,d||{})),this.counter++,m}reset(u){var d;const m=u||Eo;null===(d=this._widgets.get(m))||void 0===d||d.delete(),this._widgets.delete(m)}getResponse(u){var d;return(null===(d=this._widgets.get(u||Eo))||void 0===d?void 0:d.getResponse())||""}execute(u){var d=this;return(0,D.A)(function*(){var m;return null===(m=d._widgets.get(u||Eo))||void 0===m||m.execute(),""})()}}class ah{constructor(u,d,m){this.params=m,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof u?document.getElementById(u):u;fe(v,"argument-error",{appName:d}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function lh(p){const u=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<p;m++)u.push(d.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":d}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const mu=Av("rcb"),nk=new K(3e4,6e4);class pE{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=hr().grecaptcha)||void 0===u||!u.render)}load(u,d=""){return fe(function rk(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),u,"argument-error"),this.shouldResolveImmediately(d)&&zt(hr().grecaptcha)?Promise.resolve(hr().grecaptcha):new Promise((m,v)=>{const w=hr().setTimeout(()=>{v(jt(u,"network-request-failed"))},nk.get());hr()[mu]=()=>{hr().clearTimeout(w),delete hr()[mu];const B=hr().grecaptcha;if(!B||!zt(B))return void v(jt(u,"internal-error"));const re=B.render;B.render=(Ae,Le)=>{const ke=re(Ae,Le);return this.counter++,ke},this.hostLanguage=d,m(B)},Hd(`${function Tv(){return ss.recaptchaV2Script}()}?${(0,ee.Am)({onload:mu,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(w),v(jt(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var d;return!(null===(d=hr().grecaptcha)||void 0===d||!d.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $i{load(u){return(0,D.A)(function*(){return new fE(u)})()}clearedOneInstance(){}}const ch="recaptcha",jl={theme:"light",type:"image"};class ik{constructor(u,d,m=Object.assign({},jl)){this.parameters=m,this.type=ch,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Lt(u),this.isInvisible="invisible"===this.parameters.size,fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof d?document.getElementById(d):d;fe(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $i:new pE,this.validateStartingState()}verify(){var u=this;return(0,D.A)(function*(){u.assertNotDestroyed();const d=yield u.render(),m=u.getAssertedRecaptcha();return m.getResponse(d)||new Promise(w=>{const R=B=>{B&&(u.tokenChangeListeners.delete(R),w(B))};u.tokenChangeListeners.add(R),u.isInvisible&&m.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return d=>{if(this.tokenChangeListeners.forEach(m=>m(d)),"function"==typeof u)u(d);else if("string"==typeof u){const m=hr()[u];"function"==typeof m&&m(d)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,D.A)(function*(){if(yield u.init(),!u.widgetId){let d=u.container;if(!u.isInvisible){const m=document.createElement("div");d.appendChild(m),d=m}u.widgetId=u.getAssertedRecaptcha().render(d,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,D.A)(function*(){fe(ho()&&!du(),u.auth,"internal-error"),yield function gE(){let p=null;return new Promise(u=>{"complete"!==document.readyState?(p=()=>u(),window.addEventListener("load",p)):u()}).catch(u=>{throw p&&window.removeEventListener("load",p),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const d=yield function Dl(p){return mi.apply(this,arguments)}(u.auth);fe(d,u.auth,"internal-error"),u.parameters.sitekey=d})()}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class as{constructor(u,d){this.verificationId=u,this.onConfirmation=d}confirm(u){const d=Ba._fromVerification(this.verificationId,u);return this.onConfirmation(d)}}function ls(){return(ls=(0,D.A)(function*(p,u,d){if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject(et(p));const m=Lt(p),v=yield Ii(m,u,(0,ee.Ku)(d));return new as(v,w=>dg(m,w))})).apply(this,arguments)}function _u(){return(_u=(0,D.A)(function*(p,u,d){const m=(0,ee.Ku)(p);yield cg(!1,m,"phone");const v=yield Ii(m.auth,u,(0,ee.Ku)(d));return new as(v,w=>hg(m,w))})).apply(this,arguments)}function $l(){return($l=(0,D.A)(function*(p,u,d){const m=(0,ee.Ku)(p);if((0,Ne._isFirebaseServerApp)(m.auth.app))return Promise.reject(et(m.auth));const v=yield Ii(m.auth,u,(0,ee.Ku)(d));return new as(v,w=>ja(m,w))})).apply(this,arguments)}function Ii(p,u,d){return ta.apply(this,arguments)}function ta(){return ta=(0,D.A)(function*(p,u,d){var m;const v=yield d.verify();try{let w;if(fe("string"==typeof v,p,"argument-error"),fe(d.type===ch,p,"argument-error"),w="string"==typeof u?{phoneNumber:u}:u,"session"in w){const R=w.session;if("phoneNumber"in w)return fe("enroll"===R.type,p,"internal-error"),(yield function cu(p,u){return Oe(p,"POST","/v2/accounts/mfaEnrollment:start",ce(p,u))}(p,{idToken:R.credential,phoneEnrollmentInfo:{phoneNumber:w.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{fe("signin"===R.type,p,"internal-error");const B=(null===(m=w.multiFactorHint)||void 0===m?void 0:m.uid)||w.multiFactorUid;return fe(B,p,"missing-multi-factor-info"),(yield function oh(p,u){return Oe(p,"POST","/v2/accounts/mfaSignIn:start",ce(p,u))}(p,{mfaPendingCredential:R.credential,mfaEnrollmentId:B,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:R}=yield function Lb(p,u){return ng.apply(this,arguments)}(p,{phoneNumber:w.phoneNumber,recaptchaToken:v});return R}}finally{d._reset()}}),ta.apply(this,arguments)}function yu(){return(yu=(0,D.A)(function*(p,u){const d=(0,ee.Ku)(p);if((0,Ne._isFirebaseServerApp)(d.auth.app))return Promise.reject(et(d.auth));yield ag(d,u)})).apply(this,arguments)}let Hl=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=Lt(d)}verifyPhoneNumber(d,m){return Ii(this.auth,d,(0,ee.Ku)(m))}static credential(d,m){return Ba._fromVerification(d,m)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:m,temporaryProof:v}=d;return m&&v?Ba._fromTokenResponse(m,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function na(p,u){return u?It(u):(fe(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class za extends Ua{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return po(u,this._buildIdpRequest())}_linkToIdToken(u,d){return po(u,this._buildIdpRequest(d))}_getReauthenticationResolver(u){return po(u,this._buildIdpRequest())}_buildIdpRequest(u){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(d.idToken=u),d}}function _E(p){return Kb(p.auth,new za(p),p.bypassAuthState)}function yE(p){const{auth:u,user:d}=p;return fe(d,u,"internal-error"),Wb(d,new za(p),p.bypassAuthState)}function hA(p){return vu.apply(this,arguments)}function vu(){return(vu=(0,D.A)(function*(p){const{auth:u,user:d}=p;return fe(d,u,"internal-error"),ag(d,new za(p),p.bypassAuthState)})).apply(this,arguments)}class vE{constructor(u,d,m,v,w=!1){this.auth=u,this.resolver=m,this.user=v,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var u=this;return new Promise(function(){var d=(0,D.A)(function*(m,v){u.pendingPromise={resolve:m,reject:v};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(w){u.reject(w)}});return function(m,v){return d.apply(this,arguments)}}())}onAuthEvent(u){var d=this;return(0,D.A)(function*(){const{urlResponse:m,sessionId:v,postBody:w,tenantId:R,error:B,type:re}=u;if(B)return void d.reject(B);const Ae={auth:d.auth,requestUri:m,sessionId:v,tenantId:R||void 0,postBody:w||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(re)(Ae))}catch(Le){d.reject(Le)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return _E;case"linkViaPopup":case"linkViaRedirect":return hA;case"reauthViaPopup":case"reauthViaRedirect":return yE;default:Bt(this.auth,"internal-error")}}resolve(u){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fA=new K(2e3,1e4);function Tg(){return(Tg=(0,D.A)(function*(p,u,d){if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject(jt(p,"operation-not-supported-in-this-environment"));const m=Lt(p);jn(p,u,mo);const v=na(m,d);return new Sg(m,"signInViaPopup",u,v).executeNotNull()})).apply(this,arguments)}function bg(){return(bg=(0,D.A)(function*(p,u,d){const m=(0,ee.Ku)(p);if((0,Ne._isFirebaseServerApp)(m.auth.app))return Promise.reject(jt(m.auth,"operation-not-supported-in-this-environment"));jn(m.auth,u,mo);const v=na(m.auth,d);return new Sg(m.auth,"reauthViaPopup",u,v,m).executeNotNull()})).apply(this,arguments)}function Ag(){return(Ag=(0,D.A)(function*(p,u,d){const m=(0,ee.Ku)(p);jn(m.auth,u,mo);const v=na(m.auth,d);return new Sg(m.auth,"linkViaPopup",u,v,m).executeNotNull()})).apply(this,arguments)}let Sg=(()=>{class p extends vE{constructor(d,m,v,w,R){super(d,m,w,R),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,D.A)(function*(){const m=yield d.execute();return fe(m,d.auth,"internal-error"),m})()}onExecution(){var d=this;return(0,D.A)(function*(){wr(1===d.filter.length,"Popup operations only handle one event");const m=Vl();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],m),d.authWindow.associatedEvent=m,d.resolver._originValidation(d.auth).catch(v=>{d.reject(v)}),d.resolver._isIframeWebStorageSupported(d.auth,v=>{v||d.reject(jt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var m,v;this.pollId=null!==(v=null===(m=this.authWindow)||void 0===m?void 0:m.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(jt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,fA.get())};d()}}return p.currentPopupAction=null,p})();const CE="pendingRedirect",Eu=new Map;class gA extends vE{constructor(u,d,m=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,m),this.eventId=null}execute(){var u=()=>super.execute,d=this;return(0,D.A)(function*(){let m=Eu.get(d.auth._key());if(!m){try{const w=(yield function mA(p,u){return Sr.apply(this,arguments)}(d.resolver,d.auth))?yield u().call(d):null;m=()=>Promise.resolve(w)}catch(v){m=()=>Promise.reject(v)}Eu.set(d.auth._key(),m)}return d.bypassAuthState||Eu.set(d.auth._key(),()=>Promise.resolve(null)),m()})()}onAuthEvent(u){var d=()=>super.onAuthEvent,m=this;return(0,D.A)(function*(){if("signInViaRedirect"===u.type)return d().call(m,u);if("unknown"!==u.type){if(u.eventId){const v=yield m.auth._redirectUserForId(u.eventId);if(v)return m.user=v,d().call(m,u);m.resolve(null)}}else m.resolve(null)})()}onExecution(){return(0,D.A)(function*(){})()}cleanUp(){}}function Sr(){return(Sr=(0,D.A)(function*(p,u){const d=ai(u),m=nt(p);if(!(yield m._isAvailable()))return!1;const v="true"===(yield m._get(d));return yield m._remove(d),v})).apply(this,arguments)}function Dg(p,u){return Pg.apply(this,arguments)}function Pg(){return(Pg=(0,D.A)(function*(p,u){return nt(p)._set(ai(u),"true")})).apply(this,arguments)}function dh(p,u){Eu.set(p._key(),u)}function nt(p){return It(p._redirectPersistence)}function ai(p){return Ar(CE,p.config.apiKey,p.name)}function yt(p,u,d){return function fr(p,u,d){return pr.apply(this,arguments)}(p,u,d)}function pr(){return(pr=(0,D.A)(function*(p,u,d){if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject(et(p));const m=Lt(p);jn(p,u,mo),yield m._initializationPromise;const v=na(m,d);return yield Dg(v,m),v._openRedirect(m,u,"signInViaRedirect")})).apply(this,arguments)}function ra(p,u,d){return function Kr(p,u,d){return hh.apply(this,arguments)}(p,u,d)}function hh(){return(hh=(0,D.A)(function*(p,u,d){const m=(0,ee.Ku)(p);if(jn(m.auth,u,mo),(0,Ne._isFirebaseServerApp)(m.auth.app))return Promise.reject(et(m.auth));yield m.auth._initializationPromise;const v=na(m.auth,d);yield Dg(v,m.auth);const w=yield Rg(m);return v._openRedirect(m.auth,u,"reauthViaRedirect",w)})).apply(this,arguments)}function IE(p,u,d){return function fh(p,u,d){return Mg.apply(this,arguments)}(p,u,d)}function Mg(){return(Mg=(0,D.A)(function*(p,u,d){const m=(0,ee.Ku)(p);jn(m.auth,u,mo),yield m.auth._initializationPromise;const v=na(m.auth,d);yield cg(!1,m,u.providerId),yield Dg(v,m.auth);const w=yield Rg(m);return v._openRedirect(m.auth,u,"linkViaRedirect",w)})).apply(this,arguments)}function zl(){return(zl=(0,D.A)(function*(p,u){return yield Lt(p)._initializationPromise,ph(p,u,!1)})).apply(this,arguments)}function ph(p,u){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,D.A)(function*(p,u,d=!1){if((0,Ne._isFirebaseServerApp)(p.app))return Promise.reject(et(p));const m=Lt(p),v=na(m,u),R=yield new gA(m,v,d).execute();return R&&!d&&(delete R.user._redirectEventId,yield m._persistUserIfCurrent(R.user),yield m._setRedirectUser(null,u)),R})).apply(this,arguments)}function Rg(p){return ql.apply(this,arguments)}function ql(){return(ql=(0,D.A)(function*(p){const u=Vl(`${p.uid}:::`);return p._redirectEventId=u,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),u})).apply(this,arguments)}class gh{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let d=!1;return this.consumers.forEach(m=>{this.isEventForConsumer(u,m)&&(d=!0,this.sendToConsumer(u,m),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function TE(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mh(p);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=u,d=!0)),d}sendToConsumer(u,d){var m;if(u.error&&!mh(u)){const v=(null===(m=u.error.code)||void 0===m?void 0:m.split("auth/")[1])||"internal-error";d.onError(jt(this.auth,v))}else d.onAuthEvent(u)}isEventForConsumer(u,d){const m=null===d.eventId||!!u.eventId&&u.eventId===d.eventId;return d.filter.includes(u.type)&&m}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(wE(u))}saveEventToCache(u){this.cachedEventUids.add(wE(u)),this.lastProcessedEventTime=Date.now()}}function wE(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(u=>u).join("-")}function mh({type:p,error:u}){return"unknown"===p&&"auth/no-auth-event"===u?.code}function Og(p){return Co.apply(this,arguments)}function Co(){return(Co=(0,D.A)(function*(p,u={}){return Oe(p,"GET","/v1/projects",u)})).apply(this,arguments)}const yA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ng=/^https?/;function xg(){return(xg=(0,D.A)(function*(p){if(p.config.emulator)return;const{authorizedDomains:u}=yield Og(p);for(const d of u)try{if(kg(d))return}catch{}Bt(p,"unauthorized-domain")})).apply(this,arguments)}function kg(p){const u=gi(),{protocol:d,hostname:m}=new URL(u);if(p.startsWith("chrome-extension://")){const R=new URL(p);return""===R.hostname&&""===m?"chrome-extension:"===d&&p.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===d&&R.hostname===m}if(!Ng.test(d))return!1;if(yA.test(p))return m===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(m)}const yh=new K(3e4,6e4);function Qr(){const p=hr().___jsl;if(p?.H)for(const u of Object.keys(p.H))if(p.H[u].r=p.H[u].r||[],p.H[u].L=p.H[u].L||[],p.H[u].r=[...p.H[u].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let Wl=null;const EA=new K(5e3,15e3),bE="__/auth/iframe",Kl="emulator/auth/iframe",CA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wA(p){const u=p.config;fe(u.authDomain,p,"auth-domain-config-required");const d=u.emulator?X(u,Kl):`https://${p.config.authDomain}/${bE}`,m={apiKey:u.apiKey,appName:p.name,v:Ne.SDK_VERSION},v=IA.get(p.config.apiHost);v&&(m.eid=v);const w=p._getFrameworks();return w.length&&(m.fw=w.join(",")),`${d}?${(0,ee.Am)(m).slice(1)}`}function Hi(){return Hi=(0,D.A)(function*(p){const u=yield function vA(p){return Wl=Wl||function Gl(p){return new Promise((u,d)=>{var m,v,w;function R(){Qr(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{Qr(),d(jt(p,"network-request-failed"))},timeout:yh.get()})}if(null!==(v=null===(m=hr().gapi)||void 0===m?void 0:m.iframes)&&void 0!==v&&v.Iframe)u(gapi.iframes.getContext());else{if(null===(w=hr().gapi)||void 0===w||!w.load){const B=Av("iframefcb");return hr()[B]=()=>{gapi.load?R():d(jt(p,"network-request-failed"))},Hd(`${function wb(){return ss.gapiScript}()}?onload=${B}`).catch(re=>d(re))}R()}}).catch(u=>{throw Wl=null,u})}(p),Wl}(p),d=hr().gapi;return fe(d,p,"internal-error"),u.open({where:document.body,url:wA(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CA,dontclear:!0},m=>new Promise(function(){var v=(0,D.A)(function*(w,R){yield m.restyle({setHideOnLeave:!1});const B=jt(p,"network-request-failed"),re=hr().setTimeout(()=>{R(B)},EA.get());function Ae(){hr().clearTimeout(re),w(m)}m.ping(Ae).then(Ae,()=>{R(B)})});return function(w,R){return v.apply(this,arguments)}}()))}),Hi.apply(this,arguments)}const AE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rr{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Iu="__/auth/handler",SA="emulator/auth/handler",DA=encodeURIComponent("fac");function Lg(p,u,d,m,v,w){return Vg.apply(this,arguments)}function Vg(){return(Vg=(0,D.A)(function*(p,u,d,m,v,w){fe(p.config.authDomain,p,"auth-domain-config-required"),fe(p.config.apiKey,p,"invalid-api-key");const R={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:m,v:Ne.SDK_VERSION,eventId:v};if(u instanceof mo){u.setDefaultLanguage(p.languageCode),R.providerId=u.providerId||"",(0,ee.Im)(u.getCustomParameters())||(R.customParameters=JSON.stringify(u.getCustomParameters()));for(const[Le,ke]of Object.entries(w||{}))R[Le]=ke}if(u instanceof Zo){const Le=u.getScopes().filter(ke=>""!==ke);Le.length>0&&(R.scopes=Le.join(","))}p.tenantId&&(R.tid=p.tenantId);const B=R;for(const Le of Object.keys(B))void 0===B[Le]&&delete B[Le];const re=yield p._getAppCheckToken(),Ae=re?`#${DA}=${encodeURIComponent(re)}`:"";return`${function PA({config:p}){return p.emulator?X(p,SA):`https://${p.authDomain}/${Iu}`}(p)}?${(0,ee.Am)(B).slice(1)}${Ae}`})).apply(this,arguments)}const Ug="webStorageSupport",wu=class Bg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qs,this._completeRedirectFn=ph,this._overrideRedirectResult=dh}_openPopup(u,d,m,v){var w=this;return(0,D.A)(function*(){var R;wr(null===(R=w.eventManagers[u._key()])||void 0===R?void 0:R.manager,"_initialize() not called before _openPopup()");const B=yield Lg(u,d,m,gi(),v);return function SE(p,u,d,m=500,v=600){const w=Math.max((window.screen.availHeight-v)/2,0).toString(),R=Math.max((window.screen.availWidth-m)/2,0).toString();let B="";const re=Object.assign(Object.assign({},AE),{width:m.toString(),height:v.toString(),top:w,left:R}),Ae=(0,ee.ZQ)().toLowerCase();d&&(B=jd(Ae)?"_blank":d),Ko(Ae)&&(u=u||"http://localhost",re.scrollbars="yes");const Le=Object.entries(re).reduce((Xt,[As,Dh])=>`${Xt}${As}=${Dh},`,"");if(function $(p=(0,ee.ZQ)()){var u;return Qo(p)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(Ae)&&"_self"!==B)return function AA(p,u){const d=document.createElement("a");d.href=p,d.target=u;const m=document.createEvent("MouseEvent");m.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(m)}(u||"",B),new rr(null);const ke=window.open(u||"",B,Le);fe(ke,p,"popup-blocked");try{ke.focus()}catch{}return new rr(ke)}(u,B,Vl())})()}_openRedirect(u,d,m,v){var w=this;return(0,D.A)(function*(){return yield w._originValidation(u),function uu(p){hr().location.href=p}(yield Lg(u,d,m,gi(),v)),new Promise(()=>{})})()}_initialize(u){const d=u._key();if(this.eventManagers[d]){const{manager:v,promise:w}=this.eventManagers[d];return v?Promise.resolve(v):(wr(w,"If manager is not set, promise should be"),w)}const m=this.initAndGetManager(u);return this.eventManagers[d]={promise:m},m.catch(()=>{delete this.eventManagers[d]}),m}initAndGetManager(u){var d=this;return(0,D.A)(function*(){const m=yield function Fg(p){return Hi.apply(this,arguments)}(u),v=new gh(u);return m.register("authEvent",w=>(fe(w?.authEvent,u,"invalid-auth-event"),{status:v.onEvent(w.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[u._key()]={manager:v},d.iframes[u._key()]=m,v})()}_isIframeWebStorageSupported(u,d){this.iframes[u._key()].send(Ug,{type:Ug},v=>{var w;const R=null===(w=v?.[0])||void 0===w?void 0:w[Ug];void 0!==R&&d(!!R),Bt(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function _h(p){return xg.apply(this,arguments)}(u)),this.originValidationPromises[d]}get _shouldInitProactively(){return Me()||Ml()||Qo()}};class vn{constructor(u){this.factorId=u}_process(u,d,m){switch(d.type){case"enroll":return this._finalizeEnroll(u,d.credential,m);case"signin":return this._finalizeSignIn(u,d.credential);default:return Qn("unexpected MultiFactorSessionType")}}}class Ee extends vn{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new Ee(u)}_finalizeEnroll(u,d,m){return function Eg(p,u){return Oe(p,"POST","/v2/accounts/mfaEnrollment:finalize",ce(p,u))}(u,{idToken:d,displayName:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,d){return function cA(p,u){return Oe(p,"POST","/v2/accounts/mfaSignIn:finalize",ce(p,u))}(u,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ke=(()=>{class p{constructor(){}static assertion(d){return Ee._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var qa="@firebase/auth";class ir{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var d=this;return(0,D.A)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const d=this.auth.onIdTokenChanged(m=>{u(m?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,d),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const d=this.internalListeners.get(u);d&&(this.internalListeners.delete(u),d(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function li(){return window}(0,ee.XA)("authIdTokenMaxAge"),function wv(p){ss=p}({loadJS:p=>new Promise((u,d)=>{const m=document.createElement("script");m.setAttribute("src",p),m.onload=u,m.onerror=v=>{const w=jt("internal-error");w.customData=v,d(w)},m.type="text/javascript",m.charset="UTF-8",function Zl(){var p,u;return null!==(u=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==u?u:document}().appendChild(m)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function rt(p){(0,Ne._registerComponent)(new Kn.uA("auth",(u,{options:d})=>{const m=u.getProvider("app").getImmediate(),v=u.getProvider("heartbeat"),w=u.getProvider("app-check-internal"),{apiKey:R,authDomain:B}=m.options;fe(R&&!R.includes(":"),"invalid-api-key",{appName:m.name});const re={apiKey:R,authDomain:B,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lt(p)},Ae=new Iv(m,v,w,re);return function Dv(p,u){const d=u?.persistence||[],m=(Array.isArray(d)?d:[d]).map(It);u?.errorMap&&p._updateErrorMap(u.errorMap),p._initializeWithPersistence(m,u?.popupRedirectResolver)}(Ae,d),Ae},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,d,m)=>{u.getProvider("auth-internal").initialize()})),(0,Ne._registerComponent)(new Kn.uA("auth-internal",u=>{const d=Lt(u.getProvider("auth").getImmediate());return new ir(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Ne.registerVersion)(qa,"1.7.6",function Gs(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,Ne.registerVersion)(qa,"1.7.6","esm2017")}("Browser");function Ws(){return Ws=(0,D.A)(function*(p,u,d){var m;const{BuildInfo:v}=li();wr(u.sessionId,"AuthEvent did not contain a session ID");const w=yield function Ch(p){return ia.apply(this,arguments)}(u.sessionId),R={};return Qo()?R.ibi=v.packageName:xe()?R.apn=v.packageName:Bt(p,"operation-not-supported-in-this-environment"),v.displayName&&(R.appDisplayName=v.displayName),R.sessionId=w,Lg(p,d,u.type,void 0,null!==(m=u.eventId)&&void 0!==m?m:void 0,R)}),Ws.apply(this,arguments)}function Io(){return(Io=(0,D.A)(function*(p){const{BuildInfo:u}=li(),d={};Qo()?d.iosBundleId=u.packageName:xe()?d.androidPackageName=u.packageName:Bt(p,"operation-not-supported-in-this-environment"),yield Og(p,d)})).apply(this,arguments)}function Wa(){return(Wa=(0,D.A)(function*(p,u,d){const{cordova:m}=li();let v=()=>{};try{yield new Promise((w,R)=>{let B=null;function re(){var ke;w();const Xt=null===(ke=m.plugins.browsertab)||void 0===ke?void 0:ke.close;"function"==typeof Xt&&Xt(),"function"==typeof d?.close&&d.close()}function Ae(){B||(B=window.setTimeout(()=>{R(jt(p,"redirect-cancelled-by-user"))},2e3))}function Le(){"visible"===document?.visibilityState&&Ae()}u.addPassiveListener(re),document.addEventListener("resume",Ae,!1),xe()&&document.addEventListener("visibilitychange",Le,!1),v=()=>{u.removePassiveListener(re),document.removeEventListener("resume",Ae,!1),document.removeEventListener("visibilitychange",Le,!1),B&&window.clearTimeout(B)}})}finally{v()}})).apply(this,arguments)}function ia(){return(ia=(0,D.A)(function*(p){const u=function Xn(p){if(wr(/[0-9a-zA-Z]+/.test(p),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(p);const u=new ArrayBuffer(p.length),d=new Uint8Array(u);for(let m=0;m<p.length;m++)d[m]=p.charCodeAt(m);return d}(p),d=yield crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(d)).map(v=>v.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Mr extends gh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(u=>{this.resolveInitialized=u})}addPassiveListener(u){this.passiveListeners.add(u)}removePassiveListener(u){this.passiveListeners.delete(u)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(u){return this.resolveInitialized(),this.passiveListeners.forEach(d=>d(u)),super.onEvent(u)}initialized(){var u=this;return(0,D.A)(function*(){yield u.initPromise})()}}function sa(p){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,D.A)(function*(p){const u=yield Hg()._get(zg(p));return u&&(yield Hg()._remove(zg(p))),u})).apply(this,arguments)}function bu(){const p=[];for(let d=0;d<20;d++){const m=Math.floor(62*Math.random());p.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(m))}return p.join("")}function Hg(){return It(Ll)}function zg(p){return Ar("authEvent",p.config.apiKey,p.name)}function wh(p){if(!p?.includes("?"))return{};const[u,...d]=p.split("?");return(0,ee.I9)(d.join("?"))}const ak=class ok{constructor(){this._redirectPersistence=qs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ph,this._overrideRedirectResult=dh}_initialize(u){var d=this;return(0,D.A)(function*(){const m=u._key();let v=d.eventManagers.get(m);return v||(v=new Mr(u),d.eventManagers.set(m,v),d.attachCallbackListeners(u,v)),v})()}_openPopup(u){Bt(u,"operation-not-supported-in-this-environment")}_openRedirect(u,d,m,v){var w=this;return(0,D.A)(function*(){!function Ks(p){var u,d,m,v,w,R,B,re,Ae,Le;const ke=li();fe("function"==typeof(null===(u=ke?.universalLinks)||void 0===u?void 0:u.subscribe),p,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),fe(typeof(null===(d=ke?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),fe("function"==typeof(null===(w=null===(v=null===(m=ke?.cordova)||void 0===m?void 0:m.plugins)||void 0===v?void 0:v.browsertab)||void 0===w?void 0:w.openUrl),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fe("function"==typeof(null===(re=null===(B=null===(R=ke?.cordova)||void 0===R?void 0:R.plugins)||void 0===B?void 0:B.browsertab)||void 0===re?void 0:re.isAvailable),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),fe("function"==typeof(null===(Le=null===(Ae=ke?.cordova)||void 0===Ae?void 0:Ae.InAppBrowser)||void 0===Le?void 0:Le.open),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(u);const R=yield w._initialize(u);yield R.initialized(),R.resetRedirect(),function cs(){Eu.clear()}(),yield w._originValidation(u);const B=function Yr(p,u,d=null){return{type:u,eventId:d,urlResponse:null,sessionId:bu(),postBody:null,tenantId:p.tenantId,error:jt(p,"no-auth-event")}}(u,m,v);yield function $g(p,u){return Hg()._set(zg(p),u)}(u,B);const re=yield function PE(p,u,d){return Ws.apply(this,arguments)}(u,B,d),Ae=yield function Qe(p){const{cordova:u}=li();return new Promise(d=>{u.plugins.browsertab.isAvailable(m=>{let v=null;m?u.plugins.browsertab.openUrl(p):v=u.InAppBrowser.open(p,function Z(p=(0,ee.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}()?"_blank":"_system","location=yes"),d(v)})})}(re);return function jg(p,u,d){return Wa.apply(this,arguments)}(u,R,Ae)})()}_isIframeWebStorageSupported(u,d){throw new Error("Method not implemented.")}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Eh(p){return Io.apply(this,arguments)}(u)),this.originValidationPromises[d]}attachCallbackListeners(u,d){const{universalLinks:m,handleOpenURL:v,BuildInfo:w}=li(),R=setTimeout((0,D.A)(function*(){yield sa(u),d.onEvent(MA())}),500),B=function(){var Le=(0,D.A)(function*(ke){clearTimeout(R);const Xt=yield sa(u);let As=null;Xt&&ke?.url&&(As=function bs(p,u){var d,m;const v=function ME(p){const u=wh(p),d=u.link?decodeURIComponent(u.link):void 0,m=wh(d).link,v=u.deep_link_id?decodeURIComponent(u.deep_link_id):void 0;return wh(v).link||v||m||d||p}(u);if(v.includes("/__/auth/callback")){const w=wh(v),R=w.firebaseError?function qg(p){try{return JSON.parse(p)}catch{return null}}(decodeURIComponent(w.firebaseError)):null,B=null===(m=null===(d=R?.code)||void 0===d?void 0:d.split("auth/"))||void 0===m?void 0:m[1],re=B?jt(B):null;return re?{type:p.type,eventId:p.eventId,tenantId:p.tenantId,error:re,urlResponse:null,sessionId:null,postBody:null}:{type:p.type,eventId:p.eventId,tenantId:p.tenantId,sessionId:p.sessionId,urlResponse:v,postBody:null}}return null}(Xt,ke.url)),d.onEvent(As||MA())});return function(Xt){return Le.apply(this,arguments)}}();typeof m<"u"&&"function"==typeof m.subscribe&&m.subscribe(null,B);const re=v,Ae=`${w.packageName.toLowerCase()}://`;li().handleOpenURL=function(){var Le=(0,D.A)(function*(ke){if(ke.toLowerCase().startsWith(Ae)&&B({url:ke}),"function"==typeof re)try{re(ke)}catch(Xt){console.error(Xt)}});return function(ke){return Le.apply(this,arguments)}}()}};function MA(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:jt("no-auth-event")}}function Th(){var p;return(null===(p=self?.location)||void 0===p?void 0:p.protocol)||null}function RA(p=(0,ee.ZQ)()){return!("file:"!==Th()&&"ionic:"!==Th()&&"capacitor:"!==Th()||!p.toLowerCase().match(/iphone|ipad|ipod|android/))}function OA(){try{const p=self.localStorage,u=Vl();if(p)return p.setItem(u,"1"),p.removeItem(u),!function OE(p=(0,ee.ZQ)()){return function pk(){return(0,ee.lT)()&&11===document?.documentMode}()||function RE(p=(0,ee.ZQ)()){return/Edge\/\d+/.test(p)}(p)}()||(0,ee.zW)()}catch{return NE()&&(0,ee.zW)()}return!1}function NE(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function xE(){return(function hk(){return"http:"===Th()||"https:"===Th()}()||(0,ee.sr)()||RA())&&!function fk(){return(0,ee.lV)()||(0,ee.Ll)()}()&&OA()&&!NE()}function NA(){return RA()&&typeof document<"u"}function bh(){return(bh=(0,D.A)(function*(){return!!NA()&&new Promise(p=>{const u=setTimeout(()=>{p(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(u),p(!0)})})})).apply(this,arguments)}const wi={LOCAL:"local",NONE:"none",SESSION:"session"},Au=fe,kE="persistence";function Ah(p){return Wg.apply(this,arguments)}function Wg(){return(Wg=(0,D.A)(function*(p){yield p._initializationPromise;const u=LE(),d=Ar(kE,p.config.apiKey,p.name);u&&u.setItem(d,p._getPersistence())})).apply(this,arguments)}function LE(){var p;try{return(null===(p=function us(){return typeof window<"u"?window:null}())||void 0===p?void 0:p.sessionStorage)||null}catch{return null}}const Qs=fe;class wo{constructor(){this.browserResolver=It(wu),this.cordovaResolver=It(ak),this.underlyingResolver=null,this._redirectPersistence=qs,this._completeRedirectFn=ph,this._overrideRedirectResult=dh}_initialize(u){var d=this;return(0,D.A)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(u)})()}_openPopup(u,d,m,v){var w=this;return(0,D.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openPopup(u,d,m,v)})()}_openRedirect(u,d,m,v){var w=this;return(0,D.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openRedirect(u,d,m,v)})()}_isIframeWebStorageSupported(u,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(u,d)}_originValidation(u){return this.assertedUnderlyingResolver._originValidation(u)}get _shouldInitProactively(){return NA()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Qs(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var u=this;return(0,D.A)(function*(){if(u.underlyingResolver)return;const d=yield function xA(){return bh.apply(this,arguments)}();u.underlyingResolver=d?u.cordovaResolver:u.browserResolver})()}}function Qg(p){return p.unwrap()}function Yg(p){return Zr(p)}function Zr(p){const{_tokenResponse:u}=p instanceof ee.g?p.customData:p;if(!u)return null;if(!(p instanceof ee.g)&&"temporaryProof"in u&&"phoneNumber"in u)return Hl.credentialFromResult(p);const d=u.providerId;if(!d||d===Kt.PASSWORD)return null;let m;switch(d){case Kt.GOOGLE:m=kv;break;case Kt.FACEBOOK:m=$b;break;case Kt.GITHUB:m=Hb;break;case Kt.TWITTER:m=zb;break;default:const{oauthIdToken:v,oauthAccessToken:w,oauthTokenSecret:R,pendingToken:B,nonce:re}=u;return w||R||v||B?B?d.startsWith("saml.")?Nl._create(d,B):go._fromParams({providerId:d,signInMethod:d,pendingToken:B,idToken:v,accessToken:w}):new Ol(d).credential({idToken:v,accessToken:w,rawNonce:re}):null}return p instanceof ee.g?m.credentialFromError(p):m.credentialFromResult(p)}function Ti(p,u){return u.catch(d=>{throw d instanceof ee.g&&function Su(p,u){var d;const m=null===(d=u.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===u?.code)u.resolver=new qi(p,function vg(p,u){var d;const m=(0,ee.Ku)(p),v=u;return fe(u.customData.operationType,m,"argument-error"),fe(null===(d=v.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,m,"argument-error"),aE._fromError(m,v)}(p,u));else if(m){const v=Zr(u),w=u;v&&(w.credential=v,w.tenantId=m.tenantId||void 0,w.email=m.email||void 0,w.phoneNumber=m.phoneNumber||void 0)}}(p,d),d}).then(d=>{const v=d.user;return{operationType:d.operationType,credential:Yg(d),additionalUserInfo:th(d),user:To.getOrCreate(v)}})}function Ka(p,u){return oa.apply(this,arguments)}function oa(){return(oa=(0,D.A)(function*(p,u){const d=yield u;return{verificationId:d.verificationId,confirm:m=>Ti(p,d.confirm(m))}})).apply(this,arguments)}class qi{constructor(u,d){this.resolver=d,this.auth=function Gt(p){return p.wrapped()}(u)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(u){return Ti(Qg(this.auth),this.resolver.resolveSignIn(u))}}class To{constructor(u){this._delegate=u,this.multiFactor=function at(p){const u=(0,ee.Ku)(p);return nh.has(u)||nh.set(u,$a._fromUser(u)),nh.get(u)}(u)}static getOrCreate(u){return To.USER_MAP.has(u)||To.USER_MAP.set(u,new To(u)),To.USER_MAP.get(u)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(u){return this._delegate.getIdTokenResult(u)}getIdToken(u){return this._delegate.getIdToken(u)}linkAndRetrieveDataWithCredential(u){return this.linkWithCredential(u)}linkWithCredential(u){var d=this;return(0,D.A)(function*(){return Ti(d.auth,hg(d._delegate,u))})()}linkWithPhoneNumber(u,d){var m=this;return(0,D.A)(function*(){return Ka(m.auth,function mE(p,u,d){return _u.apply(this,arguments)}(m._delegate,u,d))})()}linkWithPopup(u){var d=this;return(0,D.A)(function*(){return Ti(d.auth,function pA(p,u,d){return Ag.apply(this,arguments)}(d._delegate,u,wo))})()}linkWithRedirect(u){var d=this;return(0,D.A)(function*(){return yield Ah(Lt(d.auth)),IE(d._delegate,u,wo)})()}reauthenticateAndRetrieveDataWithCredential(u){return this.reauthenticateWithCredential(u)}reauthenticateWithCredential(u){var d=this;return(0,D.A)(function*(){return Ti(d.auth,ja(d._delegate,u))})()}reauthenticateWithPhoneNumber(u,d){return Ka(this.auth,function uh(p,u,d){return $l.apply(this,arguments)}(this._delegate,u,d))}reauthenticateWithPopup(u){return Ti(this.auth,function EE(p,u,d){return bg.apply(this,arguments)}(this._delegate,u,wo))}reauthenticateWithRedirect(u){var d=this;return(0,D.A)(function*(){return yield Ah(Lt(d.auth)),ra(d._delegate,u,wo)})()}sendEmailVerification(u){return function Wx(p,u){return pg.apply(this,arguments)}(this._delegate,u)}unlink(u){var d=this;return(0,D.A)(function*(){return yield function $x(p,u){return og.apply(this,arguments)}(d._delegate,u),d})()}updateEmail(u){return function Yx(p,u){const d=(0,ee.Ku)(p);return(0,Ne._isFirebaseServerApp)(d.auth.app)?Promise.reject(et(d.auth)):Zb(d,u,null)}(this._delegate,u)}updatePassword(u){return function Zx(p,u){return Zb((0,ee.Ku)(p),null,u)}(this._delegate,u)}updatePhoneNumber(u){return function dA(p,u){return yu.apply(this,arguments)}(this._delegate,u)}updateProfile(u){return function Je(p,u){return Xv.apply(this,arguments)}(this._delegate,u)}verifyBeforeUpdateEmail(u,d){return function Kx(p,u,d){return gg.apply(this,arguments)}(this._delegate,u,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}To.USER_MAP=new WeakMap;const Qa=fe;let VE=(()=>{class p{constructor(d,m){if(this.app=d,m.isInitialized())return this._delegate=m.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:v}=d.options;Qa(v,"invalid-api-key",{appName:d.name}),Qa(v,"invalid-api-key",{appName:d.name});const w=typeof window<"u"?wo:void 0;this._delegate=m.initialize({options:{persistence:UE(v,d.name),popupRedirectResolver:w}}),this._delegate._updateErrorMap(Ir),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?To.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,m){!function Wp(p,u,d){const m=Lt(p);fe(m._canInitEmulator,m,"emulator-config-failed"),fe(/^https?:\/\//.test(u),m,"invalid-emulator-scheme");const v=!!d?.disableWarnings,w=Pv(u),{host:R,port:B}=function Sb(p){const u=Pv(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(u.length));if(!d)return{host:"",port:null};const m=d[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(m);if(v){const w=v[1];return{host:w,port:Db(m.substr(w.length+1))}}{const[w,R]=m.split(":");return{host:w,port:Db(R)}}}(u);m.config.emulator={url:`${w}//${R}${null===B?"":`:${B}`}/`},m.settings.appVerificationDisabledForTesting=!0,m.emulatorConfig=Object.freeze({host:R,port:B,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function Kp(){function p(){const u=document.createElement("p"),d=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}(this._delegate,d,m)}applyActionCode(d){return function zx(p,u){return qt.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return Kv(this._delegate,d)}confirmPasswordReset(d,m){return function ln(p,u,d){return Wv.apply(this,arguments)}(this._delegate,d,m)}createUserWithEmailAndPassword(d,m){var v=this;return(0,D.A)(function*(){return Ti(v._delegate,function Qb(p,u,d){return rn.apply(this,arguments)}(v._delegate,d,m))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function Gx(p,u){return Jv.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function qx(p,u){const d=ou.parseLink(u);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,D.A)(function*(){Qa(xE(),d._delegate,"operation-not-supported-in-this-environment");const m=yield function _A(p,u){return zl.apply(this,arguments)}(d._delegate,wo);return m?Ti(d._delegate,Promise.resolve(m)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function lk(p,u){Lt(p)._logFramework(u)}(this._delegate,d)}onAuthStateChanged(d,m,v){const{next:w,error:R,complete:B}=Gi(d,m,v);return this._delegate.onAuthStateChanged(w,R,B)}onIdTokenChanged(d,m,v){const{next:w,error:R,complete:B}=Gi(d,m,v);return this._delegate.onIdTokenChanged(w,R,B)}sendSignInLinkToEmail(d,m){return function Xd(p,u,d){return si.apply(this,arguments)}(this._delegate,d,m)}sendPasswordResetEmail(d,m){return function kl(p,u,d){return Gv.apply(this,arguments)}(this._delegate,d,m||void 0)}setPersistence(d){var m=this;return(0,D.A)(function*(){let v;switch(function FE(p,u){Au(Object.values(wi).includes(u),p,"invalid-persistence-type"),(0,ee.lV)()?Au(u!==wi.SESSION,p,"unsupported-persistence-type"):(0,ee.Ll)()?Au(u===wi.NONE,p,"unsupported-persistence-type"):NE()?Au(u===wi.NONE||u===wi.LOCAL&&(0,ee.zW)(),p,"unsupported-persistence-type"):Au(u===wi.NONE||OA(),p,"unsupported-persistence-type")}(m._delegate,d),d){case wi.SESSION:v=qs;break;case wi.LOCAL:v=(yield It(Bl)._isAvailable())?Bl:Ll;break;case wi.NONE:v=pn;break;default:return Bt("argument-error",{appName:m._delegate.name})}return m._delegate.setPersistence(v)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return Ti(this._delegate,function qb(p){return sg.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return Ti(this._delegate,dg(this._delegate,d))}signInWithCustomToken(d){return Ti(this._delegate,function Hx(p,u){return Zd.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,m){return Ti(this._delegate,function tt(p,u,d){return(0,Ne._isFirebaseServerApp)(p.app)?Promise.reject(et(p)):dg((0,ee.Ku)(p),ig.credential(u,d)).catch(function(){var m=(0,D.A)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&Jd(p),v});return function(v){return m.apply(this,arguments)}}())}(this._delegate,d,m))}signInWithEmailLink(d,m){return Ti(this._delegate,function Yb(p,u,d){return Yv.apply(this,arguments)}(this._delegate,d,m))}signInWithPhoneNumber(d,m){return Ka(this._delegate,function Vt(p,u,d){return ls.apply(this,arguments)}(this._delegate,d,m))}signInWithPopup(d){var m=this;return(0,D.A)(function*(){return Qa(xE(),m._delegate,"operation-not-supported-in-this-environment"),Ti(m._delegate,function Ts(p,u,d){return Tg.apply(this,arguments)}(m._delegate,d,wo))})()}signInWithRedirect(d){var m=this;return(0,D.A)(function*(){return Qa(xE(),m._delegate,"operation-not-supported-in-this-environment"),yield Ah(m._delegate),yt(m._delegate,d,wo)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function fg(p,u){return Qv.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return p.Persistence=wi,p})();function Gi(p,u,d){let m=p;"function"!=typeof p&&({next:m,error:u,complete:d}=p);const v=m;return{next:R=>v(R&&To.getOrCreate(R)),error:u,complete:d}}function UE(p,u){const d=function Kg(p,u){const d=LE();if(!d)return[];const m=Ar(kE,p,u);switch(d.getItem(m)){case wi.NONE:return[pn];case wi.LOCAL:return[Bl,qs];case wi.SESSION:return[qs];default:return[]}}(p,u);if(typeof self<"u"&&!d.includes(Bl)&&d.push(Bl),typeof window<"u")for(const m of[Ll,qs])d.includes(m)||d.push(m);return d.includes(pn)||d.push(pn),d}class Zg{constructor(){this.providerId="phone",this._delegate=new Hl(Qg(Be.A.auth()))}static credential(u,d){return Hl.credential(u,d)}verifyPhoneNumber(u,d){return this._delegate.verifyPhoneNumber(u,d)}unwrap(){return this._delegate}}Zg.PHONE_SIGN_IN_METHOD=Hl.PHONE_SIGN_IN_METHOD,Zg.PROVIDER_ID=Hl.PROVIDER_ID;const BE=fe;class Du{constructor(u,d,m=Be.A.app()){var v;BE(null===(v=m.options)||void 0===v?void 0:v.apiKey,"invalid-api-key",{appName:m.name}),this._delegate=new ik(m.auth(),u,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Sh(p){p.INTERNAL.registerComponent(new Kn.uA("auth-compat",u=>{const d=u.getProvider("app-compat").getImmediate(),m=u.getProvider("auth");return new VE(d,m)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ig,FacebookAuthProvider:$b,GithubAuthProvider:Hb,GoogleAuthProvider:kv,OAuthProvider:Ol,SAMLAuthProvider:Yd,PhoneAuthProvider:Zg,PhoneMultiFactorGenerator:Ke,RecaptchaVerifier:Du,TwitterAuthProvider:zb,Auth:VE,AuthCredential:Ua,Error:ee.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),p.registerVersion("@firebase/auth-compat","0.5.11")}(Be.A)},467:(uo,kr,ut)=>{function D(Ne,ee,hn,je,Kn,Fr,Kt){try{var de=Ne[Fr](Kt),me=de.value}catch($e){return void hn($e)}de.done?ee(me):Promise.resolve(me).then(je,Kn)}function Be(Ne){return function(){var ee=this,hn=arguments;return new Promise(function(je,Kn){var Fr=Ne.apply(ee,hn);function Kt(me){D(Fr,je,Kn,Kt,de,"next",me)}function de(me){D(Fr,je,Kn,Kt,de,"throw",me)}Kt(void 0)})}}ut.d(kr,{A:()=>Be})},1635:(uo,kr,ut)=>{function ee(K,X){var ae={};for(var le in K)Object.prototype.hasOwnProperty.call(K,le)&&X.indexOf(le)<0&&(ae[le]=K[le]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var Ie=0;for(le=Object.getOwnPropertySymbols(K);Ie<le.length;Ie++)X.indexOf(le[Ie])<0&&Object.prototype.propertyIsEnumerable.call(K,le[Ie])&&(ae[le[Ie]]=K[le[Ie]])}return ae}function $e(K,X,ae,le){return new(ae||(ae=Promise))(function(ce,Oe){function Pt(Mt){try{Ye(le.next(Mt))}catch(fn){Oe(fn)}}function Yn(Mt){try{Ye(le.throw(Mt))}catch(fn){Oe(fn)}}function Ye(Mt){Mt.done?ce(Mt.value):function Ie(ce){return ce instanceof ae?ce:new ae(function(Oe){Oe(ce)})}(Mt.value).then(Pt,Yn)}Ye((le=le.apply(K,X||[])).next())})}function yn(K){return this instanceof yn?(this.v=K,this):new yn(K)}function Bt(K,X,ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,le=ae.apply(K,X||[]),ce=[];return Ie={},Pt("next"),Pt("throw"),Pt("return",function Oe(Ht){return function(Zn){return Promise.resolve(Zn).then(Ht,fn)}}),Ie[Symbol.asyncIterator]=function(){return this},Ie;function Pt(Ht,Zn){le[Ht]&&(Ie[Ht]=function(wn){return new Promise(function(zt,ii){ce.push([Ht,wn,zt,ii])>1||Yn(Ht,wn)})},Zn&&(Ie[Ht]=Zn(Ie[Ht])))}function Yn(Ht,Zn){try{!function Ye(Ht){Ht.value instanceof yn?Promise.resolve(Ht.value.v).then(Mt,fn):St(ce[0][2],Ht)}(le[Ht](Zn))}catch(wn){St(ce[0][3],wn)}}function Mt(Ht){Yn("next",Ht)}function fn(Ht){Yn("throw",Ht)}function St(Ht,Zn){Ht(Zn),ce.shift(),ce.length&&Yn(ce[0][0],ce[0][1])}}function pi(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,X=K[Symbol.asyncIterator];return X?X.call(K):(K=function Qt(K){var X="function"==typeof Symbol&&Symbol.iterator,ae=X&&K[X],le=0;if(ae)return ae.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&le>=K.length&&(K=void 0),{value:K&&K[le++],done:!K}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),ae={},le("next"),le("throw"),le("return"),ae[Symbol.asyncIterator]=function(){return this},ae);function le(ce){ae[ce]=K[ce]&&function(Oe){return new Promise(function(Pt,Yn){!function Ie(ce,Oe,Pt,Yn){Promise.resolve(Yn).then(function(Ye){ce({value:Ye,done:Pt})},Oe)}(Pt,Yn,(Oe=K[ce](Oe)).done,Oe.value)})}}}ut.d(kr,{AQ:()=>Bt,N3:()=>yn,Tt:()=>ee,sH:()=>$e,xN:()=>pi}),"function"==typeof SuppressedError&&SuppressedError}},uo=>{uo(uo.s=739)}]);